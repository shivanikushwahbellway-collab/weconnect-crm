function UR(e,r){for(var a=0;a<r.length;a++){const s=r[a];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const i=Object.getOwnPropertyDescriptor(s,n);i&&Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();function di(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gp={exports:{}},lu={},Yp={exports:{}},zt={};var PS;function FR(){if(PS)return zt;PS=1;var e=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),f=Symbol.iterator;function y(T){return T===null||typeof T!="object"?null:(T=f&&T[f]||T["@@iterator"],typeof T=="function"?T:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,j={};function v(T,_,F){this.props=T,this.context=_,this.refs=j,this.updater=F||p}v.prototype.isReactComponent={},v.prototype.setState=function(T,_){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,_,"setState")},v.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function N(){}N.prototype=v.prototype;function k(T,_,F){this.props=T,this.context=_,this.refs=j,this.updater=F||p}var E=k.prototype=new N;E.constructor=k,b(E,v.prototype),E.isPureReactComponent=!0;var C=Array.isArray,S=Object.prototype.hasOwnProperty,P={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function I(T,_,F){var ee,Z={},U=null,X=null;if(_!=null)for(ee in _.ref!==void 0&&(X=_.ref),_.key!==void 0&&(U=""+_.key),_)S.call(_,ee)&&!D.hasOwnProperty(ee)&&(Z[ee]=_[ee]);var Q=arguments.length-2;if(Q===1)Z.children=F;else if(1<Q){for(var V=Array(Q),ge=0;ge<Q;ge++)V[ge]=arguments[ge+2];Z.children=V}if(T&&T.defaultProps)for(ee in Q=T.defaultProps,Q)Z[ee]===void 0&&(Z[ee]=Q[ee]);return{$$typeof:e,type:T,key:U,ref:X,props:Z,_owner:P.current}}function H(T,_){return{$$typeof:e,type:T.type,key:_,ref:T.ref,props:T.props,_owner:T._owner}}function W(T){return typeof T=="object"&&T!==null&&T.$$typeof===e}function K(T){var _={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(F){return _[F]})}var B=/\/+/g;function z(T,_){return typeof T=="object"&&T!==null&&T.key!=null?K(""+T.key):_.toString(36)}function q(T,_,F,ee,Z){var U=typeof T;(U==="undefined"||U==="boolean")&&(T=null);var X=!1;if(T===null)X=!0;else switch(U){case"string":case"number":X=!0;break;case"object":switch(T.$$typeof){case e:case r:X=!0}}if(X)return X=T,Z=Z(X),T=ee===""?"."+z(X,0):ee,C(Z)?(F="",T!=null&&(F=T.replace(B,"$&/")+"/"),q(Z,_,F,"",function(ge){return ge})):Z!=null&&(W(Z)&&(Z=H(Z,F+(!Z.key||X&&X.key===Z.key?"":(""+Z.key).replace(B,"$&/")+"/")+T)),_.push(Z)),1;if(X=0,ee=ee===""?".":ee+":",C(T))for(var Q=0;Q<T.length;Q++){U=T[Q];var V=ee+z(U,Q);X+=q(U,_,F,V,Z)}else if(V=y(T),typeof V=="function")for(T=V.call(T),Q=0;!(U=T.next()).done;)U=U.value,V=ee+z(U,Q++),X+=q(U,_,F,V,Z);else if(U==="object")throw _=String(T),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return X}function J(T,_,F){if(T==null)return T;var ee=[],Z=0;return q(T,ee,"","",function(U){return _.call(F,U,Z++)}),ee}function ae(T){if(T._status===-1){var _=T._result;_=_(),_.then(function(F){(T._status===0||T._status===-1)&&(T._status=1,T._result=F)},function(F){(T._status===0||T._status===-1)&&(T._status=2,T._result=F)}),T._status===-1&&(T._status=0,T._result=_)}if(T._status===1)return T._result.default;throw T._result}var ne={current:null},re={transition:null},L={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:re,ReactCurrentOwner:P};function G(){throw Error("act(...) is not supported in production builds of React.")}return zt.Children={map:J,forEach:function(T,_,F){J(T,function(){_.apply(this,arguments)},F)},count:function(T){var _=0;return J(T,function(){_++}),_},toArray:function(T){return J(T,function(_){return _})||[]},only:function(T){if(!W(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},zt.Component=v,zt.Fragment=a,zt.Profiler=n,zt.PureComponent=k,zt.StrictMode=s,zt.Suspense=u,zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,zt.act=G,zt.cloneElement=function(T,_,F){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var ee=b({},T.props),Z=T.key,U=T.ref,X=T._owner;if(_!=null){if(_.ref!==void 0&&(U=_.ref,X=P.current),_.key!==void 0&&(Z=""+_.key),T.type&&T.type.defaultProps)var Q=T.type.defaultProps;for(V in _)S.call(_,V)&&!D.hasOwnProperty(V)&&(ee[V]=_[V]===void 0&&Q!==void 0?Q[V]:_[V])}var V=arguments.length-2;if(V===1)ee.children=F;else if(1<V){Q=Array(V);for(var ge=0;ge<V;ge++)Q[ge]=arguments[ge+2];ee.children=Q}return{$$typeof:e,type:T.type,key:Z,ref:U,props:ee,_owner:X}},zt.createContext=function(T){return T={$$typeof:o,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:i,_context:T},T.Consumer=T},zt.createElement=I,zt.createFactory=function(T){var _=I.bind(null,T);return _.type=T,_},zt.createRef=function(){return{current:null}},zt.forwardRef=function(T){return{$$typeof:c,render:T}},zt.isValidElement=W,zt.lazy=function(T){return{$$typeof:g,_payload:{_status:-1,_result:T},_init:ae}},zt.memo=function(T,_){return{$$typeof:m,type:T,compare:_===void 0?null:_}},zt.startTransition=function(T){var _=re.transition;re.transition={};try{T()}finally{re.transition=_}},zt.unstable_act=G,zt.useCallback=function(T,_){return ne.current.useCallback(T,_)},zt.useContext=function(T){return ne.current.useContext(T)},zt.useDebugValue=function(){},zt.useDeferredValue=function(T){return ne.current.useDeferredValue(T)},zt.useEffect=function(T,_){return ne.current.useEffect(T,_)},zt.useId=function(){return ne.current.useId()},zt.useImperativeHandle=function(T,_,F){return ne.current.useImperativeHandle(T,_,F)},zt.useInsertionEffect=function(T,_){return ne.current.useInsertionEffect(T,_)},zt.useLayoutEffect=function(T,_){return ne.current.useLayoutEffect(T,_)},zt.useMemo=function(T,_){return ne.current.useMemo(T,_)},zt.useReducer=function(T,_,F){return ne.current.useReducer(T,_,F)},zt.useRef=function(T){return ne.current.useRef(T)},zt.useState=function(T){return ne.current.useState(T)},zt.useSyncExternalStore=function(T,_,F){return ne.current.useSyncExternalStore(T,_,F)},zt.useTransition=function(){return ne.current.useTransition()},zt.version="18.3.1",zt}var TS;function rd(){return TS||(TS=1,Yp.exports=FR()),Yp.exports}var DS;function zR(){if(DS)return lu;DS=1;var e=rd(),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,n=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(c,u,m){var g,f={},y=null,p=null;m!==void 0&&(y=""+m),u.key!==void 0&&(y=""+u.key),u.ref!==void 0&&(p=u.ref);for(g in u)s.call(u,g)&&!i.hasOwnProperty(g)&&(f[g]=u[g]);if(c&&c.defaultProps)for(g in u=c.defaultProps,u)f[g]===void 0&&(f[g]=u[g]);return{$$typeof:r,type:c,key:y,ref:p,props:f,_owner:n.current}}return lu.Fragment=a,lu.jsx=o,lu.jsxs=o,lu}var OS;function BR(){return OS||(OS=1,Gp.exports=zR()),Gp.exports}var t=BR(),h=rd();const Fe=di(h),aT=UR({__proto__:null,default:Fe},[h]);var eh={},Qp={exports:{}},Ss={},Xp={exports:{}},Zp={};var IS;function qR(){return IS||(IS=1,(function(e){function r(re,L){var G=re.length;re.push(L);e:for(;0<G;){var T=G-1>>>1,_=re[T];if(0<n(_,L))re[T]=L,re[G]=_,G=T;else break e}}function a(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var L=re[0],G=re.pop();if(G!==L){re[0]=G;e:for(var T=0,_=re.length,F=_>>>1;T<F;){var ee=2*(T+1)-1,Z=re[ee],U=ee+1,X=re[U];if(0>n(Z,G))U<_&&0>n(X,Z)?(re[T]=X,re[U]=G,T=U):(re[T]=Z,re[ee]=G,T=ee);else if(U<_&&0>n(X,G))re[T]=X,re[U]=G,T=U;else break e}}return L}function n(re,L){var G=re.sortIndex-L.sortIndex;return G!==0?G:re.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var u=[],m=[],g=1,f=null,y=3,p=!1,b=!1,j=!1,v=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(re){for(var L=a(m);L!==null;){if(L.callback===null)s(m);else if(L.startTime<=re)s(m),L.sortIndex=L.expirationTime,r(u,L);else break;L=a(m)}}function C(re){if(j=!1,E(re),!b)if(a(u)!==null)b=!0,ae(S);else{var L=a(m);L!==null&&ne(C,L.startTime-re)}}function S(re,L){b=!1,j&&(j=!1,N(I),I=-1),p=!0;var G=y;try{for(E(L),f=a(u);f!==null&&(!(f.expirationTime>L)||re&&!K());){var T=f.callback;if(typeof T=="function"){f.callback=null,y=f.priorityLevel;var _=T(f.expirationTime<=L);L=e.unstable_now(),typeof _=="function"?f.callback=_:f===a(u)&&s(u),E(L)}else s(u);f=a(u)}if(f!==null)var F=!0;else{var ee=a(m);ee!==null&&ne(C,ee.startTime-L),F=!1}return F}finally{f=null,y=G,p=!1}}var P=!1,D=null,I=-1,H=5,W=-1;function K(){return!(e.unstable_now()-W<H)}function B(){if(D!==null){var re=e.unstable_now();W=re;var L=!0;try{L=D(!0,re)}finally{L?z():(P=!1,D=null)}}else P=!1}var z;if(typeof k=="function")z=function(){k(B)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,J=q.port2;q.port1.onmessage=B,z=function(){J.postMessage(null)}}else z=function(){v(B,0)};function ae(re){D=re,P||(P=!0,z())}function ne(re,L){I=v(function(){re(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){b||p||(b=!0,ae(S))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return a(u)},e.unstable_next=function(re){switch(y){case 1:case 2:case 3:var L=3;break;default:L=y}var G=y;y=L;try{return re()}finally{y=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,L){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var G=y;y=re;try{return L()}finally{y=G}},e.unstable_scheduleCallback=function(re,L,G){var T=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?T+G:T):G=T,re){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=G+_,re={id:g++,callback:L,priorityLevel:re,startTime:G,expirationTime:_,sortIndex:-1},G>T?(re.sortIndex=G,r(m,re),a(u)===null&&re===a(m)&&(j?(N(I),I=-1):j=!0,ne(C,G-T))):(re.sortIndex=_,r(u,re),b||p||(b=!0,ae(S))),re},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(re){var L=y;return function(){var G=y;y=L;try{return re.apply(this,arguments)}finally{y=G}}}})(Zp)),Zp}var LS;function HR(){return LS||(LS=1,Xp.exports=qR()),Xp.exports}var RS;function WR(){if(RS)return Ss;RS=1;var e=rd(),r=HR();function a(l){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+l,x=1;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,n={};function i(l,d){o(l,d),o(l+"Capture",d)}function o(l,d){for(n[l]=d,l=0;l<d.length;l++)s.add(d[l])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},f={};function y(l){return u.call(f,l)?!0:u.call(g,l)?!1:m.test(l)?f[l]=!0:(g[l]=!0,!1)}function p(l,d,x,w){if(x!==null&&x.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return w?!1:x!==null?!x.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function b(l,d,x,w){if(d===null||typeof d>"u"||p(l,d,x,w))return!0;if(w)return!1;if(x!==null)switch(x.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function j(l,d,x,w,A,O,$){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=w,this.attributeNamespace=A,this.mustUseProperty=x,this.propertyName=l,this.type=d,this.sanitizeURL=O,this.removeEmptyString=$}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){v[l]=new j(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var d=l[0];v[d]=new j(d,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){v[l]=new j(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){v[l]=new j(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){v[l]=new j(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){v[l]=new j(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){v[l]=new j(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){v[l]=new j(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){v[l]=new j(l,5,!1,l.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function k(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var d=l.replace(N,k);v[d]=new j(d,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var d=l.replace(N,k);v[d]=new j(d,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var d=l.replace(N,k);v[d]=new j(d,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){v[l]=new j(l,1,!1,l.toLowerCase(),null,!1,!1)}),v.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){v[l]=new j(l,1,!1,l.toLowerCase(),null,!0,!0)});function E(l,d,x,w){var A=v.hasOwnProperty(d)?v[d]:null;(A!==null?A.type!==0:w||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(b(d,x,A,w)&&(x=null),w||A===null?y(d)&&(x===null?l.removeAttribute(d):l.setAttribute(d,""+x)):A.mustUseProperty?l[A.propertyName]=x===null?A.type===3?!1:"":x:(d=A.attributeName,w=A.attributeNamespace,x===null?l.removeAttribute(d):(A=A.type,x=A===3||A===4&&x===!0?"":""+x,w?l.setAttributeNS(w,d,x):l.setAttribute(d,x))))}var C=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),P=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),K=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),re=Symbol.iterator;function L(l){return l===null||typeof l!="object"?null:(l=re&&l[re]||l["@@iterator"],typeof l=="function"?l:null)}var G=Object.assign,T;function _(l){if(T===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);T=d&&d[1]||""}return`
`+T+l}var F=!1;function ee(l,d){if(!l||F)return"";F=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Se){var w=Se}Reflect.construct(l,[],d)}else{try{d.call()}catch(Se){w=Se}l.call(d.prototype)}else{try{throw Error()}catch(Se){w=Se}l()}}catch(Se){if(Se&&w&&typeof Se.stack=="string"){for(var A=Se.stack.split(`
`),O=w.stack.split(`
`),$=A.length-1,te=O.length-1;1<=$&&0<=te&&A[$]!==O[te];)te--;for(;1<=$&&0<=te;$--,te--)if(A[$]!==O[te]){if($!==1||te!==1)do if($--,te--,0>te||A[$]!==O[te]){var ie=`
`+A[$].replace(" at new "," at ");return l.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",l.displayName)),ie}while(1<=$&&0<=te);break}}}finally{F=!1,Error.prepareStackTrace=x}return(l=l?l.displayName||l.name:"")?_(l):""}function Z(l){switch(l.tag){case 5:return _(l.type);case 16:return _("Lazy");case 13:return _("Suspense");case 19:return _("SuspenseList");case 0:case 2:case 15:return l=ee(l.type,!1),l;case 11:return l=ee(l.type.render,!1),l;case 1:return l=ee(l.type,!0),l;default:return""}}function U(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case D:return"Fragment";case P:return"Portal";case H:return"Profiler";case I:return"StrictMode";case z:return"Suspense";case q:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case K:return(l.displayName||"Context")+".Consumer";case W:return(l._context.displayName||"Context")+".Provider";case B:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case J:return d=l.displayName||null,d!==null?d:U(l.type)||"Memo";case ae:d=l._payload,l=l._init;try{return U(l(d))}catch{}}return null}function X(l){var d=l.type;switch(l.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=d.render,l=l.displayName||l.name||"",d.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(d);case 8:return d===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Q(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function V(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function ge(l){var d=V(l)?"checked":"value",x=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),w=""+l[d];if(!l.hasOwnProperty(d)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var A=x.get,O=x.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return A.call(this)},set:function($){w=""+$,O.call(this,$)}}),Object.defineProperty(l,d,{enumerable:x.enumerable}),{getValue:function(){return w},setValue:function($){w=""+$},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Te(l){l._valueTracker||(l._valueTracker=ge(l))}function xe(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var x=d.getValue(),w="";return l&&(w=V(l)?l.checked?"true":"false":l.value),l=w,l!==x?(d.setValue(l),!0):!1}function qe(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function se(l,d){var x=d.checked;return G({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??l._wrapperState.initialChecked})}function De(l,d){var x=d.defaultValue==null?"":d.defaultValue,w=d.checked!=null?d.checked:d.defaultChecked;x=Q(d.value!=null?d.value:x),l._wrapperState={initialChecked:w,initialValue:x,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Me(l,d){d=d.checked,d!=null&&E(l,"checked",d,!1)}function Ct(l,d){Me(l,d);var x=Q(d.value),w=d.type;if(x!=null)w==="number"?(x===0&&l.value===""||l.value!=x)&&(l.value=""+x):l.value!==""+x&&(l.value=""+x);else if(w==="submit"||w==="reset"){l.removeAttribute("value");return}d.hasOwnProperty("value")?Mt(l,d.type,x):d.hasOwnProperty("defaultValue")&&Mt(l,d.type,Q(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(l.defaultChecked=!!d.defaultChecked)}function Dt(l,d,x){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var w=d.type;if(!(w!=="submit"&&w!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+l._wrapperState.initialValue,x||d===l.value||(l.value=d),l.defaultValue=d}x=l.name,x!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,x!==""&&(l.name=x)}function Mt(l,d,x){(d!=="number"||qe(l.ownerDocument)!==l)&&(x==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+x&&(l.defaultValue=""+x))}var jt=Array.isArray;function le(l,d,x,w){if(l=l.options,d){d={};for(var A=0;A<x.length;A++)d["$"+x[A]]=!0;for(x=0;x<l.length;x++)A=d.hasOwnProperty("$"+l[x].value),l[x].selected!==A&&(l[x].selected=A),A&&w&&(l[x].defaultSelected=!0)}else{for(x=""+Q(x),d=null,A=0;A<l.length;A++){if(l[A].value===x){l[A].selected=!0,w&&(l[A].defaultSelected=!0);return}d!==null||l[A].disabled||(d=l[A])}d!==null&&(d.selected=!0)}}function Xe(l,d){if(d.dangerouslySetInnerHTML!=null)throw Error(a(91));return G({},d,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function Ke(l,d){var x=d.value;if(x==null){if(x=d.children,d=d.defaultValue,x!=null){if(d!=null)throw Error(a(92));if(jt(x)){if(1<x.length)throw Error(a(93));x=x[0]}d=x}d==null&&(d=""),x=d}l._wrapperState={initialValue:Q(x)}}function Ne(l,d){var x=Q(d.value),w=Q(d.defaultValue);x!=null&&(x=""+x,x!==l.value&&(l.value=x),d.defaultValue==null&&l.defaultValue!==x&&(l.defaultValue=x)),w!=null&&(l.defaultValue=""+w)}function Nt(l){var d=l.textContent;d===l._wrapperState.initialValue&&d!==""&&d!==null&&(l.value=d)}function _t(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(l,d){return l==null||l==="http://www.w3.org/1999/xhtml"?_t(d):l==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Ot,R=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,x,w,A){MSApp.execUnsafeLocalFunction(function(){return l(d,x,w,A)})}:l})(function(l,d){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=d;else{for(Ot=Ot||document.createElement("div"),Ot.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Ot.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;d.firstChild;)l.appendChild(d.firstChild)}});function ce(l,d){if(d){var x=l.firstChild;if(x&&x===l.lastChild&&x.nodeType===3){x.nodeValue=d;return}}l.textContent=d}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ue=["Webkit","ms","Moz","O"];Object.keys(de).forEach(function(l){ue.forEach(function(d){d=d+l.charAt(0).toUpperCase()+l.substring(1),de[d]=de[l]})});function Pe(l,d,x){return d==null||typeof d=="boolean"||d===""?"":x||typeof d!="number"||d===0||de.hasOwnProperty(l)&&de[l]?(""+d).trim():d+"px"}function pe(l,d){l=l.style;for(var x in d)if(d.hasOwnProperty(x)){var w=x.indexOf("--")===0,A=Pe(x,d[x],w);x==="float"&&(x="cssFloat"),w?l.setProperty(x,A):l[x]=A}}var ve=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ve(l,d){if(d){if(ve[l]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(a(137,l));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(a(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(a(61))}if(d.style!=null&&typeof d.style!="object")throw Error(a(62))}}function Ge(l,d){if(l.indexOf("-")===-1)return typeof d.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $t=null;function Qt(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var qt=null,Xt=null,Ut=null;function Ft(l){if(l=Kd(l)){if(typeof qt!="function")throw Error(a(280));var d=l.stateNode;d&&(d=fg(d),qt(l.stateNode,l.type,d))}}function lr(l){Xt?Ut?Ut.push(l):Ut=[l]:Xt=l}function ia(){if(Xt){var l=Xt,d=Ut;if(Ut=Xt=null,Ft(l),d)for(l=0;l<d.length;l++)Ft(d[l])}}function pr(l,d){return l(d)}function cr(){}var Vr=!1;function Ca(l,d,x){if(Vr)return l(d,x);Vr=!0;try{return pr(l,d,x)}finally{Vr=!1,(Xt!==null||Ut!==null)&&(cr(),ia())}}function rr(l,d){var x=l.stateNode;if(x===null)return null;var w=fg(x);if(w===null)return null;x=w[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(l=l.type,w=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!w;break e;default:l=!1}if(l)return null;if(x&&typeof x!="function")throw Error(a(231,d,typeof x));return x}var jr=!1;if(c)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){jr=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{jr=!1}function Fr(l,d,x,w,A,O,$,te,ie){var Se=Array.prototype.slice.call(arguments,3);try{d.apply(x,Se)}catch(Le){this.onError(Le)}}var fe=!1,Ue=null,gt=!1,ft=null,Et={onError:function(l){fe=!0,Ue=l}};function vs(l,d,x,w,A,O,$,te,ie){fe=!1,Ue=null,Fr.apply(Et,arguments)}function Xs(l,d,x,w,A,O,$,te,ie){if(vs.apply(this,arguments),fe){if(fe){var Se=Ue;fe=!1,Ue=null}else throw Error(a(198));gt||(gt=!0,ft=Se)}}function ke(l){var d=l,x=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(x=d.return),l=d.return;while(l)}return d.tag===3?x:null}function $e(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function He(l){if(ke(l)!==l)throw Error(a(188))}function Ht(l){var d=l.alternate;if(!d){if(d=ke(l),d===null)throw Error(a(188));return d!==l?null:l}for(var x=l,w=d;;){var A=x.return;if(A===null)break;var O=A.alternate;if(O===null){if(w=A.return,w!==null){x=w;continue}break}if(A.child===O.child){for(O=A.child;O;){if(O===x)return He(A),l;if(O===w)return He(A),d;O=O.sibling}throw Error(a(188))}if(x.return!==w.return)x=A,w=O;else{for(var $=!1,te=A.child;te;){if(te===x){$=!0,x=A,w=O;break}if(te===w){$=!0,w=A,x=O;break}te=te.sibling}if(!$){for(te=O.child;te;){if(te===x){$=!0,x=O,w=A;break}if(te===w){$=!0,w=O,x=A;break}te=te.sibling}if(!$)throw Error(a(189))}}if(x.alternate!==w)throw Error(a(190))}if(x.tag!==3)throw Error(a(188));return x.stateNode.current===x?l:d}function wt(l){return l=Ht(l),l!==null?Rs(l):null}function Rs(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var d=Rs(l);if(d!==null)return d;l=l.sibling}return null}var ye=r.unstable_scheduleCallback,Re=r.unstable_cancelCallback,Be=r.unstable_shouldYield,Kt=r.unstable_requestPaint,Y=r.unstable_now,Ae=r.unstable_getCurrentPriorityLevel,We=r.unstable_ImmediatePriority,bt=r.unstable_UserBlockingPriority,et=r.unstable_NormalPriority,br=r.unstable_LowPriority,ga=r.unstable_IdlePriority,Ms=null,Zs=null;function Ad(l){if(Zs&&typeof Zs.onCommitFiberRoot=="function")try{Zs.onCommitFiberRoot(Ms,l,void 0,(l.current.flags&128)===128)}catch{}}var Ea=Math.clz32?Math.clz32:ro,Zl=Math.log,_s=Math.LN2;function ro(l){return l>>>=0,l===0?32:31-(Zl(l)/_s|0)|0}var Jr=64,za=4194304;function Ba(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function fi(l,d){var x=l.pendingLanes;if(x===0)return 0;var w=0,A=l.suspendedLanes,O=l.pingedLanes,$=x&268435455;if($!==0){var te=$&~A;te!==0?w=Ba(te):(O&=$,O!==0&&(w=Ba(O)))}else $=x&~A,$!==0?w=Ba($):O!==0&&(w=Ba(O));if(w===0)return 0;if(d!==0&&d!==w&&(d&A)===0&&(A=w&-w,O=d&-d,A>=O||A===16&&(O&4194240)!==0))return d;if((w&4)!==0&&(w|=x&16),d=l.entangledLanes,d!==0)for(l=l.entanglements,d&=w;0<d;)x=31-Ea(d),A=1<<x,w|=l[x],d&=~A;return w}function Jl(l,d){switch(l){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jm(l,d){for(var x=l.suspendedLanes,w=l.pingedLanes,A=l.expirationTimes,O=l.pendingLanes;0<O;){var $=31-Ea(O),te=1<<$,ie=A[$];ie===-1?((te&x)===0||(te&w)!==0)&&(A[$]=Jl(te,d)):ie<=d&&(l.expiredLanes|=te),O&=~te}}function Jo(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function ao(){var l=Jr;return Jr<<=1,(Jr&4194240)===0&&(Jr=64),l}function Pd(l){for(var d=[],x=0;31>x;x++)d.push(l);return d}function Td(l,d,x){l.pendingLanes|=d,d!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,d=31-Ea(d),l[d]=x}function iL(l,d){var x=l.pendingLanes&~d;l.pendingLanes=d,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=d,l.mutableReadLanes&=d,l.entangledLanes&=d,d=l.entanglements;var w=l.eventTimes;for(l=l.expirationTimes;0<x;){var A=31-Ea(x),O=1<<A;d[A]=0,w[A]=-1,l[A]=-1,x&=~O}}function px(l,d){var x=l.entangledLanes|=d;for(l=l.entanglements;x;){var w=31-Ea(x),A=1<<w;A&d|l[w]&d&&(l[w]|=d),x&=~A}}var mr=0;function ok(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var lk,yx,ck,dk,uk,vx=!1,eg=[],so=null,no=null,io=null,Dd=new Map,Od=new Map,oo=[],oL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mk(l,d){switch(l){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":io=null;break;case"pointerover":case"pointerout":Dd.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Od.delete(d.pointerId)}}function Id(l,d,x,w,A,O){return l===null||l.nativeEvent!==O?(l={blockedOn:d,domEventName:x,eventSystemFlags:w,nativeEvent:O,targetContainers:[A]},d!==null&&(d=Kd(d),d!==null&&yx(d)),l):(l.eventSystemFlags|=w,d=l.targetContainers,A!==null&&d.indexOf(A)===-1&&d.push(A),l)}function lL(l,d,x,w,A){switch(d){case"focusin":return so=Id(so,l,d,x,w,A),!0;case"dragenter":return no=Id(no,l,d,x,w,A),!0;case"mouseover":return io=Id(io,l,d,x,w,A),!0;case"pointerover":var O=A.pointerId;return Dd.set(O,Id(Dd.get(O)||null,l,d,x,w,A)),!0;case"gotpointercapture":return O=A.pointerId,Od.set(O,Id(Od.get(O)||null,l,d,x,w,A)),!0}return!1}function gk(l){var d=el(l.target);if(d!==null){var x=ke(d);if(x!==null){if(d=x.tag,d===13){if(d=$e(x),d!==null){l.blockedOn=d,uk(l.priority,function(){ck(x)});return}}else if(d===3&&x.stateNode.current.memoizedState.isDehydrated){l.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}l.blockedOn=null}function tg(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var x=wx(l.domEventName,l.eventSystemFlags,d[0],l.nativeEvent);if(x===null){x=l.nativeEvent;var w=new x.constructor(x.type,x);$t=w,x.target.dispatchEvent(w),$t=null}else return d=Kd(x),d!==null&&yx(d),l.blockedOn=x,!1;d.shift()}return!0}function hk(l,d,x){tg(l)&&x.delete(d)}function cL(){vx=!1,so!==null&&tg(so)&&(so=null),no!==null&&tg(no)&&(no=null),io!==null&&tg(io)&&(io=null),Dd.forEach(hk),Od.forEach(hk)}function Ld(l,d){l.blockedOn===d&&(l.blockedOn=null,vx||(vx=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,cL)))}function Rd(l){function d(A){return Ld(A,l)}if(0<eg.length){Ld(eg[0],l);for(var x=1;x<eg.length;x++){var w=eg[x];w.blockedOn===l&&(w.blockedOn=null)}}for(so!==null&&Ld(so,l),no!==null&&Ld(no,l),io!==null&&Ld(io,l),Dd.forEach(d),Od.forEach(d),x=0;x<oo.length;x++)w=oo[x],w.blockedOn===l&&(w.blockedOn=null);for(;0<oo.length&&(x=oo[0],x.blockedOn===null);)gk(x),x.blockedOn===null&&oo.shift()}var ec=C.ReactCurrentBatchConfig,rg=!0;function dL(l,d,x,w){var A=mr,O=ec.transition;ec.transition=null;try{mr=1,bx(l,d,x,w)}finally{mr=A,ec.transition=O}}function uL(l,d,x,w){var A=mr,O=ec.transition;ec.transition=null;try{mr=4,bx(l,d,x,w)}finally{mr=A,ec.transition=O}}function bx(l,d,x,w){if(rg){var A=wx(l,d,x,w);if(A===null)$x(l,d,w,ag,x),mk(l,w);else if(lL(A,l,d,x,w))w.stopPropagation();else if(mk(l,w),d&4&&-1<oL.indexOf(l)){for(;A!==null;){var O=Kd(A);if(O!==null&&lk(O),O=wx(l,d,x,w),O===null&&$x(l,d,w,ag,x),O===A)break;A=O}A!==null&&w.stopPropagation()}else $x(l,d,w,null,x)}}var ag=null;function wx(l,d,x,w){if(ag=null,l=Qt(w),l=el(l),l!==null)if(d=ke(l),d===null)l=null;else if(x=d.tag,x===13){if(l=$e(d),l!==null)return l;l=null}else if(x===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null);return ag=l,null}function fk(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ae()){case We:return 1;case bt:return 4;case et:case br:return 16;case ga:return 536870912;default:return 16}default:return 16}}var lo=null,jx=null,sg=null;function xk(){if(sg)return sg;var l,d=jx,x=d.length,w,A="value"in lo?lo.value:lo.textContent,O=A.length;for(l=0;l<x&&d[l]===A[l];l++);var $=x-l;for(w=1;w<=$&&d[x-w]===A[O-w];w++);return sg=A.slice(l,1<w?1-w:void 0)}function ng(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function ig(){return!0}function pk(){return!1}function $s(l){function d(x,w,A,O,$){this._reactName=x,this._targetInst=A,this.type=w,this.nativeEvent=O,this.target=$,this.currentTarget=null;for(var te in l)l.hasOwnProperty(te)&&(x=l[te],this[te]=x?x(O):O[te]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?ig:pk,this.isPropagationStopped=pk,this}return G(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=ig)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=ig)},persist:function(){},isPersistent:ig}),d}var tc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nx=$s(tc),Md=G({},tc,{view:0,detail:0}),mL=$s(Md),kx,Sx,_d,og=G({},Md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ex,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==_d&&(_d&&l.type==="mousemove"?(kx=l.screenX-_d.screenX,Sx=l.screenY-_d.screenY):Sx=kx=0,_d=l),kx)},movementY:function(l){return"movementY"in l?l.movementY:Sx}}),yk=$s(og),gL=G({},og,{dataTransfer:0}),hL=$s(gL),fL=G({},Md,{relatedTarget:0}),Cx=$s(fL),xL=G({},tc,{animationName:0,elapsedTime:0,pseudoElement:0}),pL=$s(xL),yL=G({},tc,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),vL=$s(yL),bL=G({},tc,{data:0}),vk=$s(bL),wL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kL(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=NL[l])?!!d[l]:!1}function Ex(){return kL}var SL=G({},Md,{key:function(l){if(l.key){var d=wL[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=ng(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?jL[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ex,charCode:function(l){return l.type==="keypress"?ng(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?ng(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),CL=$s(SL),EL=G({},og,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bk=$s(EL),AL=G({},Md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ex}),PL=$s(AL),TL=G({},tc,{propertyName:0,elapsedTime:0,pseudoElement:0}),DL=$s(TL),OL=G({},og,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),IL=$s(OL),LL=[9,13,27,32],Ax=c&&"CompositionEvent"in window,$d=null;c&&"documentMode"in document&&($d=document.documentMode);var RL=c&&"TextEvent"in window&&!$d,wk=c&&(!Ax||$d&&8<$d&&11>=$d),jk=" ",Nk=!1;function kk(l,d){switch(l){case"keyup":return LL.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sk(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var rc=!1;function ML(l,d){switch(l){case"compositionend":return Sk(d);case"keypress":return d.which!==32?null:(Nk=!0,jk);case"textInput":return l=d.data,l===jk&&Nk?null:l;default:return null}}function _L(l,d){if(rc)return l==="compositionend"||!Ax&&kk(l,d)?(l=xk(),sg=jx=lo=null,rc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return wk&&d.locale!=="ko"?null:d.data;default:return null}}var $L={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ck(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!$L[l.type]:d==="textarea"}function Ek(l,d,x,w){lr(w),d=mg(d,"onChange"),0<d.length&&(x=new Nx("onChange","change",null,x,w),l.push({event:x,listeners:d}))}var Ud=null,Fd=null;function UL(l){Wk(l,0)}function lg(l){var d=oc(l);if(xe(d))return l}function FL(l,d){if(l==="change")return d}var Ak=!1;if(c){var Px;if(c){var Tx="oninput"in document;if(!Tx){var Pk=document.createElement("div");Pk.setAttribute("oninput","return;"),Tx=typeof Pk.oninput=="function"}Px=Tx}else Px=!1;Ak=Px&&(!document.documentMode||9<document.documentMode)}function Tk(){Ud&&(Ud.detachEvent("onpropertychange",Dk),Fd=Ud=null)}function Dk(l){if(l.propertyName==="value"&&lg(Fd)){var d=[];Ek(d,Fd,l,Qt(l)),Ca(UL,d)}}function zL(l,d,x){l==="focusin"?(Tk(),Ud=d,Fd=x,Ud.attachEvent("onpropertychange",Dk)):l==="focusout"&&Tk()}function BL(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return lg(Fd)}function qL(l,d){if(l==="click")return lg(d)}function HL(l,d){if(l==="input"||l==="change")return lg(d)}function WL(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Sn=typeof Object.is=="function"?Object.is:WL;function zd(l,d){if(Sn(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var x=Object.keys(l),w=Object.keys(d);if(x.length!==w.length)return!1;for(w=0;w<x.length;w++){var A=x[w];if(!u.call(d,A)||!Sn(l[A],d[A]))return!1}return!0}function Ok(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Ik(l,d){var x=Ok(l);l=0;for(var w;x;){if(x.nodeType===3){if(w=l+x.textContent.length,l<=d&&w>=d)return{node:x,offset:d-l};l=w}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Ok(x)}}function Lk(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?Lk(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function Rk(){for(var l=window,d=qe();d instanceof l.HTMLIFrameElement;){try{var x=typeof d.contentWindow.location.href=="string"}catch{x=!1}if(x)l=d.contentWindow;else break;d=qe(l.document)}return d}function Dx(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}function VL(l){var d=Rk(),x=l.focusedElem,w=l.selectionRange;if(d!==x&&x&&x.ownerDocument&&Lk(x.ownerDocument.documentElement,x)){if(w!==null&&Dx(x)){if(d=w.start,l=w.end,l===void 0&&(l=d),"selectionStart"in x)x.selectionStart=d,x.selectionEnd=Math.min(l,x.value.length);else if(l=(d=x.ownerDocument||document)&&d.defaultView||window,l.getSelection){l=l.getSelection();var A=x.textContent.length,O=Math.min(w.start,A);w=w.end===void 0?O:Math.min(w.end,A),!l.extend&&O>w&&(A=w,w=O,O=A),A=Ik(x,O);var $=Ik(x,w);A&&$&&(l.rangeCount!==1||l.anchorNode!==A.node||l.anchorOffset!==A.offset||l.focusNode!==$.node||l.focusOffset!==$.offset)&&(d=d.createRange(),d.setStart(A.node,A.offset),l.removeAllRanges(),O>w?(l.addRange(d),l.extend($.node,$.offset)):(d.setEnd($.node,$.offset),l.addRange(d)))}}for(d=[],l=x;l=l.parentNode;)l.nodeType===1&&d.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<d.length;x++)l=d[x],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var KL=c&&"documentMode"in document&&11>=document.documentMode,ac=null,Ox=null,Bd=null,Ix=!1;function Mk(l,d,x){var w=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Ix||ac==null||ac!==qe(w)||(w=ac,"selectionStart"in w&&Dx(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Bd&&zd(Bd,w)||(Bd=w,w=mg(Ox,"onSelect"),0<w.length&&(d=new Nx("onSelect","select",null,d,x),l.push({event:d,listeners:w}),d.target=ac)))}function cg(l,d){var x={};return x[l.toLowerCase()]=d.toLowerCase(),x["Webkit"+l]="webkit"+d,x["Moz"+l]="moz"+d,x}var sc={animationend:cg("Animation","AnimationEnd"),animationiteration:cg("Animation","AnimationIteration"),animationstart:cg("Animation","AnimationStart"),transitionend:cg("Transition","TransitionEnd")},Lx={},_k={};c&&(_k=document.createElement("div").style,"AnimationEvent"in window||(delete sc.animationend.animation,delete sc.animationiteration.animation,delete sc.animationstart.animation),"TransitionEvent"in window||delete sc.transitionend.transition);function dg(l){if(Lx[l])return Lx[l];if(!sc[l])return l;var d=sc[l],x;for(x in d)if(d.hasOwnProperty(x)&&x in _k)return Lx[l]=d[x];return l}var $k=dg("animationend"),Uk=dg("animationiteration"),Fk=dg("animationstart"),zk=dg("transitionend"),Bk=new Map,qk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function co(l,d){Bk.set(l,d),i(d,[l])}for(var Rx=0;Rx<qk.length;Rx++){var Mx=qk[Rx],GL=Mx.toLowerCase(),YL=Mx[0].toUpperCase()+Mx.slice(1);co(GL,"on"+YL)}co($k,"onAnimationEnd"),co(Uk,"onAnimationIteration"),co(Fk,"onAnimationStart"),co("dblclick","onDoubleClick"),co("focusin","onFocus"),co("focusout","onBlur"),co(zk,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QL=new Set("cancel close invalid load scroll toggle".split(" ").concat(qd));function Hk(l,d,x){var w=l.type||"unknown-event";l.currentTarget=x,Xs(w,d,void 0,l),l.currentTarget=null}function Wk(l,d){d=(d&4)!==0;for(var x=0;x<l.length;x++){var w=l[x],A=w.event;w=w.listeners;e:{var O=void 0;if(d)for(var $=w.length-1;0<=$;$--){var te=w[$],ie=te.instance,Se=te.currentTarget;if(te=te.listener,ie!==O&&A.isPropagationStopped())break e;Hk(A,te,Se),O=ie}else for($=0;$<w.length;$++){if(te=w[$],ie=te.instance,Se=te.currentTarget,te=te.listener,ie!==O&&A.isPropagationStopped())break e;Hk(A,te,Se),O=ie}}}if(gt)throw l=ft,gt=!1,ft=null,l}function Pr(l,d){var x=d[Hx];x===void 0&&(x=d[Hx]=new Set);var w=l+"__bubble";x.has(w)||(Vk(d,l,2,!1),x.add(w))}function _x(l,d,x){var w=0;d&&(w|=4),Vk(x,l,w,d)}var ug="_reactListening"+Math.random().toString(36).slice(2);function Hd(l){if(!l[ug]){l[ug]=!0,s.forEach(function(x){x!=="selectionchange"&&(QL.has(x)||_x(x,!1,l),_x(x,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[ug]||(d[ug]=!0,_x("selectionchange",!1,d))}}function Vk(l,d,x,w){switch(fk(d)){case 1:var A=dL;break;case 4:A=uL;break;default:A=bx}x=A.bind(null,d,x,l),A=void 0,!jr||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(A=!0),w?A!==void 0?l.addEventListener(d,x,{capture:!0,passive:A}):l.addEventListener(d,x,!0):A!==void 0?l.addEventListener(d,x,{passive:A}):l.addEventListener(d,x,!1)}function $x(l,d,x,w,A){var O=w;if((d&1)===0&&(d&2)===0&&w!==null)e:for(;;){if(w===null)return;var $=w.tag;if($===3||$===4){var te=w.stateNode.containerInfo;if(te===A||te.nodeType===8&&te.parentNode===A)break;if($===4)for($=w.return;$!==null;){var ie=$.tag;if((ie===3||ie===4)&&(ie=$.stateNode.containerInfo,ie===A||ie.nodeType===8&&ie.parentNode===A))return;$=$.return}for(;te!==null;){if($=el(te),$===null)return;if(ie=$.tag,ie===5||ie===6){w=O=$;continue e}te=te.parentNode}}w=w.return}Ca(function(){var Se=O,Le=Qt(x),_e=[];e:{var Ie=Bk.get(l);if(Ie!==void 0){var Ze=Nx,lt=l;switch(l){case"keypress":if(ng(x)===0)break e;case"keydown":case"keyup":Ze=CL;break;case"focusin":lt="focus",Ze=Cx;break;case"focusout":lt="blur",Ze=Cx;break;case"beforeblur":case"afterblur":Ze=Cx;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=yk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=hL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=PL;break;case $k:case Uk:case Fk:Ze=pL;break;case zk:Ze=DL;break;case"scroll":Ze=mL;break;case"wheel":Ze=IL;break;case"copy":case"cut":case"paste":Ze=vL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=bk}var dt=(d&4)!==0,ea=!dt&&l==="scroll",be=dt?Ie!==null?Ie+"Capture":null:Ie;dt=[];for(var he=Se,je;he!==null;){je=he;var ze=je.stateNode;if(je.tag===5&&ze!==null&&(je=ze,be!==null&&(ze=rr(he,be),ze!=null&&dt.push(Wd(he,ze,je)))),ea)break;he=he.return}0<dt.length&&(Ie=new Ze(Ie,lt,null,x,Le),_e.push({event:Ie,listeners:dt}))}}if((d&7)===0){e:{if(Ie=l==="mouseover"||l==="pointerover",Ze=l==="mouseout"||l==="pointerout",Ie&&x!==$t&&(lt=x.relatedTarget||x.fromElement)&&(el(lt)||lt[xi]))break e;if((Ze||Ie)&&(Ie=Le.window===Le?Le:(Ie=Le.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,Ze?(lt=x.relatedTarget||x.toElement,Ze=Se,lt=lt?el(lt):null,lt!==null&&(ea=ke(lt),lt!==ea||lt.tag!==5&&lt.tag!==6)&&(lt=null)):(Ze=null,lt=Se),Ze!==lt)){if(dt=yk,ze="onMouseLeave",be="onMouseEnter",he="mouse",(l==="pointerout"||l==="pointerover")&&(dt=bk,ze="onPointerLeave",be="onPointerEnter",he="pointer"),ea=Ze==null?Ie:oc(Ze),je=lt==null?Ie:oc(lt),Ie=new dt(ze,he+"leave",Ze,x,Le),Ie.target=ea,Ie.relatedTarget=je,ze=null,el(Le)===Se&&(dt=new dt(be,he+"enter",lt,x,Le),dt.target=je,dt.relatedTarget=ea,ze=dt),ea=ze,Ze&&lt)t:{for(dt=Ze,be=lt,he=0,je=dt;je;je=nc(je))he++;for(je=0,ze=be;ze;ze=nc(ze))je++;for(;0<he-je;)dt=nc(dt),he--;for(;0<je-he;)be=nc(be),je--;for(;he--;){if(dt===be||be!==null&&dt===be.alternate)break t;dt=nc(dt),be=nc(be)}dt=null}else dt=null;Ze!==null&&Kk(_e,Ie,Ze,dt,!1),lt!==null&&ea!==null&&Kk(_e,ea,lt,dt,!0)}}e:{if(Ie=Se?oc(Se):window,Ze=Ie.nodeName&&Ie.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&Ie.type==="file")var ut=FL;else if(Ck(Ie))if(Ak)ut=HL;else{ut=BL;var pt=zL}else(Ze=Ie.nodeName)&&Ze.toLowerCase()==="input"&&(Ie.type==="checkbox"||Ie.type==="radio")&&(ut=qL);if(ut&&(ut=ut(l,Se))){Ek(_e,ut,x,Le);break e}pt&&pt(l,Ie,Se),l==="focusout"&&(pt=Ie._wrapperState)&&pt.controlled&&Ie.type==="number"&&Mt(Ie,"number",Ie.value)}switch(pt=Se?oc(Se):window,l){case"focusin":(Ck(pt)||pt.contentEditable==="true")&&(ac=pt,Ox=Se,Bd=null);break;case"focusout":Bd=Ox=ac=null;break;case"mousedown":Ix=!0;break;case"contextmenu":case"mouseup":case"dragend":Ix=!1,Mk(_e,x,Le);break;case"selectionchange":if(KL)break;case"keydown":case"keyup":Mk(_e,x,Le)}var yt;if(Ax)e:{switch(l){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else rc?kk(l,x)&&(St="onCompositionEnd"):l==="keydown"&&x.keyCode===229&&(St="onCompositionStart");St&&(wk&&x.locale!=="ko"&&(rc||St!=="onCompositionStart"?St==="onCompositionEnd"&&rc&&(yt=xk()):(lo=Le,jx="value"in lo?lo.value:lo.textContent,rc=!0)),pt=mg(Se,St),0<pt.length&&(St=new vk(St,l,null,x,Le),_e.push({event:St,listeners:pt}),yt?St.data=yt:(yt=Sk(x),yt!==null&&(St.data=yt)))),(yt=RL?ML(l,x):_L(l,x))&&(Se=mg(Se,"onBeforeInput"),0<Se.length&&(Le=new vk("onBeforeInput","beforeinput",null,x,Le),_e.push({event:Le,listeners:Se}),Le.data=yt))}Wk(_e,d)})}function Wd(l,d,x){return{instance:l,listener:d,currentTarget:x}}function mg(l,d){for(var x=d+"Capture",w=[];l!==null;){var A=l,O=A.stateNode;A.tag===5&&O!==null&&(A=O,O=rr(l,x),O!=null&&w.unshift(Wd(l,O,A)),O=rr(l,d),O!=null&&w.push(Wd(l,O,A))),l=l.return}return w}function nc(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function Kk(l,d,x,w,A){for(var O=d._reactName,$=[];x!==null&&x!==w;){var te=x,ie=te.alternate,Se=te.stateNode;if(ie!==null&&ie===w)break;te.tag===5&&Se!==null&&(te=Se,A?(ie=rr(x,O),ie!=null&&$.unshift(Wd(x,ie,te))):A||(ie=rr(x,O),ie!=null&&$.push(Wd(x,ie,te)))),x=x.return}$.length!==0&&l.push({event:d,listeners:$})}var XL=/\r\n?/g,ZL=/\u0000|\uFFFD/g;function Gk(l){return(typeof l=="string"?l:""+l).replace(XL,`
`).replace(ZL,"")}function gg(l,d,x){if(d=Gk(d),Gk(l)!==d&&x)throw Error(a(425))}function hg(){}var Ux=null,Fx=null;function zx(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Bx=typeof setTimeout=="function"?setTimeout:void 0,JL=typeof clearTimeout=="function"?clearTimeout:void 0,Yk=typeof Promise=="function"?Promise:void 0,eR=typeof queueMicrotask=="function"?queueMicrotask:typeof Yk<"u"?function(l){return Yk.resolve(null).then(l).catch(tR)}:Bx;function tR(l){setTimeout(function(){throw l})}function qx(l,d){var x=d,w=0;do{var A=x.nextSibling;if(l.removeChild(x),A&&A.nodeType===8)if(x=A.data,x==="/$"){if(w===0){l.removeChild(A),Rd(d);return}w--}else x!=="$"&&x!=="$?"&&x!=="$!"||w++;x=A}while(x);Rd(d)}function uo(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return l}function Qk(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var x=l.data;if(x==="$"||x==="$!"||x==="$?"){if(d===0)return l;d--}else x==="/$"&&d++}l=l.previousSibling}return null}var ic=Math.random().toString(36).slice(2),Wn="__reactFiber$"+ic,Vd="__reactProps$"+ic,xi="__reactContainer$"+ic,Hx="__reactEvents$"+ic,rR="__reactListeners$"+ic,aR="__reactHandles$"+ic;function el(l){var d=l[Wn];if(d)return d;for(var x=l.parentNode;x;){if(d=x[xi]||x[Wn]){if(x=d.alternate,d.child!==null||x!==null&&x.child!==null)for(l=Qk(l);l!==null;){if(x=l[Wn])return x;l=Qk(l)}return d}l=x,x=l.parentNode}return null}function Kd(l){return l=l[Wn]||l[xi],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function oc(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(a(33))}function fg(l){return l[Vd]||null}var Wx=[],lc=-1;function mo(l){return{current:l}}function Tr(l){0>lc||(l.current=Wx[lc],Wx[lc]=null,lc--)}function kr(l,d){lc++,Wx[lc]=l.current,l.current=d}var go={},Qa=mo(go),bs=mo(!1),tl=go;function cc(l,d){var x=l.type.contextTypes;if(!x)return go;var w=l.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===d)return w.__reactInternalMemoizedMaskedChildContext;var A={},O;for(O in x)A[O]=d[O];return w&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=d,l.__reactInternalMemoizedMaskedChildContext=A),A}function ws(l){return l=l.childContextTypes,l!=null}function xg(){Tr(bs),Tr(Qa)}function Xk(l,d,x){if(Qa.current!==go)throw Error(a(168));kr(Qa,d),kr(bs,x)}function Zk(l,d,x){var w=l.stateNode;if(d=d.childContextTypes,typeof w.getChildContext!="function")return x;w=w.getChildContext();for(var A in w)if(!(A in d))throw Error(a(108,X(l)||"Unknown",A));return G({},x,w)}function pg(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||go,tl=Qa.current,kr(Qa,l),kr(bs,bs.current),!0}function Jk(l,d,x){var w=l.stateNode;if(!w)throw Error(a(169));x?(l=Zk(l,d,tl),w.__reactInternalMemoizedMergedChildContext=l,Tr(bs),Tr(Qa),kr(Qa,l)):Tr(bs),kr(bs,x)}var pi=null,yg=!1,Vx=!1;function e1(l){pi===null?pi=[l]:pi.push(l)}function sR(l){yg=!0,e1(l)}function ho(){if(!Vx&&pi!==null){Vx=!0;var l=0,d=mr;try{var x=pi;for(mr=1;l<x.length;l++){var w=x[l];do w=w(!0);while(w!==null)}pi=null,yg=!1}catch(A){throw pi!==null&&(pi=pi.slice(l+1)),ye(We,ho),A}finally{mr=d,Vx=!1}}return null}var dc=[],uc=0,vg=null,bg=0,Js=[],en=0,rl=null,yi=1,vi="";function al(l,d){dc[uc++]=bg,dc[uc++]=vg,vg=l,bg=d}function t1(l,d,x){Js[en++]=yi,Js[en++]=vi,Js[en++]=rl,rl=l;var w=yi;l=vi;var A=32-Ea(w)-1;w&=~(1<<A),x+=1;var O=32-Ea(d)+A;if(30<O){var $=A-A%5;O=(w&(1<<$)-1).toString(32),w>>=$,A-=$,yi=1<<32-Ea(d)+A|x<<A|w,vi=O+l}else yi=1<<O|x<<A|w,vi=l}function Kx(l){l.return!==null&&(al(l,1),t1(l,1,0))}function Gx(l){for(;l===vg;)vg=dc[--uc],dc[uc]=null,bg=dc[--uc],dc[uc]=null;for(;l===rl;)rl=Js[--en],Js[en]=null,vi=Js[--en],Js[en]=null,yi=Js[--en],Js[en]=null}var Us=null,Fs=null,Rr=!1,Cn=null;function r1(l,d){var x=sn(5,null,null,0);x.elementType="DELETED",x.stateNode=d,x.return=l,d=l.deletions,d===null?(l.deletions=[x],l.flags|=16):d.push(x)}function a1(l,d){switch(l.tag){case 5:var x=l.type;return d=d.nodeType!==1||x.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(l.stateNode=d,Us=l,Fs=uo(d.firstChild),!0):!1;case 6:return d=l.pendingProps===""||d.nodeType!==3?null:d,d!==null?(l.stateNode=d,Us=l,Fs=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(x=rl!==null?{id:yi,overflow:vi}:null,l.memoizedState={dehydrated:d,treeContext:x,retryLane:1073741824},x=sn(18,null,null,0),x.stateNode=d,x.return=l,l.child=x,Us=l,Fs=null,!0):!1;default:return!1}}function Yx(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Qx(l){if(Rr){var d=Fs;if(d){var x=d;if(!a1(l,d)){if(Yx(l))throw Error(a(418));d=uo(x.nextSibling);var w=Us;d&&a1(l,d)?r1(w,x):(l.flags=l.flags&-4097|2,Rr=!1,Us=l)}}else{if(Yx(l))throw Error(a(418));l.flags=l.flags&-4097|2,Rr=!1,Us=l}}}function s1(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Us=l}function wg(l){if(l!==Us)return!1;if(!Rr)return s1(l),Rr=!0,!1;var d;if((d=l.tag!==3)&&!(d=l.tag!==5)&&(d=l.type,d=d!=="head"&&d!=="body"&&!zx(l.type,l.memoizedProps)),d&&(d=Fs)){if(Yx(l))throw n1(),Error(a(418));for(;d;)r1(l,d),d=uo(d.nextSibling)}if(s1(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8){var x=l.data;if(x==="/$"){if(d===0){Fs=uo(l.nextSibling);break e}d--}else x!=="$"&&x!=="$!"&&x!=="$?"||d++}l=l.nextSibling}Fs=null}}else Fs=Us?uo(l.stateNode.nextSibling):null;return!0}function n1(){for(var l=Fs;l;)l=uo(l.nextSibling)}function mc(){Fs=Us=null,Rr=!1}function Xx(l){Cn===null?Cn=[l]:Cn.push(l)}var nR=C.ReactCurrentBatchConfig;function Gd(l,d,x){if(l=x.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(a(309));var w=x.stateNode}if(!w)throw Error(a(147,l));var A=w,O=""+l;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===O?d.ref:(d=function($){var te=A.refs;$===null?delete te[O]:te[O]=$},d._stringRef=O,d)}if(typeof l!="string")throw Error(a(284));if(!x._owner)throw Error(a(290,l))}return l}function jg(l,d){throw l=Object.prototype.toString.call(d),Error(a(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l))}function i1(l){var d=l._init;return d(l._payload)}function o1(l){function d(be,he){if(l){var je=be.deletions;je===null?(be.deletions=[he],be.flags|=16):je.push(he)}}function x(be,he){if(!l)return null;for(;he!==null;)d(be,he),he=he.sibling;return null}function w(be,he){for(be=new Map;he!==null;)he.key!==null?be.set(he.key,he):be.set(he.index,he),he=he.sibling;return be}function A(be,he){return be=jo(be,he),be.index=0,be.sibling=null,be}function O(be,he,je){return be.index=je,l?(je=be.alternate,je!==null?(je=je.index,je<he?(be.flags|=2,he):je):(be.flags|=2,he)):(be.flags|=1048576,he)}function $(be){return l&&be.alternate===null&&(be.flags|=2),be}function te(be,he,je,ze){return he===null||he.tag!==6?(he=Bp(je,be.mode,ze),he.return=be,he):(he=A(he,je),he.return=be,he)}function ie(be,he,je,ze){var ut=je.type;return ut===D?Le(be,he,je.props.children,ze,je.key):he!==null&&(he.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===ae&&i1(ut)===he.type)?(ze=A(he,je.props),ze.ref=Gd(be,he,je),ze.return=be,ze):(ze=Vg(je.type,je.key,je.props,null,be.mode,ze),ze.ref=Gd(be,he,je),ze.return=be,ze)}function Se(be,he,je,ze){return he===null||he.tag!==4||he.stateNode.containerInfo!==je.containerInfo||he.stateNode.implementation!==je.implementation?(he=qp(je,be.mode,ze),he.return=be,he):(he=A(he,je.children||[]),he.return=be,he)}function Le(be,he,je,ze,ut){return he===null||he.tag!==7?(he=ul(je,be.mode,ze,ut),he.return=be,he):(he=A(he,je),he.return=be,he)}function _e(be,he,je){if(typeof he=="string"&&he!==""||typeof he=="number")return he=Bp(""+he,be.mode,je),he.return=be,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case S:return je=Vg(he.type,he.key,he.props,null,be.mode,je),je.ref=Gd(be,null,he),je.return=be,je;case P:return he=qp(he,be.mode,je),he.return=be,he;case ae:var ze=he._init;return _e(be,ze(he._payload),je)}if(jt(he)||L(he))return he=ul(he,be.mode,je,null),he.return=be,he;jg(be,he)}return null}function Ie(be,he,je,ze){var ut=he!==null?he.key:null;if(typeof je=="string"&&je!==""||typeof je=="number")return ut!==null?null:te(be,he,""+je,ze);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case S:return je.key===ut?ie(be,he,je,ze):null;case P:return je.key===ut?Se(be,he,je,ze):null;case ae:return ut=je._init,Ie(be,he,ut(je._payload),ze)}if(jt(je)||L(je))return ut!==null?null:Le(be,he,je,ze,null);jg(be,je)}return null}function Ze(be,he,je,ze,ut){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return be=be.get(je)||null,te(he,be,""+ze,ut);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case S:return be=be.get(ze.key===null?je:ze.key)||null,ie(he,be,ze,ut);case P:return be=be.get(ze.key===null?je:ze.key)||null,Se(he,be,ze,ut);case ae:var pt=ze._init;return Ze(be,he,je,pt(ze._payload),ut)}if(jt(ze)||L(ze))return be=be.get(je)||null,Le(he,be,ze,ut,null);jg(he,ze)}return null}function lt(be,he,je,ze){for(var ut=null,pt=null,yt=he,St=he=0,Ta=null;yt!==null&&St<je.length;St++){yt.index>St?(Ta=yt,yt=null):Ta=yt.sibling;var ar=Ie(be,yt,je[St],ze);if(ar===null){yt===null&&(yt=Ta);break}l&&yt&&ar.alternate===null&&d(be,yt),he=O(ar,he,St),pt===null?ut=ar:pt.sibling=ar,pt=ar,yt=Ta}if(St===je.length)return x(be,yt),Rr&&al(be,St),ut;if(yt===null){for(;St<je.length;St++)yt=_e(be,je[St],ze),yt!==null&&(he=O(yt,he,St),pt===null?ut=yt:pt.sibling=yt,pt=yt);return Rr&&al(be,St),ut}for(yt=w(be,yt);St<je.length;St++)Ta=Ze(yt,be,St,je[St],ze),Ta!==null&&(l&&Ta.alternate!==null&&yt.delete(Ta.key===null?St:Ta.key),he=O(Ta,he,St),pt===null?ut=Ta:pt.sibling=Ta,pt=Ta);return l&&yt.forEach(function(No){return d(be,No)}),Rr&&al(be,St),ut}function dt(be,he,je,ze){var ut=L(je);if(typeof ut!="function")throw Error(a(150));if(je=ut.call(je),je==null)throw Error(a(151));for(var pt=ut=null,yt=he,St=he=0,Ta=null,ar=je.next();yt!==null&&!ar.done;St++,ar=je.next()){yt.index>St?(Ta=yt,yt=null):Ta=yt.sibling;var No=Ie(be,yt,ar.value,ze);if(No===null){yt===null&&(yt=Ta);break}l&&yt&&No.alternate===null&&d(be,yt),he=O(No,he,St),pt===null?ut=No:pt.sibling=No,pt=No,yt=Ta}if(ar.done)return x(be,yt),Rr&&al(be,St),ut;if(yt===null){for(;!ar.done;St++,ar=je.next())ar=_e(be,ar.value,ze),ar!==null&&(he=O(ar,he,St),pt===null?ut=ar:pt.sibling=ar,pt=ar);return Rr&&al(be,St),ut}for(yt=w(be,yt);!ar.done;St++,ar=je.next())ar=Ze(yt,be,St,ar.value,ze),ar!==null&&(l&&ar.alternate!==null&&yt.delete(ar.key===null?St:ar.key),he=O(ar,he,St),pt===null?ut=ar:pt.sibling=ar,pt=ar);return l&&yt.forEach(function($R){return d(be,$R)}),Rr&&al(be,St),ut}function ea(be,he,je,ze){if(typeof je=="object"&&je!==null&&je.type===D&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case S:e:{for(var ut=je.key,pt=he;pt!==null;){if(pt.key===ut){if(ut=je.type,ut===D){if(pt.tag===7){x(be,pt.sibling),he=A(pt,je.props.children),he.return=be,be=he;break e}}else if(pt.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===ae&&i1(ut)===pt.type){x(be,pt.sibling),he=A(pt,je.props),he.ref=Gd(be,pt,je),he.return=be,be=he;break e}x(be,pt);break}else d(be,pt);pt=pt.sibling}je.type===D?(he=ul(je.props.children,be.mode,ze,je.key),he.return=be,be=he):(ze=Vg(je.type,je.key,je.props,null,be.mode,ze),ze.ref=Gd(be,he,je),ze.return=be,be=ze)}return $(be);case P:e:{for(pt=je.key;he!==null;){if(he.key===pt)if(he.tag===4&&he.stateNode.containerInfo===je.containerInfo&&he.stateNode.implementation===je.implementation){x(be,he.sibling),he=A(he,je.children||[]),he.return=be,be=he;break e}else{x(be,he);break}else d(be,he);he=he.sibling}he=qp(je,be.mode,ze),he.return=be,be=he}return $(be);case ae:return pt=je._init,ea(be,he,pt(je._payload),ze)}if(jt(je))return lt(be,he,je,ze);if(L(je))return dt(be,he,je,ze);jg(be,je)}return typeof je=="string"&&je!==""||typeof je=="number"?(je=""+je,he!==null&&he.tag===6?(x(be,he.sibling),he=A(he,je),he.return=be,be=he):(x(be,he),he=Bp(je,be.mode,ze),he.return=be,be=he),$(be)):x(be,he)}return ea}var gc=o1(!0),l1=o1(!1),Ng=mo(null),kg=null,hc=null,Zx=null;function Jx(){Zx=hc=kg=null}function ep(l){var d=Ng.current;Tr(Ng),l._currentValue=d}function tp(l,d,x){for(;l!==null;){var w=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,w!==null&&(w.childLanes|=d)):w!==null&&(w.childLanes&d)!==d&&(w.childLanes|=d),l===x)break;l=l.return}}function fc(l,d){kg=l,Zx=hc=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&d)!==0&&(js=!0),l.firstContext=null)}function tn(l){var d=l._currentValue;if(Zx!==l)if(l={context:l,memoizedValue:d,next:null},hc===null){if(kg===null)throw Error(a(308));hc=l,kg.dependencies={lanes:0,firstContext:l}}else hc=hc.next=l;return d}var sl=null;function rp(l){sl===null?sl=[l]:sl.push(l)}function c1(l,d,x,w){var A=d.interleaved;return A===null?(x.next=x,rp(d)):(x.next=A.next,A.next=x),d.interleaved=x,bi(l,w)}function bi(l,d){l.lanes|=d;var x=l.alternate;for(x!==null&&(x.lanes|=d),x=l,l=l.return;l!==null;)l.childLanes|=d,x=l.alternate,x!==null&&(x.childLanes|=d),x=l,l=l.return;return x.tag===3?x.stateNode:null}var fo=!1;function ap(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d1(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function wi(l,d){return{eventTime:l,lane:d,tag:0,payload:null,callback:null,next:null}}function xo(l,d,x){var w=l.updateQueue;if(w===null)return null;if(w=w.shared,(Zt&2)!==0){var A=w.pending;return A===null?d.next=d:(d.next=A.next,A.next=d),w.pending=d,bi(l,x)}return A=w.interleaved,A===null?(d.next=d,rp(w)):(d.next=A.next,A.next=d),w.interleaved=d,bi(l,x)}function Sg(l,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194240)!==0)){var w=d.lanes;w&=l.pendingLanes,x|=w,d.lanes=x,px(l,x)}}function u1(l,d){var x=l.updateQueue,w=l.alternate;if(w!==null&&(w=w.updateQueue,x===w)){var A=null,O=null;if(x=x.firstBaseUpdate,x!==null){do{var $={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};O===null?A=O=$:O=O.next=$,x=x.next}while(x!==null);O===null?A=O=d:O=O.next=d}else A=O=d;x={baseState:w.baseState,firstBaseUpdate:A,lastBaseUpdate:O,shared:w.shared,effects:w.effects},l.updateQueue=x;return}l=x.lastBaseUpdate,l===null?x.firstBaseUpdate=d:l.next=d,x.lastBaseUpdate=d}function Cg(l,d,x,w){var A=l.updateQueue;fo=!1;var O=A.firstBaseUpdate,$=A.lastBaseUpdate,te=A.shared.pending;if(te!==null){A.shared.pending=null;var ie=te,Se=ie.next;ie.next=null,$===null?O=Se:$.next=Se,$=ie;var Le=l.alternate;Le!==null&&(Le=Le.updateQueue,te=Le.lastBaseUpdate,te!==$&&(te===null?Le.firstBaseUpdate=Se:te.next=Se,Le.lastBaseUpdate=ie))}if(O!==null){var _e=A.baseState;$=0,Le=Se=ie=null,te=O;do{var Ie=te.lane,Ze=te.eventTime;if((w&Ie)===Ie){Le!==null&&(Le=Le.next={eventTime:Ze,lane:0,tag:te.tag,payload:te.payload,callback:te.callback,next:null});e:{var lt=l,dt=te;switch(Ie=d,Ze=x,dt.tag){case 1:if(lt=dt.payload,typeof lt=="function"){_e=lt.call(Ze,_e,Ie);break e}_e=lt;break e;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=dt.payload,Ie=typeof lt=="function"?lt.call(Ze,_e,Ie):lt,Ie==null)break e;_e=G({},_e,Ie);break e;case 2:fo=!0}}te.callback!==null&&te.lane!==0&&(l.flags|=64,Ie=A.effects,Ie===null?A.effects=[te]:Ie.push(te))}else Ze={eventTime:Ze,lane:Ie,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Le===null?(Se=Le=Ze,ie=_e):Le=Le.next=Ze,$|=Ie;if(te=te.next,te===null){if(te=A.shared.pending,te===null)break;Ie=te,te=Ie.next,Ie.next=null,A.lastBaseUpdate=Ie,A.shared.pending=null}}while(!0);if(Le===null&&(ie=_e),A.baseState=ie,A.firstBaseUpdate=Se,A.lastBaseUpdate=Le,d=A.shared.interleaved,d!==null){A=d;do $|=A.lane,A=A.next;while(A!==d)}else O===null&&(A.shared.lanes=0);ol|=$,l.lanes=$,l.memoizedState=_e}}function m1(l,d,x){if(l=d.effects,d.effects=null,l!==null)for(d=0;d<l.length;d++){var w=l[d],A=w.callback;if(A!==null){if(w.callback=null,w=x,typeof A!="function")throw Error(a(191,A));A.call(w)}}}var Yd={},Vn=mo(Yd),Qd=mo(Yd),Xd=mo(Yd);function nl(l){if(l===Yd)throw Error(a(174));return l}function sp(l,d){switch(kr(Xd,d),kr(Qd,l),kr(Vn,Yd),l=d.nodeType,l){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:vt(null,"");break;default:l=l===8?d.parentNode:d,d=l.namespaceURI||null,l=l.tagName,d=vt(d,l)}Tr(Vn),kr(Vn,d)}function xc(){Tr(Vn),Tr(Qd),Tr(Xd)}function g1(l){nl(Xd.current);var d=nl(Vn.current),x=vt(d,l.type);d!==x&&(kr(Qd,l),kr(Vn,x))}function np(l){Qd.current===l&&(Tr(Vn),Tr(Qd))}var zr=mo(0);function Eg(l){for(var d=l;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var ip=[];function op(){for(var l=0;l<ip.length;l++)ip[l]._workInProgressVersionPrimary=null;ip.length=0}var Ag=C.ReactCurrentDispatcher,lp=C.ReactCurrentBatchConfig,il=0,Br=null,ha=null,Aa=null,Pg=!1,Zd=!1,Jd=0,iR=0;function Xa(){throw Error(a(321))}function cp(l,d){if(d===null)return!1;for(var x=0;x<d.length&&x<l.length;x++)if(!Sn(l[x],d[x]))return!1;return!0}function dp(l,d,x,w,A,O){if(il=O,Br=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Ag.current=l===null||l.memoizedState===null?dR:uR,l=x(w,A),Zd){O=0;do{if(Zd=!1,Jd=0,25<=O)throw Error(a(301));O+=1,Aa=ha=null,d.updateQueue=null,Ag.current=mR,l=x(w,A)}while(Zd)}if(Ag.current=Og,d=ha!==null&&ha.next!==null,il=0,Aa=ha=Br=null,Pg=!1,d)throw Error(a(300));return l}function up(){var l=Jd!==0;return Jd=0,l}function Kn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Aa===null?Br.memoizedState=Aa=l:Aa=Aa.next=l,Aa}function rn(){if(ha===null){var l=Br.alternate;l=l!==null?l.memoizedState:null}else l=ha.next;var d=Aa===null?Br.memoizedState:Aa.next;if(d!==null)Aa=d,ha=l;else{if(l===null)throw Error(a(310));ha=l,l={memoizedState:ha.memoizedState,baseState:ha.baseState,baseQueue:ha.baseQueue,queue:ha.queue,next:null},Aa===null?Br.memoizedState=Aa=l:Aa=Aa.next=l}return Aa}function eu(l,d){return typeof d=="function"?d(l):d}function mp(l){var d=rn(),x=d.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=l;var w=ha,A=w.baseQueue,O=x.pending;if(O!==null){if(A!==null){var $=A.next;A.next=O.next,O.next=$}w.baseQueue=A=O,x.pending=null}if(A!==null){O=A.next,w=w.baseState;var te=$=null,ie=null,Se=O;do{var Le=Se.lane;if((il&Le)===Le)ie!==null&&(ie=ie.next={lane:0,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),w=Se.hasEagerState?Se.eagerState:l(w,Se.action);else{var _e={lane:Le,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null};ie===null?(te=ie=_e,$=w):ie=ie.next=_e,Br.lanes|=Le,ol|=Le}Se=Se.next}while(Se!==null&&Se!==O);ie===null?$=w:ie.next=te,Sn(w,d.memoizedState)||(js=!0),d.memoizedState=w,d.baseState=$,d.baseQueue=ie,x.lastRenderedState=w}if(l=x.interleaved,l!==null){A=l;do O=A.lane,Br.lanes|=O,ol|=O,A=A.next;while(A!==l)}else A===null&&(x.lanes=0);return[d.memoizedState,x.dispatch]}function gp(l){var d=rn(),x=d.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=l;var w=x.dispatch,A=x.pending,O=d.memoizedState;if(A!==null){x.pending=null;var $=A=A.next;do O=l(O,$.action),$=$.next;while($!==A);Sn(O,d.memoizedState)||(js=!0),d.memoizedState=O,d.baseQueue===null&&(d.baseState=O),x.lastRenderedState=O}return[O,w]}function h1(){}function f1(l,d){var x=Br,w=rn(),A=d(),O=!Sn(w.memoizedState,A);if(O&&(w.memoizedState=A,js=!0),w=w.queue,hp(y1.bind(null,x,w,l),[l]),w.getSnapshot!==d||O||Aa!==null&&Aa.memoizedState.tag&1){if(x.flags|=2048,tu(9,p1.bind(null,x,w,A,d),void 0,null),Pa===null)throw Error(a(349));(il&30)!==0||x1(x,d,A)}return A}function x1(l,d,x){l.flags|=16384,l={getSnapshot:d,value:x},d=Br.updateQueue,d===null?(d={lastEffect:null,stores:null},Br.updateQueue=d,d.stores=[l]):(x=d.stores,x===null?d.stores=[l]:x.push(l))}function p1(l,d,x,w){d.value=x,d.getSnapshot=w,v1(d)&&b1(l)}function y1(l,d,x){return x(function(){v1(d)&&b1(l)})}function v1(l){var d=l.getSnapshot;l=l.value;try{var x=d();return!Sn(l,x)}catch{return!0}}function b1(l){var d=bi(l,1);d!==null&&Tn(d,l,1,-1)}function w1(l){var d=Kn();return typeof l=="function"&&(l=l()),d.memoizedState=d.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eu,lastRenderedState:l},d.queue=l,l=l.dispatch=cR.bind(null,Br,l),[d.memoizedState,l]}function tu(l,d,x,w){return l={tag:l,create:d,destroy:x,deps:w,next:null},d=Br.updateQueue,d===null?(d={lastEffect:null,stores:null},Br.updateQueue=d,d.lastEffect=l.next=l):(x=d.lastEffect,x===null?d.lastEffect=l.next=l:(w=x.next,x.next=l,l.next=w,d.lastEffect=l)),l}function j1(){return rn().memoizedState}function Tg(l,d,x,w){var A=Kn();Br.flags|=l,A.memoizedState=tu(1|d,x,void 0,w===void 0?null:w)}function Dg(l,d,x,w){var A=rn();w=w===void 0?null:w;var O=void 0;if(ha!==null){var $=ha.memoizedState;if(O=$.destroy,w!==null&&cp(w,$.deps)){A.memoizedState=tu(d,x,O,w);return}}Br.flags|=l,A.memoizedState=tu(1|d,x,O,w)}function N1(l,d){return Tg(8390656,8,l,d)}function hp(l,d){return Dg(2048,8,l,d)}function k1(l,d){return Dg(4,2,l,d)}function S1(l,d){return Dg(4,4,l,d)}function C1(l,d){if(typeof d=="function")return l=l(),d(l),function(){d(null)};if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function E1(l,d,x){return x=x!=null?x.concat([l]):null,Dg(4,4,C1.bind(null,d,l),x)}function fp(){}function A1(l,d){var x=rn();d=d===void 0?null:d;var w=x.memoizedState;return w!==null&&d!==null&&cp(d,w[1])?w[0]:(x.memoizedState=[l,d],l)}function P1(l,d){var x=rn();d=d===void 0?null:d;var w=x.memoizedState;return w!==null&&d!==null&&cp(d,w[1])?w[0]:(l=l(),x.memoizedState=[l,d],l)}function T1(l,d,x){return(il&21)===0?(l.baseState&&(l.baseState=!1,js=!0),l.memoizedState=x):(Sn(x,d)||(x=ao(),Br.lanes|=x,ol|=x,l.baseState=!0),d)}function oR(l,d){var x=mr;mr=x!==0&&4>x?x:4,l(!0);var w=lp.transition;lp.transition={};try{l(!1),d()}finally{mr=x,lp.transition=w}}function D1(){return rn().memoizedState}function lR(l,d,x){var w=bo(l);if(x={lane:w,action:x,hasEagerState:!1,eagerState:null,next:null},O1(l))I1(d,x);else if(x=c1(l,d,x,w),x!==null){var A=is();Tn(x,l,w,A),L1(x,d,w)}}function cR(l,d,x){var w=bo(l),A={lane:w,action:x,hasEagerState:!1,eagerState:null,next:null};if(O1(l))I1(d,A);else{var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=d.lastRenderedReducer,O!==null))try{var $=d.lastRenderedState,te=O($,x);if(A.hasEagerState=!0,A.eagerState=te,Sn(te,$)){var ie=d.interleaved;ie===null?(A.next=A,rp(d)):(A.next=ie.next,ie.next=A),d.interleaved=A;return}}catch{}finally{}x=c1(l,d,A,w),x!==null&&(A=is(),Tn(x,l,w,A),L1(x,d,w))}}function O1(l){var d=l.alternate;return l===Br||d!==null&&d===Br}function I1(l,d){Zd=Pg=!0;var x=l.pending;x===null?d.next=d:(d.next=x.next,x.next=d),l.pending=d}function L1(l,d,x){if((x&4194240)!==0){var w=d.lanes;w&=l.pendingLanes,x|=w,d.lanes=x,px(l,x)}}var Og={readContext:tn,useCallback:Xa,useContext:Xa,useEffect:Xa,useImperativeHandle:Xa,useInsertionEffect:Xa,useLayoutEffect:Xa,useMemo:Xa,useReducer:Xa,useRef:Xa,useState:Xa,useDebugValue:Xa,useDeferredValue:Xa,useTransition:Xa,useMutableSource:Xa,useSyncExternalStore:Xa,useId:Xa,unstable_isNewReconciler:!1},dR={readContext:tn,useCallback:function(l,d){return Kn().memoizedState=[l,d===void 0?null:d],l},useContext:tn,useEffect:N1,useImperativeHandle:function(l,d,x){return x=x!=null?x.concat([l]):null,Tg(4194308,4,C1.bind(null,d,l),x)},useLayoutEffect:function(l,d){return Tg(4194308,4,l,d)},useInsertionEffect:function(l,d){return Tg(4,2,l,d)},useMemo:function(l,d){var x=Kn();return d=d===void 0?null:d,l=l(),x.memoizedState=[l,d],l},useReducer:function(l,d,x){var w=Kn();return d=x!==void 0?x(d):d,w.memoizedState=w.baseState=d,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:d},w.queue=l,l=l.dispatch=lR.bind(null,Br,l),[w.memoizedState,l]},useRef:function(l){var d=Kn();return l={current:l},d.memoizedState=l},useState:w1,useDebugValue:fp,useDeferredValue:function(l){return Kn().memoizedState=l},useTransition:function(){var l=w1(!1),d=l[0];return l=oR.bind(null,l[1]),Kn().memoizedState=l,[d,l]},useMutableSource:function(){},useSyncExternalStore:function(l,d,x){var w=Br,A=Kn();if(Rr){if(x===void 0)throw Error(a(407));x=x()}else{if(x=d(),Pa===null)throw Error(a(349));(il&30)!==0||x1(w,d,x)}A.memoizedState=x;var O={value:x,getSnapshot:d};return A.queue=O,N1(y1.bind(null,w,O,l),[l]),w.flags|=2048,tu(9,p1.bind(null,w,O,x,d),void 0,null),x},useId:function(){var l=Kn(),d=Pa.identifierPrefix;if(Rr){var x=vi,w=yi;x=(w&~(1<<32-Ea(w)-1)).toString(32)+x,d=":"+d+"R"+x,x=Jd++,0<x&&(d+="H"+x.toString(32)),d+=":"}else x=iR++,d=":"+d+"r"+x.toString(32)+":";return l.memoizedState=d},unstable_isNewReconciler:!1},uR={readContext:tn,useCallback:A1,useContext:tn,useEffect:hp,useImperativeHandle:E1,useInsertionEffect:k1,useLayoutEffect:S1,useMemo:P1,useReducer:mp,useRef:j1,useState:function(){return mp(eu)},useDebugValue:fp,useDeferredValue:function(l){var d=rn();return T1(d,ha.memoizedState,l)},useTransition:function(){var l=mp(eu)[0],d=rn().memoizedState;return[l,d]},useMutableSource:h1,useSyncExternalStore:f1,useId:D1,unstable_isNewReconciler:!1},mR={readContext:tn,useCallback:A1,useContext:tn,useEffect:hp,useImperativeHandle:E1,useInsertionEffect:k1,useLayoutEffect:S1,useMemo:P1,useReducer:gp,useRef:j1,useState:function(){return gp(eu)},useDebugValue:fp,useDeferredValue:function(l){var d=rn();return ha===null?d.memoizedState=l:T1(d,ha.memoizedState,l)},useTransition:function(){var l=gp(eu)[0],d=rn().memoizedState;return[l,d]},useMutableSource:h1,useSyncExternalStore:f1,useId:D1,unstable_isNewReconciler:!1};function En(l,d){if(l&&l.defaultProps){d=G({},d),l=l.defaultProps;for(var x in l)d[x]===void 0&&(d[x]=l[x]);return d}return d}function xp(l,d,x,w){d=l.memoizedState,x=x(w,d),x=x==null?d:G({},d,x),l.memoizedState=x,l.lanes===0&&(l.updateQueue.baseState=x)}var Ig={isMounted:function(l){return(l=l._reactInternals)?ke(l)===l:!1},enqueueSetState:function(l,d,x){l=l._reactInternals;var w=is(),A=bo(l),O=wi(w,A);O.payload=d,x!=null&&(O.callback=x),d=xo(l,O,A),d!==null&&(Tn(d,l,A,w),Sg(d,l,A))},enqueueReplaceState:function(l,d,x){l=l._reactInternals;var w=is(),A=bo(l),O=wi(w,A);O.tag=1,O.payload=d,x!=null&&(O.callback=x),d=xo(l,O,A),d!==null&&(Tn(d,l,A,w),Sg(d,l,A))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var x=is(),w=bo(l),A=wi(x,w);A.tag=2,d!=null&&(A.callback=d),d=xo(l,A,w),d!==null&&(Tn(d,l,w,x),Sg(d,l,w))}};function R1(l,d,x,w,A,O,$){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(w,O,$):d.prototype&&d.prototype.isPureReactComponent?!zd(x,w)||!zd(A,O):!0}function M1(l,d,x){var w=!1,A=go,O=d.contextType;return typeof O=="object"&&O!==null?O=tn(O):(A=ws(d)?tl:Qa.current,w=d.contextTypes,O=(w=w!=null)?cc(l,A):go),d=new d(x,O),l.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ig,l.stateNode=d,d._reactInternals=l,w&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=A,l.__reactInternalMemoizedMaskedChildContext=O),d}function _1(l,d,x,w){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,w),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,w),d.state!==l&&Ig.enqueueReplaceState(d,d.state,null)}function pp(l,d,x,w){var A=l.stateNode;A.props=x,A.state=l.memoizedState,A.refs={},ap(l);var O=d.contextType;typeof O=="object"&&O!==null?A.context=tn(O):(O=ws(d)?tl:Qa.current,A.context=cc(l,O)),A.state=l.memoizedState,O=d.getDerivedStateFromProps,typeof O=="function"&&(xp(l,d,O,x),A.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(d=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),d!==A.state&&Ig.enqueueReplaceState(A,A.state,null),Cg(l,x,A,w),A.state=l.memoizedState),typeof A.componentDidMount=="function"&&(l.flags|=4194308)}function pc(l,d){try{var x="",w=d;do x+=Z(w),w=w.return;while(w);var A=x}catch(O){A=`
Error generating stack: `+O.message+`
`+O.stack}return{value:l,source:d,stack:A,digest:null}}function yp(l,d,x){return{value:l,source:null,stack:x??null,digest:d??null}}function vp(l,d){try{console.error(d.value)}catch(x){setTimeout(function(){throw x})}}var gR=typeof WeakMap=="function"?WeakMap:Map;function $1(l,d,x){x=wi(-1,x),x.tag=3,x.payload={element:null};var w=d.value;return x.callback=function(){Fg||(Fg=!0,Lp=w),vp(l,d)},x}function U1(l,d,x){x=wi(-1,x),x.tag=3;var w=l.type.getDerivedStateFromError;if(typeof w=="function"){var A=d.value;x.payload=function(){return w(A)},x.callback=function(){vp(l,d)}}var O=l.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(x.callback=function(){vp(l,d),typeof w!="function"&&(yo===null?yo=new Set([this]):yo.add(this));var $=d.stack;this.componentDidCatch(d.value,{componentStack:$!==null?$:""})}),x}function F1(l,d,x){var w=l.pingCache;if(w===null){w=l.pingCache=new gR;var A=new Set;w.set(d,A)}else A=w.get(d),A===void 0&&(A=new Set,w.set(d,A));A.has(x)||(A.add(x),l=ER.bind(null,l,d,x),d.then(l,l))}function z1(l){do{var d;if((d=l.tag===13)&&(d=l.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return l;l=l.return}while(l!==null);return null}function B1(l,d,x,w,A){return(l.mode&1)===0?(l===d?l.flags|=65536:(l.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(d=wi(-1,1),d.tag=2,xo(x,d,1))),x.lanes|=1),l):(l.flags|=65536,l.lanes=A,l)}var hR=C.ReactCurrentOwner,js=!1;function ns(l,d,x,w){d.child=l===null?l1(d,null,x,w):gc(d,l.child,x,w)}function q1(l,d,x,w,A){x=x.render;var O=d.ref;return fc(d,A),w=dp(l,d,x,w,O,A),x=up(),l!==null&&!js?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~A,ji(l,d,A)):(Rr&&x&&Kx(d),d.flags|=1,ns(l,d,w,A),d.child)}function H1(l,d,x,w,A){if(l===null){var O=x.type;return typeof O=="function"&&!zp(O)&&O.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(d.tag=15,d.type=O,W1(l,d,O,w,A)):(l=Vg(x.type,null,w,d,d.mode,A),l.ref=d.ref,l.return=d,d.child=l)}if(O=l.child,(l.lanes&A)===0){var $=O.memoizedProps;if(x=x.compare,x=x!==null?x:zd,x($,w)&&l.ref===d.ref)return ji(l,d,A)}return d.flags|=1,l=jo(O,w),l.ref=d.ref,l.return=d,d.child=l}function W1(l,d,x,w,A){if(l!==null){var O=l.memoizedProps;if(zd(O,w)&&l.ref===d.ref)if(js=!1,d.pendingProps=w=O,(l.lanes&A)!==0)(l.flags&131072)!==0&&(js=!0);else return d.lanes=l.lanes,ji(l,d,A)}return bp(l,d,x,w,A)}function V1(l,d,x){var w=d.pendingProps,A=w.children,O=l!==null?l.memoizedState:null;if(w.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},kr(vc,zs),zs|=x;else{if((x&1073741824)===0)return l=O!==null?O.baseLanes|x:x,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:l,cachePool:null,transitions:null},d.updateQueue=null,kr(vc,zs),zs|=l,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=O!==null?O.baseLanes:x,kr(vc,zs),zs|=w}else O!==null?(w=O.baseLanes|x,d.memoizedState=null):w=x,kr(vc,zs),zs|=w;return ns(l,d,A,x),d.child}function K1(l,d){var x=d.ref;(l===null&&x!==null||l!==null&&l.ref!==x)&&(d.flags|=512,d.flags|=2097152)}function bp(l,d,x,w,A){var O=ws(x)?tl:Qa.current;return O=cc(d,O),fc(d,A),x=dp(l,d,x,w,O,A),w=up(),l!==null&&!js?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~A,ji(l,d,A)):(Rr&&w&&Kx(d),d.flags|=1,ns(l,d,x,A),d.child)}function G1(l,d,x,w,A){if(ws(x)){var O=!0;pg(d)}else O=!1;if(fc(d,A),d.stateNode===null)Rg(l,d),M1(d,x,w),pp(d,x,w,A),w=!0;else if(l===null){var $=d.stateNode,te=d.memoizedProps;$.props=te;var ie=$.context,Se=x.contextType;typeof Se=="object"&&Se!==null?Se=tn(Se):(Se=ws(x)?tl:Qa.current,Se=cc(d,Se));var Le=x.getDerivedStateFromProps,_e=typeof Le=="function"||typeof $.getSnapshotBeforeUpdate=="function";_e||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(te!==w||ie!==Se)&&_1(d,$,w,Se),fo=!1;var Ie=d.memoizedState;$.state=Ie,Cg(d,w,$,A),ie=d.memoizedState,te!==w||Ie!==ie||bs.current||fo?(typeof Le=="function"&&(xp(d,x,Le,w),ie=d.memoizedState),(te=fo||R1(d,x,te,w,Ie,ie,Se))?(_e||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(d.flags|=4194308)):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=w,d.memoizedState=ie),$.props=w,$.state=ie,$.context=Se,w=te):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),w=!1)}else{$=d.stateNode,d1(l,d),te=d.memoizedProps,Se=d.type===d.elementType?te:En(d.type,te),$.props=Se,_e=d.pendingProps,Ie=$.context,ie=x.contextType,typeof ie=="object"&&ie!==null?ie=tn(ie):(ie=ws(x)?tl:Qa.current,ie=cc(d,ie));var Ze=x.getDerivedStateFromProps;(Le=typeof Ze=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(te!==_e||Ie!==ie)&&_1(d,$,w,ie),fo=!1,Ie=d.memoizedState,$.state=Ie,Cg(d,w,$,A);var lt=d.memoizedState;te!==_e||Ie!==lt||bs.current||fo?(typeof Ze=="function"&&(xp(d,x,Ze,w),lt=d.memoizedState),(Se=fo||R1(d,x,Se,w,Ie,lt,ie)||!1)?(Le||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(w,lt,ie),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(w,lt,ie)),typeof $.componentDidUpdate=="function"&&(d.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof $.componentDidUpdate!="function"||te===l.memoizedProps&&Ie===l.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||te===l.memoizedProps&&Ie===l.memoizedState||(d.flags|=1024),d.memoizedProps=w,d.memoizedState=lt),$.props=w,$.state=lt,$.context=ie,w=Se):(typeof $.componentDidUpdate!="function"||te===l.memoizedProps&&Ie===l.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||te===l.memoizedProps&&Ie===l.memoizedState||(d.flags|=1024),w=!1)}return wp(l,d,x,w,O,A)}function wp(l,d,x,w,A,O){K1(l,d);var $=(d.flags&128)!==0;if(!w&&!$)return A&&Jk(d,x,!1),ji(l,d,O);w=d.stateNode,hR.current=d;var te=$&&typeof x.getDerivedStateFromError!="function"?null:w.render();return d.flags|=1,l!==null&&$?(d.child=gc(d,l.child,null,O),d.child=gc(d,null,te,O)):ns(l,d,te,O),d.memoizedState=w.state,A&&Jk(d,x,!0),d.child}function Y1(l){var d=l.stateNode;d.pendingContext?Xk(l,d.pendingContext,d.pendingContext!==d.context):d.context&&Xk(l,d.context,!1),sp(l,d.containerInfo)}function Q1(l,d,x,w,A){return mc(),Xx(A),d.flags|=256,ns(l,d,x,w),d.child}var jp={dehydrated:null,treeContext:null,retryLane:0};function Np(l){return{baseLanes:l,cachePool:null,transitions:null}}function X1(l,d,x){var w=d.pendingProps,A=zr.current,O=!1,$=(d.flags&128)!==0,te;if((te=$)||(te=l!==null&&l.memoizedState===null?!1:(A&2)!==0),te?(O=!0,d.flags&=-129):(l===null||l.memoizedState!==null)&&(A|=1),kr(zr,A&1),l===null)return Qx(d),l=d.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((d.mode&1)===0?d.lanes=1:l.data==="$!"?d.lanes=8:d.lanes=1073741824,null):($=w.children,l=w.fallback,O?(w=d.mode,O=d.child,$={mode:"hidden",children:$},(w&1)===0&&O!==null?(O.childLanes=0,O.pendingProps=$):O=Kg($,w,0,null),l=ul(l,w,x,null),O.return=d,l.return=d,O.sibling=l,d.child=O,d.child.memoizedState=Np(x),d.memoizedState=jp,l):kp(d,$));if(A=l.memoizedState,A!==null&&(te=A.dehydrated,te!==null))return fR(l,d,$,w,te,A,x);if(O){O=w.fallback,$=d.mode,A=l.child,te=A.sibling;var ie={mode:"hidden",children:w.children};return($&1)===0&&d.child!==A?(w=d.child,w.childLanes=0,w.pendingProps=ie,d.deletions=null):(w=jo(A,ie),w.subtreeFlags=A.subtreeFlags&14680064),te!==null?O=jo(te,O):(O=ul(O,$,x,null),O.flags|=2),O.return=d,w.return=d,w.sibling=O,d.child=w,w=O,O=d.child,$=l.child.memoizedState,$=$===null?Np(x):{baseLanes:$.baseLanes|x,cachePool:null,transitions:$.transitions},O.memoizedState=$,O.childLanes=l.childLanes&~x,d.memoizedState=jp,w}return O=l.child,l=O.sibling,w=jo(O,{mode:"visible",children:w.children}),(d.mode&1)===0&&(w.lanes=x),w.return=d,w.sibling=null,l!==null&&(x=d.deletions,x===null?(d.deletions=[l],d.flags|=16):x.push(l)),d.child=w,d.memoizedState=null,w}function kp(l,d){return d=Kg({mode:"visible",children:d},l.mode,0,null),d.return=l,l.child=d}function Lg(l,d,x,w){return w!==null&&Xx(w),gc(d,l.child,null,x),l=kp(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function fR(l,d,x,w,A,O,$){if(x)return d.flags&256?(d.flags&=-257,w=yp(Error(a(422))),Lg(l,d,$,w)):d.memoizedState!==null?(d.child=l.child,d.flags|=128,null):(O=w.fallback,A=d.mode,w=Kg({mode:"visible",children:w.children},A,0,null),O=ul(O,A,$,null),O.flags|=2,w.return=d,O.return=d,w.sibling=O,d.child=w,(d.mode&1)!==0&&gc(d,l.child,null,$),d.child.memoizedState=Np($),d.memoizedState=jp,O);if((d.mode&1)===0)return Lg(l,d,$,null);if(A.data==="$!"){if(w=A.nextSibling&&A.nextSibling.dataset,w)var te=w.dgst;return w=te,O=Error(a(419)),w=yp(O,w,void 0),Lg(l,d,$,w)}if(te=($&l.childLanes)!==0,js||te){if(w=Pa,w!==null){switch($&-$){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=(A&(w.suspendedLanes|$))!==0?0:A,A!==0&&A!==O.retryLane&&(O.retryLane=A,bi(l,A),Tn(w,l,A,-1))}return Fp(),w=yp(Error(a(421))),Lg(l,d,$,w)}return A.data==="$?"?(d.flags|=128,d.child=l.child,d=AR.bind(null,l),A._reactRetry=d,null):(l=O.treeContext,Fs=uo(A.nextSibling),Us=d,Rr=!0,Cn=null,l!==null&&(Js[en++]=yi,Js[en++]=vi,Js[en++]=rl,yi=l.id,vi=l.overflow,rl=d),d=kp(d,w.children),d.flags|=4096,d)}function Z1(l,d,x){l.lanes|=d;var w=l.alternate;w!==null&&(w.lanes|=d),tp(l.return,d,x)}function Sp(l,d,x,w,A){var O=l.memoizedState;O===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:w,tail:x,tailMode:A}:(O.isBackwards=d,O.rendering=null,O.renderingStartTime=0,O.last=w,O.tail=x,O.tailMode=A)}function J1(l,d,x){var w=d.pendingProps,A=w.revealOrder,O=w.tail;if(ns(l,d,w.children,x),w=zr.current,(w&2)!==0)w=w&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Z1(l,x,d);else if(l.tag===19)Z1(l,x,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}w&=1}if(kr(zr,w),(d.mode&1)===0)d.memoizedState=null;else switch(A){case"forwards":for(x=d.child,A=null;x!==null;)l=x.alternate,l!==null&&Eg(l)===null&&(A=x),x=x.sibling;x=A,x===null?(A=d.child,d.child=null):(A=x.sibling,x.sibling=null),Sp(d,!1,A,x,O);break;case"backwards":for(x=null,A=d.child,d.child=null;A!==null;){if(l=A.alternate,l!==null&&Eg(l)===null){d.child=A;break}l=A.sibling,A.sibling=x,x=A,A=l}Sp(d,!0,x,null,O);break;case"together":Sp(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Rg(l,d){(d.mode&1)===0&&l!==null&&(l.alternate=null,d.alternate=null,d.flags|=2)}function ji(l,d,x){if(l!==null&&(d.dependencies=l.dependencies),ol|=d.lanes,(x&d.childLanes)===0)return null;if(l!==null&&d.child!==l.child)throw Error(a(153));if(d.child!==null){for(l=d.child,x=jo(l,l.pendingProps),d.child=x,x.return=d;l.sibling!==null;)l=l.sibling,x=x.sibling=jo(l,l.pendingProps),x.return=d;x.sibling=null}return d.child}function xR(l,d,x){switch(d.tag){case 3:Y1(d),mc();break;case 5:g1(d);break;case 1:ws(d.type)&&pg(d);break;case 4:sp(d,d.stateNode.containerInfo);break;case 10:var w=d.type._context,A=d.memoizedProps.value;kr(Ng,w._currentValue),w._currentValue=A;break;case 13:if(w=d.memoizedState,w!==null)return w.dehydrated!==null?(kr(zr,zr.current&1),d.flags|=128,null):(x&d.child.childLanes)!==0?X1(l,d,x):(kr(zr,zr.current&1),l=ji(l,d,x),l!==null?l.sibling:null);kr(zr,zr.current&1);break;case 19:if(w=(x&d.childLanes)!==0,(l.flags&128)!==0){if(w)return J1(l,d,x);d.flags|=128}if(A=d.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),kr(zr,zr.current),w)break;return null;case 22:case 23:return d.lanes=0,V1(l,d,x)}return ji(l,d,x)}var eS,Cp,tS,rS;eS=function(l,d){for(var x=d.child;x!==null;){if(x.tag===5||x.tag===6)l.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Cp=function(){},tS=function(l,d,x,w){var A=l.memoizedProps;if(A!==w){l=d.stateNode,nl(Vn.current);var O=null;switch(x){case"input":A=se(l,A),w=se(l,w),O=[];break;case"select":A=G({},A,{value:void 0}),w=G({},w,{value:void 0}),O=[];break;case"textarea":A=Xe(l,A),w=Xe(l,w),O=[];break;default:typeof A.onClick!="function"&&typeof w.onClick=="function"&&(l.onclick=hg)}Ve(x,w);var $;x=null;for(Se in A)if(!w.hasOwnProperty(Se)&&A.hasOwnProperty(Se)&&A[Se]!=null)if(Se==="style"){var te=A[Se];for($ in te)te.hasOwnProperty($)&&(x||(x={}),x[$]="")}else Se!=="dangerouslySetInnerHTML"&&Se!=="children"&&Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&Se!=="autoFocus"&&(n.hasOwnProperty(Se)?O||(O=[]):(O=O||[]).push(Se,null));for(Se in w){var ie=w[Se];if(te=A?.[Se],w.hasOwnProperty(Se)&&ie!==te&&(ie!=null||te!=null))if(Se==="style")if(te){for($ in te)!te.hasOwnProperty($)||ie&&ie.hasOwnProperty($)||(x||(x={}),x[$]="");for($ in ie)ie.hasOwnProperty($)&&te[$]!==ie[$]&&(x||(x={}),x[$]=ie[$])}else x||(O||(O=[]),O.push(Se,x)),x=ie;else Se==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,te=te?te.__html:void 0,ie!=null&&te!==ie&&(O=O||[]).push(Se,ie)):Se==="children"?typeof ie!="string"&&typeof ie!="number"||(O=O||[]).push(Se,""+ie):Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&(n.hasOwnProperty(Se)?(ie!=null&&Se==="onScroll"&&Pr("scroll",l),O||te===ie||(O=[])):(O=O||[]).push(Se,ie))}x&&(O=O||[]).push("style",x);var Se=O;(d.updateQueue=Se)&&(d.flags|=4)}},rS=function(l,d,x,w){x!==w&&(d.flags|=4)};function ru(l,d){if(!Rr)switch(l.tailMode){case"hidden":d=l.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?l.tail=null:x.sibling=null;break;case"collapsed":x=l.tail;for(var w=null;x!==null;)x.alternate!==null&&(w=x),x=x.sibling;w===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:w.sibling=null}}function Za(l){var d=l.alternate!==null&&l.alternate.child===l.child,x=0,w=0;if(d)for(var A=l.child;A!==null;)x|=A.lanes|A.childLanes,w|=A.subtreeFlags&14680064,w|=A.flags&14680064,A.return=l,A=A.sibling;else for(A=l.child;A!==null;)x|=A.lanes|A.childLanes,w|=A.subtreeFlags,w|=A.flags,A.return=l,A=A.sibling;return l.subtreeFlags|=w,l.childLanes=x,d}function pR(l,d,x){var w=d.pendingProps;switch(Gx(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Za(d),null;case 1:return ws(d.type)&&xg(),Za(d),null;case 3:return w=d.stateNode,xc(),Tr(bs),Tr(Qa),op(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(l===null||l.child===null)&&(wg(d)?d.flags|=4:l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Cn!==null&&(_p(Cn),Cn=null))),Cp(l,d),Za(d),null;case 5:np(d);var A=nl(Xd.current);if(x=d.type,l!==null&&d.stateNode!=null)tS(l,d,x,w,A),l.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!w){if(d.stateNode===null)throw Error(a(166));return Za(d),null}if(l=nl(Vn.current),wg(d)){w=d.stateNode,x=d.type;var O=d.memoizedProps;switch(w[Wn]=d,w[Vd]=O,l=(d.mode&1)!==0,x){case"dialog":Pr("cancel",w),Pr("close",w);break;case"iframe":case"object":case"embed":Pr("load",w);break;case"video":case"audio":for(A=0;A<qd.length;A++)Pr(qd[A],w);break;case"source":Pr("error",w);break;case"img":case"image":case"link":Pr("error",w),Pr("load",w);break;case"details":Pr("toggle",w);break;case"input":De(w,O),Pr("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!O.multiple},Pr("invalid",w);break;case"textarea":Ke(w,O),Pr("invalid",w)}Ve(x,O),A=null;for(var $ in O)if(O.hasOwnProperty($)){var te=O[$];$==="children"?typeof te=="string"?w.textContent!==te&&(O.suppressHydrationWarning!==!0&&gg(w.textContent,te,l),A=["children",te]):typeof te=="number"&&w.textContent!==""+te&&(O.suppressHydrationWarning!==!0&&gg(w.textContent,te,l),A=["children",""+te]):n.hasOwnProperty($)&&te!=null&&$==="onScroll"&&Pr("scroll",w)}switch(x){case"input":Te(w),Dt(w,O,!0);break;case"textarea":Te(w),Nt(w);break;case"select":case"option":break;default:typeof O.onClick=="function"&&(w.onclick=hg)}w=A,d.updateQueue=w,w!==null&&(d.flags|=4)}else{$=A.nodeType===9?A:A.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=_t(x)),l==="http://www.w3.org/1999/xhtml"?x==="script"?(l=$.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof w.is=="string"?l=$.createElement(x,{is:w.is}):(l=$.createElement(x),x==="select"&&($=l,w.multiple?$.multiple=!0:w.size&&($.size=w.size))):l=$.createElementNS(l,x),l[Wn]=d,l[Vd]=w,eS(l,d,!1,!1),d.stateNode=l;e:{switch($=Ge(x,w),x){case"dialog":Pr("cancel",l),Pr("close",l),A=w;break;case"iframe":case"object":case"embed":Pr("load",l),A=w;break;case"video":case"audio":for(A=0;A<qd.length;A++)Pr(qd[A],l);A=w;break;case"source":Pr("error",l),A=w;break;case"img":case"image":case"link":Pr("error",l),Pr("load",l),A=w;break;case"details":Pr("toggle",l),A=w;break;case"input":De(l,w),A=se(l,w),Pr("invalid",l);break;case"option":A=w;break;case"select":l._wrapperState={wasMultiple:!!w.multiple},A=G({},w,{value:void 0}),Pr("invalid",l);break;case"textarea":Ke(l,w),A=Xe(l,w),Pr("invalid",l);break;default:A=w}Ve(x,A),te=A;for(O in te)if(te.hasOwnProperty(O)){var ie=te[O];O==="style"?pe(l,ie):O==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,ie!=null&&R(l,ie)):O==="children"?typeof ie=="string"?(x!=="textarea"||ie!=="")&&ce(l,ie):typeof ie=="number"&&ce(l,""+ie):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(n.hasOwnProperty(O)?ie!=null&&O==="onScroll"&&Pr("scroll",l):ie!=null&&E(l,O,ie,$))}switch(x){case"input":Te(l),Dt(l,w,!1);break;case"textarea":Te(l),Nt(l);break;case"option":w.value!=null&&l.setAttribute("value",""+Q(w.value));break;case"select":l.multiple=!!w.multiple,O=w.value,O!=null?le(l,!!w.multiple,O,!1):w.defaultValue!=null&&le(l,!!w.multiple,w.defaultValue,!0);break;default:typeof A.onClick=="function"&&(l.onclick=hg)}switch(x){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Za(d),null;case 6:if(l&&d.stateNode!=null)rS(l,d,l.memoizedProps,w);else{if(typeof w!="string"&&d.stateNode===null)throw Error(a(166));if(x=nl(Xd.current),nl(Vn.current),wg(d)){if(w=d.stateNode,x=d.memoizedProps,w[Wn]=d,(O=w.nodeValue!==x)&&(l=Us,l!==null))switch(l.tag){case 3:gg(w.nodeValue,x,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&gg(w.nodeValue,x,(l.mode&1)!==0)}O&&(d.flags|=4)}else w=(x.nodeType===9?x:x.ownerDocument).createTextNode(w),w[Wn]=d,d.stateNode=w}return Za(d),null;case 13:if(Tr(zr),w=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Rr&&Fs!==null&&(d.mode&1)!==0&&(d.flags&128)===0)n1(),mc(),d.flags|=98560,O=!1;else if(O=wg(d),w!==null&&w.dehydrated!==null){if(l===null){if(!O)throw Error(a(318));if(O=d.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(a(317));O[Wn]=d}else mc(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Za(d),O=!1}else Cn!==null&&(_p(Cn),Cn=null),O=!0;if(!O)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=x,d):(w=w!==null,w!==(l!==null&&l.memoizedState!==null)&&w&&(d.child.flags|=8192,(d.mode&1)!==0&&(l===null||(zr.current&1)!==0?fa===0&&(fa=3):Fp())),d.updateQueue!==null&&(d.flags|=4),Za(d),null);case 4:return xc(),Cp(l,d),l===null&&Hd(d.stateNode.containerInfo),Za(d),null;case 10:return ep(d.type._context),Za(d),null;case 17:return ws(d.type)&&xg(),Za(d),null;case 19:if(Tr(zr),O=d.memoizedState,O===null)return Za(d),null;if(w=(d.flags&128)!==0,$=O.rendering,$===null)if(w)ru(O,!1);else{if(fa!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if($=Eg(l),$!==null){for(d.flags|=128,ru(O,!1),w=$.updateQueue,w!==null&&(d.updateQueue=w,d.flags|=4),d.subtreeFlags=0,w=x,x=d.child;x!==null;)O=x,l=w,O.flags&=14680066,$=O.alternate,$===null?(O.childLanes=0,O.lanes=l,O.child=null,O.subtreeFlags=0,O.memoizedProps=null,O.memoizedState=null,O.updateQueue=null,O.dependencies=null,O.stateNode=null):(O.childLanes=$.childLanes,O.lanes=$.lanes,O.child=$.child,O.subtreeFlags=0,O.deletions=null,O.memoizedProps=$.memoizedProps,O.memoizedState=$.memoizedState,O.updateQueue=$.updateQueue,O.type=$.type,l=$.dependencies,O.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),x=x.sibling;return kr(zr,zr.current&1|2),d.child}l=l.sibling}O.tail!==null&&Y()>bc&&(d.flags|=128,w=!0,ru(O,!1),d.lanes=4194304)}else{if(!w)if(l=Eg($),l!==null){if(d.flags|=128,w=!0,x=l.updateQueue,x!==null&&(d.updateQueue=x,d.flags|=4),ru(O,!0),O.tail===null&&O.tailMode==="hidden"&&!$.alternate&&!Rr)return Za(d),null}else 2*Y()-O.renderingStartTime>bc&&x!==1073741824&&(d.flags|=128,w=!0,ru(O,!1),d.lanes=4194304);O.isBackwards?($.sibling=d.child,d.child=$):(x=O.last,x!==null?x.sibling=$:d.child=$,O.last=$)}return O.tail!==null?(d=O.tail,O.rendering=d,O.tail=d.sibling,O.renderingStartTime=Y(),d.sibling=null,x=zr.current,kr(zr,w?x&1|2:x&1),d):(Za(d),null);case 22:case 23:return Up(),w=d.memoizedState!==null,l!==null&&l.memoizedState!==null!==w&&(d.flags|=8192),w&&(d.mode&1)!==0?(zs&1073741824)!==0&&(Za(d),d.subtreeFlags&6&&(d.flags|=8192)):Za(d),null;case 24:return null;case 25:return null}throw Error(a(156,d.tag))}function yR(l,d){switch(Gx(d),d.tag){case 1:return ws(d.type)&&xg(),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return xc(),Tr(bs),Tr(Qa),op(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 5:return np(d),null;case 13:if(Tr(zr),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(a(340));mc()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return Tr(zr),null;case 4:return xc(),null;case 10:return ep(d.type._context),null;case 22:case 23:return Up(),null;case 24:return null;default:return null}}var Mg=!1,Ja=!1,vR=typeof WeakSet=="function"?WeakSet:Set,st=null;function yc(l,d){var x=l.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(w){Kr(l,d,w)}else x.current=null}function Ep(l,d,x){try{x()}catch(w){Kr(l,d,w)}}var aS=!1;function bR(l,d){if(Ux=rg,l=Rk(),Dx(l)){if("selectionStart"in l)var x={start:l.selectionStart,end:l.selectionEnd};else e:{x=(x=l.ownerDocument)&&x.defaultView||window;var w=x.getSelection&&x.getSelection();if(w&&w.rangeCount!==0){x=w.anchorNode;var A=w.anchorOffset,O=w.focusNode;w=w.focusOffset;try{x.nodeType,O.nodeType}catch{x=null;break e}var $=0,te=-1,ie=-1,Se=0,Le=0,_e=l,Ie=null;t:for(;;){for(var Ze;_e!==x||A!==0&&_e.nodeType!==3||(te=$+A),_e!==O||w!==0&&_e.nodeType!==3||(ie=$+w),_e.nodeType===3&&($+=_e.nodeValue.length),(Ze=_e.firstChild)!==null;)Ie=_e,_e=Ze;for(;;){if(_e===l)break t;if(Ie===x&&++Se===A&&(te=$),Ie===O&&++Le===w&&(ie=$),(Ze=_e.nextSibling)!==null)break;_e=Ie,Ie=_e.parentNode}_e=Ze}x=te===-1||ie===-1?null:{start:te,end:ie}}else x=null}x=x||{start:0,end:0}}else x=null;for(Fx={focusedElem:l,selectionRange:x},rg=!1,st=d;st!==null;)if(d=st,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,st=l;else for(;st!==null;){d=st;try{var lt=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(lt!==null){var dt=lt.memoizedProps,ea=lt.memoizedState,be=d.stateNode,he=be.getSnapshotBeforeUpdate(d.elementType===d.type?dt:En(d.type,dt),ea);be.__reactInternalSnapshotBeforeUpdate=he}break;case 3:var je=d.stateNode.containerInfo;je.nodeType===1?je.textContent="":je.nodeType===9&&je.documentElement&&je.removeChild(je.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(ze){Kr(d,d.return,ze)}if(l=d.sibling,l!==null){l.return=d.return,st=l;break}st=d.return}return lt=aS,aS=!1,lt}function au(l,d,x){var w=d.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var A=w=w.next;do{if((A.tag&l)===l){var O=A.destroy;A.destroy=void 0,O!==void 0&&Ep(d,x,O)}A=A.next}while(A!==w)}}function _g(l,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&l)===l){var w=x.create;x.destroy=w()}x=x.next}while(x!==d)}}function Ap(l){var d=l.ref;if(d!==null){var x=l.stateNode;switch(l.tag){case 5:l=x;break;default:l=x}typeof d=="function"?d(l):d.current=l}}function sS(l){var d=l.alternate;d!==null&&(l.alternate=null,sS(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&(delete d[Wn],delete d[Vd],delete d[Hx],delete d[rR],delete d[aR])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function nS(l){return l.tag===5||l.tag===3||l.tag===4}function iS(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||nS(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Pp(l,d,x){var w=l.tag;if(w===5||w===6)l=l.stateNode,d?x.nodeType===8?x.parentNode.insertBefore(l,d):x.insertBefore(l,d):(x.nodeType===8?(d=x.parentNode,d.insertBefore(l,x)):(d=x,d.appendChild(l)),x=x._reactRootContainer,x!=null||d.onclick!==null||(d.onclick=hg));else if(w!==4&&(l=l.child,l!==null))for(Pp(l,d,x),l=l.sibling;l!==null;)Pp(l,d,x),l=l.sibling}function Tp(l,d,x){var w=l.tag;if(w===5||w===6)l=l.stateNode,d?x.insertBefore(l,d):x.appendChild(l);else if(w!==4&&(l=l.child,l!==null))for(Tp(l,d,x),l=l.sibling;l!==null;)Tp(l,d,x),l=l.sibling}var qa=null,An=!1;function po(l,d,x){for(x=x.child;x!==null;)oS(l,d,x),x=x.sibling}function oS(l,d,x){if(Zs&&typeof Zs.onCommitFiberUnmount=="function")try{Zs.onCommitFiberUnmount(Ms,x)}catch{}switch(x.tag){case 5:Ja||yc(x,d);case 6:var w=qa,A=An;qa=null,po(l,d,x),qa=w,An=A,qa!==null&&(An?(l=qa,x=x.stateNode,l.nodeType===8?l.parentNode.removeChild(x):l.removeChild(x)):qa.removeChild(x.stateNode));break;case 18:qa!==null&&(An?(l=qa,x=x.stateNode,l.nodeType===8?qx(l.parentNode,x):l.nodeType===1&&qx(l,x),Rd(l)):qx(qa,x.stateNode));break;case 4:w=qa,A=An,qa=x.stateNode.containerInfo,An=!0,po(l,d,x),qa=w,An=A;break;case 0:case 11:case 14:case 15:if(!Ja&&(w=x.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){A=w=w.next;do{var O=A,$=O.destroy;O=O.tag,$!==void 0&&((O&2)!==0||(O&4)!==0)&&Ep(x,d,$),A=A.next}while(A!==w)}po(l,d,x);break;case 1:if(!Ja&&(yc(x,d),w=x.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=x.memoizedProps,w.state=x.memoizedState,w.componentWillUnmount()}catch(te){Kr(x,d,te)}po(l,d,x);break;case 21:po(l,d,x);break;case 22:x.mode&1?(Ja=(w=Ja)||x.memoizedState!==null,po(l,d,x),Ja=w):po(l,d,x);break;default:po(l,d,x)}}function lS(l){var d=l.updateQueue;if(d!==null){l.updateQueue=null;var x=l.stateNode;x===null&&(x=l.stateNode=new vR),d.forEach(function(w){var A=PR.bind(null,l,w);x.has(w)||(x.add(w),w.then(A,A))})}}function Pn(l,d){var x=d.deletions;if(x!==null)for(var w=0;w<x.length;w++){var A=x[w];try{var O=l,$=d,te=$;e:for(;te!==null;){switch(te.tag){case 5:qa=te.stateNode,An=!1;break e;case 3:qa=te.stateNode.containerInfo,An=!0;break e;case 4:qa=te.stateNode.containerInfo,An=!0;break e}te=te.return}if(qa===null)throw Error(a(160));oS(O,$,A),qa=null,An=!1;var ie=A.alternate;ie!==null&&(ie.return=null),A.return=null}catch(Se){Kr(A,d,Se)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)cS(d,l),d=d.sibling}function cS(l,d){var x=l.alternate,w=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Pn(d,l),Gn(l),w&4){try{au(3,l,l.return),_g(3,l)}catch(dt){Kr(l,l.return,dt)}try{au(5,l,l.return)}catch(dt){Kr(l,l.return,dt)}}break;case 1:Pn(d,l),Gn(l),w&512&&x!==null&&yc(x,x.return);break;case 5:if(Pn(d,l),Gn(l),w&512&&x!==null&&yc(x,x.return),l.flags&32){var A=l.stateNode;try{ce(A,"")}catch(dt){Kr(l,l.return,dt)}}if(w&4&&(A=l.stateNode,A!=null)){var O=l.memoizedProps,$=x!==null?x.memoizedProps:O,te=l.type,ie=l.updateQueue;if(l.updateQueue=null,ie!==null)try{te==="input"&&O.type==="radio"&&O.name!=null&&Me(A,O),Ge(te,$);var Se=Ge(te,O);for($=0;$<ie.length;$+=2){var Le=ie[$],_e=ie[$+1];Le==="style"?pe(A,_e):Le==="dangerouslySetInnerHTML"?R(A,_e):Le==="children"?ce(A,_e):E(A,Le,_e,Se)}switch(te){case"input":Ct(A,O);break;case"textarea":Ne(A,O);break;case"select":var Ie=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!O.multiple;var Ze=O.value;Ze!=null?le(A,!!O.multiple,Ze,!1):Ie!==!!O.multiple&&(O.defaultValue!=null?le(A,!!O.multiple,O.defaultValue,!0):le(A,!!O.multiple,O.multiple?[]:"",!1))}A[Vd]=O}catch(dt){Kr(l,l.return,dt)}}break;case 6:if(Pn(d,l),Gn(l),w&4){if(l.stateNode===null)throw Error(a(162));A=l.stateNode,O=l.memoizedProps;try{A.nodeValue=O}catch(dt){Kr(l,l.return,dt)}}break;case 3:if(Pn(d,l),Gn(l),w&4&&x!==null&&x.memoizedState.isDehydrated)try{Rd(d.containerInfo)}catch(dt){Kr(l,l.return,dt)}break;case 4:Pn(d,l),Gn(l);break;case 13:Pn(d,l),Gn(l),A=l.child,A.flags&8192&&(O=A.memoizedState!==null,A.stateNode.isHidden=O,!O||A.alternate!==null&&A.alternate.memoizedState!==null||(Ip=Y())),w&4&&lS(l);break;case 22:if(Le=x!==null&&x.memoizedState!==null,l.mode&1?(Ja=(Se=Ja)||Le,Pn(d,l),Ja=Se):Pn(d,l),Gn(l),w&8192){if(Se=l.memoizedState!==null,(l.stateNode.isHidden=Se)&&!Le&&(l.mode&1)!==0)for(st=l,Le=l.child;Le!==null;){for(_e=st=Le;st!==null;){switch(Ie=st,Ze=Ie.child,Ie.tag){case 0:case 11:case 14:case 15:au(4,Ie,Ie.return);break;case 1:yc(Ie,Ie.return);var lt=Ie.stateNode;if(typeof lt.componentWillUnmount=="function"){w=Ie,x=Ie.return;try{d=w,lt.props=d.memoizedProps,lt.state=d.memoizedState,lt.componentWillUnmount()}catch(dt){Kr(w,x,dt)}}break;case 5:yc(Ie,Ie.return);break;case 22:if(Ie.memoizedState!==null){mS(_e);continue}}Ze!==null?(Ze.return=Ie,st=Ze):mS(_e)}Le=Le.sibling}e:for(Le=null,_e=l;;){if(_e.tag===5){if(Le===null){Le=_e;try{A=_e.stateNode,Se?(O=A.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none"):(te=_e.stateNode,ie=_e.memoizedProps.style,$=ie!=null&&ie.hasOwnProperty("display")?ie.display:null,te.style.display=Pe("display",$))}catch(dt){Kr(l,l.return,dt)}}}else if(_e.tag===6){if(Le===null)try{_e.stateNode.nodeValue=Se?"":_e.memoizedProps}catch(dt){Kr(l,l.return,dt)}}else if((_e.tag!==22&&_e.tag!==23||_e.memoizedState===null||_e===l)&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===l)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===l)break e;Le===_e&&(Le=null),_e=_e.return}Le===_e&&(Le=null),_e.sibling.return=_e.return,_e=_e.sibling}}break;case 19:Pn(d,l),Gn(l),w&4&&lS(l);break;case 21:break;default:Pn(d,l),Gn(l)}}function Gn(l){var d=l.flags;if(d&2){try{e:{for(var x=l.return;x!==null;){if(nS(x)){var w=x;break e}x=x.return}throw Error(a(160))}switch(w.tag){case 5:var A=w.stateNode;w.flags&32&&(ce(A,""),w.flags&=-33);var O=iS(l);Tp(l,O,A);break;case 3:case 4:var $=w.stateNode.containerInfo,te=iS(l);Pp(l,te,$);break;default:throw Error(a(161))}}catch(ie){Kr(l,l.return,ie)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function wR(l,d,x){st=l,dS(l)}function dS(l,d,x){for(var w=(l.mode&1)!==0;st!==null;){var A=st,O=A.child;if(A.tag===22&&w){var $=A.memoizedState!==null||Mg;if(!$){var te=A.alternate,ie=te!==null&&te.memoizedState!==null||Ja;te=Mg;var Se=Ja;if(Mg=$,(Ja=ie)&&!Se)for(st=A;st!==null;)$=st,ie=$.child,$.tag===22&&$.memoizedState!==null?gS(A):ie!==null?(ie.return=$,st=ie):gS(A);for(;O!==null;)st=O,dS(O),O=O.sibling;st=A,Mg=te,Ja=Se}uS(l)}else(A.subtreeFlags&8772)!==0&&O!==null?(O.return=A,st=O):uS(l)}}function uS(l){for(;st!==null;){var d=st;if((d.flags&8772)!==0){var x=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Ja||_g(5,d);break;case 1:var w=d.stateNode;if(d.flags&4&&!Ja)if(x===null)w.componentDidMount();else{var A=d.elementType===d.type?x.memoizedProps:En(d.type,x.memoizedProps);w.componentDidUpdate(A,x.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var O=d.updateQueue;O!==null&&m1(d,O,w);break;case 3:var $=d.updateQueue;if($!==null){if(x=null,d.child!==null)switch(d.child.tag){case 5:x=d.child.stateNode;break;case 1:x=d.child.stateNode}m1(d,$,x)}break;case 5:var te=d.stateNode;if(x===null&&d.flags&4){x=te;var ie=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":ie.autoFocus&&x.focus();break;case"img":ie.src&&(x.src=ie.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Se=d.alternate;if(Se!==null){var Le=Se.memoizedState;if(Le!==null){var _e=Le.dehydrated;_e!==null&&Rd(_e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}Ja||d.flags&512&&Ap(d)}catch(Ie){Kr(d,d.return,Ie)}}if(d===l){st=null;break}if(x=d.sibling,x!==null){x.return=d.return,st=x;break}st=d.return}}function mS(l){for(;st!==null;){var d=st;if(d===l){st=null;break}var x=d.sibling;if(x!==null){x.return=d.return,st=x;break}st=d.return}}function gS(l){for(;st!==null;){var d=st;try{switch(d.tag){case 0:case 11:case 15:var x=d.return;try{_g(4,d)}catch(ie){Kr(d,x,ie)}break;case 1:var w=d.stateNode;if(typeof w.componentDidMount=="function"){var A=d.return;try{w.componentDidMount()}catch(ie){Kr(d,A,ie)}}var O=d.return;try{Ap(d)}catch(ie){Kr(d,O,ie)}break;case 5:var $=d.return;try{Ap(d)}catch(ie){Kr(d,$,ie)}}}catch(ie){Kr(d,d.return,ie)}if(d===l){st=null;break}var te=d.sibling;if(te!==null){te.return=d.return,st=te;break}st=d.return}}var jR=Math.ceil,$g=C.ReactCurrentDispatcher,Dp=C.ReactCurrentOwner,an=C.ReactCurrentBatchConfig,Zt=0,Pa=null,oa=null,Ha=0,zs=0,vc=mo(0),fa=0,su=null,ol=0,Ug=0,Op=0,nu=null,Ns=null,Ip=0,bc=1/0,Ni=null,Fg=!1,Lp=null,yo=null,zg=!1,vo=null,Bg=0,iu=0,Rp=null,qg=-1,Hg=0;function is(){return(Zt&6)!==0?Y():qg!==-1?qg:qg=Y()}function bo(l){return(l.mode&1)===0?1:(Zt&2)!==0&&Ha!==0?Ha&-Ha:nR.transition!==null?(Hg===0&&(Hg=ao()),Hg):(l=mr,l!==0||(l=window.event,l=l===void 0?16:fk(l.type)),l)}function Tn(l,d,x,w){if(50<iu)throw iu=0,Rp=null,Error(a(185));Td(l,x,w),((Zt&2)===0||l!==Pa)&&(l===Pa&&((Zt&2)===0&&(Ug|=x),fa===4&&wo(l,Ha)),ks(l,w),x===1&&Zt===0&&(d.mode&1)===0&&(bc=Y()+500,yg&&ho()))}function ks(l,d){var x=l.callbackNode;Jm(l,d);var w=fi(l,l===Pa?Ha:0);if(w===0)x!==null&&Re(x),l.callbackNode=null,l.callbackPriority=0;else if(d=w&-w,l.callbackPriority!==d){if(x!=null&&Re(x),d===1)l.tag===0?sR(fS.bind(null,l)):e1(fS.bind(null,l)),eR(function(){(Zt&6)===0&&ho()}),x=null;else{switch(ok(w)){case 1:x=We;break;case 4:x=bt;break;case 16:x=et;break;case 536870912:x=ga;break;default:x=et}x=NS(x,hS.bind(null,l))}l.callbackPriority=d,l.callbackNode=x}}function hS(l,d){if(qg=-1,Hg=0,(Zt&6)!==0)throw Error(a(327));var x=l.callbackNode;if(wc()&&l.callbackNode!==x)return null;var w=fi(l,l===Pa?Ha:0);if(w===0)return null;if((w&30)!==0||(w&l.expiredLanes)!==0||d)d=Wg(l,w);else{d=w;var A=Zt;Zt|=2;var O=pS();(Pa!==l||Ha!==d)&&(Ni=null,bc=Y()+500,cl(l,d));do try{SR();break}catch(te){xS(l,te)}while(!0);Jx(),$g.current=O,Zt=A,oa!==null?d=0:(Pa=null,Ha=0,d=fa)}if(d!==0){if(d===2&&(A=Jo(l),A!==0&&(w=A,d=Mp(l,A))),d===1)throw x=su,cl(l,0),wo(l,w),ks(l,Y()),x;if(d===6)wo(l,w);else{if(A=l.current.alternate,(w&30)===0&&!NR(A)&&(d=Wg(l,w),d===2&&(O=Jo(l),O!==0&&(w=O,d=Mp(l,O))),d===1))throw x=su,cl(l,0),wo(l,w),ks(l,Y()),x;switch(l.finishedWork=A,l.finishedLanes=w,d){case 0:case 1:throw Error(a(345));case 2:dl(l,Ns,Ni);break;case 3:if(wo(l,w),(w&130023424)===w&&(d=Ip+500-Y(),10<d)){if(fi(l,0)!==0)break;if(A=l.suspendedLanes,(A&w)!==w){is(),l.pingedLanes|=l.suspendedLanes&A;break}l.timeoutHandle=Bx(dl.bind(null,l,Ns,Ni),d);break}dl(l,Ns,Ni);break;case 4:if(wo(l,w),(w&4194240)===w)break;for(d=l.eventTimes,A=-1;0<w;){var $=31-Ea(w);O=1<<$,$=d[$],$>A&&(A=$),w&=~O}if(w=A,w=Y()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*jR(w/1960))-w,10<w){l.timeoutHandle=Bx(dl.bind(null,l,Ns,Ni),w);break}dl(l,Ns,Ni);break;case 5:dl(l,Ns,Ni);break;default:throw Error(a(329))}}}return ks(l,Y()),l.callbackNode===x?hS.bind(null,l):null}function Mp(l,d){var x=nu;return l.current.memoizedState.isDehydrated&&(cl(l,d).flags|=256),l=Wg(l,d),l!==2&&(d=Ns,Ns=x,d!==null&&_p(d)),l}function _p(l){Ns===null?Ns=l:Ns.push.apply(Ns,l)}function NR(l){for(var d=l;;){if(d.flags&16384){var x=d.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var w=0;w<x.length;w++){var A=x[w],O=A.getSnapshot;A=A.value;try{if(!Sn(O(),A))return!1}catch{return!1}}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function wo(l,d){for(d&=~Op,d&=~Ug,l.suspendedLanes|=d,l.pingedLanes&=~d,l=l.expirationTimes;0<d;){var x=31-Ea(d),w=1<<x;l[x]=-1,d&=~w}}function fS(l){if((Zt&6)!==0)throw Error(a(327));wc();var d=fi(l,0);if((d&1)===0)return ks(l,Y()),null;var x=Wg(l,d);if(l.tag!==0&&x===2){var w=Jo(l);w!==0&&(d=w,x=Mp(l,w))}if(x===1)throw x=su,cl(l,0),wo(l,d),ks(l,Y()),x;if(x===6)throw Error(a(345));return l.finishedWork=l.current.alternate,l.finishedLanes=d,dl(l,Ns,Ni),ks(l,Y()),null}function $p(l,d){var x=Zt;Zt|=1;try{return l(d)}finally{Zt=x,Zt===0&&(bc=Y()+500,yg&&ho())}}function ll(l){vo!==null&&vo.tag===0&&(Zt&6)===0&&wc();var d=Zt;Zt|=1;var x=an.transition,w=mr;try{if(an.transition=null,mr=1,l)return l()}finally{mr=w,an.transition=x,Zt=d,(Zt&6)===0&&ho()}}function Up(){zs=vc.current,Tr(vc)}function cl(l,d){l.finishedWork=null,l.finishedLanes=0;var x=l.timeoutHandle;if(x!==-1&&(l.timeoutHandle=-1,JL(x)),oa!==null)for(x=oa.return;x!==null;){var w=x;switch(Gx(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&xg();break;case 3:xc(),Tr(bs),Tr(Qa),op();break;case 5:np(w);break;case 4:xc();break;case 13:Tr(zr);break;case 19:Tr(zr);break;case 10:ep(w.type._context);break;case 22:case 23:Up()}x=x.return}if(Pa=l,oa=l=jo(l.current,null),Ha=zs=d,fa=0,su=null,Op=Ug=ol=0,Ns=nu=null,sl!==null){for(d=0;d<sl.length;d++)if(x=sl[d],w=x.interleaved,w!==null){x.interleaved=null;var A=w.next,O=x.pending;if(O!==null){var $=O.next;O.next=A,w.next=$}x.pending=w}sl=null}return l}function xS(l,d){do{var x=oa;try{if(Jx(),Ag.current=Og,Pg){for(var w=Br.memoizedState;w!==null;){var A=w.queue;A!==null&&(A.pending=null),w=w.next}Pg=!1}if(il=0,Aa=ha=Br=null,Zd=!1,Jd=0,Dp.current=null,x===null||x.return===null){fa=1,su=d,oa=null;break}e:{var O=l,$=x.return,te=x,ie=d;if(d=Ha,te.flags|=32768,ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var Se=ie,Le=te,_e=Le.tag;if((Le.mode&1)===0&&(_e===0||_e===11||_e===15)){var Ie=Le.alternate;Ie?(Le.updateQueue=Ie.updateQueue,Le.memoizedState=Ie.memoizedState,Le.lanes=Ie.lanes):(Le.updateQueue=null,Le.memoizedState=null)}var Ze=z1($);if(Ze!==null){Ze.flags&=-257,B1(Ze,$,te,O,d),Ze.mode&1&&F1(O,Se,d),d=Ze,ie=Se;var lt=d.updateQueue;if(lt===null){var dt=new Set;dt.add(ie),d.updateQueue=dt}else lt.add(ie);break e}else{if((d&1)===0){F1(O,Se,d),Fp();break e}ie=Error(a(426))}}else if(Rr&&te.mode&1){var ea=z1($);if(ea!==null){(ea.flags&65536)===0&&(ea.flags|=256),B1(ea,$,te,O,d),Xx(pc(ie,te));break e}}O=ie=pc(ie,te),fa!==4&&(fa=2),nu===null?nu=[O]:nu.push(O),O=$;do{switch(O.tag){case 3:O.flags|=65536,d&=-d,O.lanes|=d;var be=$1(O,ie,d);u1(O,be);break e;case 1:te=ie;var he=O.type,je=O.stateNode;if((O.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||je!==null&&typeof je.componentDidCatch=="function"&&(yo===null||!yo.has(je)))){O.flags|=65536,d&=-d,O.lanes|=d;var ze=U1(O,te,d);u1(O,ze);break e}}O=O.return}while(O!==null)}vS(x)}catch(ut){d=ut,oa===x&&x!==null&&(oa=x=x.return);continue}break}while(!0)}function pS(){var l=$g.current;return $g.current=Og,l===null?Og:l}function Fp(){(fa===0||fa===3||fa===2)&&(fa=4),Pa===null||(ol&268435455)===0&&(Ug&268435455)===0||wo(Pa,Ha)}function Wg(l,d){var x=Zt;Zt|=2;var w=pS();(Pa!==l||Ha!==d)&&(Ni=null,cl(l,d));do try{kR();break}catch(A){xS(l,A)}while(!0);if(Jx(),Zt=x,$g.current=w,oa!==null)throw Error(a(261));return Pa=null,Ha=0,fa}function kR(){for(;oa!==null;)yS(oa)}function SR(){for(;oa!==null&&!Be();)yS(oa)}function yS(l){var d=jS(l.alternate,l,zs);l.memoizedProps=l.pendingProps,d===null?vS(l):oa=d,Dp.current=null}function vS(l){var d=l;do{var x=d.alternate;if(l=d.return,(d.flags&32768)===0){if(x=pR(x,d,zs),x!==null){oa=x;return}}else{if(x=yR(x,d),x!==null){x.flags&=32767,oa=x;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{fa=6,oa=null;return}}if(d=d.sibling,d!==null){oa=d;return}oa=d=l}while(d!==null);fa===0&&(fa=5)}function dl(l,d,x){var w=mr,A=an.transition;try{an.transition=null,mr=1,CR(l,d,x,w)}finally{an.transition=A,mr=w}return null}function CR(l,d,x,w){do wc();while(vo!==null);if((Zt&6)!==0)throw Error(a(327));x=l.finishedWork;var A=l.finishedLanes;if(x===null)return null;if(l.finishedWork=null,l.finishedLanes=0,x===l.current)throw Error(a(177));l.callbackNode=null,l.callbackPriority=0;var O=x.lanes|x.childLanes;if(iL(l,O),l===Pa&&(oa=Pa=null,Ha=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||zg||(zg=!0,NS(et,function(){return wc(),null})),O=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||O){O=an.transition,an.transition=null;var $=mr;mr=1;var te=Zt;Zt|=4,Dp.current=null,bR(l,x),cS(x,l),VL(Fx),rg=!!Ux,Fx=Ux=null,l.current=x,wR(x),Kt(),Zt=te,mr=$,an.transition=O}else l.current=x;if(zg&&(zg=!1,vo=l,Bg=A),O=l.pendingLanes,O===0&&(yo=null),Ad(x.stateNode),ks(l,Y()),d!==null)for(w=l.onRecoverableError,x=0;x<d.length;x++)A=d[x],w(A.value,{componentStack:A.stack,digest:A.digest});if(Fg)throw Fg=!1,l=Lp,Lp=null,l;return(Bg&1)!==0&&l.tag!==0&&wc(),O=l.pendingLanes,(O&1)!==0?l===Rp?iu++:(iu=0,Rp=l):iu=0,ho(),null}function wc(){if(vo!==null){var l=ok(Bg),d=an.transition,x=mr;try{if(an.transition=null,mr=16>l?16:l,vo===null)var w=!1;else{if(l=vo,vo=null,Bg=0,(Zt&6)!==0)throw Error(a(331));var A=Zt;for(Zt|=4,st=l.current;st!==null;){var O=st,$=O.child;if((st.flags&16)!==0){var te=O.deletions;if(te!==null){for(var ie=0;ie<te.length;ie++){var Se=te[ie];for(st=Se;st!==null;){var Le=st;switch(Le.tag){case 0:case 11:case 15:au(8,Le,O)}var _e=Le.child;if(_e!==null)_e.return=Le,st=_e;else for(;st!==null;){Le=st;var Ie=Le.sibling,Ze=Le.return;if(sS(Le),Le===Se){st=null;break}if(Ie!==null){Ie.return=Ze,st=Ie;break}st=Ze}}}var lt=O.alternate;if(lt!==null){var dt=lt.child;if(dt!==null){lt.child=null;do{var ea=dt.sibling;dt.sibling=null,dt=ea}while(dt!==null)}}st=O}}if((O.subtreeFlags&2064)!==0&&$!==null)$.return=O,st=$;else e:for(;st!==null;){if(O=st,(O.flags&2048)!==0)switch(O.tag){case 0:case 11:case 15:au(9,O,O.return)}var be=O.sibling;if(be!==null){be.return=O.return,st=be;break e}st=O.return}}var he=l.current;for(st=he;st!==null;){$=st;var je=$.child;if(($.subtreeFlags&2064)!==0&&je!==null)je.return=$,st=je;else e:for($=he;st!==null;){if(te=st,(te.flags&2048)!==0)try{switch(te.tag){case 0:case 11:case 15:_g(9,te)}}catch(ut){Kr(te,te.return,ut)}if(te===$){st=null;break e}var ze=te.sibling;if(ze!==null){ze.return=te.return,st=ze;break e}st=te.return}}if(Zt=A,ho(),Zs&&typeof Zs.onPostCommitFiberRoot=="function")try{Zs.onPostCommitFiberRoot(Ms,l)}catch{}w=!0}return w}finally{mr=x,an.transition=d}}return!1}function bS(l,d,x){d=pc(x,d),d=$1(l,d,1),l=xo(l,d,1),d=is(),l!==null&&(Td(l,1,d),ks(l,d))}function Kr(l,d,x){if(l.tag===3)bS(l,l,x);else for(;d!==null;){if(d.tag===3){bS(d,l,x);break}else if(d.tag===1){var w=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(yo===null||!yo.has(w))){l=pc(x,l),l=U1(d,l,1),d=xo(d,l,1),l=is(),d!==null&&(Td(d,1,l),ks(d,l));break}}d=d.return}}function ER(l,d,x){var w=l.pingCache;w!==null&&w.delete(d),d=is(),l.pingedLanes|=l.suspendedLanes&x,Pa===l&&(Ha&x)===x&&(fa===4||fa===3&&(Ha&130023424)===Ha&&500>Y()-Ip?cl(l,0):Op|=x),ks(l,d)}function wS(l,d){d===0&&((l.mode&1)===0?d=1:(d=za,za<<=1,(za&130023424)===0&&(za=4194304)));var x=is();l=bi(l,d),l!==null&&(Td(l,d,x),ks(l,x))}function AR(l){var d=l.memoizedState,x=0;d!==null&&(x=d.retryLane),wS(l,x)}function PR(l,d){var x=0;switch(l.tag){case 13:var w=l.stateNode,A=l.memoizedState;A!==null&&(x=A.retryLane);break;case 19:w=l.stateNode;break;default:throw Error(a(314))}w!==null&&w.delete(d),wS(l,x)}var jS;jS=function(l,d,x){if(l!==null)if(l.memoizedProps!==d.pendingProps||bs.current)js=!0;else{if((l.lanes&x)===0&&(d.flags&128)===0)return js=!1,xR(l,d,x);js=(l.flags&131072)!==0}else js=!1,Rr&&(d.flags&1048576)!==0&&t1(d,bg,d.index);switch(d.lanes=0,d.tag){case 2:var w=d.type;Rg(l,d),l=d.pendingProps;var A=cc(d,Qa.current);fc(d,x),A=dp(null,d,w,l,A,x);var O=up();return d.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,ws(w)?(O=!0,pg(d)):O=!1,d.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,ap(d),A.updater=Ig,d.stateNode=A,A._reactInternals=d,pp(d,w,l,x),d=wp(null,d,w,!0,O,x)):(d.tag=0,Rr&&O&&Kx(d),ns(null,d,A,x),d=d.child),d;case 16:w=d.elementType;e:{switch(Rg(l,d),l=d.pendingProps,A=w._init,w=A(w._payload),d.type=w,A=d.tag=DR(w),l=En(w,l),A){case 0:d=bp(null,d,w,l,x);break e;case 1:d=G1(null,d,w,l,x);break e;case 11:d=q1(null,d,w,l,x);break e;case 14:d=H1(null,d,w,En(w.type,l),x);break e}throw Error(a(306,w,""))}return d;case 0:return w=d.type,A=d.pendingProps,A=d.elementType===w?A:En(w,A),bp(l,d,w,A,x);case 1:return w=d.type,A=d.pendingProps,A=d.elementType===w?A:En(w,A),G1(l,d,w,A,x);case 3:e:{if(Y1(d),l===null)throw Error(a(387));w=d.pendingProps,O=d.memoizedState,A=O.element,d1(l,d),Cg(d,w,null,x);var $=d.memoizedState;if(w=$.element,O.isDehydrated)if(O={element:w,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},d.updateQueue.baseState=O,d.memoizedState=O,d.flags&256){A=pc(Error(a(423)),d),d=Q1(l,d,w,x,A);break e}else if(w!==A){A=pc(Error(a(424)),d),d=Q1(l,d,w,x,A);break e}else for(Fs=uo(d.stateNode.containerInfo.firstChild),Us=d,Rr=!0,Cn=null,x=l1(d,null,w,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(mc(),w===A){d=ji(l,d,x);break e}ns(l,d,w,x)}d=d.child}return d;case 5:return g1(d),l===null&&Qx(d),w=d.type,A=d.pendingProps,O=l!==null?l.memoizedProps:null,$=A.children,zx(w,A)?$=null:O!==null&&zx(w,O)&&(d.flags|=32),K1(l,d),ns(l,d,$,x),d.child;case 6:return l===null&&Qx(d),null;case 13:return X1(l,d,x);case 4:return sp(d,d.stateNode.containerInfo),w=d.pendingProps,l===null?d.child=gc(d,null,w,x):ns(l,d,w,x),d.child;case 11:return w=d.type,A=d.pendingProps,A=d.elementType===w?A:En(w,A),q1(l,d,w,A,x);case 7:return ns(l,d,d.pendingProps,x),d.child;case 8:return ns(l,d,d.pendingProps.children,x),d.child;case 12:return ns(l,d,d.pendingProps.children,x),d.child;case 10:e:{if(w=d.type._context,A=d.pendingProps,O=d.memoizedProps,$=A.value,kr(Ng,w._currentValue),w._currentValue=$,O!==null)if(Sn(O.value,$)){if(O.children===A.children&&!bs.current){d=ji(l,d,x);break e}}else for(O=d.child,O!==null&&(O.return=d);O!==null;){var te=O.dependencies;if(te!==null){$=O.child;for(var ie=te.firstContext;ie!==null;){if(ie.context===w){if(O.tag===1){ie=wi(-1,x&-x),ie.tag=2;var Se=O.updateQueue;if(Se!==null){Se=Se.shared;var Le=Se.pending;Le===null?ie.next=ie:(ie.next=Le.next,Le.next=ie),Se.pending=ie}}O.lanes|=x,ie=O.alternate,ie!==null&&(ie.lanes|=x),tp(O.return,x,d),te.lanes|=x;break}ie=ie.next}}else if(O.tag===10)$=O.type===d.type?null:O.child;else if(O.tag===18){if($=O.return,$===null)throw Error(a(341));$.lanes|=x,te=$.alternate,te!==null&&(te.lanes|=x),tp($,x,d),$=O.sibling}else $=O.child;if($!==null)$.return=O;else for($=O;$!==null;){if($===d){$=null;break}if(O=$.sibling,O!==null){O.return=$.return,$=O;break}$=$.return}O=$}ns(l,d,A.children,x),d=d.child}return d;case 9:return A=d.type,w=d.pendingProps.children,fc(d,x),A=tn(A),w=w(A),d.flags|=1,ns(l,d,w,x),d.child;case 14:return w=d.type,A=En(w,d.pendingProps),A=En(w.type,A),H1(l,d,w,A,x);case 15:return W1(l,d,d.type,d.pendingProps,x);case 17:return w=d.type,A=d.pendingProps,A=d.elementType===w?A:En(w,A),Rg(l,d),d.tag=1,ws(w)?(l=!0,pg(d)):l=!1,fc(d,x),M1(d,w,A),pp(d,w,A,x),wp(null,d,w,!0,l,x);case 19:return J1(l,d,x);case 22:return V1(l,d,x)}throw Error(a(156,d.tag))};function NS(l,d){return ye(l,d)}function TR(l,d,x,w){this.tag=l,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(l,d,x,w){return new TR(l,d,x,w)}function zp(l){return l=l.prototype,!(!l||!l.isReactComponent)}function DR(l){if(typeof l=="function")return zp(l)?1:0;if(l!=null){if(l=l.$$typeof,l===B)return 11;if(l===J)return 14}return 2}function jo(l,d){var x=l.alternate;return x===null?(x=sn(l.tag,d,l.key,l.mode),x.elementType=l.elementType,x.type=l.type,x.stateNode=l.stateNode,x.alternate=l,l.alternate=x):(x.pendingProps=d,x.type=l.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=l.flags&14680064,x.childLanes=l.childLanes,x.lanes=l.lanes,x.child=l.child,x.memoizedProps=l.memoizedProps,x.memoizedState=l.memoizedState,x.updateQueue=l.updateQueue,d=l.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=l.sibling,x.index=l.index,x.ref=l.ref,x}function Vg(l,d,x,w,A,O){var $=2;if(w=l,typeof l=="function")zp(l)&&($=1);else if(typeof l=="string")$=5;else e:switch(l){case D:return ul(x.children,A,O,d);case I:$=8,A|=8;break;case H:return l=sn(12,x,d,A|2),l.elementType=H,l.lanes=O,l;case z:return l=sn(13,x,d,A),l.elementType=z,l.lanes=O,l;case q:return l=sn(19,x,d,A),l.elementType=q,l.lanes=O,l;case ne:return Kg(x,A,O,d);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case W:$=10;break e;case K:$=9;break e;case B:$=11;break e;case J:$=14;break e;case ae:$=16,w=null;break e}throw Error(a(130,l==null?l:typeof l,""))}return d=sn($,x,d,A),d.elementType=l,d.type=w,d.lanes=O,d}function ul(l,d,x,w){return l=sn(7,l,w,d),l.lanes=x,l}function Kg(l,d,x,w){return l=sn(22,l,w,d),l.elementType=ne,l.lanes=x,l.stateNode={isHidden:!1},l}function Bp(l,d,x){return l=sn(6,l,null,d),l.lanes=x,l}function qp(l,d,x){return d=sn(4,l.children!==null?l.children:[],l.key,d),d.lanes=x,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}function OR(l,d,x,w,A){this.tag=d,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pd(0),this.expirationTimes=Pd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pd(0),this.identifierPrefix=w,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function Hp(l,d,x,w,A,O,$,te,ie){return l=new OR(l,d,x,te,ie),d===1?(d=1,O===!0&&(d|=8)):d=0,O=sn(3,null,null,d),l.current=O,O.stateNode=l,O.memoizedState={element:w,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},ap(O),l}function IR(l,d,x){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:w==null?null:""+w,children:l,containerInfo:d,implementation:x}}function kS(l){if(!l)return go;l=l._reactInternals;e:{if(ke(l)!==l||l.tag!==1)throw Error(a(170));var d=l;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(ws(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(a(171))}if(l.tag===1){var x=l.type;if(ws(x))return Zk(l,x,d)}return d}function SS(l,d,x,w,A,O,$,te,ie){return l=Hp(x,w,!0,l,A,O,$,te,ie),l.context=kS(null),x=l.current,w=is(),A=bo(x),O=wi(w,A),O.callback=d??null,xo(x,O,A),l.current.lanes=A,Td(l,A,w),ks(l,w),l}function Gg(l,d,x,w){var A=d.current,O=is(),$=bo(A);return x=kS(x),d.context===null?d.context=x:d.pendingContext=x,d=wi(O,$),d.payload={element:l},w=w===void 0?null:w,w!==null&&(d.callback=w),l=xo(A,d,$),l!==null&&(Tn(l,A,$,O),Sg(l,A,$)),$}function Yg(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function CS(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var x=l.retryLane;l.retryLane=x!==0&&x<d?x:d}}function Wp(l,d){CS(l,d),(l=l.alternate)&&CS(l,d)}function LR(){return null}var ES=typeof reportError=="function"?reportError:function(l){console.error(l)};function Vp(l){this._internalRoot=l}Qg.prototype.render=Vp.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(a(409));Gg(l,d,null,null)},Qg.prototype.unmount=Vp.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;ll(function(){Gg(null,l,null,null)}),d[xi]=null}};function Qg(l){this._internalRoot=l}Qg.prototype.unstable_scheduleHydration=function(l){if(l){var d=dk();l={blockedOn:null,target:l,priority:d};for(var x=0;x<oo.length&&d!==0&&d<oo[x].priority;x++);oo.splice(x,0,l),x===0&&gk(l)}};function Kp(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function Xg(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function AS(){}function RR(l,d,x,w,A){if(A){if(typeof w=="function"){var O=w;w=function(){var Se=Yg($);O.call(Se)}}var $=SS(d,w,l,0,null,!1,!1,"",AS);return l._reactRootContainer=$,l[xi]=$.current,Hd(l.nodeType===8?l.parentNode:l),ll(),$}for(;A=l.lastChild;)l.removeChild(A);if(typeof w=="function"){var te=w;w=function(){var Se=Yg(ie);te.call(Se)}}var ie=Hp(l,0,!1,null,null,!1,!1,"",AS);return l._reactRootContainer=ie,l[xi]=ie.current,Hd(l.nodeType===8?l.parentNode:l),ll(function(){Gg(d,ie,x,w)}),ie}function Zg(l,d,x,w,A){var O=x._reactRootContainer;if(O){var $=O;if(typeof A=="function"){var te=A;A=function(){var ie=Yg($);te.call(ie)}}Gg(d,$,l,A)}else $=RR(x,d,l,A,w);return Yg($)}lk=function(l){switch(l.tag){case 3:var d=l.stateNode;if(d.current.memoizedState.isDehydrated){var x=Ba(d.pendingLanes);x!==0&&(px(d,x|1),ks(d,Y()),(Zt&6)===0&&(bc=Y()+500,ho()))}break;case 13:ll(function(){var w=bi(l,1);if(w!==null){var A=is();Tn(w,l,1,A)}}),Wp(l,1)}},yx=function(l){if(l.tag===13){var d=bi(l,134217728);if(d!==null){var x=is();Tn(d,l,134217728,x)}Wp(l,134217728)}},ck=function(l){if(l.tag===13){var d=bo(l),x=bi(l,d);if(x!==null){var w=is();Tn(x,l,d,w)}Wp(l,d)}},dk=function(){return mr},uk=function(l,d){var x=mr;try{return mr=l,d()}finally{mr=x}},qt=function(l,d,x){switch(d){case"input":if(Ct(l,x),d=x.name,x.type==="radio"&&d!=null){for(x=l;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<x.length;d++){var w=x[d];if(w!==l&&w.form===l.form){var A=fg(w);if(!A)throw Error(a(90));xe(w),Ct(w,A)}}}break;case"textarea":Ne(l,x);break;case"select":d=x.value,d!=null&&le(l,!!x.multiple,d,!1)}},pr=$p,cr=ll;var MR={usingClientEntryPoint:!1,Events:[Kd,oc,fg,lr,ia,$p]},ou={findFiberByHostInstance:el,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_R={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=wt(l),l===null?null:l.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||LR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jg.isDisabled&&Jg.supportsFiber)try{Ms=Jg.inject(_R),Zs=Jg}catch{}}return Ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MR,Ss.createPortal=function(l,d){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kp(d))throw Error(a(200));return IR(l,d,null,x)},Ss.createRoot=function(l,d){if(!Kp(l))throw Error(a(299));var x=!1,w="",A=ES;return d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onRecoverableError!==void 0&&(A=d.onRecoverableError)),d=Hp(l,1,!1,null,null,x,!1,w,A),l[xi]=d.current,Hd(l.nodeType===8?l.parentNode:l),new Vp(d)},Ss.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(a(188)):(l=Object.keys(l).join(","),Error(a(268,l)));return l=wt(d),l=l===null?null:l.stateNode,l},Ss.flushSync=function(l){return ll(l)},Ss.hydrate=function(l,d,x){if(!Xg(d))throw Error(a(200));return Zg(null,l,d,!0,x)},Ss.hydrateRoot=function(l,d,x){if(!Kp(l))throw Error(a(405));var w=x!=null&&x.hydratedSources||null,A=!1,O="",$=ES;if(x!=null&&(x.unstable_strictMode===!0&&(A=!0),x.identifierPrefix!==void 0&&(O=x.identifierPrefix),x.onRecoverableError!==void 0&&($=x.onRecoverableError)),d=SS(d,null,l,1,x??null,A,!1,O,$),l[xi]=d.current,Hd(l),w)for(l=0;l<w.length;l++)x=w[l],A=x._getVersion,A=A(x._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[x,A]:d.mutableSourceEagerHydrationData.push(x,A);return new Qg(d)},Ss.render=function(l,d,x){if(!Xg(d))throw Error(a(200));return Zg(null,l,d,!1,x)},Ss.unmountComponentAtNode=function(l){if(!Xg(l))throw Error(a(40));return l._reactRootContainer?(ll(function(){Zg(null,null,l,!1,function(){l._reactRootContainer=null,l[xi]=null})}),!0):!1},Ss.unstable_batchedUpdates=$p,Ss.unstable_renderSubtreeIntoContainer=function(l,d,x,w){if(!Xg(x))throw Error(a(200));if(l==null||l._reactInternals===void 0)throw Error(a(38));return Zg(l,d,x,!1,w)},Ss.version="18.3.1-next-f1338f8080-20240426",Ss}var MS;function sT(){if(MS)return Qp.exports;MS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),Qp.exports=WR(),Qp.exports}var _S;function VR(){if(_S)return eh;_S=1;var e=sT();return eh.createRoot=e.createRoot,eh.hydrateRoot=e.hydrateRoot,eh}var KR=VR();const GR=di(KR);var Do=sT();function Uu(){return Uu=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Uu.apply(this,arguments)}var Oo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Oo||(Oo={}));const $S="popstate";function YR(e){e===void 0&&(e={});function r(s,n){let{pathname:i,search:o,hash:c}=s.location;return lb("",{pathname:i,search:o,hash:c},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function a(s,n){return typeof n=="string"?n:Wh(n)}return XR(r,a,null,e)}function na(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function _w(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function QR(){return Math.random().toString(36).substr(2,8)}function US(e,r){return{usr:e.state,key:e.key,idx:r}}function lb(e,r,a,s){return a===void 0&&(a=null),Uu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof r=="string"?ad(r):r,{state:a,key:r&&r.key||s||QR()})}function Wh(e){let{pathname:r="/",search:a="",hash:s=""}=e;return a&&a!=="?"&&(r+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(r+=s.charAt(0)==="#"?s:"#"+s),r}function ad(e){let r={};if(e){let a=e.indexOf("#");a>=0&&(r.hash=e.substr(a),e=e.substr(0,a));let s=e.indexOf("?");s>=0&&(r.search=e.substr(s),e=e.substr(0,s)),e&&(r.pathname=e)}return r}function XR(e,r,a,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:i=!1}=s,o=n.history,c=Oo.Pop,u=null,m=g();m==null&&(m=0,o.replaceState(Uu({},o.state,{idx:m}),""));function g(){return(o.state||{idx:null}).idx}function f(){c=Oo.Pop;let v=g(),N=v==null?null:v-m;m=v,u&&u({action:c,location:j.location,delta:N})}function y(v,N){c=Oo.Push;let k=lb(j.location,v,N);m=g()+1;let E=US(k,m),C=j.createHref(k);try{o.pushState(E,"",C)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;n.location.assign(C)}i&&u&&u({action:c,location:j.location,delta:1})}function p(v,N){c=Oo.Replace;let k=lb(j.location,v,N);m=g();let E=US(k,m),C=j.createHref(k);o.replaceState(E,"",C),i&&u&&u({action:c,location:j.location,delta:0})}function b(v){let N=n.location.origin!=="null"?n.location.origin:n.location.href,k=typeof v=="string"?v:Wh(v);return k=k.replace(/ $/,"%20"),na(N,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,N)}let j={get action(){return c},get location(){return e(n,o)},listen(v){if(u)throw new Error("A history only accepts one active listener");return n.addEventListener($S,f),u=v,()=>{n.removeEventListener($S,f),u=null}},createHref(v){return r(n,v)},createURL:b,encodeLocation(v){let N=b(v);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:y,replace:p,go(v){return o.go(v)}};return j}var FS;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(FS||(FS={}));function ZR(e,r,a){return a===void 0&&(a="/"),JR(e,r,a)}function JR(e,r,a,s){let n=typeof r=="string"?ad(r):r,i=$w(n.pathname||"/",a);if(i==null)return null;let o=nT(e);eM(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let m=mM(i);c=cM(o[u],m)}return c}function nT(e,r,a,s){r===void 0&&(r=[]),a===void 0&&(a=[]),s===void 0&&(s="");let n=(i,o,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(na(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let m=Mo([s,u.relativePath]),g=a.concat(u);i.children&&i.children.length>0&&(na(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),nT(i.children,r,g,m)),!(i.path==null&&!i.index)&&r.push({path:m,score:oM(m,i.index),routesMeta:g})};return e.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))n(i,o);else for(let u of iT(i.path))n(i,o,u)}),r}function iT(e){let r=e.split("/");if(r.length===0)return[];let[a,...s]=r,n=a.endsWith("?"),i=a.replace(/\?$/,"");if(s.length===0)return n?[i,""]:[i];let o=iT(s.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),n&&c.push(...o),c.map(u=>e.startsWith("/")&&u===""?"/":u)}function eM(e){e.sort((r,a)=>r.score!==a.score?a.score-r.score:lM(r.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}const tM=/^:[\w-]+$/,rM=3,aM=2,sM=1,nM=10,iM=-2,zS=e=>e==="*";function oM(e,r){let a=e.split("/"),s=a.length;return a.some(zS)&&(s+=iM),r&&(s+=aM),a.filter(n=>!zS(n)).reduce((n,i)=>n+(tM.test(i)?rM:i===""?sM:nM),s)}function lM(e,r){return e.length===r.length&&e.slice(0,-1).every((s,n)=>s===r[n])?e[e.length-1]-r[r.length-1]:0}function cM(e,r,a){let{routesMeta:s}=e,n={},i="/",o=[];for(let c=0;c<s.length;++c){let u=s[c],m=c===s.length-1,g=i==="/"?r:r.slice(i.length)||"/",f=dM({path:u.relativePath,caseSensitive:u.caseSensitive,end:m},g),y=u.route;if(!f)return null;Object.assign(n,f.params),o.push({params:n,pathname:Mo([i,f.pathname]),pathnameBase:pM(Mo([i,f.pathnameBase])),route:y}),f.pathnameBase!=="/"&&(i=Mo([i,f.pathnameBase]))}return o}function dM(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,s]=uM(e.path,e.caseSensitive,e.end),n=r.match(a);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),c=n.slice(1);return{params:s.reduce((m,g,f)=>{let{paramName:y,isOptional:p}=g;if(y==="*"){let j=c[f]||"";o=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const b=c[f];return p&&!b?m[y]=void 0:m[y]=(b||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:o,pattern:e}}function uM(e,r,a){r===void 0&&(r=!1),a===void 0&&(a=!0),_w(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(s.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,r?void 0:"i"),s]}function mM(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return _w(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),e}}function $w(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let a=r.endsWith("/")?r.length-1:r.length,s=e.charAt(a);return s&&s!=="/"?null:e.slice(a)||"/"}const gM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hM=e=>gM.test(e);function fM(e,r){r===void 0&&(r="/");let{pathname:a,search:s="",hash:n=""}=typeof e=="string"?ad(e):e,i;if(a)if(hM(a))i=a;else{if(a.includes("//")){let o=a;a=a.replace(/\/\/+/g,"/"),_w(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+a))}a.startsWith("/")?i=BS(a.substring(1),"/"):i=BS(a,r)}else i=r;return{pathname:i,search:yM(s),hash:vM(n)}}function BS(e,r){let a=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?a.length>1&&a.pop():n!=="."&&a.push(n)}),a.length>1?a.join("/"):"/"}function Jp(e,r,a,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xM(e){return e.filter((r,a)=>a===0||r.route.path&&r.route.path.length>0)}function Uw(e,r){let a=xM(e);return r?a.map((s,n)=>n===a.length-1?s.pathname:s.pathnameBase):a.map(s=>s.pathnameBase)}function Fw(e,r,a,s){s===void 0&&(s=!1);let n;typeof e=="string"?n=ad(e):(n=Uu({},e),na(!n.pathname||!n.pathname.includes("?"),Jp("?","pathname","search",n)),na(!n.pathname||!n.pathname.includes("#"),Jp("#","pathname","hash",n)),na(!n.search||!n.search.includes("#"),Jp("#","search","hash",n)));let i=e===""||n.pathname==="",o=i?"/":n.pathname,c;if(o==null)c=a;else{let f=r.length-1;if(!s&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),f-=1;n.pathname=y.join("/")}c=f>=0?r[f]:"/"}let u=fM(n,c),m=o&&o!=="/"&&o.endsWith("/"),g=(i||o===".")&&a.endsWith("/");return!u.pathname.endsWith("/")&&(m||g)&&(u.pathname+="/"),u}const Mo=e=>e.join("/").replace(/\/\/+/g,"/"),pM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,vM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function bM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const oT=["post","put","patch","delete"];new Set(oT);const wM=["get",...oT];new Set(wM);function Fu(){return Fu=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Fu.apply(this,arguments)}const zw=h.createContext(null),jM=h.createContext(null),Wo=h.createContext(null),nf=h.createContext(null),Gi=h.createContext({outlet:null,matches:[],isDataRoute:!1}),lT=h.createContext(null);function NM(e,r){let{relative:a}=r===void 0?{}:r;sd()||na(!1);let{basename:s,navigator:n}=h.useContext(Wo),{hash:i,pathname:o,search:c}=dT(e,{relative:a}),u=o;return s!=="/"&&(u=o==="/"?s:Mo([s,o])),n.createHref({pathname:u,search:c,hash:i})}function sd(){return h.useContext(nf)!=null}function Bn(){return sd()||na(!1),h.useContext(nf).location}function cT(e){h.useContext(Wo).static||h.useLayoutEffect(e)}function mt(){let{isDataRoute:e}=h.useContext(Gi);return e?MM():kM()}function kM(){sd()||na(!1);let e=h.useContext(zw),{basename:r,future:a,navigator:s}=h.useContext(Wo),{matches:n}=h.useContext(Gi),{pathname:i}=Bn(),o=JSON.stringify(Uw(n,a.v7_relativeSplatPath)),c=h.useRef(!1);return cT(()=>{c.current=!0}),h.useCallback(function(m,g){if(g===void 0&&(g={}),!c.current)return;if(typeof m=="number"){s.go(m);return}let f=Fw(m,JSON.parse(o),i,g.relative==="path");e==null&&r!=="/"&&(f.pathname=f.pathname==="/"?r:Mo([r,f.pathname])),(g.replace?s.replace:s.push)(f,g.state,g)},[r,s,o,i,e])}function ui(){let{matches:e}=h.useContext(Gi),r=e[e.length-1];return r?r.params:{}}function dT(e,r){let{relative:a}=r===void 0?{}:r,{future:s}=h.useContext(Wo),{matches:n}=h.useContext(Gi),{pathname:i}=Bn(),o=JSON.stringify(Uw(n,s.v7_relativeSplatPath));return h.useMemo(()=>Fw(e,JSON.parse(o),i,a==="path"),[e,o,i,a])}function SM(e,r){return CM(e,r)}function CM(e,r,a,s){sd()||na(!1);let{navigator:n}=h.useContext(Wo),{matches:i}=h.useContext(Gi),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let m=Bn(),g;if(r){var f;let v=typeof r=="string"?ad(r):r;u==="/"||(f=v.pathname)!=null&&f.startsWith(u)||na(!1),g=v}else g=m;let y=g.pathname||"/",p=y;if(u!=="/"){let v=u.replace(/^\//,"").split("/");p="/"+y.replace(/^\//,"").split("/").slice(v.length).join("/")}let b=ZR(e,{pathname:p}),j=DM(b&&b.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:Mo([u,n.encodeLocation?n.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:Mo([u,n.encodeLocation?n.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,a,s);return r&&j?h.createElement(nf.Provider,{value:{location:Fu({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Oo.Pop}},j):j}function EM(){let e=RM(),r=bM(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},r),a?h.createElement("pre",{style:n},a):null,null)}const AM=h.createElement(EM,null);class PM extends h.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,a){return a.location!==r.location||a.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:a.error,location:a.location,revalidation:r.revalidation||a.revalidation}}componentDidCatch(r,a){console.error("React Router caught the following error during render",r,a)}render(){return this.state.error!==void 0?h.createElement(Gi.Provider,{value:this.props.routeContext},h.createElement(lT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TM(e){let{routeContext:r,match:a,children:s}=e,n=h.useContext(zw);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),h.createElement(Gi.Provider,{value:r},s)}function DM(e,r,a,s){var n;if(r===void 0&&(r=[]),a===void 0&&(a=null),s===void 0&&(s=null),e==null){var i;if(!a)return null;if(a.errors)e=a.matches;else if((i=s)!=null&&i.v7_partialHydration&&r.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let o=e,c=(n=a)==null?void 0:n.errors;if(c!=null){let g=o.findIndex(f=>f.route.id&&c?.[f.route.id]!==void 0);g>=0||na(!1),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,m=-1;if(a&&s&&s.v7_partialHydration)for(let g=0;g<o.length;g++){let f=o[g];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(m=g),f.route.id){let{loaderData:y,errors:p}=a,b=f.route.loader&&y[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||b){u=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((g,f,y)=>{let p,b=!1,j=null,v=null;a&&(p=c&&f.route.id?c[f.route.id]:void 0,j=f.route.errorElement||AM,u&&(m<0&&y===0?(_M("route-fallback"),b=!0,v=null):m===y&&(b=!0,v=f.route.hydrateFallbackElement||null)));let N=r.concat(o.slice(0,y+1)),k=()=>{let E;return p?E=j:b?E=v:f.route.Component?E=h.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=g,h.createElement(TM,{match:f,routeContext:{outlet:g,matches:N,isDataRoute:a!=null},children:E})};return a&&(f.route.ErrorBoundary||f.route.errorElement||y===0)?h.createElement(PM,{location:a.location,revalidation:a.revalidation,component:j,error:p,children:k(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):k()},null)}var uT=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(uT||{}),mT=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(mT||{});function OM(e){let r=h.useContext(zw);return r||na(!1),r}function IM(e){let r=h.useContext(jM);return r||na(!1),r}function LM(e){let r=h.useContext(Gi);return r||na(!1),r}function gT(e){let r=LM(),a=r.matches[r.matches.length-1];return a.route.id||na(!1),a.route.id}function RM(){var e;let r=h.useContext(lT),a=IM(),s=gT();return r!==void 0?r:(e=a.errors)==null?void 0:e[s]}function MM(){let{router:e}=OM(uT.UseNavigateStable),r=gT(mT.UseNavigateStable),a=h.useRef(!1);return cT(()=>{a.current=!0}),h.useCallback(function(n,i){i===void 0&&(i={}),a.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,Fu({fromRouteId:r},i)))},[e,r])}const qS={};function _M(e,r,a){qS[e]||(qS[e]=!0)}function $M(e,r){e?.v7_startTransition,e?.v7_relativeSplatPath}function Th(e){let{to:r,replace:a,state:s,relative:n}=e;sd()||na(!1);let{future:i,static:o}=h.useContext(Wo),{matches:c}=h.useContext(Gi),{pathname:u}=Bn(),m=mt(),g=Fw(r,Uw(c,i.v7_relativeSplatPath),u,n==="path"),f=JSON.stringify(g);return h.useEffect(()=>m(JSON.parse(f),{replace:a,state:s,relative:n}),[m,f,n,a,s]),null}function rt(e){na(!1)}function UM(e){let{basename:r="/",children:a=null,location:s,navigationType:n=Oo.Pop,navigator:i,static:o=!1,future:c}=e;sd()&&na(!1);let u=r.replace(/^\/*/,"/"),m=h.useMemo(()=>({basename:u,navigator:i,static:o,future:Fu({v7_relativeSplatPath:!1},c)}),[u,c,i,o]);typeof s=="string"&&(s=ad(s));let{pathname:g="/",search:f="",hash:y="",state:p=null,key:b="default"}=s,j=h.useMemo(()=>{let v=$w(g,u);return v==null?null:{location:{pathname:v,search:f,hash:y,state:p,key:b},navigationType:n}},[u,g,f,y,p,b,n]);return j==null?null:h.createElement(Wo.Provider,{value:m},h.createElement(nf.Provider,{children:a,value:j}))}function FM(e){let{children:r,location:a}=e;return SM(cb(r),a)}new Promise(()=>{});function cb(e,r){r===void 0&&(r=[]);let a=[];return h.Children.forEach(e,(s,n)=>{if(!h.isValidElement(s))return;let i=[...r,n];if(s.type===h.Fragment){a.push.apply(a,cb(s.props.children,i));return}s.type!==rt&&na(!1),!s.props.index||!s.props.children||na(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=cb(s.props.children,i)),a.push(o)}),a}function db(){return db=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},db.apply(this,arguments)}function zM(e,r){if(e==null)return{};var a={},s=Object.keys(e),n,i;for(i=0;i<s.length;i++)n=s[i],!(r.indexOf(n)>=0)&&(a[n]=e[n]);return a}function BM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function qM(e,r){return e.button===0&&(!r||r==="_self")&&!BM(e)}function ub(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((r,a)=>{let s=e[a];return r.concat(Array.isArray(s)?s.map(n=>[a,n]):[[a,s]])},[]))}function HM(e,r){let a=ub(e);return r&&r.forEach((s,n)=>{a.has(n)||r.getAll(n).forEach(i=>{a.append(n,i)})}),a}const WM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],VM="6";try{window.__reactRouterVersion=VM}catch{}const KM="startTransition",HS=aT[KM];function GM(e){let{basename:r,children:a,future:s,window:n}=e,i=h.useRef();i.current==null&&(i.current=YR({window:n,v5Compat:!0}));let o=i.current,[c,u]=h.useState({action:o.action,location:o.location}),{v7_startTransition:m}=s||{},g=h.useCallback(f=>{m&&HS?HS(()=>u(f)):u(f)},[u,m]);return h.useLayoutEffect(()=>o.listen(g),[o,g]),h.useEffect(()=>$M(s),[s]),h.createElement(UM,{basename:r,children:a,location:c.location,navigationType:c.action,navigator:o,future:s})}const YM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ri=h.forwardRef(function(r,a){let{onClick:s,relative:n,reloadDocument:i,replace:o,state:c,target:u,to:m,preventScrollReset:g,viewTransition:f}=r,y=zM(r,WM),{basename:p}=h.useContext(Wo),b,j=!1;if(typeof m=="string"&&QM.test(m)&&(b=m,YM))try{let E=new URL(window.location.href),C=m.startsWith("//")?new URL(E.protocol+m):new URL(m),S=$w(C.pathname,p);C.origin===E.origin&&S!=null?m=S+C.search+C.hash:j=!0}catch{}let v=NM(m,{relative:n}),N=XM(m,{replace:o,state:c,target:u,preventScrollReset:g,relative:n,viewTransition:f});function k(E){s&&s(E),E.defaultPrevented||N(E)}return h.createElement("a",db({},y,{href:b||v,onClick:j||i?s:k,ref:a,target:u}))});var WS;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(WS||(WS={}));var VS;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(VS||(VS={}));function XM(e,r){let{target:a,replace:s,state:n,preventScrollReset:i,relative:o,viewTransition:c}=r===void 0?{}:r,u=mt(),m=Bn(),g=dT(e,{relative:o});return h.useCallback(f=>{if(qM(f,a)){f.preventDefault();let y=s!==void 0?s:Wh(m)===Wh(g);u(e,{replace:y,state:n,preventScrollReset:i,relative:o,viewTransition:c})}},[m,u,g,s,n,a,e,i,o,c])}function um(e){let r=h.useRef(ub(e)),a=h.useRef(!1),s=Bn(),n=h.useMemo(()=>HM(s.search,a.current?null:r.current),[s.search]),i=mt(),o=h.useCallback((c,u)=>{const m=ub(typeof c=="function"?c(n):c);a.current=!0,i("?"+m,u)},[i,n]);return[n,o]}function hT(e,r){return function(){return e.apply(r,arguments)}}const{toString:ZM}=Object.prototype,{getPrototypeOf:Bw}=Object,{iterator:of,toStringTag:fT}=Symbol,lf=(e=>r=>{const a=ZM.call(r);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),qn=e=>(e=e.toLowerCase(),r=>lf(r)===e),cf=e=>r=>typeof r===e,{isArray:nd}=Array,Hc=cf("undefined");function mm(e){return e!==null&&!Hc(e)&&e.constructor!==null&&!Hc(e.constructor)&&Ps(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const xT=qn("ArrayBuffer");function JM(e){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(e):r=e&&e.buffer&&xT(e.buffer),r}const e_=cf("string"),Ps=cf("function"),pT=cf("number"),gm=e=>e!==null&&typeof e=="object",t_=e=>e===!0||e===!1,Dh=e=>{if(lf(e)!=="object")return!1;const r=Bw(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(fT in e)&&!(of in e)},r_=e=>{if(!gm(e)||mm(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},a_=qn("Date"),s_=qn("File"),n_=qn("Blob"),i_=qn("FileList"),o_=e=>gm(e)&&Ps(e.pipe),l_=e=>{let r;return e&&(typeof FormData=="function"&&e instanceof FormData||Ps(e.append)&&((r=lf(e))==="formdata"||r==="object"&&Ps(e.toString)&&e.toString()==="[object FormData]"))},c_=qn("URLSearchParams"),[d_,u_,m_,g_]=["ReadableStream","Request","Response","Headers"].map(qn),h_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hm(e,r,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let s,n;if(typeof e!="object"&&(e=[e]),nd(e))for(s=0,n=e.length;s<n;s++)r.call(null,e[s],s,e);else{if(mm(e))return;const i=a?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let c;for(s=0;s<o;s++)c=i[s],r.call(null,e[c],c,e)}}function yT(e,r){if(mm(e))return null;r=r.toLowerCase();const a=Object.keys(e);let s=a.length,n;for(;s-- >0;)if(n=a[s],r===n.toLowerCase())return n;return null}const wl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,vT=e=>!Hc(e)&&e!==wl;function mb(){const{caseless:e,skipUndefined:r}=vT(this)&&this||{},a={},s=(n,i)=>{const o=e&&yT(a,i)||i;Dh(a[o])&&Dh(n)?a[o]=mb(a[o],n):Dh(n)?a[o]=mb({},n):nd(n)?a[o]=n.slice():(!r||!Hc(n))&&(a[o]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&hm(arguments[n],s);return a}const f_=(e,r,a,{allOwnKeys:s}={})=>(hm(r,(n,i)=>{a&&Ps(n)?e[i]=hT(n,a):e[i]=n},{allOwnKeys:s}),e),x_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),p_=(e,r,a,s)=>{e.prototype=Object.create(r.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:r.prototype}),a&&Object.assign(e.prototype,a)},y_=(e,r,a,s)=>{let n,i,o;const c={};if(r=r||{},e==null)return r;do{for(n=Object.getOwnPropertyNames(e),i=n.length;i-- >0;)o=n[i],(!s||s(o,e,r))&&!c[o]&&(r[o]=e[o],c[o]=!0);e=a!==!1&&Bw(e)}while(e&&(!a||a(e,r))&&e!==Object.prototype);return r},v_=(e,r,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=r.length;const s=e.indexOf(r,a);return s!==-1&&s===a},b_=e=>{if(!e)return null;if(nd(e))return e;let r=e.length;if(!pT(r))return null;const a=new Array(r);for(;r-- >0;)a[r]=e[r];return a},w_=(e=>r=>e&&r instanceof e)(typeof Uint8Array<"u"&&Bw(Uint8Array)),j_=(e,r)=>{const s=(e&&e[of]).call(e);let n;for(;(n=s.next())&&!n.done;){const i=n.value;r.call(e,i[0],i[1])}},N_=(e,r)=>{let a;const s=[];for(;(a=e.exec(r))!==null;)s.push(a);return s},k_=qn("HTMLFormElement"),S_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,s,n){return s.toUpperCase()+n}),KS=(({hasOwnProperty:e})=>(r,a)=>e.call(r,a))(Object.prototype),C_=qn("RegExp"),bT=(e,r)=>{const a=Object.getOwnPropertyDescriptors(e),s={};hm(a,(n,i)=>{let o;(o=r(n,i,e))!==!1&&(s[i]=o||n)}),Object.defineProperties(e,s)},E_=e=>{bT(e,(r,a)=>{if(Ps(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const s=e[a];if(Ps(s)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},A_=(e,r)=>{const a={},s=n=>{n.forEach(i=>{a[i]=!0})};return nd(e)?s(e):s(String(e).split(r)),a},P_=()=>{},T_=(e,r)=>e!=null&&Number.isFinite(e=+e)?e:r;function D_(e){return!!(e&&Ps(e.append)&&e[fT]==="FormData"&&e[of])}const O_=e=>{const r=new Array(10),a=(s,n)=>{if(gm(s)){if(r.indexOf(s)>=0)return;if(mm(s))return s;if(!("toJSON"in s)){r[n]=s;const i=nd(s)?[]:{};return hm(s,(o,c)=>{const u=a(o,n+1);!Hc(u)&&(i[c]=u)}),r[n]=void 0,i}}return s};return a(e,0)},I_=qn("AsyncFunction"),L_=e=>e&&(gm(e)||Ps(e))&&Ps(e.then)&&Ps(e.catch),wT=((e,r)=>e?setImmediate:r?((a,s)=>(wl.addEventListener("message",({source:n,data:i})=>{n===wl&&i===a&&s.length&&s.shift()()},!1),n=>{s.push(n),wl.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",Ps(wl.postMessage)),R_=typeof queueMicrotask<"u"?queueMicrotask.bind(wl):typeof process<"u"&&process.nextTick||wT,M_=e=>e!=null&&Ps(e[of]),Ce={isArray:nd,isArrayBuffer:xT,isBuffer:mm,isFormData:l_,isArrayBufferView:JM,isString:e_,isNumber:pT,isBoolean:t_,isObject:gm,isPlainObject:Dh,isEmptyObject:r_,isReadableStream:d_,isRequest:u_,isResponse:m_,isHeaders:g_,isUndefined:Hc,isDate:a_,isFile:s_,isBlob:n_,isRegExp:C_,isFunction:Ps,isStream:o_,isURLSearchParams:c_,isTypedArray:w_,isFileList:i_,forEach:hm,merge:mb,extend:f_,trim:h_,stripBOM:x_,inherits:p_,toFlatObject:y_,kindOf:lf,kindOfTest:qn,endsWith:v_,toArray:b_,forEachEntry:j_,matchAll:N_,isHTMLForm:k_,hasOwnProperty:KS,hasOwnProp:KS,reduceDescriptors:bT,freezeMethods:E_,toObjectSet:A_,toCamelCase:S_,noop:P_,toFiniteNumber:T_,findKey:yT,global:wl,isContextDefined:vT,isSpecCompliantForm:D_,toJSONObject:O_,isAsyncFn:I_,isThenable:L_,setImmediate:wT,asap:R_,isIterable:M_};function It(e,r,a,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",r&&(this.code=r),a&&(this.config=a),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}Ce.inherits(It,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ce.toJSONObject(this.config),code:this.code,status:this.status}}});const jT=It.prototype,NT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{NT[e]={value:e}});Object.defineProperties(It,NT);Object.defineProperty(jT,"isAxiosError",{value:!0});It.from=(e,r,a,s,n,i)=>{const o=Object.create(jT);Ce.toFlatObject(e,o,function(g){return g!==Error.prototype},m=>m!=="isAxiosError");const c=e&&e.message?e.message:"Error",u=r==null&&e?e.code:r;return It.call(o,c,u,a,s,n),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const __=null;function gb(e){return Ce.isPlainObject(e)||Ce.isArray(e)}function kT(e){return Ce.endsWith(e,"[]")?e.slice(0,-2):e}function GS(e,r,a){return e?e.concat(r).map(function(n,i){return n=kT(n),!a&&i?"["+n+"]":n}).join(a?".":""):r}function $_(e){return Ce.isArray(e)&&!e.some(gb)}const U_=Ce.toFlatObject(Ce,{},null,function(r){return/^is[A-Z]/.test(r)});function df(e,r,a){if(!Ce.isObject(e))throw new TypeError("target must be an object");r=r||new FormData,a=Ce.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,v){return!Ce.isUndefined(v[j])});const s=a.metaTokens,n=a.visitor||g,i=a.dots,o=a.indexes,u=(a.Blob||typeof Blob<"u"&&Blob)&&Ce.isSpecCompliantForm(r);if(!Ce.isFunction(n))throw new TypeError("visitor must be a function");function m(b){if(b===null)return"";if(Ce.isDate(b))return b.toISOString();if(Ce.isBoolean(b))return b.toString();if(!u&&Ce.isBlob(b))throw new It("Blob is not supported. Use a Buffer instead.");return Ce.isArrayBuffer(b)||Ce.isTypedArray(b)?u&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function g(b,j,v){let N=b;if(b&&!v&&typeof b=="object"){if(Ce.endsWith(j,"{}"))j=s?j:j.slice(0,-2),b=JSON.stringify(b);else if(Ce.isArray(b)&&$_(b)||(Ce.isFileList(b)||Ce.endsWith(j,"[]"))&&(N=Ce.toArray(b)))return j=kT(j),N.forEach(function(E,C){!(Ce.isUndefined(E)||E===null)&&r.append(o===!0?GS([j],C,i):o===null?j:j+"[]",m(E))}),!1}return gb(b)?!0:(r.append(GS(v,j,i),m(b)),!1)}const f=[],y=Object.assign(U_,{defaultVisitor:g,convertValue:m,isVisitable:gb});function p(b,j){if(!Ce.isUndefined(b)){if(f.indexOf(b)!==-1)throw Error("Circular reference detected in "+j.join("."));f.push(b),Ce.forEach(b,function(N,k){(!(Ce.isUndefined(N)||N===null)&&n.call(r,N,Ce.isString(k)?k.trim():k,j,y))===!0&&p(N,j?j.concat(k):[k])}),f.pop()}}if(!Ce.isObject(e))throw new TypeError("data must be an object");return p(e),r}function YS(e){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return r[s]})}function qw(e,r){this._pairs=[],e&&df(e,this,r)}const ST=qw.prototype;ST.append=function(r,a){this._pairs.push([r,a])};ST.toString=function(r){const a=r?function(s){return r.call(this,s,YS)}:YS;return this._pairs.map(function(n){return a(n[0])+"="+a(n[1])},"").join("&")};function F_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function CT(e,r,a){if(!r)return e;const s=a&&a.encode||F_;Ce.isFunction(a)&&(a={serialize:a});const n=a&&a.serialize;let i;if(n?i=n(r,a):i=Ce.isURLSearchParams(r)?r.toString():new qw(r,a).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class QS{constructor(){this.handlers=[]}use(r,a,s){return this.handlers.push({fulfilled:r,rejected:a,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){Ce.forEach(this.handlers,function(s){s!==null&&r(s)})}}const ET={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},z_=typeof URLSearchParams<"u"?URLSearchParams:qw,B_=typeof FormData<"u"?FormData:null,q_=typeof Blob<"u"?Blob:null,H_={isBrowser:!0,classes:{URLSearchParams:z_,FormData:B_,Blob:q_},protocols:["http","https","file","blob","url","data"]},Hw=typeof window<"u"&&typeof document<"u",hb=typeof navigator=="object"&&navigator||void 0,W_=Hw&&(!hb||["ReactNative","NativeScript","NS"].indexOf(hb.product)<0),V_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",K_=Hw&&window.location.href||"http://localhost",G_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Hw,hasStandardBrowserEnv:W_,hasStandardBrowserWebWorkerEnv:V_,navigator:hb,origin:K_},Symbol.toStringTag,{value:"Module"})),rs={...G_,...H_};function Y_(e,r){return df(e,new rs.classes.URLSearchParams,{visitor:function(a,s,n,i){return rs.isNode&&Ce.isBuffer(a)?(this.append(s,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...r})}function Q_(e){return Ce.matchAll(/\w+|\[(\w*)]/g,e).map(r=>r[0]==="[]"?"":r[1]||r[0])}function X_(e){const r={},a=Object.keys(e);let s;const n=a.length;let i;for(s=0;s<n;s++)i=a[s],r[i]=e[i];return r}function AT(e){function r(a,s,n,i){let o=a[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=i>=a.length;return o=!o&&Ce.isArray(n)?n.length:o,u?(Ce.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!c):((!n[o]||!Ce.isObject(n[o]))&&(n[o]=[]),r(a,s,n[o],i)&&Ce.isArray(n[o])&&(n[o]=X_(n[o])),!c)}if(Ce.isFormData(e)&&Ce.isFunction(e.entries)){const a={};return Ce.forEachEntry(e,(s,n)=>{r(Q_(s),n,a,0)}),a}return null}function Z_(e,r,a){if(Ce.isString(e))try{return(r||JSON.parse)(e),Ce.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(a||JSON.stringify)(e)}const fm={transitional:ET,adapter:["xhr","http","fetch"],transformRequest:[function(r,a){const s=a.getContentType()||"",n=s.indexOf("application/json")>-1,i=Ce.isObject(r);if(i&&Ce.isHTMLForm(r)&&(r=new FormData(r)),Ce.isFormData(r))return n?JSON.stringify(AT(r)):r;if(Ce.isArrayBuffer(r)||Ce.isBuffer(r)||Ce.isStream(r)||Ce.isFile(r)||Ce.isBlob(r)||Ce.isReadableStream(r))return r;if(Ce.isArrayBufferView(r))return r.buffer;if(Ce.isURLSearchParams(r))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let c;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Y_(r,this.formSerializer).toString();if((c=Ce.isFileList(r))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return df(c?{"files[]":r}:r,u&&new u,this.formSerializer)}}return i||n?(a.setContentType("application/json",!1),Z_(r)):r}],transformResponse:[function(r){const a=this.transitional||fm.transitional,s=a&&a.forcedJSONParsing,n=this.responseType==="json";if(Ce.isResponse(r)||Ce.isReadableStream(r))return r;if(r&&Ce.isString(r)&&(s&&!this.responseType||n)){const o=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(r,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?It.from(c,It.ERR_BAD_RESPONSE,this,null,this.response):c}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rs.classes.FormData,Blob:rs.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ce.forEach(["delete","get","head","post","put","patch"],e=>{fm.headers[e]={}});const J_=Ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),e$=e=>{const r={};let a,s,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),a=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!a||r[a]&&J_[a])&&(a==="set-cookie"?r[a]?r[a].push(s):r[a]=[s]:r[a]=r[a]?r[a]+", "+s:s)}),r},XS=Symbol("internals");function cu(e){return e&&String(e).trim().toLowerCase()}function Oh(e){return e===!1||e==null?e:Ce.isArray(e)?e.map(Oh):String(e)}function t$(e){const r=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=a.exec(e);)r[s[1]]=s[2];return r}const r$=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ey(e,r,a,s,n){if(Ce.isFunction(s))return s.call(this,r,a);if(n&&(r=a),!!Ce.isString(r)){if(Ce.isString(s))return r.indexOf(s)!==-1;if(Ce.isRegExp(s))return s.test(r)}}function a$(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,a,s)=>a.toUpperCase()+s)}function s$(e,r){const a=Ce.toCamelCase(" "+r);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+a,{value:function(n,i,o){return this[s].call(this,r,n,i,o)},configurable:!0})})}let Ts=class{constructor(r){r&&this.set(r)}set(r,a,s){const n=this;function i(c,u,m){const g=cu(u);if(!g)throw new Error("header name must be a non-empty string");const f=Ce.findKey(n,g);(!f||n[f]===void 0||m===!0||m===void 0&&n[f]!==!1)&&(n[f||u]=Oh(c))}const o=(c,u)=>Ce.forEach(c,(m,g)=>i(m,g,u));if(Ce.isPlainObject(r)||r instanceof this.constructor)o(r,a);else if(Ce.isString(r)&&(r=r.trim())&&!r$(r))o(e$(r),a);else if(Ce.isObject(r)&&Ce.isIterable(r)){let c={},u,m;for(const g of r){if(!Ce.isArray(g))throw TypeError("Object iterator must return a key-value pair");c[m=g[0]]=(u=c[m])?Ce.isArray(u)?[...u,g[1]]:[u,g[1]]:g[1]}o(c,a)}else r!=null&&i(a,r,s);return this}get(r,a){if(r=cu(r),r){const s=Ce.findKey(this,r);if(s){const n=this[s];if(!a)return n;if(a===!0)return t$(n);if(Ce.isFunction(a))return a.call(this,n,s);if(Ce.isRegExp(a))return a.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,a){if(r=cu(r),r){const s=Ce.findKey(this,r);return!!(s&&this[s]!==void 0&&(!a||ey(this,this[s],s,a)))}return!1}delete(r,a){const s=this;let n=!1;function i(o){if(o=cu(o),o){const c=Ce.findKey(s,o);c&&(!a||ey(s,s[c],c,a))&&(delete s[c],n=!0)}}return Ce.isArray(r)?r.forEach(i):i(r),n}clear(r){const a=Object.keys(this);let s=a.length,n=!1;for(;s--;){const i=a[s];(!r||ey(this,this[i],i,r,!0))&&(delete this[i],n=!0)}return n}normalize(r){const a=this,s={};return Ce.forEach(this,(n,i)=>{const o=Ce.findKey(s,i);if(o){a[o]=Oh(n),delete a[i];return}const c=r?a$(i):String(i).trim();c!==i&&delete a[i],a[c]=Oh(n),s[c]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const a=Object.create(null);return Ce.forEach(this,(s,n)=>{s!=null&&s!==!1&&(a[n]=r&&Ce.isArray(s)?s.join(", "):s)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,a])=>r+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...a){const s=new this(r);return a.forEach(n=>s.set(n)),s}static accessor(r){const s=(this[XS]=this[XS]={accessors:{}}).accessors,n=this.prototype;function i(o){const c=cu(o);s[c]||(s$(n,o),s[c]=!0)}return Ce.isArray(r)?r.forEach(i):i(r),this}};Ts.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ce.reduceDescriptors(Ts.prototype,({value:e},r)=>{let a=r[0].toUpperCase()+r.slice(1);return{get:()=>e,set(s){this[a]=s}}});Ce.freezeMethods(Ts);function ty(e,r){const a=this||fm,s=r||a,n=Ts.from(s.headers);let i=s.data;return Ce.forEach(e,function(c){i=c.call(a,i,n.normalize(),r?r.status:void 0)}),n.normalize(),i}function PT(e){return!!(e&&e.__CANCEL__)}function id(e,r,a){It.call(this,e??"canceled",It.ERR_CANCELED,r,a),this.name="CanceledError"}Ce.inherits(id,It,{__CANCEL__:!0});function TT(e,r,a){const s=a.config.validateStatus;!a.status||!s||s(a.status)?e(a):r(new It("Request failed with status code "+a.status,[It.ERR_BAD_REQUEST,It.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function n$(e){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}function i$(e,r){e=e||10;const a=new Array(e),s=new Array(e);let n=0,i=0,o;return r=r!==void 0?r:1e3,function(u){const m=Date.now(),g=s[i];o||(o=m),a[n]=u,s[n]=m;let f=i,y=0;for(;f!==n;)y+=a[f++],f=f%e;if(n=(n+1)%e,n===i&&(i=(i+1)%e),m-o<r)return;const p=g&&m-g;return p?Math.round(y*1e3/p):void 0}}function o$(e,r){let a=0,s=1e3/r,n,i;const o=(m,g=Date.now())=>{a=g,n=null,i&&(clearTimeout(i),i=null),e(...m)};return[(...m)=>{const g=Date.now(),f=g-a;f>=s?o(m,g):(n=m,i||(i=setTimeout(()=>{i=null,o(n)},s-f)))},()=>n&&o(n)]}const Vh=(e,r,a=3)=>{let s=0;const n=i$(50,250);return o$(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,u=o-s,m=n(u),g=o<=c;s=o;const f={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:m||void 0,estimated:m&&c&&g?(c-o)/m:void 0,event:i,lengthComputable:c!=null,[r?"download":"upload"]:!0};e(f)},a)},ZS=(e,r)=>{const a=e!=null;return[s=>r[0]({lengthComputable:a,total:e,loaded:s}),r[1]]},JS=e=>(...r)=>Ce.asap(()=>e(...r)),l$=rs.hasStandardBrowserEnv?((e,r)=>a=>(a=new URL(a,rs.origin),e.protocol===a.protocol&&e.host===a.host&&(r||e.port===a.port)))(new URL(rs.origin),rs.navigator&&/(msie|trident)/i.test(rs.navigator.userAgent)):()=>!0,c$=rs.hasStandardBrowserEnv?{write(e,r,a,s,n,i,o){if(typeof document>"u")return;const c=[`${e}=${encodeURIComponent(r)}`];Ce.isNumber(a)&&c.push(`expires=${new Date(a).toUTCString()}`),Ce.isString(s)&&c.push(`path=${s}`),Ce.isString(n)&&c.push(`domain=${n}`),i===!0&&c.push("secure"),Ce.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(e){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function d$(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function u$(e,r){return r?e.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):e}function DT(e,r,a){let s=!d$(r);return e&&(s||a==!1)?u$(e,r):r}const e2=e=>e instanceof Ts?{...e}:e;function Ml(e,r){r=r||{};const a={};function s(m,g,f,y){return Ce.isPlainObject(m)&&Ce.isPlainObject(g)?Ce.merge.call({caseless:y},m,g):Ce.isPlainObject(g)?Ce.merge({},g):Ce.isArray(g)?g.slice():g}function n(m,g,f,y){if(Ce.isUndefined(g)){if(!Ce.isUndefined(m))return s(void 0,m,f,y)}else return s(m,g,f,y)}function i(m,g){if(!Ce.isUndefined(g))return s(void 0,g)}function o(m,g){if(Ce.isUndefined(g)){if(!Ce.isUndefined(m))return s(void 0,m)}else return s(void 0,g)}function c(m,g,f){if(f in r)return s(m,g);if(f in e)return s(void 0,m)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(m,g,f)=>n(e2(m),e2(g),f,!0)};return Ce.forEach(Object.keys({...e,...r}),function(g){const f=u[g]||n,y=f(e[g],r[g],g);Ce.isUndefined(y)&&f!==c||(a[g]=y)}),a}const OT=e=>{const r=Ml({},e);let{data:a,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:c}=r;if(r.headers=o=Ts.from(o),r.url=CT(DT(r.baseURL,r.url,r.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Ce.isFormData(a)){if(rs.hasStandardBrowserEnv||rs.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Ce.isFunction(a.getHeaders)){const u=a.getHeaders(),m=["content-type","content-length"];Object.entries(u).forEach(([g,f])=>{m.includes(g.toLowerCase())&&o.set(g,f)})}}if(rs.hasStandardBrowserEnv&&(s&&Ce.isFunction(s)&&(s=s(r)),s||s!==!1&&l$(r.url))){const u=n&&i&&c$.read(i);u&&o.set(n,u)}return r},m$=typeof XMLHttpRequest<"u",g$=m$&&function(e){return new Promise(function(a,s){const n=OT(e);let i=n.data;const o=Ts.from(n.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:m}=n,g,f,y,p,b;function j(){p&&p(),b&&b(),n.cancelToken&&n.cancelToken.unsubscribe(g),n.signal&&n.signal.removeEventListener("abort",g)}let v=new XMLHttpRequest;v.open(n.method.toUpperCase(),n.url,!0),v.timeout=n.timeout;function N(){if(!v)return;const E=Ts.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),S={data:!c||c==="text"||c==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:E,config:e,request:v};TT(function(D){a(D),j()},function(D){s(D),j()},S),v=null}"onloadend"in v?v.onloadend=N:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(N)},v.onabort=function(){v&&(s(new It("Request aborted",It.ECONNABORTED,e,v)),v=null)},v.onerror=function(C){const S=C&&C.message?C.message:"Network Error",P=new It(S,It.ERR_NETWORK,e,v);P.event=C||null,s(P),v=null},v.ontimeout=function(){let C=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const S=n.transitional||ET;n.timeoutErrorMessage&&(C=n.timeoutErrorMessage),s(new It(C,S.clarifyTimeoutError?It.ETIMEDOUT:It.ECONNABORTED,e,v)),v=null},i===void 0&&o.setContentType(null),"setRequestHeader"in v&&Ce.forEach(o.toJSON(),function(C,S){v.setRequestHeader(S,C)}),Ce.isUndefined(n.withCredentials)||(v.withCredentials=!!n.withCredentials),c&&c!=="json"&&(v.responseType=n.responseType),m&&([y,b]=Vh(m,!0),v.addEventListener("progress",y)),u&&v.upload&&([f,p]=Vh(u),v.upload.addEventListener("progress",f),v.upload.addEventListener("loadend",p)),(n.cancelToken||n.signal)&&(g=E=>{v&&(s(!E||E.type?new id(null,e,v):E),v.abort(),v=null)},n.cancelToken&&n.cancelToken.subscribe(g),n.signal&&(n.signal.aborted?g():n.signal.addEventListener("abort",g)));const k=n$(n.url);if(k&&rs.protocols.indexOf(k)===-1){s(new It("Unsupported protocol "+k+":",It.ERR_BAD_REQUEST,e));return}v.send(i||null)})},h$=(e,r)=>{const{length:a}=e=e?e.filter(Boolean):[];if(r||a){let s=new AbortController,n;const i=function(m){if(!n){n=!0,c();const g=m instanceof Error?m:this.reason;s.abort(g instanceof It?g:new id(g instanceof Error?g.message:g))}};let o=r&&setTimeout(()=>{o=null,i(new It(`timeout ${r} of ms exceeded`,It.ETIMEDOUT))},r);const c=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(i):m.removeEventListener("abort",i)}),e=null)};e.forEach(m=>m.addEventListener("abort",i));const{signal:u}=s;return u.unsubscribe=()=>Ce.asap(c),u}},f$=function*(e,r){let a=e.byteLength;if(a<r){yield e;return}let s=0,n;for(;s<a;)n=s+r,yield e.slice(s,n),s=n},x$=async function*(e,r){for await(const a of p$(e))yield*f$(a,r)},p$=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const r=e.getReader();try{for(;;){const{done:a,value:s}=await r.read();if(a)break;yield s}}finally{await r.cancel()}},t2=(e,r,a,s)=>{const n=x$(e,r);let i=0,o,c=u=>{o||(o=!0,s&&s(u))};return new ReadableStream({async pull(u){try{const{done:m,value:g}=await n.next();if(m){c(),u.close();return}let f=g.byteLength;if(a){let y=i+=f;a(y)}u.enqueue(new Uint8Array(g))}catch(m){throw c(m),m}},cancel(u){return c(u),n.return()}},{highWaterMark:2})},r2=64*1024,{isFunction:th}=Ce,y$=(({Request:e,Response:r})=>({Request:e,Response:r}))(Ce.global),{ReadableStream:a2,TextEncoder:s2}=Ce.global,n2=(e,...r)=>{try{return!!e(...r)}catch{return!1}},v$=e=>{e=Ce.merge.call({skipUndefined:!0},y$,e);const{fetch:r,Request:a,Response:s}=e,n=r?th(r):typeof fetch=="function",i=th(a),o=th(s);if(!n)return!1;const c=n&&th(a2),u=n&&(typeof s2=="function"?(b=>j=>b.encode(j))(new s2):async b=>new Uint8Array(await new a(b).arrayBuffer())),m=i&&c&&n2(()=>{let b=!1;const j=new a(rs.origin,{body:new a2,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!j}),g=o&&c&&n2(()=>Ce.isReadableStream(new s("").body)),f={stream:g&&(b=>b.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!f[b]&&(f[b]=(j,v)=>{let N=j&&j[b];if(N)return N.call(j);throw new It(`Response type '${b}' is not supported`,It.ERR_NOT_SUPPORT,v)})});const y=async b=>{if(b==null)return 0;if(Ce.isBlob(b))return b.size;if(Ce.isSpecCompliantForm(b))return(await new a(rs.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(Ce.isArrayBufferView(b)||Ce.isArrayBuffer(b))return b.byteLength;if(Ce.isURLSearchParams(b)&&(b=b+""),Ce.isString(b))return(await u(b)).byteLength},p=async(b,j)=>{const v=Ce.toFiniteNumber(b.getContentLength());return v??y(j)};return async b=>{let{url:j,method:v,data:N,signal:k,cancelToken:E,timeout:C,onDownloadProgress:S,onUploadProgress:P,responseType:D,headers:I,withCredentials:H="same-origin",fetchOptions:W}=OT(b),K=r||fetch;D=D?(D+"").toLowerCase():"text";let B=h$([k,E&&E.toAbortSignal()],C),z=null;const q=B&&B.unsubscribe&&(()=>{B.unsubscribe()});let J;try{if(P&&m&&v!=="get"&&v!=="head"&&(J=await p(I,N))!==0){let T=new a(j,{method:"POST",body:N,duplex:"half"}),_;if(Ce.isFormData(N)&&(_=T.headers.get("content-type"))&&I.setContentType(_),T.body){const[F,ee]=ZS(J,Vh(JS(P)));N=t2(T.body,r2,F,ee)}}Ce.isString(H)||(H=H?"include":"omit");const ae=i&&"credentials"in a.prototype,ne={...W,signal:B,method:v.toUpperCase(),headers:I.normalize().toJSON(),body:N,duplex:"half",credentials:ae?H:void 0};z=i&&new a(j,ne);let re=await(i?K(z,W):K(j,ne));const L=g&&(D==="stream"||D==="response");if(g&&(S||L&&q)){const T={};["status","statusText","headers"].forEach(Z=>{T[Z]=re[Z]});const _=Ce.toFiniteNumber(re.headers.get("content-length")),[F,ee]=S&&ZS(_,Vh(JS(S),!0))||[];re=new s(t2(re.body,r2,F,()=>{ee&&ee(),q&&q()}),T)}D=D||"text";let G=await f[Ce.findKey(f,D)||"text"](re,b);return!L&&q&&q(),await new Promise((T,_)=>{TT(T,_,{data:G,headers:Ts.from(re.headers),status:re.status,statusText:re.statusText,config:b,request:z})})}catch(ae){throw q&&q(),ae&&ae.name==="TypeError"&&/Load failed|fetch/i.test(ae.message)?Object.assign(new It("Network Error",It.ERR_NETWORK,b,z),{cause:ae.cause||ae}):It.from(ae,ae&&ae.code,b,z)}}},b$=new Map,IT=e=>{let r=e&&e.env||{};const{fetch:a,Request:s,Response:n}=r,i=[s,n,a];let o=i.length,c=o,u,m,g=b$;for(;c--;)u=i[c],m=g.get(u),m===void 0&&g.set(u,m=c?new Map:v$(r)),g=m;return m};IT();const Ww={http:__,xhr:g$,fetch:{get:IT}};Ce.forEach(Ww,(e,r)=>{if(e){try{Object.defineProperty(e,"name",{value:r})}catch{}Object.defineProperty(e,"adapterName",{value:r})}});const i2=e=>`- ${e}`,w$=e=>Ce.isFunction(e)||e===null||e===!1;function j$(e,r){e=Ce.isArray(e)?e:[e];const{length:a}=e;let s,n;const i={};for(let o=0;o<a;o++){s=e[o];let c;if(n=s,!w$(s)&&(n=Ww[(c=String(s)).toLowerCase()],n===void 0))throw new It(`Unknown adapter '${c}'`);if(n&&(Ce.isFunction(n)||(n=n.get(r))))break;i[c||"#"+o]=n}if(!n){const o=Object.entries(i).map(([u,m])=>`adapter ${u} `+(m===!1?"is not supported by the environment":"is not available in the build"));let c=a?o.length>1?`since :
`+o.map(i2).join(`
`):" "+i2(o[0]):"as no adapter specified";throw new It("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n}const LT={getAdapter:j$,adapters:Ww};function ry(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new id(null,e)}function o2(e){return ry(e),e.headers=Ts.from(e.headers),e.data=ty.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),LT.getAdapter(e.adapter||fm.adapter,e)(e).then(function(s){return ry(e),s.data=ty.call(e,e.transformResponse,s),s.headers=Ts.from(s.headers),s},function(s){return PT(s)||(ry(e),s&&s.response&&(s.response.data=ty.call(e,e.transformResponse,s.response),s.response.headers=Ts.from(s.response.headers))),Promise.reject(s)})}const RT="1.13.2",uf={};["object","boolean","number","function","string","symbol"].forEach((e,r)=>{uf[e]=function(s){return typeof s===e||"a"+(r<1?"n ":" ")+e}});const l2={};uf.transitional=function(r,a,s){function n(i,o){return"[Axios v"+RT+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,c)=>{if(r===!1)throw new It(n(o," has been removed"+(a?" in "+a:"")),It.ERR_DEPRECATED);return a&&!l2[o]&&(l2[o]=!0,console.warn(n(o," has been deprecated since v"+a+" and will be removed in the near future"))),r?r(i,o,c):!0}};uf.spelling=function(r){return(a,s)=>(console.warn(`${s} is likely a misspelling of ${r}`),!0)};function N$(e,r,a){if(typeof e!="object")throw new It("options must be an object",It.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const i=s[n],o=r[i];if(o){const c=e[i],u=c===void 0||o(c,i,e);if(u!==!0)throw new It("option "+i+" must be "+u,It.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new It("Unknown option "+i,It.ERR_BAD_OPTION)}}const Ih={assertOptions:N$,validators:uf},Yn=Ih.validators;let Cl=class{constructor(r){this.defaults=r||{},this.interceptors={request:new QS,response:new QS}}async request(r,a){try{return await this._request(r,a)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(r,a){typeof r=="string"?(a=a||{},a.url=r):a=r||{},a=Ml(this.defaults,a);const{transitional:s,paramsSerializer:n,headers:i}=a;s!==void 0&&Ih.assertOptions(s,{silentJSONParsing:Yn.transitional(Yn.boolean),forcedJSONParsing:Yn.transitional(Yn.boolean),clarifyTimeoutError:Yn.transitional(Yn.boolean)},!1),n!=null&&(Ce.isFunction(n)?a.paramsSerializer={serialize:n}:Ih.assertOptions(n,{encode:Yn.function,serialize:Yn.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Ih.assertOptions(a,{baseUrl:Yn.spelling("baseURL"),withXsrfToken:Yn.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let o=i&&Ce.merge(i.common,i[a.method]);i&&Ce.forEach(["delete","get","head","post","put","patch","common"],b=>{delete i[b]}),a.headers=Ts.concat(o,i);const c=[];let u=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(a)===!1||(u=u&&j.synchronous,c.unshift(j.fulfilled,j.rejected))});const m=[];this.interceptors.response.forEach(function(j){m.push(j.fulfilled,j.rejected)});let g,f=0,y;if(!u){const b=[o2.bind(this),void 0];for(b.unshift(...c),b.push(...m),y=b.length,g=Promise.resolve(a);f<y;)g=g.then(b[f++],b[f++]);return g}y=c.length;let p=a;for(;f<y;){const b=c[f++],j=c[f++];try{p=b(p)}catch(v){j.call(this,v);break}}try{g=o2.call(this,p)}catch(b){return Promise.reject(b)}for(f=0,y=m.length;f<y;)g=g.then(m[f++],m[f++]);return g}getUri(r){r=Ml(this.defaults,r);const a=DT(r.baseURL,r.url,r.allowAbsoluteUrls);return CT(a,r.params,r.paramsSerializer)}};Ce.forEach(["delete","get","head","options"],function(r){Cl.prototype[r]=function(a,s){return this.request(Ml(s||{},{method:r,url:a,data:(s||{}).data}))}});Ce.forEach(["post","put","patch"],function(r){function a(s){return function(i,o,c){return this.request(Ml(c||{},{method:r,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Cl.prototype[r]=a(),Cl.prototype[r+"Form"]=a(!0)});let k$=class MT{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const s=this;this.promise.then(n=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](n);s._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(c=>{s.subscribe(c),i=c}).then(n);return o.cancel=function(){s.unsubscribe(i)},o},r(function(i,o,c){s.reason||(s.reason=new id(i,o,c),a(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const a=this._listeners.indexOf(r);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const r=new AbortController,a=s=>{r.abort(s)};return this.subscribe(a),r.signal.unsubscribe=()=>this.unsubscribe(a),r.signal}static source(){let r;return{token:new MT(function(n){r=n}),cancel:r}}};function S$(e){return function(a){return e.apply(null,a)}}function C$(e){return Ce.isObject(e)&&e.isAxiosError===!0}const fb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(fb).forEach(([e,r])=>{fb[r]=e});function _T(e){const r=new Cl(e),a=hT(Cl.prototype.request,r);return Ce.extend(a,Cl.prototype,r,{allOwnKeys:!0}),Ce.extend(a,r,null,{allOwnKeys:!0}),a.create=function(n){return _T(Ml(e,n))},a}const Pt=_T(fm);Pt.Axios=Cl;Pt.CanceledError=id;Pt.CancelToken=k$;Pt.isCancel=PT;Pt.VERSION=RT;Pt.toFormData=df;Pt.AxiosError=It;Pt.Cancel=Pt.CanceledError;Pt.all=function(r){return Promise.all(r)};Pt.spread=S$;Pt.isAxiosError=C$;Pt.mergeConfig=Ml;Pt.AxiosHeaders=Ts;Pt.formToJSON=e=>AT(Ce.isHTMLForm(e)?new FormData(e):e);Pt.getAdapter=LT.getAdapter;Pt.HttpStatusCode=fb;Pt.default=Pt;const{Axios:Jde,AxiosError:eue,CanceledError:tue,isCancel:rue,CancelToken:aue,VERSION:sue,all:nue,Cancel:iue,isAxiosError:oue,spread:lue,toFormData:cue,AxiosHeaders:due,HttpStatusCode:uue,formToJSON:mue,getAdapter:gue,mergeConfig:hue}=Pt,rh={NAME:"WeConnect CRM"},os={AUTH:{LOGIN:"/api/auth/login",LOGOUT:"/api/auth/logout",REFRESH:"/api/auth/refresh-token",PROFILE:"/api/auth/profile"},USERS:{BASE:"/api/users",STATS:"/api/users/stats",SEARCH:"/api/users/search"},ROLES:{BASE:"/api/roles",SEARCH:"/api/roles/search"},LEADS:{BASE:"/leads",STATS:"/leads/stats",SEARCH:"/leads/search"},DEALS:{BASE:"/deals",STATS:"/deals/stats",SEARCH:"/deals/search"},PERMISSIONS:{BASE:"/api/permissions"},ACTIVITIES:{BASE:"/api/activities",RECENT:"/api/activities/recent",STATS:"/api/activities/stats"},HEALTH:"/api/health"},Qe={USER:{CREATE:"user.create",READ:"user.read",UPDATE:"user.update",DELETE:"user.delete"},TRASH:{READ:"deleted.read"},ROLE:{CREATE:"role.create",READ:"role.read",UPDATE:"role.update",DELETE:"role.delete"},LEAD:{CREATE:"lead.create",READ:"lead.read",UPDATE:"lead.update",DELETE:"lead.delete"},PERMISSION:{CREATE:"permission.create",READ:"permission.read",UPDATE:"permission.update",DELETE:"permission.delete"},ACTIVITY:{READ:"activity.read"},DASHBOARD:{READ:"dashboard.read"},BUSINESS_SETTINGS:{READ:"business_settings.read",UPDATE:"business_settings.update"},DEAL:{CREATE:"deal.create",READ:"deal.read",UPDATE:"deal.update",DELETE:"deal.delete"},QUOTATION:{CREATE:"quotation.create",READ:"quotation.read",UPDATE:"quotation.update",DELETE:"quotation.delete"},INVOICE:{CREATE:"invoice.create",READ:"invoice.read",UPDATE:"invoice.update",DELETE:"invoice.delete"},EXPENSE:{CREATE:"expense.create",READ:"expense.read",UPDATE:"expense.update",DELETE:"expense.delete",APPROVE:"expense.approve"},AUTOMATION:{CREATE:"automation.create",READ:"automation.read",UPDATE:"automation.update",DELETE:"automation.delete"},DASHBOARD_WIDGETS:{STATS_USERS:"dashboard.stats_users",STATS_ROLES:"dashboard.stats_roles",STATS_LEADS:"dashboard.stats_leads",SYSTEM_STATUS:"dashboard.system_status",SYSTEM_ACTIVITY:"dashboard.system_activity",ACTIVITY_CALENDAR:"dashboard.activity_calendar",PERFORMANCE:"dashboard.performance",REVENUE_METRICS:"dashboard.revenue_metrics",ACTIVITY_ENGAGEMENT:"dashboard.activity_engagement"}},At={AUTH_TOKEN:"authToken",REFRESH_TOKEN:"refreshToken",USER_DATA:"userData",THEME:"theme",LANGUAGE:"language",REMEMBER_ME:"rememberMe",REMEMBERED_EMAIL:"rememberedEmail",DASHBOARD_TODOS:"dashboardActivityTodos"},nn={POSITION:"top-right",AUTO_CLOSE:5e3,HIDE_PROGRESS_BAR:!1,CLOSE_ON_CLICK:!0,PAUSE_ON_HOVER:!0,DRAGGABLE:!0},ah={DEFAULT:"default",ELEVATED:"elevated",OUTLINED:"outlined",GRADIENT:"gradient"},Ci={CATEGORIES:{COMPANY:"company",CURRENCY_TAX:"currency_tax",LEAD_SOURCES:"lead_sources",LEAD_STATUSES:"lead_statuses",TEMPLATES:"templates",NOTIFICATIONS:"notifications",INTEGRATIONS:"integrations"},CURRENCIES:{USD:"USD"},TAX_TYPES:{GST:"GST"}},ml={company:{name:"Your Company",email:"contact@company.com",phone:"",address:"",website:"",gstNumber:"",timezone:"UTC"},currency:{primary:Ci.CURRENCIES.USD,symbol:"$",decimalPlaces:2},tax:{defaultRate:18,type:Ci.TAX_TYPES.GST,inclusive:!1},leadSources:["Website","Social Media","Email Campaign","Referral","Cold Call","Trade Show"],leadStatuses:[{name:"Lead",probability:10,color:"#6B7280"},{name:"Qualified",probability:25,color:"#3B82F6"},{name:"Proposal",probability:50,color:"#F59E0B"},{name:"Negotiation",probability:75,color:"#8B5CF6"},{name:"Closed Won",probability:100,color:"#10B981"},{name:"Closed Lost",probability:0,color:"#EF4444"}]},Vo="http://147.93.27.62:3010/api",ki=`${Vo}/auth`;class E${constructor(){}getAuthHeaders(){return{"Content-Type":"application/json"}}getAuthHeadersWithToken(){const r=localStorage.getItem(At.AUTH_TOKEN);return{...this.getAuthHeaders(),Authorization:r?`Bearer ${r}`:""}}async login(r){try{const a=await Pt.post(`${ki}/login`,r,{headers:this.getAuthHeaders()});if(a.data.success){const{accessToken:s,refreshToken:n,user:i,tokenExpiry:o}=a.data.data;localStorage.setItem(At.AUTH_TOKEN,s),localStorage.setItem(At.REFRESH_TOKEN,n),localStorage.setItem(At.USER_DATA,JSON.stringify(i)),localStorage.setItem("tokenExpiry",o),localStorage.setItem("userId",i.id.toString()),Pt.defaults.headers.common.Authorization=`Bearer ${s}`}return a.data}catch(a){throw console.error("Login error:",a),this.handleAuthError(a)}}async register(r){try{return(await Pt.post(`${ki}/register`,r,{headers:this.getAuthHeaders()})).data}catch(a){throw console.error("Registration error:",a),this.handleAuthError(a)}}async forgotPassword(r){try{return(await Pt.post(`${ki}/forgot-password`,r,{headers:this.getAuthHeaders()})).data}catch(a){throw console.error("Forgot password error:",a),this.handleAuthError(a)}}async resetPassword(r){try{return(await Pt.post(`${ki}/reset-password`,r,{headers:this.getAuthHeaders()})).data}catch(a){throw console.error("Reset password error:",a),this.handleAuthError(a)}}async refreshToken(){try{const r=localStorage.getItem(At.REFRESH_TOKEN);if(!r)throw new Error("No refresh token available");const a=await Pt.post(`${ki}/refresh-token`,{refreshToken:r},{headers:this.getAuthHeaders()});if(a.data.success){const{accessToken:s,tokenExpiry:n}=a.data.data;localStorage.setItem(At.AUTH_TOKEN,s),localStorage.setItem("tokenExpiry",n),Pt.defaults.headers.common.Authorization=`Bearer ${s}`}return a.data}catch(r){throw console.error("Token refresh error:",r),this.clearTokens(),this.handleAuthError(r)}}async logout(){try{await Pt.post(`${ki}/logout`,{},{headers:this.getAuthHeadersWithToken()})}catch(r){console.error("Logout error:",r)}finally{this.clearTokens(),delete Pt.defaults.headers.common.Authorization}return{success:!0,message:"Logged out successfully"}}async getProfile(){try{return(await Pt.get(`${ki}/profile`,{headers:this.getAuthHeadersWithToken()})).data}catch(r){throw console.error("Get profile error:",r),this.handleAuthError(r)}}async verifyEmail(r){try{return(await Pt.get(`${ki}/verify-email/${r}`,{headers:this.getAuthHeaders()})).data}catch(a){throw console.error("Email verification error:",a),this.handleAuthError(a)}}async getPermissionsForRole(r){try{return(await Pt.get(`${ki}/roles/${r}/permissions`,{headers:this.getAuthHeadersWithToken()})).data.data.permissions}catch(a){throw console.error("Get permissions error:",a),this.handleAuthError(a)}}validatePassword(r,a){const s=a||{minLength:8,requireUppercase:!0,requireLowercase:!0,requireNumbers:!0,requireSymbols:!0},n=[];return r.length<s.minLength&&n.push(`Password must be at least ${s.minLength} characters long`),s.requireUppercase&&!/[A-Z]/.test(r)&&n.push("Password must contain at least one uppercase letter"),s.requireLowercase&&!/[a-z]/.test(r)&&n.push("Password must contain at least one lowercase letter"),s.requireNumbers&&!/\d/.test(r)&&n.push("Password must contain at least one number"),s.requireSymbols&&!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(r)&&n.push("Password must contain at least one special character"),{isValid:n.length===0,errors:n}}calculatePasswordStrength(r){let a=0;const s={length:r.length>=8,lowercase:/[a-z]/.test(r),uppercase:/[A-Z]/.test(r),numbers:/\d/.test(r),symbols:/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(r),longPassword:r.length>=12};return Object.values(s).forEach(n=>{n&&(a+=1)}),a<=2?{score:a,message:"Weak",color:"red"}:a<=4?{score:a,message:"Fair",color:"orange"}:a<=5?{score:a,message:"Good",color:"yellow"}:{score:a,message:"Strong",color:"green"}}isTokenExpired(){const r=localStorage.getItem("tokenExpiry");return r?new Date(r)<=new Date:!0}async ensureValidToken(){if(!localStorage.getItem(At.AUTH_TOKEN))return!1;if(this.isTokenExpired())try{return await this.refreshToken(),!0}catch{return!1}return!0}clearTokens(){localStorage.removeItem(At.AUTH_TOKEN),localStorage.removeItem(At.REFRESH_TOKEN),localStorage.removeItem(At.USER_DATA),localStorage.removeItem("tokenExpiry"),localStorage.removeItem("userId")}getCurrentUser(){const r=localStorage.getItem(At.USER_DATA);if(!r)return null;try{return JSON.parse(r)}catch(a){return console.error("Error parsing user data:",a),null}}isAuthenticated(){const r=localStorage.getItem(At.AUTH_TOKEN),a=this.getCurrentUser();return!!(r&&a&&!this.isTokenExpired())}handleAuthError(r){const a=r.response?.data?.message||"Authentication error occurred",s=r.response?.status;return s===403?new Error(a):s===423?new Error("Account is temporarily locked. Please try again later."):s===429?new Error("Too many attempts. Please wait before trying again."):s===401&&r.response?.data?.requiresEmailVerification?new Error("Please verify your email address before logging in."):new Error(a)}async autoLogin(){try{return!localStorage.getItem(At.AUTH_TOKEN)||this.isTokenExpired()&&!await this.ensureValidToken()?!1:(Pt.defaults.headers.common.Authorization=`Bearer ${localStorage.getItem(At.AUTH_TOKEN)}`,await this.getProfile(),!0)}catch(r){return console.error("Auto-login failed:",r),this.clearTokens(),!1}}}const Bs=new E$,A$={user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,isBootstrapping:!0,error:null,passwordRequirements:null},P$=(e,r)=>{switch(r.type){case"LOGIN_START":case"REGISTER_START":return{...e,isLoading:!0,error:null};case"LOGIN_SUCCESS":return{...e,user:r.payload.user,accessToken:r.payload.accessToken,refreshToken:r.payload.refreshToken,isAuthenticated:!0,isLoading:!1,error:null};case"REGISTER_SUCCESS":return{...e,isLoading:!1,error:null};case"TOKEN_EXPIRED":return{...e,user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,isBootstrapping:!1,error:"Session expired. Please login again."};case"TOKEN_REFRESHED":return{...e,accessToken:r.payload};case"LOGIN_FAILURE":case"REGISTER_FAILURE":return{...e,user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:r.payload};case"LOGOUT":return{...e,user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null};case"SET_LOADING":return{...e,isLoading:r.payload};case"CHECK_AUTH_SUCCESS":return{...e,user:r.payload,isAuthenticated:!0,isLoading:!1,isBootstrapping:!1,error:null};case"CHECK_AUTH_FAILURE":return{...e,user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,isBootstrapping:!1,error:null};case"UPDATE_USER":return{...e,user:r.payload};case"SET_ERROR":return{...e,error:r.payload,isLoading:!1};case"CLEAR_ERROR":return{...e,error:null};case"SET_PASSWORD_REQUIREMENTS":return{...e,passwordRequirements:r.payload};default:return e}},$T=h.createContext(void 0),xr=()=>{const e=h.useContext($T);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},T$=({children:e})=>{const[r,a]=h.useReducer(P$,A$);h.useEffect(()=>{(async()=>{a({type:"SET_LOADING",payload:!0});try{if(await Bs.autoLogin()){const C=await Bs.getProfile();a({type:"CHECK_AUTH_SUCCESS",payload:C.data.user})}else a({type:"CHECK_AUTH_FAILURE"})}catch(E){console.error("Auto-login failed:",E),a({type:"CHECK_AUTH_FAILURE"})}})()},[]),h.useEffect(()=>{const k=E=>{const S=E?.detail?.message||"Your account has been deactivated.";try{const{toast:P}=require("react-toastify");P.info(S,{toastId:"account_deactivated"})}catch(P){console.error("Failed to show deactivation toast",P)}a({type:"LOGOUT"})};return window.addEventListener("accountDeactivated",k),()=>{window.removeEventListener("accountDeactivated",k)}},[]),h.useEffect(()=>{const k=E=>{const C=E,{userIds:S,roleName:P}=C?.detail||{},D=r.user?.id;if(S&&D&&S.includes(D)){try{const{toast:I}=require("react-toastify");I.error(`Your role "${P}" has been deactivated. You are being logged out for security.`,{toastId:"role_deactivated",autoClose:5e3})}catch(I){console.error("Failed to show role deactivation toast",I)}a({type:"LOGOUT"})}};return window.addEventListener("roleDeactivated",k),()=>{window.removeEventListener("roleDeactivated",k)}},[r.user?.id]);const s=async k=>{try{a({type:"LOGIN_START"});const E=await Bs.login(k);if(!E.success){const C=E.message||"Invalid credentials";throw a({type:"LOGIN_FAILURE",payload:C}),new Error(C)}if(E.data){const{accessToken:C,refreshToken:S,tokenExpiry:P,user:D}=E.data;localStorage.setItem("token",C),localStorage.setItem("refreshToken",S),localStorage.setItem("tokenExpiry",P),localStorage.setItem("userId",D.id.toString()),a({type:"LOGIN_SUCCESS",payload:{user:D,accessToken:C,refreshToken:S,tokenExpiry:P}})}return E}catch(E){const C=E.message||E.response?.data?.message||"Login failed";throw console.error("Login error:",E),a({type:"LOGIN_FAILURE",payload:C}),E}},n=async k=>{try{a({type:"REGISTER_START"});const E=await Bs.register(k);return a({type:"REGISTER_SUCCESS"}),E}catch(E){const C=E.message||"Registration failed";throw a({type:"REGISTER_FAILURE",payload:C}),E}},i=async()=>{try{await Bs.logout()}catch(k){console.error("Logout error:",k)}finally{a({type:"LOGOUT"})}},o=async k=>{try{return await Bs.forgotPassword(k)}catch(E){throw E}},c=async k=>{try{return await Bs.resetPassword(k)}catch(E){throw E}},u=async k=>{try{return await Bs.verifyEmail(k)}catch(E){throw E}},m=async()=>{try{const k=await Bs.getProfile();a({type:"CHECK_AUTH_SUCCESS",payload:k.data.user})}catch{a({type:"CHECK_AUTH_FAILURE"})}},g=k=>{a({type:"UPDATE_USER",payload:k})},f=k=>!r.user||!r.user.roles?!1:r.user.roles.some(C=>{const S=(C.name||"").toLowerCase();return S==="admin"||S==="super_admin"||S==="super admin"})?!0:r.user.roles.some(C=>C.permissions.some(S=>S.key===k)),y=k=>!r.user||!r.user.roles?!1:r.user.roles.some(E=>E.name===k),p=k=>Bs.validatePassword(k,r.passwordRequirements||void 0),b=k=>Bs.calculatePasswordStrength(k),j=async()=>Bs.autoLogin(),v=()=>{a({type:"CLEAR_ERROR"})};h.useEffect(()=>{if(!r.isAuthenticated||!r.accessToken)return;const k=localStorage.getItem("tokenExpiry");if(!k)return;const E=new Date(k),C=new Date,S=E.getTime()-C.getTime(),P=S-300*1e3,D=S-120*1e3,I=[];if(P>0){const H=window.setTimeout(async()=>{try{const W=await Bs.refreshToken();a({type:"TOKEN_REFRESHED",payload:W.data.accessToken})}catch(W){console.error("Token refresh failed:",W),a({type:"TOKEN_EXPIRED"})}},P);I.push(H)}if(D>0){const H=window.setTimeout(()=>{window.dispatchEvent(new CustomEvent("tokenExpired",{detail:{title:"Session expiring soon",message:"Your session will expire in about 2 minutes. Please save your work."}}))},D);I.push(H)}else S>0&&S<=120*1e3?window.dispatchEvent(new CustomEvent("tokenExpired",{detail:{title:"Session expiring soon",message:"Your session will expire in about 2 minutes. Please save your work."}})):S<=0&&a({type:"TOKEN_EXPIRED"});return()=>{I.forEach(H=>window.clearTimeout(H))}},[r.accessToken,r.isAuthenticated]);const N={...r,login:s,register:n,logout:i,forgotPassword:o,resetPassword:c,verifyEmail:u,checkAuth:m,updateUser:g,hasPermission:f,hasRole:y,validatePassword:p,calculatePasswordStrength:b,autoLogin:j,clearError:v};return t.jsx($T.Provider,{value:N,children:e})},UT=h.createContext(void 0),FT=()=>{const e=h.useContext(UT);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},D$=({children:e})=>{const[r,a]=h.useState(()=>{const n=localStorage.getItem("theme");return n?n==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});h.useEffect(()=>{const n=window.document.documentElement;r?(n.classList.add("dark"),localStorage.setItem("theme","dark")):(n.classList.remove("dark"),localStorage.setItem("theme","light"))},[r]);const s=()=>{const n=window.document.documentElement;n.classList.add("disable-transitions"),a(!r),window.setTimeout(()=>{n.classList.remove("disable-transitions")},100)};return t.jsx(UT.Provider,{value:{isDark:r,toggleTheme:s},children:e})},O$=(e,r,a,s)=>{const n=[a,{code:r,...s||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(n,"warn","react-i18next::",!0);El(n[0])&&(n[0]=`react-i18next:: ${n[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...n):console?.warn&&console.warn(...n)},c2={},xb=(e,r,a,s)=>{El(a)&&c2[a]||(El(a)&&(c2[a]=new Date),O$(e,r,a,s))},zT=(e,r)=>()=>{if(e.isInitialized)r();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),r()};e.on("initialized",a)}},pb=(e,r,a)=>{e.loadNamespaces(r,zT(e,a))},d2=(e,r,a,s)=>{if(El(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(r)>-1)return pb(e,a,s);a.forEach(n=>{e.options.ns.indexOf(n)<0&&e.options.ns.push(n)}),e.loadLanguages(r,zT(e,s))},I$=(e,r,a={})=>!r.languages||!r.languages.length?(xb(r,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:r.languages}),!0):r.hasLoadedNamespace(e,{lng:a.lng,precheck:(s,n)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!n(s.isLanguageChangingTo,e))return!1}}),El=e=>typeof e=="string",L$=e=>typeof e=="object"&&e!==null,R$=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,M$={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},_$=e=>M$[e],$$=e=>e.replace(R$,_$);let yb={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:$$};const U$=(e={})=>{yb={...yb,...e}},F$=()=>yb;let BT;const z$=e=>{BT=e},B$=()=>BT,q$={type:"3rdParty",init(e){U$(e.options.react),z$(e)}},H$=h.createContext();class W${constructor(){this.usedNamespaces={}}addUsedNamespaces(r){r.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const V$=(e,r)=>{const a=h.useRef();return h.useEffect(()=>{a.current=e},[e,r]),a.current},qT=(e,r,a,s)=>e.getFixedT(r,a,s),K$=(e,r,a,s)=>h.useCallback(qT(e,r,a,s),[e,r,a,s]),wn=(e,r={})=>{const{i18n:a}=r,{i18n:s,defaultNS:n}=h.useContext(H$)||{},i=a||s||B$();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new W$),!i){xb(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const C=(P,D)=>El(D)?D:L$(D)&&El(D.defaultValue)?D.defaultValue:Array.isArray(P)?P[P.length-1]:P,S=[C,{},!1];return S.t=C,S.i18n={},S.ready=!1,S}i.options.react?.wait&&xb(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...F$(),...i.options.react,...r},{useSuspense:c,keyPrefix:u}=o;let m=n||i.options?.defaultNS;m=El(m)?[m]:m||["translation"],i.reportNamespaces.addUsedNamespaces?.(m);const g=(i.isInitialized||i.initializedStoreOnce)&&m.every(C=>I$(C,i,o)),f=K$(i,r.lng||null,o.nsMode==="fallback"?m:m[0],u),y=()=>f,p=()=>qT(i,r.lng||null,o.nsMode==="fallback"?m:m[0],u),[b,j]=h.useState(y);let v=m.join();r.lng&&(v=`${r.lng}${v}`);const N=V$(v),k=h.useRef(!0);h.useEffect(()=>{const{bindI18n:C,bindI18nStore:S}=o;k.current=!0,!g&&!c&&(r.lng?d2(i,r.lng,m,()=>{k.current&&j(p)}):pb(i,m,()=>{k.current&&j(p)})),g&&N&&N!==v&&k.current&&j(p);const P=()=>{k.current&&j(p)};return C&&i?.on(C,P),S&&i?.store.on(S,P),()=>{k.current=!1,i&&C&&C?.split(" ").forEach(D=>i.off(D,P)),S&&i&&S.split(" ").forEach(D=>i.store.off(D,P))}},[i,v]),h.useEffect(()=>{k.current&&g&&j(y)},[i,u,g]);const E=[b,i,g];if(E.t=b,E.i18n=i,E.ready=g,g||!g&&!c)return E;throw new Promise(C=>{r.lng?d2(i,r.lng,m,()=>C()):pb(i,m,()=>C())})},HT=h.createContext(void 0),G$=()=>{const e=h.useContext(HT);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e},Y$=({children:e})=>{const{i18n:r}=wn(),[a,s]=h.useState(r.language||"en"),n=[{code:"en",name:"English",nativeName:"English"},{code:"hi",name:"Hindi",nativeName:""},{code:"es",name:"Spanish",nativeName:"Espaol"},{code:"fr",name:"French",nativeName:"Franais"},{code:"de",name:"German",nativeName:"Deutsch"},{code:"ar",name:"Arabic",nativeName:""},{code:"zh",name:"Chinese",nativeName:""},{code:"ja",name:"Japanese",nativeName:""},{code:"ko",name:"Korean",nativeName:""},{code:"pt",name:"Portuguese",nativeName:"Portugus"}],i=c=>{r.changeLanguage(c),s(c),localStorage.setItem("i18nextLng",c)};h.useEffect(()=>{const c=localStorage.getItem("i18nextLng");c&&n.some(u=>u.code===c)&&i(c)},[]),h.useEffect(()=>{s(r.language)},[r.language]),h.useEffect(()=>{const u=["ar","he","fa","ur"].includes(a);typeof document<"u"&&(document.documentElement.setAttribute("dir",u?"rtl":"ltr"),document.documentElement.setAttribute("lang",a))},[a]);const o={currentLanguage:a,changeLanguage:i,availableLanguages:n};return t.jsx(HT.Provider,{value:o,children:e})};var WT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},u2=Fe.createContext&&Fe.createContext(WT),Q$=["attr","size","title"];function X$(e,r){if(e==null)return{};var a=Z$(e,r),s,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Z$(e,r){if(e==null)return{};var a={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(r.indexOf(s)>=0)continue;a[s]=e[s]}return a}function Kh(){return Kh=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Kh.apply(this,arguments)}function m2(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function Gh(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?m2(Object(a),!0).forEach(function(s){J$(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m2(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function J$(e,r,a){return r=e9(r),r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function e9(e){var r=t9(e,"string");return typeof r=="symbol"?r:r+""}function t9(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function VT(e){return e&&e.map((r,a)=>Fe.createElement(r.tag,Gh({key:a},r.attr),VT(r.child)))}function or(e){return r=>Fe.createElement(r9,Kh({attr:Gh({},e.attr)},r),VT(e.child))}function r9(e){var r=a=>{var{attr:s,size:n,title:i}=e,o=X$(e,Q$),c=n||a.size||"1em",u;return a.className&&(u=a.className),e.className&&(u=(u?u+" ":"")+e.className),Fe.createElement("svg",Kh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,o,{className:u,style:Gh(Gh({color:e.color||a.color},a.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&Fe.createElement("title",null,i),e.children)};return u2!==void 0?Fe.createElement(u2.Consumer,null,a=>r(a)):r(WT)}function du(e){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function ay(e){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function g2(e){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function h2(e){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(e)}function KT(e){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function f2(e){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(e)}function ko(e){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function a9(e){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"},child:[]},{tag:"polyline",attr:{points:"10 17 15 12 10 7"},child:[]},{tag:"line",attr:{x1:"15",y1:"12",x2:"3",y2:"12"},child:[]}]})(e)}function s9(e){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(e)}function gl(e){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function n9(e){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"8",rx:"2",ry:"2"},child:[]},{tag:"rect",attr:{x:"2",y:"14",width:"20",height:"8",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"6.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"6",y1:"18",x2:"6.01",y2:"18"},child:[]}]})(e)}function i9(e){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function x2(e){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function o9(e){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function sy(e){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}const l9=e=>({USER_REGISTRATION:sy,USER_LOGIN:a9,USER_LOGOUT:s9,ROLE_UPDATE:ko,PERMISSION_UPDATE:i9,LEAD_CREATED:gl,LEAD_UPDATED:ko,LEAD_DELETED:x2,LEAD_STATUS_CHANGED:ko,LEAD_ASSIGNED:sy,LEAD_CONVERTED:g2,LEAD_FOLLOW_UP_CREATED:KT,LEAD_FOLLOW_UP_COMPLETED:h2,TASK_CREATED:gl,TASK_UPDATED:ko,TASK_COMPLETED:h2,COMMUNICATION_LOGGED:du,CONTACT_CREATED:sy,DEAL_CREATED:gl,DEAL_UPDATED:ko,DEAL_WON:g2,DEAL_LOST:ay,FILE_UPLOADED:gl,FILE_DELETED:x2,QUOTATION_CREATED:gl,QUOTATION_UPDATED:ko,QUOTATION_SENT:du,INVOICE_CREATED:gl,INVOICE_UPDATED:ko,INVOICE_SENT:du,NOTE_ADDED:gl,NOTE_UPDATED:ko,SYSTEM_BACKUP:f2,SYSTEM_MAINTENANCE:n9,SECURITY_ALERT:ay,DATABASE_MIGRATION:f2,API_CALL:du,ERROR_LOG:ay})[e]||du,c9=e=>({USER_REGISTRATION:"text-blue-600",USER_LOGIN:"text-green-600",USER_LOGOUT:"text-gray-600",ROLE_UPDATE:"text-orange-600",PERMISSION_UPDATE:"text-purple-600",LEAD_CREATED:"text-green-600",LEAD_UPDATED:"text-blue-600",LEAD_DELETED:"text-red-600",SYSTEM_BACKUP:"text-green-600",SYSTEM_MAINTENANCE:"text-yellow-600",SECURITY_ALERT:"text-red-600",DATABASE_MIGRATION:"text-purple-600",API_CALL:"text-blue-600",ERROR_LOG:"text-red-600"})[e]||"text-gray-600",d9=e=>{const r=new Date(e),s=Math.floor((new Date().getTime()-r.getTime())/1e3);if(s<60)return`${s} sec ago`;if(s<3600)return`${Math.floor(s/60)} min ago`;if(s<86400){const n=Math.floor(s/3600);return`${n} hour${n>1?"s":""} ago`}else{const n=Math.floor(s/86400);return`${n} day${n>1?"s":""} ago`}},GT=e=>({id:e.id,title:e.title,description:e.description,time:d9(e.createdAt),icon:l9(e.type),iconColor:e.iconColor||c9(e.type),tags:e.tags||[],user:e.user,type:e.type,createdAt:e.createdAt});function YT(e){if(!e)return null;try{const r=e.split(".")[1];if(!r)return null;const a=r.replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(a).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(s)}catch{return null}}const QT=h.createContext(void 0);let Vw=null;const p2=e=>{Vw=e},u9=()=>{Vw?.start()},m9=()=>{Vw?.stop()},g9=({children:e})=>{const[r,a]=h.useState(0),s=h.useCallback(()=>{a(o=>o+1)},[]),n=h.useCallback(()=>{a(o=>Math.max(0,o-1))},[]);h.useEffect(()=>(p2({start:s,stop:n}),()=>p2(null)),[s,n]);const i=h.useMemo(()=>({isGlobalLoading:r>0,activeRequests:r,showLoader:s,hideLoader:n}),[r,s,n]);return t.jsx(QT.Provider,{value:i,children:e})},h9=()=>{const e=h.useContext(QT);if(!e)throw new Error("useLoader must be used within a LoaderProvider");return e},oe=Pt.create({baseURL:Vo,headers:{"Content-Type":"application/json"},timeout:3e4}),f9=e=>{const r=e?.headers?.["X-Skip-Global-Loader"];return r===!0||r==="true"||e?.skipGlobalLoader===!0},x9=e=>(f9(e)||(u9(),e.__globalLoaderActive=!0),e),vb=e=>{e&&e.__globalLoaderActive&&(m9(),e.__globalLoaderActive=!1)};oe.interceptors.request.use(e=>{x9(e);const r=localStorage.getItem(At.AUTH_TOKEN)||localStorage.getItem("token"),s=[os.AUTH.LOGIN,os.AUTH.REFRESH,os.HEALTH,"/api/auth/refresh-token"].some(n=>e.url?.includes(n.replace("/api","")));if(r&&!s)try{YT(r),e.headers={...e.headers,Authorization:`Bearer ${r}`}}catch(n){console.error("Error parsing JWT token:",n),localStorage.removeItem(At.AUTH_TOKEN),localStorage.removeItem("token"),localStorage.removeItem("tokenExpiry")}return e},e=>(console.error("Request interceptor error:",e),vb(e.config),Promise.reject(e)));oe.interceptors.response.use(e=>(vb(e.config),e),e=>{if(vb(e.config),console.error("API Error:",{status:e.response?.status,message:e.response?.data?.message,url:e.config?.url,method:e.config?.method,data:e.response?.data}),e.response?.status===401&&(localStorage.removeItem(At.AUTH_TOKEN),localStorage.removeItem("tokenExpiry"),(e.response?.data?.tokenExpired||e.response?.data?.code==="TOKEN_EXPIRED")&&window.dispatchEvent(new CustomEvent("tokenExpired"))),e.response?.status===403){const r=e.response?.data?.code,a=(e.response?.data?.message||"").toString();if(r==="ACCOUNT_BLOCKED"||/blocked|deactivated|account is inactive|account is disabled/i.test(a)){localStorage.removeItem(At.AUTH_TOKEN),localStorage.removeItem(At.REFRESH_TOKEN),localStorage.removeItem("tokenExpiry"),localStorage.removeItem(At.USER_DATA);try{window.dispatchEvent(new CustomEvent("accountDeactivated",{detail:{message:a,code:r}}))}catch{}}}return e.response||(console.error("Network error or server not responding"),e.message="Network error. Please check your connection."),Promise.reject(e)});const Ye={get:async(e,r)=>{try{return(await oe.get(e,r)).data}catch(a){throw a}},post:async(e,r,a)=>{try{return(await oe.post(e,r,a)).data}catch(s){throw s}},put:async(e,r,a)=>{try{return(await oe.put(e,r,a)).data}catch(s){throw s}},patch:async(e,r,a)=>{try{return(await oe.patch(e,r,a)).data}catch(s){throw s}},delete:async(e,r)=>{try{return(await oe.delete(e,r)).data}catch(a){throw a}}},Dn=async(e,r=3,a=1e3)=>{for(let s=0;s<r;s++)try{return await e()}catch(n){if(n.response?.status===429&&s<r-1){const i=a*Math.pow(2,s);console.log(`Rate limited, retrying in ${i}ms...`),await new Promise(o=>setTimeout(o,i));continue}throw n}},Er={getUsers:async e=>{const r=new URLSearchParams;e?.search&&r.append("search",e.search),e?.status&&r.append("status",e.status),e?.roleId&&r.append("roleId",e.roleId),e?.page&&r.append("page",e.page.toString()),e?.limit&&r.append("limit",e.limit.toString());const a=r.toString(),s=a?`/users?${a}`:"/users";return(await oe.get(s)).data},createUser:async e=>Dn(async()=>(await oe.post("/users",e)).data),updateUser:async(e,r)=>Dn(async()=>(await oe.put(`/users/${e}`,r)).data),deleteUser:async e=>Dn(async()=>(await oe.delete(`/users/${e}`)).data),updateProfile:async e=>Dn(async()=>(await oe.put("/users/profile",e)).data),uploadProfilePicture:async e=>{const r=new FormData;return r.append("file",e),(await oe.post("/users/profile/avatar",r,{headers:{"Content-Type":"multipart/form-data"}})).data},getProfile:async()=>Dn(async()=>(await oe.get("/users/profile")).data),changePassword:async e=>Dn(async()=>(await oe.put("/users/password",e)).data),changePasswordForNewUser:async e=>Dn(async()=>(await oe.put("/users/password/new-user",{newPassword:e})).data),getUserStats:async()=>Dn(async()=>(await oe.get("/users/stats")).data),getUserRoles:async e=>Dn(async()=>(await oe.get(`/users/${e}/roles`)).data),getDeletedUsers:async(e=1,r=10)=>{const a=new URLSearchParams;return a.append("isDeleted","true"),a.append("page",e.toString()),a.append("limit",r.toString()),(await oe.get(`/users?${a.toString()}`)).data},restoreUser:async e=>Dn(async()=>{try{return(await oe.put(`/users/${e}/restore`)).data}catch(r){throw console.error("User restore error:",{id:e,status:r.response?.status,message:r.response?.data?.message}),r}}),deleteUserPermanently:async e=>Dn(async()=>{try{return(await oe.delete(`/users/${e}/permanent`)).data}catch(r){throw console.error("User permanent delete error:",{id:e,status:r.response?.status,message:r.response?.data?.message}),r}})},p9=Object.freeze(Object.defineProperty({__proto__:null,userService:Er},Symbol.toStringTag,{value:"Module"})),on=async(e,r=3,a=1e3)=>{for(let s=0;s<r;s++)try{return await e()}catch(n){if(n.response?.status===429&&s<r-1){const i=a*Math.pow(2,s);console.log(`Rate limited, retrying in ${i}ms...`),await new Promise(o=>setTimeout(o,i));continue}throw n}},Gt={getLeads:async(e={})=>{const r=new URLSearchParams;return e.page&&r.append("page",e.page.toString()),e.limit&&r.append("limit",e.limit.toString()),e.status&&r.append("status",e.status),typeof e.assignedTo=="number"&&r.append("assignedTo",String(e.assignedTo)),e.search&&e.search.toString().trim()!==""&&r.append("search",e.search.toString().trim()),(await oe.get(`${os.LEADS.BASE}?${r.toString()}`)).data},getLeadById:async e=>(await oe.get(`${os.LEADS.BASE}/${e}`)).data,createLead:async e=>on(async()=>(await oe.post("/leads",e)).data),updateLead:async(e,r)=>on(async()=>{try{return(await oe.put(`/leads/${e}`,r)).data}catch(a){throw console.error("Lead update error:",{id:e,data:r,status:a.response?.status,message:a.response?.data?.message,errors:a.response?.data?.errors}),a}}),assignLead:async(e,r)=>on(async()=>{try{return(await oe.put(`/leads/${e}`,{assignedTo:r??null})).data}catch(a){throw console.error("Lead assign error:",{id:e,userId:r,status:a.response?.status,message:a.response?.data?.message}),a}}),transferLead:async(e,r,a)=>on(async()=>{try{return(await oe.put(`/leads/${e}/transfer`,{newUserId:r??null,notes:a||""})).data}catch(s){throw console.error("Lead transfer error:",{id:e,newUserId:r,status:s.response?.status,message:s.response?.data?.message}),s}}),bulkAssignLeads:async(e,r)=>on(async()=>{try{return(await oe.put("/leads/bulk/assign",{leadIds:e,newUserId:r??null})).data}catch(a){throw console.error("Bulk assign leads error:",{leadIds:e,newUserId:r,status:a.response?.status,message:a.response?.data?.message}),a}}),updateLeadStatus:async(e,r)=>on(async()=>{try{return(await oe.put(`/leads/${e}`,{status:r})).data}catch(a){throw console.error("Lead status update error:",{id:e,status:r,httpStatus:a.response?.status,message:a.response?.data?.message}),a}}),deleteLead:async e=>on(async()=>(await oe.delete(`/leads/${e}`)).data),getLeadStats:async()=>(await oe.get("/leads/stats")).data,getDashboardKPIs:async(e,r,a,s="all")=>{const n=new URLSearchParams;return e&&n.append("startDate",e),r&&n.append("endDate",r),typeof a=="number"&&n.append("userId",String(a)),n.append("scope",s),(await oe.get(`/analytics/dashboard/kpis?${n.toString()}`)).data},convertLead:async(e,r)=>on(async()=>{try{return(await oe.post(`/leads/${e}/convert`,r)).data}catch(a){throw console.error("Lead conversion error:",{id:e,data:r,status:a.response?.status,message:a.response?.data?.message,errors:a.response?.data?.errors}),a}}),convertLeadForce:async(e,r)=>on(async()=>{try{return(await oe.post(`/leads/${e}/convert?force=true`,r)).data}catch(a){throw console.error("Lead conversion (force) error:",{id:e,data:r,status:a.response?.status,message:a.response?.data?.message,errors:a.response?.data?.errors}),a}}),undoConversion:async e=>on(async()=>{try{return(await oe.post(`/leads/${e}/undo-conversion`)).data}catch(r){throw console.error("Undo conversion error:",{leadId:e,status:r.response?.status,message:r.response?.data?.message}),r}}),getDeletedLeads:async(e=1,r=10)=>{const a=new URLSearchParams;return a.append("isDeleted","true"),a.append("page",e.toString()),a.append("limit",r.toString()),(await oe.get(`${os.LEADS.BASE}?${a.toString()}`)).data},restoreLead:async e=>on(async()=>{try{return(await oe.put(`/leads/${e}/restore`)).data}catch(r){throw console.error("Lead restore error:",{id:e,status:r.response?.status,message:r.response?.data?.message}),r}}),deleteLeadPermanently:async e=>on(async()=>{try{return(await oe.delete(`/leads/${e}/permanent`)).data}catch(r){throw console.error("Lead permanent delete error:",{id:e,status:r.response?.status,message:r.response?.data?.message}),r}})};class y9{async getDeals(r=1,a=10,s){try{const n=new URLSearchParams({page:r.toString(),limit:a.toString(),...s&&{search:s}});return(await oe.get(`${os.DEALS.BASE}?${n}`)).data}catch(n){throw console.error("Error fetching deals:",n),n}}async getDealById(r){try{const s=(await oe.get(`${os.DEALS.BASE}/${r}`)).data,n=s?.data?.deal||s?.data||s;return{success:s?.success??!0,data:n,message:s?.message}}catch(a){throw console.error("Error fetching deal:",a),a}}async createDeal(r){try{return(await oe.post(os.DEALS.BASE,r)).data}catch(a){throw console.error("Error creating deal:",a),a}}async updateDeal(r,a){try{return(await oe.put(`${os.DEALS.BASE}/${r}`,a)).data}catch(s){throw console.error("Error updating deal:",s),s}}async deleteDeal(r){try{return(await oe.delete(`${os.DEALS.BASE}/${r}`)).data}catch(a){throw console.error("Error deleting deal:",a),a}}async getDeal(r){return this.getDealById(r)}async getDealStats(){try{return(await oe.get(os.DEALS.STATS)).data}catch(r){throw console.error("Error fetching deal stats:",r),r}}async bulkExportDeals(r){try{const a=new URLSearchParams;return r&&a.append("search",r),(await oe.get(`${os.DEALS.BASE}/bulk/export?${a.toString()}`,{responseType:"blob"})).data}catch(a){throw console.error("Error exporting deals:",a),a}}async bulkImportDeals(r){try{const a=new FormData;return a.append("csvFile",r),(await oe.post(`${os.DEALS.BASE}/bulk/import`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("Error importing deals:",a),a}}async bulkAssignDeals(r,a){try{return(await oe.put(`${os.DEALS.BASE}/bulk/assign`,{dealIds:r,userId:a})).data}catch(s){throw console.error("Error bulk assigning deals:",s),s}}}const aa=new y9,y2=async(e,r=3,a=1e3)=>{for(let s=0;s<r;s++)try{return await e()}catch(n){if(n.response?.status===429&&s<r-1){const i=a*Math.pow(2,s);console.log(`Rate limited, retrying in ${i}ms...`),await new Promise(o=>setTimeout(o,i));continue}throw n}},Ga={getRoles:async(e={})=>{const r=new URLSearchParams;e.search&&r.append("search",e.search),e.status&&r.append("status",e.status),e.page&&r.append("page",e.page.toString()),e.limit&&r.append("limit",e.limit.toString());const a=r.toString(),s=a?`/roles?${a}`:"/roles";return(await oe.get(s)).data},createRole:async e=>{const r={name:e.name,description:e.description??"",accessScope:e.accessScope,isActive:typeof e.isActive=="boolean"?e.isActive:!0,permissionIds:Array.isArray(e.permissionIds)?e.permissionIds:[]};return(await oe.post("/roles",r)).data},updateRole:async(e,r)=>{const a={name:r.name,description:r.description??"",accessScope:r.accessScope,isActive:typeof r.isActive=="boolean"?r.isActive:void 0,permissionIds:Array.isArray(r.permissionIds)?r.permissionIds:[]};return(await oe.put(`/roles/${e}`,a)).data},deleteRole:async e=>(await oe.delete(`/roles/${e}`)).data,getUsersByRole:async e=>{try{return(await oe.get(`/roles/${e}/users`)).data}catch(r){return console.error("Error fetching users by role:",r),{success:!1,data:[]}}},getPermissions:async()=>(await oe.get("/permissions")).data,assignRoleToUser:async(e,r)=>(await oe.put(`/users/${e}/role`,{roleIds:r})).data,getDeletedRoles:async(e=1,r=10)=>{const a=new URLSearchParams;return a.append("isDeleted","true"),a.append("page",e.toString()),a.append("limit",r.toString()),(await oe.get(`/roles?${a.toString()}`)).data},restoreRole:async e=>y2(async()=>{try{return(await oe.put(`/roles/${e}/restore`)).data}catch(r){throw console.error("Role restore error:",{id:e,status:r.response?.status,message:r.response?.data?.message}),r}}),deleteRolePermanently:async e=>y2(async()=>{try{return(await oe.delete(`/roles/${e}/permanent`)).data}catch(r){throw console.error("Role permanent delete error:",{id:e,status:r.response?.status,message:r.response?.data?.message}),r}})},$o={getActivities:async(e=1,r=10)=>{try{return(await oe.get("/activities",{params:{page:e,limit:r}})).data}catch(a){throw console.error("Error fetching activities:",a),a}},getRecentActivities:async(e=5,r)=>{try{const a={limit:e};return r&&(a.userId=r),(await oe.get("/activities/recent",{params:a})).data}catch(a){throw console.error("Error fetching recent activities:",a),a}},getActivityStats:async()=>{try{return(await oe.get("/activities/stats")).data}catch(e){throw console.error("Error fetching activity stats:",e),e}},createActivity:async e=>{try{return(await oe.post("/activities",e)).data}catch(r){throw console.error("Error creating activity:",r),r}},getDeletedData:async(e=1,r=10,a)=>{try{return(await oe.get("/activities/deleted-data",{params:{page:e,limit:r},...a?.skipLoader?{headers:{"X-Skip-Global-Loader":"true"},skipGlobalLoader:!0}:{}})).data}catch(s){throw console.error("Error fetching deleted data:",s),s}},getActivitiesByLeadId:async(e,r=1,a=50)=>{try{return(await oe.get(`/activities/lead/${e}`,{params:{page:r,limit:a}})).data}catch(s){throw console.error("Error fetching lead activities:",s),s}}},XT=h.createContext(void 0),v9={counts:{users:0,leads:0,deals:0,roles:0,trashUsers:0,trashLeads:0,trashRoles:0},refreshCounts:async()=>{},refreshUsersCount:async()=>{},refreshLeadsCount:async()=>{},refreshDealsCount:async()=>{},refreshRolesCount:async()=>{},refreshTrashCounts:async()=>{}};let v2=!1;const b9=({children:e})=>{const[r,a]=h.useState({users:0,leads:0,deals:0,roles:0,trashUsers:0,trashLeads:0,trashRoles:0}),{isAuthenticated:s,hasPermission:n}=xr(),i=async()=>{if(s)try{const f=n("user.read"),y=n("lead.read"),p=n("deal.read"),b=n("role.read"),j=n("deleted.read"),[v,N,k,E,C]=await Promise.all([f?Er.getUsers().catch(()=>({data:{users:[]}})):Promise.resolve({data:{users:[]}}),y?Gt.getLeads().catch(()=>({data:{leads:[]}})):Promise.resolve({data:{leads:[]}}),p?aa.getDeals().catch(S=>(console.log("Deals API not available yet:",S.response?.status),{data:{deals:[]}})):Promise.resolve({data:{deals:[]}}),b?Ga.getRoles().catch(()=>({data:{roles:[]}})):Promise.resolve({data:{roles:[]}}),j?$o.getDeletedData(1,1).catch(()=>({data:{users:{total:0},leads:{total:0},roles:{total:0}}})):Promise.resolve({data:{users:{total:0},leads:{total:0},roles:{total:0}}})]);a({users:v.data.users?.length||0,leads:N.data.leads?.length||0,deals:k.data.deals?.length||0,roles:E.data.roles?.length||0,trashUsers:C?.data?.users?.total??0,trashLeads:C?.data?.leads?.total??0,trashRoles:C?.data?.roles?.total??0})}catch(f){console.error("Error fetching counts:",f)}},o=async()=>{try{if(!s||!n("user.read"))return;const f=await Er.getUsers();a(y=>({...y,users:f.data.users?.length||0}))}catch(f){console.error("Error fetching users count:",f)}},c=async()=>{try{if(!s||!n("lead.read"))return;const f=await Gt.getLeads();a(y=>({...y,leads:f.data.leads?.length||0}))}catch(f){console.error("Error fetching leads count:",f)}},u=async()=>{try{if(!s||!n("deal.read"))return;const f=await aa.getDeals();a(y=>({...y,deals:f.data.deals?.length||0}))}catch(f){f.response?.status!==404&&console.error("Error fetching deals count:",f)}},m=async()=>{try{if(!s||!n("role.read"))return;const f=await Ga.getRoles();a(y=>({...y,roles:f.data.roles?.length||0}))}catch(f){console.error("Error fetching roles count:",f)}},g=async()=>{try{if(!s||!n("deleted.read"))return;const f=await $o.getDeletedData(1,1,{skipLoader:!0});a(y=>({...y,trashUsers:f?.data?.users?.total??0,trashLeads:f?.data?.leads?.total??0,trashRoles:f?.data?.roles?.total??0}))}catch(f){console.error("Error fetching trash counts:",f)}};return h.useEffect(()=>{s&&i()},[s]),t.jsx(XT.Provider,{value:{counts:r,refreshCounts:i,refreshUsersCount:o,refreshLeadsCount:c,refreshDealsCount:u,refreshRolesCount:m,refreshTrashCounts:g},children:e})},jn=()=>{const e=h.useContext(XT);return e===void 0?(v2||(console.error("useCounts called outside of CountsProvider. Returning default counters."),v2=!0),v9):e};let w9=class{baseUrl="/business-settings";async getCompanySettings(){return Ye.get(`${this.baseUrl}/company`)}async updateCompanySettings(r){return Ye.put(`${this.baseUrl}/company`,r)}async uploadCompanyLogo(r){const a=new FormData;return a.append("logo",r),Ye.post(`${this.baseUrl}/company/logo`,a,{headers:{"Content-Type":"multipart/form-data"}})}async getCurrencySettings(){return Ye.get(`${this.baseUrl}/currency`)}async updateCurrencySettings(r){return Ye.put(`${this.baseUrl}/currency`,r)}async getTaxSettings(){return Ye.get(`${this.baseUrl}/tax`)}async updateTaxSettings(r){return Ye.put(`${this.baseUrl}/tax`,r)}async getExchangeRates(){return Ye.get(`${this.baseUrl}/currency/exchange-rates`)}async refreshExchangeRates(){return Ye.post(`${this.baseUrl}/currency/refresh-rates`)}async getLeadSources(){return Ye.get("/lead-sources")}async createLeadSource(r){return Ye.post("/lead-sources",r)}async updateLeadSource(r,a){return Ye.put(`/lead-sources/${r}`,a)}async deleteLeadSource(r){return Ye.delete(`/lead-sources/${r}`)}async reorderLeadSources(r){return Ye.put("/lead-sources/reorder",{sourceIds:r})}async getLeadStatuses(){return Ye.get(`${this.baseUrl}/lead-statuses`)}async getDealStatuses(){return Ye.get(`${this.baseUrl}/deal-statuses`)}async createDealStatus(r){return Ye.post(`${this.baseUrl}/deal-statuses`,r)}async updateDealStatus(r,a){return Ye.put(`${this.baseUrl}/deal-statuses/${r}`,a)}async deleteDealStatus(r){return Ye.delete(`${this.baseUrl}/deal-statuses/${r}`)}async getProductCategories(){return Ye.get(`${this.baseUrl}/product-categories`)}async createProductCategory(r){return Ye.post(`${this.baseUrl}/product-categories`,r)}async updateProductCategory(r,a){return Ye.put(`${this.baseUrl}/product-categories/${r}`,a)}async deleteProductCategory(r){return Ye.delete(`${this.baseUrl}/product-categories/${r}`)}async getPriceLists(){return Ye.get(`${this.baseUrl}/price-lists`)}async createPriceList(r){return Ye.post(`${this.baseUrl}/price-lists`,r)}async updatePriceList(r,a){return Ye.put(`${this.baseUrl}/price-lists/${r}`,a)}async deletePriceList(r){return Ye.delete(`${this.baseUrl}/price-lists/${r}`)}async getEmailTemplates(){return Ye.get(`${this.baseUrl}/email-templates`)}async getEmailTemplate(r){return Ye.get(`${this.baseUrl}/email-templates/${r}`)}async createEmailTemplate(r){return Ye.post(`${this.baseUrl}/email-templates`,r)}async updateEmailTemplate(r,a){return Ye.put(`${this.baseUrl}/email-templates/${r}`,a)}async deleteEmailTemplate(r){return Ye.delete(`${this.baseUrl}/email-templates/${r}`)}async duplicateEmailTemplate(r){return Ye.post(`${this.baseUrl}/email-templates/${r}/duplicate`)}async previewEmailTemplate(r,a){return Ye.post(`${this.baseUrl}/email-templates/${r}/preview`,a)}async getQuotationTemplates(){return Ye.get(`${this.baseUrl}/quotation-templates`)}async createQuotationTemplate(r){return Ye.post(`${this.baseUrl}/quotation-templates`,r)}async updateQuotationTemplate(r,a){return Ye.put(`${this.baseUrl}/quotation-templates/${r}`,a)}async deleteQuotationTemplate(r){return Ye.delete(`${this.baseUrl}/quotation-templates/${r}`)}async setDefaultQuotationTemplate(r){return Ye.put(`${this.baseUrl}/quotation-templates/${r}/set-default`)}async getInvoiceTemplates(){return Ye.get(`${this.baseUrl}/invoice-templates`)}async createInvoiceTemplate(r){return Ye.post(`${this.baseUrl}/invoice-templates`,r)}async updateInvoiceTemplate(r,a){return Ye.put(`${this.baseUrl}/invoice-templates/${r}`,a)}async deleteInvoiceTemplate(r){return Ye.delete(`${this.baseUrl}/invoice-templates/${r}`)}async setDefaultInvoiceTemplate(r){return Ye.put(`${this.baseUrl}/invoice-templates/${r}/set-default`)}async getNotificationSettings(){return Ye.get(`${this.baseUrl}/notifications`)}async updateNotificationSettings(r){return Ye.put(`${this.baseUrl}/notifications`,r)}async testNotification(r,a){return Ye.post(`${this.baseUrl}/notifications/test`,{channel:r,recipient:a})}async getAutomationRules(){return Ye.get(`${this.baseUrl}/automation-rules`)}async getAutomationRule(r){return Ye.get(`${this.baseUrl}/automation-rules/${r}`)}async createAutomationRule(r){return Ye.post(`${this.baseUrl}/automation-rules`,r)}async updateAutomationRule(r,a){return Ye.put(`${this.baseUrl}/automation-rules/${r}`,a)}async deleteAutomationRule(r){return Ye.delete(`${this.baseUrl}/automation-rules/${r}`)}async toggleAutomationRule(r){return Ye.put(`${this.baseUrl}/automation-rules/${r}/toggle`)}async testAutomationRule(r,a){return Ye.post(`${this.baseUrl}/automation-rules/${r}/test`,a)}async getIntegrationSettings(){return Ye.get(`${this.baseUrl}/integrations`)}async updateIntegrationSettings(r){return Ye.put(`${this.baseUrl}/integrations`,r)}async testIntegration(r){return Ye.post(`${this.baseUrl}/integrations/${r}/test`)}async syncIntegrationData(r){return Ye.post(`${this.baseUrl}/integrations/${r}/sync`)}async getPaymentGatewaySettings(){return Ye.get(`${this.baseUrl}/payment-gateways`)}async updatePaymentGatewaySettings(r){return Ye.put(`${this.baseUrl}/payment-gateways`,r)}async testPaymentGateway(r){return Ye.post(`${this.baseUrl}/payment-gateways/${r}/test`)}async exportSettings(r){return Ye.post(`${this.baseUrl}/export`,{categories:r})}async importSettings(r){const a=new FormData;return a.append("settings",r),Ye.post(`${this.baseUrl}/import`,a,{headers:{"Content-Type":"multipart/form-data"}})}async resetSettings(r){return Ye.post(`${this.baseUrl}/reset`,{categories:r})}async getSettingsHealth(){return Ye.get(`${this.baseUrl}/health`)}async getAllBusinessSettings(){return Ye.get(`${this.baseUrl}/all`)}};const Wa=new w9;function ZT(e){var r,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(r=0;r<e.length;r++)e[r]&&(a=ZT(e[r]))&&(s&&(s+=" "),s+=a);else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function Io(){for(var e,r,a=0,s="";a<arguments.length;)(e=arguments[a++])&&(r=ZT(e))&&(s&&(s+=" "),s+=r);return s}const Du=e=>typeof e=="number"&&!isNaN(e),_l=e=>typeof e=="string",Es=e=>typeof e=="function",Lh=e=>_l(e)||Es(e)?e:null,ny=e=>h.isValidElement(e)||_l(e)||Es(e)||Du(e);function j9(e,r,a){a===void 0&&(a=300);const{scrollHeight:s,style:n}=e;requestAnimationFrame(()=>{n.minHeight="initial",n.height=s+"px",n.transition=`all ${a}ms`,requestAnimationFrame(()=>{n.height="0",n.padding="0",n.margin="0",setTimeout(r,a)})})}function mf(e){let{enter:r,exit:a,appendPosition:s=!1,collapse:n=!0,collapseDuration:i=300}=e;return function(o){let{children:c,position:u,preventExitTransition:m,done:g,nodeRef:f,isIn:y}=o;const p=s?`${r}--${u}`:r,b=s?`${a}--${u}`:a,j=h.useRef(0);return h.useLayoutEffect(()=>{const v=f.current,N=p.split(" "),k=E=>{E.target===f.current&&(v.dispatchEvent(new Event("d")),v.removeEventListener("animationend",k),v.removeEventListener("animationcancel",k),j.current===0&&E.type!=="animationcancel"&&v.classList.remove(...N))};v.classList.add(...N),v.addEventListener("animationend",k),v.addEventListener("animationcancel",k)},[]),h.useEffect(()=>{const v=f.current,N=()=>{v.removeEventListener("animationend",N),n?j9(v,g,i):g()};y||(m?N():(j.current=1,v.className+=` ${b}`,v.addEventListener("animationend",N)))},[y]),Fe.createElement(Fe.Fragment,null,c)}}function b2(e,r){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:r}:{}}const gn={list:new Map,emitQueue:new Map,on(e,r){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(r),this},off(e,r){if(r){const a=this.list.get(e).filter(s=>s!==r);return this.list.set(e,a),this}return this.list.delete(e),this},cancelEmit(e){const r=this.emitQueue.get(e);return r&&(r.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(r=>{const a=setTimeout(()=>{r(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(a)})}},sh=e=>{let{theme:r,type:a,...s}=e;return Fe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:r==="colored"?"currentColor":`var(--toastify-icon-color-${a})`,...s})},iy={info:function(e){return Fe.createElement(sh,{...e},Fe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return Fe.createElement(sh,{...e},Fe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return Fe.createElement(sh,{...e},Fe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return Fe.createElement(sh,{...e},Fe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Fe.createElement("div",{className:"Toastify__spinner"})}};function N9(e){const[,r]=h.useReducer(p=>p+1,0),[a,s]=h.useState([]),n=h.useRef(null),i=h.useRef(new Map).current,o=p=>a.indexOf(p)!==-1,c=h.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:o,getToast:p=>i.get(p)}).current;function u(p){let{containerId:b}=p;const{limit:j}=c.props;!j||b&&c.containerId!==b||(c.count-=c.queue.length,c.queue=[])}function m(p){s(b=>p==null?[]:b.filter(j=>j!==p))}function g(){const{toastContent:p,toastProps:b,staleId:j}=c.queue.shift();y(p,b,j)}function f(p,b){let{delay:j,staleId:v,...N}=b;if(!ny(p)||(function(B){return!n.current||c.props.enableMultiContainer&&B.containerId!==c.props.containerId||i.has(B.toastId)&&B.updateId==null})(N))return;const{toastId:k,updateId:E,data:C}=N,{props:S}=c,P=()=>m(k),D=E==null;D&&c.count++;const I={...S,style:S.toastStyle,key:c.toastKey++,...Object.fromEntries(Object.entries(N).filter(B=>{let[z,q]=B;return q!=null})),toastId:k,updateId:E,data:C,closeToast:P,isIn:!1,className:Lh(N.className||S.toastClassName),bodyClassName:Lh(N.bodyClassName||S.bodyClassName),progressClassName:Lh(N.progressClassName||S.progressClassName),autoClose:!N.isLoading&&(H=N.autoClose,W=S.autoClose,H===!1||Du(H)&&H>0?H:W),deleteToast(){const B=b2(i.get(k),"removed");i.delete(k),gn.emit(4,B);const z=c.queue.length;if(c.count=k==null?c.count-c.displayedToast:c.count-1,c.count<0&&(c.count=0),z>0){const q=k==null?c.props.limit:1;if(z===1||q===1)c.displayedToast++,g();else{const J=q>z?z:q;c.displayedToast=J;for(let ae=0;ae<J;ae++)g()}}else r()}};var H,W;I.iconOut=(function(B){let{theme:z,type:q,isLoading:J,icon:ae}=B,ne=null;const re={theme:z,type:q};return ae===!1||(Es(ae)?ne=ae(re):h.isValidElement(ae)?ne=h.cloneElement(ae,re):_l(ae)||Du(ae)?ne=ae:J?ne=iy.spinner():(L=>L in iy)(q)&&(ne=iy[q](re))),ne})(I),Es(N.onOpen)&&(I.onOpen=N.onOpen),Es(N.onClose)&&(I.onClose=N.onClose),I.closeButton=S.closeButton,N.closeButton===!1||ny(N.closeButton)?I.closeButton=N.closeButton:N.closeButton===!0&&(I.closeButton=!ny(S.closeButton)||S.closeButton);let K=p;h.isValidElement(p)&&!_l(p.type)?K=h.cloneElement(p,{closeToast:P,toastProps:I,data:C}):Es(p)&&(K=p({closeToast:P,toastProps:I,data:C})),S.limit&&S.limit>0&&c.count>S.limit&&D?c.queue.push({toastContent:K,toastProps:I,staleId:v}):Du(j)?setTimeout(()=>{y(K,I,v)},j):y(K,I,v)}function y(p,b,j){const{toastId:v}=b;j&&i.delete(j);const N={content:p,props:b};i.set(v,N),s(k=>[...k,v].filter(E=>E!==j)),gn.emit(4,b2(N,N.props.updateId==null?"added":"updated"))}return h.useEffect(()=>(c.containerId=e.containerId,gn.cancelEmit(3).on(0,f).on(1,p=>n.current&&m(p)).on(5,u).emit(2,c),()=>{i.clear(),gn.emit(3,c)}),[]),h.useEffect(()=>{c.props=e,c.isToastActive=o,c.displayedToast=a.length}),{getToastToRender:function(p){const b=new Map,j=Array.from(i.values());return e.newestOnTop&&j.reverse(),j.forEach(v=>{const{position:N}=v.props;b.has(N)||b.set(N,[]),b.get(N).push(v)}),Array.from(b,v=>p(v[0],v[1]))},containerRef:n,isToastActive:o}}function w2(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function j2(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function k9(e){const[r,a]=h.useState(!1),[s,n]=h.useState(!1),i=h.useRef(null),o=h.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,c=h.useRef(e),{autoClose:u,pauseOnHover:m,closeToast:g,onClick:f,closeOnClick:y}=e;function p(C){if(e.draggable){C.nativeEvent.type==="touchstart"&&C.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",N),document.addEventListener("mouseup",k),document.addEventListener("touchmove",N),document.addEventListener("touchend",k);const S=i.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=S.getBoundingClientRect(),S.style.transition="",o.x=w2(C.nativeEvent),o.y=j2(C.nativeEvent),e.draggableDirection==="x"?(o.start=o.x,o.removalDistance=S.offsetWidth*(e.draggablePercent/100)):(o.start=o.y,o.removalDistance=S.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent/100))}}function b(C){if(o.boundingRect){const{top:S,bottom:P,left:D,right:I}=o.boundingRect;C.nativeEvent.type!=="touchend"&&e.pauseOnHover&&o.x>=D&&o.x<=I&&o.y>=S&&o.y<=P?v():j()}}function j(){a(!0)}function v(){a(!1)}function N(C){const S=i.current;o.canDrag&&S&&(o.didMove=!0,r&&v(),o.x=w2(C),o.y=j2(C),o.delta=e.draggableDirection==="x"?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),S.style.transform=`translate${e.draggableDirection}(${o.delta}px)`,S.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function k(){document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",k),document.removeEventListener("touchmove",N),document.removeEventListener("touchend",k);const C=i.current;if(o.canDrag&&o.didMove&&C){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return n(!0),void e.closeToast();C.style.transition="transform 0.2s, opacity 0.2s",C.style.transform=`translate${e.draggableDirection}(0)`,C.style.opacity="1"}}h.useEffect(()=>{c.current=e}),h.useEffect(()=>(i.current&&i.current.addEventListener("d",j,{once:!0}),Es(e.onOpen)&&e.onOpen(h.isValidElement(e.children)&&e.children.props),()=>{const C=c.current;Es(C.onClose)&&C.onClose(h.isValidElement(C.children)&&C.children.props)}),[]),h.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||v(),window.addEventListener("focus",j),window.addEventListener("blur",v)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",j),window.removeEventListener("blur",v))}),[e.pauseOnFocusLoss]);const E={onMouseDown:p,onTouchStart:p,onMouseUp:b,onTouchEnd:b};return u&&m&&(E.onMouseEnter=v,E.onMouseLeave=j),y&&(E.onClick=C=>{f&&f(C),o.canCloseOnClick&&g()}),{playToast:j,pauseToast:v,isRunning:r,preventExitTransition:s,toastRef:i,eventHandlers:E}}function JT(e){let{closeToast:r,theme:a,ariaLabel:s="close"}=e;return Fe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${a}`,type:"button",onClick:n=>{n.stopPropagation(),r(n)},"aria-label":s},Fe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Fe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function S9(e){let{delay:r,isRunning:a,closeToast:s,type:n="default",hide:i,className:o,style:c,controlledProgress:u,progress:m,rtl:g,isIn:f,theme:y}=e;const p=i||u&&m===0,b={...c,animationDuration:`${r}ms`,animationPlayState:a?"running":"paused",opacity:p?0:1};u&&(b.transform=`scaleX(${m})`);const j=Io("Toastify__progress-bar",u?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${y}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":g}),v=Es(o)?o({rtl:g,type:n,defaultClassName:j}):Io(j,o);return Fe.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:v,style:b,[u&&m>=1?"onTransitionEnd":"onAnimationEnd"]:u&&m<1?null:()=>{f&&s()}})}const C9=e=>{const{isRunning:r,preventExitTransition:a,toastRef:s,eventHandlers:n}=k9(e),{closeButton:i,children:o,autoClose:c,onClick:u,type:m,hideProgressBar:g,closeToast:f,transition:y,position:p,className:b,style:j,bodyClassName:v,bodyStyle:N,progressClassName:k,progressStyle:E,updateId:C,role:S,progress:P,rtl:D,toastId:I,deleteToast:H,isIn:W,isLoading:K,iconOut:B,closeOnClick:z,theme:q}=e,J=Io("Toastify__toast",`Toastify__toast-theme--${q}`,`Toastify__toast--${m}`,{"Toastify__toast--rtl":D},{"Toastify__toast--close-on-click":z}),ae=Es(b)?b({rtl:D,position:p,type:m,defaultClassName:J}):Io(J,b),ne=!!P||!c,re={closeToast:f,type:m,theme:q};let L=null;return i===!1||(L=Es(i)?i(re):h.isValidElement(i)?h.cloneElement(i,re):JT(re)),Fe.createElement(y,{isIn:W,done:H,position:p,preventExitTransition:a,nodeRef:s},Fe.createElement("div",{id:I,onClick:u,className:ae,...n,style:j,ref:s},Fe.createElement("div",{...W&&{role:S},className:Es(v)?v({type:m}):Io("Toastify__toast-body",v),style:N},B!=null&&Fe.createElement("div",{className:Io("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!K})},B),Fe.createElement("div",null,o)),L,Fe.createElement(S9,{...C&&!ne?{key:`pb-${C}`}:{},rtl:D,theme:q,delay:c,isRunning:r,isIn:W,closeToast:f,hide:g,type:m,style:E,className:k,controlledProgress:ne,progress:P||0})))},gf=function(e,r){return r===void 0&&(r=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:r}},E9=mf(gf("bounce",!0));mf(gf("slide",!0));mf(gf("zoom"));mf(gf("flip"));const Yh=h.forwardRef((e,r)=>{const{getToastToRender:a,containerRef:s,isToastActive:n}=N9(e),{className:i,style:o,rtl:c,containerId:u}=e;function m(g){const f=Io("Toastify__toast-container",`Toastify__toast-container--${g}`,{"Toastify__toast-container--rtl":c});return Es(i)?i({position:g,rtl:c,defaultClassName:f}):Io(f,Lh(i))}return h.useEffect(()=>{r&&(r.current=s.current)},[]),Fe.createElement("div",{ref:s,className:"Toastify",id:u},a((g,f)=>{const y=f.length?{...o}:{...o,pointerEvents:"none"};return Fe.createElement("div",{className:m(g),style:y,key:`container-${g}`},f.map((p,b)=>{let{content:j,props:v}=p;return Fe.createElement(C9,{...v,isIn:n(v.toastId),style:{...v.style,"--nth":b+1,"--len":f.length},key:`toast-${v.key}`},j)}))}))});Yh.displayName="ToastContainer",Yh.defaultProps={position:"top-right",transition:E9,autoClose:5e3,closeButton:JT,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let oy,fl=new Map,Eu=[],A9=1;function eD(){return""+A9++}function P9(e){return e&&(_l(e.toastId)||Du(e.toastId))?e.toastId:eD()}function Ou(e,r){return fl.size>0?gn.emit(0,e,r):Eu.push({content:e,options:r}),r.toastId}function Qh(e,r){return{...r,type:r&&r.type||e,toastId:P9(r)}}function nh(e){return(r,a)=>Ou(r,Qh(e,a))}function M(e,r){return Ou(e,Qh("default",r))}M.loading=(e,r)=>Ou(e,Qh("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...r})),M.promise=function(e,r,a){let s,{pending:n,error:i,success:o}=r;n&&(s=_l(n)?M.loading(n,a):M.loading(n.render,{...a,...n}));const c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(g,f,y)=>{if(f==null)return void M.dismiss(s);const p={type:g,...c,...a,data:y},b=_l(f)?{render:f}:f;return s?M.update(s,{...p,...b}):M(b.render,{...p,...b}),y},m=Es(e)?e():e;return m.then(g=>u("success",o,g)).catch(g=>u("error",i,g)),m},M.success=nh("success"),M.info=nh("info"),M.error=nh("error"),M.warning=nh("warning"),M.warn=M.warning,M.dark=(e,r)=>Ou(e,Qh("default",{theme:"dark",...r})),M.dismiss=e=>{fl.size>0?gn.emit(1,e):Eu=Eu.filter(r=>e!=null&&r.options.toastId!==e)},M.clearWaitingQueue=function(e){return e===void 0&&(e={}),gn.emit(5,e)},M.isActive=e=>{let r=!1;return fl.forEach(a=>{a.isToastActive&&a.isToastActive(e)&&(r=!0)}),r},M.update=function(e,r){r===void 0&&(r={}),setTimeout(()=>{const a=(function(s,n){let{containerId:i}=n;const o=fl.get(i||oy);return o&&o.getToast(s)})(e,r);if(a){const{props:s,content:n}=a,i={delay:100,...s,...r,toastId:r.toastId||e,updateId:eD()};i.toastId!==e&&(i.staleId=e);const o=i.render||n;delete i.render,Ou(o,i)}},0)},M.done=e=>{M.update(e,{progress:1})},M.onChange=e=>(gn.on(4,e),()=>{gn.off(4,e)}),M.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},M.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},gn.on(2,e=>{oy=e.containerId||e,fl.set(oy,e),Eu.forEach(r=>{gn.emit(0,r.content,r.options)}),Eu=[]}).on(3,e=>{fl.delete(e.containerId||e),fl.size===0&&gn.off(0).off(1).off(5)});const tD=h.createContext(void 0),T9=({children:e})=>{const[r,a]=h.useState(null),[s,n]=h.useState(null),[i,o]=h.useState(null),[c,u]=h.useState(null),[m,g]=h.useState([]),[f,y]=h.useState([]),[p,b]=h.useState([]),[j,v]=h.useState(!0),[N,k]=h.useState(!1),{isAuthenticated:E}=xr(),C=async()=>{try{v(!0);try{const X=(await Wa.getAllBusinessSettings()).data;X&&(a(X),n(X.company||ml.company),o(X.currency||ml.currency),u(X.tax||ml.tax),g(X.leadSources||[]),y(X.leadStatuses||[]),b(X.dealStatuses||[]))}catch(U){console.error("Failed to load all settings, falling back to individual calls",U),await S()}k(!0)}catch(U){console.error("Failed to initialize business settings:",U),n(ml.company),o(ml.currency),u(ml.tax),g(ml.leadSources.map((X,Q)=>({id:`default-${Q}`,name:X,description:"",color:"#6B7280",isActive:!0,sortOrder:Q}))),y([]),b([])}finally{v(!1)}},S=async()=>{const U=[Wa.getCompanySettings().then(X=>n(X.data)),Wa.getCurrencySettings().then(X=>o(X.data)),Wa.getTaxSettings().then(X=>u(X.data)),Wa.getLeadSources().then(X=>g(X.data)),Wa.getLeadStatuses().then(X=>y(X.data)),Wa.getDealStatuses().then(X=>b(X.data))];await Promise.allSettled(U)};h.useEffect(()=>{E&&C()},[E]);const Z={businessSettings:r,companySettings:s,currencySettings:i,taxSettings:c,leadSources:m,leadStatuses:f,dealStatuses:p,isLoading:j,isInitialized:N,refreshBusinessSettings:async()=>{await C()},updateCompanySettings:async U=>{try{const X=await Wa.updateCompanySettings(U);n(X.data),M.success("Company settings updated successfully")}catch(X){throw console.error("Failed to update company settings:",X),M.error("Failed to update company settings"),X}},updateCurrencySettings:async U=>{try{const X=await Wa.updateCurrencySettings(U);o(X.data),M.success("Currency settings updated successfully")}catch(X){throw console.error("Failed to update currency settings:",X),M.error("Failed to update currency settings"),X}},updateTaxSettings:async U=>{try{const X=await Wa.updateTaxSettings(U);u(X.data),M.success("Tax settings updated successfully")}catch(X){throw console.error("Failed to update tax settings:",X),M.error("Failed to update tax settings"),X}},addLeadSource:async U=>{try{const X=await Wa.createLeadSource(U),Q=X.data||X;g(V=>[...V,Q]),M.success("Lead source added successfully")}catch(X){throw console.error("Failed to add lead source:",X),M.error("Failed to add lead source"),X}},updateLeadSource:async(U,X)=>{try{const Q=await Wa.updateLeadSource(U,X),V=Q.data||Q;g(ge=>ge.map(Te=>Te.id===U?V:Te)),M.success("Lead source updated successfully")}catch(Q){throw console.error("Failed to update lead source:",Q),M.error("Failed to update lead source"),Q}},deleteLeadSource:async U=>{try{await Wa.deleteLeadSource(U),g(X=>X.filter(Q=>Q.id!==U)),M.success("Lead source deleted successfully")}catch(X){throw console.error("Failed to delete lead source:",X),M.error("Failed to delete lead source"),X}},reorderLeadSources:async U=>{try{const X=await Wa.reorderLeadSources(U);g(X.data),M.success("Lead sources reordered successfully")}catch(X){throw console.error("Failed to reorder lead sources:",X),M.error("Failed to reorder lead sources"),X}},getLeadStatuses:()=>f,getDealStages:()=>p,addDealStatus:async U=>{try{const X=await Wa.createDealStatus(U);b(Q=>[...Q,X.data]),M.success("Deal status added successfully")}catch(X){throw console.error("Failed to add deal status:",X),M.error("Failed to add deal status"),X}},updateDealStatus:async(U,X)=>{try{const Q=await Wa.updateDealStatus(U,X);b(V=>V.map(ge=>ge.id===U?Q.data:ge)),M.success("Deal status updated successfully")}catch(Q){throw console.error("Failed to update deal status:",Q),M.error("Failed to update deal status"),Q}},deleteDealStatus:async U=>{try{await Wa.deleteDealStatus(U),b(X=>X.filter(Q=>Q.id!==U)),M.success("Deal status deleted successfully")}catch(X){throw console.error("Failed to delete deal status:",X),M.error("Failed to delete deal status"),X}},formatCurrency:(U,X)=>{let Q=Number(U);if(isFinite(Q)||(Q=0),!i)return String(Q);const V=X||i.primary,ge=i.decimalPlaces||2;try{return new Intl.NumberFormat(void 0,{style:"currency",currency:V,minimumFractionDigits:ge,maximumFractionDigits:ge}).format(Q)}catch{const xe=i.symbol||"$";return i.position==="before"?`${xe}${Q.toFixed(ge)}`:`${Q.toFixed(ge)}${xe}`}},calculateTax:(U,X)=>c?U*(X||c.defaultRate)/100:0,getCurrency:()=>i?.primary||"USD",getLeadSourceById:U=>m.find(X=>X.id===U)||null,getLeadStatusById:U=>f.find(X=>X.id===U)||null,getDealStatusById:U=>p.find(X=>X.id===U)||null};return t.jsx(tD.Provider,{value:Z,children:e})},Hr=()=>{const e=h.useContext(tD);if(e===void 0)throw new Error("useBusinessSettings must be used within a BusinessSettingsProvider");return e},rD=h.createContext(void 0),hl=["dashboard","leads","deals","quotations","invoices","task-management","expense-management","products","automation-management","trash","business-settings"],ih=4,D9=({children:e})=>{const[r,a]=h.useState(hl);h.useEffect(()=>{try{const i=localStorage.getItem("menuOrder"),o=Number(localStorage.getItem("menuOrderVersion")||"0"),c=i?JSON.parse(i):[];let u;Array.isArray(c)?(u=c.filter(m=>hl.includes(m)),hl.forEach(m=>{u.includes(m)||u.push(m)})):u=[...hl],o!==ih&&(localStorage.setItem("menuOrderVersion",String(ih)),localStorage.setItem("menuOrder",JSON.stringify(u))),a(u)}catch(i){console.error("Failed to parse saved menu order:",i),a(hl)}},[]);const s=i=>{a(i),localStorage.setItem("menuOrder",JSON.stringify(i)),localStorage.setItem("menuOrderVersion",String(ih))},n=()=>{a(hl),localStorage.setItem("menuOrder",JSON.stringify(hl)),localStorage.setItem("menuOrderVersion",String(ih))};return t.jsx(rD.Provider,{value:{menuOrder:r,setMenuOrder:s,resetMenuOrder:n},children:e})},aD=()=>{const e=h.useContext(rD);if(e===void 0)throw new Error("useMenu must be used within a MenuProvider");return e},it=({children:e,requiredPermission:r,requiredRole:a})=>{const{isAuthenticated:s,hasPermission:n,hasRole:i,isLoading:o,user:c,logout:u}=xr();return h.useEffect(()=>{c&&typeof c.isActive<"u"&&c.isActive===!1&&(M.info("Your account has been deactivated. You will be logged out."),u())},[c,u]),o?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?c&&typeof c.isActive<"u"&&c.isActive===!1?t.jsx(Th,{to:"/login",replace:!0}):c?.mustChangePassword&&window.location.pathname!=="/profile"?t.jsx(Th,{to:"/profile",replace:!0}):r&&!n(r)?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Access Denied"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You don't have permission to access this page."})]})}):a&&!i(a)?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Access Denied"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You don't have the required role to access this page."})]})}):t.jsx(t.Fragment,{children:e}):t.jsx(Th,{to:"/login",replace:!0})};var O9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const I9=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Oe=(e,r)=>{const a=h.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:u,...m},g)=>h.createElement("svg",{ref:g,...O9,width:n,height:n,stroke:s,strokeWidth:o?Number(i)*24/Number(n):i,className:["lucide",`lucide-${I9(e)}`,c].join(" "),...m},[...r.map(([f,y])=>h.createElement(f,y)),...Array.isArray(u)?u:[u]]));return a.displayName=`${e}`,a};const Wc=Oe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const ur=Oe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Al=Oe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const L9=Oe("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);const R9=Oe("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);const vr=Oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const N2=Oe("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);const xm=Oe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const M9=Oe("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);const _9=Oe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);const k2=Oe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);const $9=Oe("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);const Ka=Oe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const $l=Oe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const zu=Oe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);const Pl=Oe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const $i=Oe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);const Xh=Oe("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);const nr=Oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const bb=Oe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const ct=Oe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Rh=Oe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);const hf=Oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const xn=Oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Kw=Oe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const Vc=Oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const sD=Oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const U9=Oe("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);const F9=Oe("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);const S2=Oe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const z9=Oe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const Yt=Oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const C2=Oe("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);const Hs=Oe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const B9=Oe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Qr=Oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const hs=Oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const pn=Oe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const Bt=Oe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Co=Oe("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);const Uo=Oe("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);const q9=Oe("FileSearch",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"1vg67v"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}]]);const Zh=Oe("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);const Lt=Oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const Gl=Oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Jh=Oe("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);const ff=Oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const wb=Oe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const nD=Oe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);const H9=Oe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const E2=Oe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const W9=Oe("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);const mi=Oe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const gi=Oe("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);const jb=Oe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const A2=Oe("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);const P2=Oe("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const Ii=Oe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const pm=Oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const V9=Oe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const K9=Oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const ir=Oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Lo=Oe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const G9=Oe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Y9=Oe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const _r=Oe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const Q9=Oe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const iD=Oe("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);const Nb=Oe("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const _n=Oe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const X9=Oe("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);const Z9=Oe("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const J9=Oe("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);const Ko=Oe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const oD=Oe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const kb=Oe("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);const ly=Oe("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);const ba=Oe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const e0=Oe("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);const Sb=Oe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const Rt=Oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const eU=Oe("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);const Li=Oe("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const Ro=Oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const ym=Oe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const T2=Oe("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);const Ya=Oe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const ma=Oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Tl=Oe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const Ui=Oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Gs=Oe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const tU=Oe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);const er=Oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);const cy=Oe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);const Bu=Oe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);const rU=Oe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const Fo=Oe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const aU=Oe("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);const Gw=Oe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const D2=Oe("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);const O2=Oe("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);const ht=Oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const wa=Oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Ri=Oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const sU=Oe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const xt=Oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Os=Oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const nU=Oe("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);const iU=Oe("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);const lD=Oe("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);const oU=Oe("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const va=Oe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const da=Oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Dl=Oe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),vm=({open:e,title:r="Confirm Action",description:a,confirmText:s="Confirm",cancelText:n="Cancel",loading:i=!1,onConfirm:o,onClose:c})=>e?t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 dark:bg-black dark:bg-opacity-60 overflow-y-auto w-full z-50 flex items-center justify-center -top-10 ",children:t.jsxs("div",{className:"relative mx-auto p-6 border w-full max-w-md shadow-xl rounded-2xl bg-white dark:bg-gray-800 border-gray-100 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r}),t.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Close",children:t.jsx(da,{className:"h-6 w-6"})})]}),a&&t.jsx("div",{className:"mb-6 text-gray-700 dark:text-gray-300 text-sm",children:a}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx("button",{onClick:c,disabled:i,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50",children:n}),t.jsx("button",{onClick:o,disabled:i,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center",children:i?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):s})]})]})}):null,lU=()=>{const[e,r]=h.useState(!1),{currentLanguage:a,changeLanguage:s,availableLanguages:n}=G$(),{t:i}=wn(),o=h.useRef(null);h.useEffect(()=>{const g=f=>{o.current&&!o.current.contains(f.target)&&r(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const c=g=>{s(g),r(!1)};n.find(g=>g.code===a);const u=["ar","he","fa","ur"],m=u.includes(a);return t.jsxs("div",{className:"relative",ref:o,children:[t.jsx("button",{onClick:()=>r(!e),className:"p-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors hover:scale-105",title:i("common.language"),children:t.jsx(ff,{className:"h-5 w-5"})}),e&&t.jsx("div",{className:`absolute ${m?"left-0":"right-0"} mt-2 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50 max-h-80 overflow-y-auto`,children:t.jsx("div",{className:"py-1",children:n.map(g=>t.jsxs("button",{onClick:()=>c(g.code),className:`w-full flex items-center justify-between px-4 py-3 text-sm text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${a===g.code?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300"}`,dir:u.includes(g.code)?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"font-medium",children:g.nativeName}),t.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",g.name,")"]})]}),a===g.code&&t.jsx(hf,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})]},g.code))})})]})};function cU(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return h.useMemo(()=>s=>{r.forEach(n=>n(s))},r)}const xf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function od(e){const r=Object.prototype.toString.call(e);return r==="[object Window]"||r==="[object global]"}function Yw(e){return"nodeType"in e}function Is(e){var r,a;return e?od(e)?e:Yw(e)&&(r=(a=e.ownerDocument)==null?void 0:a.defaultView)!=null?r:window:window}function Qw(e){const{Document:r}=Is(e);return e instanceof r}function bm(e){return od(e)?!1:e instanceof Is(e).HTMLElement}function cD(e){return e instanceof Is(e).SVGElement}function ld(e){return e?od(e)?e.document:Yw(e)?Qw(e)?e:bm(e)||cD(e)?e.ownerDocument:document:document:document}const si=xf?h.useLayoutEffect:h.useEffect;function Xw(e){const r=h.useRef(e);return si(()=>{r.current=e}),h.useCallback(function(){for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return r.current==null?void 0:r.current(...s)},[])}function dU(){const e=h.useRef(null),r=h.useCallback((s,n)=>{e.current=setInterval(s,n)},[]),a=h.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[r,a]}function qu(e,r){r===void 0&&(r=[e]);const a=h.useRef(e);return si(()=>{a.current!==e&&(a.current=e)},r),a}function wm(e,r){const a=h.useRef();return h.useMemo(()=>{const s=e(a.current);return a.current=s,s},[...r])}function t0(e){const r=Xw(e),a=h.useRef(null),s=h.useCallback(n=>{n!==a.current&&r?.(n,a.current),a.current=n},[]);return[a,s]}function Cb(e){const r=h.useRef();return h.useEffect(()=>{r.current=e},[e]),r.current}let dy={};function jm(e,r){return h.useMemo(()=>{if(r)return r;const a=dy[e]==null?0:dy[e]+1;return dy[e]=a,e+"-"+a},[e,r])}function dD(e){return function(r){for(var a=arguments.length,s=new Array(a>1?a-1:0),n=1;n<a;n++)s[n-1]=arguments[n];return s.reduce((i,o)=>{const c=Object.entries(o);for(const[u,m]of c){const g=i[u];g!=null&&(i[u]=g+e*m)}return i},{...r})}}const Uc=dD(1),Hu=dD(-1);function uU(e){return"clientX"in e&&"clientY"in e}function Zw(e){if(!e)return!1;const{KeyboardEvent:r}=Is(e.target);return r&&e instanceof r}function mU(e){if(!e)return!1;const{TouchEvent:r}=Is(e.target);return r&&e instanceof r}function Eb(e){if(mU(e)){if(e.touches&&e.touches.length){const{clientX:r,clientY:a}=e.touches[0];return{x:r,y:a}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:r,clientY:a}=e.changedTouches[0];return{x:r,y:a}}}return uU(e)?{x:e.clientX,y:e.clientY}:null}const Wu=Object.freeze({Translate:{toString(e){if(!e)return;const{x:r,y:a}=e;return"translate3d("+(r?Math.round(r):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:r,scaleY:a}=e;return"scaleX("+r+") scaleY("+a+")"}},Transform:{toString(e){if(e)return[Wu.Translate.toString(e),Wu.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:r,duration:a,easing:s}=e;return r+" "+a+"ms "+s}}}),I2="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function gU(e){return e.matches(I2)?e:e.querySelector(I2)}const hU={display:"none"};function fU(e){let{id:r,value:a}=e;return Fe.createElement("div",{id:r,style:hU},a)}function xU(e){let{id:r,announcement:a,ariaLiveType:s="assertive"}=e;const n={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Fe.createElement("div",{id:r,style:n,role:"status","aria-live":s,"aria-atomic":!0},a)}function pU(){const[e,r]=h.useState("");return{announce:h.useCallback(s=>{s!=null&&r(s)},[]),announcement:e}}const uD=h.createContext(null);function yU(e){const r=h.useContext(uD);h.useEffect(()=>{if(!r)throw new Error("useDndMonitor must be used within a children of <DndContext>");return r(e)},[e,r])}function vU(){const[e]=h.useState(()=>new Set),r=h.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[h.useCallback(s=>{let{type:n,event:i}=s;e.forEach(o=>{var c;return(c=o[n])==null?void 0:c.call(o,i)})},[e]),r]}const bU={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},wU={onDragStart(e){let{active:r}=e;return"Picked up draggable item "+r.id+"."},onDragOver(e){let{active:r,over:a}=e;return a?"Draggable item "+r.id+" was moved over droppable area "+a.id+".":"Draggable item "+r.id+" is no longer over a droppable area."},onDragEnd(e){let{active:r,over:a}=e;return a?"Draggable item "+r.id+" was dropped over droppable area "+a.id:"Draggable item "+r.id+" was dropped."},onDragCancel(e){let{active:r}=e;return"Dragging was cancelled. Draggable item "+r.id+" was dropped."}};function jU(e){let{announcements:r=wU,container:a,hiddenTextDescribedById:s,screenReaderInstructions:n=bU}=e;const{announce:i,announcement:o}=pU(),c=jm("DndLiveRegion"),[u,m]=h.useState(!1);if(h.useEffect(()=>{m(!0)},[]),yU(h.useMemo(()=>({onDragStart(f){let{active:y}=f;i(r.onDragStart({active:y}))},onDragMove(f){let{active:y,over:p}=f;r.onDragMove&&i(r.onDragMove({active:y,over:p}))},onDragOver(f){let{active:y,over:p}=f;i(r.onDragOver({active:y,over:p}))},onDragEnd(f){let{active:y,over:p}=f;i(r.onDragEnd({active:y,over:p}))},onDragCancel(f){let{active:y,over:p}=f;i(r.onDragCancel({active:y,over:p}))}}),[i,r])),!u)return null;const g=Fe.createElement(Fe.Fragment,null,Fe.createElement(fU,{id:s,value:n.draggable}),Fe.createElement(xU,{id:c,announcement:o}));return a?Do.createPortal(g,a):g}var pa;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(pa||(pa={}));function r0(){}function L2(e,r){return h.useMemo(()=>({sensor:e,options:r??{}}),[e,r])}function NU(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return h.useMemo(()=>[...r].filter(s=>s!=null),[...r])}const $n=Object.freeze({x:0,y:0});function mD(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function gD(e,r){let{data:{value:a}}=e,{data:{value:s}}=r;return a-s}function kU(e,r){let{data:{value:a}}=e,{data:{value:s}}=r;return s-a}function R2(e){let{left:r,top:a,height:s,width:n}=e;return[{x:r,y:a},{x:r+n,y:a},{x:r,y:a+s},{x:r+n,y:a+s}]}function hD(e,r){if(!e||e.length===0)return null;const[a]=e;return a[r]}function M2(e,r,a){return r===void 0&&(r=e.left),a===void 0&&(a=e.top),{x:r+e.width*.5,y:a+e.height*.5}}const SU=e=>{let{collisionRect:r,droppableRects:a,droppableContainers:s}=e;const n=M2(r,r.left,r.top),i=[];for(const o of s){const{id:c}=o,u=a.get(c);if(u){const m=mD(M2(u),n);i.push({id:c,data:{droppableContainer:o,value:m}})}}return i.sort(gD)},CU=e=>{let{collisionRect:r,droppableRects:a,droppableContainers:s}=e;const n=R2(r),i=[];for(const o of s){const{id:c}=o,u=a.get(c);if(u){const m=R2(u),g=n.reduce((y,p,b)=>y+mD(m[b],p),0),f=Number((g/4).toFixed(4));i.push({id:c,data:{droppableContainer:o,value:f}})}}return i.sort(gD)};function EU(e,r){const a=Math.max(r.top,e.top),s=Math.max(r.left,e.left),n=Math.min(r.left+r.width,e.left+e.width),i=Math.min(r.top+r.height,e.top+e.height),o=n-s,c=i-a;if(s<n&&a<i){const u=r.width*r.height,m=e.width*e.height,g=o*c,f=g/(u+m-g);return Number(f.toFixed(4))}return 0}const AU=e=>{let{collisionRect:r,droppableRects:a,droppableContainers:s}=e;const n=[];for(const i of s){const{id:o}=i,c=a.get(o);if(c){const u=EU(c,r);u>0&&n.push({id:o,data:{droppableContainer:i,value:u}})}}return n.sort(kU)};function PU(e,r,a){return{...e,scaleX:r&&a?r.width/a.width:1,scaleY:r&&a?r.height/a.height:1}}function fD(e,r){return e&&r?{x:e.left-r.left,y:e.top-r.top}:$n}function TU(e){return function(a){for(var s=arguments.length,n=new Array(s>1?s-1:0),i=1;i<s;i++)n[i-1]=arguments[i];return n.reduce((o,c)=>({...o,top:o.top+e*c.y,bottom:o.bottom+e*c.y,left:o.left+e*c.x,right:o.right+e*c.x}),{...a})}}const DU=TU(1);function OU(e){if(e.startsWith("matrix3d(")){const r=e.slice(9,-1).split(/, /);return{x:+r[12],y:+r[13],scaleX:+r[0],scaleY:+r[5]}}else if(e.startsWith("matrix(")){const r=e.slice(7,-1).split(/, /);return{x:+r[4],y:+r[5],scaleX:+r[0],scaleY:+r[3]}}return null}function IU(e,r,a){const s=OU(r);if(!s)return e;const{scaleX:n,scaleY:i,x:o,y:c}=s,u=e.left-o-(1-n)*parseFloat(a),m=e.top-c-(1-i)*parseFloat(a.slice(a.indexOf(" ")+1)),g=n?e.width/n:e.width,f=i?e.height/i:e.height;return{width:g,height:f,top:m,right:u+g,bottom:m+f,left:u}}const LU={ignoreTransform:!1};function cd(e,r){r===void 0&&(r=LU);let a=e.getBoundingClientRect();if(r.ignoreTransform){const{transform:m,transformOrigin:g}=Is(e).getComputedStyle(e);m&&(a=IU(a,m,g))}const{top:s,left:n,width:i,height:o,bottom:c,right:u}=a;return{top:s,left:n,width:i,height:o,bottom:c,right:u}}function _2(e){return cd(e,{ignoreTransform:!0})}function RU(e){const r=e.innerWidth,a=e.innerHeight;return{top:0,left:0,right:r,bottom:a,width:r,height:a}}function MU(e,r){return r===void 0&&(r=Is(e).getComputedStyle(e)),r.position==="fixed"}function _U(e,r){r===void 0&&(r=Is(e).getComputedStyle(e));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(n=>{const i=r[n];return typeof i=="string"?a.test(i):!1})}function pf(e,r){const a=[];function s(n){if(r!=null&&a.length>=r||!n)return a;if(Qw(n)&&n.scrollingElement!=null&&!a.includes(n.scrollingElement))return a.push(n.scrollingElement),a;if(!bm(n)||cD(n)||a.includes(n))return a;const i=Is(e).getComputedStyle(n);return n!==e&&_U(n,i)&&a.push(n),MU(n,i)?a:s(n.parentNode)}return e?s(e):a}function xD(e){const[r]=pf(e,1);return r??null}function uy(e){return!xf||!e?null:od(e)?e:Yw(e)?Qw(e)||e===ld(e).scrollingElement?window:bm(e)?e:null:null}function pD(e){return od(e)?e.scrollX:e.scrollLeft}function yD(e){return od(e)?e.scrollY:e.scrollTop}function Ab(e){return{x:pD(e),y:yD(e)}}var La;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(La||(La={}));function vD(e){return!xf||!e?!1:e===document.scrollingElement}function bD(e){const r={x:0,y:0},a=vD(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-a.width,y:e.scrollHeight-a.height},n=e.scrollTop<=r.y,i=e.scrollLeft<=r.x,o=e.scrollTop>=s.y,c=e.scrollLeft>=s.x;return{isTop:n,isLeft:i,isBottom:o,isRight:c,maxScroll:s,minScroll:r}}const $U={x:.2,y:.2};function UU(e,r,a,s,n){let{top:i,left:o,right:c,bottom:u}=a;s===void 0&&(s=10),n===void 0&&(n=$U);const{isTop:m,isBottom:g,isLeft:f,isRight:y}=bD(e),p={x:0,y:0},b={x:0,y:0},j={height:r.height*n.y,width:r.width*n.x};return!m&&i<=r.top+j.height?(p.y=La.Backward,b.y=s*Math.abs((r.top+j.height-i)/j.height)):!g&&u>=r.bottom-j.height&&(p.y=La.Forward,b.y=s*Math.abs((r.bottom-j.height-u)/j.height)),!y&&c>=r.right-j.width?(p.x=La.Forward,b.x=s*Math.abs((r.right-j.width-c)/j.width)):!f&&o<=r.left+j.width&&(p.x=La.Backward,b.x=s*Math.abs((r.left+j.width-o)/j.width)),{direction:p,speed:b}}function FU(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:r,left:a,right:s,bottom:n}=e.getBoundingClientRect();return{top:r,left:a,right:s,bottom:n,width:e.clientWidth,height:e.clientHeight}}function wD(e){return e.reduce((r,a)=>Uc(r,Ab(a)),$n)}function zU(e){return e.reduce((r,a)=>r+pD(a),0)}function BU(e){return e.reduce((r,a)=>r+yD(a),0)}function qU(e,r){if(r===void 0&&(r=cd),!e)return;const{top:a,left:s,bottom:n,right:i}=r(e);xD(e)&&(n<=0||i<=0||a>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const HU=[["x",["left","right"],zU],["y",["top","bottom"],BU]];class Jw{constructor(r,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=pf(a),n=wD(s);this.rect={...r},this.width=r.width,this.height=r.height;for(const[i,o,c]of HU)for(const u of o)Object.defineProperty(this,u,{get:()=>{const m=c(s),g=n[i]-m;return this.rect[u]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Iu{constructor(r){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...a)})},this.target=r}add(r,a,s){var n;(n=this.target)==null||n.addEventListener(r,a,s),this.listeners.push([r,a,s])}}function WU(e){const{EventTarget:r}=Is(e);return e instanceof r?e:ld(e)}function my(e,r){const a=Math.abs(e.x),s=Math.abs(e.y);return typeof r=="number"?Math.sqrt(a**2+s**2)>r:"x"in r&&"y"in r?a>r.x&&s>r.y:"x"in r?a>r.x:"y"in r?s>r.y:!1}var hn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(hn||(hn={}));function $2(e){e.preventDefault()}function VU(e){e.stopPropagation()}var Vt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Vt||(Vt={}));const jD={start:[Vt.Space,Vt.Enter],cancel:[Vt.Esc],end:[Vt.Space,Vt.Enter,Vt.Tab]},KU=(e,r)=>{let{currentCoordinates:a}=r;switch(e.code){case Vt.Right:return{...a,x:a.x+25};case Vt.Left:return{...a,x:a.x-25};case Vt.Down:return{...a,y:a.y+25};case Vt.Up:return{...a,y:a.y-25}}};class ej{constructor(r){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=r;const{event:{target:a}}=r;this.props=r,this.listeners=new Iu(ld(a)),this.windowListeners=new Iu(Is(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(hn.Resize,this.handleCancel),this.windowListeners.add(hn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(hn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:r,onStart:a}=this.props,s=r.node.current;s&&qU(s),a($n)}handleKeyDown(r){if(Zw(r)){const{active:a,context:s,options:n}=this.props,{keyboardCodes:i=jD,coordinateGetter:o=KU,scrollBehavior:c="smooth"}=n,{code:u}=r;if(i.end.includes(u)){this.handleEnd(r);return}if(i.cancel.includes(u)){this.handleCancel(r);return}const{collisionRect:m}=s.current,g=m?{x:m.left,y:m.top}:$n;this.referenceCoordinates||(this.referenceCoordinates=g);const f=o(r,{active:a,context:s.current,currentCoordinates:g});if(f){const y=Hu(f,g),p={x:0,y:0},{scrollableAncestors:b}=s.current;for(const j of b){const v=r.code,{isTop:N,isRight:k,isLeft:E,isBottom:C,maxScroll:S,minScroll:P}=bD(j),D=FU(j),I={x:Math.min(v===Vt.Right?D.right-D.width/2:D.right,Math.max(v===Vt.Right?D.left:D.left+D.width/2,f.x)),y:Math.min(v===Vt.Down?D.bottom-D.height/2:D.bottom,Math.max(v===Vt.Down?D.top:D.top+D.height/2,f.y))},H=v===Vt.Right&&!k||v===Vt.Left&&!E,W=v===Vt.Down&&!C||v===Vt.Up&&!N;if(H&&I.x!==f.x){const K=j.scrollLeft+y.x,B=v===Vt.Right&&K<=S.x||v===Vt.Left&&K>=P.x;if(B&&!y.y){j.scrollTo({left:K,behavior:c});return}B?p.x=j.scrollLeft-K:p.x=v===Vt.Right?j.scrollLeft-S.x:j.scrollLeft-P.x,p.x&&j.scrollBy({left:-p.x,behavior:c});break}else if(W&&I.y!==f.y){const K=j.scrollTop+y.y,B=v===Vt.Down&&K<=S.y||v===Vt.Up&&K>=P.y;if(B&&!y.x){j.scrollTo({top:K,behavior:c});return}B?p.y=j.scrollTop-K:p.y=v===Vt.Down?j.scrollTop-S.y:j.scrollTop-P.y,p.y&&j.scrollBy({top:-p.y,behavior:c});break}}this.handleMove(r,Uc(Hu(f,this.referenceCoordinates),p))}}}handleMove(r,a){const{onMove:s}=this.props;r.preventDefault(),s(a)}handleEnd(r){const{onEnd:a}=this.props;r.preventDefault(),this.detach(),a()}handleCancel(r){const{onCancel:a}=this.props;r.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ej.activators=[{eventName:"onKeyDown",handler:(e,r,a)=>{let{keyboardCodes:s=jD,onActivation:n}=r,{active:i}=a;const{code:o}=e.nativeEvent;if(s.start.includes(o)){const c=i.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),n?.({event:e.nativeEvent}),!0)}return!1}}];function U2(e){return!!(e&&"distance"in e)}function F2(e){return!!(e&&"delay"in e)}class tj{constructor(r,a,s){var n;s===void 0&&(s=WU(r.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=r,this.events=a;const{event:i}=r,{target:o}=i;this.props=r,this.events=a,this.document=ld(o),this.documentListeners=new Iu(this.document),this.listeners=new Iu(s),this.windowListeners=new Iu(Is(o)),this.initialCoordinates=(n=Eb(i))!=null?n:$n,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:r,props:{options:{activationConstraint:a,bypassActivationConstraint:s}}}=this;if(this.listeners.add(r.move.name,this.handleMove,{passive:!1}),this.listeners.add(r.end.name,this.handleEnd),r.cancel&&this.listeners.add(r.cancel.name,this.handleCancel),this.windowListeners.add(hn.Resize,this.handleCancel),this.windowListeners.add(hn.DragStart,$2),this.windowListeners.add(hn.VisibilityChange,this.handleCancel),this.windowListeners.add(hn.ContextMenu,$2),this.documentListeners.add(hn.Keydown,this.handleKeydown),a){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(F2(a)){this.timeoutId=setTimeout(this.handleStart,a.delay),this.handlePending(a);return}if(U2(a)){this.handlePending(a);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(r,a){const{active:s,onPending:n}=this.props;n(s,r,this.initialCoordinates,a)}handleStart(){const{initialCoordinates:r}=this,{onStart:a}=this.props;r&&(this.activated=!0,this.documentListeners.add(hn.Click,VU,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(hn.SelectionChange,this.removeTextSelection),a(r))}handleMove(r){var a;const{activated:s,initialCoordinates:n,props:i}=this,{onMove:o,options:{activationConstraint:c}}=i;if(!n)return;const u=(a=Eb(r))!=null?a:$n,m=Hu(n,u);if(!s&&c){if(U2(c)){if(c.tolerance!=null&&my(m,c.tolerance))return this.handleCancel();if(my(m,c.distance))return this.handleStart()}if(F2(c)&&my(m,c.tolerance))return this.handleCancel();this.handlePending(c,m);return}r.cancelable&&r.preventDefault(),o(u)}handleEnd(){const{onAbort:r,onEnd:a}=this.props;this.detach(),this.activated||r(this.props.active),a()}handleCancel(){const{onAbort:r,onCancel:a}=this.props;this.detach(),this.activated||r(this.props.active),a()}handleKeydown(r){r.code===Vt.Esc&&this.handleCancel()}removeTextSelection(){var r;(r=this.document.getSelection())==null||r.removeAllRanges()}}const GU={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class rj extends tj{constructor(r){const{event:a}=r,s=ld(a.target);super(r,GU,s)}}rj.activators=[{eventName:"onPointerDown",handler:(e,r)=>{let{nativeEvent:a}=e,{onActivation:s}=r;return!a.isPrimary||a.button!==0?!1:(s?.({event:a}),!0)}}];const YU={move:{name:"mousemove"},end:{name:"mouseup"}};var Pb;(function(e){e[e.RightClick=2]="RightClick"})(Pb||(Pb={}));class QU extends tj{constructor(r){super(r,YU,ld(r.event.target))}}QU.activators=[{eventName:"onMouseDown",handler:(e,r)=>{let{nativeEvent:a}=e,{onActivation:s}=r;return a.button===Pb.RightClick?!1:(s?.({event:a}),!0)}}];const gy={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class XU extends tj{constructor(r){super(r,gy)}static setup(){return window.addEventListener(gy.move.name,r,{capture:!1,passive:!1}),function(){window.removeEventListener(gy.move.name,r)};function r(){}}}XU.activators=[{eventName:"onTouchStart",handler:(e,r)=>{let{nativeEvent:a}=e,{onActivation:s}=r;const{touches:n}=a;return n.length>1?!1:(s?.({event:a}),!0)}}];var Lu;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Lu||(Lu={}));var a0;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(a0||(a0={}));function ZU(e){let{acceleration:r,activator:a=Lu.Pointer,canScroll:s,draggingRect:n,enabled:i,interval:o=5,order:c=a0.TreeOrder,pointerCoordinates:u,scrollableAncestors:m,scrollableAncestorRects:g,delta:f,threshold:y}=e;const p=e7({delta:f,disabled:!i}),[b,j]=dU(),v=h.useRef({x:0,y:0}),N=h.useRef({x:0,y:0}),k=h.useMemo(()=>{switch(a){case Lu.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Lu.DraggableRect:return n}},[a,n,u]),E=h.useRef(null),C=h.useCallback(()=>{const P=E.current;if(!P)return;const D=v.current.x*N.current.x,I=v.current.y*N.current.y;P.scrollBy(D,I)},[]),S=h.useMemo(()=>c===a0.TreeOrder?[...m].reverse():m,[c,m]);h.useEffect(()=>{if(!i||!m.length||!k){j();return}for(const P of S){if(s?.(P)===!1)continue;const D=m.indexOf(P),I=g[D];if(!I)continue;const{direction:H,speed:W}=UU(P,I,k,r,y);for(const K of["x","y"])p[K][H[K]]||(W[K]=0,H[K]=0);if(W.x>0||W.y>0){j(),E.current=P,b(C,o),v.current=W,N.current=H;return}}v.current={x:0,y:0},N.current={x:0,y:0},j()},[r,C,s,j,i,o,JSON.stringify(k),JSON.stringify(p),b,m,S,g,JSON.stringify(y)])}const JU={x:{[La.Backward]:!1,[La.Forward]:!1},y:{[La.Backward]:!1,[La.Forward]:!1}};function e7(e){let{delta:r,disabled:a}=e;const s=Cb(r);return wm(n=>{if(a||!s||!n)return JU;const i={x:Math.sign(r.x-s.x),y:Math.sign(r.y-s.y)};return{x:{[La.Backward]:n.x[La.Backward]||i.x===-1,[La.Forward]:n.x[La.Forward]||i.x===1},y:{[La.Backward]:n.y[La.Backward]||i.y===-1,[La.Forward]:n.y[La.Forward]||i.y===1}}},[a,r,s])}function t7(e,r){const a=r!=null?e.get(r):void 0,s=a?a.node.current:null;return wm(n=>{var i;return r==null?null:(i=s??n)!=null?i:null},[s,r])}function r7(e,r){return h.useMemo(()=>e.reduce((a,s)=>{const{sensor:n}=s,i=n.activators.map(o=>({eventName:o.eventName,handler:r(o.handler,s)}));return[...a,...i]},[]),[e,r])}var Vu;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Vu||(Vu={}));var Tb;(function(e){e.Optimized="optimized"})(Tb||(Tb={}));const z2=new Map;function a7(e,r){let{dragging:a,dependencies:s,config:n}=r;const[i,o]=h.useState(null),{frequency:c,measure:u,strategy:m}=n,g=h.useRef(e),f=v(),y=qu(f),p=h.useCallback(function(N){N===void 0&&(N=[]),!y.current&&o(k=>k===null?N:k.concat(N.filter(E=>!k.includes(E))))},[y]),b=h.useRef(null),j=wm(N=>{if(f&&!a)return z2;if(!N||N===z2||g.current!==e||i!=null){const k=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){k.set(E.id,E.rect.current);continue}const C=E.node.current,S=C?new Jw(u(C),C):null;E.rect.current=S,S&&k.set(E.id,S)}return k}return N},[e,i,a,f,u]);return h.useEffect(()=>{g.current=e},[e]),h.useEffect(()=>{f||p()},[a,f]),h.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),h.useEffect(()=>{f||typeof c!="number"||b.current!==null||(b.current=setTimeout(()=>{p(),b.current=null},c))},[c,f,p,...s]),{droppableRects:j,measureDroppableContainers:p,measuringScheduled:i!=null};function v(){switch(m){case Vu.Always:return!1;case Vu.BeforeDragging:return a;default:return!a}}}function ND(e,r){return wm(a=>e?a||(typeof r=="function"?r(e):e):null,[r,e])}function s7(e,r){return ND(e,r)}function n7(e){let{callback:r,disabled:a}=e;const s=Xw(r),n=h.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,a]);return h.useEffect(()=>()=>n?.disconnect(),[n]),n}function yf(e){let{callback:r,disabled:a}=e;const s=Xw(r),n=h.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[a]);return h.useEffect(()=>()=>n?.disconnect(),[n]),n}function i7(e){return new Jw(cd(e),e)}function B2(e,r,a){r===void 0&&(r=i7);const[s,n]=h.useState(null);function i(){n(u=>{if(!e)return null;if(e.isConnected===!1){var m;return(m=u??a)!=null?m:null}const g=r(e);return JSON.stringify(u)===JSON.stringify(g)?u:g})}const o=n7({callback(u){if(e)for(const m of u){const{type:g,target:f}=m;if(g==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),c=yf({callback:i});return si(()=>{i(),e?(c?.observe(e),o?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),o?.disconnect())},[e]),s}function o7(e){const r=ND(e);return fD(e,r)}const q2=[];function l7(e){const r=h.useRef(e),a=wm(s=>e?s&&s!==q2&&e&&r.current&&e.parentNode===r.current.parentNode?s:pf(e):q2,[e]);return h.useEffect(()=>{r.current=e},[e]),a}function c7(e){const[r,a]=h.useState(null),s=h.useRef(e),n=h.useCallback(i=>{const o=uy(i.target);o&&a(c=>c?(c.set(o,Ab(o)),new Map(c)):null)},[]);return h.useEffect(()=>{const i=s.current;if(e!==i){o(i);const c=e.map(u=>{const m=uy(u);return m?(m.addEventListener("scroll",n,{passive:!0}),[m,Ab(m)]):null}).filter(u=>u!=null);a(c.length?new Map(c):null),s.current=e}return()=>{o(e),o(i)};function o(c){c.forEach(u=>{const m=uy(u);m?.removeEventListener("scroll",n)})}},[n,e]),h.useMemo(()=>e.length?r?Array.from(r.values()).reduce((i,o)=>Uc(i,o),$n):wD(e):$n,[e,r])}function H2(e,r){r===void 0&&(r=[]);const a=h.useRef(null);return h.useEffect(()=>{a.current=null},r),h.useEffect(()=>{const s=e!==$n;s&&!a.current&&(a.current=e),!s&&a.current&&(a.current=null)},[e]),a.current?Hu(e,a.current):$n}function d7(e){h.useEffect(()=>{if(!xf)return;const r=e.map(a=>{let{sensor:s}=a;return s.setup==null?void 0:s.setup()});return()=>{for(const a of r)a?.()}},e.map(r=>{let{sensor:a}=r;return a}))}function u7(e,r){return h.useMemo(()=>e.reduce((a,s)=>{let{eventName:n,handler:i}=s;return a[n]=o=>{i(o,r)},a},{}),[e,r])}function kD(e){return h.useMemo(()=>e?RU(e):null,[e])}const W2=[];function m7(e,r){r===void 0&&(r=cd);const[a]=e,s=kD(a?Is(a):null),[n,i]=h.useState(W2);function o(){i(()=>e.length?e.map(u=>vD(u)?s:new Jw(r(u),u)):W2)}const c=yf({callback:o});return si(()=>{c?.disconnect(),o(),e.forEach(u=>c?.observe(u))},[e]),n}function g7(e){if(!e)return null;if(e.children.length>1)return e;const r=e.children[0];return bm(r)?r:e}function h7(e){let{measure:r}=e;const[a,s]=h.useState(null),n=h.useCallback(m=>{for(const{target:g}of m)if(bm(g)){s(f=>{const y=r(g);return f?{...f,width:y.width,height:y.height}:y});break}},[r]),i=yf({callback:n}),o=h.useCallback(m=>{const g=g7(m);i?.disconnect(),g&&i?.observe(g),s(g?r(g):null)},[r,i]),[c,u]=t0(o);return h.useMemo(()=>({nodeRef:c,rect:a,setRef:u}),[a,c,u])}const f7=[{sensor:rj,options:{}},{sensor:ej,options:{}}],x7={current:{}},Mh={draggable:{measure:_2},droppable:{measure:_2,strategy:Vu.WhileDragging,frequency:Tb.Optimized},dragOverlay:{measure:cd}};class Ru extends Map{get(r){var a;return r!=null&&(a=super.get(r))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(r=>{let{disabled:a}=r;return!a})}getNodeFor(r){var a,s;return(a=(s=this.get(r))==null?void 0:s.node.current)!=null?a:void 0}}const p7={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ru,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:r0},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Mh,measureDroppableContainers:r0,windowRect:null,measuringScheduled:!1},y7={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:r0,draggableNodes:new Map,over:null,measureDroppableContainers:r0},vf=h.createContext(y7),SD=h.createContext(p7);function v7(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ru}}}function b7(e,r){switch(r.type){case pa.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:r.initialCoordinates,active:r.active}};case pa.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:r.coordinates.x-e.draggable.initialCoordinates.x,y:r.coordinates.y-e.draggable.initialCoordinates.y}}};case pa.DragEnd:case pa.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case pa.RegisterDroppable:{const{element:a}=r,{id:s}=a,n=new Ru(e.droppable.containers);return n.set(s,a),{...e,droppable:{...e.droppable,containers:n}}}case pa.SetDroppableDisabled:{const{id:a,key:s,disabled:n}=r,i=e.droppable.containers.get(a);if(!i||s!==i.key)return e;const o=new Ru(e.droppable.containers);return o.set(a,{...i,disabled:n}),{...e,droppable:{...e.droppable,containers:o}}}case pa.UnregisterDroppable:{const{id:a,key:s}=r,n=e.droppable.containers.get(a);if(!n||s!==n.key)return e;const i=new Ru(e.droppable.containers);return i.delete(a),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function w7(e){let{disabled:r}=e;const{active:a,activatorEvent:s,draggableNodes:n}=h.useContext(vf),i=Cb(s),o=Cb(a?.id);return h.useEffect(()=>{if(!r&&!s&&i&&o!=null){if(!Zw(i)||document.activeElement===i.target)return;const c=n.get(o);if(!c)return;const{activatorNode:u,node:m}=c;if(!u.current&&!m.current)return;requestAnimationFrame(()=>{for(const g of[u.current,m.current]){if(!g)continue;const f=gU(g);if(f){f.focus();break}}})}},[s,r,n,o,i]),null}function j7(e,r){let{transform:a,...s}=r;return e!=null&&e.length?e.reduce((n,i)=>i({transform:n,...s}),a):a}function N7(e){return h.useMemo(()=>({draggable:{...Mh.draggable,...e?.draggable},droppable:{...Mh.droppable,...e?.droppable},dragOverlay:{...Mh.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function k7(e){let{activeNode:r,measure:a,initialRect:s,config:n=!0}=e;const i=h.useRef(!1),{x:o,y:c}=typeof n=="boolean"?{x:n,y:n}:n;si(()=>{if(!o&&!c||!r){i.current=!1;return}if(i.current||!s)return;const m=r?.node.current;if(!m||m.isConnected===!1)return;const g=a(m),f=fD(g,s);if(o||(f.x=0),c||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const y=xD(m);y&&y.scrollBy({top:f.y,left:f.x})}},[r,o,c,s,a])}const CD=h.createContext({...$n,scaleX:1,scaleY:1});var Eo;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Eo||(Eo={}));const S7=h.memo(function(r){var a,s,n,i;let{id:o,accessibility:c,autoScroll:u=!0,children:m,sensors:g=f7,collisionDetection:f=AU,measuring:y,modifiers:p,...b}=r;const j=h.useReducer(b7,void 0,v7),[v,N]=j,[k,E]=vU(),[C,S]=h.useState(Eo.Uninitialized),P=C===Eo.Initialized,{draggable:{active:D,nodes:I,translate:H},droppable:{containers:W}}=v,K=D!=null?I.get(D):null,B=h.useRef({initial:null,translated:null}),z=h.useMemo(()=>{var Ut;return D!=null?{id:D,data:(Ut=K?.data)!=null?Ut:x7,rect:B}:null},[D,K]),q=h.useRef(null),[J,ae]=h.useState(null),[ne,re]=h.useState(null),L=qu(b,Object.values(b)),G=jm("DndDescribedBy",o),T=h.useMemo(()=>W.getEnabled(),[W]),_=N7(y),{droppableRects:F,measureDroppableContainers:ee,measuringScheduled:Z}=a7(T,{dragging:P,dependencies:[H.x,H.y],config:_.droppable}),U=t7(I,D),X=h.useMemo(()=>ne?Eb(ne):null,[ne]),Q=Xt(),V=s7(U,_.draggable.measure);k7({activeNode:D!=null?I.get(D):null,config:Q.layoutShiftCompensation,initialRect:V,measure:_.draggable.measure});const ge=B2(U,_.draggable.measure,V),Te=B2(U?U.parentElement:null),xe=h.useRef({activatorEvent:null,active:null,activeNode:U,collisionRect:null,collisions:null,droppableRects:F,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:W,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),qe=W.getNodeFor((a=xe.current.over)==null?void 0:a.id),se=h7({measure:_.dragOverlay.measure}),De=(s=se.nodeRef.current)!=null?s:U,Me=P?(n=se.rect)!=null?n:ge:null,Ct=!!(se.nodeRef.current&&se.rect),Dt=o7(Ct?null:ge),Mt=kD(De?Is(De):null),jt=l7(P?qe??U:null),le=m7(jt),Xe=j7(p,{transform:{x:H.x-Dt.x,y:H.y-Dt.y,scaleX:1,scaleY:1},activatorEvent:ne,active:z,activeNodeRect:ge,containerNodeRect:Te,draggingNodeRect:Me,over:xe.current.over,overlayNodeRect:se.rect,scrollableAncestors:jt,scrollableAncestorRects:le,windowRect:Mt}),Ke=X?Uc(X,H):null,Ne=c7(jt),Nt=H2(Ne),_t=H2(Ne,[ge]),vt=Uc(Xe,Nt),Ot=Me?DU(Me,Xe):null,R=z&&Ot?f({active:z,collisionRect:Ot,droppableRects:F,droppableContainers:T,pointerCoordinates:Ke}):null,ce=hD(R,"id"),[de,ue]=h.useState(null),Pe=Ct?Xe:Uc(Xe,_t),pe=PU(Pe,(i=de?.rect)!=null?i:null,ge),ve=h.useRef(null),Ve=h.useCallback((Ut,Ft)=>{let{sensor:lr,options:ia}=Ft;if(q.current==null)return;const pr=I.get(q.current);if(!pr)return;const cr=Ut.nativeEvent,Vr=new lr({active:q.current,activeNode:pr,event:cr,options:ia,context:xe,onAbort(rr){if(!I.get(rr))return;const{onDragAbort:Nr}=L.current,Fr={id:rr};Nr?.(Fr),k({type:"onDragAbort",event:Fr})},onPending(rr,jr,Nr,Fr){if(!I.get(rr))return;const{onDragPending:Ue}=L.current,gt={id:rr,constraint:jr,initialCoordinates:Nr,offset:Fr};Ue?.(gt),k({type:"onDragPending",event:gt})},onStart(rr){const jr=q.current;if(jr==null)return;const Nr=I.get(jr);if(!Nr)return;const{onDragStart:Fr}=L.current,fe={activatorEvent:cr,active:{id:jr,data:Nr.data,rect:B}};Do.unstable_batchedUpdates(()=>{Fr?.(fe),S(Eo.Initializing),N({type:pa.DragStart,initialCoordinates:rr,active:jr}),k({type:"onDragStart",event:fe}),ae(ve.current),re(cr)})},onMove(rr){N({type:pa.DragMove,coordinates:rr})},onEnd:Ca(pa.DragEnd),onCancel:Ca(pa.DragCancel)});ve.current=Vr;function Ca(rr){return async function(){const{active:Nr,collisions:Fr,over:fe,scrollAdjustedTranslate:Ue}=xe.current;let gt=null;if(Nr&&Ue){const{cancelDrop:ft}=L.current;gt={activatorEvent:cr,active:Nr,collisions:Fr,delta:Ue,over:fe},rr===pa.DragEnd&&typeof ft=="function"&&await Promise.resolve(ft(gt))&&(rr=pa.DragCancel)}q.current=null,Do.unstable_batchedUpdates(()=>{N({type:rr}),S(Eo.Uninitialized),ue(null),ae(null),re(null),ve.current=null;const ft=rr===pa.DragEnd?"onDragEnd":"onDragCancel";if(gt){const Et=L.current[ft];Et?.(gt),k({type:ft,event:gt})}})}}},[I]),Ge=h.useCallback((Ut,Ft)=>(lr,ia)=>{const pr=lr.nativeEvent,cr=I.get(ia);if(q.current!==null||!cr||pr.dndKit||pr.defaultPrevented)return;const Vr={active:cr};Ut(lr,Ft.options,Vr)===!0&&(pr.dndKit={capturedBy:Ft.sensor},q.current=ia,Ve(lr,Ft))},[I,Ve]),$t=r7(g,Ge);d7(g),si(()=>{ge&&C===Eo.Initializing&&S(Eo.Initialized)},[ge,C]),h.useEffect(()=>{const{onDragMove:Ut}=L.current,{active:Ft,activatorEvent:lr,collisions:ia,over:pr}=xe.current;if(!Ft||!lr)return;const cr={active:Ft,activatorEvent:lr,collisions:ia,delta:{x:vt.x,y:vt.y},over:pr};Do.unstable_batchedUpdates(()=>{Ut?.(cr),k({type:"onDragMove",event:cr})})},[vt.x,vt.y]),h.useEffect(()=>{const{active:Ut,activatorEvent:Ft,collisions:lr,droppableContainers:ia,scrollAdjustedTranslate:pr}=xe.current;if(!Ut||q.current==null||!Ft||!pr)return;const{onDragOver:cr}=L.current,Vr=ia.get(ce),Ca=Vr&&Vr.rect.current?{id:Vr.id,rect:Vr.rect.current,data:Vr.data,disabled:Vr.disabled}:null,rr={active:Ut,activatorEvent:Ft,collisions:lr,delta:{x:pr.x,y:pr.y},over:Ca};Do.unstable_batchedUpdates(()=>{ue(Ca),cr?.(rr),k({type:"onDragOver",event:rr})})},[ce]),si(()=>{xe.current={activatorEvent:ne,active:z,activeNode:U,collisionRect:Ot,collisions:R,droppableRects:F,draggableNodes:I,draggingNode:De,draggingNodeRect:Me,droppableContainers:W,over:de,scrollableAncestors:jt,scrollAdjustedTranslate:vt},B.current={initial:Me,translated:Ot}},[z,U,R,Ot,I,De,Me,F,W,de,jt,vt]),ZU({...Q,delta:H,draggingRect:Ot,pointerCoordinates:Ke,scrollableAncestors:jt,scrollableAncestorRects:le});const Qt=h.useMemo(()=>({active:z,activeNode:U,activeNodeRect:ge,activatorEvent:ne,collisions:R,containerNodeRect:Te,dragOverlay:se,draggableNodes:I,droppableContainers:W,droppableRects:F,over:de,measureDroppableContainers:ee,scrollableAncestors:jt,scrollableAncestorRects:le,measuringConfiguration:_,measuringScheduled:Z,windowRect:Mt}),[z,U,ge,ne,R,Te,se,I,W,F,de,ee,jt,le,_,Z,Mt]),qt=h.useMemo(()=>({activatorEvent:ne,activators:$t,active:z,activeNodeRect:ge,ariaDescribedById:{draggable:G},dispatch:N,draggableNodes:I,over:de,measureDroppableContainers:ee}),[ne,$t,z,ge,N,G,I,de,ee]);return Fe.createElement(uD.Provider,{value:E},Fe.createElement(vf.Provider,{value:qt},Fe.createElement(SD.Provider,{value:Qt},Fe.createElement(CD.Provider,{value:pe},m)),Fe.createElement(w7,{disabled:c?.restoreFocus===!1})),Fe.createElement(jU,{...c,hiddenTextDescribedById:G}));function Xt(){const Ut=J?.autoScrollEnabled===!1,Ft=typeof u=="object"?u.enabled===!1:u===!1,lr=P&&!Ut&&!Ft;return typeof u=="object"?{...u,enabled:lr}:{enabled:lr}}}),C7=h.createContext(null),V2="button",E7="Draggable";function A7(e){let{id:r,data:a,disabled:s=!1,attributes:n}=e;const i=jm(E7),{activators:o,activatorEvent:c,active:u,activeNodeRect:m,ariaDescribedById:g,draggableNodes:f,over:y}=h.useContext(vf),{role:p=V2,roleDescription:b="draggable",tabIndex:j=0}=n??{},v=u?.id===r,N=h.useContext(v?CD:C7),[k,E]=t0(),[C,S]=t0(),P=u7(o,r),D=qu(a);si(()=>(f.set(r,{id:r,key:i,node:k,activatorNode:C,data:D}),()=>{const H=f.get(r);H&&H.key===i&&f.delete(r)}),[f,r]);const I=h.useMemo(()=>({role:p,tabIndex:j,"aria-disabled":s,"aria-pressed":v&&p===V2?!0:void 0,"aria-roledescription":b,"aria-describedby":g.draggable}),[s,p,j,v,b,g.draggable]);return{active:u,activatorEvent:c,activeNodeRect:m,attributes:I,isDragging:v,listeners:s?void 0:P,node:k,over:y,setNodeRef:E,setActivatorNodeRef:S,transform:N}}function P7(){return h.useContext(SD)}const T7="Droppable",D7={timeout:25};function O7(e){let{data:r,disabled:a=!1,id:s,resizeObserverConfig:n}=e;const i=jm(T7),{active:o,dispatch:c,over:u,measureDroppableContainers:m}=h.useContext(vf),g=h.useRef({disabled:a}),f=h.useRef(!1),y=h.useRef(null),p=h.useRef(null),{disabled:b,updateMeasurementsFor:j,timeout:v}={...D7,...n},N=qu(j??s),k=h.useCallback(()=>{if(!f.current){f.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{m(Array.isArray(N.current)?N.current:[N.current]),p.current=null},v)},[v]),E=yf({callback:k,disabled:b||!o}),C=h.useCallback((I,H)=>{E&&(H&&(E.unobserve(H),f.current=!1),I&&E.observe(I))},[E]),[S,P]=t0(C),D=qu(r);return h.useEffect(()=>{!E||!S.current||(E.disconnect(),f.current=!1,E.observe(S.current))},[S,E]),h.useEffect(()=>(c({type:pa.RegisterDroppable,element:{id:s,key:i,disabled:a,node:S,rect:y,data:D}}),()=>c({type:pa.UnregisterDroppable,key:i,id:s})),[s]),h.useEffect(()=>{a!==g.current.disabled&&(c({type:pa.SetDroppableDisabled,id:s,key:i,disabled:a}),g.current.disabled=a)},[s,i,a,c]),{active:o,rect:y,isOver:u?.id===s,node:S,over:u,setNodeRef:P}}function aj(e,r,a){const s=e.slice();return s.splice(a<0?s.length+a:a,0,s.splice(r,1)[0]),s}function I7(e,r){return e.reduce((a,s,n)=>{const i=r.get(s);return i&&(a[n]=i),a},Array(e.length))}function oh(e){return e!==null&&e>=0}function L7(e,r){if(e===r)return!0;if(e.length!==r.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==r[a])return!1;return!0}function R7(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const ED=e=>{let{rects:r,activeIndex:a,overIndex:s,index:n}=e;const i=aj(r,s,a),o=r[n],c=i[n];return!c||!o?null:{x:c.left-o.left,y:c.top-o.top,scaleX:c.width/o.width,scaleY:c.height/o.height}},lh={scaleX:1,scaleY:1},M7=e=>{var r;let{activeIndex:a,activeNodeRect:s,index:n,rects:i,overIndex:o}=e;const c=(r=i[a])!=null?r:s;if(!c)return null;if(n===a){const m=i[o];return m?{x:0,y:a<o?m.top+m.height-(c.top+c.height):m.top-c.top,...lh}:null}const u=_7(i,n,a);return n>a&&n<=o?{x:0,y:-c.height-u,...lh}:n<a&&n>=o?{x:0,y:c.height+u,...lh}:{x:0,y:0,...lh}};function _7(e,r,a){const s=e[r],n=e[r-1],i=e[r+1];return s?a<r?n?s.top-(n.top+n.height):i?i.top-(s.top+s.height):0:i?i.top-(s.top+s.height):n?s.top-(n.top+n.height):0:0}const AD="Sortable",PD=Fe.createContext({activeIndex:-1,containerId:AD,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ED,disabled:{draggable:!1,droppable:!1}});function $7(e){let{children:r,id:a,items:s,strategy:n=ED,disabled:i=!1}=e;const{active:o,dragOverlay:c,droppableRects:u,over:m,measureDroppableContainers:g}=P7(),f=jm(AD,a),y=c.rect!==null,p=h.useMemo(()=>s.map(P=>typeof P=="object"&&"id"in P?P.id:P),[s]),b=o!=null,j=o?p.indexOf(o.id):-1,v=m?p.indexOf(m.id):-1,N=h.useRef(p),k=!L7(p,N.current),E=v!==-1&&j===-1||k,C=R7(i);si(()=>{k&&b&&g(p)},[k,p,b,g]),h.useEffect(()=>{N.current=p},[p]);const S=h.useMemo(()=>({activeIndex:j,containerId:f,disabled:C,disableTransforms:E,items:p,overIndex:v,useDragOverlay:y,sortedRects:I7(p,u),strategy:n}),[j,f,C.draggable,C.droppable,E,p,v,u,y,n]);return Fe.createElement(PD.Provider,{value:S},r)}const U7=e=>{let{id:r,items:a,activeIndex:s,overIndex:n}=e;return aj(a,s,n).indexOf(r)},F7=e=>{let{containerId:r,isSorting:a,wasDragging:s,index:n,items:i,newIndex:o,previousItems:c,previousContainerId:u,transition:m}=e;return!m||!s||c!==i&&n===o?!1:a?!0:o!==n&&r===u},z7={duration:200,easing:"ease"},TD="transform",B7=Wu.Transition.toString({property:TD,duration:0,easing:"linear"}),q7={roleDescription:"sortable"};function H7(e){let{disabled:r,index:a,node:s,rect:n}=e;const[i,o]=h.useState(null),c=h.useRef(a);return si(()=>{if(!r&&a!==c.current&&s.current){const u=n.current;if(u){const m=cd(s.current,{ignoreTransform:!0}),g={x:u.left-m.left,y:u.top-m.top,scaleX:u.width/m.width,scaleY:u.height/m.height};(g.x||g.y)&&o(g)}}a!==c.current&&(c.current=a)},[r,a,s,n]),h.useEffect(()=>{i&&o(null)},[i]),i}function W7(e){let{animateLayoutChanges:r=F7,attributes:a,disabled:s,data:n,getNewIndex:i=U7,id:o,strategy:c,resizeObserverConfig:u,transition:m=z7}=e;const{items:g,containerId:f,activeIndex:y,disabled:p,disableTransforms:b,sortedRects:j,overIndex:v,useDragOverlay:N,strategy:k}=h.useContext(PD),E=V7(s,p),C=g.indexOf(o),S=h.useMemo(()=>({sortable:{containerId:f,index:C,items:g},...n}),[f,n,C,g]),P=h.useMemo(()=>g.slice(g.indexOf(o)),[g,o]),{rect:D,node:I,isOver:H,setNodeRef:W}=O7({id:o,data:S,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:P,...u}}),{active:K,activatorEvent:B,activeNodeRect:z,attributes:q,setNodeRef:J,listeners:ae,isDragging:ne,over:re,setActivatorNodeRef:L,transform:G}=A7({id:o,data:S,attributes:{...q7,...a},disabled:E.draggable}),T=cU(W,J),_=!!K,F=_&&!b&&oh(y)&&oh(v),ee=!N&&ne,Z=ee&&F?G:null,X=F?Z??(c??k)({rects:j,activeNodeRect:z,activeIndex:y,overIndex:v,index:C}):null,Q=oh(y)&&oh(v)?i({id:o,items:g,activeIndex:y,overIndex:v}):C,V=K?.id,ge=h.useRef({activeId:V,items:g,newIndex:Q,containerId:f}),Te=g!==ge.current.items,xe=r({active:K,containerId:f,isDragging:ne,isSorting:_,id:o,index:C,items:g,newIndex:ge.current.newIndex,previousItems:ge.current.items,previousContainerId:ge.current.containerId,transition:m,wasDragging:ge.current.activeId!=null}),qe=H7({disabled:!xe,index:C,node:I,rect:D});return h.useEffect(()=>{_&&ge.current.newIndex!==Q&&(ge.current.newIndex=Q),f!==ge.current.containerId&&(ge.current.containerId=f),g!==ge.current.items&&(ge.current.items=g)},[_,Q,f,g]),h.useEffect(()=>{if(V===ge.current.activeId)return;if(V!=null&&ge.current.activeId==null){ge.current.activeId=V;return}const De=setTimeout(()=>{ge.current.activeId=V},50);return()=>clearTimeout(De)},[V]),{active:K,activeIndex:y,attributes:q,data:S,rect:D,index:C,newIndex:Q,items:g,isOver:H,isSorting:_,isDragging:ne,listeners:ae,node:I,overIndex:v,over:re,setNodeRef:T,setActivatorNodeRef:L,setDroppableNodeRef:W,setDraggableNodeRef:J,transform:qe??X,transition:se()};function se(){if(qe||Te&&ge.current.newIndex===C)return B7;if(!(ee&&!Zw(B)||!m)&&(_||xe))return Wu.Transition.toString({...m,property:TD})}}function V7(e,r){var a,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(a=e?.draggable)!=null?a:r.draggable,droppable:(s=e?.droppable)!=null?s:r.droppable}}function s0(e){if(!e)return!1;const r=e.data.current;return!!(r&&"sortable"in r&&typeof r.sortable=="object"&&"containerId"in r.sortable&&"items"in r.sortable&&"index"in r.sortable)}const K7=[Vt.Down,Vt.Right,Vt.Up,Vt.Left],G7=(e,r)=>{let{context:{active:a,collisionRect:s,droppableRects:n,droppableContainers:i,over:o,scrollableAncestors:c}}=r;if(K7.includes(e.code)){if(e.preventDefault(),!a||!s)return;const u=[];i.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const y=n.get(f.id);if(y)switch(e.code){case Vt.Down:s.top<y.top&&u.push(f);break;case Vt.Up:s.top>y.top&&u.push(f);break;case Vt.Left:s.left>y.left&&u.push(f);break;case Vt.Right:s.left<y.left&&u.push(f);break}});const m=CU({collisionRect:s,droppableRects:n,droppableContainers:u});let g=hD(m,"id");if(g===o?.id&&m.length>1&&(g=m[1].id),g!=null){const f=i.get(a.id),y=i.get(g),p=y?n.get(y.id):null,b=y?.node.current;if(b&&p&&f&&y){const v=pf(b).some((P,D)=>c[D]!==P),N=DD(f,y),k=Y7(f,y),E=v||!N?{x:0,y:0}:{x:k?s.width-p.width:0,y:k?s.height-p.height:0},C={x:p.left,y:p.top};return E.x&&E.y?C:Hu(C,E)}}}};function DD(e,r){return!s0(e)||!s0(r)?!1:e.data.current.sortable.containerId===r.data.current.sortable.containerId}function Y7(e,r){return!s0(e)||!s0(r)||!DD(e,r)?!1:e.data.current.sortable.index<r.data.current.sortable.index}const Q7=({id:e,item:r,isActive:a,sidebarCollapsed:s,hoveredItem:n,onHover:i,onNavigate:o,activeHref:c})=>{const[u,m]=Fe.useState(!1),{attributes:g,listeners:f,setNodeRef:y,transform:p,transition:b,isDragging:j}=W7({id:e}),v=r.children&&r.children.length>0,N=v&&r.children?.some(P=>c===P.href);Fe.useEffect(()=>{N&&m(!0)},[N]);const k={transform:Wu.Transform.toString(p),transition:b,opacity:j?.5:1},E=r.icon,C=n===r.name,S=P=>{j||(r.children&&r.children.length>0&&!s?(P.preventDefault(),m(!u)):o(r.href))};return s?t.jsx("div",{ref:y,style:k,...g,...f,className:"relative",children:t.jsx("div",{className:`flex items-center justify-center h-11 md:h-10 px-3 md:px-2 rounded-lg text-sm font-medium cursor-pointer transition-colors group ${a||N?"bg-weconnect-red text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800"} ${j?"shadow-lg ring-2 ring-blue-400 dark:ring-blue-600":""}`,onMouseEnter:()=>i(r.name),onMouseLeave:()=>i(null),onClick:P=>S(P),children:t.jsx(E,{size:20,className:"md:w-[18px] md:h-[18px]"})})}):t.jsxs("div",{ref:y,style:k,className:"relative",children:[t.jsxs("div",{className:`flex items-center h-12 md:h-11 rounded-lg text-sm font-medium transition-colors group justify-between ${a||N?"bg-weconnect-red text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800"} ${j?"shadow-lg ring-2 ring-blue-400 dark:ring-blue-600":""}`,onMouseEnter:()=>i(r.name),onMouseLeave:()=>i(null),children:[t.jsx("div",{...g,...f,className:"flex items-center justify-center w-6 h-12 md:h-11 cursor-grab active:cursor-grabbing px-1",title:"Drag to reorder",children:t.jsx(wb,{size:14,className:"text-gray-400 dark:text-gray-500 opacity-0 group-hover:opacity-60 transition-opacity"})}),t.jsxs("div",{className:"flex items-center cursor-pointer flex-1 justify-between h-12 md:h-11 px-3 md:px-2",onClick:P=>S(P),children:[t.jsxs("div",{className:"flex items-center gap-3 md:gap-2.5",children:[t.jsx(E,{size:20,className:"md:w-[18px] md:h-[18px]"}),t.jsx("span",{className:"font-medium text-base md:text-sm leading-none",children:r.name})]}),t.jsxs("div",{className:"flex items-center gap-2 h-12 md:h-11",children:[r.badge&&r.badge!=="0"&&t.jsx("span",{className:`min-w-[20px] h-5 px-1.5 inline-flex items-center justify-center text-[11px] font-semibold rounded-full text-white leading-none ${r.badgeColor}`,children:r.badge}),v&&t.jsx("div",{className:"text-gray-400 dark:text-gray-500 group-hover:text-current transition-colors",children:u?t.jsx(xn,{size:16}):t.jsx(Vc,{size:16})})]})]})]}),v&&u&&!s&&t.jsx("div",{className:"mt-1 ml-6 space-y-1",children:r.children?.map(P=>t.jsx("div",{onClick:()=>o(P.href),className:`flex items-center h-10 px-3 md:px-2 rounded-lg text-sm font-medium transition-colors cursor-pointer ${c===P.href?"bg-weconnect-red/10 text-weconnect-red font-bold":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-800 hover:text-gray-900 dark:hover:text-white"}`,children:t.jsx("span",{className:"truncate",children:P.name})},P.id))}),s&&C&&t.jsxs("div",{className:"absolute left-full ml-3 px-3 py-2 bg-slate-900 dark:bg-slate-800 text-white text-sm rounded-lg shadow-lg z-50 whitespace-nowrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium",children:r.name}),r.badge&&r.badge!=="0"&&t.jsx("span",{className:`min-w-[20px] h-5 px-1.5 inline-flex items-center justify-center text-[11px] font-semibold rounded-full text-white leading-none ${r.badgeColor}`,children:r.badge})]}),t.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1",children:t.jsx("div",{className:"w-2 h-2 bg-slate-900 dark:bg-slate-800 rotate-45"})})]})]})},X7=({navigationItems:e,activeHref:r,sidebarCollapsed:a,hoveredItem:s,onHover:n,onNavigate:i,setSidebarOpen:o})=>{const{menuOrder:c,setMenuOrder:u}=aD(),m=NU(L2(rj,{activationConstraint:{distance:8}}),L2(ej,{coordinateGetter:G7})),g=Fe.useMemo(()=>{const p=new Map(e.map(j=>[j.id,j])),b=[];return c.forEach(j=>{const v=p.get(j);v&&(b.push(v),p.delete(j))}),p.forEach(j=>{b.push(j)}),b},[e,c]);function f(p){const{active:b,over:j}=p;if(b.id!==j?.id){const v=g.findIndex(E=>E.id===b.id),N=g.findIndex(E=>E.id===j?.id),k=aj(g,v,N).map(E=>E.id);u(k)}}const y=p=>{i(p),o(!1)};return t.jsx(S7,{sensors:m,collisionDetection:SU,onDragEnd:f,children:t.jsx($7,{items:g.map(p=>p.id),strategy:M7,children:t.jsx("div",{className:"space-y-2 md:space-y-1",children:g.map(p=>t.jsx(Q7,{id:p.id,item:p,isActive:r===p.href,sidebarCollapsed:a,hoveredItem:s,onHover:n,onNavigate:y,activeHref:r},p.id))})})})},Z7=(e,r)=>{const[a,s]=h.useState(e);return h.useEffect(()=>{const n=setTimeout(()=>{s(e)},r);return()=>{clearTimeout(n)}},[e,r]),a},dd=(e="",r=300)=>{const[a,s]=h.useState(e),[n,i]=h.useState(e),[o,c]=h.useState(!1);return h.useEffect(()=>{if(a===""){i(""),c(!1);return}c(!0);const g=setTimeout(()=>{i(a),c(!1)},r);return()=>{clearTimeout(g)}},[a,r]),{searchValue:a,debouncedSearchValue:n,setSearch:g=>{s(g)},clearSearch:()=>{s("")},isSearching:o}},J7=()=>{const[e,r]=h.useState(""),[a,s]=h.useState(!1),[n,i]=h.useState(!1),[o,c]=h.useState([]),u=Z7(e,300),m=h.useRef(null),g=h.useRef(null),f=mt();h.useEffect(()=>{const p=b=>{g.current&&(g.current.contains(b.target)||s(!1))};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),h.useEffect(()=>{let p=!0;return(async()=>{const j=u.trim();if(j.length<2){c([]),i(!1);return}i(!0);try{const[v,N]=await Promise.all([Gt.getLeads({page:1,limit:5,search:j}).catch(()=>({data:{leads:[]}})),aa.getDeals(1,5,j).catch(()=>({data:{deals:[]}}))]);if(!p)return;const k=(v?.data?.leads??[]).map(C=>({id:C.id,type:"lead",title:[C.firstName,C.lastName].filter(Boolean).join(" ")||C.email||`Lead #${C.id}`,subtitle:C.email||C.phone||"",path:`/leads/${C.id}`,icon:t.jsx(xt,{className:"w-4 h-4"})})),E=(N?.data?.deals??[]).map(C=>({id:C.id,type:"deal",title:C.title||`Deal #${C.id}`,subtitle:C.value!=null&&C.currency?`${C.value} ${C.currency}`:C.status,path:`/deals/${C.id}`,icon:t.jsx(Qr,{className:"w-4 h-4"})}));c([...k,...E])}finally{p&&i(!1)}})(),()=>{p=!1}},[u]);const y=()=>{const p=e.trim();p&&(f(`/search?q=${encodeURIComponent(p)}`),s(!1))};return t.jsxs("div",{ref:g,className:"relative",children:[t.jsx("input",{ref:m,"data-topsearch-input":!0,type:"text",value:e,onFocus:()=>s(!0),onChange:p=>r(p.target.value),onKeyDown:p=>{p.key==="Enter"&&y()},placeholder:"Search leads, contacts, deals...",className:"w-full h-11 pl-11 pr-4 border border-gray-200 dark:border-slate-700 rounded-full focus:outline-none focus:ring-2 focus:ring-brand-blue focus:border-transparent bg-white dark:bg-slate-800 placeholder-gray-500 dark:placeholder-gray-400",style:{color:"#111827"},autoComplete:"off",spellCheck:!1}),t.jsx(ma,{className:"pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500"}),a&&u.trim().length>=2&&t.jsxs("div",{className:"absolute z-50 mt-2 w-full max-w-xl bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl shadow-2xl overflow-hidden",children:[t.jsx("div",{className:"max-h-80 overflow-y-auto",children:n?t.jsx("div",{className:"px-4 py-6 text-sm text-gray-500 dark:text-gray-400",children:"Searching..."}):o.length===0?t.jsx("div",{className:"px-4 py-6 text-sm text-gray-500 dark:text-gray-400",children:"No results"}):t.jsx("ul",{className:"p-1",children:o.map(p=>t.jsx("li",{children:t.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2.5 text-left rounded-lg hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors",onClick:()=>f(p.path),children:[t.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:p.icon}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:p.title}),p.subtitle&&t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:p.subtitle})]}),t.jsx("div",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gray-100 dark:bg-slate-800 text-gray-600 dark:text-gray-300 capitalize",children:p.type})]})},`${p.type}-${p.id}`))})}),t.jsx("div",{className:"px-3 py-2 text-[11px] text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-slate-800",children:"Press Enter to view full results"})]})]})},me=Fe.forwardRef(({className:e="",variant:r="PRIMARY",size:a="MD",loading:s=!1,loadingText:n,icon:i,iconPosition:o="left",fullWidth:c=!1,disabled:u,children:m,...g},f)=>{const y="inline-flex items-center justify-center font-semibold rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",p={PRIMARY:"bg-weconnect-red text-white hover:bg-red-500 focus:ring-red-400 shadow-md ",SECONDARY:"bg-white dark:bg-slate-800 text-gray-900 dark:text-white hover:bg-gray-50 dark:hover:bg-slate-700 focus:ring-gray-300 shadow border border-gray-200 dark:border-slate-600",OUTLINE:"border border-weconnect-red text-weconnect-red hover:bg-weconnect-red hover:text-white focus:ring-red-400 shadow-sm",GHOST:"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800 focus:ring-gray-300",DESTRUCTIVE:"bg-gradient-to-r from-red-500 to-red-600 text-white hover:from-red-600 hover:to-red-700 focus:ring-red-400 shadow-lg hover:shadow-xl"},b={SM:"text-xs px-3 h-9",MD:"text-sm px-5 h-11",LG:"text-base px-6 h-12",XL:"text-lg px-8 h-14"},j={SM:"w-3 h-3",MD:"w-4 h-4",LG:"w-5 h-5",XL:"w-6 h-6"},v=[y,p[r],b[a],c&&"w-full",e].filter(Boolean).join(" "),N=u||s,k=s?t.jsx(Ii,{className:`${j[a]} animate-spin`}):i,E=s&&n?n:m;return t.jsxs("button",{ref:f,className:`${v} gap-2`,disabled:N,style:{display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle"},...g,children:[k&&o==="left"&&t.jsx("span",{className:"inline-flex items-center justify-center shrink-0",style:{lineHeight:1,display:"inline-flex",alignItems:"center",verticalAlign:"middle"},children:k}),E&&t.jsx("span",{className:"inline-flex items-center",style:{lineHeight:1,display:"inline-flex",alignItems:"center",verticalAlign:"middle"},children:E}),k&&o==="right"&&t.jsx("span",{className:"inline-flex items-center justify-center shrink-0",style:{lineHeight:1,display:"inline-flex",alignItems:"center",verticalAlign:"middle"},children:k})]})});me.displayName="Button";const Ee=Fe.forwardRef(({className:e="",variant:r="DEFAULT",padding:a="md",children:s,...n},i)=>{const o="rounded-xl border transition-shadow duration-200",c={[ah.DEFAULT]:"bg-white dark:bg-slate-800 border-gray-100 dark:border-slate-700 shadow-sm hover:shadow-md",[ah.ELEVATED]:"bg-white dark:bg-slate-800 border-gray-100 dark:border-slate-700 shadow-md hover:shadow-lg",[ah.OUTLINED]:"bg-white/60 dark:bg-slate-800/60 backdrop-blur-sm border border-gray-200 dark:border-slate-600",[ah.GRADIENT]:"bg-gradient-to-br from-white via-gray-50 to-gray-100 dark:from-slate-800 dark:via-slate-900 dark:to-slate-900 border-gray-200 dark:border-slate-700 shadow-sm hover:shadow-md"},u={none:"",sm:"p-4",md:"p-6",lg:"p-8",xl:"p-12"},m=[o,c[r],u[a],e].filter(Boolean).join(" ");return t.jsx("div",{ref:i,className:m,...n,children:s})});Ee.displayName="Card";const kt=Fe.forwardRef(({className:e="",children:r,...a},s)=>t.jsx("div",{ref:s,className:`pb-6 border-b border-gray-100 dark:border-slate-700 ${e}`,...a,children:r}));kt.displayName="CardHeader";const tt=Fe.forwardRef(({className:e="",children:r,...a},s)=>t.jsx("div",{ref:s,className:`py-6 ${e}`,...a,children:r}));tt.displayName="CardContent";const e8=Fe.forwardRef(({className:e="",children:r,...a},s)=>t.jsx("div",{ref:s,className:`pt-6 border-t border-gray-100 dark:border-slate-700 ${e}`,...a,children:r}));e8.displayName="CardFooter";const Lc=Fe.forwardRef(({className:e="",label:r,error:a,success:s,helperText:n,leftIcon:i,rightIcon:o,showPasswordToggle:c=!1,fullWidth:u=!0,variant:m="outlined",divided:g=!1,type:f="text",disabled:y,...p},b)=>{const[j,v]=Fe.useState(!1),[N,k]=Fe.useState(f),[E,C]=Fe.useState(!1),[S,P]=Fe.useState(!1);Fe.useEffect(()=>{c&&f==="password"&&k(j?"text":"password")},[j,c,f]);const D="transition-all duration-200 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed font-medium",I={default:"border-0 border-b-2 bg-transparent rounded-none px-0 py-3",outlined:"border-2 rounded-xl px-4 py-3 bg-white dark:bg-gray-800",filled:"border-0 rounded-xl px-4 py-3 bg-gray-50 dark:bg-gray-700"},H=()=>a?"border-weconnect-red focus:border-weconnect-red text-weconnect-red":s?"border-brand-green focus:border-brand-green text-brand-green":y?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":E?"border-brand-blue shadow-sm":S?"border-gray-400":"border-gray-300",W=[D,I[m],H(),u&&"w-full",i&&!g&&"pl-12",i&&g&&"pl-16",(o||c||a||s)&&"pr-12","text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",e].filter(Boolean).join(" "),K=()=>{v(!j)},z=c&&f==="password"?t.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 transition-colors",onClick:K,tabIndex:-1,children:j?t.jsx(pn,{className:"h-5 w-5"}):t.jsx(Bt,{className:"h-5 w-5"})}):a?t.jsx(ur,{className:"h-5 w-5 text-weconnect-red"}):s?t.jsx(ct,{className:"h-5 w-5 text-brand-green"}):o;return t.jsxs("div",{className:u?"w-full":"",children:[r&&t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:r}),t.jsxs("div",{className:"relative",onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),children:[i&&t.jsx("div",{className:`absolute inset-y-0 left-0 flex items-center pointer-events-none ${g?"pl-4 border-r border-gray-300 w-12 justify-center":"pl-4"}`,children:t.jsx("div",{className:"text-gray-400",children:i})}),t.jsx("input",{ref:b,type:N,className:W,disabled:y,onFocus:()=>C(!0),onBlur:()=>C(!1),...p}),z&&t.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:z})]}),(a||s||n)&&t.jsxs("div",{className:"mt-2 text-sm",children:[a&&t.jsxs("div",{className:"flex items-center text-weconnect-red",children:[t.jsx(ur,{className:"h-4 w-4 mr-1"}),a]}),s&&!a&&t.jsxs("div",{className:"flex items-center text-brand-green",children:[t.jsx(ct,{className:"h-4 w-4 mr-1"}),s]}),n&&!a&&!s&&t.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:n})]})]})});Lc.displayName="Input";const K2=({children:e,className:r="",size:a="full",centered:s=!0})=>{const n={sm:"max-w-screen-sm",md:"max-w-screen-md",lg:"max-w-screen-lg",xl:"max-w-screen-xl",full:"max-w-full"};return t.jsx("div",{className:`${n[a]} ${s?"mx-auto":""} px-4 ${r}`,children:e})},t8=({size:e="md",className:r="",variant:a="spinner"})=>{const s={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"};return a==="dots"?t.jsxs("div",{className:`flex space-x-2 ${r}`,children:[t.jsx("div",{className:"w-2 h-2 bg-weconnect-red rounded-full animate-bounce",style:{animationDelay:"0ms"}}),t.jsx("div",{className:"w-2 h-2 bg-weconnect-red rounded-full animate-bounce",style:{animationDelay:"150ms"}}),t.jsx("div",{className:"w-2 h-2 bg-weconnect-red rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}):a==="pulse"?t.jsx("div",{className:`rounded-full bg-weconnect-red animate-pulse ${s[e]} ${r}`}):t.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 dark:border-gray-600 border-t-weconnect-red ${s[e]} ${r}`})},Nn=({message:e="Loading..."})=>t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 dark:bg-slate-950",children:[t.jsx(t8,{size:"xl",className:"mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:e})]}),Qn={async getNotifications(e){return(await oe.get("/notifications",{params:e})).data.data},async getUnreadCount(){return(await oe.get("/notifications/unread-count")).data.data},async markAsRead(e){return(await oe.patch(`/notifications/${e}/read`)).data},async markAllAsRead(){return(await oe.patch("/notifications/mark-all-read")).data},async deleteNotification(e){return(await oe.delete(`/notifications/${e}`)).data},async getPreferences(){return(await oe.get("/notifications/preferences")).data.data},async updatePreferences(e){const r={inAppEnabled:e.inAppEnabled,emailEnabled:e.emailEnabled,soundEnabled:e.soundEnabled,preferences:e.preferences,doNotDisturbStart:e.doNotDisturbStart,doNotDisturbEnd:e.doNotDisturbEnd};return(await oe.patch("/notifications/preferences",r)).data},connectToStream(e,r){const a=localStorage.getItem(At.AUTH_TOKEN)||localStorage.getItem("token");if(!a)return console.error("No token found for SSE connection"),null;const s=Vo;let n;s.startsWith("http")?n=`${s.replace(/\/$/,"")}/notifications/stream?token=${encodeURIComponent(a)}`:n=`${window.location.origin+s.replace(/\/$/,"")}/notifications/stream?token=${encodeURIComponent(a)}`;const i=new EventSource(n,{withCredentials:!0});return i.onmessage=o=>{try{const c=JSON.parse(o.data);c.type==="connected"||c.type==="notification"&&e(c.notification)}catch(c){console.error("Error parsing notification:",c)}},i.onerror=o=>{console.error("SSE connection error:",o),r&&r(o)},i},playNotificationSound(){try{const e=new Audio("/notification-sound.mp3");e.volume=.5,e.play().catch(r=>{console.error("Failed to play notification sound:",r)})}catch(e){console.error("Error creating audio:",e)}}};function n0(e){"@babel/helpers - typeof";return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},n0(e)}function Ul(e){if(e===null||e===!0||e===!1)return NaN;var r=Number(e);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}function Lr(e,r){if(r.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+r.length+" present")}function Cr(e){Lr(1,arguments);var r=Object.prototype.toString.call(e);return e instanceof Date||n0(e)==="object"&&r==="[object Date]"?new Date(e.getTime()):typeof e=="number"||r==="[object Number]"?new Date(e):((typeof e=="string"||r==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function r8(e,r){Lr(2,arguments);var a=Cr(e).getTime(),s=Ul(r);return new Date(a+s)}var a8={};function Nm(){return a8}function Db(e){var r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),e.getTime()-r.getTime()}function _h(e,r){Lr(2,arguments);var a=Cr(e),s=Cr(r),n=a.getTime()-s.getTime();return n<0?-1:n>0?1:n}function s8(e){return Lr(1,arguments),e instanceof Date||n0(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function n8(e){if(Lr(1,arguments),!s8(e)&&typeof e!="number")return!1;var r=Cr(e);return!isNaN(Number(r))}function i8(e,r){Lr(2,arguments);var a=Cr(e),s=Cr(r),n=a.getFullYear()-s.getFullYear(),i=a.getMonth()-s.getMonth();return n*12+i}function o8(e,r){return Lr(2,arguments),Cr(e).getTime()-Cr(r).getTime()}var l8={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(r){return r<0?Math.ceil(r):Math.floor(r)}},c8="trunc";function d8(e){return l8[c8]}function u8(e){Lr(1,arguments);var r=Cr(e);return r.setHours(23,59,59,999),r}function m8(e){Lr(1,arguments);var r=Cr(e),a=r.getMonth();return r.setFullYear(r.getFullYear(),a+1,0),r.setHours(23,59,59,999),r}function g8(e){Lr(1,arguments);var r=Cr(e);return u8(r).getTime()===m8(r).getTime()}function h8(e,r){Lr(2,arguments);var a=Cr(e),s=Cr(r),n=_h(a,s),i=Math.abs(i8(a,s)),o;if(i<1)o=0;else{a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-n*i);var c=_h(a,s)===-n;g8(Cr(e))&&i===1&&_h(e,s)===1&&(c=!1),o=n*(i-Number(c))}return o===0?0:o}function f8(e,r,a){Lr(2,arguments);var s=o8(e,r)/1e3;return d8()(s)}function x8(e,r){Lr(2,arguments);var a=Ul(r);return r8(e,-a)}var p8=864e5;function y8(e){Lr(1,arguments);var r=Cr(e),a=r.getTime();r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0);var s=r.getTime(),n=a-s;return Math.floor(n/p8)+1}function i0(e){Lr(1,arguments);var r=1,a=Cr(e),s=a.getUTCDay(),n=(s<r?7:0)+s-r;return a.setUTCDate(a.getUTCDate()-n),a.setUTCHours(0,0,0,0),a}function OD(e){Lr(1,arguments);var r=Cr(e),a=r.getUTCFullYear(),s=new Date(0);s.setUTCFullYear(a+1,0,4),s.setUTCHours(0,0,0,0);var n=i0(s),i=new Date(0);i.setUTCFullYear(a,0,4),i.setUTCHours(0,0,0,0);var o=i0(i);return r.getTime()>=n.getTime()?a+1:r.getTime()>=o.getTime()?a:a-1}function v8(e){Lr(1,arguments);var r=OD(e),a=new Date(0);a.setUTCFullYear(r,0,4),a.setUTCHours(0,0,0,0);var s=i0(a);return s}var b8=6048e5;function w8(e){Lr(1,arguments);var r=Cr(e),a=i0(r).getTime()-v8(r).getTime();return Math.round(a/b8)+1}function o0(e,r){var a,s,n,i,o,c,u,m;Lr(1,arguments);var g=Nm(),f=Ul((a=(s=(n=(i=r?.weekStartsOn)!==null&&i!==void 0?i:r==null||(o=r.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:g.weekStartsOn)!==null&&s!==void 0?s:(u=g.locale)===null||u===void 0||(m=u.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&a!==void 0?a:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var y=Cr(e),p=y.getUTCDay(),b=(p<f?7:0)+p-f;return y.setUTCDate(y.getUTCDate()-b),y.setUTCHours(0,0,0,0),y}function ID(e,r){var a,s,n,i,o,c,u,m;Lr(1,arguments);var g=Cr(e),f=g.getUTCFullYear(),y=Nm(),p=Ul((a=(s=(n=(i=r?.firstWeekContainsDate)!==null&&i!==void 0?i:r==null||(o=r.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:y.firstWeekContainsDate)!==null&&s!==void 0?s:(u=y.locale)===null||u===void 0||(m=u.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(f+1,0,p),b.setUTCHours(0,0,0,0);var j=o0(b,r),v=new Date(0);v.setUTCFullYear(f,0,p),v.setUTCHours(0,0,0,0);var N=o0(v,r);return g.getTime()>=j.getTime()?f+1:g.getTime()>=N.getTime()?f:f-1}function j8(e,r){var a,s,n,i,o,c,u,m;Lr(1,arguments);var g=Nm(),f=Ul((a=(s=(n=(i=r?.firstWeekContainsDate)!==null&&i!==void 0?i:r==null||(o=r.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:g.firstWeekContainsDate)!==null&&s!==void 0?s:(u=g.locale)===null||u===void 0||(m=u.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&a!==void 0?a:1),y=ID(e,r),p=new Date(0);p.setUTCFullYear(y,0,f),p.setUTCHours(0,0,0,0);var b=o0(p,r);return b}var N8=6048e5;function k8(e,r){Lr(1,arguments);var a=Cr(e),s=o0(a,r).getTime()-j8(a,r).getTime();return Math.round(s/N8)+1}function gr(e,r){for(var a=e<0?"-":"",s=Math.abs(e).toString();s.length<r;)s="0"+s;return a+s}var So={y:function(r,a){var s=r.getUTCFullYear(),n=s>0?s:1-s;return gr(a==="yy"?n%100:n,a.length)},M:function(r,a){var s=r.getUTCMonth();return a==="M"?String(s+1):gr(s+1,2)},d:function(r,a){return gr(r.getUTCDate(),a.length)},a:function(r,a){var s=r.getUTCHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h:function(r,a){return gr(r.getUTCHours()%12||12,a.length)},H:function(r,a){return gr(r.getUTCHours(),a.length)},m:function(r,a){return gr(r.getUTCMinutes(),a.length)},s:function(r,a){return gr(r.getUTCSeconds(),a.length)},S:function(r,a){var s=a.length,n=r.getUTCMilliseconds(),i=Math.floor(n*Math.pow(10,s-3));return gr(i,a.length)}},jc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},S8={G:function(r,a,s){var n=r.getUTCFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})}},y:function(r,a,s){if(a==="yo"){var n=r.getUTCFullYear(),i=n>0?n:1-n;return s.ordinalNumber(i,{unit:"year"})}return So.y(r,a)},Y:function(r,a,s,n){var i=ID(r,n),o=i>0?i:1-i;if(a==="YY"){var c=o%100;return gr(c,2)}return a==="Yo"?s.ordinalNumber(o,{unit:"year"}):gr(o,a.length)},R:function(r,a){var s=OD(r);return gr(s,a.length)},u:function(r,a){var s=r.getUTCFullYear();return gr(s,a.length)},Q:function(r,a,s){var n=Math.ceil((r.getUTCMonth()+1)/3);switch(a){case"Q":return String(n);case"QQ":return gr(n,2);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,a,s){var n=Math.ceil((r.getUTCMonth()+1)/3);switch(a){case"q":return String(n);case"qq":return gr(n,2);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,a,s){var n=r.getUTCMonth();switch(a){case"M":case"MM":return So.M(r,a);case"Mo":return s.ordinalNumber(n+1,{unit:"month"});case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})}},L:function(r,a,s){var n=r.getUTCMonth();switch(a){case"L":return String(n+1);case"LL":return gr(n+1,2);case"Lo":return s.ordinalNumber(n+1,{unit:"month"});case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})}},w:function(r,a,s,n){var i=k8(r,n);return a==="wo"?s.ordinalNumber(i,{unit:"week"}):gr(i,a.length)},I:function(r,a,s){var n=w8(r);return a==="Io"?s.ordinalNumber(n,{unit:"week"}):gr(n,a.length)},d:function(r,a,s){return a==="do"?s.ordinalNumber(r.getUTCDate(),{unit:"date"}):So.d(r,a)},D:function(r,a,s){var n=y8(r);return a==="Do"?s.ordinalNumber(n,{unit:"dayOfYear"}):gr(n,a.length)},E:function(r,a,s){var n=r.getUTCDay();switch(a){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})}},e:function(r,a,s,n){var i=r.getUTCDay(),o=(i-n.weekStartsOn+8)%7||7;switch(a){case"e":return String(o);case"ee":return gr(o,2);case"eo":return s.ordinalNumber(o,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(r,a,s,n){var i=r.getUTCDay(),o=(i-n.weekStartsOn+8)%7||7;switch(a){case"c":return String(o);case"cc":return gr(o,a.length);case"co":return s.ordinalNumber(o,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(r,a,s){var n=r.getUTCDay(),i=n===0?7:n;switch(a){case"i":return String(i);case"ii":return gr(i,a.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(n,{width:"short",context:"formatting"});case"iiii":default:return s.day(n,{width:"wide",context:"formatting"})}},a:function(r,a,s){var n=r.getUTCHours(),i=n/12>=1?"pm":"am";switch(a){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(r,a,s){var n=r.getUTCHours(),i;switch(n===12?i=jc.noon:n===0?i=jc.midnight:i=n/12>=1?"pm":"am",a){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(r,a,s){var n=r.getUTCHours(),i;switch(n>=17?i=jc.evening:n>=12?i=jc.afternoon:n>=4?i=jc.morning:i=jc.night,a){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(r,a,s){if(a==="ho"){var n=r.getUTCHours()%12;return n===0&&(n=12),s.ordinalNumber(n,{unit:"hour"})}return So.h(r,a)},H:function(r,a,s){return a==="Ho"?s.ordinalNumber(r.getUTCHours(),{unit:"hour"}):So.H(r,a)},K:function(r,a,s){var n=r.getUTCHours()%12;return a==="Ko"?s.ordinalNumber(n,{unit:"hour"}):gr(n,a.length)},k:function(r,a,s){var n=r.getUTCHours();return n===0&&(n=24),a==="ko"?s.ordinalNumber(n,{unit:"hour"}):gr(n,a.length)},m:function(r,a,s){return a==="mo"?s.ordinalNumber(r.getUTCMinutes(),{unit:"minute"}):So.m(r,a)},s:function(r,a,s){return a==="so"?s.ordinalNumber(r.getUTCSeconds(),{unit:"second"}):So.s(r,a)},S:function(r,a){return So.S(r,a)},X:function(r,a,s,n){var i=n._originalDate||r,o=i.getTimezoneOffset();if(o===0)return"Z";switch(a){case"X":return Y2(o);case"XXXX":case"XX":return xl(o);case"XXXXX":case"XXX":default:return xl(o,":")}},x:function(r,a,s,n){var i=n._originalDate||r,o=i.getTimezoneOffset();switch(a){case"x":return Y2(o);case"xxxx":case"xx":return xl(o);case"xxxxx":case"xxx":default:return xl(o,":")}},O:function(r,a,s,n){var i=n._originalDate||r,o=i.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+G2(o,":");case"OOOO":default:return"GMT"+xl(o,":")}},z:function(r,a,s,n){var i=n._originalDate||r,o=i.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+G2(o,":");case"zzzz":default:return"GMT"+xl(o,":")}},t:function(r,a,s,n){var i=n._originalDate||r,o=Math.floor(i.getTime()/1e3);return gr(o,a.length)},T:function(r,a,s,n){var i=n._originalDate||r,o=i.getTime();return gr(o,a.length)}};function G2(e,r){var a=e>0?"-":"+",s=Math.abs(e),n=Math.floor(s/60),i=s%60;if(i===0)return a+String(n);var o=r;return a+String(n)+o+gr(i,2)}function Y2(e,r){if(e%60===0){var a=e>0?"-":"+";return a+gr(Math.abs(e)/60,2)}return xl(e,r)}function xl(e,r){var a=r||"",s=e>0?"-":"+",n=Math.abs(e),i=gr(Math.floor(n/60),2),o=gr(n%60,2);return s+i+a+o}var Q2=function(r,a){switch(r){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});case"PPPP":default:return a.date({width:"full"})}},LD=function(r,a){switch(r){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});case"pppp":default:return a.time({width:"full"})}},C8=function(r,a){var s=r.match(/(P+)(p+)?/)||[],n=s[1],i=s[2];if(!i)return Q2(r,a);var o;switch(n){case"P":o=a.dateTime({width:"short"});break;case"PP":o=a.dateTime({width:"medium"});break;case"PPP":o=a.dateTime({width:"long"});break;case"PPPP":default:o=a.dateTime({width:"full"});break}return o.replace("{{date}}",Q2(n,a)).replace("{{time}}",LD(i,a))},E8={p:LD,P:C8},A8=["D","DD"],P8=["YY","YYYY"];function T8(e){return A8.indexOf(e)!==-1}function D8(e){return P8.indexOf(e)!==-1}function X2(e,r,a){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(r,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(r,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(r,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(r,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var O8={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},I8=function(r,a,s){var n,i=O8[r];return typeof i=="string"?n=i:a===1?n=i.one:n=i.other.replace("{{count}}",a.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+n:n+" ago":n};function hy(e){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=r.width?String(r.width):e.defaultWidth,s=e.formats[a]||e.formats[e.defaultWidth];return s}}var L8={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},R8={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},M8={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_8={date:hy({formats:L8,defaultWidth:"full"}),time:hy({formats:R8,defaultWidth:"full"}),dateTime:hy({formats:M8,defaultWidth:"full"})},$8={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},U8=function(r,a,s,n){return $8[r]};function uu(e){return function(r,a){var s=a!=null&&a.context?String(a.context):"standalone",n;if(s==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=a!=null&&a.width?String(a.width):i;n=e.formattingValues[o]||e.formattingValues[i]}else{var c=e.defaultWidth,u=a!=null&&a.width?String(a.width):e.defaultWidth;n=e.values[u]||e.values[c]}var m=e.argumentCallback?e.argumentCallback(r):r;return n[m]}}var F8={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},z8={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},B8={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},q8={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},H8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},W8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},V8=function(r,a){var s=Number(r),n=s%100;if(n>20||n<10)switch(n%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},K8={ordinalNumber:V8,era:uu({values:F8,defaultWidth:"wide"}),quarter:uu({values:z8,defaultWidth:"wide",argumentCallback:function(r){return r-1}}),month:uu({values:B8,defaultWidth:"wide"}),day:uu({values:q8,defaultWidth:"wide"}),dayPeriod:uu({values:H8,defaultWidth:"wide",formattingValues:W8,defaultFormattingWidth:"wide"})};function mu(e){return function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.width,n=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=r.match(n);if(!i)return null;var o=i[0],c=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(c)?Y8(c,function(f){return f.test(o)}):G8(c,function(f){return f.test(o)}),m;m=e.valueCallback?e.valueCallback(u):u,m=a.valueCallback?a.valueCallback(m):m;var g=r.slice(o.length);return{value:m,rest:g}}}function G8(e,r){for(var a in e)if(e.hasOwnProperty(a)&&r(e[a]))return a}function Y8(e,r){for(var a=0;a<e.length;a++)if(r(e[a]))return a}function Q8(e){return function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.match(e.matchPattern);if(!s)return null;var n=s[0],i=r.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=a.valueCallback?a.valueCallback(o):o;var c=r.slice(n.length);return{value:o,rest:c}}}var X8=/^(\d+)(th|st|nd|rd)?/i,Z8=/\d+/i,J8={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},eF={any:[/^b/i,/^(a|c)/i]},tF={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rF={any:[/1/i,/2/i,/3/i,/4/i]},aF={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nF={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},iF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},oF={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},lF={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},cF={ordinalNumber:Q8({matchPattern:X8,parsePattern:Z8,valueCallback:function(r){return parseInt(r,10)}}),era:mu({matchPatterns:J8,defaultMatchWidth:"wide",parsePatterns:eF,defaultParseWidth:"any"}),quarter:mu({matchPatterns:tF,defaultMatchWidth:"wide",parsePatterns:rF,defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:mu({matchPatterns:aF,defaultMatchWidth:"wide",parsePatterns:sF,defaultParseWidth:"any"}),day:mu({matchPatterns:nF,defaultMatchWidth:"wide",parsePatterns:iF,defaultParseWidth:"any"}),dayPeriod:mu({matchPatterns:oF,defaultMatchWidth:"any",parsePatterns:lF,defaultParseWidth:"any"})},RD={code:"en-US",formatDistance:I8,formatLong:_8,formatRelative:U8,localize:K8,match:cF,options:{weekStartsOn:0,firstWeekContainsDate:1}},dF=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uF=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mF=/^'([^]*?)'?$/,gF=/''/g,hF=/[a-zA-Z]/;function fy(e,r,a){var s,n,i,o,c,u,m,g,f,y,p,b,j,v;Lr(2,arguments);var N=String(r),k=Nm(),E=(s=(n=void 0)!==null&&n!==void 0?n:k.locale)!==null&&s!==void 0?s:RD,C=Ul((i=(o=(c=(u=void 0)!==null&&u!==void 0?u:void 0)!==null&&c!==void 0?c:k.firstWeekContainsDate)!==null&&o!==void 0?o:(m=k.locale)===null||m===void 0||(g=m.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=Ul((f=(y=(p=(b=void 0)!==null&&b!==void 0?b:void 0)!==null&&p!==void 0?p:k.weekStartsOn)!==null&&y!==void 0?y:(j=k.locale)===null||j===void 0||(v=j.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&f!==void 0?f:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var P=Cr(e);if(!n8(P))throw new RangeError("Invalid time value");var D=Db(P),I=x8(P,D),H={firstWeekContainsDate:C,weekStartsOn:S,locale:E,_originalDate:P},W=N.match(uF).map(function(K){var B=K[0];if(B==="p"||B==="P"){var z=E8[B];return z(K,E.formatLong)}return K}).join("").match(dF).map(function(K){if(K==="''")return"'";var B=K[0];if(B==="'")return fF(K);var z=S8[B];if(z)return D8(K)&&X2(K,r,String(e)),T8(K)&&X2(K,r,String(e)),z(I,K,E.localize,H);if(B.match(hF))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return K}).join("");return W}function fF(e){var r=e.match(mF);return r?r[1].replace(gF,"'"):e}function MD(e,r){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}function xF(e){return MD({},e)}var Z2=1440,pF=2520,xy=43200,yF=86400;function vF(e,r,a){var s,n;Lr(2,arguments);var i=Nm(),o=(s=(n=a?.locale)!==null&&n!==void 0?n:i.locale)!==null&&s!==void 0?s:RD;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var c=_h(e,r);if(isNaN(c))throw new RangeError("Invalid time value");var u=MD(xF(a),{addSuffix:!!a?.addSuffix,comparison:c}),m,g;c>0?(m=Cr(r),g=Cr(e)):(m=Cr(e),g=Cr(r));var f=f8(g,m),y=(Db(g)-Db(m))/1e3,p=Math.round((f-y)/60),b;if(p<2)return a!=null&&a.includeSeconds?f<5?o.formatDistance("lessThanXSeconds",5,u):f<10?o.formatDistance("lessThanXSeconds",10,u):f<20?o.formatDistance("lessThanXSeconds",20,u):f<40?o.formatDistance("halfAMinute",0,u):f<60?o.formatDistance("lessThanXMinutes",1,u):o.formatDistance("xMinutes",1,u):p===0?o.formatDistance("lessThanXMinutes",1,u):o.formatDistance("xMinutes",p,u);if(p<45)return o.formatDistance("xMinutes",p,u);if(p<90)return o.formatDistance("aboutXHours",1,u);if(p<Z2){var j=Math.round(p/60);return o.formatDistance("aboutXHours",j,u)}else{if(p<pF)return o.formatDistance("xDays",1,u);if(p<xy){var v=Math.round(p/Z2);return o.formatDistance("xDays",v,u)}else if(p<yF)return b=Math.round(p/xy),o.formatDistance("aboutXMonths",b,u)}if(b=h8(g,m),b<12){var N=Math.round(p/xy);return o.formatDistance("xMonths",N,u)}else{var k=b%12,E=Math.floor(b/12);return k<3?o.formatDistance("aboutXYears",E,u):k<9?o.formatDistance("overXYears",E,u):o.formatDistance("almostXYears",E+1,u)}}function _D(e,r){return Lr(1,arguments),vF(e,Date.now(),r)}const $D=()=>{const[e,r]=h.useState([]),[a,s]=h.useState(0),[n,i]=h.useState(!1),[o,c]=h.useState(!1),[u,m]=h.useState(null),g=h.useRef(null),f=mt();h.useEffect(()=>{y(),p(),b()},[]),h.useEffect(()=>{const C=Qn.connectToStream(S=>{r(P=>[S,...P]),s(P=>P+1),M.info(S.title||"New notification",{body:S.message,toastId:`notification_${S.id}`}),u?.soundEnabled!==!1&&Qn.playNotificationSound()},S=>{console.error("Notification stream error:",S)});return g.current=C,()=>{C?.close()}},[u]);const y=async()=>{c(!0);try{const{notifications:C}=await Qn.getNotifications({limit:20});r(C)}catch(C){console.error("Failed to load notifications:",C)}finally{c(!1)}},p=async()=>{try{const{unreadCount:C}=await Qn.getUnreadCount();s(C)}catch(C){console.error("Failed to load unread count:",C)}},b=async()=>{try{const C=await Qn.getPreferences();m(C)}catch(C){console.error("Failed to load preferences:",C)}},j=async C=>{try{await Qn.markAsRead(C),r(S=>S.map(P=>P.id===C?{...P,read:!0}:P)),s(S=>Math.max(0,S-1))}catch(S){console.error("Failed to mark as read:",S)}},v=async()=>{try{await Qn.markAllAsRead(),r(C=>C.map(S=>({...S,read:!0}))),s(0)}catch(C){console.error("Failed to mark all as read:",C)}},N=async C=>{try{await Qn.deleteNotification(C),r(P=>P.filter(D=>D.id!==C));const S=e.find(P=>P.id===C);S&&!S.read&&s(P=>Math.max(0,P-1))}catch(S){console.error("Failed to delete notification:",S)}},k=C=>{const S=C.metadata||{};return S.taskId?`/tasks/${S.taskId}`:C.link?C.link:S.leadId?`/leads/${S.leadId}`:S.dealId?`/deals/${S.dealId}`:null},E=C=>{C.read||j(C.id);const S=k(C);S&&(f(S),i(!1))};return t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>i(!n),className:"p-2.5 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-lg transition-colors text-gray-600 dark:text-gray-400 relative",title:"Notifications",children:[t.jsx($l,{className:"w-5 h-5"}),a>0&&t.jsx("span",{className:"absolute -top-0.5 -right-0.5 min-w-[20px] h-5 px-1.5 bg-weconnect-red text-white text-[10px] rounded-full flex items-center justify-center font-semibold leading-none",children:a>99?"99+":a})]}),n&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>i(!1)}),t.jsxs("div",{className:"absolute right-0 top-full mt-2 w-96 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 z-20 overflow-hidden max-h-[600px] flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-slate-800",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Notifications"}),t.jsxs("div",{className:"flex items-center gap-2",children:[a>0&&t.jsx("button",{onClick:v,className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors duration-200",children:"Mark all as read"}),t.jsx("button",{onClick:()=>i(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-slate-800 rounded",children:t.jsx(da,{className:"h-5 w-5"})})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:o?t.jsx("div",{className:"p-8 text-center",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):e.length===0?t.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[t.jsx($l,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),t.jsx("p",{className:"text-sm",children:"No notifications yet"})]}):e.map(C=>t.jsx("div",{className:`px-4 py-3 hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors text-left border-b border-gray-100 dark:border-slate-800 last:border-0 cursor-pointer ${C.read?"":"bg-blue-50/50 dark:bg-blue-900/10"}`,onClick:()=>E(C),children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:C.title}),!C.read&&t.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full flex-shrink-0"})]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-0.5",children:C.message}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:_D(new Date(C.createdAt),{addSuffix:!0})})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[!C.read&&t.jsx("button",{onClick:S=>{S.stopPropagation(),j(C.id)},className:"p-1 hover:bg-gray-200 dark:hover:bg-slate-700 rounded",title:"Mark as read",children:t.jsx(hf,{className:"h-4 w-4"})}),t.jsx("button",{onClick:S=>{S.stopPropagation(),N(C.id)},className:"p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Delete",children:t.jsx(ht,{className:"h-4 w-4 text-red-600"})})]})]})},C.id))}),t.jsx("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-slate-800 bg-gray-50 dark:bg-slate-800/50 text-center",children:t.jsx("button",{onClick:()=>{f("/business-settings/notifications"),i(!1)},className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors duration-200",children:"Notification Settings"})})]})]})]})},bF=()=>{const e=mt(),{user:r,hasPermission:a}=xr(),{t:s}=wn();return Fe.useEffect(()=>{const n=i=>{(i.metaKey||i.ctrlKey)&&i.key.toLowerCase()==="k"&&(i.preventDefault(),document.querySelector("input[data-topsearch-input]")?.focus())};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:"hidden md:flex items-center justify-between px-6 h-14 bg-white dark:bg-slate-900 border-b border-gray-200 dark:border-slate-800 sticky top-0 z-30 shadow-sm top-header",children:[t.jsx("div",{className:"flex-1 max-w-sm",children:t.jsx("div",{className:"relative",children:t.jsx(J7,{})})}),t.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[a(Qe.LEAD.CREATE)&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"sr-only",children:"Create new lead"}),t.jsx(me,{onClick:()=>e("/leads/new"),variant:"PRIMARY",size:"SM",icon:t.jsx(Rt,{className:"w-4 h-4"}),"aria-label":"Create new lead",className:"shadow-sm",children:t.jsx("span",{className:"hidden lg:inline",children:s("header.new","New")})})]}),t.jsx($D,{})]})]})})},wF=({open:e})=>{const r=mt();if(!e)return null;const a=()=>{r("/profile",{state:{focusPassword:!0}})};return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:t.jsx("div",{className:"w-full max-w-md bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-800 p-6 m-4 animate-in fade-in zoom-in duration-200",children:t.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[t.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900/30 rounded-full",children:t.jsx(pm,{className:"w-8 h-8 text-amber-600 dark:text-amber-500"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Password Change Required"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"For security reasons, you must change your temporary password before continuing."})]}),t.jsx("div",{className:"w-full p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-100 dark:border-blue-800 text-left",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx(Al,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-300",children:"Action Required"}),t.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-400",children:"Please update your password in your profile settings to secure your account."})]})]})}),t.jsx("button",{onClick:a,className:"w-full py-2.5 px-4 bg-weconnect-red hover:bg-red-700 text-white font-medium rounded-lg transition-colors focus:ring-4 focus:ring-red-500/20",children:"Go to Change Password"})]})})})},jF=[{id:"task-management",name:"Task Management",href:"/task-management",icon:Rh,permission:Qe.ACTIVITY.READ},{id:"expense-management",name:"Expense",href:"/expense-management",icon:Qr,permission:Qe.EXPENSE.READ},{id:"reports",name:"Reports",href:"/reports",icon:Ka,permission:Qe.DASHBOARD.READ,children:[{id:"report-tasks",name:"Task Report",href:"/reports/tasks",icon:Ka,permission:Qe.DASHBOARD.READ},{id:"report-leads",name:"Lead Report",href:"/reports/leads",icon:Ka,permission:Qe.DASHBOARD.READ},{id:"report-deals",name:"Deal Report",href:"/reports/deals",icon:Ka,permission:Qe.DASHBOARD.READ},{id:"report-expenses",name:"Expense Report",href:"/reports/expenses",icon:Ka,permission:Qe.DASHBOARD.READ},{id:"report-invoices",name:"Invoice Report",href:"/reports/invoices",icon:Ka,permission:Qe.DASHBOARD.READ},{id:"report-quotations",name:"Quotation Report",href:"/reports/quotations",icon:Ka,permission:Qe.DASHBOARD.READ}]},{id:"products",name:"Products",href:"/products",icon:_n,permission:"product.read"},{id:"automation-management",name:"Automation",href:"/automation-management",icon:Dl,permission:Qe.AUTOMATION.READ}],NF="/assets/WeConnect_Logo_C2C-rC8fzL2F.svg",ot=({children:e})=>{const[r,a]=h.useState(!1),[s,n]=h.useState(!1),[i,o]=h.useState(null),[c,u]=h.useState(!1),[m,g]=h.useState(!1),{user:f,logout:y,hasPermission:p}=xr(),{isDark:b,toggleTheme:j}=FT(),{counts:v}=jn(),{companySettings:N}=Hr(),{resetMenuOrder:k}=aD(),{t:E}=wn(),C=Bn(),S=mt(),P=h.useRef(null),{isGlobalLoading:D}=h9();h.useEffect(()=>{const ae=ne=>{P.current&&!P.current.contains(ne.target)&&u(!1)};return document.addEventListener("mousedown",ae),()=>{document.removeEventListener("mousedown",ae)}},[]),h.useEffect(()=>{const ae=document.documentElement;return r?ae.classList.add("overflow-hidden"):ae.classList.remove("overflow-hidden"),()=>ae.classList.remove("overflow-hidden")},[r]);const I=Vo.replace(/\/api\/?$/,"")||window.location.origin,H=[{id:"dashboard",name:E("navigation.dashboard")||"Dashboard",href:"/",icon:H9,permission:Qe.DASHBOARD.READ},{id:"leads",name:E("navigation.leads")||"Leads",href:"/leads",icon:Lt,permission:Qe.LEAD.READ,badge:v.leads.toString(),badgeColor:"bg-green-500"},{id:"deals",name:"Deals",href:"/deals",icon:Qr,permission:Qe.DEAL.READ,badge:v.deals.toString(),badgeColor:"bg-purple-500"},{id:"quotations",name:"Quotations",href:"/quotations",icon:Co,permission:Qe.QUOTATION.READ,badge:"",badgeColor:"bg-indigo-500"},{id:"invoices",name:"Invoices",href:"/invoices",icon:Li,permission:Qe.INVOICE.READ,badge:"",badgeColor:"bg-emerald-500"}],W=ae=>ae.filter(ne=>ne.permission?p(ne.permission):!0).map(ne=>({...ne,children:ne.children?W(ne.children):void 0}));let K=W([...H,...jF,{id:"trash",name:"Trash",href:"/trash",icon:ht,permission:Qe.TRASH.READ},{id:"business-settings",name:"Business Settings",href:"/business-settings",icon:Ui,permission:Qe.BUSINESS_SETTINGS.READ}]);const B=K.findIndex(ae=>ae.id==="trash");if(B!==-1){const ae=K.splice(B,1)[0];K.splice(K.length-1,0,ae)}const z=()=>{y(),S("/login")},q=()=>{g(!0),u(!1)},J=()=>{g(!1),z()};return t.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-slate-950",children:[r&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden transition-opacity duration-300",onClick:()=>a(!1)}),t.jsxs("div",{className:`${r?"translate-x-0":"-translate-x-full"} fixed md:relative md:translate-x-0 inset-y-0 left-0 z-50 flex flex-col ${s?"md:w-16":"w-72 md:w-64"} bg-white dark:bg-slate-900 border-r border-gray-200 dark:border-slate-800 shadow-lg transition-all duration-300`,children:[t.jsxs("div",{className:`flex items-center ${s?"justify-center px-2":"justify-between px-6 md:px-4"} h-16 md:h-14 border-b border-gray-200 dark:border-slate-800`,children:[!s&&t.jsx(ri,{to:"/",className:"flex items-center",children:N?.logo?t.jsx("img",{src:N.logo,alt:N.name||rh.NAME,className:"h-8 w-auto max-w-[120px] object-contain"}):N?.name?t.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:N.name}):t.jsx("img",{src:NF,alt:rh.NAME,className:"h-8 w-auto"})}),s&&t.jsx(ri,{to:"/",className:"flex items-center justify-center",children:N?.logo?t.jsx("img",{src:N.logo,alt:N.name||rh.NAME,className:"h-7 w-7 object-contain rounded"}):t.jsx("div",{className:"w-7 h-7 bg-weconnect-red rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-white font-bold text-xs",children:N?.name?.charAt(0)||"W"})})}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{className:"hidden md:flex items-center justify-center p-1.5 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",onClick:()=>n(!s),children:t.jsx(Kw,{size:16,className:`transform transition-transform duration-200 ${s?"rotate-180":""}`})}),t.jsx("button",{className:"md:hidden p-1.5 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",onClick:()=>a(!1),children:t.jsx(da,{size:16})})]})]}),t.jsx("nav",{className:"flex-1 px-4 md:px-3 py-5 md:py-4 space-y-2 md:space-y-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 scrollbar-track-transparent",children:t.jsx(X7,{navigationItems:K,activeHref:C.pathname,sidebarCollapsed:s,hoveredItem:i,onHover:o,onNavigate:S,setSidebarOpen:a})}),!s&&t.jsx("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-800/30",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-medium lowercase",children:E("menu.dragToReorder","Drag menu items to reorder")}),t.jsx("button",{onClick:k,className:"text-[10px] text-weconnect-red dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors font-bold uppercase tracking-wider",children:E("menu.reset","Reset")})]})}),t.jsx("div",{className:"border-t border-gray-200 dark:border-slate-800 p-4 md:p-3",children:t.jsxs("div",{className:"relative",ref:P,children:[t.jsxs("button",{className:`w-full flex items-center ${s?"justify-center":"justify-between"} px-2 py-2 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors`,onClick:()=>u(!c),children:[t.jsxs("div",{className:`flex items-center gap-3 md:gap-2 min-w-0 ${s?"justify-center":"flex-1"}`,children:[t.jsxs("div",{className:"relative flex-shrink-0",children:[f?.profilePicture?t.jsx("img",{src:`${I}/uploads/${f.profilePicture}`,alt:"Profile",className:"w-10 h-10 md:w-8 md:h-8 rounded-lg object-cover"}):t.jsx("div",{className:"w-10 h-10 md:w-8 md:h-8 bg-weconnect-red rounded-lg flex items-center justify-center",children:t.jsx(xt,{size:18,className:"md:w-4 md:h-4 text-white"})}),t.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-400 rounded-full border border-white dark:border-slate-900"})]}),!s&&t.jsxs("div",{className:"text-left min-w-0 flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white break-words leading-tight",children:f?.fullName||f?.firstName||"User"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 break-all leading-tight",children:f?.email})]})]}),!s&&t.jsx(xn,{size:14,className:`transition-transform duration-200 flex-shrink-0 ${c?"rotate-180":""}`})]}),c&&!s&&t.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700",children:t.jsxs("div",{className:"py-1",children:[t.jsxs("button",{onClick:()=>{S("/profile"),u(!1)},className:"w-full px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center justify-center gap-2 transition-colors text-center",children:[t.jsx(xt,{size:14}),t.jsx("span",{children:E("user.profile","Profile")})]}),t.jsx("div",{className:"border-t border-gray-200 dark:border-slate-700 my-1"}),t.jsxs("button",{onClick:j,className:"w-full px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center justify-center gap-2 transition-colors text-center",children:[b?t.jsx(rU,{size:14}):t.jsx(Q9,{size:14}),t.jsx("span",{children:b?"Light Mode":"Dark Mode"})]}),t.jsx("div",{className:"px-3 py-1.5 flex justify-center",children:t.jsx(lU,{})}),t.jsx("div",{className:"border-t border-gray-200 dark:border-slate-700 my-1"}),t.jsxs("button",{onClick:q,className:"w-full px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center justify-center gap-2 transition-colors text-center",children:[t.jsx(K9,{size:14}),t.jsx("span",{children:"Logout"})]})]})})]})})]}),t.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[t.jsx(bF,{}),t.jsxs("div",{className:"bg-white dark:bg-slate-900 border-b border-gray-200 dark:border-slate-800 px-4 py-4 flex items-center justify-between md:hidden sticky top-0 z-30",children:[t.jsx("button",{onClick:()=>a(!0),className:"p-2 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:t.jsx(G9,{size:18})}),t.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:N?.name||rh.NAME}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx($D,{})})]}),t.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-slate-950",children:t.jsxs("div",{className:"relative h-full",children:[D&&t.jsx("div",{className:"absolute inset-0 z-20 flex flex-col items-center justify-center gap-4 bg-white/70 dark:bg-slate-950/70 backdrop-blur-sm transition-opacity",children:t.jsxs("div",{className:"flex flex-col items-center gap-3",children:[t.jsx("div",{className:"h-12 w-12 rounded-full border-4 border-weconnect-red/30 border-t-weconnect-red animate-spin"}),t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Loading"})]})}),t.jsx("div",{className:D?"pointer-events-none opacity-50 transition-opacity duration-200":"transition-opacity duration-200",children:e})]})})]}),t.jsx(vm,{open:m,title:"Confirm Logout",description:"Are you sure you want to logout? You will need to sign in again to access your account.",confirmText:"Logout",cancelText:"Cancel",loading:!1,onConfirm:J,onClose:()=>g(!1)}),t.jsx(wF,{open:!!f?.mustChangePassword&&C.pathname!=="/profile"})]})},kF="/assets/logo-CYMF_Y8v.png",SF=({isOpen:e,onClose:r,onNavigateToProfile:a})=>{const{user:s,updateUser:n}=xr(),[i,o]=h.useState(""),[c,u]=h.useState(""),[m,g]=h.useState(!1),[f,y]=h.useState(!1),[p,b]=h.useState(!1),[j,v]=h.useState(null),[N,k]=h.useState({length:!1,lowercase:!1,uppercase:!1,number:!1,special:!1}),E=S=>{o(S),v(null);const P=/[a-z]/.test(S),D=/[A-Z]/.test(S),I=/[0-9]/.test(S),H=/[^A-Za-z0-9]/.test(S),W=S.length>=8;k({length:W,lowercase:P,uppercase:D,number:I,special:H})},C=async S=>{if(S.preventDefault(),v(null),!i||!c){v("Please fill in all fields");return}if(i!==c){v("New password and confirm password do not match");return}const P=i,D=/[a-z]/.test(P),I=/[A-Z]/.test(P),H=/[0-9]/.test(P),W=/[^A-Za-z0-9]/.test(P);if(!(P.length>=8&&D&&I&&H&&W)){v("Password must be 8+ characters with uppercase, lowercase, number, and special symbol");return}try{b(!0);const z=await Er.changePasswordForNewUser(i),q=z?.data?.user||z?.user||z;q?n({...s,...q,mustChangePassword:!1}):s?.mustChangePassword&&n({...s,mustChangePassword:!1}),M.success("Password updated successfully! You can now access all features.",{toastId:"password_change_success"}),r(),a()}catch(z){const q=z?.response?.data?.message||z?.message||"Failed to update password";v(q)}finally{b(!1)}};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full p-6",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 mb-4",children:t.jsx(pm,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Change Your Password"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"For security reasons, you must change your temporary password before accessing the system."})]}),t.jsxs("form",{onSubmit:C,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:m?"text":"password",value:i,onChange:S=>E(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white pr-10",placeholder:"Enter new password",required:!0}),t.jsx("button",{type:"button",onClick:()=>g(!m),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m?t.jsx(pn,{className:"h-4 w-4 text-gray-400"}):t.jsx(Bt,{className:"h-4 w-4 text-gray-400"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm New Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:f?"text":"password",value:c,onChange:S=>u(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white pr-10",placeholder:"Confirm new password",required:!0}),t.jsx("button",{type:"button",onClick:()=>y(!f),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:f?t.jsx(pn,{className:"h-4 w-4 text-gray-400"}):t.jsx(Bt,{className:"h-4 w-4 text-gray-400"})})]})]}),t.jsxs("div",{className:"text-xs text-gray-700 dark:text-gray-300 space-y-1",children:[t.jsx("div",{className:"font-medium",children:"Password must include:"}),t.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[t.jsxs("div",{className:"flex items-center",children:[N.length?t.jsx(ct,{className:"h-4 w-4 text-green-600 mr-1"}):t.jsx(ur,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{children:"At least 8 characters"})]}),t.jsxs("div",{className:"flex items-center",children:[N.lowercase?t.jsx(ct,{className:"h-4 w-4 text-green-600 mr-1"}):t.jsx(ur,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{children:"Lowercase letter (a-z)"})]}),t.jsxs("div",{className:"flex items-center",children:[N.uppercase?t.jsx(ct,{className:"h-4 w-4 text-green-600 mr-1"}):t.jsx(ur,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{children:"Uppercase letter (A-Z)"})]}),t.jsxs("div",{className:"flex items-center",children:[N.number?t.jsx(ct,{className:"h-4 w-4 text-green-600 mr-1"}):t.jsx(ur,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{children:"Number (0-9)"})]}),t.jsxs("div",{className:"flex items-center",children:[N.special?t.jsx(ct,{className:"h-4 w-4 text-green-600 mr-1"}):t.jsx(ur,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{children:"Special symbol (!@#$%^&*...)"})]})]})]}),j&&t.jsx("p",{className:"text-xs text-red-500",children:j}),t.jsx("button",{type:"submit",disabled:p,className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:p?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Updating Password..."]}):"Change Password"})]})]})}):null},CF=8,EF=64,AF=()=>{const[e,r]=h.useState({email:"",password:""}),[a,s]=h.useState(!1),[n,i]=h.useState({}),[o,c]=h.useState(()=>localStorage.getItem("rememberMe")==="true"),[u,m]=h.useState(null),[g,f]=h.useState(!1),{login:y,isLoading:p,error:b,clearError:j,user:v}=xr(),{companySettings:N}=Hr(),k=mt();h.useEffect(()=>{v?.mustChangePassword&&f(!0)},[v?.mustChangePassword]),h.useEffect(()=>{if(o){const D=localStorage.getItem("rememberedEmail")||"";D&&r(I=>({...I,email:D}))}},[o]),h.useEffect(()=>{b&&m(b)},[b]);const E=()=>{const D={},I=e.email.trim(),H=e.password.trim();return I?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I)||(D.email="Enter a valid email address"):D.email="Email is required",H||(D.password="Password is required"),i(D),!(Object.keys(D).length>0)},C=async D=>{if(D.preventDefault(),p)return;const I={email:e.email.trim(),password:e.password.trim()};if((I.email!==e.email||I.password!==e.password)&&r(I),!!E())try{m(null),await y(I),localStorage.setItem("rememberMe",String(o)),o?localStorage.setItem("rememberedEmail",e.email):localStorage.removeItem("rememberedEmail")}catch(H){const W=H,K=W?.response?.data?.message||W?.message||"Invalid credentials";m(K)}};h.useEffect(()=>{v&&!v.mustChangePassword&&k("/",{replace:!0})},[v?.mustChangePassword,v,k]);const S=D=>{const{name:I,value:H}=D.target;r(W=>({...W,[I]:H})),n[I]&&i(W=>({...W,[I]:""})),u&&m(null),b&&j()},P=D=>{const{name:I,value:H}=D.target,W=H.trim();W!==H&&r(K=>({...K,[I]:W}))};return t.jsxs("div",{className:"relative min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-gray-900 to-black py-12 px-4 sm:px-6 lg:px-8 overflow-hidden",children:[t.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[t.jsx("div",{className:"absolute -top-40 -left-40 h-80 w-80 rounded-full bg-weconnect-red opacity-20 blur-3xl animate-pulse"}),t.jsx("div",{className:"absolute -bottom-40 -right-40 h-96 w-96 rounded-full bg-blue-500 opacity-10 blur-3xl"}),t.jsx("div",{className:"absolute top-1/2 -right-20 h-60 w-60 rounded-full bg-purple-500 opacity-15 blur-2xl"}),t.jsx("div",{className:"absolute top-1/4 -left-20 h-40 w-40 rounded-full bg-cyan-400 opacity-20 blur-2xl"})]}),t.jsx("div",{className:"relative max-w-md w-full",children:t.jsxs("div",{className:"relative rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl shadow-2xl p-8",children:[t.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-white/10 via-transparent to-transparent"}),t.jsxs("div",{className:"relative text-center mb-6",children:[t.jsx("div",{className:"mb-6",children:N?.logo?t.jsx("img",{src:N.logo,alt:N.name||"CRM",className:"mx-auto max-w-[200px] max-h-[80px] w-auto h-auto object-contain"}):t.jsx("img",{src:kF,alt:"WeConnect",className:"mx-auto w-48 h-auto"})}),t.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight mb-2",children:"Welcome back"}),t.jsxs("p",{className:"text-base text-white/60",children:["Sign in to ",N?.name?`${N.name} CRM`:"your CRM dashboard"]})]}),(u||b)&&t.jsx("div",{className:"mb-4 rounded-lg border border-red-500/40 bg-red-500/10 text-red-200 px-4 py-3",children:t.jsx("p",{className:"text-sm",children:u||b})}),t.jsxs("form",{className:"relative space-y-6",onSubmit:C,noValidate:!0,children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-white/90 mb-3",children:"Email Address"}),t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:t.jsx(ir,{className:"h-5 w-5 text-white/60 group-focus-within:text-weconnect-red transition-colors"})}),t.jsx("input",{id:"email",name:"email",type:"email",inputMode:"email",autoComplete:"email",required:!0,value:e.email,onChange:S,onBlur:P,className:`block w-full pl-12 pr-4 py-4 rounded-xl border-2 bg-white/5 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-weconnect-red/50 focus:border-weconnect-red backdrop-blur-sm transition-all duration-200 ${n.email?"border-red-400/60 ring-red-400/20":"border-white/10 hover:border-white/20 hover:bg-white/10"}`,placeholder:"Enter your email address"})]}),n.email&&t.jsx("p",{className:"mt-2 text-sm text-red-400",children:n.email})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-white/90 mb-3",children:"Password"}),t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:t.jsx(pm,{className:"h-5 w-5 text-white/60 group-focus-within:text-weconnect-red transition-colors"})}),t.jsx("input",{id:"password",name:"password",type:a?"text":"password",autoComplete:"current-password",required:!0,minLength:CF,maxLength:EF,value:e.password,onChange:S,onBlur:P,className:`block w-full pl-12 pr-12 py-4 rounded-xl border-2 bg-white/5 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-weconnect-red/50 focus:border-weconnect-red backdrop-blur-sm transition-all duration-200 ${n.password?"border-red-400/60 ring-red-400/20":"border-white/10 hover:border-white/20 hover:bg-white/10"}`,placeholder:"Enter your password"}),t.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-4 flex items-center hover:text-weconnect-red transition-colors",onClick:()=>s(!a),children:a?t.jsx(pn,{className:"h-5 w-5 text-white/60"}):t.jsx(Bt,{className:"h-5 w-5 text-white/60"})})]})]}),t.jsxs("div",{className:"flex items-center justify-between pt-2",children:[t.jsxs("label",{className:"flex items-center space-x-3 text-sm text-white/70 select-none cursor-pointer hover:text-white/90 transition-colors",children:[t.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-white/20 bg-white/5 text-weconnect-red focus:ring-weconnect-red focus:ring-offset-0 focus:ring-2 transition-all",checked:o,onChange:D=>{const I=D.target.checked;c(I),localStorage.setItem("rememberMe",String(I)),I||localStorage.removeItem("rememberedEmail")}}),t.jsx("span",{children:"Remember me"})]}),t.jsx("button",{type:"button",className:"text-sm font-medium text-weconnect-red hover:text-red-400 transition-colors",onClick:()=>{const D=e.email||localStorage.getItem("rememberedEmail")||"",I=`mailto:support@example.com?subject=Password%20reset%20request&body=My%20login%20email:%20${encodeURIComponent(D)}`;window.location.href=I},children:"Forgot password?"})]}),t.jsx("button",{type:"submit",disabled:p,"aria-disabled":p,"aria-busy":p,className:"w-full flex justify-center items-center py-4 px-6 mt-8 rounded-xl text-base font-semibold text-white bg-weconnect-red hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-weconnect-red/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl",children:p?t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),t.jsx("span",{children:"Signing in..."})]}):"Sign In"})]})]})}),t.jsx(SF,{isOpen:g,onClose:()=>f(!1),onNavigateToProfile:()=>k("/",{replace:!0})})]})};function PF(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"},child:[]}]})(e)}function TF(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"},child:[]}]})(e)}function py(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"},child:[]}]})(e)}function J2(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"},child:[]}]})(e)}function DF(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"},child:[]}]})(e)}function OF(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"},child:[]}]})(e)}function eC(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"},child:[]}]})(e)}function IF(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},child:[]}]})(e)}function tC(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},child:[]}]})(e)}function LF(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"},child:[]}]})(e)}function rC(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"},child:[]}]})(e)}function RF(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"},child:[]}]})(e)}function MF(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"},child:[]}]})(e)}function _F(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"},child:[]}]})(e)}function $F(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"},child:[]}]})(e)}function UF(e){return or({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"},child:[]}]})(e)}function yy({icon:e,title:r,value:a,subtitle:s,trend:n,color:i="blue",isLoading:o=!1,className:c=""}){const m={blue:{bg:"bg-white/10 dark:bg-black/10",iconBg:"bg-blue-200 dark:bg-blue-950",iconColor:"text-blue-600 dark:text-blue-400",trendColor:"text-blue-600 dark:text-blue-400"},green:{bg:"bg-white/10 dark:bg-black/10",iconBg:"bg-green-200 dark:bg-green-950",iconColor:"text-green-600 dark:text-green-400",trendColor:"text-green-600 dark:text-green-400"},purple:{bg:"bg-white/10 dark:bg-black/10",iconBg:"bg-purple-200 dark:bg-purple-950",iconColor:"text-purple-600 dark:text-purple-400",trendColor:"text-purple-600 dark:text-purple-400"},orange:{bg:"bg-white/10 dark:bg-black/10",iconBg:"bg-orange-200 dark:bg-orange-950",iconColor:"text-orange-600 dark:text-orange-400",trendColor:"text-orange-600 dark:text-orange-400"},red:{bg:"bg-white/10 dark:bg-black/10",iconBg:"bg-red-200 dark:bg-red-950",iconColor:"text-red-600 dark:text-red-400",trendColor:"text-red-600 dark:text-red-400"},indigo:{bg:"bg-white/10 dark:bg-black/10",iconBg:"bg-indigo-200 dark:bg-indigo-950",iconColor:"text-indigo-600 dark:text-indigo-400",trendColor:"text-indigo-600 dark:text-indigo-400"}}[i],g=()=>n?n.value>0?t.jsx(TF,{className:"w-4 h-4"}):n.value<0?t.jsx(PF,{className:"w-4 h-4"}):t.jsx(LF,{className:"w-4 h-4"}):null,f=()=>n?n.isPositive!==void 0?n.isPositive?"text-green-600":"text-red-600":n.value>0?"text-green-600":n.value<0?"text-red-600":"text-gray-500":"text-gray-500";return t.jsx("div",{className:`${m.bg} rounded-xl p-4 shadow-sm  hover:shadow-md transition-all duration-200 ${c}`,children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("div",{className:`w-12 h-12 ${m.iconBg} rounded-xl flex items-center justify-center`,children:t.jsx("div",{className:`${m.iconColor}`,children:e})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-sm font-medium text-white/70 dark:text-gray-300 mb-1",children:r}),t.jsx("div",{className:"text-2xl font-bold text-white/70 dark:text-white",children:o?t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx("div",{className:"animate-pulse bg-white/20 dark:bg-gray-600 h-8 w-16 rounded"})}):typeof a=="number"?a.toLocaleString():a})]})]}),s&&t.jsx("p",{className:"text-xs text-white/70 dark:text-gray-400 mb-2",children:s}),n&&t.jsxs("div",{className:`flex items-center space-x-1 ${f()}`,children:[g(),t.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(n.value),"%"]}),t.jsx("span",{className:"text-xs text-white/70 dark:text-gray-400",children:n.label})]})]})})})}class FF{async getLeadStatusDistribution(r,a="all"){const s=new URLSearchParams;return r&&s.append("userId",r.toString()),s.append("scope",a),(await oe.get(`/analytics/charts/lead-status-distribution?${s}`)).data}async getRevenueTrends(r=12,a,s="all"){const n=new URLSearchParams;return n.append("months",r.toString()),a&&n.append("userId",a.toString()),n.append("scope",s),(await oe.get(`/analytics/charts/revenue-trends?${n}`)).data}async getActivityTrends(r=12,a,s="all"){const n=new URLSearchParams;return n.append("months",r.toString()),a&&n.append("userId",a.toString()),n.append("scope",s),(await oe.get(`/analytics/charts/activity-trends?${n}`)).data}async getUserGrowth(r=12){return(await oe.get(`/analytics/charts/user-growth?months=${r}`)).data}async getLeadConversionFunnel(r,a="all"){const s=new URLSearchParams;return r&&s.append("userId",r.toString()),s.append("scope",a),(await oe.get(`/analytics/charts/lead-conversion-funnel?${s}`)).data}async getSalesPipelineFlow(r=6,a,s="all"){const n=new URLSearchParams;return n.append("months",r.toString()),a&&n.append("userId",a.toString()),n.append("scope",s),(await oe.get(`/analytics/charts/sales-pipeline-flow?${n}`)).data}async getTopPerformers(r=5,a,s="all"){const n=new URLSearchParams;return n.append("limit",r.toString()),a&&n.append("userId",a.toString()),n.append("scope",s),(await oe.get(`/analytics/charts/top-performers?${n}`)).data}async getDealVelocity(r=6,a,s="all"){const n=new URLSearchParams;return n.append("months",r.toString()),a&&n.append("userId",a.toString()),n.append("scope",s),(await oe.get(`/analytics/charts/deal-velocity?${n}`)).data}async getKPIs(r,a,s,n="all"){const i=new URLSearchParams;return r&&i.append("startDate",r),a&&i.append("endDate",a),s&&i.append("userId",s.toString()),i.append("scope",n),(await oe.get(`/analytics/dashboard/kpis?${i}`)).data}async getLeadSourceDistribution(r,a="all"){const s=new URLSearchParams;return r&&s.append("userId",r.toString()),s.append("scope",a),(await oe.get(`/analytics/charts/lead-source-distribution?${s}`)).data}async getTaskReport(r=6,a,s="all",n=1,i=10){const o=new URLSearchParams;return o.append("months",r.toString()),a&&o.append("userId",a.toString()),o.append("scope",s),o.append("page",n.toString()),o.append("limit",i.toString()),(await oe.get(`/analytics/reports/task?${o}`)).data}async getLeadReport(r=6,a,s="all",n=1,i=10){const o=new URLSearchParams;return o.append("months",r.toString()),a&&o.append("userId",a.toString()),o.append("scope",s),o.append("page",n.toString()),o.append("limit",i.toString()),(await oe.get(`/analytics/reports/lead?${o}`)).data}async getDealReport(r=6,a,s="all",n=1,i=10){const o=new URLSearchParams;return o.append("months",r.toString()),a&&o.append("userId",a.toString()),o.append("scope",s),o.append("page",n.toString()),o.append("limit",i.toString()),(await oe.get(`/analytics/reports/deal?${o}`)).data}async getExpenseReport(r=6,a,s="all",n=1,i=10){const o=new URLSearchParams;return o.append("months",r.toString()),a&&o.append("userId",a.toString()),o.append("scope",s),o.append("page",n.toString()),o.append("limit",i.toString()),(await oe.get(`/analytics/reports/expense?${o}`)).data}async getInvoiceReport(r=6,a,s="all",n=1,i=10){const o=new URLSearchParams;return o.append("months",r.toString()),a&&o.append("userId",a.toString()),o.append("scope",s),o.append("page",n.toString()),o.append("limit",i.toString()),(await oe.get(`/analytics/reports/invoice?${o}`)).data}async getQuotationReport(r=6,a,s="all",n=1,i=10){const o=new URLSearchParams;return o.append("months",r.toString()),a&&o.append("userId",a.toString()),o.append("scope",s),o.append("page",n.toString()),o.append("limit",i.toString()),(await oe.get(`/analytics/reports/quotation?${o}`)).data}}const Jn=new FF;function UD(e){var r,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(r=0;r<n;r++)e[r]&&(a=UD(e[r]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function tr(){for(var e,r,a=0,s="",n=arguments.length;a<n;a++)(e=arguments[a])&&(r=UD(e))&&(s&&(s+=" "),s+=r);return s}var zF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function sj(e){if(typeof e!="string")return!1;var r=zF;return r.includes(e)}var BF=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],qF=new Set(BF);function FD(e){return typeof e!="string"?!1:qF.has(e)}function zD(e){return typeof e=="string"&&e.startsWith("data-")}function fs(e){if(typeof e!="object"||e===null)return{};var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(FD(a)||zD(a))&&(r[a]=e[a]);return r}function Fl(e){if(e==null)return null;if(h.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var r=e.props;return fs(r)}return typeof e=="object"&&!Array.isArray(e)?fs(e):null}function ss(e){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(FD(a)||zD(a)||sj(a))&&(r[a]=e[a]);return r}function HF(e){return e==null?null:h.isValidElement(e)?ss(e.props):typeof e=="object"&&!Array.isArray(e)?ss(e):null}var WF=["children","width","height","viewBox","className","style","title","desc"];function Ob(){return Ob=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ob.apply(null,arguments)}function VF(e,r){if(e==null)return{};var a,s,n=KF(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function KF(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var nj=h.forwardRef((e,r)=>{var{children:a,width:s,height:n,viewBox:i,className:o,style:c,title:u,desc:m}=e,g=VF(e,WF),f=i||{width:s,height:n,x:0,y:0},y=tr("recharts-surface",o);return h.createElement("svg",Ob({},ss(g),{className:y,width:s,height:n,style:c,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:r}),h.createElement("title",null,u),h.createElement("desc",null,m),a)}),GF=["children","className"];function Ib(){return Ib=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ib.apply(null,arguments)}function YF(e,r){if(e==null)return{};var a,s,n=QF(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function QF(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var Xr=h.forwardRef((e,r)=>{var{children:a,className:s}=e,n=YF(e,GF),i=tr("recharts-layer",s);return h.createElement("g",Ib({className:i},ss(n),{ref:r}),a)}),BD=h.createContext(null),XF=()=>h.useContext(BD);function Sr(e){return function(){return e}}const qD=Math.cos,l0=Math.sin,Hn=Math.sqrt,c0=Math.PI,bf=2*c0,Lb=Math.PI,Rb=2*Lb,pl=1e-6,ZF=Rb-pl;function HD(e){this._+=e[0];for(let r=1,a=e.length;r<a;++r)this._+=arguments[r]+e[r]}function JF(e){let r=Math.floor(e);if(!(r>=0))throw new Error(`invalid digits: ${e}`);if(r>15)return HD;const a=10**r;return function(s){this._+=s[0];for(let n=1,i=s.length;n<i;++n)this._+=Math.round(arguments[n]*a)/a+s[n]}}class ez{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?HD:JF(r)}moveTo(r,a){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,a){this._append`L${this._x1=+r},${this._y1=+a}`}quadraticCurveTo(r,a,s,n){this._append`Q${+r},${+a},${this._x1=+s},${this._y1=+n}`}bezierCurveTo(r,a,s,n,i,o){this._append`C${+r},${+a},${+s},${+n},${this._x1=+i},${this._y1=+o}`}arcTo(r,a,s,n,i){if(r=+r,a=+a,s=+s,n=+n,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,c=this._y1,u=s-r,m=n-a,g=o-r,f=c-a,y=g*g+f*f;if(this._x1===null)this._append`M${this._x1=r},${this._y1=a}`;else if(y>pl)if(!(Math.abs(f*u-m*g)>pl)||!i)this._append`L${this._x1=r},${this._y1=a}`;else{let p=s-o,b=n-c,j=u*u+m*m,v=p*p+b*b,N=Math.sqrt(j),k=Math.sqrt(y),E=i*Math.tan((Lb-Math.acos((j+y-v)/(2*N*k)))/2),C=E/k,S=E/N;Math.abs(C-1)>pl&&this._append`L${r+C*g},${a+C*f}`,this._append`A${i},${i},0,0,${+(f*p>g*b)},${this._x1=r+S*u},${this._y1=a+S*m}`}}arc(r,a,s,n,i,o){if(r=+r,a=+a,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let c=s*Math.cos(n),u=s*Math.sin(n),m=r+c,g=a+u,f=1^o,y=o?n-i:i-n;this._x1===null?this._append`M${m},${g}`:(Math.abs(this._x1-m)>pl||Math.abs(this._y1-g)>pl)&&this._append`L${m},${g}`,s&&(y<0&&(y=y%Rb+Rb),y>ZF?this._append`A${s},${s},0,1,${f},${r-c},${a-u}A${s},${s},0,1,${f},${this._x1=m},${this._y1=g}`:y>pl&&this._append`A${s},${s},0,${+(y>=Lb)},${f},${this._x1=r+s*Math.cos(i)},${this._y1=a+s*Math.sin(i)}`)}rect(r,a,s,n){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+a}h${s=+s}v${+n}h${-s}Z`}toString(){return this._}}function ij(e){let r=3;return e.digits=function(a){if(!arguments.length)return r;if(a==null)r=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);r=s}return e},()=>new ez(r)}function oj(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function WD(e){this._context=e}WD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:this._context.lineTo(e,r);break}}};function wf(e){return new WD(e)}function VD(e){return e[0]}function KD(e){return e[1]}function GD(e,r){var a=Sr(!0),s=null,n=wf,i=null,o=ij(c);e=typeof e=="function"?e:e===void 0?VD:Sr(e),r=typeof r=="function"?r:r===void 0?KD:Sr(r);function c(u){var m,g=(u=oj(u)).length,f,y=!1,p;for(s==null&&(i=n(p=o())),m=0;m<=g;++m)!(m<g&&a(f=u[m],m,u))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+e(f,m,u),+r(f,m,u));if(p)return i=null,p+""||null}return c.x=function(u){return arguments.length?(e=typeof u=="function"?u:Sr(+u),c):e},c.y=function(u){return arguments.length?(r=typeof u=="function"?u:Sr(+u),c):r},c.defined=function(u){return arguments.length?(a=typeof u=="function"?u:Sr(!!u),c):a},c.curve=function(u){return arguments.length?(n=u,s!=null&&(i=n(s)),c):n},c.context=function(u){return arguments.length?(u==null?s=i=null:i=n(s=u),c):s},c}function ch(e,r,a){var s=null,n=Sr(!0),i=null,o=wf,c=null,u=ij(m);e=typeof e=="function"?e:e===void 0?VD:Sr(+e),r=typeof r=="function"?r:Sr(r===void 0?0:+r),a=typeof a=="function"?a:a===void 0?KD:Sr(+a);function m(f){var y,p,b,j=(f=oj(f)).length,v,N=!1,k,E=new Array(j),C=new Array(j);for(i==null&&(c=o(k=u())),y=0;y<=j;++y){if(!(y<j&&n(v=f[y],y,f))===N)if(N=!N)p=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),b=y-1;b>=p;--b)c.point(E[b],C[b]);c.lineEnd(),c.areaEnd()}N&&(E[y]=+e(v,y,f),C[y]=+r(v,y,f),c.point(s?+s(v,y,f):E[y],a?+a(v,y,f):C[y]))}if(k)return c=null,k+""||null}function g(){return GD().defined(n).curve(o).context(i)}return m.x=function(f){return arguments.length?(e=typeof f=="function"?f:Sr(+f),s=null,m):e},m.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Sr(+f),m):e},m.x1=function(f){return arguments.length?(s=f==null?null:typeof f=="function"?f:Sr(+f),m):s},m.y=function(f){return arguments.length?(r=typeof f=="function"?f:Sr(+f),a=null,m):r},m.y0=function(f){return arguments.length?(r=typeof f=="function"?f:Sr(+f),m):r},m.y1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:Sr(+f),m):a},m.lineX0=m.lineY0=function(){return g().x(e).y(r)},m.lineY1=function(){return g().x(e).y(a)},m.lineX1=function(){return g().x(s).y(r)},m.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Sr(!!f),m):n},m.curve=function(f){return arguments.length?(o=f,i!=null&&(c=o(i)),m):o},m.context=function(f){return arguments.length?(f==null?i=c=null:c=o(i=f),m):i},m}class YD{constructor(r,a){this._context=r,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(r,a){switch(r=+r,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+r)/2,this._y0,this._x0,a,r,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,r,this._y0,r,a);break}}this._x0=r,this._y0=a}}function tz(e){return new YD(e,!0)}function rz(e){return new YD(e,!1)}const lj={draw(e,r){const a=Hn(r/c0);e.moveTo(a,0),e.arc(0,0,a,0,bf)}},az={draw(e,r){const a=Hn(r/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},QD=Hn(1/3),sz=QD*2,nz={draw(e,r){const a=Hn(r/sz),s=a*QD;e.moveTo(0,-a),e.lineTo(s,0),e.lineTo(0,a),e.lineTo(-s,0),e.closePath()}},iz={draw(e,r){const a=Hn(r),s=-a/2;e.rect(s,s,a,a)}},oz=.8908130915292852,XD=l0(c0/10)/l0(7*c0/10),lz=l0(bf/10)*XD,cz=-qD(bf/10)*XD,dz={draw(e,r){const a=Hn(r*oz),s=lz*a,n=cz*a;e.moveTo(0,-a),e.lineTo(s,n);for(let i=1;i<5;++i){const o=bf*i/5,c=qD(o),u=l0(o);e.lineTo(u*a,-c*a),e.lineTo(c*s-u*n,u*s+c*n)}e.closePath()}},vy=Hn(3),uz={draw(e,r){const a=-Hn(r/(vy*3));e.moveTo(0,a*2),e.lineTo(-vy*a,-a),e.lineTo(vy*a,-a),e.closePath()}},ln=-.5,cn=Hn(3)/2,Mb=1/Hn(12),mz=(Mb/2+1)*3,gz={draw(e,r){const a=Hn(r/mz),s=a/2,n=a*Mb,i=s,o=a*Mb+a,c=-i,u=o;e.moveTo(s,n),e.lineTo(i,o),e.lineTo(c,u),e.lineTo(ln*s-cn*n,cn*s+ln*n),e.lineTo(ln*i-cn*o,cn*i+ln*o),e.lineTo(ln*c-cn*u,cn*c+ln*u),e.lineTo(ln*s+cn*n,ln*n-cn*s),e.lineTo(ln*i+cn*o,ln*o-cn*i),e.lineTo(ln*c+cn*u,ln*u-cn*c),e.closePath()}};function hz(e,r){let a=null,s=ij(n);e=typeof e=="function"?e:Sr(e||lj),r=typeof r=="function"?r:Sr(r===void 0?64:+r);function n(){let i;if(a||(a=i=s()),e.apply(this,arguments).draw(a,+r.apply(this,arguments)),i)return a=null,i+""||null}return n.type=function(i){return arguments.length?(e=typeof i=="function"?i:Sr(i),n):e},n.size=function(i){return arguments.length?(r=typeof i=="function"?i:Sr(+i),n):r},n.context=function(i){return arguments.length?(a=i??null,n):a},n}function d0(){}function u0(e,r,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+r)/6,(e._y0+4*e._y1+a)/6)}function ZD(e){this._context=e}ZD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:u0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:u0(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function fz(e){return new ZD(e)}function JD(e){this._context=e}JD.prototype={areaStart:d0,areaEnd:d0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._x2=e,this._y2=r;break;case 1:this._point=2,this._x3=e,this._y3=r;break;case 2:this._point=3,this._x4=e,this._y4=r,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+r)/6);break;default:u0(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function xz(e){return new JD(e)}function e3(e){this._context=e}e3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(a,s):this._context.moveTo(a,s);break;case 3:this._point=4;default:u0(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function pz(e){return new e3(e)}function t3(e){this._context=e}t3.prototype={areaStart:d0,areaEnd:d0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,r){e=+e,r=+r,this._point?this._context.lineTo(e,r):(this._point=1,this._context.moveTo(e,r))}};function yz(e){return new t3(e)}function aC(e){return e<0?-1:1}function sC(e,r,a){var s=e._x1-e._x0,n=r-e._x1,i=(e._y1-e._y0)/(s||n<0&&-0),o=(a-e._y1)/(n||s<0&&-0),c=(i*n+o*s)/(s+n);return(aC(i)+aC(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(c))||0}function nC(e,r){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-r)/2:r}function by(e,r,a){var s=e._x0,n=e._y0,i=e._x1,o=e._y1,c=(i-s)/3;e._context.bezierCurveTo(s+c,n+c*r,i-c,o-c*a,i,o)}function m0(e){this._context=e}m0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:by(this,this._t0,nC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){var a=NaN;if(e=+e,r=+r,!(e===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,by(this,nC(this,a=sC(this,e,r)),a);break;default:by(this,this._t0,a=sC(this,e,r));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r,this._t0=a}}};function r3(e){this._context=new a3(e)}(r3.prototype=Object.create(m0.prototype)).point=function(e,r){m0.prototype.point.call(this,r,e)};function a3(e){this._context=e}a3.prototype={moveTo:function(e,r){this._context.moveTo(r,e)},closePath:function(){this._context.closePath()},lineTo:function(e,r){this._context.lineTo(r,e)},bezierCurveTo:function(e,r,a,s,n,i){this._context.bezierCurveTo(r,e,s,a,i,n)}};function vz(e){return new m0(e)}function bz(e){return new r3(e)}function s3(e){this._context=e}s3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,r=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],r[0]):this._context.moveTo(e[0],r[0]),a===2)this._context.lineTo(e[1],r[1]);else for(var s=iC(e),n=iC(r),i=0,o=1;o<a;++i,++o)this._context.bezierCurveTo(s[0][i],n[0][i],s[1][i],n[1][i],e[o],r[o]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,r){this._x.push(+e),this._y.push(+r)}};function iC(e){var r,a=e.length-1,s,n=new Array(a),i=new Array(a),o=new Array(a);for(n[0]=0,i[0]=2,o[0]=e[0]+2*e[1],r=1;r<a-1;++r)n[r]=1,i[r]=4,o[r]=4*e[r]+2*e[r+1];for(n[a-1]=2,i[a-1]=7,o[a-1]=8*e[a-1]+e[a],r=1;r<a;++r)s=n[r]/i[r-1],i[r]-=s,o[r]-=s*o[r-1];for(n[a-1]=o[a-1]/i[a-1],r=a-2;r>=0;--r)n[r]=(o[r]-n[r+1])/i[r];for(i[a-1]=(e[a]+n[a-1])/2,r=0;r<a-1;++r)i[r]=2*e[r+1]-n[r+1];return[n,i]}function wz(e){return new s3(e)}function jf(e,r){this._context=e,this._t=r}jf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(e,r);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,r)}break}}this._x=e,this._y=r}};function jz(e){return new jf(e,.5)}function Nz(e){return new jf(e,0)}function kz(e){return new jf(e,1)}function Kc(e,r){if((o=e.length)>1)for(var a=1,s,n,i=e[r[0]],o,c=i.length;a<o;++a)for(n=i,i=e[r[a]],s=0;s<c;++s)i[s][1]+=i[s][0]=isNaN(n[s][1])?n[s][0]:n[s][1]}function _b(e){for(var r=e.length,a=new Array(r);--r>=0;)a[r]=r;return a}function Sz(e,r){return e[r]}function Cz(e){const r=[];return r.key=e,r}function Ez(){var e=Sr([]),r=_b,a=Kc,s=Sz;function n(i){var o=Array.from(e.apply(this,arguments),Cz),c,u=o.length,m=-1,g;for(const f of i)for(c=0,++m;c<u;++c)(o[c][m]=[0,+s(f,o[c].key,m,i)]).data=f;for(c=0,g=oj(r(o));c<u;++c)o[g[c]].index=c;return a(o,g),o}return n.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Sr(Array.from(i)),n):e},n.value=function(i){return arguments.length?(s=typeof i=="function"?i:Sr(+i),n):s},n.order=function(i){return arguments.length?(r=i==null?_b:typeof i=="function"?i:Sr(Array.from(i)),n):r},n.offset=function(i){return arguments.length?(a=i??Kc,n):a},n}function Az(e,r){if((s=e.length)>0){for(var a,s,n=0,i=e[0].length,o;n<i;++n){for(o=a=0;a<s;++a)o+=e[a][n][1]||0;if(o)for(a=0;a<s;++a)e[a][n][1]/=o}Kc(e,r)}}function Pz(e,r){if((n=e.length)>0){for(var a=0,s=e[r[0]],n,i=s.length;a<i;++a){for(var o=0,c=0;o<n;++o)c+=e[o][a][1]||0;s[a][1]+=s[a][0]=-c/2}Kc(e,r)}}function Tz(e,r){if(!(!((o=e.length)>0)||!((i=(n=e[r[0]]).length)>0))){for(var a=0,s=1,n,i,o;s<i;++s){for(var c=0,u=0,m=0;c<o;++c){for(var g=e[r[c]],f=g[s][1]||0,y=g[s-1][1]||0,p=(f-y)/2,b=0;b<c;++b){var j=e[r[b]],v=j[s][1]||0,N=j[s-1][1]||0;p+=v-N}u+=f,m+=p*f}n[s-1][1]+=n[s-1][0]=a,u&&(a-=m/u)}n[s-1][1]+=n[s-1][0]=a,Kc(e,r)}}var wy={},jy={},oC;function Dz(){return oC||(oC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return a==="__proto__"}e.isUnsafeProperty=r})(jy)),jy}var Ny={},lC;function n3(){return lC||(lC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){switch(typeof a){case"number":case"symbol":return!1;case"string":return a.includes(".")||a.includes("[")||a.includes("]")}}e.isDeepKey=r})(Ny)),Ny}var ky={},cC;function cj(){return cC||(cC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return typeof a=="string"||typeof a=="symbol"?a:Object.is(a?.valueOf?.(),-0)?"-0":String(a)}e.toKey=r})(ky)),ky}var Sy={},Cy={},dC;function Oz(){return dC||(dC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){if(a==null)return"";if(typeof a=="string")return a;if(Array.isArray(a))return a.map(r).join(",");const s=String(a);return s==="0"&&Object.is(Number(a),-0)?"-0":s}e.toString=r})(Cy)),Cy}var uC;function dj(){return uC||(uC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Oz(),a=cj();function s(n){if(Array.isArray(n))return n.map(a.toKey);if(typeof n=="symbol")return[n];n=r.toString(n);const i=[],o=n.length;if(o===0)return i;let c=0,u="",m="",g=!1;for(n.charCodeAt(0)===46&&(i.push(""),c++);c<o;){const f=n[c];m?f==="\\"&&c+1<o?(c++,u+=n[c]):f===m?m="":u+=f:g?f==='"'||f==="'"?m=f:f==="]"?(g=!1,i.push(u),u=""):u+=f:f==="["?(g=!0,u&&(i.push(u),u="")):f==="."?u&&(i.push(u),u=""):u+=f,c++}return u&&i.push(u),i}e.toPath=s})(Sy)),Sy}var mC;function uj(){return mC||(mC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Dz(),a=n3(),s=cj(),n=dj();function i(c,u,m){if(c==null)return m;switch(typeof u){case"string":{if(r.isUnsafeProperty(u))return m;const g=c[u];return g===void 0?a.isDeepKey(u)?i(c,n.toPath(u),m):m:g}case"number":case"symbol":{typeof u=="number"&&(u=s.toKey(u));const g=c[u];return g===void 0?m:g}default:{if(Array.isArray(u))return o(c,u,m);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),r.isUnsafeProperty(u))return m;const g=c[u];return g===void 0?m:g}}}function o(c,u,m){if(u.length===0)return m;let g=c;for(let f=0;f<u.length;f++){if(g==null||r.isUnsafeProperty(u[f]))return m;g=g[u[f]]}return g===void 0?m:g}e.get=i})(wy)),wy}var Ey,gC;function Iz(){return gC||(gC=1,Ey=uj().get),Ey}var Lz=Iz();const zl=di(Lz);var Ra=e=>e===0?0:e>0?1:-1,yn=e=>typeof e=="number"&&e!=+e,Fi=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Je=e=>(typeof e=="number"||e instanceof Number)&&!yn(e),ni=e=>Je(e)||typeof e=="string",Rz=0,Ku=e=>{var r=++Rz;return"".concat(e||"").concat(r)},as=function(r,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Je(r)&&typeof r!="string")return s;var i;if(Fi(r)){if(a==null)return s;var o=r.indexOf("%");i=a*parseFloat(r.slice(0,o))/100}else i=+r;return yn(i)&&(i=s),n&&a!=null&&i>a&&(i=a),i},i3=e=>{if(!Array.isArray(e))return!1;for(var r=e.length,a={},s=0;s<r;s++)if(!a[e[s]])a[e[s]]=!0;else return!0;return!1};function dr(e,r,a){return Je(e)&&Je(r)?e+a*(r-e):r}function o3(e,r,a){if(!(!e||!e.length))return e.find(s=>s&&(typeof r=="function"?r(s):zl(s,r))===a)}var Or=e=>e===null||typeof e>"u",km=e=>Or(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Mz(e){return e!=null}function Sm(){}var _z=["type","size","sizeType"];function $b(){return $b=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},$b.apply(null,arguments)}function hC(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function fC(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?hC(Object(a),!0).forEach(function(s){$z(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hC(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function $z(e,r,a){return(r=Uz(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Uz(e){var r=Fz(e,"string");return typeof r=="symbol"?r:r+""}function Fz(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function zz(e,r){if(e==null)return{};var a,s,n=Bz(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Bz(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var l3={symbolCircle:lj,symbolCross:az,symbolDiamond:nz,symbolSquare:iz,symbolStar:dz,symbolTriangle:uz,symbolWye:gz},qz=Math.PI/180,Hz=e=>{var r="symbol".concat(km(e));return l3[r]||lj},Wz=(e,r,a)=>{if(r==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*qz;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Vz=(e,r)=>{l3["symbol".concat(km(e))]=r},mj=e=>{var{type:r="circle",size:a=64,sizeType:s="area"}=e,n=zz(e,_z),i=fC(fC({},n),{},{type:r,size:a,sizeType:s}),o="circle";typeof r=="string"&&(o=r);var c=()=>{var y=Hz(o),p=hz().type(y).size(Wz(a,s,o)),b=p();if(b!==null)return b},{className:u,cx:m,cy:g}=i,f=ss(i);return Je(m)&&Je(g)&&Je(a)?h.createElement("path",$b({},f,{className:tr("recharts-symbols",u),transform:"translate(".concat(m,", ").concat(g,")"),d:c()})):null};mj.registerSymbol=Vz;var c3=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,gj=(e,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(h.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var s={};return Object.keys(a).forEach(n=>{sj(n)&&(s[n]=(i=>a[n](a,i)))}),s},Kz=(e,r,a)=>s=>(e(r,a,s),null),Cm=(e,r,a)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var s=null;return Object.keys(e).forEach(n=>{var i=e[n];sj(n)&&typeof i=="function"&&(s||(s={}),s[n]=Kz(i,r,a))}),s};function xC(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function Gz(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?xC(Object(a),!0).forEach(function(s){Yz(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xC(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Yz(e,r,a){return(r=Qz(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Qz(e){var r=Xz(e,"string");return typeof r=="symbol"?r:r+""}function Xz(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Zr(e,r){var a=Gz({},e),s=r,n=Object.keys(r),i=n.reduce((o,c)=>(o[c]===void 0&&s[c]!==void 0&&(o[c]=s[c]),o),a);return i}function g0(){return g0=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},g0.apply(null,arguments)}function pC(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function Zz(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?pC(Object(a),!0).forEach(function(s){Jz(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pC(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Jz(e,r,a){return(r=eB(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function eB(e){var r=tB(e,"string");return typeof r=="symbol"?r:r+""}function tB(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var mn=32,rB={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function aB(e){var{data:r,iconType:a,inactiveColor:s}=e,n=mn/2,i=mn/6,o=mn/3,c=r.inactive?s:r.color,u=a??r.type;if(u==="none")return null;if(u==="plainline"){var m;return h.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:(m=r.payload)===null||m===void 0?void 0:m.strokeDasharray,x1:0,y1:n,x2:mn,y2:n,className:"recharts-legend-icon"})}if(u==="line")return h.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(n,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(n,`
            H`).concat(mn,"M").concat(2*o,",").concat(n,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(n),className:"recharts-legend-icon"});if(u==="rect")return h.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(mn/8,"h").concat(mn,"v").concat(mn*3/4,"h").concat(-mn,"z"),className:"recharts-legend-icon"});if(h.isValidElement(r.legendIcon)){var g=Zz({},r);return delete g.legendIcon,h.cloneElement(r.legendIcon,g)}return h.createElement(mj,{fill:c,cx:n,cy:n,size:mn,sizeType:"diameter",type:u})}function sB(e){var{payload:r,iconSize:a,layout:s,formatter:n,inactiveColor:i,iconType:o}=e,c={x:0,y:0,width:mn,height:mn},u={display:s==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map((g,f)=>{var y=g.formatter||n,p=tr({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:g.inactive});if(g.type==="none")return null;var b=g.inactive?i:g.color,j=y?y(g.value,g,f):g.value;return h.createElement("li",g0({className:p,style:u,key:"legend-item-".concat(f)},Cm(e,g,f)),h.createElement(nj,{width:a,height:a,viewBox:c,style:m,"aria-label":"".concat(j," legend icon")},h.createElement(aB,{data:g,iconType:o,inactiveColor:i})),h.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},j))})}var nB=e=>{var r=Zr(e,rB),{payload:a,layout:s,align:n}=r;if(!a||!a.length)return null;var i={padding:0,margin:0,textAlign:s==="horizontal"?n:"left"};return h.createElement("ul",{className:"recharts-default-legend",style:i},h.createElement(sB,g0({},r,{payload:a})))},Ay={},Py={},yC;function iB(){return yC||(yC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a,s){const n=new Map;for(let i=0;i<a.length;i++){const o=a[i],c=s(o);n.has(c)||n.set(c,o)}return Array.from(n.values())}e.uniqBy=r})(Py)),Py}var Ty={},vC;function d3(){return vC||(vC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return a}e.identity=r})(Ty)),Ty}var Dy={},Oy={},Iy={},bC;function oB(){return bC||(bC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return Number.isSafeInteger(a)&&a>=0}e.isLength=r})(Iy)),Iy}var wC;function hj(){return wC||(wC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=oB();function a(s){return s!=null&&typeof s!="function"&&r.isLength(s.length)}e.isArrayLike=a})(Oy)),Oy}var Ly={},jC;function lB(){return jC||(jC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return typeof a=="object"&&a!==null}e.isObjectLike=r})(Ly)),Ly}var NC;function cB(){return NC||(NC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=hj(),a=lB();function s(n){return a.isObjectLike(n)&&r.isArrayLike(n)}e.isArrayLikeObject=s})(Dy)),Dy}var Ry={},My={},kC;function dB(){return kC||(kC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=uj();function a(s){return function(n){return r.get(n,s)}}e.property=a})(My)),My}var _y={},$y={},Uy={},Fy={},SC;function u3(){return SC||(SC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return a!==null&&(typeof a=="object"||typeof a=="function")}e.isObject=r})(Fy)),Fy}var zy={},CC;function m3(){return CC||(CC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return a==null||typeof a!="object"&&typeof a!="function"}e.isPrimitive=r})(zy)),zy}var By={},EC;function g3(){return EC||(EC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a,s){return a===s||Number.isNaN(a)&&Number.isNaN(s)}e.eq=r})(By)),By}var AC;function uB(){return AC||(AC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=u3(),a=m3(),s=g3();function n(g,f,y){return typeof y!="function"?n(g,f,()=>{}):i(g,f,function p(b,j,v,N,k,E){const C=y(b,j,v,N,k,E);return C!==void 0?!!C:i(b,j,p,E)},new Map)}function i(g,f,y,p){if(f===g)return!0;switch(typeof f){case"object":return o(g,f,y,p);case"function":return Object.keys(f).length>0?i(g,{...f},y,p):s.eq(g,f);default:return r.isObject(g)?typeof f=="string"?f==="":!0:s.eq(g,f)}}function o(g,f,y,p){if(f==null)return!0;if(Array.isArray(f))return u(g,f,y,p);if(f instanceof Map)return c(g,f,y,p);if(f instanceof Set)return m(g,f,y,p);const b=Object.keys(f);if(g==null)return b.length===0;if(b.length===0)return!0;if(p?.has(f))return p.get(f)===g;p?.set(f,g);try{for(let j=0;j<b.length;j++){const v=b[j];if(!a.isPrimitive(g)&&!(v in g)||f[v]===void 0&&g[v]!==void 0||f[v]===null&&g[v]!==null||!y(g[v],f[v],v,g,f,p))return!1}return!0}finally{p?.delete(f)}}function c(g,f,y,p){if(f.size===0)return!0;if(!(g instanceof Map))return!1;for(const[b,j]of f.entries()){const v=g.get(b);if(y(v,j,b,g,f,p)===!1)return!1}return!0}function u(g,f,y,p){if(f.length===0)return!0;if(!Array.isArray(g))return!1;const b=new Set;for(let j=0;j<f.length;j++){const v=f[j];let N=!1;for(let k=0;k<g.length;k++){if(b.has(k))continue;const E=g[k];let C=!1;if(y(E,v,j,g,f,p)&&(C=!0),C){b.add(k),N=!0;break}}if(!N)return!1}return!0}function m(g,f,y,p){return f.size===0?!0:g instanceof Set?u([...g],[...f],y,p):!1}e.isMatchWith=n,e.isSetMatch=m})(Uy)),Uy}var PC;function h3(){return PC||(PC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=uB();function a(s,n){return r.isMatchWith(s,n,()=>{})}e.isMatch=a})($y)),$y}var qy={},Hy={},Wy={},TC;function mB(){return TC||(TC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return Object.getOwnPropertySymbols(a).filter(s=>Object.prototype.propertyIsEnumerable.call(a,s))}e.getSymbols=r})(Wy)),Wy}var Vy={},DC;function f3(){return DC||(DC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}e.getTag=r})(Vy)),Vy}var Ky={},OC;function x3(){return OC||(OC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r="[object RegExp]",a="[object String]",s="[object Number]",n="[object Boolean]",i="[object Arguments]",o="[object Symbol]",c="[object Date]",u="[object Map]",m="[object Set]",g="[object Array]",f="[object Function]",y="[object ArrayBuffer]",p="[object Object]",b="[object Error]",j="[object DataView]",v="[object Uint8Array]",N="[object Uint8ClampedArray]",k="[object Uint16Array]",E="[object Uint32Array]",C="[object BigUint64Array]",S="[object Int8Array]",P="[object Int16Array]",D="[object Int32Array]",I="[object BigInt64Array]",H="[object Float32Array]",W="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=y,e.arrayTag=g,e.bigInt64ArrayTag=I,e.bigUint64ArrayTag=C,e.booleanTag=n,e.dataViewTag=j,e.dateTag=c,e.errorTag=b,e.float32ArrayTag=H,e.float64ArrayTag=W,e.functionTag=f,e.int16ArrayTag=P,e.int32ArrayTag=D,e.int8ArrayTag=S,e.mapTag=u,e.numberTag=s,e.objectTag=p,e.regexpTag=r,e.setTag=m,e.stringTag=a,e.symbolTag=o,e.uint16ArrayTag=k,e.uint32ArrayTag=E,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=N})(Ky)),Ky}var Gy={},IC;function gB(){return IC||(IC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}e.isTypedArray=r})(Gy)),Gy}var LC;function p3(){return LC||(LC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=mB(),a=f3(),s=x3(),n=m3(),i=gB();function o(g,f){return c(g,void 0,g,new Map,f)}function c(g,f,y,p=new Map,b=void 0){const j=b?.(g,f,y,p);if(j!==void 0)return j;if(n.isPrimitive(g))return g;if(p.has(g))return p.get(g);if(Array.isArray(g)){const v=new Array(g.length);p.set(g,v);for(let N=0;N<g.length;N++)v[N]=c(g[N],N,y,p,b);return Object.hasOwn(g,"index")&&(v.index=g.index),Object.hasOwn(g,"input")&&(v.input=g.input),v}if(g instanceof Date)return new Date(g.getTime());if(g instanceof RegExp){const v=new RegExp(g.source,g.flags);return v.lastIndex=g.lastIndex,v}if(g instanceof Map){const v=new Map;p.set(g,v);for(const[N,k]of g)v.set(N,c(k,N,y,p,b));return v}if(g instanceof Set){const v=new Set;p.set(g,v);for(const N of g)v.add(c(N,void 0,y,p,b));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(g))return g.subarray();if(i.isTypedArray(g)){const v=new(Object.getPrototypeOf(g)).constructor(g.length);p.set(g,v);for(let N=0;N<g.length;N++)v[N]=c(g[N],N,y,p,b);return v}if(g instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&g instanceof SharedArrayBuffer)return g.slice(0);if(g instanceof DataView){const v=new DataView(g.buffer.slice(0),g.byteOffset,g.byteLength);return p.set(g,v),u(v,g,y,p,b),v}if(typeof File<"u"&&g instanceof File){const v=new File([g],g.name,{type:g.type});return p.set(g,v),u(v,g,y,p,b),v}if(typeof Blob<"u"&&g instanceof Blob){const v=new Blob([g],{type:g.type});return p.set(g,v),u(v,g,y,p,b),v}if(g instanceof Error){const v=new g.constructor;return p.set(g,v),v.message=g.message,v.name=g.name,v.stack=g.stack,v.cause=g.cause,u(v,g,y,p,b),v}if(g instanceof Boolean){const v=new Boolean(g.valueOf());return p.set(g,v),u(v,g,y,p,b),v}if(g instanceof Number){const v=new Number(g.valueOf());return p.set(g,v),u(v,g,y,p,b),v}if(g instanceof String){const v=new String(g.valueOf());return p.set(g,v),u(v,g,y,p,b),v}if(typeof g=="object"&&m(g)){const v=Object.create(Object.getPrototypeOf(g));return p.set(g,v),u(v,g,y,p,b),v}return g}function u(g,f,y=g,p,b){const j=[...Object.keys(f),...r.getSymbols(f)];for(let v=0;v<j.length;v++){const N=j[v],k=Object.getOwnPropertyDescriptor(g,N);(k==null||k.writable)&&(g[N]=c(f[N],N,y,p,b))}}function m(g){switch(a.getTag(g)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=c,e.copyProperties=u})(Hy)),Hy}var RC;function hB(){return RC||(RC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=p3();function a(s){return r.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}e.cloneDeep=a})(qy)),qy}var MC;function fB(){return MC||(MC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=h3(),a=hB();function s(n){return n=a.cloneDeep(n),i=>r.isMatch(i,n)}e.matches=s})(_y)),_y}var Yy={},Qy={},Xy={},_C;function xB(){return _C||(_C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=p3(),a=x3();function s(n,i){return r.cloneDeepWith(n,(o,c,u,m)=>{const g=i?.(o,c,u,m);if(g!==void 0)return g;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case a.numberTag:case a.stringTag:case a.booleanTag:{const f=new n.constructor(n?.valueOf());return r.copyProperties(f,n),f}case a.argumentsTag:{const f={};return r.copyProperties(f,n),f.length=n.length,f[Symbol.iterator]=n[Symbol.iterator],f}default:return}})}e.cloneDeepWith=s})(Xy)),Xy}var $C;function pB(){return $C||($C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=xB();function a(s){return r.cloneDeepWith(s)}e.cloneDeep=a})(Qy)),Qy}var Zy={},Jy={},UC;function y3(){return UC||(UC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=/^(?:0|[1-9]\d*)$/;function a(s,n=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<n;case"symbol":return!1;case"string":return r.test(s)}}e.isIndex=a})(Jy)),Jy}var ev={},FC;function yB(){return FC||(FC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=f3();function a(s){return s!==null&&typeof s=="object"&&r.getTag(s)==="[object Arguments]"}e.isArguments=a})(ev)),ev}var zC;function vB(){return zC||(zC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=n3(),a=y3(),s=yB(),n=dj();function i(o,c){let u;if(Array.isArray(c)?u=c:typeof c=="string"&&r.isDeepKey(c)&&o?.[c]==null?u=n.toPath(c):u=[c],u.length===0)return!1;let m=o;for(let g=0;g<u.length;g++){const f=u[g];if((m==null||!Object.hasOwn(m,f))&&!((Array.isArray(m)||s.isArguments(m))&&a.isIndex(f)&&f<m.length))return!1;m=m[f]}return!0}e.has=i})(Zy)),Zy}var BC;function bB(){return BC||(BC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=h3(),a=cj(),s=pB(),n=uj(),i=vB();function o(c,u){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=a.toKey(c);break}}return u=s.cloneDeep(u),function(m){const g=n.get(m,c);return g===void 0?i.has(m,c):u===void 0?g===void 0:r.isMatch(g,u)}}e.matchesProperty=o})(Yy)),Yy}var qC;function wB(){return qC||(qC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=d3(),a=dB(),s=fB(),n=bB();function i(o){if(o==null)return r.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?n.matchesProperty(o[0],o[1]):s.matches(o);case"string":case"symbol":case"number":return a.property(o)}}e.iteratee=i})(Ry)),Ry}var HC;function jB(){return HC||(HC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=iB(),a=d3(),s=cB(),n=wB();function i(o,c=a.identity){return s.isArrayLikeObject(o)?r.uniqBy(Array.from(o),n.iteratee(c)):[]}e.uniqBy=i})(Ay)),Ay}var tv,WC;function NB(){return WC||(WC=1,tv=jB().uniqBy),tv}var kB=NB();const VC=di(kB);function v3(e,r,a){return r===!0?VC(e,a):typeof r=="function"?VC(e,r):e}var rv={exports:{}},av={},sv={exports:{}},nv={};var KC;function SB(){if(KC)return nv;KC=1;var e=rd();function r(f,y){return f===y&&(f!==0||1/f===1/y)||f!==f&&y!==y}var a=typeof Object.is=="function"?Object.is:r,s=e.useState,n=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function c(f,y){var p=y(),b=s({inst:{value:p,getSnapshot:y}}),j=b[0].inst,v=b[1];return i(function(){j.value=p,j.getSnapshot=y,u(j)&&v({inst:j})},[f,p,y]),n(function(){return u(j)&&v({inst:j}),f(function(){u(j)&&v({inst:j})})},[f]),o(p),p}function u(f){var y=f.getSnapshot;f=f.value;try{var p=y();return!a(f,p)}catch{return!0}}function m(f,y){return y()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:c;return nv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:g,nv}var GC;function CB(){return GC||(GC=1,sv.exports=SB()),sv.exports}var YC;function EB(){if(YC)return av;YC=1;var e=rd(),r=CB();function a(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var s=typeof Object.is=="function"?Object.is:a,n=r.useSyncExternalStore,i=e.useRef,o=e.useEffect,c=e.useMemo,u=e.useDebugValue;return av.useSyncExternalStoreWithSelector=function(m,g,f,y,p){var b=i(null);if(b.current===null){var j={hasValue:!1,value:null};b.current=j}else j=b.current;b=c(function(){function N(P){if(!k){if(k=!0,E=P,P=y(P),p!==void 0&&j.hasValue){var D=j.value;if(p(D,P))return C=D}return C=P}if(D=C,s(E,P))return D;var I=y(P);return p!==void 0&&p(D,I)?(E=P,D):(E=P,C=I)}var k=!1,E,C,S=f===void 0?null:f;return[function(){return N(g())},S===null?void 0:function(){return N(S())}]},[g,f,y,p]);var v=n(m,b[0],b[1]);return o(function(){j.hasValue=!0,j.value=v},[v]),u(v),v},av}var QC;function AB(){return QC||(QC=1,rv.exports=EB()),rv.exports}var PB=AB(),fj=h.createContext(null),TB=e=>e,Ar=()=>{var e=h.useContext(fj);return e?e.store.dispatch:TB},$h=()=>{},DB=()=>$h,OB=(e,r)=>e===r;function at(e){var r=h.useContext(fj);return PB.useSyncExternalStoreWithSelector(r?r.subscription.addNestedSub:DB,r?r.store.getState:$h,r?r.store.getState:$h,r?e:$h,OB)}function IB(e,r=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(r)}function LB(e,r=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(r)}function RB(e,r="expected all items to be functions, instead received the following types: "){if(!e.every(a=>typeof a=="function")){const a=e.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${r}[${a}]`)}}var XC=e=>Array.isArray(e)?e:[e];function MB(e){const r=Array.isArray(e[0])?e[0]:e;return RB(r,"createSelector expects all input-selectors to be functions, but received the following types: "),r}function _B(e,r){const a=[],{length:s}=e;for(let n=0;n<s;n++)a.push(e[n].apply(null,r));return a}var $B=class{constructor(e){this.value=e}deref(){return this.value}},UB=typeof WeakRef<"u"?WeakRef:$B,FB=0,ZC=1;function dh(){return{s:FB,v:void 0,o:null,p:null}}function b3(e,r={}){let a=dh();const{resultEqualityCheck:s}=r;let n,i=0;function o(){let c=a;const{length:u}=arguments;for(let f=0,y=u;f<y;f++){const p=arguments[f];if(typeof p=="function"||typeof p=="object"&&p!==null){let b=c.o;b===null&&(c.o=b=new WeakMap);const j=b.get(p);j===void 0?(c=dh(),b.set(p,c)):c=j}else{let b=c.p;b===null&&(c.p=b=new Map);const j=b.get(p);j===void 0?(c=dh(),b.set(p,c)):c=j}}const m=c;let g;if(c.s===ZC)g=c.v;else if(g=e.apply(null,arguments),i++,s){const f=n?.deref?.()??n;f!=null&&s(f,g)&&(g=f,i!==0&&i--),n=typeof g=="object"&&g!==null||typeof g=="function"?new UB(g):g}return m.s=ZC,m.v=g,g}return o.clearCache=()=>{a=dh(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function zB(e,...r){const a=typeof e=="function"?{memoize:e,memoizeOptions:r}:e,s=(...n)=>{let i=0,o=0,c,u={},m=n.pop();typeof m=="object"&&(u=m,m=n.pop()),IB(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const g={...a,...u},{memoize:f,memoizeOptions:y=[],argsMemoize:p=b3,argsMemoizeOptions:b=[]}=g,j=XC(y),v=XC(b),N=MB(n),k=f(function(){return i++,m.apply(null,arguments)},...j),E=p(function(){o++;const S=_B(N,arguments);return c=k.apply(null,S),c},...v);return Object.assign(E,{resultFunc:m,memoizedResultFunc:k,dependencies:N,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>c,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:p})};return Object.assign(s,{withTypes:()=>s}),s}var we=zB(b3),BB=Object.assign((e,r=we)=>{LB(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const a=Object.keys(e),s=a.map(i=>e[i]);return r(s,(...i)=>i.reduce((o,c,u)=>(o[a[u]]=c,o),{}))},{withTypes:()=>BB}),iv={},ov={},lv={},JC;function qB(){return JC||(JC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const a=(s,n,i)=>{if(s!==n){const o=r(s),c=r(n);if(o===c&&o===0){if(s<n)return i==="desc"?1:-1;if(s>n)return i==="desc"?-1:1}return i==="desc"?c-o:o-c}return 0};e.compareValues=a})(lv)),lv}var cv={},dv={},e4;function w3(){return e4||(e4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return typeof a=="symbol"||a instanceof Symbol}e.isSymbol=r})(dv)),dv}var t4;function HB(){return t4||(t4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=w3(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function n(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||r.isSymbol(i)?!0:typeof i=="string"&&(s.test(i)||!a.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=n})(cv)),cv}var r4;function WB(){return r4||(r4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=qB(),a=HB(),s=dj();function n(i,o,c,u){if(i==null)return[];c=u?void 0:c,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(p=>String(p));const m=(p,b)=>{let j=p;for(let v=0;v<b.length&&j!=null;++v)j=j[b[v]];return j},g=(p,b)=>b==null||p==null?b:typeof p=="object"&&"key"in p?Object.hasOwn(b,p.key)?b[p.key]:m(b,p.path):typeof p=="function"?p(b):Array.isArray(p)?m(b,p):typeof b=="object"?b[p]:b,f=o.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||a.isKey(p)?p:{key:p,path:s.toPath(p)}));return i.map(p=>({original:p,criteria:f.map(b=>g(b,p))})).slice().sort((p,b)=>{for(let j=0;j<f.length;j++){const v=r.compareValues(p.criteria[j],b.criteria[j],c[j]);if(v!==0)return v}return 0}).map(p=>p.original)}e.orderBy=n})(ov)),ov}var uv={},a4;function VB(){return a4||(a4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a,s=1){const n=[],i=Math.floor(s),o=(c,u)=>{for(let m=0;m<c.length;m++){const g=c[m];Array.isArray(g)&&u<i?o(g,u+1):n.push(g)}};return o(a,0),n}e.flatten=r})(uv)),uv}var mv={},s4;function j3(){return s4||(s4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=y3(),a=hj(),s=u3(),n=g3();function i(o,c,u){return s.isObject(u)&&(typeof c=="number"&&a.isArrayLike(u)&&r.isIndex(c)&&c<u.length||typeof c=="string"&&c in u)?n.eq(u[c],o):!1}e.isIterateeCall=i})(mv)),mv}var n4;function KB(){return n4||(n4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=WB(),a=VB(),s=j3();function n(i,...o){const c=o.length;return c>1&&s.isIterateeCall(i,o[0],o[1])?o=[]:c>2&&s.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),r.orderBy(i,a.flatten(o),["asc"])}e.sortBy=n})(iv)),iv}var gv,i4;function GB(){return i4||(i4=1,gv=KB().sortBy),gv}var YB=GB();const Nf=di(YB);var N3=e=>e.legend.settings,QB=e=>e.legend.size,XB=e=>e.legend.payload,ZB=we([XB,N3],(e,r)=>{var{itemSorter:a}=r,s=e.flat(1);return a?Nf(s,a):s});function JB(){return at(ZB)}var uh=1;function k3(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[r,a]=h.useState({height:0,left:0,top:0,width:0}),s=h.useCallback(n=>{if(n!=null){var i=n.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-r.height)>uh||Math.abs(o.left-r.left)>uh||Math.abs(o.top-r.top)>uh||Math.abs(o.width-r.width)>uh)&&a({height:o.height,left:o.left,top:o.top,width:o.width})}},[r.width,r.height,r.top,r.left,...e]);return[r,s]}function Va(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var eq=typeof Symbol=="function"&&Symbol.observable||"@@observable",o4=eq,hv=()=>Math.random().toString(36).substring(7).split("").join("."),tq={INIT:`@@redux/INIT${hv()}`,REPLACE:`@@redux/REPLACE${hv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${hv()}`},h0=tq;function xj(e){if(typeof e!="object"||e===null)return!1;let r=e;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r||Object.getPrototypeOf(e)===null}function S3(e,r,a){if(typeof e!="function")throw new Error(Va(2));if(typeof r=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(Va(0));if(typeof r=="function"&&typeof a>"u"&&(a=r,r=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(Va(1));return a(S3)(e,r)}let s=e,n=r,i=new Map,o=i,c=0,u=!1;function m(){o===i&&(o=new Map,i.forEach((v,N)=>{o.set(N,v)}))}function g(){if(u)throw new Error(Va(3));return n}function f(v){if(typeof v!="function")throw new Error(Va(4));if(u)throw new Error(Va(5));let N=!0;m();const k=c++;return o.set(k,v),function(){if(N){if(u)throw new Error(Va(6));N=!1,m(),o.delete(k),i=null}}}function y(v){if(!xj(v))throw new Error(Va(7));if(typeof v.type>"u")throw new Error(Va(8));if(typeof v.type!="string")throw new Error(Va(17));if(u)throw new Error(Va(9));try{u=!0,n=s(n,v)}finally{u=!1}return(i=o).forEach(k=>{k()}),v}function p(v){if(typeof v!="function")throw new Error(Va(10));s=v,y({type:h0.REPLACE})}function b(){const v=f;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(Va(11));function k(){const C=N;C.next&&C.next(g())}return k(),{unsubscribe:v(k)}},[o4](){return this}}}return y({type:h0.INIT}),{dispatch:y,subscribe:f,getState:g,replaceReducer:p,[o4]:b}}function rq(e){Object.keys(e).forEach(r=>{const a=e[r];if(typeof a(void 0,{type:h0.INIT})>"u")throw new Error(Va(12));if(typeof a(void 0,{type:h0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Va(13))})}function C3(e){const r=Object.keys(e),a={};for(let i=0;i<r.length;i++){const o=r[i];typeof e[o]=="function"&&(a[o]=e[o])}const s=Object.keys(a);let n;try{rq(a)}catch(i){n=i}return function(o={},c){if(n)throw n;let u=!1;const m={};for(let g=0;g<s.length;g++){const f=s[g],y=a[f],p=o[f],b=y(p,c);if(typeof b>"u")throw c&&c.type,new Error(Va(14));m[f]=b,u=u||b!==p}return u=u||s.length!==Object.keys(o).length,u?m:o}}function f0(...e){return e.length===0?r=>r:e.length===1?e[0]:e.reduce((r,a)=>(...s)=>r(a(...s)))}function aq(...e){return r=>(a,s)=>{const n=r(a,s);let i=()=>{throw new Error(Va(15))};const o={getState:n.getState,dispatch:(u,...m)=>i(u,...m)},c=e.map(u=>u(o));return i=f0(...c)(n.dispatch),{...n,dispatch:i}}}function E3(e){return xj(e)&&"type"in e&&typeof e.type=="string"}var A3=Symbol.for("immer-nothing"),l4=Symbol.for("immer-draftable"),xs=Symbol.for("immer-state");function In(e,...r){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ks=Object,Gc=Ks.getPrototypeOf,x0="constructor",kf="prototype",Ub="configurable",p0="enumerable",Uh="writable",Gu="value",zi=e=>!!e&&!!e[xs];function Un(e){return e?P3(e)||Sf(e)||!!e[l4]||!!e[x0]?.[l4]||Cf(e)||Ef(e):!1}var sq=Ks[kf][x0].toString(),c4=new WeakMap;function P3(e){if(!e||!pj(e))return!1;const r=Gc(e);if(r===null||r===Ks[kf])return!0;const a=Ks.hasOwnProperty.call(r,x0)&&r[x0];if(a===Object)return!0;if(!Tc(a))return!1;let s=c4.get(a);return s===void 0&&(s=Function.toString.call(a),c4.set(a,s)),s===sq}function Em(e,r,a=!0){Am(e)===0?(a?Reflect.ownKeys(e):Ks.keys(e)).forEach(n=>{r(n,e[n],e)}):e.forEach((s,n)=>r(n,s,e))}function Am(e){const r=e[xs];return r?r.type_:Sf(e)?1:Cf(e)?2:Ef(e)?3:0}var d4=(e,r,a=Am(e))=>a===2?e.has(r):Ks[kf].hasOwnProperty.call(e,r),Fb=(e,r,a=Am(e))=>a===2?e.get(r):e[r],y0=(e,r,a,s=Am(e))=>{s===2?e.set(r,a):s===3?e.add(a):e[r]=a};function nq(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}var Sf=Array.isArray,Cf=e=>e instanceof Map,Ef=e=>e instanceof Set,pj=e=>typeof e=="object",Tc=e=>typeof e=="function",fv=e=>typeof e=="boolean",Ei=e=>e.copy_||e.base_,yj=e=>e.modified_?e.copy_:e.base_;function zb(e,r){if(Cf(e))return new Map(e);if(Ef(e))return new Set(e);if(Sf(e))return Array[kf].slice.call(e);const a=P3(e);if(r===!0||r==="class_only"&&!a){const s=Ks.getOwnPropertyDescriptors(e);delete s[xs];let n=Reflect.ownKeys(s);for(let i=0;i<n.length;i++){const o=n[i],c=s[o];c[Uh]===!1&&(c[Uh]=!0,c[Ub]=!0),(c.get||c.set)&&(s[o]={[Ub]:!0,[Uh]:!0,[p0]:c[p0],[Gu]:e[o]})}return Ks.create(Gc(e),s)}else{const s=Gc(e);if(s!==null&&a)return{...e};const n=Ks.create(s);return Ks.assign(n,e)}}function vj(e,r=!1){return Af(e)||zi(e)||!Un(e)||(Am(e)>1&&Ks.defineProperties(e,{set:mh,add:mh,clear:mh,delete:mh}),Ks.freeze(e),r&&Em(e,(a,s)=>{vj(s,!0)},!1)),e}function iq(){In(2)}var mh={[Gu]:iq};function Af(e){return e===null||!pj(e)?!0:Ks.isFrozen(e)}var v0="MapSet",Bb="Patches",T3={};function Yc(e){const r=T3[e];return r||In(0,e),r}var oq=e=>!!T3[e],Yu,D3=()=>Yu,lq=(e,r)=>({drafts_:[],parent_:e,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:oq(v0)?Yc(v0):void 0});function u4(e,r){r&&(e.patchPlugin_=Yc(Bb),e.patches_=[],e.inversePatches_=[],e.patchListener_=r)}function qb(e){Hb(e),e.drafts_.forEach(cq),e.drafts_=null}function Hb(e){e===Yu&&(Yu=e.parent_)}var m4=e=>Yu=lq(Yu,e);function cq(e){const r=e[xs];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function g4(e,r){r.unfinalizedDrafts_=r.drafts_.length;const a=r.drafts_[0];if(e!==void 0&&e!==a){a[xs].modified_&&(qb(r),In(4)),Un(e)&&(e=h4(r,e));const{patchPlugin_:n}=r;n&&n.generateReplacementPatches_(a[xs].base_,e,r)}else e=h4(r,a);return dq(r,e,!0),qb(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),e!==A3?e:void 0}function h4(e,r){if(Af(r))return r;const a=r[xs];if(!a)return bj(r,e.handledSet_,e);if(!Pf(a,e))return r;if(!a.modified_)return a.base_;if(!a.finalized_){const{callbacks_:s}=a;if(s)for(;s.length>0;)s.pop()(e);L3(a,e)}return a.copy_}function dq(e,r,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&vj(r,a)}function O3(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Pf=(e,r)=>e.scope_===r,uq=[];function I3(e,r,a,s){const n=Ei(e),i=e.type_;if(s!==void 0&&Fb(n,s,i)===r){y0(n,s,a,i);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;Em(n,(u,m)=>{if(zi(m)){const g=c.get(m)||[];g.push(u),c.set(m,g)}})}const o=e.draftLocations_.get(r)??uq;for(const c of o)y0(n,c,a,i)}function mq(e,r,a){e.callbacks_.push(function(n){const i=r;if(!i||!Pf(i,n))return;n.mapSetPlugin_?.fixSetContents(i);const o=yj(i);I3(e,i.draft_??i,o,a),L3(i,n)})}function L3(e,r){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:s}=r;if(s){const n=s.getPath(e);n&&s.generatePatches_(e,n,r)}O3(e)}}function gq(e,r,a){const{scope_:s}=e;if(zi(a)){const n=a[xs];Pf(n,s)&&n.callbacks_.push(function(){Fh(e);const o=yj(n);I3(e,a,o,r)})}else Un(a)&&e.callbacks_.push(function(){const i=Ei(e);Fb(i,r,e.type_)===a&&s.drafts_.length>1&&(e.assigned_.get(r)??!1)===!0&&e.copy_&&bj(Fb(e.copy_,r,e.type_),s.handledSet_,s)})}function bj(e,r,a){return!a.immer_.autoFreeze_&&a.unfinalizedDrafts_<1||zi(e)||r.has(e)||!Un(e)||Af(e)||(r.add(e),Em(e,(s,n)=>{if(zi(n)){const i=n[xs];if(Pf(i,a)){const o=yj(i);y0(e,s,o,e.type_),O3(i)}}else Un(n)&&bj(n,r,a)})),e}function hq(e,r){const a=Sf(e),s={type_:a?1:0,scope_:r?r.scope_:D3(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let n=s,i=wj;a&&(n=[s],i=Qu);const{revoke:o,proxy:c}=Proxy.revocable(n,i);return s.draft_=c,s.revoke_=o,[c,s]}var wj={get(e,r){if(r===xs)return e;const a=Ei(e);if(!d4(a,r,e.type_))return fq(e,a,r);const s=a[r];if(e.finalized_||!Un(s))return s;if(s===xv(e.base_,r)){Fh(e);const n=e.type_===1?+r:r,i=Vb(e.scope_,s,e,n);return e.copy_[n]=i}return s},has(e,r){return r in Ei(e)},ownKeys(e){return Reflect.ownKeys(Ei(e))},set(e,r,a){const s=R3(Ei(e),r);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const n=xv(Ei(e),r),i=n?.[xs];if(i&&i.base_===a)return e.copy_[r]=a,e.assigned_.set(r,!1),!0;if(nq(a,n)&&(a!==void 0||d4(e.base_,r,e.type_)))return!0;Fh(e),Wb(e)}return e.copy_[r]===a&&(a!==void 0||r in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[r])||(e.copy_[r]=a,e.assigned_.set(r,!0),gq(e,r,a)),!0},deleteProperty(e,r){return Fh(e),xv(e.base_,r)!==void 0||r in e.base_?(e.assigned_.set(r,!1),Wb(e)):e.assigned_.delete(r),e.copy_&&delete e.copy_[r],!0},getOwnPropertyDescriptor(e,r){const a=Ei(e),s=Reflect.getOwnPropertyDescriptor(a,r);return s&&{[Uh]:!0,[Ub]:e.type_!==1||r!=="length",[p0]:s[p0],[Gu]:a[r]}},defineProperty(){In(11)},getPrototypeOf(e){return Gc(e.base_)},setPrototypeOf(){In(12)}},Qu={};Em(wj,(e,r)=>{Qu[e]=function(){const a=arguments;return a[0]=a[0][0],r.apply(this,a)}});Qu.deleteProperty=function(e,r){return Qu.set.call(this,e,r,void 0)};Qu.set=function(e,r,a){return wj.set.call(this,e[0],r,a,e[0])};function xv(e,r){const a=e[xs];return(a?Ei(a):e)[r]}function fq(e,r,a){const s=R3(r,a);return s?Gu in s?s[Gu]:s.get?.call(e.draft_):void 0}function R3(e,r){if(!(r in e))return;let a=Gc(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,r);if(s)return s;a=Gc(a)}}function Wb(e){e.modified_||(e.modified_=!0,e.parent_&&Wb(e.parent_))}function Fh(e){e.copy_||(e.assigned_=new Map,e.copy_=zb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var xq=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(a,s,n)=>{if(Tc(a)&&!Tc(s)){const o=s;s=a;const c=this;return function(m=o,...g){return c.produce(m,f=>s.call(this,f,...g))}}Tc(s)||In(6),n!==void 0&&!Tc(n)&&In(7);let i;if(Un(a)){const o=m4(this),c=Vb(o,a,void 0);let u=!0;try{i=s(c),u=!1}finally{u?qb(o):Hb(o)}return u4(o,n),g4(i,o)}else if(!a||!pj(a)){if(i=s(a),i===void 0&&(i=a),i===A3&&(i=void 0),this.autoFreeze_&&vj(i,!0),n){const o=[],c=[];Yc(Bb).generateReplacementPatches_(a,i,{patches_:o,inversePatches_:c}),n(o,c)}return i}else In(1,a)},this.produceWithPatches=(a,s)=>{if(Tc(a))return(c,...u)=>this.produceWithPatches(c,m=>a(m,...u));let n,i;return[this.produce(a,s,(c,u)=>{n=c,i=u}),n,i]},fv(r?.autoFreeze)&&this.setAutoFreeze(r.autoFreeze),fv(r?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(r.useStrictShallowCopy),fv(r?.useStrictIteration)&&this.setUseStrictIteration(r.useStrictIteration)}createDraft(r){Un(r)||In(8),zi(r)&&(r=Mn(r));const a=m4(this),s=Vb(a,r,void 0);return s[xs].isManual_=!0,Hb(a),s}finishDraft(r,a){const s=r&&r[xs];(!s||!s.isManual_)&&In(9);const{scope_:n}=s;return u4(n,a),g4(void 0,n)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}setUseStrictIteration(r){this.useStrictIteration_=r}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(r,a){let s;for(s=a.length-1;s>=0;s--){const i=a[s];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}s>-1&&(a=a.slice(s+1));const n=Yc(Bb).applyPatches_;return zi(r)?n(r,a):this.produce(r,i=>n(i,a))}};function Vb(e,r,a,s){const[n,i]=Cf(r)?Yc(v0).proxyMap_(r,a):Ef(r)?Yc(v0).proxySet_(r,a):hq(r,a);return(a?.scope_??D3()).drafts_.push(n),i.callbacks_=a?.callbacks_??[],i.key_=s,a&&s!==void 0?mq(a,i,s):i.callbacks_.push(function(u){u.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:m}=u;i.modified_&&m&&m.generatePatches_(i,[],u)}),n}function Mn(e){return zi(e)||In(10,e),M3(e)}function M3(e){if(!Un(e)||Af(e))return e;const r=e[xs];let a,s=!0;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,a=zb(e,r.scope_.immer_.useStrictShallowCopy_),s=r.scope_.immer_.shouldUseStrictIteration()}else a=zb(e,!0);return Em(a,(n,i)=>{y0(a,n,M3(i))},s),r&&(r.finalized_=!1),a}var pq=new xq,_3=pq.produce;function $3(e){return({dispatch:a,getState:s})=>n=>i=>typeof i=="function"?i(a,s,e):n(i)}var yq=$3(),vq=$3,bq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?f0:f0.apply(null,arguments)};function vn(e,r){function a(...s){if(r){let n=r(...s);if(!n)throw new Error(Ys(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:s[0]}}return a.toString=()=>`${e}`,a.type=e,a.match=s=>E3(s)&&s.type===e,a}var U3=class Au extends Array{constructor(...r){super(...r),Object.setPrototypeOf(this,Au.prototype)}static get[Symbol.species](){return Au}concat(...r){return super.concat.apply(this,r)}prepend(...r){return r.length===1&&Array.isArray(r[0])?new Au(...r[0].concat(this)):new Au(...r.concat(this))}};function f4(e){return Un(e)?_3(e,()=>{}):e}function gh(e,r,a){return e.has(r)?e.get(r):e.set(r,a(r)).get(r)}function wq(e){return typeof e=="boolean"}var jq=()=>function(r){const{thunk:a=!0,immutableCheck:s=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=r??{};let o=new U3;return a&&(wq(a)?o.push(yq):o.push(vq(a.extraArgument))),o},F3="RTK_autoBatch",Mr=()=>e=>({payload:e,meta:{[F3]:!0}}),x4=e=>r=>{setTimeout(r,e)},z3=(e={type:"raf"})=>r=>(...a)=>{const s=r(...a);let n=!0,i=!1,o=!1;const c=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:x4(10):e.type==="callback"?e.queueNotification:x4(e.timeout),m=()=>{o=!1,i&&(i=!1,c.forEach(g=>g()))};return Object.assign({},s,{subscribe(g){const f=()=>n&&g(),y=s.subscribe(f);return c.add(g),()=>{y(),c.delete(g)}},dispatch(g){try{return n=!g?.meta?.[F3],i=!n,i&&(o||(o=!0,u(m))),s.dispatch(g)}finally{n=!0}}})},Nq=e=>function(a){const{autoBatch:s=!0}=a??{};let n=new U3(e);return s&&n.push(z3(typeof s=="object"?s:void 0)),n};function kq(e){const r=jq(),{reducer:a=void 0,middleware:s,devTools:n=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let c;if(typeof a=="function")c=a;else if(xj(a))c=C3(a);else throw new Error(Ys(1));let u;typeof s=="function"?u=s(r):u=r();let m=f0;n&&(m=bq({trace:!1,...typeof n=="object"&&n}));const g=aq(...u),f=Nq(g);let y=typeof o=="function"?o(f):f();const p=m(...y);return S3(c,i,p)}function B3(e){const r={},a=[];let s;const n={addCase(i,o){const c=typeof i=="string"?i:i.type;if(!c)throw new Error(Ys(28));if(c in r)throw new Error(Ys(29));return r[c]=o,n},addAsyncThunk(i,o){return o.pending&&(r[i.pending.type]=o.pending),o.rejected&&(r[i.rejected.type]=o.rejected),o.fulfilled&&(r[i.fulfilled.type]=o.fulfilled),o.settled&&a.push({matcher:i.settled,reducer:o.settled}),n},addMatcher(i,o){return a.push({matcher:i,reducer:o}),n},addDefaultCase(i){return s=i,n}};return e(n),[r,a,s]}function Sq(e){return typeof e=="function"}function Cq(e,r){let[a,s,n]=B3(r),i;if(Sq(e))i=()=>f4(e());else{const c=f4(e);i=()=>c}function o(c=i(),u){let m=[a[u.type],...s.filter(({matcher:g})=>g(u)).map(({reducer:g})=>g)];return m.filter(g=>!!g).length===0&&(m=[n]),m.reduce((g,f)=>{if(f)if(zi(g)){const p=f(g,u);return p===void 0?g:p}else{if(Un(g))return _3(g,y=>f(y,u));{const y=f(g,u);if(y===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return g},c)}return o.getInitialState=i,o}var Eq="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Aq=(e=21)=>{let r="",a=e;for(;a--;)r+=Eq[Math.random()*64|0];return r},Pq=Symbol.for("rtk-slice-createasyncthunk");function Tq(e,r){return`${e}/${r}`}function Dq({creators:e}={}){const r=e?.asyncThunk?.[Pq];return function(s){const{name:n,reducerPath:i=n}=s;if(!n)throw new Error(Ys(11));const o=(typeof s.reducers=="function"?s.reducers(Iq()):s.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(E,C){const S=typeof E=="string"?E:E.type;if(!S)throw new Error(Ys(12));if(S in u.sliceCaseReducersByType)throw new Error(Ys(13));return u.sliceCaseReducersByType[S]=C,m},addMatcher(E,C){return u.sliceMatchers.push({matcher:E,reducer:C}),m},exposeAction(E,C){return u.actionCreators[E]=C,m},exposeCaseReducer(E,C){return u.sliceCaseReducersByName[E]=C,m}};c.forEach(E=>{const C=o[E],S={reducerName:E,type:Tq(n,E),createNotation:typeof s.reducers=="function"};Rq(C)?_q(S,C,m,r):Lq(S,C,m)});function g(){const[E={},C=[],S=void 0]=typeof s.extraReducers=="function"?B3(s.extraReducers):[s.extraReducers],P={...E,...u.sliceCaseReducersByType};return Cq(s.initialState,D=>{for(let I in P)D.addCase(I,P[I]);for(let I of u.sliceMatchers)D.addMatcher(I.matcher,I.reducer);for(let I of C)D.addMatcher(I.matcher,I.reducer);S&&D.addDefaultCase(S)})}const f=E=>E,y=new Map,p=new WeakMap;let b;function j(E,C){return b||(b=g()),b(E,C)}function v(){return b||(b=g()),b.getInitialState()}function N(E,C=!1){function S(D){let I=D[E];return typeof I>"u"&&C&&(I=gh(p,S,v)),I}function P(D=f){const I=gh(y,C,()=>new WeakMap);return gh(I,D,()=>{const H={};for(const[W,K]of Object.entries(s.selectors??{}))H[W]=Oq(K,D,()=>gh(p,D,v),C);return H})}return{reducerPath:E,getSelectors:P,get selectors(){return P(S)},selectSlice:S}}const k={name:n,reducer:j,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:v,...N(i),injectInto(E,{reducerPath:C,...S}={}){const P=C??i;return E.inject({reducerPath:P,reducer:j},S),{...k,...N(P,!0)}}};return k}}function Oq(e,r,a,s){function n(i,...o){let c=r(i);return typeof c>"u"&&s&&(c=a()),e(c,...o)}return n.unwrapped=e,n}var Ls=Dq();function Iq(){function e(r,a){return{_reducerDefinitionType:"asyncThunk",payloadCreator:r,...a}}return e.withTypes=()=>e,{reducer(r){return Object.assign({[r.name](...a){return r(...a)}}[r.name],{_reducerDefinitionType:"reducer"})},preparedReducer(r,a){return{_reducerDefinitionType:"reducerWithPrepare",prepare:r,reducer:a}},asyncThunk:e}}function Lq({type:e,reducerName:r,createNotation:a},s,n){let i,o;if("reducer"in s){if(a&&!Mq(s))throw new Error(Ys(17));i=s.reducer,o=s.prepare}else i=s;n.addCase(e,i).exposeCaseReducer(r,i).exposeAction(r,o?vn(e,o):vn(e))}function Rq(e){return e._reducerDefinitionType==="asyncThunk"}function Mq(e){return e._reducerDefinitionType==="reducerWithPrepare"}function _q({type:e,reducerName:r},a,s,n){if(!n)throw new Error(Ys(18));const{payloadCreator:i,fulfilled:o,pending:c,rejected:u,settled:m,options:g}=a,f=n(e,i,g);s.exposeAction(r,f),o&&s.addCase(f.fulfilled,o),c&&s.addCase(f.pending,c),u&&s.addCase(f.rejected,u),m&&s.addMatcher(f.settled,m),s.exposeCaseReducer(r,{fulfilled:o||hh,pending:c||hh,rejected:u||hh,settled:m||hh})}function hh(){}var $q="task",q3="listener",H3="completed",jj="cancelled",Uq=`task-${jj}`,Fq=`task-${H3}`,Kb=`${q3}-${jj}`,zq=`${q3}-${H3}`,Tf=class{constructor(e){this.code=e,this.message=`${$q} ${jj} (reason: ${e})`}name="TaskAbortError";message},Nj=(e,r)=>{if(typeof e!="function")throw new TypeError(Ys(32))},b0=()=>{},W3=(e,r=b0)=>(e.catch(r),e),V3=(e,r)=>(e.addEventListener("abort",r,{once:!0}),()=>e.removeEventListener("abort",r)),Ol=e=>{if(e.aborted)throw new Tf(e.reason)};function K3(e,r){let a=b0;return new Promise((s,n)=>{const i=()=>n(new Tf(e.reason));if(e.aborted){i();return}a=V3(e,i),r.finally(()=>a()).then(s,n)}).finally(()=>{a=b0})}var Bq=async(e,r)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(a){return{status:a instanceof Tf?"cancelled":"rejected",error:a}}finally{r?.()}},w0=e=>r=>W3(K3(e,r).then(a=>(Ol(e),a))),G3=e=>{const r=w0(e);return a=>r(new Promise(s=>setTimeout(s,a)))},{assign:Fc}=Object,p4={},Df="listenerMiddleware",qq=(e,r)=>{const a=s=>V3(e,()=>s.abort(e.reason));return(s,n)=>{Nj(s);const i=new AbortController;a(i);const o=Bq(async()=>{Ol(e),Ol(i.signal);const c=await s({pause:w0(i.signal),delay:G3(i.signal),signal:i.signal});return Ol(i.signal),c},()=>i.abort(Fq));return n?.autoJoin&&r.push(o.catch(b0)),{result:w0(e)(o),cancel(){i.abort(Uq)}}}},Hq=(e,r)=>{const a=async(s,n)=>{Ol(r);let i=()=>{};const c=[new Promise((u,m)=>{let g=e({predicate:s,effect:(f,y)=>{y.unsubscribe(),u([f,y.getState(),y.getOriginalState()])}});i=()=>{g(),m()}})];n!=null&&c.push(new Promise(u=>setTimeout(u,n,null)));try{const u=await K3(r,Promise.race(c));return Ol(r),u}finally{i()}};return(s,n)=>W3(a(s,n))},Y3=e=>{let{type:r,actionCreator:a,matcher:s,predicate:n,effect:i}=e;if(r)n=vn(r).match;else if(a)r=a.type,n=a.match;else if(s)n=s;else if(!n)throw new Error(Ys(21));return Nj(i),{predicate:n,type:r,effect:i}},Q3=Fc(e=>{const{type:r,predicate:a,effect:s}=Y3(e);return{id:Aq(),effect:s,type:r,predicate:a,pending:new Set,unsubscribe:()=>{throw new Error(Ys(22))}}},{withTypes:()=>Q3}),y4=(e,r)=>{const{type:a,effect:s,predicate:n}=Y3(r);return Array.from(e.values()).find(i=>(typeof a=="string"?i.type===a:i.predicate===n)&&i.effect===s)},Gb=e=>{e.pending.forEach(r=>{r.abort(Kb)})},Wq=(e,r)=>()=>{for(const a of r.keys())Gb(a);e.clear()},v4=(e,r,a)=>{try{e(r,a)}catch(s){setTimeout(()=>{throw s},0)}},X3=Fc(vn(`${Df}/add`),{withTypes:()=>X3}),Vq=vn(`${Df}/removeAll`),Z3=Fc(vn(`${Df}/remove`),{withTypes:()=>Z3}),Kq=(...e)=>{console.error(`${Df}/error`,...e)},Pm=(e={})=>{const r=new Map,a=new Map,s=p=>{const b=a.get(p)??0;a.set(p,b+1)},n=p=>{const b=a.get(p)??1;b===1?a.delete(p):a.set(p,b-1)},{extra:i,onError:o=Kq}=e;Nj(o);const c=p=>(p.unsubscribe=()=>r.delete(p.id),r.set(p.id,p),b=>{p.unsubscribe(),b?.cancelActive&&Gb(p)}),u=p=>{const b=y4(r,p)??Q3(p);return c(b)};Fc(u,{withTypes:()=>u});const m=p=>{const b=y4(r,p);return b&&(b.unsubscribe(),p.cancelActive&&Gb(b)),!!b};Fc(m,{withTypes:()=>m});const g=async(p,b,j,v)=>{const N=new AbortController,k=Hq(u,N.signal),E=[];try{p.pending.add(N),s(p),await Promise.resolve(p.effect(b,Fc({},j,{getOriginalState:v,condition:(C,S)=>k(C,S).then(Boolean),take:k,delay:G3(N.signal),pause:w0(N.signal),extra:i,signal:N.signal,fork:qq(N.signal,E),unsubscribe:p.unsubscribe,subscribe:()=>{r.set(p.id,p)},cancelActiveListeners:()=>{p.pending.forEach((C,S,P)=>{C!==N&&(C.abort(Kb),P.delete(C))})},cancel:()=>{N.abort(Kb),p.pending.delete(N)},throwIfCancelled:()=>{Ol(N.signal)}})))}catch(C){C instanceof Tf||v4(o,C,{raisedBy:"effect"})}finally{await Promise.all(E),N.abort(zq),n(p),p.pending.delete(N)}},f=Wq(r,a);return{middleware:p=>b=>j=>{if(!E3(j))return b(j);if(X3.match(j))return u(j.payload);if(Vq.match(j)){f();return}if(Z3.match(j))return m(j.payload);let v=p.getState();const N=()=>{if(v===p4)throw new Error(Ys(23));return v};let k;try{if(k=b(j),r.size>0){const E=p.getState(),C=Array.from(r.values());for(const S of C){let P=!1;try{P=S.predicate(j,E,v)}catch(D){P=!1,v4(o,D,{raisedBy:"predicate"})}P&&g(S,j,p,N)}}}finally{v=p4}return k},startListening:u,stopListening:m,clearListeners:f}};function Ys(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Gq={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},J3=Ls({name:"chartLayout",initialState:Gq,reducers:{setLayout(e,r){e.layoutType=r.payload},setChartSize(e,r){e.width=r.payload.width,e.height=r.payload.height},setMargin(e,r){var a,s,n,i;e.margin.top=(a=r.payload.top)!==null&&a!==void 0?a:0,e.margin.right=(s=r.payload.right)!==null&&s!==void 0?s:0,e.margin.bottom=(n=r.payload.bottom)!==null&&n!==void 0?n:0,e.margin.left=(i=r.payload.left)!==null&&i!==void 0?i:0},setScale(e,r){e.scale=r.payload}}}),{setMargin:Yq,setLayout:Qq,setChartSize:Xq,setScale:Zq}=J3.actions,Jq=J3.reducer;function eO(e,r,a){return Array.isArray(e)&&e&&r+a!==0?e.slice(r,a+1):e}function b4(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function Rc(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?b4(Object(a),!0).forEach(function(s){eH(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b4(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function eH(e,r,a){return(r=tH(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function tH(e){var r=rH(e,"string");return typeof r=="symbol"?r:r+""}function rH(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function fr(e,r,a){return Or(e)||Or(r)?a:ni(r)?zl(e,r,a):typeof r=="function"?r(e):a}var aH=(e,r,a)=>{if(r&&a){var{width:s,height:n}=a,{align:i,verticalAlign:o,layout:c}=r;if((c==="vertical"||c==="horizontal"&&o==="middle")&&i!=="center"&&Je(e[i]))return Rc(Rc({},e),{},{[i]:e[i]+(s||0)});if((c==="horizontal"||c==="vertical"&&i==="center")&&o!=="middle"&&Je(e[o]))return Rc(Rc({},e),{},{[o]:e[o]+(n||0)})}return e},hi=(e,r)=>e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis",tO=(e,r,a,s)=>{if(s)return e.map(c=>c.coordinate);var n,i,o=e.map(c=>(c.coordinate===r&&(n=!0),c.coordinate===a&&(i=!0),c.coordinate));return n||o.push(r),i||o.push(a),o},rO=(e,r,a)=>{if(!e)return null;var{duplicateDomain:s,type:n,range:i,scale:o,realScaleType:c,isCategorical:u,categoricalDomain:m,tickCount:g,ticks:f,niceTicks:y,axisType:p}=e;if(!o)return null;var b=c==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,j=n==="category"&&o.bandwidth?o.bandwidth()/b:0;if(j=p==="angleAxis"&&i&&i.length>=2?Ra(i[0]-i[1])*2*j:j,f||y){var v=(f||y||[]).map((N,k)=>{var E=s?s.indexOf(N):N;return{coordinate:o(E)+j,value:N,offset:j,index:k}});return v.filter(N=>!yn(N.coordinate))}return u&&m?m.map((N,k)=>({coordinate:o(N)+j,value:N,index:k,offset:j})):o.ticks&&g!=null?o.ticks(g).map((N,k)=>({coordinate:o(N)+j,value:N,offset:j,index:k})):o.domain().map((N,k)=>({coordinate:o(N)+j,value:s?s[N]:N,index:k,offset:j}))},w4=1e-4,sH=e=>{var r=e.domain();if(!(!r||r.length<=2)){var a=r.length,s=e.range(),n=Math.min(s[0],s[1])-w4,i=Math.max(s[0],s[1])+w4,o=e(r[0]),c=e(r[a-1]);(o<n||o>i||c<n||c>i)&&e.domain([r[0],r[a-1]])}},nH=(e,r)=>{if(!r||r.length!==2||!Je(r[0])||!Je(r[1]))return e;var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),n=[e[0],e[1]];return(!Je(e[0])||e[0]<a)&&(n[0]=a),(!Je(e[1])||e[1]>s)&&(n[1]=s),n[0]>s&&(n[0]=s),n[1]<a&&(n[1]=a),n},iH=e=>{var r=e.length;if(!(r<=0))for(var a=0,s=e[0].length;a<s;++a)for(var n=0,i=0,o=0;o<r;++o){var c=yn(e[o][a][1])?e[o][a][0]:e[o][a][1];c>=0?(e[o][a][0]=n,e[o][a][1]=n+c,n=e[o][a][1]):(e[o][a][0]=i,e[o][a][1]=i+c,i=e[o][a][1])}},oH=e=>{var r=e.length;if(!(r<=0))for(var a=0,s=e[0].length;a<s;++a)for(var n=0,i=0;i<r;++i){var o=yn(e[i][a][1])?e[i][a][0]:e[i][a][1];o>=0?(e[i][a][0]=n,e[i][a][1]=n+o,n=e[i][a][1]):(e[i][a][0]=0,e[i][a][1]=0)}},lH={sign:iH,expand:Az,none:Kc,silhouette:Pz,wiggle:Tz,positive:oH},cH=(e,r,a)=>{var s=lH[a],n=Ez().keys(r).value((i,o)=>Number(fr(i,o,0))).order(_b).offset(s);return n(e)};function aO(e){return e==null?void 0:String(e)}function j0(e){var{axis:r,ticks:a,bandSize:s,entry:n,index:i,dataKey:o}=e;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!Or(n[r.dataKey])){var c=o3(a,"value",n[r.dataKey]);if(c)return c.coordinate+s/2}return a[i]?a[i].coordinate+s/2:null}var u=fr(n,Or(o)?r.dataKey:o);return Or(u)?null:r.scale(u)}var j4=e=>{var{axis:r,ticks:a,offset:s,bandSize:n,entry:i,index:o}=e;if(r.type==="category")return a[o]?a[o].coordinate+s:null;var c=fr(i,r.dataKey,r.scale.domain()[o]);return Or(c)?null:r.scale(c)-n/2+s},dH=e=>{var{numericAxis:r}=e,a=r.scale.domain();if(r.type==="number"){var s=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]);return s<=0&&n>=0?0:n<0?n:s}return a[0]},uH=e=>{var r=e.flat(2).filter(Je);return[Math.min(...r),Math.max(...r)]},mH=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],gH=(e,r,a)=>{if(e!=null)return mH(Object.keys(e).reduce((s,n)=>{var i=e[n],{stackedData:o}=i,c=o.reduce((u,m)=>{var g=eO(m,r,a),f=uH(g);return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]))},N4=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,k4=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,zo=(e,r,a)=>{if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!a||s>0)return s}if(e&&r&&r.length>=2){for(var n=Nf(r,g=>g.coordinate),i=1/0,o=1,c=n.length;o<c;o++){var u=n[o],m=n[o-1];i=Math.min((u.coordinate||0)-(m.coordinate||0),i)}return i===1/0?0:i}return a?void 0:0};function S4(e){var{tooltipEntrySettings:r,dataKey:a,payload:s,value:n,name:i}=e;return Rc(Rc({},r),{},{dataKey:a,payload:s,value:n,name:i})}function Go(e,r){if(e)return String(e);if(typeof r=="string")return r}var hH=(e,r)=>{if(r==="horizontal")return e.chartX;if(r==="vertical")return e.chartY},fH=(e,r)=>r==="centric"?e.angle:e.radius,Yi=e=>e.layout.width,Qi=e=>e.layout.height,xH=e=>e.layout.scale,sO=e=>e.layout.margin,Of=we(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),If=we(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),nO="data-recharts-item-index",iO="data-recharts-item-data-key",Tm=60;function C4(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function fh(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?C4(Object(a),!0).forEach(function(s){pH(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C4(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function pH(e,r,a){return(r=yH(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function yH(e){var r=vH(e,"string");return typeof r=="symbol"?r:r+""}function vH(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var bH=e=>e.brush.height;function wH(e){var r=If(e);return r.reduce((a,s)=>{if(s.orientation==="left"&&!s.mirror&&!s.hide){var n=typeof s.width=="number"?s.width:Tm;return a+n}return a},0)}function jH(e){var r=If(e);return r.reduce((a,s)=>{if(s.orientation==="right"&&!s.mirror&&!s.hide){var n=typeof s.width=="number"?s.width:Tm;return a+n}return a},0)}function NH(e){var r=Of(e);return r.reduce((a,s)=>s.orientation==="top"&&!s.mirror&&!s.hide?a+s.height:a,0)}function kH(e){var r=Of(e);return r.reduce((a,s)=>s.orientation==="bottom"&&!s.mirror&&!s.hide?a+s.height:a,0)}var ja=we([Yi,Qi,sO,bH,wH,jH,NH,kH,N3,QB],(e,r,a,s,n,i,o,c,u,m)=>{var g={left:(a.left||0)+n,right:(a.right||0)+i},f={top:(a.top||0)+o,bottom:(a.bottom||0)+c},y=fh(fh({},f),g),p=y.bottom;y.bottom+=s,y=aH(y,u,m);var b=e-y.left-y.right,j=r-y.top-y.bottom;return fh(fh({brushBottom:p},y),{},{width:Math.max(b,0),height:Math.max(j,0)})}),SH=we(ja,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),kj=we(Yi,Qi,(e,r)=>({x:0,y:0,width:e,height:r})),CH=h.createContext(null),Ua=()=>h.useContext(CH)!=null,Lf=e=>e.brush,Rf=we([Lf,ja,sO],(e,r,a)=>({height:e.height,x:Je(e.x)?e.x:r.left,y:Je(e.y)?e.y:r.top+r.height+r.brushBottom-(a?.bottom||0),width:Je(e.width)?e.width:r.width})),pv={},yv={},vv={},E4;function EH(){return E4||(E4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a,s,{signal:n,edges:i}={}){let o,c=null;const u=i!=null&&i.includes("leading"),m=i==null||i.includes("trailing"),g=()=>{c!==null&&(a.apply(o,c),o=void 0,c=null)},f=()=>{m&&g(),j()};let y=null;const p=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,f()},s)},b=()=>{y!==null&&(clearTimeout(y),y=null)},j=()=>{b(),o=void 0,c=null},v=()=>{g()},N=function(...k){if(n?.aborted)return;o=this,c=k;const E=y==null;p(),u&&E&&g()};return N.schedule=p,N.cancel=j,N.flush=v,n?.addEventListener("abort",j,{once:!0}),N}e.debounce=r})(vv)),vv}var A4;function AH(){return A4||(A4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=EH();function a(s,n=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:c=!0,maxWait:u}=i,m=Array(2);o&&(m[0]="leading"),c&&(m[1]="trailing");let g,f=null;const y=r.debounce(function(...j){g=s.apply(this,j),f=null},n,{edges:m}),p=function(...j){return u!=null&&(f===null&&(f=Date.now()),Date.now()-f>=u)?(g=s.apply(this,j),f=Date.now(),y.cancel(),y.schedule(),g):(y.apply(this,j),g)},b=()=>(y.flush(),g);return p.cancel=y.cancel,p.flush=b,p}e.debounce=a})(yv)),yv}var P4;function PH(){return P4||(P4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=AH();function a(s,n=0,i={}){const{leading:o=!0,trailing:c=!0}=i;return r.debounce(s,n,{leading:o,maxWait:n,trailing:c})}e.throttle=a})(pv)),pv}var bv,T4;function TH(){return T4||(T4=1,bv=PH().throttle),bv}var DH=TH();const OH=di(DH);var N0=function(r,a){for(var s=arguments.length,n=new Array(s>2?s-2:0),i=2;i<s;i++)n[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(a===void 0&&console.warn("LogUtils requires an error message argument"),!r))if(a===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(a.replace(/%s/g,()=>n[o++]))}},oO=(e,r,a)=>{var{width:s="100%",height:n="100%",aspect:i,maxHeight:o}=a,c=Fi(s)?e:Number(s),u=Fi(n)?r:Number(n);return i&&i>0&&(c?u=c/i:u&&(c=u*i),o&&u!=null&&u>o&&(u=o)),{calculatedWidth:c,calculatedHeight:u}},IH={width:0,height:0,overflow:"visible"},LH={width:0,overflowX:"visible"},RH={height:0,overflowY:"visible"},MH={},_H=e=>{var{width:r,height:a}=e,s=Fi(r),n=Fi(a);return s&&n?IH:s?LH:n?RH:MH};function $H(e){var{width:r,height:a,aspect:s}=e,n=r,i=a;return n===void 0&&i===void 0?(n="100%",i="100%"):n===void 0?n=s&&s>0?void 0:"100%":i===void 0&&(i=s&&s>0?void 0:"100%"),{width:n,height:i}}function Ir(e){return Number.isFinite(e)}function ii(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Yb(){return Yb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Yb.apply(null,arguments)}function D4(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function O4(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?D4(Object(a),!0).forEach(function(s){UH(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D4(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function UH(e,r,a){return(r=FH(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function FH(e){var r=zH(e,"string");return typeof r=="symbol"?r:r+""}function zH(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var lO=h.createContext({width:-1,height:-1});function BH(e){return ii(e.width)&&ii(e.height)}function cO(e){var{children:r,width:a,height:s}=e,n=h.useMemo(()=>({width:a,height:s}),[a,s]);return BH(n)?h.createElement(lO.Provider,{value:n},r):null}var Sj=()=>h.useContext(lO),qH=h.forwardRef((e,r)=>{var{aspect:a,initialDimension:s={width:-1,height:-1},width:n,height:i,minWidth:o=0,minHeight:c,maxHeight:u,children:m,debounce:g=0,id:f,className:y,onResize:p,style:b={}}=e,j=h.useRef(null),v=h.useRef();v.current=p,h.useImperativeHandle(r,()=>j.current);var[N,k]=h.useState({containerWidth:s.width,containerHeight:s.height}),E=h.useCallback((I,H)=>{k(W=>{var K=Math.round(I),B=Math.round(H);return W.containerWidth===K&&W.containerHeight===B?W:{containerWidth:K,containerHeight:B}})},[]);h.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return Sm;var I=B=>{var z,{width:q,height:J}=B[0].contentRect;E(q,J),(z=v.current)===null||z===void 0||z.call(v,q,J)};g>0&&(I=OH(I,g,{trailing:!0,leading:!1}));var H=new ResizeObserver(I),{width:W,height:K}=j.current.getBoundingClientRect();return E(W,K),H.observe(j.current),()=>{H.disconnect()}},[E,g]);var{containerWidth:C,containerHeight:S}=N;N0(!a||a>0,"The aspect(%s) must be greater than zero.",a);var{calculatedWidth:P,calculatedHeight:D}=oO(C,S,{width:n,height:i,aspect:a,maxHeight:u});return N0(P!=null&&P>0||D!=null&&D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,D,n,i,o,c,a),h.createElement("div",{id:f?"".concat(f):void 0,className:tr("recharts-responsive-container",y),style:O4(O4({},b),{},{width:n,height:i,minWidth:o,minHeight:c,maxHeight:u}),ref:j},h.createElement("div",{style:_H({width:n,height:i})},h.createElement(cO,{width:P,height:D},m)))}),Ds=h.forwardRef((e,r)=>{var a=Sj();if(ii(a.width)&&ii(a.height))return e.children;var{width:s,height:n}=$H({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=oO(void 0,void 0,{width:s,height:n,aspect:e.aspect,maxHeight:e.maxHeight});return Je(i)&&Je(o)?h.createElement(cO,{width:i,height:o},e.children):h.createElement(qH,Yb({},e,{width:s,height:n,ref:r}))});function dO(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Mf=()=>{var e,r=Ua(),a=at(SH),s=at(Rf),n=(e=at(Lf))===null||e===void 0?void 0:e.padding;return!r||!s||!n?a:{width:s.width-n.left-n.right,height:s.height-n.top-n.bottom,x:n.left,y:n.top}},HH={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},uO=()=>{var e;return(e=at(ja))!==null&&e!==void 0?e:HH},Cj=()=>at(Yi),Ej=()=>at(Qi),WH=()=>at(e=>e.layout.margin),Wt=e=>e.layout.layoutType,Yl=()=>at(Wt),VH=()=>{var e=Yl();if(e==="horizontal"||e==="vertical")return e},KH=()=>{var e=Yl();return e!==void 0},_f=e=>{var r=Ar(),a=Ua(),{width:s,height:n}=e,i=Sj(),o=s,c=n;return i&&(o=i.width>0?i.width:s,c=i.height>0?i.height:n),h.useEffect(()=>{!a&&ii(o)&&ii(c)&&r(Xq({width:o,height:c}))},[r,a,o,c]),null},mO=Symbol.for("immer-nothing"),I4=Symbol.for("immer-draftable"),Qs=Symbol.for("immer-state");function Ln(e,...r){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Xu=Object.getPrototypeOf;function Qc(e){return!!e&&!!e[Qs]}function Bl(e){return e?gO(e)||Array.isArray(e)||!!e[I4]||!!e.constructor?.[I4]||Dm(e)||Uf(e):!1}var GH=Object.prototype.constructor.toString(),L4=new WeakMap;function gO(e){if(!e||typeof e!="object")return!1;const r=Object.getPrototypeOf(e);if(r===null||r===Object.prototype)return!0;const a=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;if(a===Object)return!0;if(typeof a!="function")return!1;let s=L4.get(a);return s===void 0&&(s=Function.toString.call(a),L4.set(a,s)),s===GH}function k0(e,r,a=!0){$f(e)===0?(a?Reflect.ownKeys(e):Object.keys(e)).forEach(n=>{r(n,e[n],e)}):e.forEach((s,n)=>r(n,s,e))}function $f(e){const r=e[Qs];return r?r.type_:Array.isArray(e)?1:Dm(e)?2:Uf(e)?3:0}function Qb(e,r){return $f(e)===2?e.has(r):Object.prototype.hasOwnProperty.call(e,r)}function hO(e,r,a){const s=$f(e);s===2?e.set(r,a):s===3?e.add(a):e[r]=a}function YH(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}function Dm(e){return e instanceof Map}function Uf(e){return e instanceof Set}function yl(e){return e.copy_||e.base_}function Xb(e,r){if(Dm(e))return new Map(e);if(Uf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const a=gO(e);if(r===!0||r==="class_only"&&!a){const s=Object.getOwnPropertyDescriptors(e);delete s[Qs];let n=Reflect.ownKeys(s);for(let i=0;i<n.length;i++){const o=n[i],c=s[o];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(s[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[o]})}return Object.create(Xu(e),s)}else{const s=Xu(e);if(s!==null&&a)return{...e};const n=Object.create(s);return Object.assign(n,e)}}function Aj(e,r=!1){return Ff(e)||Qc(e)||!Bl(e)||($f(e)>1&&Object.defineProperties(e,{set:xh,add:xh,clear:xh,delete:xh}),Object.freeze(e),r&&Object.values(e).forEach(a=>Aj(a,!0))),e}function QH(){Ln(2)}var xh={value:QH};function Ff(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var XH={};function ql(e){const r=XH[e];return r||Ln(0,e),r}var Zu;function fO(){return Zu}function ZH(e,r){return{drafts_:[],parent_:e,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function R4(e,r){r&&(ql("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=r)}function Zb(e){Jb(e),e.drafts_.forEach(JH),e.drafts_=null}function Jb(e){e===Zu&&(Zu=e.parent_)}function M4(e){return Zu=ZH(Zu,e)}function JH(e){const r=e[Qs];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function _4(e,r){r.unfinalizedDrafts_=r.drafts_.length;const a=r.drafts_[0];return e!==void 0&&e!==a?(a[Qs].modified_&&(Zb(r),Ln(4)),Bl(e)&&(e=S0(r,e),r.parent_||C0(r,e)),r.patches_&&ql("Patches").generateReplacementPatches_(a[Qs].base_,e,r.patches_,r.inversePatches_)):e=S0(r,a,[]),Zb(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),e!==mO?e:void 0}function S0(e,r,a){if(Ff(r))return r;const s=e.immer_.shouldUseStrictIteration(),n=r[Qs];if(!n)return k0(r,(i,o)=>$4(e,n,r,i,o,a),s),r;if(n.scope_!==e)return r;if(!n.modified_)return C0(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let o=i,c=!1;n.type_===3&&(o=new Set(i),i.clear(),c=!0),k0(o,(u,m)=>$4(e,n,i,u,m,a,c),s),C0(e,i,!1),a&&e.patches_&&ql("Patches").generatePatches_(n,a,e.patches_,e.inversePatches_)}return n.copy_}function $4(e,r,a,s,n,i,o){if(n==null||typeof n!="object"&&!o)return;const c=Ff(n);if(!(c&&!o)){if(Qc(n)){const u=i&&r&&r.type_!==3&&!Qb(r.assigned_,s)?i.concat(s):void 0,m=S0(e,n,u);if(hO(a,s,m),Qc(m))e.canAutoFreeze_=!1;else return}else o&&a.add(n);if(Bl(n)&&!c){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||r&&r.base_&&r.base_[s]===n&&c)return;S0(e,n),(!r||!r.scope_.parent_)&&typeof s!="symbol"&&(Dm(a)?a.has(s):Object.prototype.propertyIsEnumerable.call(a,s))&&C0(e,n)}}}function C0(e,r,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Aj(r,a)}function eW(e,r){const a=Array.isArray(e),s={type_:a?1:0,scope_:r?r.scope_:fO(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=s,i=Pj;a&&(n=[s],i=Ju);const{revoke:o,proxy:c}=Proxy.revocable(n,i);return s.draft_=c,s.revoke_=o,c}var Pj={get(e,r){if(r===Qs)return e;const a=yl(e);if(!Qb(a,r))return tW(e,a,r);const s=a[r];return e.finalized_||!Bl(s)?s:s===wv(e.base_,r)?(jv(e),e.copy_[r]=tw(s,e)):s},has(e,r){return r in yl(e)},ownKeys(e){return Reflect.ownKeys(yl(e))},set(e,r,a){const s=xO(yl(e),r);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const n=wv(yl(e),r),i=n?.[Qs];if(i&&i.base_===a)return e.copy_[r]=a,e.assigned_[r]=!1,!0;if(YH(a,n)&&(a!==void 0||Qb(e.base_,r)))return!0;jv(e),ew(e)}return e.copy_[r]===a&&(a!==void 0||r in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[r])||(e.copy_[r]=a,e.assigned_[r]=!0),!0},deleteProperty(e,r){return wv(e.base_,r)!==void 0||r in e.base_?(e.assigned_[r]=!1,jv(e),ew(e)):delete e.assigned_[r],e.copy_&&delete e.copy_[r],!0},getOwnPropertyDescriptor(e,r){const a=yl(e),s=Reflect.getOwnPropertyDescriptor(a,r);return s&&{writable:!0,configurable:e.type_!==1||r!=="length",enumerable:s.enumerable,value:a[r]}},defineProperty(){Ln(11)},getPrototypeOf(e){return Xu(e.base_)},setPrototypeOf(){Ln(12)}},Ju={};k0(Pj,(e,r)=>{Ju[e]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}});Ju.deleteProperty=function(e,r){return Ju.set.call(this,e,r,void 0)};Ju.set=function(e,r,a){return Pj.set.call(this,e[0],r,a,e[0])};function wv(e,r){const a=e[Qs];return(a?yl(a):e)[r]}function tW(e,r,a){const s=xO(r,a);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}function xO(e,r){if(!(r in e))return;let a=Xu(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,r);if(s)return s;a=Xu(a)}}function ew(e){e.modified_||(e.modified_=!0,e.parent_&&ew(e.parent_))}function jv(e){e.copy_||(e.copy_=Xb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var rW=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(r,a,s)=>{if(typeof r=="function"&&typeof a!="function"){const i=a;a=r;const o=this;return function(u=i,...m){return o.produce(u,g=>a.call(this,g,...m))}}typeof a!="function"&&Ln(6),s!==void 0&&typeof s!="function"&&Ln(7);let n;if(Bl(r)){const i=M4(this),o=tw(r,void 0);let c=!0;try{n=a(o),c=!1}finally{c?Zb(i):Jb(i)}return R4(i,s),_4(n,i)}else if(!r||typeof r!="object"){if(n=a(r),n===void 0&&(n=r),n===mO&&(n=void 0),this.autoFreeze_&&Aj(n,!0),s){const i=[],o=[];ql("Patches").generateReplacementPatches_(r,n,i,o),s(i,o)}return n}else Ln(1,r)},this.produceWithPatches=(r,a)=>{if(typeof r=="function")return(o,...c)=>this.produceWithPatches(o,u=>r(u,...c));let s,n;return[this.produce(r,a,(o,c)=>{s=o,n=c}),s,n]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Bl(e)||Ln(8),Qc(e)&&(e=aW(e));const r=M4(this),a=tw(e,void 0);return a[Qs].isManual_=!0,Jb(r),a}finishDraft(e,r){const a=e&&e[Qs];(!a||!a.isManual_)&&Ln(9);const{scope_:s}=a;return R4(s,r),_4(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let a;for(a=r.length-1;a>=0;a--){const n=r[a];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}a>-1&&(r=r.slice(a+1));const s=ql("Patches").applyPatches_;return Qc(e)?s(e,r):this.produce(e,n=>s(n,r))}};function tw(e,r){const a=Dm(e)?ql("MapSet").proxyMap_(e,r):Uf(e)?ql("MapSet").proxySet_(e,r):eW(e,r);return(r?r.scope_:fO()).drafts_.push(a),a}function aW(e){return Qc(e)||Ln(10,e),pO(e)}function pO(e){if(!Bl(e)||Ff(e))return e;const r=e[Qs];let a,s=!0;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,a=Xb(e,r.scope_.immer_.useStrictShallowCopy_),s=r.scope_.immer_.shouldUseStrictIteration()}else a=Xb(e,!0);return k0(a,(n,i)=>{hO(a,n,pO(i))},s),r&&(r.finalized_=!1),a}var sW=new rW;sW.produce;var nW={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},yO=Ls({name:"legend",initialState:nW,reducers:{setLegendSize(e,r){e.size.width=r.payload.width,e.size.height=r.payload.height},setLegendSettings(e,r){e.settings.align=r.payload.align,e.settings.layout=r.payload.layout,e.settings.verticalAlign=r.payload.verticalAlign,e.settings.itemSorter=r.payload.itemSorter},addLegendPayload:{reducer(e,r){e.payload.push(r.payload)},prepare:Mr()},replaceLegendPayload:{reducer(e,r){var{prev:a,next:s}=r.payload,n=Mn(e).payload.indexOf(a);n>-1&&(e.payload[n]=s)},prepare:Mr()},removeLegendPayload:{reducer(e,r){var a=Mn(e).payload.indexOf(r.payload);a>-1&&e.payload.splice(a,1)},prepare:Mr()}}}),{setLegendSize:U4,setLegendSettings:iW,addLegendPayload:vO,replaceLegendPayload:bO,removeLegendPayload:wO}=yO.actions,oW=yO.reducer,lW=["contextPayload"];function rw(){return rw=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},rw.apply(null,arguments)}function F4(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function Xc(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?F4(Object(a),!0).forEach(function(s){cW(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F4(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function cW(e,r,a){return(r=dW(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function dW(e){var r=uW(e,"string");return typeof r=="symbol"?r:r+""}function uW(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function mW(e,r){if(e==null)return{};var a,s,n=gW(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function gW(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function hW(e){return e.value}function fW(e){var{contextPayload:r}=e,a=mW(e,lW),s=v3(r,e.payloadUniqBy,hW),n=Xc(Xc({},a),{},{payload:s});return h.isValidElement(e.content)?h.cloneElement(e.content,n):typeof e.content=="function"?h.createElement(e.content,n):h.createElement(nB,n)}function xW(e,r,a,s,n,i){var{layout:o,align:c,verticalAlign:u}=r,m,g;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(c==="center"&&o==="vertical"?m={left:((s||0)-i.width)/2}:m=c==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(u==="middle"?g={top:((n||0)-i.height)/2}:g=u==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),Xc(Xc({},m),g)}function pW(e){var r=Ar();return h.useEffect(()=>{r(iW(e))},[r,e]),null}function yW(e){var r=Ar();return h.useEffect(()=>(r(U4(e)),()=>{r(U4({width:0,height:0}))}),[r,e]),null}function vW(e,r,a,s){return e==="vertical"&&Je(r)?{height:r}:e==="horizontal"?{width:a||s}:null}var bW={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Ma(e){var r=Zr(e,bW),a=JB(),s=XF(),n=WH(),{width:i,height:o,wrapperStyle:c,portal:u}=r,[m,g]=k3([a]),f=Cj(),y=Ej();if(f==null||y==null)return null;var p=f-(n?.left||0)-(n?.right||0),b=vW(r.layout,o,i,p),j=u?c:Xc(Xc({position:"absolute",width:b?.width||i||"auto",height:b?.height||o||"auto"},xW(c,r,n,f,y,m)),c),v=u??s;if(v==null||a==null)return null;var N=h.createElement("div",{className:"recharts-legend-wrapper",style:j,ref:g},h.createElement(pW,{layout:r.layout,align:r.align,verticalAlign:r.verticalAlign,itemSorter:r.itemSorter}),!u&&h.createElement(yW,{width:m.width,height:m.height}),h.createElement(fW,rw({},r,b,{margin:n,chartWidth:f,chartHeight:y,contextPayload:a})));return Do.createPortal(N,v)}Ma.displayName="Legend";function aw(){return aw=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},aw.apply(null,arguments)}function z4(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function Nv(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?z4(Object(a),!0).forEach(function(s){wW(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z4(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function wW(e,r,a){return(r=jW(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function jW(e){var r=NW(e,"string");return typeof r=="symbol"?r:r+""}function NW(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function kW(e){return Array.isArray(e)&&ni(e[0])&&ni(e[1])?e.join(" ~ "):e}var SW=e=>{var{separator:r=" : ",contentStyle:a={},itemStyle:s={},labelStyle:n={},payload:i,formatter:o,itemSorter:c,wrapperClassName:u,labelClassName:m,label:g,labelFormatter:f,accessibilityLayer:y=!1}=e,p=()=>{if(i&&i.length){var S={padding:0,margin:0},P=(c?Nf(i,c):i).map((D,I)=>{if(D.type==="none")return null;var H=D.formatter||o||kW,{value:W,name:K}=D,B=W,z=K;if(H){var q=H(W,K,D,I,i);if(Array.isArray(q))[B,z]=q;else if(q!=null)B=q;else return null}var J=Nv({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},s);return h.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:J},ni(z)?h.createElement("span",{className:"recharts-tooltip-item-name"},z):null,ni(z)?h.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,h.createElement("span",{className:"recharts-tooltip-item-value"},B),h.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return h.createElement("ul",{className:"recharts-tooltip-item-list",style:S},P)}return null},b=Nv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),j=Nv({margin:0},n),v=!Or(g),N=v?g:"",k=tr("recharts-default-tooltip",u),E=tr("recharts-tooltip-label",m);v&&f&&i!==void 0&&i!==null&&(N=f(g,i));var C=y?{role:"status","aria-live":"assertive"}:{};return h.createElement("div",aw({className:k,style:b},C),h.createElement("p",{className:E,style:j},h.isValidElement(N)?N:"".concat(N)),p())},gu="recharts-tooltip-wrapper",CW={visibility:"hidden"};function EW(e){var{coordinate:r,translateX:a,translateY:s}=e;return tr(gu,{["".concat(gu,"-right")]:Je(a)&&r&&Je(r.x)&&a>=r.x,["".concat(gu,"-left")]:Je(a)&&r&&Je(r.x)&&a<r.x,["".concat(gu,"-bottom")]:Je(s)&&r&&Je(r.y)&&s>=r.y,["".concat(gu,"-top")]:Je(s)&&r&&Je(r.y)&&s<r.y})}function B4(e){var{allowEscapeViewBox:r,coordinate:a,key:s,offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:c,viewBox:u,viewBoxDimension:m}=e;if(i&&Je(i[s]))return i[s];var g=a[s]-c-(n>0?n:0),f=a[s]+n;if(r[s])return o[s]?g:f;var y=u[s];if(y==null)return 0;if(o[s]){var p=g,b=y;return p<b?Math.max(f,y):Math.max(g,y)}if(m==null)return 0;var j=f+c,v=y+m;return j>v?Math.max(g,y):Math.max(f,y)}function AW(e){var{translateX:r,translateY:a,useTranslate3d:s}=e;return{transform:s?"translate3d(".concat(r,"px, ").concat(a,"px, 0)"):"translate(".concat(r,"px, ").concat(a,"px)")}}function PW(e){var{allowEscapeViewBox:r,coordinate:a,offsetTopLeft:s,position:n,reverseDirection:i,tooltipBox:o,useTranslate3d:c,viewBox:u}=e,m,g,f;return o.height>0&&o.width>0&&a?(g=B4({allowEscapeViewBox:r,coordinate:a,key:"x",offsetTopLeft:s,position:n,reverseDirection:i,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),f=B4({allowEscapeViewBox:r,coordinate:a,key:"y",offsetTopLeft:s,position:n,reverseDirection:i,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),m=AW({translateX:g,translateY:f,useTranslate3d:c})):m=CW,{cssProperties:m,cssClasses:EW({translateX:g,translateY:f,coordinate:a})}}function q4(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function ph(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?q4(Object(a),!0).forEach(function(s){sw(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q4(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function sw(e,r,a){return(r=TW(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function TW(e){var r=DW(e,"string");return typeof r=="symbol"?r:r+""}function DW(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class OW extends h.PureComponent{constructor(){super(...arguments),sw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),sw(this,"handleKeyDown",r=>{if(r.key==="Escape"){var a,s,n,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&a!==void 0?a:0,y:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&n!==void 0?n:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var r,a;this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:r,allowEscapeViewBox:a,animationDuration:s,animationEasing:n,children:i,coordinate:o,hasPayload:c,isAnimationActive:u,offset:m,position:g,reverseDirection:f,useTranslate3d:y,viewBox:p,wrapperStyle:b,lastBoundingBox:j,innerRef:v,hasPortalFromProps:N}=this.props,{cssClasses:k,cssProperties:E}=PW({allowEscapeViewBox:a,coordinate:o,offsetTopLeft:m,position:g,reverseDirection:f,tooltipBox:{height:j.height,width:j.width},useTranslate3d:y,viewBox:p}),C=N?{}:ph(ph({transition:u&&r?"transform ".concat(s,"ms ").concat(n):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&c?"visible":"hidden",position:"absolute",top:0,left:0}),S=ph(ph({},C),{},{visibility:!this.state.dismissed&&r&&c?"visible":"hidden"},b);return h.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:S,ref:v},i)}}var jO=()=>{var e;return(e=at(r=>r.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function nw(){return nw=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},nw.apply(null,arguments)}function H4(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function W4(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?H4(Object(a),!0).forEach(function(s){IW(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H4(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function IW(e,r,a){return(r=LW(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function LW(e){var r=RW(e,"string");return typeof r=="symbol"?r:r+""}function RW(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var V4={curveBasisClosed:xz,curveBasisOpen:pz,curveBasis:fz,curveBumpX:tz,curveBumpY:rz,curveLinearClosed:yz,curveLinear:wf,curveMonotoneX:vz,curveMonotoneY:bz,curveNatural:wz,curveStep:jz,curveStepAfter:kz,curveStepBefore:Nz},E0=e=>Ir(e.x)&&Ir(e.y),K4=e=>e.base!=null&&E0(e.base)&&E0(e),hu=e=>e.x,fu=e=>e.y,MW=(e,r)=>{if(typeof e=="function")return e;var a="curve".concat(km(e));return(a==="curveMonotone"||a==="curveBump")&&r?V4["".concat(a).concat(r==="vertical"?"Y":"X")]:V4[a]||wf},_W=e=>{var{type:r="linear",points:a=[],baseLine:s,layout:n,connectNulls:i=!1}=e,o=MW(r,n),c=i?a.filter(E0):a,u;if(Array.isArray(s)){var m=a.map((p,b)=>W4(W4({},p),{},{base:s[b]}));n==="vertical"?u=ch().y(fu).x1(hu).x0(p=>p.base.x):u=ch().x(hu).y1(fu).y0(p=>p.base.y);var g=u.defined(K4).curve(o),f=i?m.filter(K4):m;return g(f)}n==="vertical"&&Je(s)?u=ch().y(fu).x1(hu).x0(s):Je(s)?u=ch().x(hu).y1(fu).y0(s):u=GD().x(hu).y(fu);var y=u.defined(E0).curve(o);return y(c)},zc=e=>{var{className:r,points:a,path:s,pathRef:n}=e;if((!a||!a.length)&&!s)return null;var i=a&&a.length?_W(e):s;return h.createElement("path",nw({},fs(e),gj(e),{className:tr("recharts-curve",r),d:i===null?void 0:i,ref:n}))},$W=["x","y","top","left","width","height","className"];function iw(){return iw=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},iw.apply(null,arguments)}function G4(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function UW(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?G4(Object(a),!0).forEach(function(s){FW(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G4(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function FW(e,r,a){return(r=zW(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function zW(e){var r=BW(e,"string");return typeof r=="symbol"?r:r+""}function BW(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function qW(e,r){if(e==null)return{};var a,s,n=HW(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function HW(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var WW=(e,r,a,s,n,i)=>"M".concat(e,",").concat(n,"v").concat(s,"M").concat(i,",").concat(r,"h").concat(a),VW=e=>{var{x:r=0,y:a=0,top:s=0,left:n=0,width:i=0,height:o=0,className:c}=e,u=qW(e,$W),m=UW({x:r,y:a,top:s,left:n,width:i,height:o},u);return!Je(r)||!Je(a)||!Je(i)||!Je(o)||!Je(s)||!Je(n)?null:h.createElement("path",iw({},ss(m),{className:tr("recharts-cross",c),d:WW(r,a,i,o,s,n)}))};function KW(e,r,a,s){var n=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?r.x-n:a.left+.5,y:e==="horizontal"?a.top+.5:r.y-n,width:e==="horizontal"?s:a.width-1,height:e==="horizontal"?a.height-1:s}}function Y4(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function Q4(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Y4(Object(a),!0).forEach(function(s){GW(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y4(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function GW(e,r,a){return(r=YW(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function YW(e){var r=QW(e,"string");return typeof r=="symbol"?r:r+""}function QW(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var XW=e=>e.replace(/([A-Z])/g,r=>"-".concat(r.toLowerCase())),NO=(e,r,a)=>e.map(s=>"".concat(XW(s)," ").concat(r,"ms ").concat(a)).join(","),ZW=(e,r)=>[Object.keys(e),Object.keys(r)].reduce((a,s)=>a.filter(n=>s.includes(n))),em=(e,r)=>Object.keys(r).reduce((a,s)=>Q4(Q4({},a),{},{[s]:e(s,r[s])}),{});function X4(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function xa(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?X4(Object(a),!0).forEach(function(s){JW(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X4(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function JW(e,r,a){return(r=eV(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function eV(e){var r=tV(e,"string");return typeof r=="symbol"?r:r+""}function tV(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var A0=(e,r,a)=>e+(r-e)*a,ow=e=>{var{from:r,to:a}=e;return r!==a},kO=(e,r,a)=>{var s=em((n,i)=>{if(ow(i)){var[o,c]=e(i.from,i.to,i.velocity);return xa(xa({},i),{},{from:o,velocity:c})}return i},r);return a<1?em((n,i)=>ow(i)?xa(xa({},i),{},{velocity:A0(i.velocity,s[n].velocity,a),from:A0(i.from,s[n].from,a)}):i,r):kO(e,s,a-1)};function rV(e,r,a,s,n,i){var o,c=s.reduce((y,p)=>xa(xa({},y),{},{[p]:{from:e[p],velocity:0,to:r[p]}}),{}),u=()=>em((y,p)=>p.from,c),m=()=>!Object.values(c).filter(ow).length,g=null,f=y=>{o||(o=y);var p=y-o,b=p/a.dt;c=kO(a,c,b),n(xa(xa(xa({},e),r),u())),o=y,m()||(g=i.setTimeout(f))};return()=>(g=i.setTimeout(f),()=>{var y;(y=g)===null||y===void 0||y()})}function aV(e,r,a,s,n,i,o){var c=null,u=n.reduce((f,y)=>xa(xa({},f),{},{[y]:[e[y],r[y]]}),{}),m,g=f=>{m||(m=f);var y=(f-m)/s,p=em((j,v)=>A0(...v,a(y)),u);if(i(xa(xa(xa({},e),r),p)),y<1)c=o.setTimeout(g);else{var b=em((j,v)=>A0(...v,a(1)),u);i(xa(xa(xa({},e),r),b))}};return()=>(c=o.setTimeout(g),()=>{var f;(f=c)===null||f===void 0||f()})}const sV=(e,r,a,s,n,i)=>{var o=ZW(e,r);return a==null?()=>(n(xa(xa({},e),r)),()=>{}):a.isStepper===!0?rV(e,r,a,o,n,i):aV(e,r,a,s,o,n,i)};var P0=1e-4,SO=(e,r)=>[0,3*e,3*r-6*e,3*e-3*r+1],CO=(e,r)=>e.map((a,s)=>a*r**s).reduce((a,s)=>a+s),Z4=(e,r)=>a=>{var s=SO(e,r);return CO(s,a)},nV=(e,r)=>a=>{var s=SO(e,r),n=[...s.map((i,o)=>i*o).slice(1),0];return CO(n,a)},iV=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];if(a.length===1)switch(a[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var n,i=a[0].split("(");if(i[0]==="cubic-bezier"&&((n=i[1])===null||n===void 0?void 0:n.split(")")[0].split(",").length)===4){var o=i[1].split(")")[0].split(",").map(c=>parseFloat(c));return[o[0],o[1],o[2],o[3]]}}}return a.length===4?a:[0,0,1,1]},oV=(e,r,a,s)=>{var n=Z4(e,a),i=Z4(r,s),o=nV(e,a),c=m=>m>1?1:m<0?0:m,u=m=>{for(var g=m>1?1:m,f=g,y=0;y<8;++y){var p=n(f)-g,b=o(f);if(Math.abs(p-g)<P0||b<P0)return i(f);f=c(f-p/b)}return i(f)};return u.isStepper=!1,u},J4=function(){return oV(...iV(...arguments))},lV=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:a=100,damping:s=8,dt:n=17}=r,i=(o,c,u)=>{var m=-(o-c)*a,g=u*s,f=u+(m-g)*n/1e3,y=u*n/1e3+o;return Math.abs(y-c)<P0&&Math.abs(f)<P0?[c,0]:[y,f]};return i.isStepper=!0,i.dt=n,i},cV=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return J4(e);case"spring":return lV();default:if(e.split("(")[0]==="cubic-bezier")return J4(e)}return typeof e=="function"?e:null};function dV(e){var r,a=()=>null,s=!1,n=null,i=o=>{if(!s){if(Array.isArray(o)){if(!o.length)return;var c=o,[u,...m]=c;if(typeof u=="number"){n=e.setTimeout(i.bind(null,m),u);return}i(u),n=e.setTimeout(i.bind(null,m));return}typeof o=="string"&&(r=o,a(r)),typeof o=="object"&&(r=o,a(r)),typeof o=="function"&&o()}};return{stop:()=>{s=!0},start:o=>{s=!1,n&&(n(),n=null),i(o)},subscribe:o=>(a=o,()=>{a=()=>null}),getTimeoutController:()=>e}}class uV{setTimeout(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),n=null,i=o=>{o-s>=a?r(o):typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(i))};return n=requestAnimationFrame(i),()=>{n!=null&&cancelAnimationFrame(n)}}}function mV(){return dV(new uV)}var gV=h.createContext(mV);function hV(e,r){var a=h.useContext(gV);return h.useMemo(()=>r??a(e),[e,r,a])}var fV=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),ud={devToolsEnabled:!1,isSsr:fV()},xV={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},eE={t:0},kv={t:1};function md(e){var r=Zr(e,xV),{isActive:a,canBegin:s,duration:n,easing:i,begin:o,onAnimationEnd:c,onAnimationStart:u,children:m}=r,g=a==="auto"?!ud.isSsr:a,f=hV(r.animationId,r.animationManager),[y,p]=h.useState(g?eE:kv),b=h.useRef(null);return h.useEffect(()=>{g||p(kv)},[g]),h.useEffect(()=>{if(!g||!s)return Sm;var j=sV(eE,kv,cV(i),n,p,f.getTimeoutController()),v=()=>{b.current=j()};return f.start([u,o,v,n,c]),()=>{f.stop(),b.current&&b.current(),c()}},[g,s,n,i,o,u,c,f]),m(y.t)}function gd(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",a=h.useRef(Ku(r)),s=h.useRef(e);return s.current!==e&&(a.current=Ku(r),s.current=e),a.current}var pV=["radius"],yV=["radius"];function tE(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function rE(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?tE(Object(a),!0).forEach(function(s){vV(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tE(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function vV(e,r,a){return(r=bV(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function bV(e){var r=wV(e,"string");return typeof r=="symbol"?r:r+""}function wV(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function T0(){return T0=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},T0.apply(null,arguments)}function aE(e,r){if(e==null)return{};var a,s,n=jV(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function jV(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var sE=(e,r,a,s,n)=>{var i=Math.min(Math.abs(a)/2,Math.abs(s)/2),o=s>=0?1:-1,c=a>=0?1:-1,u=s>=0&&a>=0||s<0&&a<0?1:0,m;if(i>0&&n instanceof Array){for(var g=[0,0,0,0],f=0,y=4;f<y;f++)g[f]=n[f]>i?i:n[f];m="M".concat(e,",").concat(r+o*g[0]),g[0]>0&&(m+="A ".concat(g[0],",").concat(g[0],",0,0,").concat(u,",").concat(e+c*g[0],",").concat(r)),m+="L ".concat(e+a-c*g[1],",").concat(r),g[1]>0&&(m+="A ".concat(g[1],",").concat(g[1],",0,0,").concat(u,`,
        `).concat(e+a,",").concat(r+o*g[1])),m+="L ".concat(e+a,",").concat(r+s-o*g[2]),g[2]>0&&(m+="A ".concat(g[2],",").concat(g[2],",0,0,").concat(u,`,
        `).concat(e+a-c*g[2],",").concat(r+s)),m+="L ".concat(e+c*g[3],",").concat(r+s),g[3]>0&&(m+="A ".concat(g[3],",").concat(g[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(r+s-o*g[3])),m+="Z"}else if(i>0&&n===+n&&n>0){var p=Math.min(i,n);m="M ".concat(e,",").concat(r+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+c*p,",").concat(r,`
            L `).concat(e+a-c*p,",").concat(r,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+a,",").concat(r+o*p,`
            L `).concat(e+a,",").concat(r+s-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+a-c*p,",").concat(r+s,`
            L `).concat(e+c*p,",").concat(r+s,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e,",").concat(r+s-o*p," Z")}else m="M ".concat(e,",").concat(r," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return m},nE={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},EO=e=>{var r=Zr(e,nE),a=h.useRef(null),[s,n]=h.useState(-1);h.useEffect(()=>{if(a.current&&a.current.getTotalLength)try{var ne=a.current.getTotalLength();ne&&n(ne)}catch{}},[]);var{x:i,y:o,width:c,height:u,radius:m,className:g}=r,{animationEasing:f,animationDuration:y,animationBegin:p,isAnimationActive:b,isUpdateAnimationActive:j}=r,v=h.useRef(c),N=h.useRef(u),k=h.useRef(i),E=h.useRef(o),C=h.useMemo(()=>({x:i,y:o,width:c,height:u,radius:m}),[i,o,c,u,m]),S=gd(C,"rectangle-");if(i!==+i||o!==+o||c!==+c||u!==+u||c===0||u===0)return null;var P=tr("recharts-rectangle",g);if(!j){var D=ss(r),{radius:I}=D,H=aE(D,pV);return h.createElement("path",T0({},H,{radius:typeof m=="number"?m:void 0,className:P,d:sE(i,o,c,u,m)}))}var W=v.current,K=N.current,B=k.current,z=E.current,q="0px ".concat(s===-1?1:s,"px"),J="".concat(s,"px 0px"),ae=NO(["strokeDasharray"],y,typeof f=="string"?f:nE.animationEasing);return h.createElement(md,{animationId:S,key:S,canBegin:s>0,duration:y,easing:f,isActive:j,begin:p},ne=>{var re=dr(W,c,ne),L=dr(K,u,ne),G=dr(B,i,ne),T=dr(z,o,ne);a.current&&(v.current=re,N.current=L,k.current=G,E.current=T);var _;b?ne>0?_={transition:ae,strokeDasharray:J}:_={strokeDasharray:q}:_={strokeDasharray:J};var F=ss(r),{radius:ee}=F,Z=aE(F,yV);return h.createElement("path",T0({},Z,{radius:typeof m=="number"?m:void 0,className:P,d:sE(G,T,re,L,m),ref:a,style:rE(rE({},_),r.style)}))})};function iE(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function oE(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?iE(Object(a),!0).forEach(function(s){NV(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iE(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function NV(e,r,a){return(r=kV(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function kV(e){var r=SV(e,"string");return typeof r=="symbol"?r:r+""}function SV(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var D0=Math.PI/180,CV=e=>e*180/Math.PI,ca=(e,r,a,s)=>({x:e+Math.cos(-D0*s)*a,y:r+Math.sin(-D0*s)*a}),AO=function(r,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(r-(s.left||0)-(s.right||0)),Math.abs(a-(s.top||0)-(s.bottom||0)))/2},EV=(e,r)=>{var{x:a,y:s}=e,{x:n,y:i}=r;return Math.sqrt((a-n)**2+(s-i)**2)},AV=(e,r)=>{var{x:a,y:s}=e,{cx:n,cy:i}=r,o=EV({x:a,y:s},{x:n,y:i});if(o<=0)return{radius:o,angle:0};var c=(a-n)/o,u=Math.acos(c);return s>i&&(u=2*Math.PI-u),{radius:o,angle:CV(u),angleInRadian:u}},PV=e=>{var{startAngle:r,endAngle:a}=e,s=Math.floor(r/360),n=Math.floor(a/360),i=Math.min(s,n);return{startAngle:r-i*360,endAngle:a-i*360}},TV=(e,r)=>{var{startAngle:a,endAngle:s}=r,n=Math.floor(a/360),i=Math.floor(s/360),o=Math.min(n,i);return e+o*360},DV=(e,r)=>{var{chartX:a,chartY:s}=e,{radius:n,angle:i}=AV({x:a,y:s},r),{innerRadius:o,outerRadius:c}=r;if(n<o||n>c||n===0)return null;var{startAngle:u,endAngle:m}=PV(r),g=i,f;if(u<=m){for(;g>m;)g-=360;for(;g<u;)g+=360;f=g>=u&&g<=m}else{for(;g>u;)g-=360;for(;g<m;)g+=360;f=g>=m&&g<=u}return f?oE(oE({},r),{},{radius:n,angle:TV(g,r)}):null};function PO(e){var{cx:r,cy:a,radius:s,startAngle:n,endAngle:i}=e,o=ca(r,a,s,n),c=ca(r,a,s,i);return{points:[o,c],cx:r,cy:a,radius:s,startAngle:n,endAngle:i}}function lw(){return lw=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},lw.apply(null,arguments)}var OV=(e,r)=>{var a=Ra(r-e),s=Math.min(Math.abs(r-e),359.999);return a*s},yh=e=>{var{cx:r,cy:a,radius:s,angle:n,sign:i,isExternal:o,cornerRadius:c,cornerIsExternal:u}=e,m=c*(o?1:-1)+s,g=Math.asin(c/m)/D0,f=u?n:n+i*g,y=ca(r,a,m,f),p=ca(r,a,s,f),b=u?n-i*g:n,j=ca(r,a,m*Math.cos(g*D0),b);return{center:y,circleTangency:p,lineTangency:j,theta:g}},TO=e=>{var{cx:r,cy:a,innerRadius:s,outerRadius:n,startAngle:i,endAngle:o}=e,c=OV(i,o),u=i+c,m=ca(r,a,n,i),g=ca(r,a,n,u),f="M ".concat(m.x,",").concat(m.y,`
    A `).concat(n,",").concat(n,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(i>u),`,
    `).concat(g.x,",").concat(g.y,`
  `);if(s>0){var y=ca(r,a,s,i),p=ca(r,a,s,u);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(i<=u),`,
            `).concat(y.x,",").concat(y.y," Z")}else f+="L ".concat(r,",").concat(a," Z");return f},IV=e=>{var{cx:r,cy:a,innerRadius:s,outerRadius:n,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:m}=e,g=Ra(m-u),{circleTangency:f,lineTangency:y,theta:p}=yh({cx:r,cy:a,radius:n,angle:u,sign:g,cornerRadius:i,cornerIsExternal:c}),{circleTangency:b,lineTangency:j,theta:v}=yh({cx:r,cy:a,radius:n,angle:m,sign:-g,cornerRadius:i,cornerIsExternal:c}),N=c?Math.abs(u-m):Math.abs(u-m)-p-v;if(N<0)return o?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):TO({cx:r,cy:a,innerRadius:s,outerRadius:n,startAngle:u,endAngle:m});var k="M ".concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(g<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(n,",").concat(n,",0,").concat(+(N>180),",").concat(+(g<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(g<0),",").concat(j.x,",").concat(j.y,`
  `);if(s>0){var{circleTangency:E,lineTangency:C,theta:S}=yh({cx:r,cy:a,radius:s,angle:u,sign:g,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),{circleTangency:P,lineTangency:D,theta:I}=yh({cx:r,cy:a,radius:s,angle:m,sign:-g,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),H=c?Math.abs(u-m):Math.abs(u-m)-S-I;if(H<0&&i===0)return"".concat(k,"L").concat(r,",").concat(a,"Z");k+="L".concat(D.x,",").concat(D.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(g<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(H>180),",").concat(+(g>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(g<0),",").concat(C.x,",").concat(C.y,"Z")}else k+="L".concat(r,",").concat(a,"Z");return k},LV={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},DO=e=>{var r=Zr(e,LV),{cx:a,cy:s,innerRadius:n,outerRadius:i,cornerRadius:o,forceCornerRadius:c,cornerIsExternal:u,startAngle:m,endAngle:g,className:f}=r;if(i<n||m===g)return null;var y=tr("recharts-sector",f),p=i-n,b=as(o,p,0,!0),j;return b>0&&Math.abs(m-g)<360?j=IV({cx:a,cy:s,innerRadius:n,outerRadius:i,cornerRadius:Math.min(b,p/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:m,endAngle:g}):j=TO({cx:a,cy:s,innerRadius:n,outerRadius:i,startAngle:m,endAngle:g}),h.createElement("path",lw({},ss(r),{className:y,d:j}))};function RV(e,r,a){if(e==="horizontal")return[{x:r.x,y:a.top},{x:r.x,y:a.top+a.height}];if(e==="vertical")return[{x:a.left,y:r.y},{x:a.left+a.width,y:r.y}];if(c3(r)){if(e==="centric"){var{cx:s,cy:n,innerRadius:i,outerRadius:o,angle:c}=r,u=ca(s,n,i,c),m=ca(s,n,o,c);return[{x:u.x,y:u.y},{x:m.x,y:m.y}]}return PO(r)}}var Sv={},Cv={},Ev={},lE;function MV(){return lE||(lE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=w3();function a(s){return r.isSymbol(s)?NaN:Number(s)}e.toNumber=a})(Ev)),Ev}var cE;function _V(){return cE||(cE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=MV();function a(s){return s?(s=r.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}e.toFinite=a})(Cv)),Cv}var dE;function $V(){return dE||(dE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=j3(),a=_V();function s(n,i,o){o&&typeof o!="number"&&r.isIterateeCall(n,i,o)&&(i=o=void 0),n=a.toFinite(n),i===void 0?(i=n,n=0):i=a.toFinite(i),o=o===void 0?n<i?1:-1:a.toFinite(o);const c=Math.max(Math.ceil((i-n)/(o||1)),0),u=new Array(c);for(let m=0;m<c;m++)u[m]=n,n+=o;return u}e.range=s})(Sv)),Sv}var Av,uE;function UV(){return uE||(uE=1,Av=$V().range),Av}var FV=UV();const OO=di(FV);function _o(e,r){return e==null||r==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function zV(e,r){return e==null||r==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function Tj(e){let r,a,s;e.length!==2?(r=_o,a=(c,u)=>_o(e(c),u),s=(c,u)=>e(c)-u):(r=e===_o||e===zV?e:BV,a=e,s=e);function n(c,u,m=0,g=c.length){if(m<g){if(r(u,u)!==0)return g;do{const f=m+g>>>1;a(c[f],u)<0?m=f+1:g=f}while(m<g)}return m}function i(c,u,m=0,g=c.length){if(m<g){if(r(u,u)!==0)return g;do{const f=m+g>>>1;a(c[f],u)<=0?m=f+1:g=f}while(m<g)}return m}function o(c,u,m=0,g=c.length){const f=n(c,u,m,g-1);return f>m&&s(c[f-1],u)>-s(c[f],u)?f-1:f}return{left:n,center:o,right:i}}function BV(){return 0}function IO(e){return e===null?NaN:+e}function*qV(e,r){for(let a of e)a!=null&&(a=+a)>=a&&(yield a)}const HV=Tj(_o),Om=HV.right;Tj(IO).center;class mE extends Map{constructor(r,a=KV){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),r!=null)for(const[s,n]of r)this.set(s,n)}get(r){return super.get(gE(this,r))}has(r){return super.has(gE(this,r))}set(r,a){return super.set(WV(this,r),a)}delete(r){return super.delete(VV(this,r))}}function gE({_intern:e,_key:r},a){const s=r(a);return e.has(s)?e.get(s):a}function WV({_intern:e,_key:r},a){const s=r(a);return e.has(s)?e.get(s):(e.set(s,a),a)}function VV({_intern:e,_key:r},a){const s=r(a);return e.has(s)&&(a=e.get(s),e.delete(s)),a}function KV(e){return e!==null&&typeof e=="object"?e.valueOf():e}function GV(e=_o){if(e===_o)return LO;if(typeof e!="function")throw new TypeError("compare is not a function");return(r,a)=>{const s=e(r,a);return s||s===0?s:(e(a,a)===0)-(e(r,r)===0)}}function LO(e,r){return(e==null||!(e>=e))-(r==null||!(r>=r))||(e<r?-1:e>r?1:0)}const YV=Math.sqrt(50),QV=Math.sqrt(10),XV=Math.sqrt(2);function O0(e,r,a){const s=(r-e)/Math.max(0,a),n=Math.floor(Math.log10(s)),i=s/Math.pow(10,n),o=i>=YV?10:i>=QV?5:i>=XV?2:1;let c,u,m;return n<0?(m=Math.pow(10,-n)/o,c=Math.round(e*m),u=Math.round(r*m),c/m<e&&++c,u/m>r&&--u,m=-m):(m=Math.pow(10,n)*o,c=Math.round(e/m),u=Math.round(r/m),c*m<e&&++c,u*m>r&&--u),u<c&&.5<=a&&a<2?O0(e,r,a*2):[c,u,m]}function cw(e,r,a){if(r=+r,e=+e,a=+a,!(a>0))return[];if(e===r)return[e];const s=r<e,[n,i,o]=s?O0(r,e,a):O0(e,r,a);if(!(i>=n))return[];const c=i-n+1,u=new Array(c);if(s)if(o<0)for(let m=0;m<c;++m)u[m]=(i-m)/-o;else for(let m=0;m<c;++m)u[m]=(i-m)*o;else if(o<0)for(let m=0;m<c;++m)u[m]=(n+m)/-o;else for(let m=0;m<c;++m)u[m]=(n+m)*o;return u}function dw(e,r,a){return r=+r,e=+e,a=+a,O0(e,r,a)[2]}function uw(e,r,a){r=+r,e=+e,a=+a;const s=r<e,n=s?dw(r,e,a):dw(e,r,a);return(s?-1:1)*(n<0?1/-n:n)}function hE(e,r){let a;for(const s of e)s!=null&&(a<s||a===void 0&&s>=s)&&(a=s);return a}function fE(e,r){let a;for(const s of e)s!=null&&(a>s||a===void 0&&s>=s)&&(a=s);return a}function RO(e,r,a=0,s=1/0,n){if(r=Math.floor(r),a=Math.floor(Math.max(0,a)),s=Math.floor(Math.min(e.length-1,s)),!(a<=r&&r<=s))return e;for(n=n===void 0?LO:GV(n);s>a;){if(s-a>600){const u=s-a+1,m=r-a+1,g=Math.log(u),f=.5*Math.exp(2*g/3),y=.5*Math.sqrt(g*f*(u-f)/u)*(m-u/2<0?-1:1),p=Math.max(a,Math.floor(r-m*f/u+y)),b=Math.min(s,Math.floor(r+(u-m)*f/u+y));RO(e,r,p,b,n)}const i=e[r];let o=a,c=s;for(xu(e,a,r),n(e[s],i)>0&&xu(e,a,s);o<c;){for(xu(e,o,c),++o,--c;n(e[o],i)<0;)++o;for(;n(e[c],i)>0;)--c}n(e[a],i)===0?xu(e,a,c):(++c,xu(e,c,s)),c<=r&&(a=c+1),r<=c&&(s=c-1)}return e}function xu(e,r,a){const s=e[r];e[r]=e[a],e[a]=s}function ZV(e,r,a){if(e=Float64Array.from(qV(e)),!(!(s=e.length)||isNaN(r=+r))){if(r<=0||s<2)return fE(e);if(r>=1)return hE(e);var s,n=(s-1)*r,i=Math.floor(n),o=hE(RO(e,i).subarray(0,i+1)),c=fE(e.subarray(i+1));return o+(c-o)*(n-i)}}function JV(e,r,a=IO){if(!(!(s=e.length)||isNaN(r=+r))){if(r<=0||s<2)return+a(e[0],0,e);if(r>=1)return+a(e[s-1],s-1,e);var s,n=(s-1)*r,i=Math.floor(n),o=+a(e[i],i,e),c=+a(e[i+1],i+1,e);return o+(c-o)*(n-i)}}function eK(e,r,a){e=+e,r=+r,a=(n=arguments.length)<2?(r=e,e=0,1):n<3?1:+a;for(var s=-1,n=Math.max(0,Math.ceil((r-e)/a))|0,i=new Array(n);++s<n;)i[s]=e+s*a;return i}function kn(e,r){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(r).domain(e);break}return this}function Xi(e,r){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}const mw=Symbol("implicit");function Dj(){var e=new mE,r=[],a=[],s=mw;function n(i){let o=e.get(i);if(o===void 0){if(s!==mw)return s;e.set(i,o=r.push(i)-1)}return a[o%a.length]}return n.domain=function(i){if(!arguments.length)return r.slice();r=[],e=new mE;for(const o of i)e.has(o)||e.set(o,r.push(o)-1);return n},n.range=function(i){return arguments.length?(a=Array.from(i),n):a.slice()},n.unknown=function(i){return arguments.length?(s=i,n):s},n.copy=function(){return Dj(r,a).unknown(s)},kn.apply(n,arguments),n}function Oj(){var e=Dj().unknown(void 0),r=e.domain,a=e.range,s=0,n=1,i,o,c=!1,u=0,m=0,g=.5;delete e.unknown;function f(){var y=r().length,p=n<s,b=p?n:s,j=p?s:n;i=(j-b)/Math.max(1,y-u+m*2),c&&(i=Math.floor(i)),b+=(j-b-i*(y-u))*g,o=i*(1-u),c&&(b=Math.round(b),o=Math.round(o));var v=eK(y).map(function(N){return b+i*N});return a(p?v.reverse():v)}return e.domain=function(y){return arguments.length?(r(y),f()):r()},e.range=function(y){return arguments.length?([s,n]=y,s=+s,n=+n,f()):[s,n]},e.rangeRound=function(y){return[s,n]=y,s=+s,n=+n,c=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(y){return arguments.length?(c=!!y,f()):c},e.padding=function(y){return arguments.length?(u=Math.min(1,m=+y),f()):u},e.paddingInner=function(y){return arguments.length?(u=Math.min(1,y),f()):u},e.paddingOuter=function(y){return arguments.length?(m=+y,f()):m},e.align=function(y){return arguments.length?(g=Math.max(0,Math.min(1,y)),f()):g},e.copy=function(){return Oj(r(),[s,n]).round(c).paddingInner(u).paddingOuter(m).align(g)},kn.apply(f(),arguments)}function MO(e){var r=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return MO(r())},e}function tK(){return MO(Oj.apply(null,arguments).paddingInner(1))}function Ij(e,r,a){e.prototype=r.prototype=a,a.constructor=e}function _O(e,r){var a=Object.create(e.prototype);for(var s in r)a[s]=r[s];return a}function Im(){}var tm=.7,I0=1/tm,Bc="\\s*([+-]?\\d+)\\s*",rm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rK=/^#([0-9a-f]{3,8})$/,aK=new RegExp(`^rgb\\(${Bc},${Bc},${Bc}\\)$`),sK=new RegExp(`^rgb\\(${ai},${ai},${ai}\\)$`),nK=new RegExp(`^rgba\\(${Bc},${Bc},${Bc},${rm}\\)$`),iK=new RegExp(`^rgba\\(${ai},${ai},${ai},${rm}\\)$`),oK=new RegExp(`^hsl\\(${rm},${ai},${ai}\\)$`),lK=new RegExp(`^hsla\\(${rm},${ai},${ai},${rm}\\)$`),xE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ij(Im,am,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:pE,formatHex:pE,formatHex8:cK,formatHsl:dK,formatRgb:yE,toString:yE});function pE(){return this.rgb().formatHex()}function cK(){return this.rgb().formatHex8()}function dK(){return $O(this).formatHsl()}function yE(){return this.rgb().formatRgb()}function am(e){var r,a;return e=(e+"").trim().toLowerCase(),(r=rK.exec(e))?(a=r[1].length,r=parseInt(r[1],16),a===6?vE(r):a===3?new As(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):a===8?vh(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):a===4?vh(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=aK.exec(e))?new As(r[1],r[2],r[3],1):(r=sK.exec(e))?new As(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=nK.exec(e))?vh(r[1],r[2],r[3],r[4]):(r=iK.exec(e))?vh(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=oK.exec(e))?jE(r[1],r[2]/100,r[3]/100,1):(r=lK.exec(e))?jE(r[1],r[2]/100,r[3]/100,r[4]):xE.hasOwnProperty(e)?vE(xE[e]):e==="transparent"?new As(NaN,NaN,NaN,0):null}function vE(e){return new As(e>>16&255,e>>8&255,e&255,1)}function vh(e,r,a,s){return s<=0&&(e=r=a=NaN),new As(e,r,a,s)}function uK(e){return e instanceof Im||(e=am(e)),e?(e=e.rgb(),new As(e.r,e.g,e.b,e.opacity)):new As}function gw(e,r,a,s){return arguments.length===1?uK(e):new As(e,r,a,s??1)}function As(e,r,a,s){this.r=+e,this.g=+r,this.b=+a,this.opacity=+s}Ij(As,gw,_O(Im,{brighter(e){return e=e==null?I0:Math.pow(I0,e),new As(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tm:Math.pow(tm,e),new As(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new As(Il(this.r),Il(this.g),Il(this.b),L0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bE,formatHex:bE,formatHex8:mK,formatRgb:wE,toString:wE}));function bE(){return`#${jl(this.r)}${jl(this.g)}${jl(this.b)}`}function mK(){return`#${jl(this.r)}${jl(this.g)}${jl(this.b)}${jl((isNaN(this.opacity)?1:this.opacity)*255)}`}function wE(){const e=L0(this.opacity);return`${e===1?"rgb(":"rgba("}${Il(this.r)}, ${Il(this.g)}, ${Il(this.b)}${e===1?")":`, ${e})`}`}function L0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Il(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function jl(e){return e=Il(e),(e<16?"0":"")+e.toString(16)}function jE(e,r,a,s){return s<=0?e=r=a=NaN:a<=0||a>=1?e=r=NaN:r<=0&&(e=NaN),new Rn(e,r,a,s)}function $O(e){if(e instanceof Rn)return new Rn(e.h,e.s,e.l,e.opacity);if(e instanceof Im||(e=am(e)),!e)return new Rn;if(e instanceof Rn)return e;e=e.rgb();var r=e.r/255,a=e.g/255,s=e.b/255,n=Math.min(r,a,s),i=Math.max(r,a,s),o=NaN,c=i-n,u=(i+n)/2;return c?(r===i?o=(a-s)/c+(a<s)*6:a===i?o=(s-r)/c+2:o=(r-a)/c+4,c/=u<.5?i+n:2-i-n,o*=60):c=u>0&&u<1?0:o,new Rn(o,c,u,e.opacity)}function gK(e,r,a,s){return arguments.length===1?$O(e):new Rn(e,r,a,s??1)}function Rn(e,r,a,s){this.h=+e,this.s=+r,this.l=+a,this.opacity=+s}Ij(Rn,gK,_O(Im,{brighter(e){return e=e==null?I0:Math.pow(I0,e),new Rn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tm:Math.pow(tm,e),new Rn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*r,n=2*a-s;return new As(Pv(e>=240?e-240:e+120,n,s),Pv(e,n,s),Pv(e<120?e+240:e-120,n,s),this.opacity)},clamp(){return new Rn(NE(this.h),bh(this.s),bh(this.l),L0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=L0(this.opacity);return`${e===1?"hsl(":"hsla("}${NE(this.h)}, ${bh(this.s)*100}%, ${bh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function NE(e){return e=(e||0)%360,e<0?e+360:e}function bh(e){return Math.max(0,Math.min(1,e||0))}function Pv(e,r,a){return(e<60?r+(a-r)*e/60:e<180?a:e<240?r+(a-r)*(240-e)/60:r)*255}const Lj=e=>()=>e;function hK(e,r){return function(a){return e+a*r}}function fK(e,r,a){return e=Math.pow(e,a),r=Math.pow(r,a)-e,a=1/a,function(s){return Math.pow(e+s*r,a)}}function xK(e){return(e=+e)==1?UO:function(r,a){return a-r?fK(r,a,e):Lj(isNaN(r)?a:r)}}function UO(e,r){var a=r-e;return a?hK(e,a):Lj(isNaN(e)?r:e)}const kE=(function e(r){var a=xK(r);function s(n,i){var o=a((n=gw(n)).r,(i=gw(i)).r),c=a(n.g,i.g),u=a(n.b,i.b),m=UO(n.opacity,i.opacity);return function(g){return n.r=o(g),n.g=c(g),n.b=u(g),n.opacity=m(g),n+""}}return s.gamma=e,s})(1);function pK(e,r){r||(r=[]);var a=e?Math.min(r.length,e.length):0,s=r.slice(),n;return function(i){for(n=0;n<a;++n)s[n]=e[n]*(1-i)+r[n]*i;return s}}function yK(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vK(e,r){var a=r?r.length:0,s=e?Math.min(a,e.length):0,n=new Array(s),i=new Array(a),o;for(o=0;o<s;++o)n[o]=hd(e[o],r[o]);for(;o<a;++o)i[o]=r[o];return function(c){for(o=0;o<s;++o)i[o]=n[o](c);return i}}function bK(e,r){var a=new Date;return e=+e,r=+r,function(s){return a.setTime(e*(1-s)+r*s),a}}function R0(e,r){return e=+e,r=+r,function(a){return e*(1-a)+r*a}}function wK(e,r){var a={},s={},n;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(n in r)n in e?a[n]=hd(e[n],r[n]):s[n]=r[n];return function(i){for(n in a)s[n]=a[n](i);return s}}var hw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tv=new RegExp(hw.source,"g");function jK(e){return function(){return e}}function NK(e){return function(r){return e(r)+""}}function kK(e,r){var a=hw.lastIndex=Tv.lastIndex=0,s,n,i,o=-1,c=[],u=[];for(e=e+"",r=r+"";(s=hw.exec(e))&&(n=Tv.exec(r));)(i=n.index)>a&&(i=r.slice(a,i),c[o]?c[o]+=i:c[++o]=i),(s=s[0])===(n=n[0])?c[o]?c[o]+=n:c[++o]=n:(c[++o]=null,u.push({i:o,x:R0(s,n)})),a=Tv.lastIndex;return a<r.length&&(i=r.slice(a),c[o]?c[o]+=i:c[++o]=i),c.length<2?u[0]?NK(u[0].x):jK(r):(r=u.length,function(m){for(var g=0,f;g<r;++g)c[(f=u[g]).i]=f.x(m);return c.join("")})}function hd(e,r){var a=typeof r,s;return r==null||a==="boolean"?Lj(r):(a==="number"?R0:a==="string"?(s=am(r))?(r=s,kE):kK:r instanceof am?kE:r instanceof Date?bK:yK(r)?pK:Array.isArray(r)?vK:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?wK:R0)(e,r)}function Rj(e,r){return e=+e,r=+r,function(a){return Math.round(e*(1-a)+r*a)}}function SK(e,r){r===void 0&&(r=e,e=hd);for(var a=0,s=r.length-1,n=r[0],i=new Array(s<0?0:s);a<s;)i[a]=e(n,n=r[++a]);return function(o){var c=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[c](o-c)}}function CK(e){return function(){return e}}function M0(e){return+e}var SE=[0,1];function ds(e){return e}function fw(e,r){return(r-=e=+e)?function(a){return(a-e)/r}:CK(isNaN(r)?NaN:.5)}function EK(e,r){var a;return e>r&&(a=e,e=r,r=a),function(s){return Math.max(e,Math.min(r,s))}}function AK(e,r,a){var s=e[0],n=e[1],i=r[0],o=r[1];return n<s?(s=fw(n,s),i=a(o,i)):(s=fw(s,n),i=a(i,o)),function(c){return i(s(c))}}function PK(e,r,a){var s=Math.min(e.length,r.length)-1,n=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),r=r.slice().reverse());++o<s;)n[o]=fw(e[o],e[o+1]),i[o]=a(r[o],r[o+1]);return function(c){var u=Om(e,c,1,s)-1;return i[u](n[u](c))}}function Lm(e,r){return r.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function zf(){var e=SE,r=SE,a=hd,s,n,i,o=ds,c,u,m;function g(){var y=Math.min(e.length,r.length);return o!==ds&&(o=EK(e[0],e[y-1])),c=y>2?PK:AK,u=m=null,f}function f(y){return y==null||isNaN(y=+y)?i:(u||(u=c(e.map(s),r,a)))(s(o(y)))}return f.invert=function(y){return o(n((m||(m=c(r,e.map(s),R0)))(y)))},f.domain=function(y){return arguments.length?(e=Array.from(y,M0),g()):e.slice()},f.range=function(y){return arguments.length?(r=Array.from(y),g()):r.slice()},f.rangeRound=function(y){return r=Array.from(y),a=Rj,g()},f.clamp=function(y){return arguments.length?(o=y?!0:ds,g()):o!==ds},f.interpolate=function(y){return arguments.length?(a=y,g()):a},f.unknown=function(y){return arguments.length?(i=y,f):i},function(y,p){return s=y,n=p,g()}}function Mj(){return zf()(ds,ds)}function TK(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function _0(e,r){if((a=(e=r?e.toExponential(r-1):e.toExponential()).indexOf("e"))<0)return null;var a,s=e.slice(0,a);return[s.length>1?s[0]+s.slice(2):s,+e.slice(a+1)]}function Zc(e){return e=_0(Math.abs(e)),e?e[1]:NaN}function DK(e,r){return function(a,s){for(var n=a.length,i=[],o=0,c=e[0],u=0;n>0&&c>0&&(u+c+1>s&&(c=Math.max(1,s-u)),i.push(a.substring(n-=c,n+c)),!((u+=c+1)>s));)c=e[o=(o+1)%e.length];return i.reverse().join(r)}}function OK(e){return function(r){return r.replace(/[0-9]/g,function(a){return e[+a]})}}var IK=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sm(e){if(!(r=IK.exec(e)))throw new Error("invalid format: "+e);var r;return new _j({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}sm.prototype=_j.prototype;function _j(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}_j.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function LK(e){e:for(var r=e.length,a=1,s=-1,n;a<r;++a)switch(e[a]){case".":s=n=a;break;case"0":s===0&&(s=a),n=a;break;default:if(!+e[a])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(n+1):e}var FO;function RK(e,r){var a=_0(e,r);if(!a)return e+"";var s=a[0],n=a[1],i=n-(FO=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+_0(e,Math.max(0,r+i-1))[0]}function CE(e,r){var a=_0(e,r);if(!a)return e+"";var s=a[0],n=a[1];return n<0?"0."+new Array(-n).join("0")+s:s.length>n+1?s.slice(0,n+1)+"."+s.slice(n+1):s+new Array(n-s.length+2).join("0")}const EE={"%":(e,r)=>(e*100).toFixed(r),b:e=>Math.round(e).toString(2),c:e=>e+"",d:TK,e:(e,r)=>e.toExponential(r),f:(e,r)=>e.toFixed(r),g:(e,r)=>e.toPrecision(r),o:e=>Math.round(e).toString(8),p:(e,r)=>CE(e*100,r),r:CE,s:RK,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function AE(e){return e}var PE=Array.prototype.map,TE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function MK(e){var r=e.grouping===void 0||e.thousands===void 0?AE:DK(PE.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",n=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?AE:OK(PE.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function m(f){f=sm(f);var y=f.fill,p=f.align,b=f.sign,j=f.symbol,v=f.zero,N=f.width,k=f.comma,E=f.precision,C=f.trim,S=f.type;S==="n"?(k=!0,S="g"):EE[S]||(E===void 0&&(E=12),C=!0,S="g"),(v||y==="0"&&p==="=")&&(v=!0,y="0",p="=");var P=j==="$"?a:j==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",D=j==="$"?s:/[%p]/.test(S)?o:"",I=EE[S],H=/[defgprs%]/.test(S);E=E===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function W(K){var B=P,z=D,q,J,ae;if(S==="c")z=I(K)+z,K="";else{K=+K;var ne=K<0||1/K<0;if(K=isNaN(K)?u:I(Math.abs(K),E),C&&(K=LK(K)),ne&&+K==0&&b!=="+"&&(ne=!1),B=(ne?b==="("?b:c:b==="-"||b==="("?"":b)+B,z=(S==="s"?TE[8+FO/3]:"")+z+(ne&&b==="("?")":""),H){for(q=-1,J=K.length;++q<J;)if(ae=K.charCodeAt(q),48>ae||ae>57){z=(ae===46?n+K.slice(q+1):K.slice(q))+z,K=K.slice(0,q);break}}}k&&!v&&(K=r(K,1/0));var re=B.length+K.length+z.length,L=re<N?new Array(N-re+1).join(y):"";switch(k&&v&&(K=r(L+K,L.length?N-z.length:1/0),L=""),p){case"<":K=B+K+z+L;break;case"=":K=B+L+K+z;break;case"^":K=L.slice(0,re=L.length>>1)+B+K+z+L.slice(re);break;default:K=L+B+K+z;break}return i(K)}return W.toString=function(){return f+""},W}function g(f,y){var p=m((f=sm(f),f.type="f",f)),b=Math.max(-8,Math.min(8,Math.floor(Zc(y)/3)))*3,j=Math.pow(10,-b),v=TE[8+b/3];return function(N){return p(j*N)+v}}return{format:m,formatPrefix:g}}var wh,$j,zO;_K({thousands:",",grouping:[3],currency:["$",""]});function _K(e){return wh=MK(e),$j=wh.format,zO=wh.formatPrefix,wh}function $K(e){return Math.max(0,-Zc(Math.abs(e)))}function UK(e,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zc(r)/3)))*3-Zc(Math.abs(e)))}function FK(e,r){return e=Math.abs(e),r=Math.abs(r)-e,Math.max(0,Zc(r)-Zc(e))+1}function BO(e,r,a,s){var n=uw(e,r,a),i;switch(s=sm(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(r));return s.precision==null&&!isNaN(i=UK(n,o))&&(s.precision=i),zO(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=FK(n,Math.max(Math.abs(e),Math.abs(r))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=$K(n))&&(s.precision=i-(s.type==="%")*2);break}}return $j(s)}function Yo(e){var r=e.domain;return e.ticks=function(a){var s=r();return cw(s[0],s[s.length-1],a??10)},e.tickFormat=function(a,s){var n=r();return BO(n[0],n[n.length-1],a??10,s)},e.nice=function(a){a==null&&(a=10);var s=r(),n=0,i=s.length-1,o=s[n],c=s[i],u,m,g=10;for(c<o&&(m=o,o=c,c=m,m=n,n=i,i=m);g-- >0;){if(m=dw(o,c,a),m===u)return s[n]=o,s[i]=c,r(s);if(m>0)o=Math.floor(o/m)*m,c=Math.ceil(c/m)*m;else if(m<0)o=Math.ceil(o*m)/m,c=Math.floor(c*m)/m;else break;u=m}return e},e}function qO(){var e=Mj();return e.copy=function(){return Lm(e,qO())},kn.apply(e,arguments),Yo(e)}function HO(e){var r;function a(s){return s==null||isNaN(s=+s)?r:s}return a.invert=a,a.domain=a.range=function(s){return arguments.length?(e=Array.from(s,M0),a):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return HO(e).unknown(r)},e=arguments.length?Array.from(e,M0):[0,1],Yo(a)}function WO(e,r){e=e.slice();var a=0,s=e.length-1,n=e[a],i=e[s],o;return i<n&&(o=a,a=s,s=o,o=n,n=i,i=o),e[a]=r.floor(n),e[s]=r.ceil(i),e}function DE(e){return Math.log(e)}function OE(e){return Math.exp(e)}function zK(e){return-Math.log(-e)}function BK(e){return-Math.exp(-e)}function qK(e){return isFinite(e)?+("1e"+e):e<0?0:e}function HK(e){return e===10?qK:e===Math.E?Math.exp:r=>Math.pow(e,r)}function WK(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),r=>Math.log(r)/e)}function IE(e){return(r,a)=>-e(-r,a)}function Uj(e){const r=e(DE,OE),a=r.domain;let s=10,n,i;function o(){return n=WK(s),i=HK(s),a()[0]<0?(n=IE(n),i=IE(i),e(zK,BK)):e(DE,OE),r}return r.base=function(c){return arguments.length?(s=+c,o()):s},r.domain=function(c){return arguments.length?(a(c),o()):a()},r.ticks=c=>{const u=a();let m=u[0],g=u[u.length-1];const f=g<m;f&&([m,g]=[g,m]);let y=n(m),p=n(g),b,j;const v=c==null?10:+c;let N=[];if(!(s%1)&&p-y<v){if(y=Math.floor(y),p=Math.ceil(p),m>0){for(;y<=p;++y)for(b=1;b<s;++b)if(j=y<0?b/i(-y):b*i(y),!(j<m)){if(j>g)break;N.push(j)}}else for(;y<=p;++y)for(b=s-1;b>=1;--b)if(j=y>0?b/i(-y):b*i(y),!(j<m)){if(j>g)break;N.push(j)}N.length*2<v&&(N=cw(m,g,v))}else N=cw(y,p,Math.min(p-y,v)).map(i);return f?N.reverse():N},r.tickFormat=(c,u)=>{if(c==null&&(c=10),u==null&&(u=s===10?"s":","),typeof u!="function"&&(!(s%1)&&(u=sm(u)).precision==null&&(u.trim=!0),u=$j(u)),c===1/0)return u;const m=Math.max(1,s*c/r.ticks().length);return g=>{let f=g/i(Math.round(n(g)));return f*s<s-.5&&(f*=s),f<=m?u(g):""}},r.nice=()=>a(WO(a(),{floor:c=>i(Math.floor(n(c))),ceil:c=>i(Math.ceil(n(c)))})),r}function VO(){const e=Uj(zf()).domain([1,10]);return e.copy=()=>Lm(e,VO()).base(e.base()),kn.apply(e,arguments),e}function LE(e){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/e))}}function RE(e){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*e}}function Fj(e){var r=1,a=e(LE(r),RE(r));return a.constant=function(s){return arguments.length?e(LE(r=+s),RE(r)):r},Yo(a)}function KO(){var e=Fj(zf());return e.copy=function(){return Lm(e,KO()).constant(e.constant())},kn.apply(e,arguments)}function ME(e){return function(r){return r<0?-Math.pow(-r,e):Math.pow(r,e)}}function VK(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function KK(e){return e<0?-e*e:e*e}function zj(e){var r=e(ds,ds),a=1;function s(){return a===1?e(ds,ds):a===.5?e(VK,KK):e(ME(a),ME(1/a))}return r.exponent=function(n){return arguments.length?(a=+n,s()):a},Yo(r)}function Bj(){var e=zj(zf());return e.copy=function(){return Lm(e,Bj()).exponent(e.exponent())},kn.apply(e,arguments),e}function GK(){return Bj.apply(null,arguments).exponent(.5)}function _E(e){return Math.sign(e)*e*e}function YK(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function GO(){var e=Mj(),r=[0,1],a=!1,s;function n(i){var o=YK(e(i));return isNaN(o)?s:a?Math.round(o):o}return n.invert=function(i){return e.invert(_E(i))},n.domain=function(i){return arguments.length?(e.domain(i),n):e.domain()},n.range=function(i){return arguments.length?(e.range((r=Array.from(i,M0)).map(_E)),n):r.slice()},n.rangeRound=function(i){return n.range(i).round(!0)},n.round=function(i){return arguments.length?(a=!!i,n):a},n.clamp=function(i){return arguments.length?(e.clamp(i),n):e.clamp()},n.unknown=function(i){return arguments.length?(s=i,n):s},n.copy=function(){return GO(e.domain(),r).round(a).clamp(e.clamp()).unknown(s)},kn.apply(n,arguments),Yo(n)}function YO(){var e=[],r=[],a=[],s;function n(){var o=0,c=Math.max(1,r.length);for(a=new Array(c-1);++o<c;)a[o-1]=JV(e,o/c);return i}function i(o){return o==null||isNaN(o=+o)?s:r[Om(a,o)]}return i.invertExtent=function(o){var c=r.indexOf(o);return c<0?[NaN,NaN]:[c>0?a[c-1]:e[0],c<a.length?a[c]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let c of o)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(_o),n()},i.range=function(o){return arguments.length?(r=Array.from(o),n()):r.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return a.slice()},i.copy=function(){return YO().domain(e).range(r).unknown(s)},kn.apply(i,arguments)}function QO(){var e=0,r=1,a=1,s=[.5],n=[0,1],i;function o(u){return u!=null&&u<=u?n[Om(s,u,0,a)]:i}function c(){var u=-1;for(s=new Array(a);++u<a;)s[u]=((u+1)*r-(u-a)*e)/(a+1);return o}return o.domain=function(u){return arguments.length?([e,r]=u,e=+e,r=+r,c()):[e,r]},o.range=function(u){return arguments.length?(a=(n=Array.from(u)).length-1,c()):n.slice()},o.invertExtent=function(u){var m=n.indexOf(u);return m<0?[NaN,NaN]:m<1?[e,s[0]]:m>=a?[s[a-1],r]:[s[m-1],s[m]]},o.unknown=function(u){return arguments.length&&(i=u),o},o.thresholds=function(){return s.slice()},o.copy=function(){return QO().domain([e,r]).range(n).unknown(i)},kn.apply(Yo(o),arguments)}function XO(){var e=[.5],r=[0,1],a,s=1;function n(i){return i!=null&&i<=i?r[Om(e,i,0,s)]:a}return n.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,r.length-1),n):e.slice()},n.range=function(i){return arguments.length?(r=Array.from(i),s=Math.min(e.length,r.length-1),n):r.slice()},n.invertExtent=function(i){var o=r.indexOf(i);return[e[o-1],e[o]]},n.unknown=function(i){return arguments.length?(a=i,n):a},n.copy=function(){return XO().domain(e).range(r).unknown(a)},kn.apply(n,arguments)}const Dv=new Date,Ov=new Date;function Na(e,r,a,s){function n(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return n.floor=i=>(e(i=new Date(+i)),i),n.ceil=i=>(e(i=new Date(i-1)),r(i,1),e(i),i),n.round=i=>{const o=n(i),c=n.ceil(i);return i-o<c-i?o:c},n.offset=(i,o)=>(r(i=new Date(+i),o==null?1:Math.floor(o)),i),n.range=(i,o,c)=>{const u=[];if(i=n.ceil(i),c=c==null?1:Math.floor(c),!(i<o)||!(c>0))return u;let m;do u.push(m=new Date(+i)),r(i,c),e(i);while(m<i&&i<o);return u},n.filter=i=>Na(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;r(o,-1),!i(o););else for(;--c>=0;)for(;r(o,1),!i(o););}),a&&(n.count=(i,o)=>(Dv.setTime(+i),Ov.setTime(+o),e(Dv),e(Ov),Math.floor(a(Dv,Ov))),n.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?n.filter(s?o=>s(o)%i===0:o=>n.count(0,o)%i===0):n)),n}const $0=Na(()=>{},(e,r)=>{e.setTime(+e+r)},(e,r)=>r-e);$0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Na(r=>{r.setTime(Math.floor(r/e)*e)},(r,a)=>{r.setTime(+r+a*e)},(r,a)=>(a-r)/e):$0);$0.range;const Di=1e3,fn=Di*60,Oi=fn*60,Bi=Oi*24,qj=Bi*7,$E=Bi*30,Iv=Bi*365,Nl=Na(e=>{e.setTime(e-e.getMilliseconds())},(e,r)=>{e.setTime(+e+r*Di)},(e,r)=>(r-e)/Di,e=>e.getUTCSeconds());Nl.range;const Hj=Na(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Di)},(e,r)=>{e.setTime(+e+r*fn)},(e,r)=>(r-e)/fn,e=>e.getMinutes());Hj.range;const Wj=Na(e=>{e.setUTCSeconds(0,0)},(e,r)=>{e.setTime(+e+r*fn)},(e,r)=>(r-e)/fn,e=>e.getUTCMinutes());Wj.range;const Vj=Na(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Di-e.getMinutes()*fn)},(e,r)=>{e.setTime(+e+r*Oi)},(e,r)=>(r-e)/Oi,e=>e.getHours());Vj.range;const Kj=Na(e=>{e.setUTCMinutes(0,0,0)},(e,r)=>{e.setTime(+e+r*Oi)},(e,r)=>(r-e)/Oi,e=>e.getUTCHours());Kj.range;const Rm=Na(e=>e.setHours(0,0,0,0),(e,r)=>e.setDate(e.getDate()+r),(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*fn)/Bi,e=>e.getDate()-1);Rm.range;const Bf=Na(e=>{e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r)},(e,r)=>(r-e)/Bi,e=>e.getUTCDate()-1);Bf.range;const ZO=Na(e=>{e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r)},(e,r)=>(r-e)/Bi,e=>Math.floor(e/Bi));ZO.range;function Ql(e){return Na(r=>{r.setDate(r.getDate()-(r.getDay()+7-e)%7),r.setHours(0,0,0,0)},(r,a)=>{r.setDate(r.getDate()+a*7)},(r,a)=>(a-r-(a.getTimezoneOffset()-r.getTimezoneOffset())*fn)/qj)}const qf=Ql(0),U0=Ql(1),QK=Ql(2),XK=Ql(3),Jc=Ql(4),ZK=Ql(5),JK=Ql(6);qf.range;U0.range;QK.range;XK.range;Jc.range;ZK.range;JK.range;function Xl(e){return Na(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-e)%7),r.setUTCHours(0,0,0,0)},(r,a)=>{r.setUTCDate(r.getUTCDate()+a*7)},(r,a)=>(a-r)/qj)}const Hf=Xl(0),F0=Xl(1),eG=Xl(2),tG=Xl(3),ed=Xl(4),rG=Xl(5),aG=Xl(6);Hf.range;F0.range;eG.range;tG.range;ed.range;rG.range;aG.range;const Gj=Na(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,r)=>{e.setMonth(e.getMonth()+r)},(e,r)=>r.getMonth()-e.getMonth()+(r.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Gj.range;const Yj=Na(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCMonth(e.getUTCMonth()+r)},(e,r)=>r.getUTCMonth()-e.getUTCMonth()+(r.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Yj.range;const qi=Na(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r)},(e,r)=>r.getFullYear()-e.getFullYear(),e=>e.getFullYear());qi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Na(r=>{r.setFullYear(Math.floor(r.getFullYear()/e)*e),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,a)=>{r.setFullYear(r.getFullYear()+a*e)});qi.range;const Hi=Na(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r)},(e,r)=>r.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Na(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/e)*e),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,a)=>{r.setUTCFullYear(r.getUTCFullYear()+a*e)});Hi.range;function JO(e,r,a,s,n,i){const o=[[Nl,1,Di],[Nl,5,5*Di],[Nl,15,15*Di],[Nl,30,30*Di],[i,1,fn],[i,5,5*fn],[i,15,15*fn],[i,30,30*fn],[n,1,Oi],[n,3,3*Oi],[n,6,6*Oi],[n,12,12*Oi],[s,1,Bi],[s,2,2*Bi],[a,1,qj],[r,1,$E],[r,3,3*$E],[e,1,Iv]];function c(m,g,f){const y=g<m;y&&([m,g]=[g,m]);const p=f&&typeof f.range=="function"?f:u(m,g,f),b=p?p.range(m,+g+1):[];return y?b.reverse():b}function u(m,g,f){const y=Math.abs(g-m)/f,p=Tj(([,,v])=>v).right(o,y);if(p===o.length)return e.every(uw(m/Iv,g/Iv,f));if(p===0)return $0.every(Math.max(uw(m,g,f),1));const[b,j]=o[y/o[p-1][2]<o[p][2]/y?p-1:p];return b.every(j)}return[c,u]}const[sG,nG]=JO(Hi,Yj,Hf,ZO,Kj,Wj),[iG,oG]=JO(qi,Gj,qf,Rm,Vj,Hj);function Lv(e){if(0<=e.y&&e.y<100){var r=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return r.setFullYear(e.y),r}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Rv(e){if(0<=e.y&&e.y<100){var r=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return r.setUTCFullYear(e.y),r}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function pu(e,r,a){return{y:e,m:r,d:a,H:0,M:0,S:0,L:0}}function lG(e){var r=e.dateTime,a=e.date,s=e.time,n=e.periods,i=e.days,o=e.shortDays,c=e.months,u=e.shortMonths,m=yu(n),g=vu(n),f=yu(i),y=vu(i),p=yu(o),b=vu(o),j=yu(c),v=vu(c),N=yu(u),k=vu(u),E={a:ne,A:re,b:L,B:G,c:null,d:HE,e:HE,f:DG,g:zG,G:qG,H:AG,I:PG,j:TG,L:e6,m:OG,M:IG,p:T,q:_,Q:KE,s:GE,S:LG,u:RG,U:MG,V:_G,w:$G,W:UG,x:null,X:null,y:FG,Y:BG,Z:HG,"%":VE},C={a:F,A:ee,b:Z,B:U,c:null,d:WE,e:WE,f:GG,g:sY,G:iY,H:WG,I:VG,j:KG,L:r6,m:YG,M:QG,p:X,q:Q,Q:KE,s:GE,S:XG,u:ZG,U:JG,V:eY,w:tY,W:rY,x:null,X:null,y:aY,Y:nY,Z:oY,"%":VE},S={a:W,A:K,b:B,B:z,c:q,d:BE,e:BE,f:kG,g:zE,G:FE,H:qE,I:qE,j:bG,L:NG,m:vG,M:wG,p:H,q:yG,Q:CG,s:EG,S:jG,u:gG,U:hG,V:fG,w:mG,W:xG,x:J,X:ae,y:zE,Y:FE,Z:pG,"%":SG};E.x=P(a,E),E.X=P(s,E),E.c=P(r,E),C.x=P(a,C),C.X=P(s,C),C.c=P(r,C);function P(V,ge){return function(Te){var xe=[],qe=-1,se=0,De=V.length,Me,Ct,Dt;for(Te instanceof Date||(Te=new Date(+Te));++qe<De;)V.charCodeAt(qe)===37&&(xe.push(V.slice(se,qe)),(Ct=UE[Me=V.charAt(++qe)])!=null?Me=V.charAt(++qe):Ct=Me==="e"?" ":"0",(Dt=ge[Me])&&(Me=Dt(Te,Ct)),xe.push(Me),se=qe+1);return xe.push(V.slice(se,qe)),xe.join("")}}function D(V,ge){return function(Te){var xe=pu(1900,void 0,1),qe=I(xe,V,Te+="",0),se,De;if(qe!=Te.length)return null;if("Q"in xe)return new Date(xe.Q);if("s"in xe)return new Date(xe.s*1e3+("L"in xe?xe.L:0));if(ge&&!("Z"in xe)&&(xe.Z=0),"p"in xe&&(xe.H=xe.H%12+xe.p*12),xe.m===void 0&&(xe.m="q"in xe?xe.q:0),"V"in xe){if(xe.V<1||xe.V>53)return null;"w"in xe||(xe.w=1),"Z"in xe?(se=Rv(pu(xe.y,0,1)),De=se.getUTCDay(),se=De>4||De===0?F0.ceil(se):F0(se),se=Bf.offset(se,(xe.V-1)*7),xe.y=se.getUTCFullYear(),xe.m=se.getUTCMonth(),xe.d=se.getUTCDate()+(xe.w+6)%7):(se=Lv(pu(xe.y,0,1)),De=se.getDay(),se=De>4||De===0?U0.ceil(se):U0(se),se=Rm.offset(se,(xe.V-1)*7),xe.y=se.getFullYear(),xe.m=se.getMonth(),xe.d=se.getDate()+(xe.w+6)%7)}else("W"in xe||"U"in xe)&&("w"in xe||(xe.w="u"in xe?xe.u%7:"W"in xe?1:0),De="Z"in xe?Rv(pu(xe.y,0,1)).getUTCDay():Lv(pu(xe.y,0,1)).getDay(),xe.m=0,xe.d="W"in xe?(xe.w+6)%7+xe.W*7-(De+5)%7:xe.w+xe.U*7-(De+6)%7);return"Z"in xe?(xe.H+=xe.Z/100|0,xe.M+=xe.Z%100,Rv(xe)):Lv(xe)}}function I(V,ge,Te,xe){for(var qe=0,se=ge.length,De=Te.length,Me,Ct;qe<se;){if(xe>=De)return-1;if(Me=ge.charCodeAt(qe++),Me===37){if(Me=ge.charAt(qe++),Ct=S[Me in UE?ge.charAt(qe++):Me],!Ct||(xe=Ct(V,Te,xe))<0)return-1}else if(Me!=Te.charCodeAt(xe++))return-1}return xe}function H(V,ge,Te){var xe=m.exec(ge.slice(Te));return xe?(V.p=g.get(xe[0].toLowerCase()),Te+xe[0].length):-1}function W(V,ge,Te){var xe=p.exec(ge.slice(Te));return xe?(V.w=b.get(xe[0].toLowerCase()),Te+xe[0].length):-1}function K(V,ge,Te){var xe=f.exec(ge.slice(Te));return xe?(V.w=y.get(xe[0].toLowerCase()),Te+xe[0].length):-1}function B(V,ge,Te){var xe=N.exec(ge.slice(Te));return xe?(V.m=k.get(xe[0].toLowerCase()),Te+xe[0].length):-1}function z(V,ge,Te){var xe=j.exec(ge.slice(Te));return xe?(V.m=v.get(xe[0].toLowerCase()),Te+xe[0].length):-1}function q(V,ge,Te){return I(V,r,ge,Te)}function J(V,ge,Te){return I(V,a,ge,Te)}function ae(V,ge,Te){return I(V,s,ge,Te)}function ne(V){return o[V.getDay()]}function re(V){return i[V.getDay()]}function L(V){return u[V.getMonth()]}function G(V){return c[V.getMonth()]}function T(V){return n[+(V.getHours()>=12)]}function _(V){return 1+~~(V.getMonth()/3)}function F(V){return o[V.getUTCDay()]}function ee(V){return i[V.getUTCDay()]}function Z(V){return u[V.getUTCMonth()]}function U(V){return c[V.getUTCMonth()]}function X(V){return n[+(V.getUTCHours()>=12)]}function Q(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var ge=P(V+="",E);return ge.toString=function(){return V},ge},parse:function(V){var ge=D(V+="",!1);return ge.toString=function(){return V},ge},utcFormat:function(V){var ge=P(V+="",C);return ge.toString=function(){return V},ge},utcParse:function(V){var ge=D(V+="",!0);return ge.toString=function(){return V},ge}}}var UE={"-":"",_:" ",0:"0"},Fa=/^\s*\d+/,cG=/^%/,dG=/[\\^$*+?|[\]().{}]/g;function sr(e,r,a){var s=e<0?"-":"",n=(s?-e:e)+"",i=n.length;return s+(i<a?new Array(a-i+1).join(r)+n:n)}function uG(e){return e.replace(dG,"\\$&")}function yu(e){return new RegExp("^(?:"+e.map(uG).join("|")+")","i")}function vu(e){return new Map(e.map((r,a)=>[r.toLowerCase(),a]))}function mG(e,r,a){var s=Fa.exec(r.slice(a,a+1));return s?(e.w=+s[0],a+s[0].length):-1}function gG(e,r,a){var s=Fa.exec(r.slice(a,a+1));return s?(e.u=+s[0],a+s[0].length):-1}function hG(e,r,a){var s=Fa.exec(r.slice(a,a+2));return s?(e.U=+s[0],a+s[0].length):-1}function fG(e,r,a){var s=Fa.exec(r.slice(a,a+2));return s?(e.V=+s[0],a+s[0].length):-1}function xG(e,r,a){var s=Fa.exec(r.slice(a,a+2));return s?(e.W=+s[0],a+s[0].length):-1}function FE(e,r,a){var s=Fa.exec(r.slice(a,a+4));return s?(e.y=+s[0],a+s[0].length):-1}function zE(e,r,a){var s=Fa.exec(r.slice(a,a+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),a+s[0].length):-1}function pG(e,r,a){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(a,a+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),a+s[0].length):-1}function yG(e,r,a){var s=Fa.exec(r.slice(a,a+1));return s?(e.q=s[0]*3-3,a+s[0].length):-1}function vG(e,r,a){var s=Fa.exec(r.slice(a,a+2));return s?(e.m=s[0]-1,a+s[0].length):-1}function BE(e,r,a){var s=Fa.exec(r.slice(a,a+2));return s?(e.d=+s[0],a+s[0].length):-1}function bG(e,r,a){var s=Fa.exec(r.slice(a,a+3));return s?(e.m=0,e.d=+s[0],a+s[0].length):-1}function qE(e,r,a){var s=Fa.exec(r.slice(a,a+2));return s?(e.H=+s[0],a+s[0].length):-1}function wG(e,r,a){var s=Fa.exec(r.slice(a,a+2));return s?(e.M=+s[0],a+s[0].length):-1}function jG(e,r,a){var s=Fa.exec(r.slice(a,a+2));return s?(e.S=+s[0],a+s[0].length):-1}function NG(e,r,a){var s=Fa.exec(r.slice(a,a+3));return s?(e.L=+s[0],a+s[0].length):-1}function kG(e,r,a){var s=Fa.exec(r.slice(a,a+6));return s?(e.L=Math.floor(s[0]/1e3),a+s[0].length):-1}function SG(e,r,a){var s=cG.exec(r.slice(a,a+1));return s?a+s[0].length:-1}function CG(e,r,a){var s=Fa.exec(r.slice(a));return s?(e.Q=+s[0],a+s[0].length):-1}function EG(e,r,a){var s=Fa.exec(r.slice(a));return s?(e.s=+s[0],a+s[0].length):-1}function HE(e,r){return sr(e.getDate(),r,2)}function AG(e,r){return sr(e.getHours(),r,2)}function PG(e,r){return sr(e.getHours()%12||12,r,2)}function TG(e,r){return sr(1+Rm.count(qi(e),e),r,3)}function e6(e,r){return sr(e.getMilliseconds(),r,3)}function DG(e,r){return e6(e,r)+"000"}function OG(e,r){return sr(e.getMonth()+1,r,2)}function IG(e,r){return sr(e.getMinutes(),r,2)}function LG(e,r){return sr(e.getSeconds(),r,2)}function RG(e){var r=e.getDay();return r===0?7:r}function MG(e,r){return sr(qf.count(qi(e)-1,e),r,2)}function t6(e){var r=e.getDay();return r>=4||r===0?Jc(e):Jc.ceil(e)}function _G(e,r){return e=t6(e),sr(Jc.count(qi(e),e)+(qi(e).getDay()===4),r,2)}function $G(e){return e.getDay()}function UG(e,r){return sr(U0.count(qi(e)-1,e),r,2)}function FG(e,r){return sr(e.getFullYear()%100,r,2)}function zG(e,r){return e=t6(e),sr(e.getFullYear()%100,r,2)}function BG(e,r){return sr(e.getFullYear()%1e4,r,4)}function qG(e,r){var a=e.getDay();return e=a>=4||a===0?Jc(e):Jc.ceil(e),sr(e.getFullYear()%1e4,r,4)}function HG(e){var r=e.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+sr(r/60|0,"0",2)+sr(r%60,"0",2)}function WE(e,r){return sr(e.getUTCDate(),r,2)}function WG(e,r){return sr(e.getUTCHours(),r,2)}function VG(e,r){return sr(e.getUTCHours()%12||12,r,2)}function KG(e,r){return sr(1+Bf.count(Hi(e),e),r,3)}function r6(e,r){return sr(e.getUTCMilliseconds(),r,3)}function GG(e,r){return r6(e,r)+"000"}function YG(e,r){return sr(e.getUTCMonth()+1,r,2)}function QG(e,r){return sr(e.getUTCMinutes(),r,2)}function XG(e,r){return sr(e.getUTCSeconds(),r,2)}function ZG(e){var r=e.getUTCDay();return r===0?7:r}function JG(e,r){return sr(Hf.count(Hi(e)-1,e),r,2)}function a6(e){var r=e.getUTCDay();return r>=4||r===0?ed(e):ed.ceil(e)}function eY(e,r){return e=a6(e),sr(ed.count(Hi(e),e)+(Hi(e).getUTCDay()===4),r,2)}function tY(e){return e.getUTCDay()}function rY(e,r){return sr(F0.count(Hi(e)-1,e),r,2)}function aY(e,r){return sr(e.getUTCFullYear()%100,r,2)}function sY(e,r){return e=a6(e),sr(e.getUTCFullYear()%100,r,2)}function nY(e,r){return sr(e.getUTCFullYear()%1e4,r,4)}function iY(e,r){var a=e.getUTCDay();return e=a>=4||a===0?ed(e):ed.ceil(e),sr(e.getUTCFullYear()%1e4,r,4)}function oY(){return"+0000"}function VE(){return"%"}function KE(e){return+e}function GE(e){return Math.floor(+e/1e3)}var Nc,s6,n6;lY({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lY(e){return Nc=lG(e),s6=Nc.format,Nc.parse,n6=Nc.utcFormat,Nc.utcParse,Nc}function cY(e){return new Date(e)}function dY(e){return e instanceof Date?+e:+new Date(+e)}function Qj(e,r,a,s,n,i,o,c,u,m){var g=Mj(),f=g.invert,y=g.domain,p=m(".%L"),b=m(":%S"),j=m("%I:%M"),v=m("%I %p"),N=m("%a %d"),k=m("%b %d"),E=m("%B"),C=m("%Y");function S(P){return(u(P)<P?p:c(P)<P?b:o(P)<P?j:i(P)<P?v:s(P)<P?n(P)<P?N:k:a(P)<P?E:C)(P)}return g.invert=function(P){return new Date(f(P))},g.domain=function(P){return arguments.length?y(Array.from(P,dY)):y().map(cY)},g.ticks=function(P){var D=y();return e(D[0],D[D.length-1],P??10)},g.tickFormat=function(P,D){return D==null?S:m(D)},g.nice=function(P){var D=y();return(!P||typeof P.range!="function")&&(P=r(D[0],D[D.length-1],P??10)),P?y(WO(D,P)):g},g.copy=function(){return Lm(g,Qj(e,r,a,s,n,i,o,c,u,m))},g}function uY(){return kn.apply(Qj(iG,oG,qi,Gj,qf,Rm,Vj,Hj,Nl,s6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function mY(){return kn.apply(Qj(sG,nG,Hi,Yj,Hf,Bf,Kj,Wj,Nl,n6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Wf(){var e=0,r=1,a,s,n,i,o=ds,c=!1,u;function m(f){return f==null||isNaN(f=+f)?u:o(n===0?.5:(f=(i(f)-a)*n,c?Math.max(0,Math.min(1,f)):f))}m.domain=function(f){return arguments.length?([e,r]=f,a=i(e=+e),s=i(r=+r),n=a===s?0:1/(s-a),m):[e,r]},m.clamp=function(f){return arguments.length?(c=!!f,m):c},m.interpolator=function(f){return arguments.length?(o=f,m):o};function g(f){return function(y){var p,b;return arguments.length?([p,b]=y,o=f(p,b),m):[o(0),o(1)]}}return m.range=g(hd),m.rangeRound=g(Rj),m.unknown=function(f){return arguments.length?(u=f,m):u},function(f){return i=f,a=f(e),s=f(r),n=a===s?0:1/(s-a),m}}function Qo(e,r){return r.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function i6(){var e=Yo(Wf()(ds));return e.copy=function(){return Qo(e,i6())},Xi.apply(e,arguments)}function o6(){var e=Uj(Wf()).domain([1,10]);return e.copy=function(){return Qo(e,o6()).base(e.base())},Xi.apply(e,arguments)}function l6(){var e=Fj(Wf());return e.copy=function(){return Qo(e,l6()).constant(e.constant())},Xi.apply(e,arguments)}function Xj(){var e=zj(Wf());return e.copy=function(){return Qo(e,Xj()).exponent(e.exponent())},Xi.apply(e,arguments)}function gY(){return Xj.apply(null,arguments).exponent(.5)}function c6(){var e=[],r=ds;function a(s){if(s!=null&&!isNaN(s=+s))return r((Om(e,s,1)-1)/(e.length-1))}return a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let n of s)n!=null&&!isNaN(n=+n)&&e.push(n);return e.sort(_o),a},a.interpolator=function(s){return arguments.length?(r=s,a):r},a.range=function(){return e.map((s,n)=>r(n/(e.length-1)))},a.quantiles=function(s){return Array.from({length:s+1},(n,i)=>ZV(e,i/s))},a.copy=function(){return c6(r).domain(e)},Xi.apply(a,arguments)}function Vf(){var e=0,r=.5,a=1,s=1,n,i,o,c,u,m=ds,g,f=!1,y;function p(j){return isNaN(j=+j)?y:(j=.5+((j=+g(j))-i)*(s*j<s*i?c:u),m(f?Math.max(0,Math.min(1,j)):j))}p.domain=function(j){return arguments.length?([e,r,a]=j,n=g(e=+e),i=g(r=+r),o=g(a=+a),c=n===i?0:.5/(i-n),u=i===o?0:.5/(o-i),s=i<n?-1:1,p):[e,r,a]},p.clamp=function(j){return arguments.length?(f=!!j,p):f},p.interpolator=function(j){return arguments.length?(m=j,p):m};function b(j){return function(v){var N,k,E;return arguments.length?([N,k,E]=v,m=SK(j,[N,k,E]),p):[m(0),m(.5),m(1)]}}return p.range=b(hd),p.rangeRound=b(Rj),p.unknown=function(j){return arguments.length?(y=j,p):y},function(j){return g=j,n=j(e),i=j(r),o=j(a),c=n===i?0:.5/(i-n),u=i===o?0:.5/(o-i),s=i<n?-1:1,p}}function d6(){var e=Yo(Vf()(ds));return e.copy=function(){return Qo(e,d6())},Xi.apply(e,arguments)}function u6(){var e=Uj(Vf()).domain([.1,1,10]);return e.copy=function(){return Qo(e,u6()).base(e.base())},Xi.apply(e,arguments)}function m6(){var e=Fj(Vf());return e.copy=function(){return Qo(e,m6()).constant(e.constant())},Xi.apply(e,arguments)}function Zj(){var e=zj(Vf());return e.copy=function(){return Qo(e,Zj()).exponent(e.exponent())},Xi.apply(e,arguments)}function hY(){return Zj.apply(null,arguments).exponent(.5)}const Pu=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Oj,scaleDiverging:d6,scaleDivergingLog:u6,scaleDivergingPow:Zj,scaleDivergingSqrt:hY,scaleDivergingSymlog:m6,scaleIdentity:HO,scaleImplicit:mw,scaleLinear:qO,scaleLog:VO,scaleOrdinal:Dj,scalePoint:tK,scalePow:Bj,scaleQuantile:YO,scaleQuantize:QO,scaleRadial:GO,scaleSequential:i6,scaleSequentialLog:o6,scaleSequentialPow:Xj,scaleSequentialQuantile:c6,scaleSequentialSqrt:gY,scaleSequentialSymlog:l6,scaleSqrt:GK,scaleSymlog:KO,scaleThreshold:XO,scaleTime:uY,scaleUtc:mY,tickFormat:BO},Symbol.toStringTag,{value:"Module"}));var Xo=e=>e.chartData,Jj=we([Xo],e=>{var r=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:r,dataStartIndex:0}}),Mm=(e,r,a,s)=>s?Jj(e):Xo(e);function Bo(e){if(Array.isArray(e)&&e.length===2){var[r,a]=e;if(Ir(r)&&Ir(a))return!0}return!1}function YE(e,r,a){return a?e:[Math.min(e[0],r[0]),Math.max(e[1],r[1])]}function g6(e,r){if(r&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[a,s]=e,n,i;if(Ir(a))n=a;else if(typeof a=="function")return;if(Ir(s))i=s;else if(typeof s=="function")return;var o=[n,i];if(Bo(o))return o}}function fY(e,r,a){if(!(!a&&r==null)){if(typeof e=="function"&&r!=null)try{var s=e(r,a);if(Bo(s))return YE(s,r,a)}catch{}if(Array.isArray(e)&&e.length===2){var[n,i]=e,o,c;if(n==="auto")r!=null&&(o=Math.min(...r));else if(Je(n))o=n;else if(typeof n=="function")try{r!=null&&(o=n(r?.[0]))}catch{}else if(typeof n=="string"&&N4.test(n)){var u=N4.exec(n);if(u==null||r==null)o=void 0;else{var m=+u[1];o=r[0]-m}}else o=r?.[0];if(i==="auto")r!=null&&(c=Math.max(...r));else if(Je(i))c=i;else if(typeof i=="function")try{r!=null&&(c=i(r?.[1]))}catch{}else if(typeof i=="string"&&k4.test(i)){var g=k4.exec(i);if(g==null||r==null)c=void 0;else{var f=+g[1];c=r[1]+f}}else c=r?.[1];var y=[o,c];if(Bo(y))return r==null?y:YE(y,r,a)}}}var fd=1e9,xY={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},tN,$r=!0,bn="[DecimalError] ",Ll=bn+"Invalid argument: ",eN=bn+"Exponent out of range: ",xd=Math.floor,vl=Math.pow,pY=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vs,Ia=1e7,Dr=7,h6=9007199254740991,z0=xd(h6/Dr),nt={};nt.absoluteValue=nt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};nt.comparedTo=nt.cmp=function(e){var r,a,s,n,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,n=e.d.length,r=0,a=s<n?s:n;r<a;++r)if(i.d[r]!==e.d[r])return i.d[r]>e.d[r]^i.s<0?1:-1;return s===n?0:s>n^i.s<0?1:-1};nt.decimalPlaces=nt.dp=function(){var e=this,r=e.d.length-1,a=(r-e.e)*Dr;if(r=e.d[r],r)for(;r%10==0;r/=10)a--;return a<0?0:a};nt.dividedBy=nt.div=function(e){return Mi(this,new this.constructor(e))};nt.dividedToIntegerBy=nt.idiv=function(e){var r=this,a=r.constructor;return wr(Mi(r,new a(e),0,1),a.precision)};nt.equals=nt.eq=function(e){return!this.cmp(e)};nt.exponent=function(){return ua(this)};nt.greaterThan=nt.gt=function(e){return this.cmp(e)>0};nt.greaterThanOrEqualTo=nt.gte=function(e){return this.cmp(e)>=0};nt.isInteger=nt.isint=function(){return this.e>this.d.length-2};nt.isNegative=nt.isneg=function(){return this.s<0};nt.isPositive=nt.ispos=function(){return this.s>0};nt.isZero=function(){return this.s===0};nt.lessThan=nt.lt=function(e){return this.cmp(e)<0};nt.lessThanOrEqualTo=nt.lte=function(e){return this.cmp(e)<1};nt.logarithm=nt.log=function(e){var r,a=this,s=a.constructor,n=s.precision,i=n+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Vs))throw Error(bn+"NaN");if(a.s<1)throw Error(bn+(a.s?"NaN":"-Infinity"));return a.eq(Vs)?new s(0):($r=!1,r=Mi(nm(a,i),nm(e,i),i),$r=!0,wr(r,n))};nt.minus=nt.sub=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?p6(r,e):f6(r,(e.s=-e.s,e))};nt.modulo=nt.mod=function(e){var r,a=this,s=a.constructor,n=s.precision;if(e=new s(e),!e.s)throw Error(bn+"NaN");return a.s?($r=!1,r=Mi(a,e,0,1).times(e),$r=!0,a.minus(r)):wr(new s(a),n)};nt.naturalExponential=nt.exp=function(){return x6(this)};nt.naturalLogarithm=nt.ln=function(){return nm(this)};nt.negated=nt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};nt.plus=nt.add=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?f6(r,e):p6(r,(e.s=-e.s,e))};nt.precision=nt.sd=function(e){var r,a,s,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ll+e);if(r=ua(n)+1,s=n.d.length-1,a=s*Dr+1,s=n.d[s],s){for(;s%10==0;s/=10)a--;for(s=n.d[0];s>=10;s/=10)a++}return e&&r>a?r:a};nt.squareRoot=nt.sqrt=function(){var e,r,a,s,n,i,o,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(bn+"NaN")}for(e=ua(c),$r=!1,n=Math.sqrt(+c),n==0||n==1/0?(r=ei(c.d),(r.length+e)%2==0&&(r+="0"),n=Math.sqrt(r),e=xd((e+1)/2)-(e<0||e%2),n==1/0?r="5e"+e:(r=n.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),s=new u(r)):s=new u(n.toString()),a=u.precision,n=o=a+3;;)if(i=s,s=i.plus(Mi(c,i,o+2)).times(.5),ei(i.d).slice(0,o)===(r=ei(s.d)).slice(0,o)){if(r=r.slice(o-3,o+1),n==o&&r=="4999"){if(wr(i,a+1,0),i.times(i).eq(c)){s=i;break}}else if(r!="9999")break;o+=4}return $r=!0,wr(s,a)};nt.times=nt.mul=function(e){var r,a,s,n,i,o,c,u,m,g=this,f=g.constructor,y=g.d,p=(e=new f(e)).d;if(!g.s||!e.s)return new f(0);for(e.s*=g.s,a=g.e+e.e,u=y.length,m=p.length,u<m&&(i=y,y=p,p=i,o=u,u=m,m=o),i=[],o=u+m,s=o;s--;)i.push(0);for(s=m;--s>=0;){for(r=0,n=u+s;n>s;)c=i[n]+p[s]*y[n-s-1]+r,i[n--]=c%Ia|0,r=c/Ia|0;i[n]=(i[n]+r)%Ia|0}for(;!i[--o];)i.pop();return r?++a:i.shift(),e.d=i,e.e=a,$r?wr(e,f.precision):e};nt.toDecimalPlaces=nt.todp=function(e,r){var a=this,s=a.constructor;return a=new s(a),e===void 0?a:(oi(e,0,fd),r===void 0?r=s.rounding:oi(r,0,8),wr(a,e+ua(a)+1,r))};nt.toExponential=function(e,r){var a,s=this,n=s.constructor;return e===void 0?a=Hl(s,!0):(oi(e,0,fd),r===void 0?r=n.rounding:oi(r,0,8),s=wr(new n(s),e+1,r),a=Hl(s,!0,e+1)),a};nt.toFixed=function(e,r){var a,s,n=this,i=n.constructor;return e===void 0?Hl(n):(oi(e,0,fd),r===void 0?r=i.rounding:oi(r,0,8),s=wr(new i(n),e+ua(n)+1,r),a=Hl(s.abs(),!1,e+ua(s)+1),n.isneg()&&!n.isZero()?"-"+a:a)};nt.toInteger=nt.toint=function(){var e=this,r=e.constructor;return wr(new r(e),ua(e)+1,r.rounding)};nt.toNumber=function(){return+this};nt.toPower=nt.pow=function(e){var r,a,s,n,i,o,c=this,u=c.constructor,m=12,g=+(e=new u(e));if(!e.s)return new u(Vs);if(c=new u(c),!c.s){if(e.s<1)throw Error(bn+"Infinity");return c}if(c.eq(Vs))return c;if(s=u.precision,e.eq(Vs))return wr(c,s);if(r=e.e,a=e.d.length-1,o=r>=a,i=c.s,o){if((a=g<0?-g:g)<=h6){for(n=new u(Vs),r=Math.ceil(s/Dr+4),$r=!1;a%2&&(n=n.times(c),XE(n.d,r)),a=xd(a/2),a!==0;)c=c.times(c),XE(c.d,r);return $r=!0,e.s<0?new u(Vs).div(n):wr(n,s)}}else if(i<0)throw Error(bn+"NaN");return i=i<0&&e.d[Math.max(r,a)]&1?-1:1,c.s=1,$r=!1,n=e.times(nm(c,s+m)),$r=!0,n=x6(n),n.s=i,n};nt.toPrecision=function(e,r){var a,s,n=this,i=n.constructor;return e===void 0?(a=ua(n),s=Hl(n,a<=i.toExpNeg||a>=i.toExpPos)):(oi(e,1,fd),r===void 0?r=i.rounding:oi(r,0,8),n=wr(new i(n),e,r),a=ua(n),s=Hl(n,e<=a||a<=i.toExpNeg,e)),s};nt.toSignificantDigits=nt.tosd=function(e,r){var a=this,s=a.constructor;return e===void 0?(e=s.precision,r=s.rounding):(oi(e,1,fd),r===void 0?r=s.rounding:oi(r,0,8)),wr(new s(a),e,r)};nt.toString=nt.valueOf=nt.val=nt.toJSON=nt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,r=ua(e),a=e.constructor;return Hl(e,r<=a.toExpNeg||r>=a.toExpPos)};function f6(e,r){var a,s,n,i,o,c,u,m,g=e.constructor,f=g.precision;if(!e.s||!r.s)return r.s||(r=new g(e)),$r?wr(r,f):r;if(u=e.d,m=r.d,o=e.e,n=r.e,u=u.slice(),i=o-n,i){for(i<0?(s=u,i=-i,c=m.length):(s=m,n=o,c=u.length),o=Math.ceil(f/Dr),c=o>c?o+1:c+1,i>c&&(i=c,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(c=u.length,i=m.length,c-i<0&&(i=c,s=m,m=u,u=s),a=0;i;)a=(u[--i]=u[i]+m[i]+a)/Ia|0,u[i]%=Ia;for(a&&(u.unshift(a),++n),c=u.length;u[--c]==0;)u.pop();return r.d=u,r.e=n,$r?wr(r,f):r}function oi(e,r,a){if(e!==~~e||e<r||e>a)throw Error(Ll+e)}function ei(e){var r,a,s,n=e.length-1,i="",o=e[0];if(n>0){for(i+=o,r=1;r<n;r++)s=e[r]+"",a=Dr-s.length,a&&(i+=Ao(a)),i+=s;o=e[r],s=o+"",a=Dr-s.length,a&&(i+=Ao(a))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Mi=(function(){function e(s,n){var i,o=0,c=s.length;for(s=s.slice();c--;)i=s[c]*n+o,s[c]=i%Ia|0,o=i/Ia|0;return o&&s.unshift(o),s}function r(s,n,i,o){var c,u;if(i!=o)u=i>o?1:-1;else for(c=u=0;c<i;c++)if(s[c]!=n[c]){u=s[c]>n[c]?1:-1;break}return u}function a(s,n,i){for(var o=0;i--;)s[i]-=o,o=s[i]<n[i]?1:0,s[i]=o*Ia+s[i]-n[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,n,i,o){var c,u,m,g,f,y,p,b,j,v,N,k,E,C,S,P,D,I,H=s.constructor,W=s.s==n.s?1:-1,K=s.d,B=n.d;if(!s.s)return new H(s);if(!n.s)throw Error(bn+"Division by zero");for(u=s.e-n.e,D=B.length,S=K.length,p=new H(W),b=p.d=[],m=0;B[m]==(K[m]||0);)++m;if(B[m]>(K[m]||0)&&--u,i==null?k=i=H.precision:o?k=i+(ua(s)-ua(n))+1:k=i,k<0)return new H(0);if(k=k/Dr+2|0,m=0,D==1)for(g=0,B=B[0],k++;(m<S||g)&&k--;m++)E=g*Ia+(K[m]||0),b[m]=E/B|0,g=E%B|0;else{for(g=Ia/(B[0]+1)|0,g>1&&(B=e(B,g),K=e(K,g),D=B.length,S=K.length),C=D,j=K.slice(0,D),v=j.length;v<D;)j[v++]=0;I=B.slice(),I.unshift(0),P=B[0],B[1]>=Ia/2&&++P;do g=0,c=r(B,j,D,v),c<0?(N=j[0],D!=v&&(N=N*Ia+(j[1]||0)),g=N/P|0,g>1?(g>=Ia&&(g=Ia-1),f=e(B,g),y=f.length,v=j.length,c=r(f,j,y,v),c==1&&(g--,a(f,D<y?I:B,y))):(g==0&&(c=g=1),f=B.slice()),y=f.length,y<v&&f.unshift(0),a(j,f,v),c==-1&&(v=j.length,c=r(B,j,D,v),c<1&&(g++,a(j,D<v?I:B,v))),v=j.length):c===0&&(g++,j=[0]),b[m++]=g,c&&j[0]?j[v++]=K[C]||0:(j=[K[C]],v=1);while((C++<S||j[0]!==void 0)&&k--)}return b[0]||b.shift(),p.e=u,wr(p,o?i+ua(p)+1:i)}})();function x6(e,r){var a,s,n,i,o,c,u=0,m=0,g=e.constructor,f=g.precision;if(ua(e)>16)throw Error(eN+ua(e));if(!e.s)return new g(Vs);for($r=!1,c=f,o=new g(.03125);e.abs().gte(.1);)e=e.times(o),m+=5;for(s=Math.log(vl(2,m))/Math.LN10*2+5|0,c+=s,a=n=i=new g(Vs),g.precision=c;;){if(n=wr(n.times(e),c),a=a.times(++u),o=i.plus(Mi(n,a,c)),ei(o.d).slice(0,c)===ei(i.d).slice(0,c)){for(;m--;)i=wr(i.times(i),c);return g.precision=f,r==null?($r=!0,wr(i,f)):i}i=o}}function ua(e){for(var r=e.e*Dr,a=e.d[0];a>=10;a/=10)r++;return r}function Mv(e,r,a){if(r>e.LN10.sd())throw $r=!0,a&&(e.precision=a),Error(bn+"LN10 precision limit exceeded");return wr(new e(e.LN10),r)}function Ao(e){for(var r="";e--;)r+="0";return r}function nm(e,r){var a,s,n,i,o,c,u,m,g,f=1,y=10,p=e,b=p.d,j=p.constructor,v=j.precision;if(p.s<1)throw Error(bn+(p.s?"NaN":"-Infinity"));if(p.eq(Vs))return new j(0);if(r==null?($r=!1,m=v):m=r,p.eq(10))return r==null&&($r=!0),Mv(j,m);if(m+=y,j.precision=m,a=ei(b),s=a.charAt(0),i=ua(p),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&a.charAt(1)>3;)p=p.times(e),a=ei(p.d),s=a.charAt(0),f++;i=ua(p),s>1?(p=new j("0."+a),i++):p=new j(s+"."+a.slice(1))}else return u=Mv(j,m+2,v).times(i+""),p=nm(new j(s+"."+a.slice(1)),m-y).plus(u),j.precision=v,r==null?($r=!0,wr(p,v)):p;for(c=o=p=Mi(p.minus(Vs),p.plus(Vs),m),g=wr(p.times(p),m),n=3;;){if(o=wr(o.times(g),m),u=c.plus(Mi(o,new j(n),m)),ei(u.d).slice(0,m)===ei(c.d).slice(0,m))return c=c.times(2),i!==0&&(c=c.plus(Mv(j,m+2,v).times(i+""))),c=Mi(c,new j(f),m),j.precision=v,r==null?($r=!0,wr(c,v)):c;c=u,n+=2}}function QE(e,r){var a,s,n;for((a=r.indexOf("."))>-1&&(r=r.replace(".","")),(s=r.search(/e/i))>0?(a<0&&(a=s),a+=+r.slice(s+1),r=r.substring(0,s)):a<0&&(a=r.length),s=0;r.charCodeAt(s)===48;)++s;for(n=r.length;r.charCodeAt(n-1)===48;)--n;if(r=r.slice(s,n),r){if(n-=s,a=a-s-1,e.e=xd(a/Dr),e.d=[],s=(a+1)%Dr,a<0&&(s+=Dr),s<n){for(s&&e.d.push(+r.slice(0,s)),n-=Dr;s<n;)e.d.push(+r.slice(s,s+=Dr));r=r.slice(s),s=Dr-r.length}else s-=n;for(;s--;)r+="0";if(e.d.push(+r),$r&&(e.e>z0||e.e<-z0))throw Error(eN+a)}else e.s=0,e.e=0,e.d=[0];return e}function wr(e,r,a){var s,n,i,o,c,u,m,g,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(s=r-o,s<0)s+=Dr,n=r,m=f[g=0];else{if(g=Math.ceil((s+1)/Dr),i=f.length,g>=i)return e;for(m=i=f[g],o=1;i>=10;i/=10)o++;s%=Dr,n=s-Dr+o}if(a!==void 0&&(i=vl(10,o-n-1),c=m/i%10|0,u=r<0||f[g+1]!==void 0||m%i,u=a<4?(c||u)&&(a==0||a==(e.s<0?3:2)):c>5||c==5&&(a==4||u||a==6&&(s>0?n>0?m/vl(10,o-n):0:f[g-1])%10&1||a==(e.s<0?8:7))),r<1||!f[0])return u?(i=ua(e),f.length=1,r=r-i-1,f[0]=vl(10,(Dr-r%Dr)%Dr),e.e=xd(-r/Dr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(s==0?(f.length=g,i=1,g--):(f.length=g+1,i=vl(10,Dr-s),f[g]=n>0?(m/vl(10,o-n)%vl(10,n)|0)*i:0),u)for(;;)if(g==0){(f[0]+=i)==Ia&&(f[0]=1,++e.e);break}else{if(f[g]+=i,f[g]!=Ia)break;f[g--]=0,i=1}for(s=f.length;f[--s]===0;)f.pop();if($r&&(e.e>z0||e.e<-z0))throw Error(eN+ua(e));return e}function p6(e,r){var a,s,n,i,o,c,u,m,g,f,y=e.constructor,p=y.precision;if(!e.s||!r.s)return r.s?r.s=-r.s:r=new y(e),$r?wr(r,p):r;if(u=e.d,f=r.d,s=r.e,m=e.e,u=u.slice(),o=m-s,o){for(g=o<0,g?(a=u,o=-o,c=f.length):(a=f,s=m,c=u.length),n=Math.max(Math.ceil(p/Dr),c)+2,o>n&&(o=n,a.length=1),a.reverse(),n=o;n--;)a.push(0);a.reverse()}else{for(n=u.length,c=f.length,g=n<c,g&&(c=n),n=0;n<c;n++)if(u[n]!=f[n]){g=u[n]<f[n];break}o=0}for(g&&(a=u,u=f,f=a,r.s=-r.s),c=u.length,n=f.length-c;n>0;--n)u[c++]=0;for(n=f.length;n>o;){if(u[--n]<f[n]){for(i=n;i&&u[--i]===0;)u[i]=Ia-1;--u[i],u[n]+=Ia}u[n]-=f[n]}for(;u[--c]===0;)u.pop();for(;u[0]===0;u.shift())--s;return u[0]?(r.d=u,r.e=s,$r?wr(r,p):r):new y(0)}function Hl(e,r,a){var s,n=ua(e),i=ei(e.d),o=i.length;return r?(a&&(s=a-o)>0?i=i.charAt(0)+"."+i.slice(1)+Ao(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(n<0?"e":"e+")+n):n<0?(i="0."+Ao(-n-1)+i,a&&(s=a-o)>0&&(i+=Ao(s))):n>=o?(i+=Ao(n+1-o),a&&(s=a-n-1)>0&&(i=i+"."+Ao(s))):((s=n+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),a&&(s=a-o)>0&&(n+1===o&&(i+="."),i+=Ao(s))),e.s<0?"-"+i:i}function XE(e,r){if(e.length>r)return e.length=r,!0}function y6(e){var r,a,s;function n(i){var o=this;if(!(o instanceof n))return new n(i);if(o.constructor=n,i instanceof n){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ll+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return QE(o,i.toString())}else if(typeof i!="string")throw Error(Ll+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,pY.test(i))QE(o,i);else throw Error(Ll+i)}if(n.prototype=nt,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=y6,n.config=n.set=yY,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<s.length;)e.hasOwnProperty(a=s[r++])||(e[a]=this[a]);return n.config(e),n}function yY(e){if(!e||typeof e!="object")throw Error(bn+"Object expected");var r,a,s,n=["precision",1,fd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(r=0;r<n.length;r+=3)if((s=e[a=n[r]])!==void 0)if(xd(s)===s&&s>=n[r+1]&&s<=n[r+2])this[a]=s;else throw Error(Ll+a+": "+s);if((s=e[a="LN10"])!==void 0)if(s==Math.LN10)this[a]=new this(s);else throw Error(Ll+a+": "+s);return this}var tN=y6(xY);Vs=new tN(1);const hr=tN;var vY=e=>e,v6={},b6=e=>e===v6,ZE=e=>function r(){return arguments.length===0||arguments.length===1&&b6(arguments.length<=0?void 0:arguments[0])?r:e(...arguments)},w6=(e,r)=>e===1?r:ZE(function(){for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];var i=s.filter(o=>o!==v6).length;return i>=e?r(...s):w6(e-i,ZE(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var m=s.map(g=>b6(g)?c.shift():g);return r(...m,...c)}))}),bY=e=>w6(e.length,e),xw=(e,r)=>{for(var a=[],s=e;s<r;++s)a[s-e]=s;return a},wY=bY((e,r)=>Array.isArray(r)?r.map(e):Object.keys(r).map(a=>r[a]).map(e)),jY=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];if(!a.length)return vY;var n=a.reverse(),i=n[0],o=n.slice(1);return function(){return o.reduce((c,u)=>u(c),i(...arguments))}},pw=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function j6(e){var r;return e===0?r=1:r=Math.floor(new hr(e).abs().log(10).toNumber())+1,r}function N6(e,r,a){for(var s=new hr(e),n=0,i=[];s.lt(r)&&n<1e5;)i.push(s.toNumber()),s=s.add(a),n++;return i}var k6=e=>{var[r,a]=e,[s,n]=[r,a];return r>a&&([s,n]=[a,r]),[s,n]},S6=(e,r,a)=>{if(e.lte(0))return new hr(0);var s=j6(e.toNumber()),n=new hr(10).pow(s),i=e.div(n),o=s!==1?.05:.1,c=new hr(Math.ceil(i.div(o).toNumber())).add(a).mul(o),u=c.mul(n);return r?new hr(u.toNumber()):new hr(Math.ceil(u.toNumber()))},NY=(e,r,a)=>{var s=new hr(1),n=new hr(e);if(!n.isint()&&a){var i=Math.abs(e);i<1?(s=new hr(10).pow(j6(e)-1),n=new hr(Math.floor(n.div(s).toNumber())).mul(s)):i>1&&(n=new hr(Math.floor(e)))}else e===0?n=new hr(Math.floor((r-1)/2)):a||(n=new hr(Math.floor(e)));var o=Math.floor((r-1)/2),c=jY(wY(u=>n.add(new hr(u-o).mul(s)).toNumber()),xw);return c(0,r)},C6=function(r,a,s,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((a-r)/(s-1)))return{step:new hr(0),tickMin:new hr(0),tickMax:new hr(0)};var o=S6(new hr(a).sub(r).div(s-1),n,i),c;r<=0&&a>=0?c=new hr(0):(c=new hr(r).add(a).div(2),c=c.sub(new hr(c).mod(o)));var u=Math.ceil(c.sub(r).div(o).toNumber()),m=Math.ceil(new hr(a).sub(c).div(o).toNumber()),g=u+m+1;return g>s?C6(r,a,s,n,i+1):(g<s&&(m=a>0?m+(s-g):m,u=a>0?u:u+(s-g)),{step:o,tickMin:c.sub(new hr(u).mul(o)),tickMax:c.add(new hr(m).mul(o))})},kY=function(r){var[a,s]=r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(n,2),[c,u]=k6([a,s]);if(c===-1/0||u===1/0){var m=u===1/0?[c,...xw(0,n-1).map(()=>1/0)]:[...xw(0,n-1).map(()=>-1/0),u];return a>s?pw(m):m}if(c===u)return NY(c,n,i);var{step:g,tickMin:f,tickMax:y}=C6(c,u,o,i,0),p=N6(f,y.add(new hr(.1).mul(g)),g);return a>s?pw(p):p},SY=function(r,a){var[s,n]=r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,c]=k6([s,n]);if(o===-1/0||c===1/0)return[s,n];if(o===c)return[o];var u=Math.max(a,2),m=S6(new hr(c).sub(o).div(u-1),i,0),g=[...N6(new hr(o),new hr(c),m),c];return i===!1&&(g=g.map(f=>Math.round(f))),s>n?pw(g):g},E6=e=>e.rootProps.maxBarSize,CY=e=>e.rootProps.barGap,A6=e=>e.rootProps.barCategoryGap,EY=e=>e.rootProps.barSize,_m=e=>e.rootProps.stackOffset,P6=e=>e.rootProps.reverseStackOrder,rN=e=>e.options.chartName,aN=e=>e.rootProps.syncId,T6=e=>e.rootProps.syncMethod,sN=e=>e.options.eventEmitter,AY=e=>e.rootProps.baseValue,sa={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Pi={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Ws={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Kf=(e,r)=>{if(!(!e||!r))return e!=null&&e.reversed?[r[1],r[0]]:r},PY={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Pi.angleAxisId,includeHidden:!1,name:void 0,reversed:Pi.reversed,scale:Pi.scale,tick:Pi.tick,tickCount:void 0,ticks:void 0,type:Pi.type,unit:void 0},TY={allowDataOverflow:Ws.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ws.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ws.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ws.scale,tick:Ws.tick,tickCount:Ws.tickCount,ticks:void 0,type:Ws.type,unit:void 0},DY={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Pi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pi.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Pi.scale,tick:Pi.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},OY={allowDataOverflow:Ws.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ws.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ws.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ws.scale,tick:Ws.tick,tickCount:Ws.tickCount,ticks:void 0,type:"category",unit:void 0},nN=(e,r)=>e.polarAxis.angleAxis[r]!=null?e.polarAxis.angleAxis[r]:e.layout.layoutType==="radial"?DY:PY,iN=(e,r)=>e.polarAxis.radiusAxis[r]!=null?e.polarAxis.radiusAxis[r]:e.layout.layoutType==="radial"?OY:TY,Gf=e=>e.polarOptions,oN=we([Yi,Qi,ja],AO),D6=we([Gf,oN],(e,r)=>{if(e!=null)return as(e.innerRadius,r,0)}),O6=we([Gf,oN],(e,r)=>{if(e!=null)return as(e.outerRadius,r,r*.8)}),IY=e=>{if(e==null)return[0,0];var{startAngle:r,endAngle:a}=e;return[r,a]},I6=we([Gf],IY);we([nN,I6],Kf);var L6=we([oN,D6,O6],(e,r,a)=>{if(!(e==null||r==null||a==null))return[r,a]});we([iN,L6],Kf);var R6=we([Wt,Gf,D6,O6,Yi,Qi],(e,r,a,s,n,i)=>{if(!(e!=="centric"&&e!=="radial"||r==null||a==null||s==null)){var{cx:o,cy:c,startAngle:u,endAngle:m}=r;return{cx:as(o,n,n/2),cy:as(c,i,i/2),innerRadius:a,outerRadius:s,startAngle:u,endAngle:m,clockWise:!1}}}),Ur=(e,r)=>r,$m=(e,r,a)=>a;function Yf(e){return e?.id}function M6(e,r,a){var{chartData:s=[]}=r,{allowDuplicatedCategory:n,dataKey:i}=a,o=new Map;return e.forEach(c=>{var u,m=(u=c.data)!==null&&u!==void 0?u:s;if(!(m==null||m.length===0)){var g=Yf(c);m.forEach((f,y)=>{var p=i==null||n?y:String(fr(f,i,null)),b=fr(f,c.dataKey,0),j;o.has(p)?j=o.get(p):j={},Object.assign(j,{[g]:b}),o.set(p,j)})}}),Array.from(o.values())}function Qf(e){return e.stackId!=null&&e.dataKey!=null}var Xf=(e,r)=>e===r?!0:e==null||r==null?!1:e[0]===r[0]&&e[1]===r[1];function Zf(e,r){return Array.isArray(e)&&Array.isArray(r)&&e.length===0&&r.length===0?!0:e===r}function LY(e,r){if(e.length===r.length){for(var a=0;a<e.length;a++)if(e[a]!==r[a])return!1;return!0}return!1}var ka=e=>{var r=Wt(e);return r==="horizontal"?"xAxis":r==="vertical"?"yAxis":r==="centric"?"angleAxis":"radiusAxis"},pd=e=>e.tooltip.settings.axisId;function JE(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function B0(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?JE(Object(a),!0).forEach(function(s){RY(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):JE(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function RY(e,r,a){return(r=MY(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function MY(e){var r=_Y(e,"string");return typeof r=="symbol"?r:r+""}function _Y(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var yw=[0,"auto"],Da={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},_6=(e,r)=>e.cartesianAxis.xAxis[r],Zi=(e,r)=>{var a=_6(e,r);return a??Da},Oa={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:yw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Tm},$6=(e,r)=>e.cartesianAxis.yAxis[r],Ji=(e,r)=>{var a=$6(e,r);return a??Oa},$Y={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},lN=(e,r)=>{var a=e.cartesianAxis.zAxis[r];return a??$Y},Wr=(e,r,a)=>{switch(r){case"xAxis":return Zi(e,a);case"yAxis":return Ji(e,a);case"zAxis":return lN(e,a);case"angleAxis":return nN(e,a);case"radiusAxis":return iN(e,a);default:throw new Error("Unexpected axis type: ".concat(r))}},UY=(e,r,a)=>{switch(r){case"xAxis":return Zi(e,a);case"yAxis":return Ji(e,a);default:throw new Error("Unexpected axis type: ".concat(r))}},Um=(e,r,a)=>{switch(r){case"xAxis":return Zi(e,a);case"yAxis":return Ji(e,a);case"angleAxis":return nN(e,a);case"radiusAxis":return iN(e,a);default:throw new Error("Unexpected axis type: ".concat(r))}},U6=e=>e.graphicalItems.cartesianItems.some(r=>r.type==="bar")||e.graphicalItems.polarItems.some(r=>r.type==="radialBar");function cN(e,r){return a=>{switch(e){case"xAxis":return"xAxisId"in a&&a.xAxisId===r;case"yAxis":return"yAxisId"in a&&a.yAxisId===r;case"zAxis":return"zAxisId"in a&&a.zAxisId===r;case"angleAxis":return"angleAxisId"in a&&a.angleAxisId===r;case"radiusAxis":return"radiusAxisId"in a&&a.radiusAxisId===r;default:return!1}}}var Fm=e=>e.graphicalItems.cartesianItems,FY=we([Ur,$m],cN),dN=(e,r,a)=>e.filter(a).filter(s=>r?.includeHidden===!0?!0:!s.hide),zm=we([Fm,Wr,FY],dN,{memoizeOptions:{resultEqualityCheck:Zf}}),F6=we([zm],e=>e.filter(r=>r.type==="area"||r.type==="bar").filter(Qf)),z6=e=>e.filter(r=>!("stackId"in r)||r.stackId===void 0),zY=we([zm],z6),uN=e=>e.map(r=>r.data).filter(Boolean).flat(1),BY=we([zm],uN,{memoizeOptions:{resultEqualityCheck:Zf}}),mN=(e,r)=>{var{chartData:a=[],dataStartIndex:s,dataEndIndex:n}=r;return e.length>0?e:a.slice(s,n+1)},gN=we([BY,Mm],mN),hN=(e,r,a)=>r?.dataKey!=null?e.map(s=>({value:fr(s,r.dataKey)})):a.length>0?a.map(s=>s.dataKey).flatMap(s=>e.map(n=>({value:fr(n,s)}))):e.map(s=>({value:s})),Jf=we([gN,Wr,zm],hN);function B6(e,r){switch(e){case"xAxis":return r.direction==="x";case"yAxis":return r.direction==="y";default:return!1}}function zh(e){if(ni(e)||e instanceof Date){var r=Number(e);if(Ir(r))return r}}function eA(e){if(Array.isArray(e)){var r=[zh(e[0]),zh(e[1])];return Bo(r)?r:void 0}var a=zh(e);if(a!=null)return[a,a]}function Wi(e){return e.map(zh).filter(Mz)}function qY(e,r,a){return!a||typeof r!="number"||yn(r)?[]:a.length?Wi(a.flatMap(s=>{var n=fr(e,s.dataKey),i,o;if(Array.isArray(n)?[i,o]=n:i=o=n,!(!Ir(i)||!Ir(o)))return[r-i,r+o]})):[]}var Sa=e=>{var r=ka(e),a=pd(e);return Um(e,r,a)},Bm=we([Sa],e=>e?.dataKey),HY=we([F6,Mm,Sa],M6),q6=(e,r,a,s)=>{var n={},i=r.reduce((o,c)=>(c.stackId==null||(o[c.stackId]==null&&(o[c.stackId]=[]),o[c.stackId].push(c)),o),n);return Object.fromEntries(Object.entries(i).map(o=>{var[c,u]=o,m=s?[...u].reverse():u,g=m.map(Yf);return[c,{stackedData:cH(e,g,a),graphicalItems:m}]}))},im=we([HY,F6,_m,P6],q6),H6=(e,r,a,s)=>{var{dataStartIndex:n,dataEndIndex:i}=r;if(s==null&&a!=="zAxis"){var o=gH(e,n,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},WY=we([Wr],e=>e.allowDataOverflow),fN=e=>{var r;if(e==null||!("domain"in e))return yw;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var a=Wi(e.ticks);return[Math.min(...a),Math.max(...a)]}if(e.type==="category")return e.ticks.map(String)}return(r=e?.domain)!==null&&r!==void 0?r:yw},xN=we([Wr],fN),pN=we([xN,WY],g6),VY=we([im,Xo,Ur,pN],H6,{memoizeOptions:{resultEqualityCheck:Xf}}),ex=e=>e.errorBars,KY=(e,r,a)=>e.flatMap(s=>r[s.id]).filter(Boolean).filter(s=>B6(a,s)),q0=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var n=a.filter(Boolean);if(n.length!==0){var i=n.flat(),o=Math.min(...i),c=Math.max(...i);return[o,c]}},yN=(e,r,a,s,n)=>{var i,o;if(a.length>0&&e.forEach(c=>{a.forEach(u=>{var m,g,f=(m=s[u.id])===null||m===void 0?void 0:m.filter(N=>B6(n,N)),y=fr(c,(g=r.dataKey)!==null&&g!==void 0?g:u.dataKey),p=qY(c,y,f);if(p.length>=2){var b=Math.min(...p),j=Math.max(...p);(i==null||b<i)&&(i=b),(o==null||j>o)&&(o=j)}var v=eA(y);v!=null&&(i=i==null?v[0]:Math.min(i,v[0]),o=o==null?v[1]:Math.max(o,v[1]))})}),r?.dataKey!=null&&e.forEach(c=>{var u=eA(fr(c,r.dataKey));u!=null&&(i=i==null?u[0]:Math.min(i,u[0]),o=o==null?u[1]:Math.max(o,u[1]))}),Ir(i)&&Ir(o))return[i,o]},GY=we([gN,Wr,zY,ex,Ur],yN,{memoizeOptions:{resultEqualityCheck:Xf}});function YY(e){var{value:r}=e;if(ni(r)||r instanceof Date)return r}var QY=(e,r,a)=>{var s=e.map(YY).filter(n=>n!=null);return a&&(r.dataKey==null||r.allowDuplicatedCategory&&i3(s))?OO(0,e.length):r.allowDuplicatedCategory?s:Array.from(new Set(s))},W6=e=>e.referenceElements.dots,yd=(e,r,a)=>e.filter(s=>s.ifOverflow==="extendDomain").filter(s=>r==="xAxis"?s.xAxisId===a:s.yAxisId===a),XY=we([W6,Ur,$m],yd),V6=e=>e.referenceElements.areas,ZY=we([V6,Ur,$m],yd),K6=e=>e.referenceElements.lines,JY=we([K6,Ur,$m],yd),G6=(e,r)=>{var a=Wi(e.map(s=>r==="xAxis"?s.x:s.y));if(a.length!==0)return[Math.min(...a),Math.max(...a)]},eQ=we(XY,Ur,G6),Y6=(e,r)=>{var a=Wi(e.flatMap(s=>[r==="xAxis"?s.x1:s.y1,r==="xAxis"?s.x2:s.y2]));if(a.length!==0)return[Math.min(...a),Math.max(...a)]},tQ=we([ZY,Ur],Y6);function rQ(e){var r;if(e.x!=null)return Wi([e.x]);var a=(r=e.segment)===null||r===void 0?void 0:r.map(s=>s.x);return a==null||a.length===0?[]:Wi(a)}function aQ(e){var r;if(e.y!=null)return Wi([e.y]);var a=(r=e.segment)===null||r===void 0?void 0:r.map(s=>s.y);return a==null||a.length===0?[]:Wi(a)}var Q6=(e,r)=>{var a=e.flatMap(s=>r==="xAxis"?rQ(s):aQ(s));if(a.length!==0)return[Math.min(...a),Math.max(...a)]},sQ=we([JY,Ur],Q6),nQ=we(eQ,sQ,tQ,(e,r,a)=>q0(e,a,r)),vN=(e,r,a,s,n,i,o,c)=>{if(a!=null)return a;var u=o==="vertical"&&c==="xAxis"||o==="horizontal"&&c==="yAxis",m=u?q0(s,i,n):q0(i,n);return fY(r,m,e.allowDataOverflow)},iQ=we([Wr,xN,pN,VY,GY,nQ,Wt,Ur],vN,{memoizeOptions:{resultEqualityCheck:Xf}}),oQ=[0,1],bN=(e,r,a,s,n,i,o)=>{if(!((e==null||a==null||a.length===0)&&o===void 0)){var{dataKey:c,type:u}=e,m=hi(r,i);if(m&&c==null){var g;return OO(0,(g=a?.length)!==null&&g!==void 0?g:0)}return u==="category"?QY(s,e,m):n==="expand"?oQ:o}},wN=we([Wr,Wt,gN,Jf,_m,Ur,iQ],bN),X6=(e,r,a,s,n)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return r==="radial"&&n==="radiusAxis"?"band":r==="radial"&&n==="angleAxis"?"linear":o==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!a)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var c="scale".concat(km(i));return c in Pu?c:"point"}}},vd=we([Wr,Wt,U6,rN,Ur],X6);function lQ(e){if(e!=null){if(e in Pu)return Pu[e]();var r="scale".concat(km(e));if(r in Pu)return Pu[r]()}}function jN(e,r,a,s){if(!(a==null||s==null)){if(typeof e.scale=="function")return e.scale.copy().domain(a).range(s);var n=lQ(r);if(n!=null){var i=n.domain(a).range(s);return sH(i),i}}}var NN=(e,r,a)=>{var s=fN(r);if(!(a!=="auto"&&a!=="linear")){if(r!=null&&r.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&Bo(e))return kY(e,r.tickCount,r.allowDecimals);if(r!=null&&r.tickCount&&r.type==="number"&&Bo(e))return SY(e,r.tickCount,r.allowDecimals)}},kN=we([wN,Um,vd],NN),SN=(e,r,a,s)=>{if(s!=="angleAxis"&&e?.type==="number"&&Bo(r)&&Array.isArray(a)&&a.length>0){var n=r[0],i=a[0],o=r[1],c=a[a.length-1];return[Math.min(n,i),Math.max(o,c)]}return r},cQ=we([Wr,wN,kN,Ur],SN),dQ=we(Jf,Wr,(e,r)=>{if(!(!r||r.type!=="number")){var a=1/0,s=Array.from(Wi(e.map(c=>c.value))).sort((c,u)=>c-u);if(s.length<2)return 1/0;var n=s[s.length-1]-s[0];if(n===0)return 1/0;for(var i=0;i<s.length-1;i++){var o=s[i+1]-s[i];a=Math.min(a,o)}return a/n}}),Z6=we(dQ,Wt,A6,ja,(e,r,a,s)=>s,(e,r,a,s,n)=>{if(!Ir(e))return 0;var i=r==="vertical"?s.height:s.width;if(n==="gap")return e*i/2;if(n==="no-gap"){var o=as(a,e*i),c=e*i/2;return c-o-(c-o)/i*o}return 0}),uQ=(e,r)=>{var a=Zi(e,r);return a==null||typeof a.padding!="string"?0:Z6(e,"xAxis",r,a.padding)},mQ=(e,r)=>{var a=Ji(e,r);return a==null||typeof a.padding!="string"?0:Z6(e,"yAxis",r,a.padding)},gQ=we(Zi,uQ,(e,r)=>{var a,s;if(e==null)return{left:0,right:0};var{padding:n}=e;return typeof n=="string"?{left:r,right:r}:{left:((a=n.left)!==null&&a!==void 0?a:0)+r,right:((s=n.right)!==null&&s!==void 0?s:0)+r}}),hQ=we(Ji,mQ,(e,r)=>{var a,s;if(e==null)return{top:0,bottom:0};var{padding:n}=e;return typeof n=="string"?{top:r,bottom:r}:{top:((a=n.top)!==null&&a!==void 0?a:0)+r,bottom:((s=n.bottom)!==null&&s!==void 0?s:0)+r}}),fQ=we([ja,gQ,Rf,Lf,(e,r,a)=>a],(e,r,a,s,n)=>{var{padding:i}=s;return n?[i.left,a.width-i.right]:[e.left+r.left,e.left+e.width-r.right]}),xQ=we([ja,Wt,hQ,Rf,Lf,(e,r,a)=>a],(e,r,a,s,n,i)=>{var{padding:o}=n;return i?[s.height-o.bottom,o.top]:r==="horizontal"?[e.top+e.height-a.bottom,e.top+a.top]:[e.top+a.top,e.top+e.height-a.bottom]}),qm=(e,r,a,s)=>{var n;switch(r){case"xAxis":return fQ(e,a,s);case"yAxis":return xQ(e,a,s);case"zAxis":return(n=lN(e,a))===null||n===void 0?void 0:n.range;case"angleAxis":return I6(e);case"radiusAxis":return L6(e,a);default:return}},J6=we([Wr,qm],Kf),bd=we([Wr,vd,cQ,J6],jN);we([zm,ex,Ur],KY);function e5(e,r){return e.id<r.id?-1:e.id>r.id?1:0}var tx=(e,r)=>r,rx=(e,r,a)=>a,pQ=we(Of,tx,rx,(e,r,a)=>e.filter(s=>s.orientation===r).filter(s=>s.mirror===a).sort(e5)),yQ=we(If,tx,rx,(e,r,a)=>e.filter(s=>s.orientation===r).filter(s=>s.mirror===a).sort(e5)),t5=(e,r)=>({width:e.width,height:r.height}),vQ=(e,r)=>{var a=typeof r.width=="number"?r.width:Tm;return{width:a,height:e.height}},r5=we(ja,Zi,t5),bQ=(e,r,a)=>{switch(r){case"top":return e.top;case"bottom":return a-e.bottom;default:return 0}},wQ=(e,r,a)=>{switch(r){case"left":return e.left;case"right":return a-e.right;default:return 0}},jQ=we(Qi,ja,pQ,tx,rx,(e,r,a,s,n)=>{var i={},o;return a.forEach(c=>{var u=t5(r,c);o==null&&(o=bQ(r,s,e));var m=s==="top"&&!n||s==="bottom"&&n;i[c.id]=o-Number(m)*u.height,o+=(m?-1:1)*u.height}),i}),NQ=we(Yi,ja,yQ,tx,rx,(e,r,a,s,n)=>{var i={},o;return a.forEach(c=>{var u=vQ(r,c);o==null&&(o=wQ(r,s,e));var m=s==="left"&&!n||s==="right"&&n;i[c.id]=o-Number(m)*u.width,o+=(m?-1:1)*u.width}),i}),kQ=(e,r)=>{var a=Zi(e,r);if(a!=null)return jQ(e,a.orientation,a.mirror)},SQ=we([ja,Zi,kQ,(e,r)=>r],(e,r,a,s)=>{if(r!=null){var n=a?.[s];return n==null?{x:e.left,y:0}:{x:e.left,y:n}}}),CQ=(e,r)=>{var a=Ji(e,r);if(a!=null)return NQ(e,a.orientation,a.mirror)},EQ=we([ja,Ji,CQ,(e,r)=>r],(e,r,a,s)=>{if(r!=null){var n=a?.[s];return n==null?{x:0,y:e.top}:{x:n,y:e.top}}}),a5=we(ja,Ji,(e,r)=>{var a=typeof r.width=="number"?r.width:Tm;return{width:a,height:e.height}}),tA=(e,r,a)=>{switch(r){case"xAxis":return r5(e,a).width;case"yAxis":return a5(e,a).height;default:return}},s5=(e,r,a,s)=>{if(a!=null){var{allowDuplicatedCategory:n,type:i,dataKey:o}=a,c=hi(e,s),u=r.map(m=>m.value);if(o&&c&&i==="category"&&n&&i3(u))return u}},CN=we([Wt,Jf,Wr,Ur],s5),n5=(e,r,a,s)=>{if(!(a==null||a.dataKey==null)){var{type:n,scale:i}=a,o=hi(e,s);if(o&&(n==="number"||i!=="auto"))return r.map(c=>c.value)}},EN=we([Wt,Jf,Um,Ur],n5),rA=we([Wt,UY,vd,bd,CN,EN,qm,kN,Ur],(e,r,a,s,n,i,o,c,u)=>{if(r!=null){var m=hi(e,u);return{angle:r.angle,interval:r.interval,minTickGap:r.minTickGap,orientation:r.orientation,tick:r.tick,tickCount:r.tickCount,tickFormatter:r.tickFormatter,ticks:r.ticks,type:r.type,unit:r.unit,axisType:u,categoricalDomain:i,duplicateDomain:n,isCategorical:m,niceTicks:c,range:o,realScaleType:a,scale:s}}}),AQ=(e,r,a,s,n,i,o,c,u)=>{if(!(r==null||s==null)){var m=hi(e,u),{type:g,ticks:f,tickCount:y}=r,p=a==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,b=g==="category"&&s.bandwidth?s.bandwidth()/p:0;b=u==="angleAxis"&&i!=null&&i.length>=2?Ra(i[0]-i[1])*2*b:b;var j=f||n;if(j){var v=j.map((N,k)=>{var E=o?o.indexOf(N):N;return{index:k,coordinate:s(E)+b,value:N,offset:b}});return v.filter(N=>Ir(N.coordinate))}return m&&c?c.map((N,k)=>({coordinate:s(N)+b,value:N,index:k,offset:b})).filter(N=>Ir(N.coordinate)):s.ticks?s.ticks(y).map(N=>({coordinate:s(N)+b,value:N,offset:b})):s.domain().map((N,k)=>({coordinate:s(N)+b,value:o?o[N]:N,index:k,offset:b}))}},i5=we([Wt,Um,vd,bd,kN,qm,CN,EN,Ur],AQ),PQ=(e,r,a,s,n,i,o)=>{if(!(r==null||a==null||s==null||s[0]===s[1])){var c=hi(e,o),{tickCount:u}=r,m=0;return m=o==="angleAxis"&&s?.length>=2?Ra(s[0]-s[1])*2*m:m,c&&i?i.map((g,f)=>({coordinate:a(g)+m,value:g,index:f,offset:m})):a.ticks?a.ticks(u).map(g=>({coordinate:a(g)+m,value:g,offset:m})):a.domain().map((g,f)=>({coordinate:a(g)+m,value:n?n[g]:g,index:f,offset:m}))}},li=we([Wt,Um,bd,qm,CN,EN,Ur],PQ),ci=we(Wr,bd,(e,r)=>{if(!(e==null||r==null))return B0(B0({},e),{},{scale:r})}),TQ=we([Wr,vd,wN,J6],jN);we((e,r,a)=>lN(e,a),TQ,(e,r)=>{if(!(e==null||r==null))return B0(B0({},e),{},{scale:r})});var DQ=we([Wt,Of,If],(e,r,a)=>{switch(e){case"horizontal":return r.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return a.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),o5=e=>e.options.defaultTooltipEventType,l5=e=>e.options.validateTooltipEventTypes;function c5(e,r,a){if(e==null)return r;var s=e?"axis":"item";return a==null?r:a.includes(s)?s:r}function AN(e,r){var a=o5(e),s=l5(e);return c5(r,a,s)}function OQ(e){return at(r=>AN(r,e))}var d5=(e,r)=>{var a,s=Number(r);if(!(yn(s)||r==null))return s>=0?e==null||(a=e[s])===null||a===void 0?void 0:a.value:void 0},IQ=e=>e.tooltip.settings,To={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},LQ={itemInteraction:{click:To,hover:To},axisInteraction:{click:To,hover:To},keyboardInteraction:To,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},u5=Ls({name:"tooltip",initialState:LQ,reducers:{addTooltipEntrySettings:{reducer(e,r){e.tooltipItemPayloads.push(r.payload)},prepare:Mr()},replaceTooltipEntrySettings:{reducer(e,r){var{prev:a,next:s}=r.payload,n=Mn(e).tooltipItemPayloads.indexOf(a);n>-1&&(e.tooltipItemPayloads[n]=s)},prepare:Mr()},removeTooltipEntrySettings:{reducer(e,r){var a=Mn(e).tooltipItemPayloads.indexOf(r.payload);a>-1&&e.tooltipItemPayloads.splice(a,1)},prepare:Mr()},setTooltipSettingsState(e,r){e.settings=r.payload},setActiveMouseOverItemIndex(e,r){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=r.payload.activeIndex,e.itemInteraction.hover.dataKey=r.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=r.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=r.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,r){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=r.payload.activeIndex,e.itemInteraction.click.dataKey=r.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=r.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=r.payload.activeCoordinate},setMouseOverAxisIndex(e,r){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=r.payload.activeIndex,e.axisInteraction.hover.dataKey=r.payload.activeDataKey,e.axisInteraction.hover.coordinate=r.payload.activeCoordinate},setMouseClickAxisIndex(e,r){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=r.payload.activeIndex,e.axisInteraction.click.dataKey=r.payload.activeDataKey,e.axisInteraction.click.coordinate=r.payload.activeCoordinate},setSyncInteraction(e,r){e.syncInteraction=r.payload},setKeyboardInteraction(e,r){e.keyboardInteraction.active=r.payload.active,e.keyboardInteraction.index=r.payload.activeIndex,e.keyboardInteraction.coordinate=r.payload.activeCoordinate,e.keyboardInteraction.dataKey=r.payload.activeDataKey}}}),{addTooltipEntrySettings:RQ,replaceTooltipEntrySettings:MQ,removeTooltipEntrySettings:_Q,setTooltipSettingsState:$Q,setActiveMouseOverItemIndex:m5,mouseLeaveItem:UQ,mouseLeaveChart:g5,setActiveClickItemIndex:FQ,setMouseOverAxisIndex:h5,setMouseClickAxisIndex:zQ,setSyncInteraction:vw,setKeyboardInteraction:bw}=u5.actions,BQ=u5.reducer;function aA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function jh(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?aA(Object(a),!0).forEach(function(s){qQ(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):aA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function qQ(e,r,a){return(r=HQ(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function HQ(e){var r=WQ(e,"string");return typeof r=="symbol"?r:r+""}function WQ(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function VQ(e,r,a){return r==="axis"?a==="click"?e.axisInteraction.click:e.axisInteraction.hover:a==="click"?e.itemInteraction.click:e.itemInteraction.hover}function KQ(e){return e.index!=null}var f5=(e,r,a,s)=>{if(r==null)return To;var n=VQ(e,r,a);if(n==null)return To;if(n.active)return n;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(KQ(n)){if(i)return jh(jh({},n),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s,graphicalItemId:void 0};return jh(jh({},To),{},{coordinate:n.coordinate})};function GQ(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var r=e.valueOf();return Number.isFinite(r)?r:void 0}var a=Number(e);return Number.isFinite(a)?a:void 0}function YQ(e,r){var a=GQ(e),s=r[0],n=r[1];if(a===void 0)return!1;var i=Math.min(s,n),o=Math.max(s,n);return a>=i&&a<=o}function QQ(e,r,a){if(a==null||r==null)return!0;var s=fr(e,r);return s==null||!Bo(a)?!0:YQ(s,a)}var PN=(e,r,a,s)=>{var n=e?.index;if(n==null)return null;var i=Number(n);if(!Ir(i))return n;var o=0,c=1/0;r.length>0&&(c=r.length-1);var u=Math.max(o,Math.min(i,c)),m=r[u];return m==null||QQ(m,a,s)?String(u):null},x5=(e,r,a,s,n,i,o,c)=>{if(!(i==null||c==null)){var u=o[0],m=u==null?void 0:c(u.positions,i);if(m!=null)return m;var g=n?.[Number(i)];if(g)switch(a){case"horizontal":return{x:g.coordinate,y:(s.top+r)/2};default:return{x:(s.left+e)/2,y:g.coordinate}}}},p5=(e,r,a,s)=>{if(r==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var n;return a==="hover"?n=e.itemInteraction.hover.dataKey:n=e.itemInteraction.click.dataKey,n==null&&s!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===n})},Hm=e=>e.options.tooltipPayloadSearcher,wd=e=>e.tooltip;function sA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function nA(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?sA(Object(a),!0).forEach(function(s){XQ(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):sA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function XQ(e,r,a){return(r=ZQ(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function ZQ(e){var r=JQ(e,"string");return typeof r=="symbol"?r:r+""}function JQ(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function eX(e,r){return e??r}var y5=(e,r,a,s,n,i,o)=>{if(!(r==null||i==null)){var{chartData:c,computedData:u,dataStartIndex:m,dataEndIndex:g}=a,f=[];return e.reduce((y,p)=>{var b,{dataDefinedOnItem:j,settings:v}=p,N=eX(j,c),k=Array.isArray(N)?eO(N,m,g):N,E=(b=v?.dataKey)!==null&&b!==void 0?b:s,C=v?.nameKey,S;if(s&&Array.isArray(k)&&!Array.isArray(k[0])&&o==="axis"?S=o3(k,s,n):S=i(k,r,u,C),Array.isArray(S))S.forEach(D=>{var I=nA(nA({},v),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});y.push(S4({tooltipEntrySettings:I,dataKey:D.dataKey,payload:D.payload,value:fr(D.payload,D.dataKey),name:D.name}))});else{var P;y.push(S4({tooltipEntrySettings:v,dataKey:E,payload:S,value:fr(S,E),name:(P=fr(S,C))!==null&&P!==void 0?P:v?.name}))}return y},f)}},TN=we([Sa,Wt,U6,rN,ka],X6),tX=we([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,r)=>[...e,...r]),rX=we([ka,pd],cN),Wm=we([tX,Sa,rX],dN,{memoizeOptions:{resultEqualityCheck:Zf}}),aX=we([Wm],e=>e.filter(Qf)),sX=we([Wm],uN,{memoizeOptions:{resultEqualityCheck:Zf}}),jd=we([sX,Xo],mN),nX=we([aX,Xo,Sa],M6),DN=we([jd,Sa,Wm],hN),v5=we([Sa],fN),iX=we([Sa],e=>e.allowDataOverflow),b5=we([v5,iX],g6),oX=we([Wm],e=>e.filter(Qf)),lX=we([nX,oX,_m,P6],q6),cX=we([lX,Xo,ka,b5],H6),dX=we([Wm],z6),uX=we([jd,Sa,dX,ex,ka],yN,{memoizeOptions:{resultEqualityCheck:Xf}}),mX=we([W6,ka,pd],yd),gX=we([mX,ka],G6),hX=we([V6,ka,pd],yd),fX=we([hX,ka],Y6),xX=we([K6,ka,pd],yd),pX=we([xX,ka],Q6),yX=we([gX,pX,fX],q0),vX=we([Sa,v5,b5,cX,uX,yX,Wt,ka],vN),Vm=we([Sa,Wt,jd,DN,_m,ka,vX],bN),bX=we([Vm,Sa,TN],NN),wX=we([Sa,Vm,bX,ka],SN),w5=e=>{var r=ka(e),a=pd(e),s=!1;return qm(e,r,a,s)},j5=we([Sa,w5],Kf),N5=we([Sa,TN,wX,j5],jN),jX=we([Wt,DN,Sa,ka],s5),NX=we([Wt,DN,Sa,ka],n5),kX=(e,r,a,s,n,i,o,c)=>{if(r){var{type:u}=r,m=hi(e,c);if(s){var g=a==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,f=u==="category"&&s.bandwidth?s.bandwidth()/g:0;return f=c==="angleAxis"&&n!=null&&n?.length>=2?Ra(n[0]-n[1])*2*f:f,m&&o?o.map((y,p)=>({coordinate:s(y)+f,value:y,index:p,offset:f})):s.domain().map((y,p)=>({coordinate:s(y)+f,value:i?i[y]:y,index:p,offset:f}))}}},eo=we([Wt,Sa,TN,N5,w5,jX,NX,ka],kX),ON=we([o5,l5,IQ],(e,r,a)=>c5(a.shared,e,r)),k5=e=>e.tooltip.settings.trigger,IN=e=>e.tooltip.settings.defaultIndex,Km=we([wd,ON,k5,IN],f5),qo=we([Km,jd,Bm,Vm],PN),S5=we([eo,qo],d5),LN=we([Km],e=>{if(e)return e.dataKey}),SX=we([Km],e=>{if(e)return e.graphicalItemId}),C5=we([wd,ON,k5,IN],p5),CX=we([Yi,Qi,Wt,ja,eo,IN,C5,Hm],x5),EX=we([Km,CX],(e,r)=>e!=null&&e.coordinate?e.coordinate:r),AX=we([Km],e=>e.active),PX=we([C5,qo,Xo,Bm,S5,Hm,ON],y5),TX=we([PX],e=>{if(e!=null){var r=e.map(a=>a.payload).filter(a=>a!=null);return Array.from(new Set(r))}});function iA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function oA(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?iA(Object(a),!0).forEach(function(s){DX(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function DX(e,r,a){return(r=OX(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function OX(e){var r=IX(e,"string");return typeof r=="symbol"?r:r+""}function IX(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var LX=()=>at(Sa),RX=()=>{var e=LX(),r=at(eo),a=at(N5);return zo(!e||!a?void 0:oA(oA({},e),{},{scale:a}),r)};function lA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function kc(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?lA(Object(a),!0).forEach(function(s){MX(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function MX(e,r,a){return(r=_X(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function _X(e){var r=$X(e,"string");return typeof r=="symbol"?r:r+""}function $X(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var UX=(e,r,a,s)=>{var n=r.find(i=>i&&i.index===a);if(n){if(e==="horizontal")return{x:n.coordinate,y:s.chartY};if(e==="vertical")return{x:s.chartX,y:n.coordinate}}return{x:0,y:0}},FX=(e,r,a,s)=>{var n=r.find(m=>m&&m.index===a);if(n){if(e==="centric"){var i=n.coordinate,{radius:o}=s;return kc(kc(kc({},s),ca(s.cx,s.cy,o,i)),{},{angle:i,radius:o})}var c=n.coordinate,{angle:u}=s;return kc(kc(kc({},s),ca(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function zX(e,r){var{chartX:a,chartY:s}=e;return a>=r.left&&a<=r.left+r.width&&s>=r.top&&s<=r.top+r.height}var E5=(e,r,a,s,n)=>{var i,o=-1,c=(i=r?.length)!==null&&i!==void 0?i:0;if(c<=1||e==null)return 0;if(s==="angleAxis"&&n!=null&&Math.abs(Math.abs(n[1]-n[0])-360)<=1e-6)for(var u=0;u<c;u++){var m=u>0?a[u-1].coordinate:a[c-1].coordinate,g=a[u].coordinate,f=u>=c-1?a[0].coordinate:a[u+1].coordinate,y=void 0;if(Ra(g-m)!==Ra(f-g)){var p=[];if(Ra(f-g)===Ra(n[1]-n[0])){y=f;var b=g+n[1]-n[0];p[0]=Math.min(b,(b+m)/2),p[1]=Math.max(b,(b+m)/2)}else{y=m;var j=f+n[1]-n[0];p[0]=Math.min(g,(j+g)/2),p[1]=Math.max(g,(j+g)/2)}var v=[Math.min(g,(y+g)/2),Math.max(g,(y+g)/2)];if(e>v[0]&&e<=v[1]||e>=p[0]&&e<=p[1]){({index:o}=a[u]);break}}else{var N=Math.min(m,f),k=Math.max(m,f);if(e>(N+g)/2&&e<=(k+g)/2){({index:o}=a[u]);break}}}else if(r){for(var E=0;E<c;E++)if(E===0&&e<=(r[E].coordinate+r[E+1].coordinate)/2||E>0&&E<c-1&&e>(r[E].coordinate+r[E-1].coordinate)/2&&e<=(r[E].coordinate+r[E+1].coordinate)/2||E===c-1&&e>(r[E].coordinate+r[E-1].coordinate)/2){({index:o}=r[E]);break}}return o},A5=()=>at(rN),RN=(e,r)=>r,P5=(e,r,a)=>a,MN=(e,r,a,s)=>s,BX=we(eo,e=>Nf(e,r=>r.coordinate)),_N=we([wd,RN,P5,MN],f5),$N=we([_N,jd,Bm,Vm],PN),qX=(e,r,a)=>{if(r!=null){var s=wd(e);return r==="axis"?a==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:a==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},T5=we([wd,RN,P5,MN],p5),H0=we([Yi,Qi,Wt,ja,eo,MN,T5,Hm],x5),HX=we([_N,H0],(e,r)=>{var a;return(a=e.coordinate)!==null&&a!==void 0?a:r}),D5=we([eo,$N],d5),WX=we([T5,$N,Xo,Bm,D5,Hm,RN],y5),VX=we([_N,$N],(e,r)=>({isActive:e.active&&r!=null,activeIndex:r})),KX=(e,r,a,s,n,i,o)=>{if(!(!e||!a||!s||!n)&&zX(e,o)){var c=hH(e,r),u=E5(c,i,n,a,s),m=UX(r,n,u,e);return{activeIndex:String(u),activeCoordinate:m}}},GX=(e,r,a,s,n,i,o)=>{if(!(!e||!s||!n||!i||!a)){var c=DV(e,a);if(c){var u=fH(c,r),m=E5(u,o,i,s,n),g=FX(r,i,m,c);return{activeIndex:String(m),activeCoordinate:g}}}},YX=(e,r,a,s,n,i,o,c)=>{if(!(!e||!r||!s||!n||!i))return r==="horizontal"||r==="vertical"?KX(e,r,s,n,i,o,c):GX(e,r,a,s,n,i,o)},QX=we(e=>e.zIndex.zIndexMap,(e,r)=>r,(e,r,a)=>a,(e,r,a)=>{if(r!=null){var s=e[r];if(s!=null)return a?s.panoramaElementId:s.elementId}}),XX=we(e=>e.zIndex.zIndexMap,e=>{var r=Object.keys(e).map(s=>parseInt(s,10)).concat(Object.values(sa)),a=Array.from(new Set(r));return a.sort((s,n)=>s-n)},{memoizeOptions:{resultEqualityCheck:LY}});function cA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function dA(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?cA(Object(a),!0).forEach(function(s){ZX(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ZX(e,r,a){return(r=JX(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function JX(e){var r=eZ(e,"string");return typeof r=="symbol"?r:r+""}function eZ(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var tZ={},rZ={zIndexMap:Object.values(sa).reduce((e,r)=>dA(dA({},e),{},{[r]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),tZ)},aZ=new Set(Object.values(sa));function sZ(e){return aZ.has(e)}var O5=Ls({name:"zIndex",initialState:rZ,reducers:{registerZIndexPortal:{reducer:(e,r)=>{var{zIndex:a}=r.payload;e.zIndexMap[a]?e.zIndexMap[a].consumers+=1:e.zIndexMap[a]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Mr()},unregisterZIndexPortal:{reducer:(e,r)=>{var{zIndex:a}=r.payload;e.zIndexMap[a]&&(e.zIndexMap[a].consumers-=1,e.zIndexMap[a].consumers<=0&&!sZ(a)&&delete e.zIndexMap[a])},prepare:Mr()},registerZIndexPortalId:{reducer:(e,r)=>{var{zIndex:a,elementId:s,isPanorama:n}=r.payload;e.zIndexMap[a]?n?e.zIndexMap[a].panoramaElementId=s:e.zIndexMap[a].elementId=s:e.zIndexMap[a]={consumers:0,elementId:n?void 0:s,panoramaElementId:n?s:void 0}},prepare:Mr()},unregisterZIndexPortalId:{reducer:(e,r)=>{var{zIndex:a}=r.payload;e.zIndexMap[a]&&(r.payload.isPanorama?e.zIndexMap[a].panoramaElementId=void 0:e.zIndexMap[a].elementId=void 0)},prepare:Mr()}}}),{registerZIndexPortal:nZ,unregisterZIndexPortal:iZ,registerZIndexPortalId:oZ,unregisterZIndexPortalId:lZ}=O5.actions,cZ=O5.reducer;function ps(e){var{zIndex:r,children:a}=e,s=KH(),n=s&&r!==void 0&&r!==0,i=Ua(),o=Ar();h.useLayoutEffect(()=>n?(o(nZ({zIndex:r})),()=>{o(iZ({zIndex:r}))}):Sm,[o,r,n]);var c=at(m=>QX(m,r,i));if(!n)return a;if(!c)return null;var u=document.getElementById(c);return u?Do.createPortal(a,u):null}function ww(){return ww=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ww.apply(null,arguments)}function uA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function Nh(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?uA(Object(a),!0).forEach(function(s){dZ(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):uA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function dZ(e,r,a){return(r=uZ(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function uZ(e){var r=mZ(e,"string");return typeof r=="symbol"?r:r+""}function mZ(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function gZ(e){var{cursor:r,cursorComp:a,cursorProps:s}=e;return h.isValidElement(r)?h.cloneElement(r,s):h.createElement(a,s)}function hZ(e){var r,{coordinate:a,payload:s,index:n,offset:i,tooltipAxisBandSize:o,layout:c,cursor:u,tooltipEventType:m,chartName:g}=e,f=a,y=s,p=n;if(!u||!f||g!=="ScatterChart"&&m!=="axis")return null;var b,j,v;if(g==="ScatterChart")b=f,j=VW,v=sa.cursorLine;else if(g==="BarChart")b=KW(c,f,i,o),j=EO,v=sa.cursorRectangle;else if(c==="radial"&&c3(f)){var{cx:N,cy:k,radius:E,startAngle:C,endAngle:S}=PO(f);b={cx:N,cy:k,startAngle:C,endAngle:S,innerRadius:E,outerRadius:E},j=DO,v=sa.cursorLine}else b={points:RV(c,f,i)},j=zc,v=sa.cursorLine;var P=typeof u=="object"&&"className"in u?u.className:void 0,D=Nh(Nh(Nh(Nh({stroke:"#ccc",pointerEvents:"none"},i),b),Fl(u)),{},{payload:y,payloadIndex:p,className:tr("recharts-tooltip-cursor",P)});return h.createElement(ps,{zIndex:(r=e.zIndex)!==null&&r!==void 0?r:v},h.createElement(gZ,{cursor:u,cursorComp:j,cursorProps:D}))}function fZ(e){var r=RX(),a=uO(),s=Yl(),n=A5();return r==null||a==null||s==null||n==null?null:h.createElement(hZ,ww({},e,{offset:a,layout:s,tooltipAxisBandSize:r,chartName:n}))}var I5=h.createContext(null),xZ=()=>h.useContext(I5),_v={exports:{}},mA;function pZ(){return mA||(mA=1,(function(e){var r=Object.prototype.hasOwnProperty,a="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(a=!1));function n(u,m,g){this.fn=u,this.context=m,this.once=g||!1}function i(u,m,g,f,y){if(typeof g!="function")throw new TypeError("The listener must be a function");var p=new n(g,f||u,y),b=a?a+m:m;return u._events[b]?u._events[b].fn?u._events[b]=[u._events[b],p]:u._events[b].push(p):(u._events[b]=p,u._eventsCount++),u}function o(u,m){--u._eventsCount===0?u._events=new s:delete u._events[m]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var m=[],g,f;if(this._eventsCount===0)return m;for(f in g=this._events)r.call(g,f)&&m.push(a?f.slice(1):f);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(g)):m},c.prototype.listeners=function(m){var g=a?a+m:m,f=this._events[g];if(!f)return[];if(f.fn)return[f.fn];for(var y=0,p=f.length,b=new Array(p);y<p;y++)b[y]=f[y].fn;return b},c.prototype.listenerCount=function(m){var g=a?a+m:m,f=this._events[g];return f?f.fn?1:f.length:0},c.prototype.emit=function(m,g,f,y,p,b){var j=a?a+m:m;if(!this._events[j])return!1;var v=this._events[j],N=arguments.length,k,E;if(v.fn){switch(v.once&&this.removeListener(m,v.fn,void 0,!0),N){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,g),!0;case 3:return v.fn.call(v.context,g,f),!0;case 4:return v.fn.call(v.context,g,f,y),!0;case 5:return v.fn.call(v.context,g,f,y,p),!0;case 6:return v.fn.call(v.context,g,f,y,p,b),!0}for(E=1,k=new Array(N-1);E<N;E++)k[E-1]=arguments[E];v.fn.apply(v.context,k)}else{var C=v.length,S;for(E=0;E<C;E++)switch(v[E].once&&this.removeListener(m,v[E].fn,void 0,!0),N){case 1:v[E].fn.call(v[E].context);break;case 2:v[E].fn.call(v[E].context,g);break;case 3:v[E].fn.call(v[E].context,g,f);break;case 4:v[E].fn.call(v[E].context,g,f,y);break;default:if(!k)for(S=1,k=new Array(N-1);S<N;S++)k[S-1]=arguments[S];v[E].fn.apply(v[E].context,k)}}return!0},c.prototype.on=function(m,g,f){return i(this,m,g,f,!1)},c.prototype.once=function(m,g,f){return i(this,m,g,f,!0)},c.prototype.removeListener=function(m,g,f,y){var p=a?a+m:m;if(!this._events[p])return this;if(!g)return o(this,p),this;var b=this._events[p];if(b.fn)b.fn===g&&(!y||b.once)&&(!f||b.context===f)&&o(this,p);else{for(var j=0,v=[],N=b.length;j<N;j++)(b[j].fn!==g||y&&!b[j].once||f&&b[j].context!==f)&&v.push(b[j]);v.length?this._events[p]=v.length===1?v[0]:v:o(this,p)}return this},c.prototype.removeAllListeners=function(m){var g;return m?(g=a?a+m:m,this._events[g]&&o(this,g)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=a,c.EventEmitter=c,e.exports=c})(_v)),_v.exports}var yZ=pZ();const vZ=di(yZ);var om=new vZ,jw="recharts.syncEvent.tooltip",gA="recharts.syncEvent.brush";function ax(e,r){if(r){var a=Number.parseInt(r,10);if(!yn(a))return e?.[a]}}var bZ={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},L5=Ls({name:"options",initialState:bZ,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),wZ=L5.reducer,{createEventEmitter:jZ}=L5.actions;function NZ(e){return e.tooltip.syncInteraction}var kZ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},R5=Ls({name:"chartData",initialState:kZ,reducers:{setChartData(e,r){if(e.chartData=r.payload,r.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}r.payload.length>0&&e.dataEndIndex!==r.payload.length-1&&(e.dataEndIndex=r.payload.length-1)},setComputedData(e,r){e.computedData=r.payload},setDataStartEndIndexes(e,r){var{startIndex:a,endIndex:s}=r.payload;a!=null&&(e.dataStartIndex=a),s!=null&&(e.dataEndIndex=s)}}}),{setChartData:hA,setDataStartEndIndexes:SZ,setComputedData:pue}=R5.actions,CZ=R5.reducer,EZ=["x","y"];function fA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function Sc(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?fA(Object(a),!0).forEach(function(s){AZ(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function AZ(e,r,a){return(r=PZ(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function PZ(e){var r=TZ(e,"string");return typeof r=="symbol"?r:r+""}function TZ(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function DZ(e,r){if(e==null)return{};var a,s,n=OZ(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function OZ(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function IZ(){var e=at(aN),r=at(sN),a=Ar(),s=at(T6),n=at(eo),i=Yl(),o=Mf(),c=at(u=>u.rootProps.className);h.useEffect(()=>{if(e==null)return Sm;var u=(m,g,f)=>{if(r!==f&&e===m){if(s==="index"){var y;if(o&&g!==null&&g!==void 0&&(y=g.payload)!==null&&y!==void 0&&y.coordinate&&g.payload.sourceViewBox){var p=g.payload.coordinate,{x:b,y:j}=p,v=DZ(p,EZ),{x:N,y:k,width:E,height:C}=g.payload.sourceViewBox,S=Sc(Sc({},v),{},{x:o.x+(E?(b-N)/E:0)*o.width,y:o.y+(C?(j-k)/C:0)*o.height});a(Sc(Sc({},g),{},{payload:Sc(Sc({},g.payload),{},{coordinate:S})}))}else a(g);return}if(n!=null){var P;if(typeof s=="function"){var D={activeTooltipIndex:g.payload.index==null?void 0:Number(g.payload.index),isTooltipActive:g.payload.active,activeIndex:g.payload.index==null?void 0:Number(g.payload.index),activeLabel:g.payload.label,activeDataKey:g.payload.dataKey,activeCoordinate:g.payload.coordinate},I=s(n,D);P=n[I]}else s==="value"&&(P=n.find(ae=>String(ae.value)===g.payload.label));var{coordinate:H}=g.payload;if(P==null||g.payload.active===!1||H==null||o==null){a(vw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:W,y:K}=H,B=Math.min(W,o.x+o.width),z=Math.min(K,o.y+o.height),q={x:i==="horizontal"?P.coordinate:B,y:i==="horizontal"?z:P.coordinate},J=vw({active:g.payload.active,coordinate:q,dataKey:g.payload.dataKey,index:String(P.index),label:g.payload.label,sourceViewBox:g.payload.sourceViewBox,graphicalItemId:g.payload.graphicalItemId});a(J)}}};return om.on(jw,u),()=>{om.off(jw,u)}},[c,a,r,e,s,n,i,o])}function LZ(){var e=at(aN),r=at(sN),a=Ar();h.useEffect(()=>{if(e==null)return Sm;var s=(n,i,o)=>{r!==o&&e===n&&a(SZ(i))};return om.on(gA,s),()=>{om.off(gA,s)}},[a,r,e])}function RZ(){var e=Ar();h.useEffect(()=>{e(jZ())},[e]),IZ(),LZ()}function MZ(e,r,a,s,n,i){var o=at(p=>qX(p,e,r)),c=at(sN),u=at(aN),m=at(T6),g=at(NZ),f=g?.active,y=Mf();h.useEffect(()=>{if(!f&&u!=null&&c!=null){var p=vw({active:i,coordinate:a,dataKey:o,index:n,label:typeof s=="number"?String(s):s,sourceViewBox:y,graphicalItemId:void 0});om.emit(jw,u,p,c)}},[f,a,o,n,s,c,u,m,i,y])}function xA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function pA(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?xA(Object(a),!0).forEach(function(s){_Z(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function _Z(e,r,a){return(r=$Z(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function $Z(e){var r=UZ(e,"string");return typeof r=="symbol"?r:r+""}function UZ(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function FZ(e){return e.dataKey}function zZ(e,r){return h.isValidElement(e)?h.cloneElement(e,r):typeof e=="function"?h.createElement(e,r):h.createElement(SW,r)}var yA=[],BZ={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function _a(e){var r,a,s=Zr(e,BZ),{active:n,allowEscapeViewBox:i,animationDuration:o,animationEasing:c,content:u,filterNull:m,isAnimationActive:g,offset:f,payloadUniqBy:y,position:p,reverseDirection:b,useTranslate3d:j,wrapperStyle:v,cursor:N,shared:k,trigger:E,defaultIndex:C,portal:S,axisId:P}=s,D=Ar(),I=typeof C=="number"?String(C):C;h.useEffect(()=>{D($Q({shared:k,trigger:E,axisId:P,active:n,defaultIndex:I}))},[D,k,E,P,n,I]);var H=Mf(),W=jO(),K=OQ(k),{activeIndex:B,isActive:z}=(r=at(X=>VX(X,K,E,I)))!==null&&r!==void 0?r:{},q=at(X=>WX(X,K,E,I)),J=at(X=>D5(X,K,E,I)),ae=at(X=>HX(X,K,E,I)),ne=q,re=xZ(),L=(a=n??z)!==null&&a!==void 0?a:!1,[G,T]=k3([ne,L]),_=K==="axis"?J:void 0;MZ(K,E,ae,_,B,L);var F=S??re;if(F==null||H==null||K==null)return null;var ee=ne??yA;L||(ee=yA),m&&ee.length&&(ee=v3(ee.filter(X=>X.value!=null&&(X.hide!==!0||s.includeHidden)),y,FZ));var Z=ee.length>0,U=h.createElement(OW,{allowEscapeViewBox:i,animationDuration:o,animationEasing:c,isAnimationActive:g,active:L,coordinate:ae,hasPayload:Z,offset:f,position:p,reverseDirection:b,useTranslate3d:j,viewBox:H,wrapperStyle:v,lastBoundingBox:G,innerRef:T,hasPortalFromProps:!!S},zZ(u,pA(pA({},s),{},{payload:ee,label:_,active:L,activeIndex:B,coordinate:ae,accessibilityLayer:W})));return h.createElement(h.Fragment,null,Do.createPortal(U,F),L&&h.createElement(fZ,{cursor:N,tooltipEventType:K,coordinate:ae,payload:ee,index:B}))}var Zo=e=>null;Zo.displayName="Cell";function qZ(e,r,a){return(r=HZ(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function HZ(e){var r=WZ(e,"string");return typeof r=="symbol"?r:r+""}function WZ(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class VZ{constructor(r){qZ(this,"cache",new Map),this.maxSize=r}get(r){var a=this.cache.get(r);return a!==void 0&&(this.cache.delete(r),this.cache.set(r,a)),a}set(r,a){if(this.cache.has(r))this.cache.delete(r);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;s!=null&&this.cache.delete(s)}this.cache.set(r,a)}clear(){this.cache.clear()}size(){return this.cache.size}}function vA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function KZ(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?vA(Object(a),!0).forEach(function(s){GZ(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function GZ(e,r,a){return(r=YZ(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function YZ(e){var r=QZ(e,"string");return typeof r=="symbol"?r:r+""}function QZ(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var XZ={cacheSize:2e3,enableCache:!0},M5=KZ({},XZ),bA=new VZ(M5.cacheSize),ZZ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},wA="recharts_measurement_span";function JZ(e,r){var a=r.fontSize||"",s=r.fontFamily||"",n=r.fontWeight||"",i=r.fontStyle||"",o=r.letterSpacing||"",c=r.textTransform||"";return"".concat(e,"|").concat(a,"|").concat(s,"|").concat(n,"|").concat(i,"|").concat(o,"|").concat(c)}var jA=(e,r)=>{try{var a=document.getElementById(wA);a||(a=document.createElement("span"),a.setAttribute("id",wA),a.setAttribute("aria-hidden","true"),document.body.appendChild(a)),Object.assign(a.style,ZZ,r),a.textContent="".concat(e);var s=a.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},Mu=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r==null||ud.isSsr)return{width:0,height:0};if(!M5.enableCache)return jA(r,a);var s=JZ(r,a),n=bA.get(s);if(n)return n;var i=jA(r,a);return bA.set(s,i),i},NA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,eJ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,tJ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_5={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},rJ=Object.keys(_5),Mc="NaN";function aJ(e,r){return e*_5[r]}class Cs{static parse(r){var a,[,s,n]=(a=tJ.exec(r))!==null&&a!==void 0?a:[];return new Cs(parseFloat(s),n??"")}constructor(r,a){this.num=r,this.unit=a,this.num=r,this.unit=a,yn(r)&&(this.unit=""),a!==""&&!eJ.test(a)&&(this.num=NaN,this.unit=""),rJ.includes(a)&&(this.num=aJ(r,a),this.unit="px")}add(r){return this.unit!==r.unit?new Cs(NaN,""):new Cs(this.num+r.num,this.unit)}subtract(r){return this.unit!==r.unit?new Cs(NaN,""):new Cs(this.num-r.num,this.unit)}multiply(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new Cs(NaN,""):new Cs(this.num*r.num,this.unit||r.unit)}divide(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new Cs(NaN,""):new Cs(this.num/r.num,this.unit||r.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return yn(this.num)}}function $5(e){if(e.includes(Mc))return Mc;for(var r=e;r.includes("*")||r.includes("/");){var a,[,s,n,i]=(a=NA.exec(r))!==null&&a!==void 0?a:[],o=Cs.parse(s??""),c=Cs.parse(i??""),u=n==="*"?o.multiply(c):o.divide(c);if(u.isNaN())return Mc;r=r.replace(NA,u.toString())}for(;r.includes("+")||/.-\d+(?:\.\d+)?/.test(r);){var m,[,g,f,y]=(m=kA.exec(r))!==null&&m!==void 0?m:[],p=Cs.parse(g??""),b=Cs.parse(y??""),j=f==="+"?p.add(b):p.subtract(b);if(j.isNaN())return Mc;r=r.replace(kA,j.toString())}return r}var SA=/\(([^()]*)\)/;function sJ(e){for(var r=e,a;(a=SA.exec(r))!=null;){var[,s]=a;r=r.replace(SA,$5(s))}return r}function nJ(e){var r=e.replace(/\s+/g,"");return r=sJ(r),r=$5(r),r}function iJ(e){try{return nJ(e)}catch{return Mc}}function $v(e){var r=iJ(e.slice(5,-1));return r===Mc?"":r}var oJ=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],lJ=["dx","dy","angle","className","breakAll"];function Nw(){return Nw=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Nw.apply(null,arguments)}function CA(e,r){if(e==null)return{};var a,s,n=cJ(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function cJ(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var U5=/[ \f\n\r\t\v\u2028\u2029]+/,F5=e=>{var{children:r,breakAll:a,style:s}=e;try{var n=[];Or(r)||(a?n=r.toString().split(""):n=r.toString().split(U5));var i=n.map(c=>({word:c,width:Mu(c,s).width})),o=a?0:Mu("",s).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function dJ(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var z5=(e,r,a,s)=>e.reduce((n,i)=>{var{word:o,width:c}=i,u=n[n.length-1];if(u&&c!=null&&(r==null||s||u.width+c+a<Number(r)))u.words.push(o),u.width+=c+a;else{var m={words:[o],width:c};n.push(m)}return n},[]),B5=e=>e.reduce((r,a)=>r.width>a.width?r:a),uJ="",EA=(e,r,a,s,n,i,o,c)=>{var u=e.slice(0,r),m=F5({breakAll:a,style:s,children:u+uJ});if(!m)return[!1,[]];var g=z5(m.wordsWithComputedWidth,i,o,c),f=g.length>n||B5(g).width>Number(i);return[f,g]},mJ=(e,r,a,s,n)=>{var{maxLines:i,children:o,style:c,breakAll:u}=e,m=Je(i),g=String(o),f=z5(r,s,a,n);if(!m||n)return f;var y=f.length>i||B5(f).width>Number(s);if(!y)return f;for(var p=0,b=g.length-1,j=0,v;p<=b&&j<=g.length-1;){var N=Math.floor((p+b)/2),k=N-1,[E,C]=EA(g,k,u,c,i,s,a,n),[S]=EA(g,N,u,c,i,s,a,n);if(!E&&!S&&(p=N+1),E&&S&&(b=N-1),!E&&S){v=C;break}j++}return v||f},AA=e=>{var r=Or(e)?[]:e.toString().split(U5);return[{words:r,width:void 0}]},gJ=e=>{var{width:r,scaleToFit:a,children:s,style:n,breakAll:i,maxLines:o}=e;if((r||a)&&!ud.isSsr){var c,u,m=F5({breakAll:i,children:s,style:n});if(m){var{wordsWithComputedWidth:g,spaceWidth:f}=m;c=g,u=f}else return AA(s);return mJ({breakAll:i,children:s,maxLines:o,style:n},c,u,r,!!a)}return AA(s)},q5="#808080",hJ={angle:0,breakAll:!1,capHeight:"0.71em",fill:q5,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},sx=h.forwardRef((e,r)=>{var a=Zr(e,hJ),{x:s,y:n,lineHeight:i,capHeight:o,fill:c,scaleToFit:u,textAnchor:m,verticalAnchor:g}=a,f=CA(a,oJ),y=h.useMemo(()=>gJ({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:u,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,u,f.style,f.width]),{dx:p,dy:b,angle:j,className:v,breakAll:N}=f,k=CA(f,lJ);if(!ni(s)||!ni(n)||y.length===0)return null;var E=Number(s)+(Je(p)?p:0),C=Number(n)+(Je(b)?b:0);if(!Ir(E)||!Ir(C))return null;var S;switch(g){case"start":S=$v("calc(".concat(o,")"));break;case"middle":S=$v("calc(".concat((y.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:S=$v("calc(".concat(y.length-1," * -").concat(i,")"));break}var P=[];if(u){var D=y[0].width,{width:I}=f;P.push("scale(".concat(Je(I)&&Je(D)?I/D:1,")"))}return j&&P.push("rotate(".concat(j,", ").concat(E,", ").concat(C,")")),P.length&&(k.transform=P.join(" ")),h.createElement("text",Nw({},ss(k),{ref:r,x:E,y:C,className:tr("recharts-text",v),textAnchor:m,fill:c.includes("url")?q5:c}),y.map((H,W)=>{var K=H.words.join(N?"":" ");return h.createElement("tspan",{x:E,dy:W===0?S:i,key:"".concat(K,"-").concat(W)},K)}))});sx.displayName="Text";var fJ=["labelRef"];function xJ(e,r){if(e==null)return{};var a,s,n=pJ(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function pJ(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function PA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function ta(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?PA(Object(a),!0).forEach(function(s){yJ(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):PA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function yJ(e,r,a){return(r=vJ(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function vJ(e){var r=bJ(e,"string");return typeof r=="symbol"?r:r+""}function bJ(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Ti(){return Ti=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ti.apply(null,arguments)}var H5=h.createContext(null),wJ=e=>{var{x:r,y:a,upperWidth:s,lowerWidth:n,width:i,height:o,children:c}=e,u=h.useMemo(()=>({x:r,y:a,upperWidth:s,lowerWidth:n,width:i,height:o}),[r,a,s,n,i,o]);return h.createElement(H5.Provider,{value:u},c)},W5=()=>{var e=h.useContext(H5),r=Mf();return e||dO(r)},jJ=h.createContext(null),NJ=()=>{var e=h.useContext(jJ),r=at(R6);return e||r},kJ=e=>{var{value:r,formatter:a}=e,s=Or(e.children)?r:e.children;return typeof a=="function"?a(s):s},UN=e=>e!=null&&typeof e=="function",SJ=(e,r)=>{var a=Ra(r-e),s=Math.min(Math.abs(r-e),360);return a*s},CJ=(e,r,a,s,n)=>{var{offset:i,className:o}=e,{cx:c,cy:u,innerRadius:m,outerRadius:g,startAngle:f,endAngle:y,clockWise:p}=n,b=(m+g)/2,j=SJ(f,y),v=j>=0?1:-1,N,k;switch(r){case"insideStart":N=f+v*i,k=p;break;case"insideEnd":N=y-v*i,k=!p;break;case"end":N=y+v*i,k=p;break;default:throw new Error("Unsupported position ".concat(r))}k=j<=0?k:!k;var E=ca(c,u,b,N),C=ca(c,u,b,N+(k?1:-1)*359),S="M".concat(E.x,",").concat(E.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(k?0:1,`,
    `).concat(C.x,",").concat(C.y),P=Or(e.id)?Ku("recharts-radial-line-"):e.id;return h.createElement("text",Ti({},s,{dominantBaseline:"central",className:tr("recharts-radial-bar-label",o)}),h.createElement("defs",null,h.createElement("path",{id:P,d:S})),h.createElement("textPath",{xlinkHref:"#".concat(P)},a))},EJ=(e,r,a)=>{var{cx:s,cy:n,innerRadius:i,outerRadius:o,startAngle:c,endAngle:u}=e,m=(c+u)/2;if(a==="outside"){var{x:g,y:f}=ca(s,n,o+r,m);return{x:g,y:f,textAnchor:g>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:n,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:n,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:n,textAnchor:"middle",verticalAnchor:"end"};var y=(i+o)/2,{x:p,y:b}=ca(s,n,y,m);return{x:p,y:b,textAnchor:"middle",verticalAnchor:"middle"}},kw=e=>"cx"in e&&Je(e.cx),AJ=(e,r)=>{var{parentViewBox:a,offset:s,position:n}=e,i;a!=null&&!kw(a)&&(i=a);var{x:o,y:c,upperWidth:u,lowerWidth:m,height:g}=r,f=o,y=o+(u-m)/2,p=(f+y)/2,b=(u+m)/2,j=f+u/2,v=g>=0?1:-1,N=v*s,k=v>0?"end":"start",E=v>0?"start":"end",C=u>=0?1:-1,S=C*s,P=C>0?"end":"start",D=C>0?"start":"end";if(n==="top"){var I={x:f+u/2,y:c-N,textAnchor:"middle",verticalAnchor:k};return ta(ta({},I),i?{height:Math.max(c-i.y,0),width:u}:{})}if(n==="bottom"){var H={x:y+m/2,y:c+g+N,textAnchor:"middle",verticalAnchor:E};return ta(ta({},H),i?{height:Math.max(i.y+i.height-(c+g),0),width:m}:{})}if(n==="left"){var W={x:p-S,y:c+g/2,textAnchor:P,verticalAnchor:"middle"};return ta(ta({},W),i?{width:Math.max(W.x-i.x,0),height:g}:{})}if(n==="right"){var K={x:p+b+S,y:c+g/2,textAnchor:D,verticalAnchor:"middle"};return ta(ta({},K),i?{width:Math.max(i.x+i.width-K.x,0),height:g}:{})}var B=i?{width:b,height:g}:{};return n==="insideLeft"?ta({x:p+S,y:c+g/2,textAnchor:D,verticalAnchor:"middle"},B):n==="insideRight"?ta({x:p+b-S,y:c+g/2,textAnchor:P,verticalAnchor:"middle"},B):n==="insideTop"?ta({x:f+u/2,y:c+N,textAnchor:"middle",verticalAnchor:E},B):n==="insideBottom"?ta({x:y+m/2,y:c+g-N,textAnchor:"middle",verticalAnchor:k},B):n==="insideTopLeft"?ta({x:f+S,y:c+N,textAnchor:D,verticalAnchor:E},B):n==="insideTopRight"?ta({x:f+u-S,y:c+N,textAnchor:P,verticalAnchor:E},B):n==="insideBottomLeft"?ta({x:y+S,y:c+g-N,textAnchor:D,verticalAnchor:k},B):n==="insideBottomRight"?ta({x:y+m-S,y:c+g-N,textAnchor:P,verticalAnchor:k},B):n&&typeof n=="object"&&(Je(n.x)||Fi(n.x))&&(Je(n.y)||Fi(n.y))?ta({x:o+as(n.x,b),y:c+as(n.y,g),textAnchor:"end",verticalAnchor:"end"},B):ta({x:j,y:c+g/2,textAnchor:"middle",verticalAnchor:"middle"},B)},PJ={angle:0,offset:5,zIndex:sa.label,position:"middle",textBreakAll:!1};function Po(e){var r=Zr(e,PJ),{viewBox:a,position:s,value:n,children:i,content:o,className:c="",textBreakAll:u,labelRef:m}=r,g=NJ(),f=W5(),y=s==="center"?f:g??f,p,b,j;if(a==null?p=y:kw(a)?p=a:p=dO(a),!p||Or(n)&&Or(i)&&!h.isValidElement(o)&&typeof o!="function")return null;var v=ta(ta({},r),{},{viewBox:p});if(h.isValidElement(o)){var{labelRef:N}=v,k=xJ(v,fJ);return h.cloneElement(o,k)}if(typeof o=="function"){if(b=h.createElement(o,v),h.isValidElement(b))return b}else b=kJ(r);var E=ss(r);if(kw(p)){if(s==="insideStart"||s==="insideEnd"||s==="end")return CJ(r,s,b,E,p);j=EJ(p,r.offset,r.position)}else j=AJ(r,p);return h.createElement(ps,{zIndex:r.zIndex},h.createElement(sx,Ti({ref:m,className:tr("recharts-label",c)},E,j,{textAnchor:dJ(E.textAnchor)?E.textAnchor:j.textAnchor,breakAll:u}),b))}Po.displayName="Label";var TJ=(e,r,a)=>{if(!e)return null;var s={viewBox:r,labelRef:a};return e===!0?h.createElement(Po,Ti({key:"label-implicit"},s)):ni(e)?h.createElement(Po,Ti({key:"label-implicit",value:e},s)):h.isValidElement(e)?e.type===Po?h.cloneElement(e,ta({key:"label-implicit"},s)):h.createElement(Po,Ti({key:"label-implicit",content:e},s)):UN(e)?h.createElement(Po,Ti({key:"label-implicit",content:e},s)):e&&typeof e=="object"?h.createElement(Po,Ti({},e,{key:"label-implicit"},s)):null};function DJ(e){var{label:r,labelRef:a}=e,s=W5();return TJ(r,s,a)||null}var Uv={},Fv={},TA;function OJ(){return TA||(TA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return a[a.length-1]}e.last=r})(Fv)),Fv}var zv={},DA;function IJ(){return DA||(DA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return Array.isArray(a)?a:Array.from(a)}e.toArray=r})(zv)),zv}var OA;function LJ(){return OA||(OA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=OJ(),a=IJ(),s=hj();function n(i){if(s.isArrayLike(i))return r.last(a.toArray(i))}e.last=n})(Uv)),Uv}var Bv,IA;function RJ(){return IA||(IA=1,Bv=LJ().last),Bv}var MJ=RJ();const _J=di(MJ);var $J=["valueAccessor"],UJ=["dataKey","clockWise","id","textBreakAll","zIndex"];function W0(){return W0=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},W0.apply(null,arguments)}function LA(e,r){if(e==null)return{};var a,s,n=FJ(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function FJ(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var zJ=e=>Array.isArray(e.value)?_J(e.value):e.value,V5=h.createContext(void 0),FN=V5.Provider,K5=h.createContext(void 0),BJ=K5.Provider;function qJ(){return h.useContext(V5)}function HJ(){return h.useContext(K5)}function Bh(e){var{valueAccessor:r=zJ}=e,a=LA(e,$J),{dataKey:s,clockWise:n,id:i,textBreakAll:o,zIndex:c}=a,u=LA(a,UJ),m=qJ(),g=HJ(),f=m||g;return!f||!f.length?null:h.createElement(ps,{zIndex:c??sa.label},h.createElement(Xr,{className:"recharts-label-list"},f.map((y,p)=>{var b,j=Or(s)?r(y,p):fr(y&&y.payload,s),v=Or(i)?{}:{id:"".concat(i,"-").concat(p)};return h.createElement(Po,W0({key:"label-".concat(p)},ss(y),u,v,{fill:(b=a.fill)!==null&&b!==void 0?b:y.fill,parentViewBox:y.parentViewBox,value:j,textBreakAll:o,viewBox:y.viewBox,index:p,zIndex:0}))})))}Bh.displayName="LabelList";function nx(e){var{label:r}=e;return r?r===!0?h.createElement(Bh,{key:"labelList-implicit"}):h.isValidElement(r)||UN(r)?h.createElement(Bh,{key:"labelList-implicit",content:r}):typeof r=="object"?h.createElement(Bh,W0({key:"labelList-implicit"},r,{type:String(r.type)})):null:null}function Sw(){return Sw=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Sw.apply(null,arguments)}var G5=e=>{var{cx:r,cy:a,r:s,className:n}=e,i=tr("recharts-dot",n);return Je(r)&&Je(a)&&Je(s)?h.createElement("circle",Sw({},fs(e),gj(e),{className:i,cx:r,cy:a,r:s})):null},Y5=e=>e.graphicalItems.polarItems,WJ=we([Ur,$m],cN),ix=we([Y5,Wr,WJ],dN),VJ=we([ix],uN),ox=we([VJ,Jj],mN),KJ=we([ox,Wr,ix],hN);we([ox,Wr,ix],(e,r,a)=>a.length>0?e.flatMap(s=>a.flatMap(n=>{var i,o=fr(s,(i=r.dataKey)!==null&&i!==void 0?i:n.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):r?.dataKey!=null?e.map(s=>({value:fr(s,r.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})));var RA=()=>{},GJ=we([ox,Wr,ix,ex,Ur],yN),YJ=we([Wr,xN,pN,RA,GJ,RA,Wt,Ur],vN),Q5=we([Wr,Wt,ox,KJ,_m,Ur,YJ],bN),QJ=we([Q5,Wr,vd],NN);we([Wr,Q5,QJ,Ur],SN);var XJ={radiusAxis:{},angleAxis:{}},X5=Ls({name:"polarAxis",initialState:XJ,reducers:{addRadiusAxis(e,r){e.radiusAxis[r.payload.id]=r.payload},removeRadiusAxis(e,r){delete e.radiusAxis[r.payload.id]},addAngleAxis(e,r){e.angleAxis[r.payload.id]=r.payload},removeAngleAxis(e,r){delete e.angleAxis[r.payload.id]}}}),{addRadiusAxis:yue,removeRadiusAxis:vue,addAngleAxis:bue,removeAngleAxis:wue}=X5.actions,ZJ=X5.reducer;function MA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function _A(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?MA(Object(a),!0).forEach(function(s){JJ(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):MA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function JJ(e,r,a){return(r=eee(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function eee(e){var r=tee(e,"string");return typeof r=="symbol"?r:r+""}function tee(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var ree=(e,r)=>r,zN=we([Y5,ree],(e,r)=>e.filter(a=>a.type==="pie").find(a=>a.id===r)),aee=[],BN=(e,r,a)=>a?.length===0?aee:a,Z5=we([Jj,zN,BN],(e,r,a)=>{var{chartData:s}=e;if(r!=null){var n;if(r?.data!=null&&r.data.length>0?n=r.data:n=s,(!n||!n.length)&&a!=null&&(n=a.map(i=>_A(_A({},r.presentationProps),i.props))),n!=null)return n}}),see=we([Z5,zN,BN],(e,r,a)=>{if(!(e==null||r==null))return e.map((s,n)=>{var i,o=fr(s,r.nameKey,r.name),c;return a!=null&&(i=a[n])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?c=a[n].props.fill:typeof s=="object"&&s!=null&&"fill"in s?c=s.fill:c=r.fill,{value:Go(o,r.dataKey),color:c,payload:s,type:r.legendType}})}),nee=we([Z5,zN,BN,ja],(e,r,a,s)=>{if(!(r==null||e==null))return ite({offset:s,pieSettings:r,displayedData:e,cells:a})}),qv={exports:{}},yr={};var $A;function iee(){if($A)return yr;$A=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function b(j){if(typeof j=="object"&&j!==null){var v=j.$$typeof;switch(v){case e:switch(j=j.type,j){case a:case n:case s:case u:case m:case y:return j;default:switch(j=j&&j.$$typeof,j){case o:case c:case f:case g:return j;case i:return j;default:return v}}case r:return v}}}return yr.ContextConsumer=i,yr.ContextProvider=o,yr.Element=e,yr.ForwardRef=c,yr.Fragment=a,yr.Lazy=f,yr.Memo=g,yr.Portal=r,yr.Profiler=n,yr.StrictMode=s,yr.Suspense=u,yr.SuspenseList=m,yr.isContextConsumer=function(j){return b(j)===i},yr.isContextProvider=function(j){return b(j)===o},yr.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},yr.isForwardRef=function(j){return b(j)===c},yr.isFragment=function(j){return b(j)===a},yr.isLazy=function(j){return b(j)===f},yr.isMemo=function(j){return b(j)===g},yr.isPortal=function(j){return b(j)===r},yr.isProfiler=function(j){return b(j)===n},yr.isStrictMode=function(j){return b(j)===s},yr.isSuspense=function(j){return b(j)===u},yr.isSuspenseList=function(j){return b(j)===m},yr.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===a||j===n||j===s||j===u||j===m||typeof j=="object"&&j!==null&&(j.$$typeof===f||j.$$typeof===g||j.$$typeof===o||j.$$typeof===i||j.$$typeof===c||j.$$typeof===p||j.getModuleId!==void 0)},yr.typeOf=b,yr}var UA;function oee(){return UA||(UA=1,qv.exports=iee()),qv.exports}var lee=oee(),FA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",zA=null,Hv=null,J5=e=>{if(e===zA&&Array.isArray(Hv))return Hv;var r=[];return h.Children.forEach(e,a=>{Or(a)||(lee.isFragment(a)?r=r.concat(J5(a.props.children)):r.push(a))}),Hv=r,zA=e,r};function qN(e,r){var a=[],s=[];return Array.isArray(r)?s=r.map(n=>FA(n)):s=[FA(r)],J5(e).forEach(n=>{var i=zl(n,"type.displayName")||zl(n,"type.name");i&&s.indexOf(i)!==-1&&a.push(n)}),a}var HN=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Wv={},BA;function cee(){return BA||(BA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){if(typeof a!="object"||a==null)return!1;if(Object.getPrototypeOf(a)===null)return!0;if(Object.prototype.toString.call(a)!=="[object Object]"){const n=a[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(a,Symbol.toStringTag)?.writable?!1:a.toString()===`[object ${n}]`}let s=a;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(a)===s}e.isPlainObject=r})(Wv)),Wv}var Vv,qA;function dee(){return qA||(qA=1,Vv=cee().isPlainObject),Vv}var uee=dee();const mee=di(uee);function HA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function WA(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?HA(Object(a),!0).forEach(function(s){gee(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):HA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function gee(e,r,a){return(r=hee(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function hee(e){var r=fee(e,"string");return typeof r=="symbol"?r:r+""}function fee(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function V0(){return V0=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},V0.apply(null,arguments)}var VA=(e,r,a,s,n)=>{var i=a-s,o;return o="M ".concat(e,",").concat(r),o+="L ".concat(e+a,",").concat(r),o+="L ".concat(e+a-i/2,",").concat(r+n),o+="L ".concat(e+a-i/2-s,",").concat(r+n),o+="L ".concat(e,",").concat(r," Z"),o},xee={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pee=e=>{var r=Zr(e,xee),{x:a,y:s,upperWidth:n,lowerWidth:i,height:o,className:c}=r,{animationEasing:u,animationDuration:m,animationBegin:g,isUpdateAnimationActive:f}=r,y=h.useRef(null),[p,b]=h.useState(-1),j=h.useRef(n),v=h.useRef(i),N=h.useRef(o),k=h.useRef(a),E=h.useRef(s),C=gd(e,"trapezoid-");if(h.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var q=y.current.getTotalLength();q&&b(q)}catch{}},[]),a!==+a||s!==+s||n!==+n||i!==+i||o!==+o||n===0&&i===0||o===0)return null;var S=tr("recharts-trapezoid",c);if(!f)return h.createElement("g",null,h.createElement("path",V0({},ss(r),{className:S,d:VA(a,s,n,i,o)})));var P=j.current,D=v.current,I=N.current,H=k.current,W=E.current,K="0px ".concat(p===-1?1:p,"px"),B="".concat(p,"px 0px"),z=NO(["strokeDasharray"],m,u);return h.createElement(md,{animationId:C,key:C,canBegin:p>0,duration:m,easing:u,isActive:f,begin:g},q=>{var J=dr(P,n,q),ae=dr(D,i,q),ne=dr(I,o,q),re=dr(H,a,q),L=dr(W,s,q);y.current&&(j.current=J,v.current=ae,N.current=ne,k.current=re,E.current=L);var G=q>0?{transition:z,strokeDasharray:B}:{strokeDasharray:K};return h.createElement("path",V0({},ss(r),{className:S,d:VA(re,L,J,ae,ne),ref:y,style:WA(WA({},G),r.style)}))})},yee=["option","shapeType","propTransformer","activeClassName"];function vee(e,r){if(e==null)return{};var a,s,n=bee(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function bee(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function KA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function K0(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?KA(Object(a),!0).forEach(function(s){wee(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):KA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function wee(e,r,a){return(r=jee(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function jee(e){var r=Nee(e,"string");return typeof r=="symbol"?r:r+""}function Nee(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function kee(e,r){return K0(K0({},r),e)}function See(e,r){return e==="symbols"}function GA(e){var{shapeType:r,elementProps:a}=e;switch(r){case"rectangle":return h.createElement(EO,a);case"trapezoid":return h.createElement(pee,a);case"sector":return h.createElement(DO,a);case"symbols":if(See(r))return h.createElement(mj,a);break;case"curve":return h.createElement(zc,a);default:return null}}function Cee(e){return h.isValidElement(e)?e.props:e}function WN(e){var{option:r,shapeType:a,propTransformer:s=kee,activeClassName:n="recharts-active-shape"}=e,i=vee(e,yee),o;if(h.isValidElement(r))o=h.cloneElement(r,K0(K0({},i),Cee(r)));else if(typeof r=="function")o=r(i,i.index);else if(mee(r)&&typeof r!="boolean"){var c=s(r,i);o=h.createElement(GA,{shapeType:a,elementProps:c})}else{var u=i;o=h.createElement(GA,{shapeType:a,elementProps:u})}return i.isActive?h.createElement(Xr,{className:n},o):o}var VN=(e,r,a)=>{var s=Ar();return(n,i)=>o=>{e?.(n,i,o),s(m5({activeIndex:String(i),activeDataKey:r,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:a}))}},KN=e=>{var r=Ar();return(a,s)=>n=>{e?.(a,s,n),r(UQ())}},GN=(e,r,a)=>{var s=Ar();return(n,i)=>o=>{e?.(n,i,o),s(FQ({activeIndex:String(i),activeDataKey:r,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:a}))}};function lx(e){var{tooltipEntrySettings:r}=e,a=Ar(),s=Ua(),n=h.useRef(null);return h.useLayoutEffect(()=>{s||(n.current===null?a(RQ(r)):n.current!==r&&a(MQ({prev:n.current,next:r})),n.current=r)},[r,a,s]),h.useLayoutEffect(()=>()=>{n.current&&(a(_Q(n.current)),n.current=null)},[a]),null}function YN(e){var{legendPayload:r}=e,a=Ar(),s=Ua(),n=h.useRef(null);return h.useLayoutEffect(()=>{s||(n.current===null?a(vO(r)):n.current!==r&&a(bO({prev:n.current,next:r})),n.current=r)},[a,s,r]),h.useLayoutEffect(()=>()=>{n.current&&(a(wO(n.current)),n.current=null)},[a]),null}function Eee(e){var{legendPayload:r}=e,a=Ar(),s=at(Wt),n=h.useRef(null);return h.useLayoutEffect(()=>{s!=="centric"&&s!=="radial"||(n.current===null?a(vO(r)):n.current!==r&&a(bO({prev:n.current,next:r})),n.current=r)},[a,s,r]),h.useLayoutEffect(()=>()=>{n.current&&(a(wO(n.current)),n.current=null)},[a]),null}var Kv,Aee=()=>{var[e]=h.useState(()=>Ku("uid-"));return e},Pee=(Kv=aT.useId)!==null&&Kv!==void 0?Kv:Aee;function eI(e,r){var a=Pee();return r||(e?"".concat(e,"-").concat(a):a)}var Tee=h.createContext(void 0),cx=e=>{var{id:r,type:a,children:s}=e,n=eI("recharts-".concat(a),r);return h.createElement(Tee.Provider,{value:n},s(n))},Dee={cartesianItems:[],polarItems:[]},tI=Ls({name:"graphicalItems",initialState:Dee,reducers:{addCartesianGraphicalItem:{reducer(e,r){e.cartesianItems.push(r.payload)},prepare:Mr()},replaceCartesianGraphicalItem:{reducer(e,r){var{prev:a,next:s}=r.payload,n=Mn(e).cartesianItems.indexOf(a);n>-1&&(e.cartesianItems[n]=s)},prepare:Mr()},removeCartesianGraphicalItem:{reducer(e,r){var a=Mn(e).cartesianItems.indexOf(r.payload);a>-1&&e.cartesianItems.splice(a,1)},prepare:Mr()},addPolarGraphicalItem:{reducer(e,r){e.polarItems.push(r.payload)},prepare:Mr()},removePolarGraphicalItem:{reducer(e,r){var a=Mn(e).polarItems.indexOf(r.payload);a>-1&&e.polarItems.splice(a,1)},prepare:Mr()}}}),{addCartesianGraphicalItem:Oee,replaceCartesianGraphicalItem:Iee,removeCartesianGraphicalItem:Lee,addPolarGraphicalItem:Ree,removePolarGraphicalItem:Mee}=tI.actions,_ee=tI.reducer,$ee=e=>{var r=Ar(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?r(Oee(e)):a.current!==e&&r(Iee({prev:a.current,next:e})),a.current=e},[r,e]),h.useLayoutEffect(()=>()=>{a.current&&(r(Lee(a.current)),a.current=null)},[r]),null},QN=h.memo($ee);function Uee(e){var r=Ar();return h.useLayoutEffect(()=>(r(Ree(e)),()=>{r(Mee(e))}),[r,e]),null}var Fee=["key"],zee=["onMouseEnter","onClick","onMouseLeave"],Bee=["id"],qee=["id"];function YA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function Gr(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?YA(Object(a),!0).forEach(function(s){Hee(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):YA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Hee(e,r,a){return(r=Wee(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Wee(e){var r=Vee(e,"string");return typeof r=="symbol"?r:r+""}function Vee(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Ho(){return Ho=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ho.apply(null,arguments)}function dx(e,r){if(e==null)return{};var a,s,n=Kee(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Kee(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function Gee(e){var r=h.useMemo(()=>qN(e.children,Zo),[e.children]),a=at(s=>see(s,e.id,r));return a==null?null:h.createElement(Eee,{legendPayload:a})}var Yee=h.memo(e=>{var{dataKey:r,nameKey:a,sectors:s,stroke:n,strokeWidth:i,fill:o,name:c,hide:u,tooltipType:m}=e,g={dataDefinedOnItem:s.map(f=>f.tooltipPayload),positions:s.map(f=>f.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:o,dataKey:r,nameKey:a,name:Go(c,r),hide:u,type:m,color:o,unit:""}};return h.createElement(lx,{tooltipEntrySettings:g})}),Qee=(e,r)=>e>r?"start":e<r?"end":"middle",Xee=(e,r,a)=>as(typeof r=="function"?r(e):r,a,a*.8),Zee=(e,r,a)=>{var{top:s,left:n,width:i,height:o}=r,c=AO(i,o),u=n+as(e.cx,i,i/2),m=s+as(e.cy,o,o/2),g=as(e.innerRadius,c,0),f=Xee(a,e.outerRadius,c),y=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:u,cy:m,innerRadius:g,outerRadius:f,maxRadius:y}},Jee=(e,r)=>{var a=Ra(r-e),s=Math.min(Math.abs(r-e),360);return a*s};function ete(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var tte=(e,r)=>{if(h.isValidElement(e))return h.cloneElement(e,r);if(typeof e=="function")return e(r);var a=tr("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:s}=r,n=dx(r,Fee);return h.createElement(zc,Ho({},n,{type:"linear",className:a}))},rte=(e,r,a)=>{if(h.isValidElement(e))return h.cloneElement(e,r);var s=a;if(typeof e=="function"&&(s=e(r),h.isValidElement(s)))return s;var n=tr("recharts-pie-label-text",ete(e));return h.createElement(sx,Ho({},r,{alignmentBaseline:"middle",className:n}),s)};function ate(e){var{sectors:r,props:a,showLabels:s}=e,{label:n,labelLine:i,dataKey:o}=a;if(!s||!n||!r)return null;var c=fs(a),u=Fl(n),m=Fl(i),g=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,f=r.map((y,p)=>{var b=(y.startAngle+y.endAngle)/2,j=ca(y.cx,y.cy,y.outerRadius+g,b),v=Gr(Gr(Gr(Gr({},c),y),{},{stroke:"none"},u),{},{index:p,textAnchor:Qee(j.x,y.cx)},j),N=Gr(Gr(Gr(Gr({},c),y),{},{fill:"none",stroke:y.fill},m),{},{index:p,points:[ca(y.cx,y.cy,y.outerRadius,b),j],key:"line"});return h.createElement(ps,{zIndex:sa.label,key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(p)},h.createElement(Xr,null,i&&tte(i,N),rte(n,v,fr(y,o))))});return h.createElement(Xr,{className:"recharts-pie-labels"},f)}function ste(e){var{sectors:r,props:a,showLabels:s}=e,{label:n}=a;return typeof n=="object"&&n!=null&&"position"in n?h.createElement(nx,{label:n}):h.createElement(ate,{sectors:r,props:a,showLabels:s})}function nte(e){var{sectors:r,activeShape:a,inactiveShape:s,allOtherPieProps:n,shape:i,id:o}=e,c=at(qo),u=at(LN),m=at(SX),{onMouseEnter:g,onClick:f,onMouseLeave:y}=n,p=dx(n,zee),b=VN(g,n.dataKey,o),j=KN(y),v=GN(f,n.dataKey,o);return r==null||r.length===0?null:h.createElement(h.Fragment,null,r.map((N,k)=>{if(N?.startAngle===0&&N?.endAngle===0&&r.length!==1)return null;var E=m==null||m===o,C=String(k)===c&&(u==null||n.dataKey===u)&&E,S=c?s:null,P=a&&C?a:S,D=Gr(Gr({},N),{},{stroke:N.stroke,tabIndex:-1,[nO]:k,[iO]:n.dataKey});return h.createElement(Xr,Ho({key:"sector-".concat(N?.startAngle,"-").concat(N?.endAngle,"-").concat(N.midAngle,"-").concat(k),tabIndex:-1,className:"recharts-pie-sector"},Cm(p,N,k),{onMouseEnter:b(N,k),onMouseLeave:j(N,k),onClick:v(N,k)}),h.createElement(WN,Ho({option:i??P,index:k,shapeType:"sector",isActive:C},D)))}))}function ite(e){var r,{pieSettings:a,displayedData:s,cells:n,offset:i}=e,{cornerRadius:o,startAngle:c,endAngle:u,dataKey:m,nameKey:g,tooltipType:f}=a,y=Math.abs(a.minAngle),p=Jee(c,u),b=Math.abs(p),j=s.length<=1?0:(r=a.paddingAngle)!==null&&r!==void 0?r:0,v=s.filter(P=>fr(P,m,0)!==0).length,N=(b>=360?v:v-1)*j,k=b-v*y-N,E=s.reduce((P,D)=>{var I=fr(D,m,0);return P+(Je(I)?I:0)},0),C;if(E>0){var S;C=s.map((P,D)=>{var I=fr(P,m,0),H=fr(P,g,D),W=Zee(a,i,P),K=(Je(I)?I:0)/E,B,z=Gr(Gr({},P),n&&n[D]&&n[D].props);D?B=S.endAngle+Ra(p)*j*(I!==0?1:0):B=c;var q=B+Ra(p)*((I!==0?y:0)+K*k),J=(B+q)/2,ae=(W.innerRadius+W.outerRadius)/2,ne=[{name:H,value:I,payload:z,dataKey:m,type:f}],re=ca(W.cx,W.cy,ae,J);return S=Gr(Gr(Gr(Gr({},a.presentationProps),{},{percent:K,cornerRadius:typeof o=="string"?parseFloat(o):o,name:H,tooltipPayload:ne,midAngle:J,middleRadius:ae,tooltipPosition:re},z),W),{},{value:I,dataKey:m,startAngle:B,endAngle:q,payload:z,paddingAngle:Ra(p)*j}),S})}return C}function ote(e){var{showLabels:r,sectors:a,children:s}=e,n=h.useMemo(()=>!r||!a?[]:a.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[a,r]);return h.createElement(BJ,{value:r?n:void 0},s)}function lte(e){var{props:r,previousSectorsRef:a,id:s}=e,{sectors:n,isAnimationActive:i,animationBegin:o,animationDuration:c,animationEasing:u,activeShape:m,inactiveShape:g,onAnimationStart:f,onAnimationEnd:y}=r,p=gd(r,"recharts-pie-"),b=a.current,[j,v]=h.useState(!1),N=h.useCallback(()=>{typeof y=="function"&&y(),v(!1)},[y]),k=h.useCallback(()=>{typeof f=="function"&&f(),v(!0)},[f]);return h.createElement(ote,{showLabels:!j,sectors:n},h.createElement(md,{animationId:p,begin:o,duration:c,isActive:i,easing:u,onAnimationStart:k,onAnimationEnd:N,key:p},E=>{var C=[],S=n&&n[0],P=S?.startAngle;return n?.forEach((D,I)=>{var H=b&&b[I],W=I>0?zl(D,"paddingAngle",0):0;if(H){var K=dr(H.endAngle-H.startAngle,D.endAngle-D.startAngle,E),B=Gr(Gr({},D),{},{startAngle:P+W,endAngle:P+K+W});C.push(B),P=B.endAngle}else{var{endAngle:z,startAngle:q}=D,J=dr(0,z-q,E),ae=Gr(Gr({},D),{},{startAngle:P+W,endAngle:P+J+W});C.push(ae),P=ae.endAngle}}),a.current=C,h.createElement(Xr,null,h.createElement(nte,{sectors:C,activeShape:m,inactiveShape:g,allOtherPieProps:r,shape:r.shape,id:s}))}),h.createElement(ste,{showLabels:!j,sectors:n,props:r}),r.children)}var cte={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:sa.area};function dte(e){var{id:r}=e,a=dx(e,Bee),{hide:s,className:n,rootTabIndex:i}=e,o=h.useMemo(()=>qN(e.children,Zo),[e.children]),c=at(g=>nee(g,r,o)),u=h.useRef(null),m=tr("recharts-pie",n);return s||c==null?(u.current=null,h.createElement(Xr,{tabIndex:i,className:m})):h.createElement(ps,{zIndex:e.zIndex},h.createElement(Yee,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:c,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),h.createElement(Xr,{tabIndex:i,className:m},h.createElement(lte,{props:Gr(Gr({},a),{},{sectors:c}),previousSectorsRef:u,id:r})))}function Gm(e){var r=Zr(e,cte),{id:a}=r,s=dx(r,qee),n=fs(s);return h.createElement(cx,{id:a,type:"pie"},i=>h.createElement(h.Fragment,null,h.createElement(Uee,{type:"pie",id:i,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:n,maxRadius:r.maxRadius}),h.createElement(Gee,Ho({},s,{id:i})),h.createElement(dte,Ho({},s,{id:i}))))}Gm.displayName="Pie";var ute=["points"];function QA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function Gv(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?QA(Object(a),!0).forEach(function(s){mte(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):QA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function mte(e,r,a){return(r=gte(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function gte(e){var r=hte(e,"string");return typeof r=="symbol"?r:r+""}function hte(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function G0(){return G0=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},G0.apply(null,arguments)}function fte(e,r){if(e==null)return{};var a,s,n=xte(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function xte(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function pte(e){var{option:r,dotProps:a,className:s}=e;if(h.isValidElement(r))return h.cloneElement(r,a);if(typeof r=="function")return r(a);var n=tr(s,typeof r!="boolean"?r.className:""),i=a??{},{points:o}=i,c=fte(i,ute);return h.createElement(G5,G0({},c,{className:n}))}function yte(e,r){return e==null?!1:r?!0:e.length===1}function rI(e){var{points:r,dot:a,className:s,dotClassName:n,dataKey:i,baseProps:o,needClip:c,clipPathId:u,zIndex:m=sa.scatter}=e;if(!yte(r,a))return null;var g=HN(a),f=HF(a),y=r.map((b,j)=>{var v,N,k=Gv(Gv(Gv({r:3},o),f),{},{index:j,cx:(v=b.x)!==null&&v!==void 0?v:void 0,cy:(N=b.y)!==null&&N!==void 0?N:void 0,dataKey:i,value:b.value,payload:b.payload,points:r});return h.createElement(pte,{key:"dot-".concat(j),option:a,dotProps:k,className:n})}),p={};return c&&u!=null&&(p.clipPath="url(#clipPath-".concat(g?"":"dots-").concat(u,")")),h.createElement(ps,{zIndex:m},h.createElement(Xr,G0({className:s},p),y))}function XA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function ZA(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?XA(Object(a),!0).forEach(function(s){vte(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):XA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function vte(e,r,a){return(r=bte(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function bte(e){var r=wte(e,"string");return typeof r=="symbol"?r:r+""}function wte(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var jte={xAxis:{},yAxis:{},zAxis:{}},aI=Ls({name:"cartesianAxis",initialState:jte,reducers:{addXAxis:{reducer(e,r){e.xAxis[r.payload.id]=r.payload},prepare:Mr()},replaceXAxis:{reducer(e,r){var{prev:a,next:s}=r.payload;e.xAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.xAxis[a.id],e.xAxis[s.id]=s)},prepare:Mr()},removeXAxis:{reducer(e,r){delete e.xAxis[r.payload.id]},prepare:Mr()},addYAxis:{reducer(e,r){e.yAxis[r.payload.id]=r.payload},prepare:Mr()},replaceYAxis:{reducer(e,r){var{prev:a,next:s}=r.payload;e.yAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.yAxis[a.id],e.yAxis[s.id]=s)},prepare:Mr()},removeYAxis:{reducer(e,r){delete e.yAxis[r.payload.id]},prepare:Mr()},addZAxis:{reducer(e,r){e.zAxis[r.payload.id]=r.payload},prepare:Mr()},replaceZAxis:{reducer(e,r){var{prev:a,next:s}=r.payload;e.zAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.zAxis[a.id],e.zAxis[s.id]=s)},prepare:Mr()},removeZAxis:{reducer(e,r){delete e.zAxis[r.payload.id]},prepare:Mr()},updateYAxisWidth(e,r){var{id:a,width:s}=r.payload,n=e.yAxis[a];if(n){var i=n.widthHistory||[];if(i.length===3&&i[0]===i[2]&&s===i[1]&&s!==n.width&&Math.abs(s-i[0])<=1)return;var o=[...i,s].slice(-3);e.yAxis[a]=ZA(ZA({},e.yAxis[a]),{},{width:s,widthHistory:o})}}}}),{addXAxis:Nte,replaceXAxis:kte,removeXAxis:Ste,addYAxis:Cte,replaceYAxis:Ete,removeYAxis:Ate,addZAxis:jue,replaceZAxis:Nue,removeZAxis:kue,updateYAxisWidth:Pte}=aI.actions,Tte=aI.reducer,Dte=we([ja],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Ote=we([Dte,Yi,Qi],(e,r,a)=>{if(!(!e||r==null||a==null))return{x:e.left,y:e.top,width:Math.max(0,r-e.left-e.right),height:Math.max(0,a-e.top-e.bottom)}}),ux=()=>at(Ote),Ite=()=>at(TX);function JA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function Yv(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?JA(Object(a),!0).forEach(function(s){Lte(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):JA(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Lte(e,r,a){return(r=Rte(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Rte(e){var r=Mte(e,"string");return typeof r=="symbol"?r:r+""}function Mte(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var _te=e=>{var{point:r,childIndex:a,mainColor:s,activeDot:n,dataKey:i,clipPath:o}=e;if(n===!1||r.x==null||r.y==null)return null;var c={index:a,dataKey:i,cx:r.x,cy:r.y,r:4,fill:s??"none",strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value},u=Yv(Yv(Yv({},c),Fl(n)),gj(n)),m;return h.isValidElement(n)?m=h.cloneElement(n,u):typeof n=="function"?m=n(u):m=h.createElement(G5,u),h.createElement(Xr,{className:"recharts-active-dot",clipPath:o},m)};function Cw(e){var{points:r,mainColor:a,activeDot:s,itemDataKey:n,clipPath:i,zIndex:o=sa.activeDot}=e,c=at(qo),u=Ite();if(r==null||u==null)return null;var m=r.find(g=>u.includes(g.payload));return Or(m)?null:h.createElement(ps,{zIndex:o},h.createElement(_te,{point:m,childIndex:Number(c),mainColor:a,dataKey:n,activeDot:s,clipPath:i}))}var $te="Invariant failed";function Ute(e,r){throw new Error($te)}var Fte=["x","y"];function Ew(){return Ew=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ew.apply(null,arguments)}function eP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function bu(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?eP(Object(a),!0).forEach(function(s){zte(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eP(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function zte(e,r,a){return(r=Bte(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Bte(e){var r=qte(e,"string");return typeof r=="symbol"?r:r+""}function qte(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Hte(e,r){if(e==null)return{};var a,s,n=Wte(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Wte(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function Vte(e,r){var{x:a,y:s}=e,n=Hte(e,Fte),i="".concat(a),o=parseInt(i,10),c="".concat(s),u=parseInt(c,10),m="".concat(r.height||n.height),g=parseInt(m,10),f="".concat(r.width||n.width),y=parseInt(f,10);return bu(bu(bu(bu(bu({},r),n),o?{x:o}:{}),u?{y:u}:{}),{},{height:g,width:y,name:r.name,radius:r.radius})}function Y0(e){return h.createElement(WN,Ew({shapeType:"rectangle",propTransformer:Vte,activeClassName:"recharts-active-bar"},e))}var Kte=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,n)=>{if(Je(r))return r;var i=Je(s)||Or(s);return i?r(s,n):(i||Ute(),a)}},Gte={},sI=Ls({name:"errorBars",initialState:Gte,reducers:{addErrorBar:(e,r)=>{var{itemId:a,errorBar:s}=r.payload;e[a]||(e[a]=[]),e[a].push(s)},replaceErrorBar:(e,r)=>{var{itemId:a,prev:s,next:n}=r.payload;e[a]&&(e[a]=e[a].map(i=>i.dataKey===s.dataKey&&i.direction===s.direction?n:i))},removeErrorBar:(e,r)=>{var{itemId:a,errorBar:s}=r.payload;e[a]&&(e[a]=e[a].filter(n=>n.dataKey!==s.dataKey||n.direction!==s.direction))}}}),{addErrorBar:Sue,replaceErrorBar:Cue,removeErrorBar:Eue}=sI.actions,Yte=sI.reducer,Qte=["children"];function Xte(e,r){if(e==null)return{};var a,s,n=Zte(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Zte(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var Jte={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},ere=h.createContext(Jte);function nI(e){var{children:r}=e,a=Xte(e,Qte);return h.createElement(ere.Provider,{value:a},r)}function mx(e,r){var a,s,n=at(m=>Zi(m,e)),i=at(m=>Ji(m,r)),o=(a=n?.allowDataOverflow)!==null&&a!==void 0?a:Da.allowDataOverflow,c=(s=i?.allowDataOverflow)!==null&&s!==void 0?s:Oa.allowDataOverflow,u=o||c;return{needClip:u,needClipX:o,needClipY:c}}function XN(e){var{xAxisId:r,yAxisId:a,clipPathId:s}=e,n=ux(),{needClipX:i,needClipY:o,needClip:c}=mx(r,a);if(!c||!n)return null;var{x:u,y:m,width:g,height:f}=n;return h.createElement("clipPath",{id:"clipPath-".concat(s)},h.createElement("rect",{x:i?u:u-g/2,y:o?m:m-f/2,width:i?g:g*2,height:o?f:f*2}))}function tre(e,r){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Ir(e.zIndex)?e.zIndex:r}var Qv={exports:{}},Xv={};var tP;function rre(){if(tP)return Xv;tP=1;var e=rd();function r(u,m){return u===m&&(u!==0||1/u===1/m)||u!==u&&m!==m}var a=typeof Object.is=="function"?Object.is:r,s=e.useSyncExternalStore,n=e.useRef,i=e.useEffect,o=e.useMemo,c=e.useDebugValue;return Xv.useSyncExternalStoreWithSelector=function(u,m,g,f,y){var p=n(null);if(p.current===null){var b={hasValue:!1,value:null};p.current=b}else b=p.current;p=o(function(){function v(S){if(!N){if(N=!0,k=S,S=f(S),y!==void 0&&b.hasValue){var P=b.value;if(y(P,S))return E=P}return E=S}if(P=E,a(k,S))return P;var D=f(S);return y!==void 0&&y(P,D)?(k=S,P):(k=S,E=D)}var N=!1,k,E,C=g===void 0?null:g;return[function(){return v(m())},C===null?void 0:function(){return v(C())}]},[m,g,f,y]);var j=s(u,p[0],p[1]);return i(function(){b.hasValue=!0,b.value=j},[j]),c(j),j},Xv}var rP;function are(){return rP||(rP=1,Qv.exports=rre()),Qv.exports}are();function sre(e){e()}function nre(){let e=null,r=null;return{clear(){e=null,r=null},notify(){sre(()=>{let a=e;for(;a;)a.callback(),a=a.next})},get(){const a=[];let s=e;for(;s;)a.push(s),s=s.next;return a},subscribe(a){let s=!0;const n=r={callback:a,next:null,prev:r};return n.prev?n.prev.next=n:e=n,function(){!s||e===null||(s=!1,n.next?n.next.prev=n.prev:r=n.prev,n.prev?n.prev.next=n.next:e=n.next)}}}}var aP={notify(){},get:()=>[]};function ire(e,r){let a,s=aP,n=0,i=!1;function o(j){g();const v=s.subscribe(j);let N=!1;return()=>{N||(N=!0,v(),f())}}function c(){s.notify()}function u(){b.onStateChange&&b.onStateChange()}function m(){return i}function g(){n++,a||(a=e.subscribe(u),s=nre())}function f(){n--,a&&n===0&&(a(),a=void 0,s.clear(),s=aP)}function y(){i||(i=!0,g())}function p(){i&&(i=!1,f())}const b={addNestedSub:o,notifyNestedSubs:c,handleChangeWrapper:u,isSubscribed:m,trySubscribe:y,tryUnsubscribe:p,getListeners:()=>s};return b}var ore=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lre=ore(),cre=()=>typeof navigator<"u"&&navigator.product==="ReactNative",dre=cre(),ure=()=>lre||dre?h.useLayoutEffect:h.useEffect,mre=ure();function sP(e,r){return e===r?e!==0||r!==0||1/e===1/r:e!==e&&r!==r}function gre(e,r){if(sP(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;const a=Object.keys(e),s=Object.keys(r);if(a.length!==s.length)return!1;for(let n=0;n<a.length;n++)if(!Object.prototype.hasOwnProperty.call(r,a[n])||!sP(e[a[n]],r[a[n]]))return!1;return!0}var hre=Symbol.for("react-redux-context"),fre=typeof globalThis<"u"?globalThis:{};function xre(){if(!h.createContext)return{};const e=fre[hre]??=new Map;let r=e.get(h.createContext);return r||(r=h.createContext(null),e.set(h.createContext,r)),r}var pre=xre();function yre(e){const{children:r,context:a,serverState:s,store:n}=e,i=h.useMemo(()=>{const u=ire(n);return{store:n,subscription:u,getServerState:s?()=>s:void 0}},[n,s]),o=h.useMemo(()=>n.getState(),[n]);mre(()=>{const{subscription:u}=i;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==n.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[i,o]);const c=a||pre;return h.createElement(c.Provider,{value:i},r)}var vre=yre,bre=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function wre(e,r){return e==null&&r==null?!0:typeof e=="number"&&typeof r=="number"?e===r||e!==e&&r!==r:e===r}function Ym(e,r){var a=new Set([...Object.keys(e),...Object.keys(r)]);for(var s of a)if(bre.has(s)){if(e[s]==null&&r[s]==null)continue;if(!gre(e[s],r[s]))return!1}else if(!wre(e[s],r[s]))return!1;return!0}var jre=["onMouseEnter","onMouseLeave","onClick"],Nre=["value","background","tooltipPosition"],kre=["id"],Sre=["onMouseEnter","onClick","onMouseLeave"];function Vi(){return Vi=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Vi.apply(null,arguments)}function nP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function ls(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?nP(Object(a),!0).forEach(function(s){Cre(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nP(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Cre(e,r,a){return(r=Ere(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Ere(e){var r=Are(e,"string");return typeof r=="symbol"?r:r+""}function Are(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Q0(e,r){if(e==null)return{};var a,s,n=Pre(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Pre(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var Tre=e=>{var{dataKey:r,name:a,fill:s,legendType:n,hide:i}=e;return[{inactive:i,dataKey:r,type:n,color:s,value:Go(a,r),payload:e}]},Dre=h.memo(e=>{var{dataKey:r,stroke:a,strokeWidth:s,fill:n,name:i,hide:o,unit:c,tooltipType:u}=e,m={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:n,dataKey:r,nameKey:void 0,name:Go(i,r),hide:o,type:u,color:n,unit:c}};return h.createElement(lx,{tooltipEntrySettings:m})});function Ore(e){var r=at(qo),{data:a,dataKey:s,background:n,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:c,onClick:u}=i,m=Q0(i,jre),g=VN(o,s),f=KN(c),y=GN(u,s);if(!n||a==null)return null;var p=Fl(n);return h.createElement(ps,{zIndex:tre(n,sa.barBackground)},a.map((b,j)=>{var{value:v,background:N,tooltipPosition:k}=b,E=Q0(b,Nre);if(!N)return null;var C=g(b,j),S=f(b,j),P=y(b,j),D=ls(ls(ls(ls(ls({option:n,isActive:String(j)===r},E),{},{fill:"#eee"},N),p),Cm(m,b,j)),{},{onMouseEnter:C,onMouseLeave:S,onClick:P,dataKey:s,index:j,className:"recharts-bar-background-rectangle"});return h.createElement(Y0,Vi({key:"background-bar-".concat(j)},D))}))}function Ire(e){var{showLabels:r,children:a,rects:s}=e,n=s?.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return ls(ls({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return h.createElement(FN,{value:r?n:void 0},a)}function Lre(e){var{shape:r,activeBar:a,baseProps:s,entry:n,index:i,dataKey:o}=e,c=at(qo),u=at(LN),m=a&&String(i)===c&&(u==null||o===u),g=m?a:r;return m?h.createElement(ps,{zIndex:sa.activeBar},h.createElement(Y0,Vi({},s,{name:String(s.name)},n,{isActive:m,option:g,index:i,dataKey:o}))):h.createElement(Y0,Vi({},s,{name:String(s.name)},n,{isActive:m,option:g,index:i,dataKey:o}))}function Rre(e){var{shape:r,baseProps:a,entry:s,index:n,dataKey:i}=e;return h.createElement(Y0,Vi({},a,{name:String(a.name)},s,{isActive:!1,option:r,index:n,dataKey:i}))}function Mre(e){var r,{data:a,props:s}=e,n=(r=fs(s))!==null&&r!==void 0?r:{},{id:i}=n,o=Q0(n,kre),{shape:c,dataKey:u,activeBar:m}=s,{onMouseEnter:g,onClick:f,onMouseLeave:y}=s,p=Q0(s,Sre),b=VN(g,u),j=KN(y),v=GN(f,u);return a?h.createElement(h.Fragment,null,a.map((N,k)=>h.createElement(Xr,Vi({key:"rectangle-".concat(N?.x,"-").concat(N?.y,"-").concat(N?.value,"-").concat(k),className:"recharts-bar-rectangle"},Cm(p,N,k),{onMouseEnter:b(N,k),onMouseLeave:j(N,k),onClick:v(N,k)}),m?h.createElement(Lre,{shape:c,activeBar:m,baseProps:o,entry:N,index:k,dataKey:u}):h.createElement(Rre,{shape:c,baseProps:o,entry:N,index:k,dataKey:u})))):null}function _re(e){var{props:r,previousRectanglesRef:a}=e,{data:s,layout:n,isAnimationActive:i,animationBegin:o,animationDuration:c,animationEasing:u,onAnimationEnd:m,onAnimationStart:g}=r,f=a.current,y=gd(r,"recharts-bar-"),[p,b]=h.useState(!1),j=!p,v=h.useCallback(()=>{typeof m=="function"&&m(),b(!1)},[m]),N=h.useCallback(()=>{typeof g=="function"&&g(),b(!0)},[g]);return h.createElement(Ire,{showLabels:j,rects:s},h.createElement(md,{animationId:y,begin:o,duration:c,isActive:i,easing:u,onAnimationEnd:v,onAnimationStart:N,key:y},k=>{var E=k===1?s:s?.map((C,S)=>{var P=f&&f[S];if(P)return ls(ls({},C),{},{x:dr(P.x,C.x,k),y:dr(P.y,C.y,k),width:dr(P.width,C.width,k),height:dr(P.height,C.height,k)});if(n==="horizontal"){var D=dr(0,C.height,k),I=dr(C.stackedBarStart,C.y,k);return ls(ls({},C),{},{y:I,height:D})}var H=dr(0,C.width,k),W=dr(C.stackedBarStart,C.x,k);return ls(ls({},C),{},{width:H,x:W})});return k>0&&(a.current=E??null),E==null?null:h.createElement(Xr,null,h.createElement(Mre,{props:r,data:E}))}),h.createElement(nx,{label:r.label}),r.children)}function $re(e){var r=h.useRef(null);return h.createElement(_re,{previousRectanglesRef:r,props:e})}var iI=0,Ure=(e,r)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:fr(e,r)}};class Fre extends h.PureComponent{render(){var{hide:r,data:a,dataKey:s,className:n,xAxisId:i,yAxisId:o,needClip:c,background:u,id:m}=this.props;if(r||a==null)return null;var g=tr("recharts-bar",n),f=m;return h.createElement(Xr,{className:g,id:m},c&&h.createElement("defs",null,h.createElement(XN,{clipPathId:f,xAxisId:i,yAxisId:o})),h.createElement(Xr,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(f,")"):void 0},h.createElement(Ore,{data:a,dataKey:s,background:u,allOtherBarProps:this.props}),h.createElement($re,this.props)))}}var zre={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:iI,xAxisId:0,yAxisId:0,zIndex:sa.bar};function Bre(e){var{xAxisId:r,yAxisId:a,hide:s,legendType:n,minPointSize:i,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:m,isAnimationActive:g}=e,{needClip:f}=mx(r,a),y=Yl(),p=Ua(),b=qN(e.children,Zo),j=at(k=>xae(k,r,a,p,e.id,b));if(y!=="vertical"&&y!=="horizontal")return null;var v,N=j?.[0];return N==null||N.height==null||N.width==null?v=0:v=y==="vertical"?N.height/2:N.width/2,h.createElement(nI,{xAxisId:r,yAxisId:a,data:j,dataPointFormatter:Ure,errorBarOffset:v},h.createElement(Fre,Vi({},e,{layout:y,needClip:f,data:j,xAxisId:r,yAxisId:a,hide:s,legendType:n,minPointSize:i,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:m,isAnimationActive:g})))}function qre(e){var{layout:r,barSettings:{dataKey:a,minPointSize:s},pos:n,bandSize:i,xAxis:o,yAxis:c,xAxisTicks:u,yAxisTicks:m,stackedData:g,displayedData:f,offset:y,cells:p,parentViewBox:b,dataStartIndex:j}=e,v=r==="horizontal"?c:o,N=g?v.scale.domain():null,k=dH({numericAxis:v}),E=v.scale(k);return f.map((C,S)=>{var P,D,I,H,W,K;g?P=nH(g[S+j],N):(P=fr(C,a),Array.isArray(P)||(P=[k,P]));var B=Kte(s,iI)(P[1],S);if(r==="horizontal"){var z,[q,J]=[c.scale(P[0]),c.scale(P[1])];D=j4({axis:o,ticks:u,bandSize:i,offset:n.offset,entry:C,index:S}),I=(z=J??q)!==null&&z!==void 0?z:void 0,H=n.size;var ae=q-J;if(W=yn(ae)?0:ae,K={x:D,y:y.top,width:H,height:y.height},Math.abs(B)>0&&Math.abs(W)<Math.abs(B)){var ne=Ra(W||B)*(Math.abs(B)-Math.abs(W));I-=ne,W+=ne}}else{var[re,L]=[o.scale(P[0]),o.scale(P[1])];if(D=re,I=j4({axis:c,ticks:m,bandSize:i,offset:n.offset,entry:C,index:S}),H=L-re,W=n.size,K={x:y.left,y:I,width:y.width,height:W},Math.abs(B)>0&&Math.abs(H)<Math.abs(B)){var G=Ra(H||B)*(Math.abs(B)-Math.abs(H));H+=G}}if(D==null||I==null||H==null||W==null)return null;var T=ls(ls({},C),{},{stackedBarStart:E,x:D,y:I,width:H,height:W,value:g?P:P[1],payload:C,background:K,tooltipPosition:{x:D+H/2,y:I+W/2},parentViewBox:b},p&&p[S]&&p[S].props);return T}).filter(Boolean)}function Hre(e){var r=Zr(e,zre),a=Ua();return h.createElement(cx,{id:r.id,type:"bar"},s=>h.createElement(h.Fragment,null,h.createElement(YN,{legendPayload:Tre(r)}),h.createElement(Dre,{dataKey:r.dataKey,stroke:r.stroke,strokeWidth:r.strokeWidth,fill:r.fill,name:r.name,hide:r.hide,unit:r.unit,tooltipType:r.tooltipType}),h.createElement(QN,{type:"bar",id:s,data:void 0,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,dataKey:r.dataKey,stackId:aO(r.stackId),hide:r.hide,barSize:r.barSize,minPointSize:r.minPointSize,maxBarSize:r.maxBarSize,isPanorama:a}),h.createElement(ps,{zIndex:r.zIndex},h.createElement(Bre,Vi({},r,{id:s})))))}var Fn=h.memo(Hre,Ym);Fn.displayName="Bar";function iP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function kh(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?iP(Object(a),!0).forEach(function(s){Wre(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iP(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Wre(e,r,a){return(r=Vre(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Vre(e){var r=Kre(e,"string");return typeof r=="symbol"?r:r+""}function Kre(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Gre=(e,r)=>r,Yre=(e,r,a)=>a,Qre=(e,r,a,s)=>s,Xre=(e,r,a,s,n)=>n,Qm=we([Fm,Xre],(e,r)=>e.filter(a=>a.type==="bar").find(a=>a.id===r)),Zre=we([Qm],e=>e?.maxBarSize),Jre=(e,r,a,s,n,i)=>i,oP=(e,r,a)=>{var s=a??e;if(!Or(s))return as(s,r,0)},eae=we([Wt,Fm,Gre,Yre,Qre],(e,r,a,s,n)=>r.filter(i=>e==="horizontal"?i.xAxisId===a:i.yAxisId===s).filter(i=>i.isPanorama===n).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),tae=(e,r,a,s)=>{var n=Wt(e);return n==="horizontal"?im(e,"yAxis",a,s):im(e,"xAxis",r,s)},rae=(e,r,a)=>{var s=Wt(e);return s==="horizontal"?tA(e,"xAxis",r):tA(e,"yAxis",a)},aae=(e,r,a)=>{var s={},n=e.filter(Qf),i=e.filter(m=>m.stackId==null),o=n.reduce((m,g)=>(m[g.stackId]||(m[g.stackId]=[]),m[g.stackId].push(g),m),s),c=Object.entries(o).map(m=>{var[g,f]=m,y=f.map(b=>b.dataKey),p=oP(r,a,f[0].barSize);return{stackId:g,dataKeys:y,barSize:p}}),u=i.map(m=>{var g=[m.dataKey].filter(y=>y!=null),f=oP(r,a,m.barSize);return{stackId:void 0,dataKeys:g,barSize:f}});return[...c,...u]},sae=we([eae,EY,rae],aae),nae=(e,r,a,s,n)=>{var i,o,c=Qm(e,r,a,s,n);if(c!=null){var u=Wt(e),m=E6(e),{maxBarSize:g}=c,f=Or(g)?m:g,y,p;return u==="horizontal"?(y=ci(e,"xAxis",r,s),p=li(e,"xAxis",r,s)):(y=ci(e,"yAxis",a,s),p=li(e,"yAxis",a,s)),(i=(o=zo(y,p,!0))!==null&&o!==void 0?o:f)!==null&&i!==void 0?i:0}},oI=(e,r,a,s)=>{var n=Wt(e),i,o;return n==="horizontal"?(i=ci(e,"xAxis",r,s),o=li(e,"xAxis",r,s)):(i=ci(e,"yAxis",a,s),o=li(e,"yAxis",a,s)),zo(i,o)};function iae(e,r,a,s,n){var i=s.length;if(!(i<1)){var o=as(e,a,0,!0),c,u=[];if(Ir(s[0].barSize)){var m=!1,g=a/i,f=s.reduce((N,k)=>N+(k.barSize||0),0);f+=(i-1)*o,f>=a&&(f-=(i-1)*o,o=0),f>=a&&g>0&&(m=!0,g*=.9,f=i*g);var y=(a-f)/2>>0,p={offset:y-o,size:0};c=s.reduce((N,k)=>{var E,C={stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:p.offset+p.size+o,size:m?g:(E=k.barSize)!==null&&E!==void 0?E:0}},S=[...N,C];return p=S[S.length-1].position,S},u)}else{var b=as(r,a,0,!0);a-2*b-(i-1)*o<=0&&(o=0);var j=(a-2*b-(i-1)*o)/i;j>1&&(j>>=0);var v=Ir(n)?Math.min(j,n):j;c=s.reduce((N,k,E)=>[...N,{stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:b+(j+o)*E+(j-v)/2,size:v}}],u)}return c}}var oae=(e,r,a,s,n,i,o)=>{var c=Or(o)?r:o,u=iae(a,s,n!==i?n:i,e,c);return n!==i&&u!=null&&(u=u.map(m=>kh(kh({},m),{},{position:kh(kh({},m.position),{},{offset:m.position.offset-n/2})}))),u},lae=we([sae,E6,CY,A6,nae,oI,Zre],oae),cae=(e,r,a,s)=>ci(e,"xAxis",r,s),dae=(e,r,a,s)=>ci(e,"yAxis",a,s),uae=(e,r,a,s)=>li(e,"xAxis",r,s),mae=(e,r,a,s)=>li(e,"yAxis",a,s),gae=we([lae,Qm],(e,r)=>{if(!(e==null||r==null)){var a=e.find(s=>s.stackId===r.stackId&&r.dataKey!=null&&s.dataKeys.includes(r.dataKey));if(a!=null)return a.position}}),hae=(e,r)=>{var a=Yf(r);if(!(!e||a==null||r==null)){var{stackId:s}=r;if(s!=null){var n=e[s];if(n){var{stackedData:i}=n;if(i)return i.find(o=>o.key===a)}}}},fae=we([tae,Qm],hae),xae=we([ja,kj,cae,dae,uae,mae,gae,Wt,Mm,oI,fae,Qm,Jre],(e,r,a,s,n,i,o,c,u,m,g,f,y)=>{var{chartData:p,dataStartIndex:b,dataEndIndex:j}=u;if(!(f==null||o==null||r==null||c!=="horizontal"&&c!=="vertical"||a==null||s==null||n==null||i==null||m==null)){var{data:v}=f,N;if(v!=null&&v.length>0?N=v:N=p?.slice(b,j+1),N!=null)return qre({layout:c,barSettings:f,pos:o,parentViewBox:r,bandSize:m,xAxis:a,yAxis:s,xAxisTicks:n,yAxisTicks:i,stackedData:g,displayedData:N,offset:e,cells:y,dataStartIndex:b})}}),lI=e=>{var{chartData:r}=e,a=Ar(),s=Ua();return h.useEffect(()=>s?()=>{}:(a(hA(r)),()=>{a(hA(void 0))}),[r,a,s]),null},lP={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},cI=Ls({name:"brush",initialState:lP,reducers:{setBrushSettings(e,r){return r.payload==null?lP:r.payload}}}),{setBrushSettings:Aue}=cI.actions,pae=cI.reducer;function yae(e,r,a){return(r=vae(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function vae(e){var r=bae(e,"string");return typeof r=="symbol"?r:r+""}function bae(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class ZN{static create(r){return new ZN(r)}constructor(r){this.scale=r}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(r){var{bandAware:a,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+n}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(r)+i}default:return this.scale(r)}if(a){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}return this.scale(r)}}isInRange(r){var a=this.range(),s=a[0],n=a[a.length-1];return s<=n?r>=s&&r<=n:r>=n&&r<=s}}yae(ZN,"EPS",1e-4);function wae(e){return(e%180+180)%180}var jae=function(r){var{width:a,height:s}=r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=wae(n),o=i*Math.PI/180,c=Math.atan(s/a),u=o>c&&o<Math.PI-c?s/Math.sin(o):a/Math.cos(o);return Math.abs(u)},Nae={dots:[],areas:[],lines:[]},dI=Ls({name:"referenceElements",initialState:Nae,reducers:{addDot:(e,r)=>{e.dots.push(r.payload)},removeDot:(e,r)=>{var a=Mn(e).dots.findIndex(s=>s===r.payload);a!==-1&&e.dots.splice(a,1)},addArea:(e,r)=>{e.areas.push(r.payload)},removeArea:(e,r)=>{var a=Mn(e).areas.findIndex(s=>s===r.payload);a!==-1&&e.areas.splice(a,1)},addLine:(e,r)=>{e.lines.push(r.payload)},removeLine:(e,r)=>{var a=Mn(e).lines.findIndex(s=>s===r.payload);a!==-1&&e.lines.splice(a,1)}}}),{addDot:Pue,removeDot:Tue,addArea:Due,removeArea:Oue,addLine:Iue,removeLine:Lue}=dI.actions,kae=dI.reducer,Sae=h.createContext(void 0),Cae=e=>{var{children:r}=e,[a]=h.useState("".concat(Ku("recharts"),"-clip")),s=ux();if(s==null)return null;var{x:n,y:i,width:o,height:c}=s;return h.createElement(Sae.Provider,{value:a},h.createElement("defs",null,h.createElement("clipPath",{id:a},h.createElement("rect",{x:n,y:i,height:c,width:o}))),r)};function uI(e,r){if(r<1)return[];if(r===1)return e;for(var a=[],s=0;s<e.length;s+=r)a.push(e[s]);return a}function Eae(e,r,a){var s={width:e.width+r.width,height:e.height+r.height};return jae(s,a)}function Aae(e,r,a){var s=a==="width",{x:n,y:i,width:o,height:c}=e;return r===1?{start:s?n:i,end:s?n+o:i+c}:{start:s?n+o:i+c,end:s?n:i}}function X0(e,r,a,s,n){if(e*r<e*s||e*r>e*n)return!1;var i=a();return e*(r-e*i/2-s)>=0&&e*(r+e*i/2-n)<=0}function Pae(e,r){return uI(e,r+1)}function Tae(e,r,a,s,n){for(var i=(s||[]).slice(),{start:o,end:c}=r,u=0,m=1,g=o,f=function(){var b=s?.[u];if(b===void 0)return{v:uI(s,m)};var j=u,v,N=()=>(v===void 0&&(v=a(b,j)),v),k=b.coordinate,E=u===0||X0(e,k,N,g,c);E||(u=0,g=o,m+=1),E&&(g=k+e*(N()/2+n),u+=m)},y;m<=i.length;)if(y=f(),y)return y.v;return[]}function cP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function es(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?cP(Object(a),!0).forEach(function(s){Dae(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cP(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Dae(e,r,a){return(r=Oae(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Oae(e){var r=Iae(e,"string");return typeof r=="symbol"?r:r+""}function Iae(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Lae(e,r,a,s,n){for(var i=(s||[]).slice(),o=i.length,{start:c}=r,{end:u}=r,m=function(y){var p=i[y],b,j=()=>(b===void 0&&(b=a(p,y)),b);if(y===o-1){var v=e*(p.coordinate+e*j()/2-u);i[y]=p=es(es({},p),{},{tickCoord:v>0?p.coordinate-v*e:p.coordinate})}else i[y]=p=es(es({},p),{},{tickCoord:p.coordinate});if(p.tickCoord!=null){var N=X0(e,p.tickCoord,j,c,u);N&&(u=p.tickCoord-e*(j()/2+n),i[y]=es(es({},p),{},{isShow:!0}))}},g=o-1;g>=0;g--)m(g);return i}function Rae(e,r,a,s,n,i){var o=(s||[]).slice(),c=o.length,{start:u,end:m}=r;if(i){var g=s[c-1],f=a(g,c-1),y=e*(g.coordinate+e*f/2-m);if(o[c-1]=g=es(es({},g),{},{tickCoord:y>0?g.coordinate-y*e:g.coordinate}),g.tickCoord!=null){var p=X0(e,g.tickCoord,()=>f,u,m);p&&(m=g.tickCoord-e*(f/2+n),o[c-1]=es(es({},g),{},{isShow:!0}))}}for(var b=i?c-1:c,j=function(k){var E=o[k],C,S=()=>(C===void 0&&(C=a(E,k)),C);if(k===0){var P=e*(E.coordinate-e*S()/2-u);o[k]=E=es(es({},E),{},{tickCoord:P<0?E.coordinate-P*e:E.coordinate})}else o[k]=E=es(es({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var D=X0(e,E.tickCoord,S,u,m);D&&(u=E.tickCoord+e*(S()/2+n),o[k]=es(es({},E),{},{isShow:!0}))}},v=0;v<b;v++)j(v);return o}function JN(e,r,a){var{tick:s,ticks:n,viewBox:i,minTickGap:o,orientation:c,interval:u,tickFormatter:m,unit:g,angle:f}=e;if(!n||!n.length||!s)return[];if(Je(u)||ud.isSsr){var y;return(y=Pae(n,Je(u)?u:0))!==null&&y!==void 0?y:[]}var p=[],b=c==="top"||c==="bottom"?"width":"height",j=g&&b==="width"?Mu(g,{fontSize:r,letterSpacing:a}):{width:0,height:0},v=(E,C)=>{var S=typeof m=="function"?m(E.value,C):E.value;return b==="width"?Eae(Mu(S,{fontSize:r,letterSpacing:a}),j,f):Mu(S,{fontSize:r,letterSpacing:a})[b]},N=n.length>=2?Ra(n[1].coordinate-n[0].coordinate):1,k=Aae(i,N,b);return u==="equidistantPreserveStart"?Tae(N,k,v,n,o):(u==="preserveStart"||u==="preserveStartEnd"?p=Rae(N,k,v,n,o,u==="preserveStartEnd"):p=Lae(N,k,v,n,o),p.filter(E=>E.isShow))}var Mae=e=>{var{ticks:r,label:a,labelGapWithTick:s=5,tickSize:n=0,tickMargin:i=0}=e,o=0;if(r){Array.from(r).forEach(g=>{if(g){var f=g.getBoundingClientRect();f.width>o&&(o=f.width)}});var c=a?a.getBoundingClientRect().width:0,u=n+i,m=o+u+c+(a?s:0);return Math.round(m)}return 0},_ae=["axisLine","width","height","className","hide","ticks","axisType"];function $ae(e,r){if(e==null)return{};var a,s,n=Uae(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Uae(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function Wl(){return Wl=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Wl.apply(null,arguments)}function dP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function la(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?dP(Object(a),!0).forEach(function(s){Fae(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dP(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Fae(e,r,a){return(r=zae(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function zae(e){var r=Bae(e,"string");return typeof r=="symbol"?r:r+""}function Bae(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var _i={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:sa.axis};function qae(e){var{x:r,y:a,width:s,height:n,orientation:i,mirror:o,axisLine:c,otherSvgProps:u}=e;if(!c)return null;var m=la(la(la({},u),fs(c)),{},{fill:"none"});if(i==="top"||i==="bottom"){var g=+(i==="top"&&!o||i==="bottom"&&o);m=la(la({},m),{},{x1:r,y1:a+g*n,x2:r+s,y2:a+g*n})}else{var f=+(i==="left"&&!o||i==="right"&&o);m=la(la({},m),{},{x1:r+f*s,y1:a,x2:r+f*s,y2:a+n})}return h.createElement("line",Wl({},m,{className:tr("recharts-cartesian-axis-line",zl(c,"className"))}))}function Hae(e,r,a,s,n,i,o,c,u){var m,g,f,y,p,b,j=c?-1:1,v=e.tickSize||o,N=Je(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":m=g=e.coordinate,y=a+ +!c*n,f=y-j*v,b=f-j*u,p=N;break;case"left":f=y=e.coordinate,g=r+ +!c*s,m=g-j*v,p=m-j*u,b=N;break;case"right":f=y=e.coordinate,g=r+ +c*s,m=g+j*v,p=m+j*u,b=N;break;default:m=g=e.coordinate,y=a+ +c*n,f=y+j*v,b=f+j*u,p=N;break}return{line:{x1:m,y1:f,x2:g,y2:y},tick:{x:p,y:b}}}function Wae(e,r){switch(e){case"left":return r?"start":"end";case"right":return r?"end":"start";default:return"middle"}}function Vae(e,r){switch(e){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}function Kae(e){var{option:r,tickProps:a,value:s}=e,n,i=tr(a.className,"recharts-cartesian-axis-tick-value");if(h.isValidElement(r))n=h.cloneElement(r,la(la({},a),{},{className:i}));else if(typeof r=="function")n=r(la(la({},a),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof r!="boolean"&&(o=tr(o,r?.className)),n=h.createElement(sx,Wl({},a,{className:o}),s)}return n}var Gae=h.forwardRef((e,r)=>{var{ticks:a=[],tick:s,tickLine:n,stroke:i,tickFormatter:o,unit:c,padding:u,tickTextProps:m,orientation:g,mirror:f,x:y,y:p,width:b,height:j,tickSize:v,tickMargin:N,fontSize:k,letterSpacing:E,getTicksConfig:C,events:S,axisType:P}=e,D=JN(la(la({},C),{},{ticks:a}),k,E),I=Wae(g,f),H=Vae(g,f),W=fs(C),K=Fl(s),B={};typeof n=="object"&&(B=n);var z=la(la({},W),{},{fill:"none"},B),q=D.map(ne=>la({entry:ne},Hae(ne,y,p,b,j,g,v,f,N))),J=q.map(ne=>{var{entry:re,line:L}=ne;return h.createElement(Xr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(re.value,"-").concat(re.coordinate,"-").concat(re.tickCoord)},n&&h.createElement("line",Wl({},z,L,{className:tr("recharts-cartesian-axis-tick-line",zl(n,"className"))})))}),ae=q.map((ne,re)=>{var{entry:L,tick:G}=ne,T=la(la(la(la({textAnchor:I,verticalAnchor:H},W),{},{stroke:"none",fill:i},K),G),{},{index:re,payload:L,visibleTicksCount:D.length,tickFormatter:o,padding:u},m);return h.createElement(Xr,Wl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},Cm(S,L,re)),s&&h.createElement(Kae,{option:s,tickProps:T,value:"".concat(typeof o=="function"?o(L.value,re):L.value).concat(c||"")}))});return h.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},ae.length>0&&h.createElement(ps,{zIndex:sa.label},h.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:r},ae)),J.length>0&&h.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},J))}),Yae=h.forwardRef((e,r)=>{var{axisLine:a,width:s,height:n,className:i,hide:o,ticks:c,axisType:u}=e,m=$ae(e,_ae),[g,f]=h.useState(""),[y,p]=h.useState(""),b=h.useRef(null);h.useImperativeHandle(r,()=>({getCalculatedWidth:()=>{var v;return Mae({ticks:b.current,label:(v=e.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=h.useCallback(v=>{if(v){var N=v.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=N;var k=N[0];if(k){var E=window.getComputedStyle(k),C=E.fontSize,S=E.letterSpacing;(C!==g||S!==y)&&(f(C),p(S))}}},[g,y]);return o||s!=null&&s<=0||n!=null&&n<=0?null:h.createElement(ps,{zIndex:e.zIndex},h.createElement(Xr,{className:tr("recharts-cartesian-axis",i)},h.createElement(qae,{x:e.x,y:e.y,width:s,height:n,orientation:e.orientation,mirror:e.mirror,axisLine:a,otherSvgProps:fs(e)}),h.createElement(Gae,{ref:j,axisType:u,events:m,fontSize:g,getTicksConfig:e,height:e.height,letterSpacing:y,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:c,unit:e.unit,width:e.width,x:e.x,y:e.y}),h.createElement(wJ,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},h.createElement(DJ,{label:e.label,labelRef:e.labelRef}),e.children)))}),ek=h.forwardRef((e,r)=>{var a=Zr(e,_i);return h.createElement(Yae,Wl({},a,{ref:r}))});ek.displayName="CartesianAxis";var Qae=["x1","y1","x2","y2","key"],Xae=["offset"],Zae=["xAxisId","yAxisId"],Jae=["xAxisId","yAxisId"];function uP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function ts(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?uP(Object(a),!0).forEach(function(s){ese(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):uP(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ese(e,r,a){return(r=tse(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function tse(e){var r=rse(e,"string");return typeof r=="symbol"?r:r+""}function rse(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function kl(){return kl=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},kl.apply(null,arguments)}function Z0(e,r){if(e==null)return{};var a,s,n=ase(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function ase(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var sse=e=>{var{fill:r}=e;if(!r||r==="none")return null;var{fillOpacity:a,x:s,y:n,width:i,height:o,ry:c}=e;return h.createElement("rect",{x:s,y:n,ry:c,width:i,height:o,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function mI(e){var{option:r,lineItemProps:a}=e,s;if(h.isValidElement(r))s=h.cloneElement(r,a);else if(typeof r=="function")s=r(a);else{var n,{x1:i,y1:o,x2:c,y2:u,key:m}=a,g=Z0(a,Qae),f=(n=fs(g))!==null&&n!==void 0?n:{},{offset:y}=f,p=Z0(f,Xae);s=h.createElement("line",kl({},p,{x1:i,y1:o,x2:c,y2:u,fill:"none",key:m}))}return s}function nse(e){var{x:r,width:a,horizontal:s=!0,horizontalPoints:n}=e;if(!s||!n||!n.length)return null;var{xAxisId:i,yAxisId:o}=e,c=Z0(e,Zae),u=n.map((m,g)=>{var f=ts(ts({},c),{},{x1:r,y1:m,x2:r+a,y2:m,key:"line-".concat(g),index:g});return h.createElement(mI,{key:"line-".concat(g),option:s,lineItemProps:f})});return h.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function ise(e){var{y:r,height:a,vertical:s=!0,verticalPoints:n}=e;if(!s||!n||!n.length)return null;var{xAxisId:i,yAxisId:o}=e,c=Z0(e,Jae),u=n.map((m,g)=>{var f=ts(ts({},c),{},{x1:m,y1:r,x2:m,y2:r+a,key:"line-".concat(g),index:g});return h.createElement(mI,{option:s,lineItemProps:f,key:"line-".concat(g)})});return h.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function ose(e){var{horizontalFill:r,fillOpacity:a,x:s,y:n,width:i,height:o,horizontalPoints:c,horizontal:u=!0}=e;if(!u||!r||!r.length||c==null)return null;var m=c.map(f=>Math.round(f+n-n)).sort((f,y)=>f-y);n!==m[0]&&m.unshift(0);var g=m.map((f,y)=>{var p=!m[y+1],b=p?n+o-f:m[y+1]-f;if(b<=0)return null;var j=y%r.length;return h.createElement("rect",{key:"react-".concat(y),y:f,x:s,height:b,width:i,stroke:"none",fill:r[j],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},g)}function lse(e){var{vertical:r=!0,verticalFill:a,fillOpacity:s,x:n,y:i,width:o,height:c,verticalPoints:u}=e;if(!r||!a||!a.length)return null;var m=u.map(f=>Math.round(f+n-n)).sort((f,y)=>f-y);n!==m[0]&&m.unshift(0);var g=m.map((f,y)=>{var p=!m[y+1],b=p?n+o-f:m[y+1]-f;if(b<=0)return null;var j=y%a.length;return h.createElement("rect",{key:"react-".concat(y),x:f,y:i,width:b,height:c,stroke:"none",fill:a[j],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},g)}var cse=(e,r)=>{var{xAxis:a,width:s,height:n,offset:i}=e;return tO(JN(ts(ts(ts({},_i),a),{},{ticks:rO(a),viewBox:{x:0,y:0,width:s,height:n}})),i.left,i.left+i.width,r)},dse=(e,r)=>{var{yAxis:a,width:s,height:n,offset:i}=e;return tO(JN(ts(ts(ts({},_i),a),{},{ticks:rO(a),viewBox:{x:0,y:0,width:s,height:n}})),i.top,i.top+i.height,r)},use={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:sa.grid};function us(e){var r=Cj(),a=Ej(),s=uO(),n=ts(ts({},Zr(e,use)),{},{x:Je(e.x)?e.x:s.left,y:Je(e.y)?e.y:s.top,width:Je(e.width)?e.width:s.width,height:Je(e.height)?e.height:s.height}),{xAxisId:i,yAxisId:o,x:c,y:u,width:m,height:g,syncWithTicks:f,horizontalValues:y,verticalValues:p}=n,b=Ua(),j=at(H=>rA(H,"xAxis",i,b)),v=at(H=>rA(H,"yAxis",o,b));if(!ii(m)||!ii(g)||!Je(c)||!Je(u))return null;var N=n.verticalCoordinatesGenerator||cse,k=n.horizontalCoordinatesGenerator||dse,{horizontalPoints:E,verticalPoints:C}=n;if((!E||!E.length)&&typeof k=="function"){var S=y&&y.length,P=k({yAxis:v?ts(ts({},v),{},{ticks:S?y:v.ticks}):void 0,width:r??m,height:a??g,offset:s},S?!0:f);N0(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(E=P)}if((!C||!C.length)&&typeof N=="function"){var D=p&&p.length,I=N({xAxis:j?ts(ts({},j),{},{ticks:D?p:j.ticks}):void 0,width:r??m,height:a??g,offset:s},D?!0:f);N0(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(C=I)}return h.createElement(ps,{zIndex:n.zIndex},h.createElement("g",{className:"recharts-cartesian-grid"},h.createElement(sse,{fill:n.fill,fillOpacity:n.fillOpacity,x:n.x,y:n.y,width:n.width,height:n.height,ry:n.ry}),h.createElement(ose,kl({},n,{horizontalPoints:E})),h.createElement(lse,kl({},n,{verticalPoints:C})),h.createElement(nse,kl({},n,{offset:s,horizontalPoints:E,xAxis:j,yAxis:v})),h.createElement(ise,kl({},n,{offset:s,verticalPoints:C,xAxis:j,yAxis:v}))))}us.displayName="CartesianGrid";var gI=(e,r,a,s)=>ci(e,"xAxis",r,s),hI=(e,r,a,s)=>li(e,"xAxis",r,s),fI=(e,r,a,s)=>ci(e,"yAxis",a,s),xI=(e,r,a,s)=>li(e,"yAxis",a,s),mse=we([Wt,gI,fI,hI,xI],(e,r,a,s,n)=>hi(e,"xAxis")?zo(r,s,!1):zo(a,n,!1)),gse=(e,r,a,s,n)=>n;function hse(e){return e.type==="line"}var fse=we([Fm,gse],(e,r)=>e.filter(hse).find(a=>a.id===r)),xse=we([Wt,gI,fI,hI,xI,fse,mse,Mm],(e,r,a,s,n,i,o,c)=>{var{chartData:u,dataStartIndex:m,dataEndIndex:g}=c;if(!(i==null||r==null||a==null||s==null||n==null||s.length===0||n.length===0||o==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:y}=i,p;if(y!=null&&y.length>0?p=y:p=u?.slice(m,g+1),p!=null)return Mse({layout:e,xAxis:r,yAxis:a,xAxisTicks:s,yAxisTicks:n,dataKey:f,bandSize:o,displayedData:p})}});function pI(e){var r=Fl(e),a=3,s=2;if(r!=null){var{r:n,strokeWidth:i}=r,o=Number(n),c=Number(i);return(Number.isNaN(o)||o<0)&&(o=a),(Number.isNaN(c)||c<0)&&(c=s),{r:o,strokeWidth:c}}return{r:a,strokeWidth:s}}var pse=["id"],yse=["type","layout","connectNulls","needClip","shape"],vse=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function lm(){return lm=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},lm.apply(null,arguments)}function mP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function Xn(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?mP(Object(a),!0).forEach(function(s){bse(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mP(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function bse(e,r,a){return(r=wse(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function wse(e){var r=jse(e,"string");return typeof r=="symbol"?r:r+""}function jse(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function tk(e,r){if(e==null)return{};var a,s,n=Nse(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Nse(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var kse=e=>{var{dataKey:r,name:a,stroke:s,legendType:n,hide:i}=e;return[{inactive:i,dataKey:r,type:n,color:s,value:Go(a,r),payload:e}]},Sse=h.memo(e=>{var{dataKey:r,data:a,stroke:s,strokeWidth:n,fill:i,name:o,hide:c,unit:u,tooltipType:m}=e,g={dataDefinedOnItem:a,positions:void 0,settings:{stroke:s,strokeWidth:n,fill:i,dataKey:r,nameKey:void 0,name:Go(o,r),hide:c,type:m,color:s,unit:u}};return h.createElement(lx,{tooltipEntrySettings:g})}),yI=(e,r)=>"".concat(r,"px ").concat(e-r,"px");function Cse(e,r){for(var a=e.length%2!==0?[...e,0]:e,s=[],n=0;n<r;++n)s=[...s,...a];return s}var Ese=(e,r,a)=>{var s=a.reduce((f,y)=>f+y);if(!s)return yI(r,e);for(var n=Math.floor(e/s),i=e%s,o=r-e,c=[],u=0,m=0;u<a.length;m+=a[u],++u)if(m+a[u]>i){c=[...a.slice(0,u),i-m];break}var g=c.length%2===0?[0,o]:[o];return[...Cse(a,n),...c,...g].map(f=>"".concat(f,"px")).join(", ")};function Ase(e){var{clipPathId:r,points:a,props:s}=e,{dot:n,dataKey:i,needClip:o}=s,{id:c}=s,u=tk(s,pse),m=fs(u);return h.createElement(rI,{points:a,dot:n,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:m,needClip:o,clipPathId:r})}function Pse(e){var{showLabels:r,children:a,points:s}=e,n=h.useMemo(()=>s?.map(i=>{var o,c,u={x:(o=i.x)!==null&&o!==void 0?o:0,y:(c=i.y)!==null&&c!==void 0?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Xn(Xn({},u),{},{value:i.value,payload:i.payload,viewBox:u,parentViewBox:void 0,fill:void 0})}),[s]);return h.createElement(FN,{value:r?n:void 0},a)}function gP(e){var{clipPathId:r,pathRef:a,points:s,strokeDasharray:n,props:i}=e,{type:o,layout:c,connectNulls:u,needClip:m,shape:g}=i,f=tk(i,yse),y=Xn(Xn({},ss(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:m?"url(#clipPath-".concat(r,")"):void 0,points:s,type:o,layout:c,connectNulls:u,strokeDasharray:n??i.strokeDasharray});return h.createElement(h.Fragment,null,s?.length>1&&h.createElement(WN,lm({shapeType:"curve",option:g},y,{pathRef:a})),h.createElement(Ase,{points:s,clipPathId:r,props:i}))}function Tse(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function Dse(e){var{clipPathId:r,props:a,pathRef:s,previousPointsRef:n,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:c,isAnimationActive:u,animationBegin:m,animationDuration:g,animationEasing:f,animateNewValues:y,width:p,height:b,onAnimationEnd:j,onAnimationStart:v}=a,N=n.current,k=gd(o,"recharts-line-"),E=h.useRef(k),[C,S]=h.useState(!1),P=!C,D=h.useCallback(()=>{typeof j=="function"&&j(),S(!1)},[j]),I=h.useCallback(()=>{typeof v=="function"&&v(),S(!0)},[v]),H=Tse(s.current),W=h.useRef(0);E.current!==k&&(W.current=i.current,E.current=k);var K=W.current;return h.createElement(Pse,{points:o,showLabels:P},a.children,h.createElement(md,{animationId:k,begin:m,duration:g,isActive:u,easing:f,onAnimationEnd:D,onAnimationStart:I,key:k},B=>{var z=dr(K,H+K,B),q=Math.min(z,H),J;if(u)if(c){var ae="".concat(c).split(/[,\s]+/gim).map(L=>parseFloat(L));J=Ese(q,H,ae)}else J=yI(H,q);else J=c==null?void 0:String(c);if(B>0&&H>0&&(n.current=o,i.current=Math.max(i.current,q)),N){var ne=N.length/o.length,re=B===1?o:o.map((L,G)=>{var T=Math.floor(G*ne);if(N[T]){var _=N[T];return Xn(Xn({},L),{},{x:dr(_.x,L.x,B),y:dr(_.y,L.y,B)})}return y?Xn(Xn({},L),{},{x:dr(p*2,L.x,B),y:dr(b/2,L.y,B)}):Xn(Xn({},L),{},{x:L.x,y:L.y})});return n.current=re,h.createElement(gP,{props:a,points:re,clipPathId:r,pathRef:s,strokeDasharray:J})}return h.createElement(gP,{props:a,points:o,clipPathId:r,pathRef:s,strokeDasharray:J})}),h.createElement(nx,{label:a.label}))}function Ose(e){var{clipPathId:r,props:a}=e,s=h.useRef(null),n=h.useRef(0),i=h.useRef(null);return h.createElement(Dse,{props:a,clipPathId:r,previousPointsRef:s,longestAnimatedLengthRef:n,pathRef:i})}var Ise=(e,r)=>{var a,s;return{x:(a=e.x)!==null&&a!==void 0?a:void 0,y:(s=e.y)!==null&&s!==void 0?s:void 0,value:e.value,errorVal:fr(e.payload,r)}};class Lse extends h.Component{render(){var{hide:r,dot:a,points:s,className:n,xAxisId:i,yAxisId:o,top:c,left:u,width:m,height:g,id:f,needClip:y,zIndex:p}=this.props;if(r)return null;var b=tr("recharts-line",n),j=f,{r:v,strokeWidth:N}=pI(a),k=HN(a),E=v*2+N,C=y?"url(#clipPath-".concat(k?"":"dots-").concat(j,")"):void 0;return h.createElement(ps,{zIndex:p},h.createElement(Xr,{className:b},y&&h.createElement("defs",null,h.createElement(XN,{clipPathId:j,xAxisId:i,yAxisId:o}),!k&&h.createElement("clipPath",{id:"clipPath-dots-".concat(j)},h.createElement("rect",{x:u-E/2,y:c-E/2,width:m+E,height:g+E}))),h.createElement(nI,{xAxisId:i,yAxisId:o,data:s,dataPointFormatter:Ise,errorBarOffset:0},h.createElement(Ose,{props:this.props,clipPathId:j}))),h.createElement(Cw,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:C}))}}var vI={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:sa.line,type:"linear"};function Rse(e){var r=Zr(e,vI),{activeDot:a,animateNewValues:s,animationBegin:n,animationDuration:i,animationEasing:o,connectNulls:c,dot:u,hide:m,isAnimationActive:g,label:f,legendType:y,xAxisId:p,yAxisId:b,id:j}=r,v=tk(r,vse),{needClip:N}=mx(p,b),k=ux(),E=Yl(),C=Ua(),S=at(W=>xse(W,p,b,C,j));if(E!=="horizontal"&&E!=="vertical"||S==null||k==null)return null;var{height:P,width:D,x:I,y:H}=k;return h.createElement(Lse,lm({},v,{id:j,connectNulls:c,dot:u,activeDot:a,animateNewValues:s,animationBegin:n,animationDuration:i,animationEasing:o,isAnimationActive:g,hide:m,label:f,legendType:y,xAxisId:p,yAxisId:b,points:S,layout:E,height:P,width:D,left:I,top:H,needClip:N}))}function Mse(e){var{layout:r,xAxis:a,yAxis:s,xAxisTicks:n,yAxisTicks:i,dataKey:o,bandSize:c,displayedData:u}=e;return u.map((m,g)=>{var f=fr(m,o);if(r==="horizontal"){var y=j0({axis:a,ticks:n,bandSize:c,entry:m,index:g}),p=Or(f)?null:s.scale(f);return{x:y,y:p,value:f,payload:m}}var b=Or(f)?null:a.scale(f),j=j0({axis:s,ticks:i,bandSize:c,entry:m,index:g});return b==null||j==null?null:{x:b,y:j,value:f,payload:m}}).filter(Boolean)}function _se(e){var r=Zr(e,vI),a=Ua();return h.createElement(cx,{id:r.id,type:"line"},s=>h.createElement(h.Fragment,null,h.createElement(YN,{legendPayload:kse(r)}),h.createElement(Sse,{dataKey:r.dataKey,data:r.data,stroke:r.stroke,strokeWidth:r.strokeWidth,fill:r.fill,name:r.name,hide:r.hide,unit:r.unit,tooltipType:r.tooltipType}),h.createElement(QN,{type:"line",id:s,data:r.data,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,dataKey:r.dataKey,hide:r.hide,isPanorama:a}),h.createElement(Rse,lm({},r,{id:s}))))}var Ki=h.memo(_se,Ym);Ki.displayName="Line";var bI=(e,r,a,s)=>ci(e,"xAxis",r,s),wI=(e,r,a,s)=>li(e,"xAxis",r,s),jI=(e,r,a,s)=>ci(e,"yAxis",a,s),NI=(e,r,a,s)=>li(e,"yAxis",a,s),$se=we([Wt,bI,jI,wI,NI],(e,r,a,s,n)=>hi(e,"xAxis")?zo(r,s,!1):zo(a,n,!1)),Use=(e,r,a,s,n)=>n,kI=we([Fm,Use],(e,r)=>e.filter(a=>a.type==="area").find(a=>a.id===r)),Fse=(e,r,a,s,n)=>{var i,o=kI(e,r,a,s,n);if(o!=null){var c=Wt(e),u=hi(c,"xAxis"),m;if(u?m=im(e,"yAxis",a,s):m=im(e,"xAxis",r,s),m!=null){var{stackId:g}=o,f=Yf(o);if(!(g==null||f==null)){var y=(i=m[g])===null||i===void 0?void 0:i.stackedData;return y?.find(p=>p.key===f)}}}},zse=we([Wt,bI,jI,wI,NI,Fse,Mm,$se,kI,AY],(e,r,a,s,n,i,o,c,u,m)=>{var{chartData:g,dataStartIndex:f,dataEndIndex:y}=o;if(!(u==null||e!=="horizontal"&&e!=="vertical"||r==null||a==null||s==null||n==null||s.length===0||n.length===0||c==null)){var{data:p}=u,b;if(p&&p.length>0?b=p:b=g?.slice(f,y+1),b!=null)return ine({layout:e,xAxis:r,yAxis:a,xAxisTicks:s,yAxisTicks:n,dataStartIndex:f,areaSettings:u,stackedData:i,displayedData:b,chartBaseValue:m,bandSize:c})}}),Bse=["id"],qse=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Rl(){return Rl=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Rl.apply(null,arguments)}function SI(e,r){if(e==null)return{};var a,s,n=Hse(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Hse(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function hP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function _c(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?hP(Object(a),!0).forEach(function(s){Wse(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hP(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Wse(e,r,a){return(r=Vse(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Vse(e){var r=Kse(e,"string");return typeof r=="symbol"?r:r+""}function Kse(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function J0(e,r){return e&&e!=="none"?e:r}var Gse=e=>{var{dataKey:r,name:a,stroke:s,fill:n,legendType:i,hide:o}=e;return[{inactive:o,dataKey:r,type:i,color:J0(s,n),value:Go(a,r),payload:e}]},Yse=h.memo(e=>{var{dataKey:r,data:a,stroke:s,strokeWidth:n,fill:i,name:o,hide:c,unit:u,tooltipType:m}=e,g={dataDefinedOnItem:a,positions:void 0,settings:{stroke:s,strokeWidth:n,fill:i,dataKey:r,nameKey:void 0,name:Go(o,r),hide:c,type:m,color:J0(s,i),unit:u}};return h.createElement(lx,{tooltipEntrySettings:g})});function Qse(e){var{clipPathId:r,points:a,props:s}=e,{needClip:n,dot:i,dataKey:o}=s,c=fs(s);return h.createElement(rI,{points:a,dot:i,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:c,needClip:n,clipPathId:r})}function Xse(e){var{showLabels:r,children:a,points:s}=e,n=s.map(i=>{var o,c,u={x:(o=i.x)!==null&&o!==void 0?o:0,y:(c=i.y)!==null&&c!==void 0?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return _c(_c({},u),{},{value:i.value,payload:i.payload,parentViewBox:void 0,viewBox:u,fill:void 0})});return h.createElement(FN,{value:r?n:void 0},a)}function fP(e){var{points:r,baseLine:a,needClip:s,clipPathId:n,props:i}=e,{layout:o,type:c,stroke:u,connectNulls:m,isRange:g}=i,{id:f}=i,y=SI(i,Bse),p=fs(y),b=ss(y);return h.createElement(h.Fragment,null,r?.length>1&&h.createElement(Xr,{clipPath:s?"url(#clipPath-".concat(n,")"):void 0},h.createElement(zc,Rl({},b,{id:f,points:r,connectNulls:m,type:c,baseLine:a,layout:o,stroke:"none",className:"recharts-area-area"})),u!=="none"&&h.createElement(zc,Rl({},p,{className:"recharts-area-curve",layout:o,type:c,connectNulls:m,fill:"none",points:r})),u!=="none"&&g&&h.createElement(zc,Rl({},p,{className:"recharts-area-curve",layout:o,type:c,connectNulls:m,fill:"none",points:a}))),h.createElement(Qse,{points:r,props:y,clipPathId:n}))}function Zse(e){var{alpha:r,baseLine:a,points:s,strokeWidth:n}=e,i=s[0].y,o=s[s.length-1].y;if(!Ir(i)||!Ir(o))return null;var c=r*Math.abs(i-o),u=Math.max(...s.map(m=>m.x||0));return Je(a)?u=Math.max(a,u):a&&Array.isArray(a)&&a.length&&(u=Math.max(...a.map(m=>m.x||0),u)),Je(u)?h.createElement("rect",{x:0,y:i<o?i:i-c,width:u+(n?parseInt("".concat(n),10):1),height:Math.floor(c)}):null}function Jse(e){var{alpha:r,baseLine:a,points:s,strokeWidth:n}=e,i=s[0].x,o=s[s.length-1].x;if(!Ir(i)||!Ir(o))return null;var c=r*Math.abs(i-o),u=Math.max(...s.map(m=>m.y||0));return Je(a)?u=Math.max(a,u):a&&Array.isArray(a)&&a.length&&(u=Math.max(...a.map(m=>m.y||0),u)),Je(u)?h.createElement("rect",{x:i<o?i:i-c,y:0,width:c,height:Math.floor(u+(n?parseInt("".concat(n),10):1))}):null}function ene(e){var{alpha:r,layout:a,points:s,baseLine:n,strokeWidth:i}=e;return a==="vertical"?h.createElement(Zse,{alpha:r,points:s,baseLine:n,strokeWidth:i}):h.createElement(Jse,{alpha:r,points:s,baseLine:n,strokeWidth:i})}function tne(e){var{needClip:r,clipPathId:a,props:s,previousPointsRef:n,previousBaselineRef:i}=e,{points:o,baseLine:c,isAnimationActive:u,animationBegin:m,animationDuration:g,animationEasing:f,onAnimationStart:y,onAnimationEnd:p}=s,b=h.useMemo(()=>({points:o,baseLine:c}),[o,c]),j=gd(b,"recharts-area-"),v=VH(),[N,k]=h.useState(!1),E=!N,C=h.useCallback(()=>{typeof p=="function"&&p(),k(!1)},[p]),S=h.useCallback(()=>{typeof y=="function"&&y(),k(!0)},[y]);if(v==null)return null;var P=n.current,D=i.current;return h.createElement(Xse,{showLabels:E,points:o},s.children,h.createElement(md,{animationId:j,begin:m,duration:g,isActive:u,easing:f,onAnimationEnd:C,onAnimationStart:S,key:j},I=>{if(P){var H=P.length/o.length,W=I===1?o:o.map((B,z)=>{var q=Math.floor(z*H);if(P[q]){var J=P[q];return _c(_c({},B),{},{x:dr(J.x,B.x,I),y:dr(J.y,B.y,I)})}return B}),K;return Je(c)?K=dr(D,c,I):Or(c)||yn(c)?K=dr(D,0,I):K=c.map((B,z)=>{var q=Math.floor(z*H);if(Array.isArray(D)&&D[q]){var J=D[q];return _c(_c({},B),{},{x:dr(J.x,B.x,I),y:dr(J.y,B.y,I)})}return B}),I>0&&(n.current=W,i.current=K),h.createElement(fP,{points:W,baseLine:K,needClip:r,clipPathId:a,props:s})}return I>0&&(n.current=o,i.current=c),h.createElement(Xr,null,u&&h.createElement("defs",null,h.createElement("clipPath",{id:"animationClipPath-".concat(a)},h.createElement(ene,{alpha:I,points:o,baseLine:c,layout:v,strokeWidth:s.strokeWidth}))),h.createElement(Xr,{clipPath:"url(#animationClipPath-".concat(a,")")},h.createElement(fP,{points:o,baseLine:c,needClip:r,clipPathId:a,props:s})))}),h.createElement(nx,{label:s.label}))}function rne(e){var{needClip:r,clipPathId:a,props:s}=e,n=h.useRef(null),i=h.useRef();return h.createElement(tne,{needClip:r,clipPathId:a,props:s,previousPointsRef:n,previousBaselineRef:i})}class ane extends h.PureComponent{render(){var{hide:r,dot:a,points:s,className:n,top:i,left:o,needClip:c,xAxisId:u,yAxisId:m,width:g,height:f,id:y,baseLine:p,zIndex:b}=this.props;if(r)return null;var j=tr("recharts-area",n),v=y,{r:N,strokeWidth:k}=pI(a),E=HN(a),C=N*2+k,S=c?"url(#clipPath-".concat(E?"":"dots-").concat(v,")"):void 0;return h.createElement(ps,{zIndex:b},h.createElement(Xr,{className:j},c&&h.createElement("defs",null,h.createElement(XN,{clipPathId:v,xAxisId:u,yAxisId:m}),!E&&h.createElement("clipPath",{id:"clipPath-dots-".concat(v)},h.createElement("rect",{x:o-C/2,y:i-C/2,width:g+C,height:f+C}))),h.createElement(rne,{needClip:c,clipPathId:v,props:this.props})),h.createElement(Cw,{points:s,mainColor:J0(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:S}),this.props.isRange&&Array.isArray(p)&&h.createElement(Cw,{points:p,mainColor:J0(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:S}))}}var CI={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:sa.area};function sne(e){var r,a=Zr(e,CI),{activeDot:s,animationBegin:n,animationDuration:i,animationEasing:o,connectNulls:c,dot:u,fill:m,fillOpacity:g,hide:f,isAnimationActive:y,legendType:p,stroke:b,xAxisId:j,yAxisId:v}=a,N=SI(a,qse),k=Yl(),E=A5(),{needClip:C}=mx(j,v),S=Ua(),{points:P,isRange:D,baseLine:I}=(r=at(q=>zse(q,j,v,S,e.id)))!==null&&r!==void 0?r:{},H=ux();if(k!=="horizontal"&&k!=="vertical"||H==null||E!=="AreaChart"&&E!=="ComposedChart")return null;var{height:W,width:K,x:B,y:z}=H;return!P||!P.length?null:h.createElement(ane,Rl({},N,{activeDot:s,animationBegin:n,animationDuration:i,animationEasing:o,baseLine:I,connectNulls:c,dot:u,fill:m,fillOpacity:g,height:W,hide:f,layout:k,isAnimationActive:y==="auto"?!ud.isSsr:y,isRange:D,legendType:p,needClip:C,points:P,stroke:b,width:K,left:B,top:z,xAxisId:j,yAxisId:v}))}var nne=(e,r,a,s,n)=>{var i=a??r;if(Je(i))return i;var o=e==="horizontal"?n:s,c=o.scale.domain();if(o.type==="number"){var u=Math.max(c[0],c[1]),m=Math.min(c[0],c[1]);return i==="dataMin"?m:i==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return i==="dataMin"?c[0]:i==="dataMax"?c[1]:c[0]};function ine(e){var{areaSettings:{connectNulls:r,baseValue:a,dataKey:s},stackedData:n,layout:i,chartBaseValue:o,xAxis:c,yAxis:u,displayedData:m,dataStartIndex:g,xAxisTicks:f,yAxisTicks:y,bandSize:p}=e,b=n&&n.length,j=nne(i,o,a,c,u),v=i==="horizontal",N=!1,k=m.map((C,S)=>{var P;b?P=n[g+S]:(P=fr(C,s),Array.isArray(P)?N=!0:P=[j,P]);var D=P[1]==null||b&&!r&&fr(C,s)==null;return v?{x:j0({axis:c,ticks:f,bandSize:p,entry:C,index:S}),y:D?null:u.scale(P[1]),value:P,payload:C}:{x:D?null:c.scale(P[1]),y:j0({axis:u,ticks:y,bandSize:p,entry:C,index:S}),value:P,payload:C}}),E;return b||N?E=k.map(C=>{var S=Array.isArray(C.value)?C.value[0]:null;return v?{x:C.x,y:S!=null&&C.y!=null?u.scale(S):null,payload:C.payload}:{x:S!=null?c.scale(S):null,y:C.y,payload:C.payload}}):E=v?u.scale(j):c.scale(j),{points:k,baseLine:E,isRange:N}}function one(e){var r=Zr(e,CI),a=Ua();return h.createElement(cx,{id:r.id,type:"area"},s=>h.createElement(h.Fragment,null,h.createElement(YN,{legendPayload:Gse(r)}),h.createElement(Yse,{dataKey:r.dataKey,data:r.data,stroke:r.stroke,strokeWidth:r.strokeWidth,fill:r.fill,name:r.name,hide:r.hide,unit:r.unit,tooltipType:r.tooltipType}),h.createElement(QN,{type:"area",id:s,data:r.data,dataKey:r.dataKey,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,stackId:aO(r.stackId),hide:r.hide,barSize:void 0,baseValue:r.baseValue,isPanorama:a,connectNulls:r.connectNulls}),h.createElement(sne,Rl({},r,{id:s}))))}var td=h.memo(one,Ym);td.displayName="Area";var lne=["domain","range"],cne=["domain","range"];function xP(e,r){if(e==null)return{};var a,s,n=dne(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function dne(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function pP(e,r){return e===r?!0:Array.isArray(e)&&e.length===2&&Array.isArray(r)&&r.length===2?e[0]===r[0]&&e[1]===r[1]:!1}function EI(e,r){if(e===r)return!0;var{domain:a,range:s}=e,n=xP(e,lne),{domain:i,range:o}=r,c=xP(r,cne);return!pP(a,i)||!pP(s,o)?!1:Ym(n,c)}var une=["dangerouslySetInnerHTML","ticks"],mne=["id"];function Aw(){return Aw=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Aw.apply(null,arguments)}function yP(e,r){if(e==null)return{};var a,s,n=gne(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function gne(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function hne(e){var r=Ar(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?r(Nte(e)):a.current!==e&&r(kte({prev:a.current,next:e})),a.current=e},[e,r]),h.useLayoutEffect(()=>()=>{a.current&&(r(Ste(a.current)),a.current=null)},[r]),null}var fne=e=>{var{xAxisId:r,className:a}=e,s=at(kj),n=Ua(),i="xAxis",o=at(v=>bd(v,i,r,n)),c=at(v=>i5(v,i,r,n)),u=at(v=>r5(v,r)),m=at(v=>SQ(v,r)),g=at(v=>_6(v,r));if(u==null||m==null||g==null)return null;var{dangerouslySetInnerHTML:f,ticks:y}=e,p=yP(e,une),{id:b}=g,j=yP(g,mne);return h.createElement(ek,Aw({},p,j,{scale:o,x:m.x,y:m.y,width:u.width,height:u.height,className:tr("recharts-".concat(i," ").concat(i),a),viewBox:s,ticks:c,axisType:i}))},xne={allowDataOverflow:Da.allowDataOverflow,allowDecimals:Da.allowDecimals,allowDuplicatedCategory:Da.allowDuplicatedCategory,angle:Da.angle,axisLine:_i.axisLine,height:Da.height,hide:!1,includeHidden:Da.includeHidden,interval:Da.interval,minTickGap:Da.minTickGap,mirror:Da.mirror,orientation:Da.orientation,padding:Da.padding,reversed:Da.reversed,scale:Da.scale,tick:Da.tick,tickCount:Da.tickCount,tickLine:_i.tickLine,tickSize:_i.tickSize,type:Da.type,xAxisId:0},pne=e=>{var r=Zr(e,xne);return h.createElement(h.Fragment,null,h.createElement(hne,{allowDataOverflow:r.allowDataOverflow,allowDecimals:r.allowDecimals,allowDuplicatedCategory:r.allowDuplicatedCategory,angle:r.angle,dataKey:r.dataKey,domain:r.domain,height:r.height,hide:r.hide,id:r.xAxisId,includeHidden:r.includeHidden,interval:r.interval,minTickGap:r.minTickGap,mirror:r.mirror,name:r.name,orientation:r.orientation,padding:r.padding,reversed:r.reversed,scale:r.scale,tick:r.tick,tickCount:r.tickCount,tickFormatter:r.tickFormatter,ticks:r.ticks,type:r.type,unit:r.unit}),h.createElement(fne,r))},ms=h.memo(pne,EI);ms.displayName="XAxis";var yne=["dangerouslySetInnerHTML","ticks"],vne=["id"];function Pw(){return Pw=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Pw.apply(null,arguments)}function vP(e,r){if(e==null)return{};var a,s,n=bne(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function bne(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function wne(e){var r=Ar(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?r(Cte(e)):a.current!==e&&r(Ete({prev:a.current,next:e})),a.current=e},[e,r]),h.useLayoutEffect(()=>()=>{a.current&&(r(Ate(a.current)),a.current=null)},[r]),null}var jne=e=>{var{yAxisId:r,className:a,width:s,label:n}=e,i=h.useRef(null),o=h.useRef(null),c=at(kj),u=Ua(),m=Ar(),g="yAxis",f=at(S=>bd(S,g,r,u)),y=at(S=>a5(S,r)),p=at(S=>EQ(S,r)),b=at(S=>i5(S,g,r,u)),j=at(S=>$6(S,r));if(h.useLayoutEffect(()=>{if(!(s!=="auto"||!y||UN(n)||h.isValidElement(n)||j==null)){var S=i.current;if(S){var P=S.getCalculatedWidth();Math.round(y.width)!==Math.round(P)&&m(Pte({id:r,width:P}))}}},[b,y,m,n,r,s,j]),y==null||p==null||j==null)return null;var{dangerouslySetInnerHTML:v,ticks:N}=e,k=vP(e,yne),{id:E}=j,C=vP(j,vne);return h.createElement(ek,Pw({},k,C,{ref:i,labelRef:o,scale:f,x:p.x,y:p.y,tickTextProps:s==="auto"?{width:void 0}:{width:s},width:y.width,height:y.height,className:tr("recharts-".concat(g," ").concat(g),a),viewBox:c,ticks:b,axisType:g}))},Nne={allowDataOverflow:Oa.allowDataOverflow,allowDecimals:Oa.allowDecimals,allowDuplicatedCategory:Oa.allowDuplicatedCategory,angle:Oa.angle,axisLine:_i.axisLine,hide:!1,includeHidden:Oa.includeHidden,interval:Oa.interval,minTickGap:Oa.minTickGap,mirror:Oa.mirror,orientation:Oa.orientation,padding:Oa.padding,reversed:Oa.reversed,scale:Oa.scale,tick:Oa.tick,tickCount:Oa.tickCount,tickLine:_i.tickLine,tickSize:_i.tickSize,type:Oa.type,width:Oa.width,yAxisId:0},kne=e=>{var r=Zr(e,Nne);return h.createElement(h.Fragment,null,h.createElement(wne,{interval:r.interval,id:r.yAxisId,scale:r.scale,type:r.type,domain:r.domain,allowDataOverflow:r.allowDataOverflow,dataKey:r.dataKey,allowDuplicatedCategory:r.allowDuplicatedCategory,allowDecimals:r.allowDecimals,tickCount:r.tickCount,padding:r.padding,includeHidden:r.includeHidden,reversed:r.reversed,ticks:r.ticks,width:r.width,orientation:r.orientation,mirror:r.mirror,hide:r.hide,unit:r.unit,name:r.name,angle:r.angle,minTickGap:r.minTickGap,tick:r.tick,tickFormatter:r.tickFormatter}),h.createElement(jne,r))},gs=h.memo(kne,EI);gs.displayName="YAxis";var Sne=(e,r)=>r,rk=we([Sne,Wt,R6,ka,j5,eo,BX,ja],YX),ak=e=>{var r=e.currentTarget.getBoundingClientRect(),a=r.width/e.currentTarget.offsetWidth,s=r.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-r.left)/a),chartY:Math.round((e.clientY-r.top)/s)}},AI=vn("mouseClick"),PI=Pm();PI.startListening({actionCreator:AI,effect:(e,r)=>{var a=e.payload,s=rk(r.getState(),ak(a));s?.activeIndex!=null&&r.dispatch(zQ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var Tw=vn("mouseMove"),TI=Pm(),Sh=null;TI.startListening({actionCreator:Tw,effect:(e,r)=>{var a=e.payload;Sh!==null&&cancelAnimationFrame(Sh);var s=ak(a);Sh=requestAnimationFrame(()=>{var n=r.getState(),i=AN(n,n.tooltip.settings.shared);if(i==="axis"){var o=rk(n,s);o?.activeIndex!=null?r.dispatch(h5({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):r.dispatch(g5())}Sh=null})}});var bP={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},DI=Ls({name:"rootProps",initialState:bP,reducers:{updateOptions:(e,r)=>{var a;e.accessibilityLayer=r.payload.accessibilityLayer,e.barCategoryGap=r.payload.barCategoryGap,e.barGap=(a=r.payload.barGap)!==null&&a!==void 0?a:bP.barGap,e.barSize=r.payload.barSize,e.maxBarSize=r.payload.maxBarSize,e.stackOffset=r.payload.stackOffset,e.syncId=r.payload.syncId,e.syncMethod=r.payload.syncMethod,e.className=r.payload.className,e.baseValue=r.payload.baseValue,e.reverseStackOrder=r.payload.reverseStackOrder}}}),Cne=DI.reducer,{updateOptions:Ene}=DI.actions,OI=Ls({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,r)=>r.payload}}),{updatePolarOptions:Ane}=OI.actions,Pne=OI.reducer,II=vn("keyDown"),LI=vn("focus"),sk=Pm();sk.startListening({actionCreator:II,effect:(e,r)=>{var a=r.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:n}=a.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=PN(n,jd(a),Bm(a),Vm(a)),c=o==null?-1:Number(o);if(!(!Number.isFinite(c)||c<0)){var u=eo(a);if(i==="Enter"){var m=H0(a,"axis","hover",String(n.index));r.dispatch(bw({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:m}));return}var g=DQ(a),f=g==="left-to-right"?1:-1,y=i==="ArrowRight"?1:-1,p=c+y*f;if(!(u==null||p>=u.length||p<0)){var b=H0(a,"axis","hover",String(p));r.dispatch(bw({active:!0,activeIndex:p.toString(),activeDataKey:void 0,activeCoordinate:b}))}}}}}});sk.startListening({actionCreator:LI,effect:(e,r)=>{var a=r.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:n}=a.tooltip;if(!n.active&&n.index==null){var i="0",o=H0(a,"axis","hover",String(i));r.dispatch(bw({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var un=vn("externalEvent"),RI=Pm(),Zv=new Map;RI.startListening({actionCreator:un,effect:(e,r)=>{var{handler:a,reactEvent:s}=e.payload;if(a!=null){s.persist();var n=s.type,i=Zv.get(n);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var c=r.getState(),u={activeCoordinate:EX(c),activeDataKey:LN(c),activeIndex:qo(c),activeLabel:S5(c),activeTooltipIndex:qo(c),isTooltipActive:AX(c)};a(u,s)}finally{Zv.delete(n)}});Zv.set(n,o)}}});var Tne=we([wd],e=>e.tooltipItemPayloads),Dne=we([Tne,Hm,(e,r,a)=>r,(e,r,a)=>a],(e,r,a,s)=>{var n=e.find(c=>c.settings.dataKey===s);if(n!=null){var{positions:i}=n;if(i!=null){var o=r(i,a);return o}}}),MI=vn("touchMove"),_I=Pm();_I.startListening({actionCreator:MI,effect:(e,r)=>{var a=e.payload;if(!(a.touches==null||a.touches.length===0)){var s=r.getState(),n=AN(s,s.tooltip.settings.shared);if(n==="axis"){var i=rk(s,ak({clientX:a.touches[0].clientX,clientY:a.touches[0].clientY,currentTarget:a.currentTarget}));i?.activeIndex!=null&&r.dispatch(h5({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(n==="item"){var o,c=a.touches[0];if(document.elementFromPoint==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var m=u.getAttribute(nO),g=(o=u.getAttribute(iO))!==null&&o!==void 0?o:void 0,f=Dne(r.getState(),m,g);r.dispatch(m5({activeDataKey:g,activeIndex:m,activeCoordinate:f}))}}}});var One=C3({brush:pae,cartesianAxis:Tte,chartData:CZ,errorBars:Yte,graphicalItems:_ee,layout:Jq,legend:oW,options:wZ,polarAxis:ZJ,polarOptions:Pne,referenceElements:kae,rootProps:Cne,tooltip:BQ,zIndex:cZ}),Ine=function(r){return kq({reducer:One,preloadedState:r,middleware:a=>{var s;return a({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((s="es6")!==null&&s!==void 0?s:"")}).concat([PI.middleware,TI.middleware,sk.middleware,RI.middleware,_I.middleware])},enhancers:a=>{var s=a;return typeof a=="function"&&(s=a()),s.concat(z3({type:"raf"}))},devTools:ud.devToolsEnabled})};function $I(e){var{preloadedState:r,children:a,reduxStoreName:s}=e,n=Ua(),i=h.useRef(null);if(n)return a;i.current==null&&(i.current=Ine(r));var o=fj;return h.createElement(vre,{context:o,store:i.current},a)}function Lne(e){var{layout:r,margin:a}=e,s=Ar(),n=Ua();return h.useEffect(()=>{n||(s(Qq(r)),s(Yq(a)))},[s,n,r,a]),null}var UI=h.memo(Lne,Ym);function FI(e){var r=Ar();return h.useEffect(()=>{r(Ene(e))},[r,e]),null}function wP(e){var{zIndex:r,isPanorama:a}=e,s=a?"recharts-zindex-panorama-":"recharts-zindex-",n=eI("".concat(s).concat(r)),i=Ar();return h.useLayoutEffect(()=>(i(oZ({zIndex:r,elementId:n,isPanorama:a})),()=>{i(lZ({zIndex:r,isPanorama:a}))}),[i,r,n,a]),h.createElement("g",{tabIndex:-1,id:n})}function jP(e){var{children:r,isPanorama:a}=e,s=at(XX);if(!s||s.length===0)return r;var n=s.filter(o=>o<0),i=s.filter(o=>o>0);return h.createElement(h.Fragment,null,n.map(o=>h.createElement(wP,{key:o,zIndex:o,isPanorama:a})),r,i.map(o=>h.createElement(wP,{key:o,zIndex:o,isPanorama:a})))}var Rne=["children"];function Mne(e,r){if(e==null)return{};var a,s,n=_ne(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function _ne(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function ef(){return ef=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ef.apply(null,arguments)}var $ne={width:"100%",height:"100%",display:"block"},Une=h.forwardRef((e,r)=>{var a=Cj(),s=Ej(),n=jO();if(!ii(a)||!ii(s))return null;var{children:i,otherAttributes:o,title:c,desc:u}=e,m,g;return o!=null&&(typeof o.tabIndex=="number"?m=o.tabIndex:m=n?0:void 0,typeof o.role=="string"?g=o.role:g=n?"application":void 0),h.createElement(nj,ef({},o,{title:c,desc:u,role:g,tabIndex:m,width:a,height:s,style:$ne,ref:r}),i)}),Fne=e=>{var{children:r}=e,a=at(Rf);if(!a)return null;var{width:s,height:n,y:i,x:o}=a;return h.createElement(nj,{width:s,height:n,x:o,y:i},r)},NP=h.forwardRef((e,r)=>{var{children:a}=e,s=Mne(e,Rne),n=Ua();return n?h.createElement(Fne,null,h.createElement(jP,{isPanorama:!0},a)):h.createElement(Une,ef({ref:r},s),h.createElement(jP,{isPanorama:!1},a))});function zne(){var e=Ar(),[r,a]=h.useState(null),s=at(xH);return h.useEffect(()=>{if(r!=null){var n=r.getBoundingClientRect(),i=n.width/r.offsetWidth;Ir(i)&&i!==s&&e(Zq(i))}},[r,e,s]),a}function kP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function Bne(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?kP(Object(a),!0).forEach(function(s){qne(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kP(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function qne(e,r,a){return(r=Hne(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Hne(e){var r=Wne(e,"string");return typeof r=="symbol"?r:r+""}function Wne(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Vl(){return Vl=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Vl.apply(null,arguments)}var Vne=()=>(RZ(),null);function tf(e){if(typeof e=="number")return e;if(typeof e=="string"){var r=parseFloat(e);if(!Number.isNaN(r))return r}return 0}var Kne=h.forwardRef((e,r)=>{var a,s,n=h.useRef(null),[i,o]=h.useState({containerWidth:tf((a=e.style)===null||a===void 0?void 0:a.width),containerHeight:tf((s=e.style)===null||s===void 0?void 0:s.height)}),c=h.useCallback((m,g)=>{o(f=>{var y=Math.round(m),p=Math.round(g);return f.containerWidth===y&&f.containerHeight===p?f:{containerWidth:y,containerHeight:p}})},[]),u=h.useCallback(m=>{if(typeof r=="function"&&r(m),m!=null&&typeof ResizeObserver<"u"){var{width:g,height:f}=m.getBoundingClientRect();c(g,f);var y=b=>{var{width:j,height:v}=b[0].contentRect;c(j,v)},p=new ResizeObserver(y);p.observe(m),n.current=p}},[r,c]);return h.useEffect(()=>()=>{var m=n.current;m?.disconnect()},[c]),h.createElement(h.Fragment,null,h.createElement(_f,{width:i.containerWidth,height:i.containerHeight}),h.createElement("div",Vl({ref:u},e)))}),Gne=h.forwardRef((e,r)=>{var{width:a,height:s}=e,[n,i]=h.useState({containerWidth:tf(a),containerHeight:tf(s)}),o=h.useCallback((u,m)=>{i(g=>{var f=Math.round(u),y=Math.round(m);return g.containerWidth===f&&g.containerHeight===y?g:{containerWidth:f,containerHeight:y}})},[]),c=h.useCallback(u=>{if(typeof r=="function"&&r(u),u!=null){var{width:m,height:g}=u.getBoundingClientRect();o(m,g)}},[r,o]);return h.createElement(h.Fragment,null,h.createElement(_f,{width:n.containerWidth,height:n.containerHeight}),h.createElement("div",Vl({ref:c},e)))}),Yne=h.forwardRef((e,r)=>{var{width:a,height:s}=e;return h.createElement(h.Fragment,null,h.createElement(_f,{width:a,height:s}),h.createElement("div",Vl({ref:r},e)))}),Qne=h.forwardRef((e,r)=>{var{width:a,height:s}=e;return Fi(a)||Fi(s)?h.createElement(Gne,Vl({},e,{ref:r})):h.createElement(Yne,Vl({},e,{ref:r}))});function Xne(e){return e===!0?Kne:Qne}var Zne=h.forwardRef((e,r)=>{var{children:a,className:s,height:n,onClick:i,onContextMenu:o,onDoubleClick:c,onMouseDown:u,onMouseEnter:m,onMouseLeave:g,onMouseMove:f,onMouseUp:y,onTouchEnd:p,onTouchMove:b,onTouchStart:j,style:v,width:N,responsive:k,dispatchTouchEvents:E=!0}=e,C=h.useRef(null),S=Ar(),[P,D]=h.useState(null),[I,H]=h.useState(null),W=zne(),K=Sj(),B=K?.width>0?K.width:N,z=K?.height>0?K.height:n,q=h.useCallback(V=>{W(V),typeof r=="function"&&r(V),D(V),H(V),V!=null&&(C.current=V)},[W,r,D,H]),J=h.useCallback(V=>{S(AI(V)),S(un({handler:i,reactEvent:V}))},[S,i]),ae=h.useCallback(V=>{S(Tw(V)),S(un({handler:m,reactEvent:V}))},[S,m]),ne=h.useCallback(V=>{S(g5()),S(un({handler:g,reactEvent:V}))},[S,g]),re=h.useCallback(V=>{S(Tw(V)),S(un({handler:f,reactEvent:V}))},[S,f]),L=h.useCallback(()=>{S(LI())},[S]),G=h.useCallback(V=>{S(II(V.key))},[S]),T=h.useCallback(V=>{S(un({handler:o,reactEvent:V}))},[S,o]),_=h.useCallback(V=>{S(un({handler:c,reactEvent:V}))},[S,c]),F=h.useCallback(V=>{S(un({handler:u,reactEvent:V}))},[S,u]),ee=h.useCallback(V=>{S(un({handler:y,reactEvent:V}))},[S,y]),Z=h.useCallback(V=>{S(un({handler:j,reactEvent:V}))},[S,j]),U=h.useCallback(V=>{E&&S(MI(V)),S(un({handler:b,reactEvent:V}))},[S,E,b]),X=h.useCallback(V=>{S(un({handler:p,reactEvent:V}))},[S,p]),Q=Xne(k);return h.createElement(I5.Provider,{value:P},h.createElement(BD.Provider,{value:I},h.createElement(Q,{width:B??v?.width,height:z??v?.height,className:tr("recharts-wrapper",s),style:Bne({position:"relative",cursor:"default",width:B,height:z},v),onClick:J,onContextMenu:T,onDoubleClick:_,onFocus:L,onKeyDown:G,onMouseDown:F,onMouseEnter:ae,onMouseLeave:ne,onMouseMove:re,onMouseUp:ee,onTouchEnd:X,onTouchMove:U,onTouchStart:Z,ref:q},h.createElement(Vne,null),a)))}),Jne=["width","height","responsive","children","className","style","compact","title","desc"];function eie(e,r){if(e==null)return{};var a,s,n=tie(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function tie(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var zI=h.forwardRef((e,r)=>{var{width:a,height:s,responsive:n,children:i,className:o,style:c,compact:u,title:m,desc:g}=e,f=eie(e,Jne),y=fs(f);return u?h.createElement(h.Fragment,null,h.createElement(_f,{width:a,height:s}),h.createElement(NP,{otherAttributes:y,title:m,desc:g},i)):h.createElement(Zne,{className:o,style:c,width:a,height:s,responsive:n??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},h.createElement(NP,{otherAttributes:y,title:m,desc:g,ref:r},h.createElement(Cae,null,i)))});function Dw(){return Dw=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Dw.apply(null,arguments)}var rie={top:5,right:5,bottom:5,left:5},aie={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:rie,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},nk=h.forwardRef(function(r,a){var s,n=Zr(r.categoricalChartProps,aie),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,categoricalChartProps:m}=r,g={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return h.createElement($I,{preloadedState:{options:g},reduxStoreName:(s=m.id)!==null&&s!==void 0?s:i},h.createElement(lI,{chartData:m.data}),h.createElement(UI,{layout:n.layout,margin:n.margin}),h.createElement(FI,{baseValue:n.baseValue,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),h.createElement(zI,Dw({},n,{ref:a})))}),sie=["axis"],Xm=h.forwardRef((e,r)=>h.createElement(nk,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:sie,tooltipPayloadSearcher:ax,categoricalChartProps:e,ref:r})),nie=["axis","item"],Nd=h.forwardRef((e,r)=>h.createElement(nk,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:nie,tooltipPayloadSearcher:ax,categoricalChartProps:e,ref:r}));function iie(e){var r=Ar();return h.useEffect(()=>{r(Ane(e))},[r,e]),null}var oie=["layout"];function Ow(){return Ow=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ow.apply(null,arguments)}function lie(e,r){if(e==null)return{};var a,s,n=cie(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function cie(e,r){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var die={top:5,right:5,bottom:5,left:5},BI={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:die,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},uie=h.forwardRef(function(r,a){var s,n=Zr(r.categoricalChartProps,BI),{layout:i}=n,o=lie(n,oie),{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:m,tooltipPayloadSearcher:g}=r,f={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,eventEmitter:void 0};return h.createElement($I,{preloadedState:{options:f},reduxStoreName:(s=n.id)!==null&&s!==void 0?s:c},h.createElement(lI,{chartData:n.data}),h.createElement(UI,{layout:i,margin:n.margin}),h.createElement(FI,{baseValue:void 0,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),h.createElement(iie,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),h.createElement(zI,Ow({},o,{ref:a})))});function SP(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function CP(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?SP(Object(a),!0).forEach(function(s){mie(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):SP(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function mie(e,r,a){return(r=gie(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function gie(e){var r=hie(e,"string");return typeof r=="symbol"?r:r+""}function hie(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var fie=["item"],xie=CP(CP({},BI),{},{layout:"centric",startAngle:0,endAngle:360}),gx=h.forwardRef((e,r)=>{var a=Zr(e,xie);return h.createElement(uie,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:fie,tooltipPayloadSearcher:ax,categoricalChartProps:a,ref:r})}),pie=["axis"],ik=h.forwardRef((e,r)=>h.createElement(nk,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:pie,tooltipPayloadSearcher:ax,categoricalChartProps:e,ref:r}));const EP=({data:e,title:r,height:a=300,showLegend:s=!0,showTooltip:n=!0,dataKeys:i=[{key:"value",color:"#3B82F6",name:"Value"}],xAxisKey:o="name",valueFormatter:c=u=>u})=>{const u=({active:m,payload:g,label:f})=>m&&g&&g.length?t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:f}),g.map((y,p)=>t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.jsx("span",{style:{color:y.color},children:""})," ",y.name,": ",t.jsx("span",{className:"font-semibold",children:c(y.value)})]},p))]}):null;return t.jsxs("div",{className:"w-full",children:[r&&t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:r}),t.jsx(Ds,{width:"100%",height:a,children:t.jsxs(Nd,{data:e,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx(us,{strokeDasharray:"3 3",className:"opacity-30"}),t.jsx(ms,{dataKey:o,className:"text-xs text-gray-600 dark:text-gray-400",tick:{fontSize:12}}),t.jsx(gs,{className:"text-xs text-gray-600 dark:text-gray-400",tick:{fontSize:12},tickFormatter:c}),n&&t.jsx(_a,{content:t.jsx(u,{})}),s&&t.jsx(Ma,{}),i.map((m,g)=>t.jsx(Fn,{dataKey:m.key,fill:m.color,name:m.name,radius:[4,4,0,0]},g))]})})]})},yie=({data:e,title:r,height:a=300,showLegend:s=!0,showTooltip:n=!0,dataKeys:i=[{key:"value",color:"#3B82F6",name:"Value"}],xAxisKey:o="name",valueFormatter:c=u=>u})=>{const u=({active:m,payload:g,label:f})=>m&&g&&g.length?t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:f}),g.map((y,p)=>t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.jsx("span",{style:{color:y.color},children:""})," ",y.name,": ",t.jsx("span",{className:"font-semibold",children:c(y.value)})]},p))]}):null;return t.jsxs("div",{className:"w-full",children:[r&&t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:r}),t.jsx(Ds,{width:"100%",height:a,children:t.jsxs(Xm,{data:e,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx(us,{strokeDasharray:"3 3",className:"opacity-30"}),t.jsx(ms,{dataKey:o,className:"text-xs text-gray-600 dark:text-gray-400",tick:{fontSize:12}}),t.jsx(gs,{className:"text-xs text-gray-600 dark:text-gray-400",tick:{fontSize:12},tickFormatter:c}),n&&t.jsx(_a,{content:t.jsx(u,{})}),s&&t.jsx(Ma,{}),i.map((m,g)=>t.jsx(Ki,{type:"monotone",dataKey:m.key,stroke:m.color,strokeWidth:2,dot:{fill:m.color,strokeWidth:2,r:4},activeDot:{r:6,stroke:m.color,strokeWidth:2},name:m.name},g))]})})]})},vie=({data:e,title:r,height:a=300,dataKeys:s,gradientId:n,showLegend:i=!0,showTooltip:o=!0,valueFormatter:c=u=>u})=>{const u=({active:m,payload:g,label:f})=>m&&g&&g.length?t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:f}),g.map((y,p)=>t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[y.name,": ",t.jsx("span",{className:"font-semibold",style:{color:y.color},children:c(y.value)})]},p))]}):null;return t.jsxs("div",{className:"w-full",children:[r&&t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:r}),t.jsx(Ds,{width:"100%",height:a,children:t.jsxs(ik,{data:e,margin:{top:10,right:30,left:0,bottom:0},children:[t.jsx("defs",{children:n&&s.map((m,g)=>t.jsxs("linearGradient",{id:`${n}-${m.key}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:m.color,stopOpacity:.8}),t.jsx("stop",{offset:"95%",stopColor:m.color,stopOpacity:.1})]},g))}),t.jsx(us,{strokeDasharray:"3 3",className:"stroke-gray-200 dark:stroke-gray-700"}),t.jsx(ms,{dataKey:"name",className:"text-gray-600 dark:text-gray-400",fontSize:12}),t.jsx(gs,{className:"text-gray-600 dark:text-gray-400",fontSize:12,tickFormatter:c}),o&&t.jsx(_a,{content:t.jsx(u,{})}),i&&t.jsx(Ma,{wrapperStyle:{paddingTop:"20px"},formatter:(m,g)=>t.jsx("span",{style:{color:g.color},className:"text-sm",children:m})}),s.map((m,g)=>t.jsx(td,{type:"monotone",dataKey:m.key,stackId:"1",stroke:m.color,fill:n?`url(#${n}-${m.key})`:m.color,fillOpacity:n?1:.6,name:m.name},g))]})})]})};function bie(){const{hasPermission:e,user:r}=xr(),a=mt(),s=r?.roles?.some(R=>{const ce=(R.name||"").toLowerCase();return ce==="admin"||ce==="super_admin"||ce==="super admin"}),[n,i]=h.useState({totalUsers:0,activeUsers:0,inactiveUsers:0,newUsers:0}),[o,c]=h.useState([]),[u,m]=h.useState(!0),[g,f]=h.useState(!0),[y,p]=h.useState(!0),[b,j]=h.useState(!0),[v,N]=h.useState(!0),[k,E]=h.useState(0),[C,S]=h.useState({api:!1,database:!1,frontend:!0}),[P,D]=h.useState({apiMs:null,dbMs:null}),[I,H]=h.useState({today:0,week:0,month:0,total:0}),[W,K]=h.useState({totalLeads:0,newLeads:0,contactedLeads:0,qualifiedLeads:0,proposalLeads:0,negotiationLeads:0,closedLeads:0,lostLeads:0}),[B,z]=h.useState({totalRoles:0,activeRoles:0,inactiveRoles:0}),[q,J]=h.useState(null),[ae,ne]=h.useState(!0),[re,L]=h.useState("me"),[G,T]=h.useState(new Date),[_,F]=h.useState(new Date),[ee,Z]=h.useState([]),[U,X]=h.useState([]),[Q,V]=h.useState([]),[ge,Te]=h.useState([]),[xe,qe]=h.useState([]),[se,De]=h.useState(!0),Me=R=>{const ce=R.getFullYear(),de=String(R.getMonth()+1).padStart(2,"0"),ue=String(R.getDate()).padStart(2,"0");return`${ce}-${de}-${ue}`},Ct=R=>R.toLocaleDateString(void 0,{month:"long",year:"numeric"}),Dt=R=>{const ce=R.getFullYear(),de=R.getMonth(),ue=new Date(ce,de,1),Pe=new Date(ce,de+1,0),pe=(ue.getDay()+6)%7,ve=Pe.getDate(),Ve=[];for(let Ge=0;Ge<pe;Ge++)Ve.push(null);for(let Ge=1;Ge<=ve;Ge++)Ve.push(new Date(ce,de,Ge));for(;Ve.length%7!==0;)Ve.push(null);return Ve},Mt=()=>{const R=Me(_);a(`/task-management?dueDate=${R}`)},jt=e(Qe.DASHBOARD_WIDGETS.STATS_USERS),le=e(Qe.DASHBOARD_WIDGETS.STATS_ROLES),Xe=e(Qe.DASHBOARD_WIDGETS.STATS_LEADS);e(Qe.DASHBOARD_WIDGETS.SYSTEM_STATUS);const Ke=e(Qe.DASHBOARD_WIDGETS.SYSTEM_ACTIVITY),Ne=e(Qe.DASHBOARD_WIDGETS.ACTIVITY_CALENDAR),Nt=e(Qe.DASHBOARD_WIDGETS.PERFORMANCE),_t=e(Qe.DASHBOARD_WIDGETS.REVENUE_METRICS),vt=e(Qe.DASHBOARD_WIDGETS.ACTIVITY_ENGAGEMENT),Ot=jt||le||Xe;return h.useEffect(()=>{const R=async()=>{try{if(e("user.read")){const ue=(await Er.getUserStats()).data.stats;i({totalUsers:ue.totalUsers,activeUsers:ue.activeUsers,inactiveUsers:ue.inactiveUsers,newUsers:ue.newUsers})}}catch(de){console.error("Error fetching user stats:",de)}finally{m(!1)}},ce=async()=>{try{if(e("activity.read")){const de=re==="me"&&r?.id?Number(r.id):void 0,ue=await $o.getRecentActivities(5,de),Pe=ue?.data?.items||ue?.data||[],pe=Array.isArray(Pe)?Pe.map(GT):[];c(pe)}}catch(de){console.error("Error fetching activities:",de)}finally{j(!1)}};R(),ce()},[e,re,r?.id]),h.useEffect(()=>{(async()=>{try{if(e("lead.read")){const ce=await Gt.getDashboardKPIs(void 0,void 0,re==="me"?r?.id:void 0,re);J(ce?.data??ce)}}catch(ce){console.error("Error fetching dashboard KPIs:",ce)}finally{ne(!1)}})()},[e,re,r?.id]),h.useEffect(()=>{const R=async()=>{try{if(e("lead.read"))if(re==="me"&&r?.id){const de=await Gt.getLeads({page:1,limit:100,assignedTo:Number(r.id)}),ue=de?.data?.leads||de?.data?.items||[],Pe={total:0,newLeads:0,contactedLeads:0,qualifiedLeads:0,proposalLeads:0,negotiationLeads:0,closedLeads:0,lostLeads:0},pe={new:"newLeads",contacted:"contactedLeads",qualified:"qualifiedLeads",proposal:"proposalLeads","proposal sent":"proposalLeads",negotiation:"negotiationLeads",negotiating:"negotiationLeads",closed:"closedLeads",won:"closedLeads",lost:"lostLeads"},ve=ue.reduce((Ve,Ge)=>{Ve.total+=1;const $t=String(Ge.status||"").toLowerCase().replace(/_/g," ").trim(),Qt=pe[$t];return Qt&&(Ve[Qt]+=1),Ve},Pe);K({totalLeads:ve.total||0,newLeads:ve.newLeads||0,contactedLeads:ve.contactedLeads||0,qualifiedLeads:ve.qualifiedLeads||0,proposalLeads:ve.proposalLeads||0,negotiationLeads:ve.negotiationLeads||0,closedLeads:ve.closedLeads||0,lostLeads:ve.lostLeads||0})}else{const de=await Gt.getLeadStats(),ue=de?.data||de;K({totalLeads:ue.totalLeads??ue.total??0,newLeads:ue.newLeads??0,contactedLeads:ue.contactedLeads??0,qualifiedLeads:ue.qualifiedLeads??0,proposalLeads:ue.proposalLeads??0,negotiationLeads:ue.negotiationLeads??0,closedLeads:ue.closedLeads??ue.converted??0,lostLeads:ue.lostLeads??0})}}catch(de){console.error("Error fetching lead stats:",de)}finally{f(!1)}},ce=async()=>{try{if(e("role.read")){const ue=(await Ga.getRoles())?.data?.roles||[],Pe=ue.length,pe=ue.filter(Ve=>Ve.isActive).length,ve=Pe-pe;z({totalRoles:Pe,activeRoles:pe,inactiveRoles:ve})}}catch(de){console.error("Error fetching role stats:",de)}finally{p(!1)}};R(),ce()},[e,re,r?.id]),h.useEffect(()=>{const R=async()=>{try{const de=performance.now(),ue=await oe.get("/health"),Pe=performance.now(),pe=!!ue.data?.success;let ve=!1,Ve=null;try{if(e("user.read")){const Xt=performance.now();await Er.getUserStats();const Ut=performance.now();Ve=Math.max(0,Math.round(Ut-Xt)),ve=!0}}catch{ve=!1}let Ge=0,$t=0,Qt=0,qt=0;try{if(e("activity.read")){const Xt=await $o.getActivityStats();Ge=Xt?.data?.monthCount||0,$t=Xt?.data?.todayCount||0,Qt=Xt?.data?.weekCount||0,qt=Xt?.data?.totalCount||0}}catch{Ge=0}S({api:pe,database:ve,frontend:!0}),E(Ge),H({today:$t,week:Qt,month:Ge,total:qt}),D({apiMs:Math.max(0,Math.round(Pe-de)),dbMs:Ve})}catch{S(ue=>({...ue,api:!1}))}finally{N(!1)}};R();const ce=setInterval(R,3e4);return()=>clearInterval(ce)},[e]),h.useEffect(()=>{(async()=>{if(e("activity.read"))try{const ce=new Date(G.getFullYear(),G.getMonth(),1),de=new Date(G.getFullYear(),G.getMonth()+1,0),Pe=(await oe.get("/activities/calendar",{params:{startDate:ce.toISOString().split("T")[0],endDate:de.toISOString().split("T")[0]}})).data?.data?.activities||[];Z(Pe)}catch(ce){console.error("Error fetching calendar activities:",ce),Z([])}})()},[G,e]),h.useEffect(()=>{(async()=>{if(!e("lead.read")){De(!1);return}try{De(!0);const ce=re==="me"?"me":"all",de=re==="me"&&r?.id?r.id:void 0,[ue,Pe,pe,ve]=await Promise.all([Jn.getRevenueTrends(12,de,ce),Jn.getLeadConversionFunnel(de,ce),Jn.getSalesPipelineFlow(6,de,ce),Jn.getActivityTrends(12,de,ce)]);X(ue?.data||[]),V(Pe?.data||[]),Te(pe?.success?pe.data:[]),qe(ve?.data||[])}catch(ce){console.error("Error fetching chart data:",ce)}finally{De(!1)}})()},[e,re,r?.id]),t.jsxs("div",{className:"bg-gradient-to-br from-slate-50 via-gray-50 to-blue-50 dark:from-gray-950 dark:via-gray-900 dark:to-slate-900 min-h-screen",children:[t.jsxs("div",{className:"header bg-hero-gradient bg-cover bg-center relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/60 via-black/40 to-black/60"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-black/20 to-black/40"}),t.jsx("div",{className:"relative z-10 px-4 sm:px-6 lg:px-8 py-4  lg:py-10",children:t.jsx("div",{className:"mx-auto w-full ",children:t.jsxs("div",{className:"grid gap-10 xl:grid-cols-2",children:[t.jsxs("div",{className:"space-y-5 text-white",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-base sm:text-lg text-white/80 font-light",children:["Good"," ",new Date().getHours()<12?"Morning":new Date().getHours()<18?"Afternoon":"Evening",","]}),t.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-white mb-2 leading-tight",children:r?r.fullName||`${r.firstName} ${r.lastName}`||r.email?.split("@")[0]:"Welcome"})]}),t.jsxs("p",{className:"text-white/80 text-base sm:text-lg leading-relaxed max-w-2xl",children:["Here's what's happening with your CRM today. You have"," ",t.jsxs("span",{className:"text-white font-semibold",children:[n.totalUsers," users"]})," ","and"," ",t.jsxs("span",{className:"text-white font-semibold",children:[W.totalLeads," leads"]})," ","in your ",re==="me"?"pipeline":"system","."]}),s&&t.jsx("div",{className:"inline-flex flex-col xs:flex-row items-start xs:items-center gap-2",children:t.jsxs("div",{className:"flex items-center bg-white/10 border border-white/20 rounded-full p-1 shadow-lg",children:[t.jsx("button",{type:"button","aria-pressed":re==="all",className:`px-4 py-1.5 rounded-full text-xs sm:text-sm transition-colors ${re==="all"?"bg-white text-black":"text-white/80"}`,onClick:()=>L("all"),children:"All Data"}),t.jsx("button",{type:"button","aria-pressed":re==="me",className:`px-4 py-1.5 rounded-full text-xs sm:text-sm transition-colors ${re==="me"?"bg-white text-black":"text-white/80"}`,onClick:()=>L("me"),children:"My Data"})]})})]}),Ot&&t.jsx("div",{className:"bg-white/10 backdrop-blur rounded-3xl border border-white/10 p-4 sm:p-6 shadow-2xl",children:t.jsxs("div",{className:"grid grid-cols-1 min-[420px]:grid-cols-2 gap-4",children:[jt&&t.jsx(yy,{icon:t.jsx($F,{className:"w-6 h-6"}),title:"Total Users",value:u?"...":n.totalUsers,subtitle:`${n.activeUsers} active, ${n.inactiveUsers} inactive`,color:"blue",className:""}),le&&t.jsx(yy,{icon:t.jsx(_F,{className:"w-6 h-6"}),title:"Total Roles",value:y?"...":B.totalRoles,subtitle:`${B.activeRoles} active, ${B.inactiveRoles} inactive`,color:"green",className:""}),Xe&&t.jsx(yy,{icon:t.jsx(eC,{className:"w-6 h-6"}),title:"Total Leads",value:g?"...":W.totalLeads,subtitle:`${W.newLeads} new, ${W.qualifiedLeads} qualified`,color:"purple",className:""})]})})]})})})]}),t.jsxs("div",{className:"space-y-8 mx-auto px-4 sm:px-6 lg:px-8 py-4 lg:py-8",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8",children:[Ke&&t.jsxs("div",{className:"relative bg-gray-200 dark:bg-gray-800 rounded-2xl  hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"System Activity"}),t.jsx("button",{onClick:()=>a("/activities"),className:"text-weconnect-red hover:text-red-600 text-sm font-semibold transition-colors",children:"View All"})]}),t.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:b?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-red-500"})}):o.length>0?o.map(R=>t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-white dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx(R.icon,{className:`w-4 h-4 ${R.iconColor}`})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:R.title}),t.jsxs("div",{className:"flex items-center text-xs text-gray-500 ",children:[t.jsx(KT,{className:"w-3 h-3 mr-1"}),R.time]})]}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:R.description}),t.jsx("div",{className:"flex mt-1 space-x-1",children:R.tags.map((ce,de)=>t.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:ce},de))})]})]},R.id)):t.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:t.jsx("p",{className:"text-sm",children:"No recent activities"})})})]}),Ne&&t.jsxs("div",{className:"relative bg-gray-200 dark:bg-gray-800 rounded-2xl  hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700 lg:col-span-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Activity Calendar"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{className:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 dark:text-white",onClick:()=>T(R=>new Date(R.getFullYear(),R.getMonth()-1,1)),"aria-label":"Previous month",children:t.jsx(DF,{className:"w-4 h-4"})}),t.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-200 ",children:Ct(G)}),t.jsx("button",{className:"p-1.5 rounded hover:bg-gray-100 dark:hover:bg-gray-700 dark:text-white",onClick:()=>T(R=>new Date(R.getFullYear(),R.getMonth()+1,1)),"aria-label":"Next month",children:t.jsx(OF,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 overflow-x-auto",children:[t.jsxs("div",{className:"grid grid-cols-7 text-[10px] sm:text-xs font-medium text-gray-500 dark:text-gray-300 mb-2",children:[t.jsx("div",{className:"text-center",children:"Mon"}),t.jsx("div",{className:"text-center",children:"Tue"}),t.jsx("div",{className:"text-center",children:"Wed"}),t.jsx("div",{className:"text-center",children:"Thu"}),t.jsx("div",{className:"text-center",children:"Fri"}),t.jsx("div",{className:"text-center",children:"Sat"}),t.jsx("div",{className:"text-center",children:"Sun"})]}),t.jsx("div",{className:"grid grid-cols-7 gap-1.5 sm:gap-2",children:Dt(G).map((R,ce)=>{if(!R)return t.jsx("div",{className:"flex items-center justify-center h-10 sm:h-10 aspect-square rounded border border-dashed border-gray-300 dark:border-gray-700 bg-gray-200 dark:bg-gray-900/20"},ce);const de=Me(R),ue=Me(new Date)===de,Pe=Me(_)===de,ve=ee.filter(Ve=>{if(!Ve.date)return!1;const Ge=new Date(Ve.date);return Me(Ge)===de}).length>0;return t.jsxs("button",{onClick:()=>F(R),className:`flex items-center justify-center relative aspect-square h-10 w-10 sm:h-10 sm:w-10 rounded border p-0 overflow-hidden transition-colors
          ${Pe?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-sm":ve?"border-green-400 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-700 bg-gray-200 dark:bg-gray-800"}`,children:[t.jsx("span",{className:`text-[10px] sm:text-xs leading-none ${ue?"font-semibold text-blue-600 dark:text-blue-400":ve?"font-semibold text-green-600 dark:text-green-400":"text-gray-700 dark:text-gray-200"}`,children:R.getDate()}),Pe&&t.jsx("span",{className:"absolute inset-x-1 bottom-1 h-1 rounded-full bg-blue-200 dark:bg-blue-500/50"}),ve&&!Pe&&t.jsx("span",{className:"absolute top-1 right-1 w-1.5 h-1.5 rounded-full bg-green-500"})]},ce)})})]}),t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsx("div",{className:"text-xs font-semibold tracking-wide uppercase text-gray-500 dark:text-gray-400",children:Me(_)}),(()=>{const R=ee.filter(ce=>{if(!ce.date)return!1;const de=new Date(ce.date);return Me(de)===Me(_)});return R.length>0?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Activities (",R.length,")"]}),t.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:R.map((ce,de)=>t.jsx("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 flex-shrink-0 ${ce.type==="MEETING"?"bg-blue-500":"bg-green-500"}`}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white truncate",children:ce.title}),ce.description&&t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 truncate",children:ce.description}),ce.lead&&t.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:["Lead: ",ce.lead.firstName," ",ce.lead.lastName]})]})]})},de))})]}):null})(),t.jsxs("button",{onClick:Mt,className:"w-full inline-flex items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 px-4 py-3 text-sm font-semibold text-white shadow hover:from-blue-500 hover:to-indigo-500 transition-all",children:[t.jsx(RF,{className:"w-4 h-4"}),"Plan tasks for this day"]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Jump straight into Task Management with this date prefilled. Ideal for scheduling follow-ups, reminders, or any activity uncovered on the calendar."})]})]})]}),Nt&&t.jsxs("div",{className:"lg:col-span-1 bg-gray-200 dark:bg-gray-800 rounded-2xl  hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700 mt-6 lg:mt-0",children:[t.jsx("div",{className:"flex justify-between items-center mb-6",children:t.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(MF,{className:"text-yellow-500"}),"Performance"]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/20 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Win Rate"}),t.jsx(o9,{className:"text-blue-600 dark:text-blue-400"})]}),t.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:ae?"...":`${q?.conversion.winRate||0}%`}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Deals won vs lost"})]}),t.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/20 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Conversion Rate"}),t.jsx(py,{className:"text-green-600 dark:text-green-400"})]}),t.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:ae?"...":`${q?.conversion.conversionRate||0}%`}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:ae?"":`${q?.conversion.convertedLeads||0} of ${q?.conversion.totalLeads||0} leads`})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Avg Sales Cycle"}),t.jsx("p",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:ae?"...":`${q?.conversion.avgSalesCycleDays||0}d`})]}),t.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Avg Response"}),t.jsx("p",{className:"text-xl font-bold text-orange-600 dark:text-orange-400",children:ae?"...":`${q?.conversion.avgResponseTimeHours||0}h`})]})]})]})]}),Nt&&t.jsx("div",{className:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700 mt-6 lg:mt-0",children:se?t.jsx("div",{className:"flex items-center justify-center py-8 h-full",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"})}):t.jsx(EP,{data:xe,title:"System Activity Trends (12 Months)",height:350,dataKeys:[{key:"activities",color:"#6366F1",name:"Activities"}]})})]}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8",children:[_t&&t.jsxs("div",{className:"bg-gray-200 dark:bg-gray-800 rounded-2xl hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700",children:[t.jsx("div",{className:"flex justify-between items-center mb-6",children:t.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(tC,{className:"text-green-500"}),"Revenue Metrics"]})}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[{label:"Total Revenue",value:q?.revenue.total||0,bg:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20",color:"text-green-600 dark:text-green-400",icon:t.jsx(tC,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),isCurrency:!0},{label:"Avg Deal Size",value:q?.revenue.avgDealSize||0,bg:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",color:"text-blue-600 dark:text-blue-400",icon:t.jsx(py,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),isCurrency:!0},{label:"Won Deals",value:q?.revenue.wonDeals||0,bg:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20",color:"text-purple-600 dark:text-purple-400",icon:t.jsx(J2,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})},{label:"Active Deals",value:q?.revenue.activeDeals||0,bg:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20",color:"text-orange-600 dark:text-orange-400",icon:t.jsx(IF,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})},{label:"Lost Deals",value:q?.revenue.lostDeals||0,bg:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20",color:"text-red-600 dark:text-red-400",icon:t.jsx(UF,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}].map((R,ce)=>t.jsxs("div",{className:`p-4 rounded-lg ${R.bg} flex flex-col`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[R.icon,t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:R.label})]}),t.jsx("p",{className:`text-2xl font-bold ${R.color}`,children:ae?"...":R.isCurrency?new Intl.NumberFormat("en-US",{style:"currency",currency:q?.revenue?.currency?.code&&["USD","EUR","GBP","INR","JPY","CAD","AUD"].includes(q.revenue.currency.code)?q.revenue.currency.code:"USD",maximumFractionDigits:0}).format(R.value):R.value.toLocaleString()})]},ce))})]}),vt&&t.jsxs("div",{className:"bg-gray-200 dark:bg-gray-800 rounded-2xl hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700",children:[t.jsx("div",{className:"flex justify-between items-center mb-6",children:t.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(rC,{className:"text-blue-500"}),"Activity & Engagement"]})}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[{label:"Total Calls",value:q?.activity.totalCalls||0,bg:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",color:"text-blue-600 dark:text-blue-400",icon:t.jsx(rC,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})},{label:"Total Tasks",value:q?.activity.totalTasks||0,bg:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20",color:"text-purple-600 dark:text-purple-400",icon:t.jsx(eC,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})},{label:"Completed Tasks",value:q?.activity.completedTasks||0,bg:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20",color:"text-green-600 dark:text-green-400",icon:t.jsx(J2,{className:"w-5 h-5 text-green-600 dark:text-green-400"})},{label:"Task Completion",value:q?.activity.taskCompletionRate||0,bg:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20",color:"text-orange-600 dark:text-orange-400",icon:t.jsx(py,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}].map((R,ce)=>t.jsxs("div",{className:`p-4 rounded-lg ${R.bg} flex flex-col`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[R.icon,t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:R.label})]}),t.jsx("p",{className:`text-2xl font-bold ${R.color}`,children:ae?"...":R.label.includes("Rate")?`${R.value}%`:R.value.toLocaleString()})]},ce))})]})]}),t.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[_t&&t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700",children:se?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"})}):t.jsx(yie,{data:U,title:"Revenue Trends (12 Months)",height:350,dataKeys:[{key:"revenue",color:"#10B981",name:"Revenue"}],valueFormatter:R=>new Intl.NumberFormat("en-US",{style:"currency",currency:q?.revenue?.currency?.code&&["USD","EUR","GBP","INR","JPY","CAD","AUD"].includes(q.revenue.currency.code)?q.revenue.currency.code:"USD",maximumFractionDigits:0}).format(R)})}),Xe&&t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700",children:se?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"})}):t.jsx(EP,{data:Q,title:"Lead Conversion Funnel",height:350,dataKeys:[{key:"value",color:"#F59E0B",name:"Count"}]})}),Xe&&t.jsx("div",{className:"bg-gradient-to-br from-white to-blue-50 dark:from-gray-800 dark:to-gray-900 rounded-2xl hover:shadow-2xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700",children:se?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):t.jsx(vie,{data:ge,title:"Sales Pipeline Flow (6 Months)",height:400,dataKeys:[{key:"new",color:"#3B82F6",name:"New Leads"},{key:"contacted",color:"#10B981",name:"Contacted"},{key:"qualified",color:"#F59E0B",name:"Qualified"},{key:"proposal",color:"#8B5CF6",name:"Proposal"},{key:"negotiation",color:"#EC4899",name:"Negotiation"},{key:"closed",color:"#14B8A6",name:"Closed Won"}],gradientId:"pipelineGradient",valueFormatter:R=>new Intl.NumberFormat("en-US",{style:"currency",currency:q?.revenue?.currency?.code&&["USD","EUR","GBP","INR","JPY","CAD","AUD"].includes(q.revenue.currency.code)?q.revenue.currency.code:"USD",maximumFractionDigits:0}).format(R)})})]})]})]})}const Zm=({containerClassName:e="space-y-6 p-6",showTitle:r=!0,titleWidthClassName:a="w-1/4",blocks:s=0,gridColsClassName:n="grid-cols-1",blockHeightClassName:i="h-24",blockClassName:o="",ariaLabel:c="Loading",sizeClassName:u="h-12 w-12"})=>t.jsx("div",{className:e,"aria-busy":"true","aria-label":c,role:"status",children:t.jsxs("div",{className:"animate-pulse",children:[r&&t.jsx("div",{className:`h-8 ${a} mb-4 rounded bg-gray-300 dark:bg-gray-600`}),s>0?t.jsx("div",{className:`grid ${n} gap-6`,children:Array.from({length:s}).map((m,g)=>t.jsx("div",{className:`rounded-xl bg-gray-300 dark:bg-gray-700 ${i} ${o}`},g))}):t.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[t.jsxs("div",{className:`relative ${u}`,children:[t.jsxs("svg",{viewBox:"0 0 50 50",className:"absolute inset-0 animate-spin","aria-hidden":"true",children:[t.jsx("circle",{cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"6",stroke:"#FFFFFF",className:"dark:opacity-10 opacity-60"}),t.jsx("path",{d:`M25 5
                     a 20 20 0 0 1 0 40`,fill:"none",stroke:"#EF444E",strokeWidth:"6",strokeLinecap:"round"}),t.jsx("path",{d:`M25 45
                     a 20 20 0 0 1 0 -40`,fill:"none",stroke:"#2B2C2B",strokeWidth:"6",strokeLinecap:"round"})]}),t.jsx("div",{className:"absolute inset-0 rounded-full blur-md opacity-20 bg-gradient-to-tr from-[#EF444E] to-[#2B2C2B]"})]}),t.jsx("p",{className:"mt-3 text-sm text-[#2B2C2B] dark:text-gray-300",children:"Loading..."})]})]})}),kd=({value:e,onChange:r,placeholder:a="Search...",className:s=""})=>{const n=h.useRef(null),i=o=>{r(o.target.value)};return t.jsxs("div",{className:`relative w-full ${s}`,children:[t.jsx(ma,{className:"input-icon pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500"}),t.jsx("input",{ref:n,type:"text",placeholder:a,value:e,onChange:i,className:"w-full h-11 pl-11 pr-4 border border-gray-200 dark:border-gray-600 rounded-full focus:outline-none focus:ring-2 focus:ring-brand-blue focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-200",autoComplete:"off",spellCheck:"false","aria-label":a,name:"search"})]})},qr=({title:e="No users found",description:r="Try adjusting your filters or search terms. You can also clear all filters to see all users.",showClearButton:a=!1,onClear:s,icon:n,className:i="",isError:o=!1})=>t.jsxs("div",{className:`flex flex-col items-center ${i} h-full`,children:[n&&t.jsx("div",{className:"mb-4",children:n}),t.jsx("h3",{className:`text-lg font-medium mb-2 ${o?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:e}),t.jsx("p",{className:`${o?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"} mb-4 text-center max-w-md`,children:r}),a&&t.jsx("button",{onClick:s,className:"flex items-center px-4 py-2.5 bg-blue-700 text-white rounded-full hover:bg-blue-600 transition-colors",children:"Clear all filters"})]}),Yr=({value:e,onChange:r,options:a,placeholder:s="Select option",label:n,className:i=""})=>t.jsxs("div",{className:`relative ${i}`,children:[n&&t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n}),t.jsxs("div",{className:"relative max-w-full",children:[t.jsx(Gl,{className:"pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500"}),t.jsxs("select",{value:typeof e=="boolean"?e.toString():e,onChange:o=>{const c=o.target.value;r(c==="true"?!0:c==="false"?!1:c)},style:{WebkitAppearance:"none",backgroundImage:"none",lineHeight:"44px",verticalAlign:"middle"},className:"w-full max-w-full h-11 pl-11 pr-8 border border-gray-200 dark:border-gray-600 rounded-full focus:ring-2 focus:ring-brand-blue focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white appearance-none cursor-pointer transition-colors duration-200 text-center leading-[44px]",children:[t.jsx("option",{value:"",children:s}),a.map(o=>t.jsx("option",{value:String(o.value),children:o.label},String(o.value)))]}),t.jsx(xn,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500 pointer-events-none"})]})]}),to=({currentPage:e,itemsPerPage:r,totalItems:a,onItemsPerPageChange:s,rightNode:n,columnConfig:i})=>{const[o,c]=h.useState(!1),u=a===0?0:(e-1)*r+1,m=Math.min(e*r,a),g=f=>{if(!i)return;const{visibleColumns:y,onChange:p,minVisible:b=1}=i;if(!y.includes(f)){p([...y,f]);return}y.length<=b||p(y.filter(v=>v!==f))};return t.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 px-3 sm:px-4 py-2",children:[t.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Per Page"}),t.jsx("select",{value:String(r),onChange:f=>s?.(Number(f.target.value)),className:"h-9 px-3 rounded-md border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[10,20,50,100].map(f=>t.jsx("option",{value:f,children:f},f))}),t.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[u," - ",m," of ",a]})]}),t.jsxs("div",{className:"relative flex items-center gap-2",children:[n,i&&t.jsxs("div",{className:"relative",children:[t.jsx("button",{type:"button",onClick:()=>c(f=>!f),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500",title:"Configure columns",children:t.jsx(Ui,{className:"w-4 h-4"})}),o&&t.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-lg z-20",children:[t.jsx("div",{className:"px-3 py-2 border-b border-gray-100 dark:border-gray-700 text-xs font-medium text-gray-500 dark:text-gray-400",children:"Columns"}),t.jsx("div",{className:"max-h-64 overflow-y-auto py-1",children:i.columns.map(f=>{const y=i.visibleColumns.includes(f.id);return t.jsxs("label",{className:"flex items-center px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer gap-2",children:[t.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-[#ef444e] focus:ring-[#ef444e]",checked:y,onChange:()=>g(f.id)}),t.jsx("span",{className:"truncate",children:f.label})]},f.id)})})]})]})]})]})},wie=()=>{const{hasPermission:e}=xr(),{refreshRolesCount:r}=jn(),{t:a}=wn(),s=mt(),[n,i]=h.useState([]),[o,c]=h.useState(!0),[u,m]=h.useState(!1),[g,f]=h.useState(!1),[y,p]=h.useState(!1),[b,j]=h.useState(null),[v,N]=h.useState(!1),[k,E]=h.useState({}),[C,S]=h.useState(""),[P,D]=h.useState(!0),[I,H]=h.useState(null),[W,K]=h.useState("card"),[B,z]=h.useState(["name","description","status","usersCount","permissionsCount"]),{searchValue:q,debouncedSearchValue:J,setSearch:ae}=dd("",500);h.useEffect(()=>{ne()},[J,C]),h.useEffect(()=>{try{const Q=localStorage.getItem("roles_visible_columns");if(Q){const V=JSON.parse(Q);Array.isArray(V)&&V.every(ge=>typeof ge=="string")&&z(V)}}catch{}},[]),h.useEffect(()=>{try{localStorage.setItem("roles_visible_columns",JSON.stringify(B))}catch{}},[B]);const ne=async()=>{try{g?m(!0):c(!0),H(null);const Q=await Ga.getRoles({search:J,status:C||void 0}),V=Q.data?.roles??Q.roles??Q;i(Array.isArray(V)?V:[]),D(!0),f(!0)}catch(Q){console.error("Error fetching roles:",Q);const V=Q?.response?.data?.message||"Failed to load roles";if(M.error(V,{toastId:"roles_fetch_error"}),J){D(!1),H("Backend search not available, using frontend filtering");try{const ge=await Ga.getRoles({status:C||void 0}),Te=ge.data?.roles??ge.roles??ge;i(Array.isArray(Te)?Te:[])}catch(ge){console.error("Fallback fetch also failed:",ge),H(V)}}else H(V)}finally{g?m(!1):c(!1)}},re=Q=>{ae(Q)},L=!!J,G=!!C,T=L&&G?"No roles match your search and filters. Try adjusting your filters or search terms. You can also clear all filters to see all roles.":L?"No roles found for your search. Try adjusting your search terms. You can also clear all filters to see all roles.":G?"No roles found for the selected filters. Try adjusting your filters or clear all filters to see all roles.":"No roles found.",_=()=>{S(""),ae("")},F=Q=>B.includes(Q),ee=async()=>{if(b)try{N(!0),await Ga.deleteRole(b.id),await r(),p(!1),j(null),ne(),M.success("Role deleted successfully!")}catch(Q){console.error("Error deleting role:",Q);const V=Q.response?.data?.message||"An error occurred while deleting the role";M.error(V)}finally{N(!1)}},Z=Q=>{j(Q),p(!0)};let U=P?n:n.filter(Q=>Q.name.toLowerCase().includes(J.toLowerCase())||Q.description&&Q.description.toLowerCase().includes(J.toLowerCase()));C==="active"?U=U.filter(Q=>Q.isActive):C==="inactive"&&(U=U.filter(Q=>!Q.isActive));const X=Q=>{E(V=>({...V,[Q]:!V[Q]}))};return t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end gap-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[t.jsxs("div",{className:"w-full sm:w-48",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t.jsx("div",{className:"flex items-center gap-2",children:a("common.search")})}),t.jsx(kd,{value:q,onChange:re,placeholder:a("roles.searchRoles")})]}),t.jsx("div",{className:"w-full sm:w-48",children:t.jsx(Yr,{label:a("common.status"),value:C,onChange:Q=>S(Q||""),options:[{value:"",label:"All Statuses"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]})})]}),e("role.create")&&t.jsxs("button",{onClick:()=>s("/roles/new"),className:"w-full sm:w-auto flex items-center justify-center px-4 py-3 bg-[#ef444e] text-white rounded-full hover:bg-[#f26971] transition-colors text-sm font-semibold",children:[t.jsx(Rt,{className:"h-4 w-4 mr-2"}),a("Add Role")]})]}),t.jsxs("div",{className:"hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto",children:[t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${W==="list"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>K("list"),title:"List view",children:t.jsx(gi,{className:"w-4 h-4"})}),t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${W==="card"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>K("card"),title:"Card view",children:t.jsx(mi,{className:"w-4 h-4"})})]})]}),W==="card"?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o||u?t.jsx("div",{className:"col-span-full",children:t.jsx(Zm,{containerClassName:"p-0",showTitle:!1,blocks:6,gridColsClassName:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",blockHeightClassName:"h-64",ariaLabel:"Loading roles"})}):U.length===0?t.jsx("div",{className:"col-span-full text-center py-20",children:t.jsx(qr,{title:I?"Network or server error":"No roles found",description:I||T,icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),showClearButton:!I&&(L||G),onClear:I?void 0:_,isError:!!I})}):U.map(Q=>t.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 hover:shadow transition-all duration-300 hover:shadow-md overflow-hidden ${Q.isActive?"":"opacity-75"}`,children:[t.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-purple-900 rounded-lg shadow-2xl",children:t.jsx(Gs,{className:"h-5 w-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white",children:Q.name}),t.jsx("p",{className:"text-xs text-purple-800 dark:text-purple-400",children:Q.name==="Admin"?"All permissions":`${Q.permissionsCount??Q.permissions.length} permissions`})]})]}),t.jsxs("div",{className:"flex items-center gap-2 ",children:[e("role.update")&&t.jsx("button",{onClick:()=>s(`/roles/${Q.id}/edit`,{state:{role:Q}}),className:"p-2 text-gray-400 dark:text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:t.jsx(er,{className:"h-4 w-4"})}),e("role.delete")&&t.jsx("button",{onClick:()=>Z(Q),className:"p-2 text-gray-400 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:t.jsx(ht,{className:"h-4 w-4"})})]})]}),Q.description&&t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 leading-relaxed",children:Q.description})]}),t.jsxs("div",{className:"",children:[t.jsxs("div",{className:"space-y-1 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Status"}),t.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Q.isActive?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400"}`,children:[t.jsx(ct,{className:`h-3 w-3 mr-1 ${Q.isActive?"":"opacity-50"}`}),Q.isActive?"Active":"Inactive"]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Users"}),t.jsxs("div",{className:"flex items-center text-xs text-gray-600 dark:text-gray-400",children:[t.jsx(Os,{className:"h-3 w-3 mr-2"}),Q.usersCount??Q.users?.length??0]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Permissions"}),t.jsxs("div",{className:"flex items-center text-xs text-gray-600 dark:text-gray-400",children:[t.jsx(W9,{className:"h-3 w-3 mr-2"}),Q.name==="Admin"?"All":Q.permissionsCount??Q.permissions.length]})]})]}),t.jsx("div",{className:"p-4  border-t border-gray-200 dark:border-gray-700",children:t.jsx("div",{className:"flex flex-wrap gap-2",children:(()=>{const V={};(Q.permissions||[]).forEach(se=>{const De=se.module||"General";V[De]||(V[De]=[]),V[De].push(se.name)});const ge=Object.keys(V),Te=!!k[Q.id],xe=Te?ge:ge.slice(0,3),qe=ge.length-(Te?3:xe.length);return t.jsxs(t.Fragment,{children:[xe.map(se=>t.jsxs("div",{className:"flex items-center flex-wrap gap-1",children:[t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs  bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:se}),V[se].map((De,Me)=>t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400",children:De},`${se}-${Me}`))]},se)),(ge.length>3||Te)&&t.jsx("button",{onClick:()=>X(Q.id),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors cursor-pointer",children:Te?"Show less":`+${qe} more`})]})})()})})]})]},Q.id))}):t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 overflow-hidden",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"mb-4",children:t.jsx(to,{currentPage:1,itemsPerPage:U.length,totalItems:U.length,onItemsPerPageChange:()=>{},columnConfig:{columns:[{id:"name",label:"Name"},{id:"description",label:"Description"},{id:"status",label:"Status"},{id:"usersCount",label:"Users"},{id:"permissionsCount",label:"Permissions"}],visibleColumns:B,onChange:z,minVisible:1}})}),t.jsx("div",{className:"overflow-hidden relative",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${F("name")?"":"hidden"}`,children:"Name"}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${F("description")?"":"hidden"}`,children:"Description"}),t.jsx("th",{className:`px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${F("status")?"":"hidden"}`,children:"Status"}),t.jsx("th",{className:`px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${F("usersCount")?"":"hidden"}`,children:"Users"}),t.jsx("th",{className:`px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${F("permissionsCount")?"":"hidden"}`,children:"Permissions"}),t.jsx("th",{className:"px-6 py-3 text-end text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),o||u?t.jsx("tbody",{children:t.jsx("tr",{children:t.jsx("td",{colSpan:B.length+1,className:"px-6 py-12 text-center",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})})})}):t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:U.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:B.length+1,className:"px-6 py-12 text-center",children:t.jsx(qr,{title:I?"Network or server error":"No roles found",description:I||T,icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),showClearButton:!I&&(L||G),onClear:I?void 0:_,isError:!!I})})}):U.map(Q=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${F("name")?"":"hidden"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-purple-900 rounded-lg shadow-2xl",children:t.jsx(Gs,{className:"h-4 w-4 text-white"})}),t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Q.name})]})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${F("description")?"":"hidden"}`,children:t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-xs truncate",children:Q.description||"-"})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-center ${F("status")?"":"hidden"}`,children:t.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Q.isActive?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400"}`,children:[t.jsx(ct,{className:`h-3 w-3 mr-1 ${Q.isActive?"":"opacity-50"}`}),Q.isActive?"Active":"Inactive"]})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500 dark:text-gray-400 ${F("usersCount")?"":"hidden"}`,children:Q.usersCount??Q.users?.length??0}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500 dark:text-gray-400 ${F("permissionsCount")?"":"hidden"}`,children:Q.name==="Admin"?"All":Q.permissionsCount??Q.permissions.length}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-end text-sm font-medium",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e("role.update")&&t.jsx("button",{onClick:()=>s(`/roles/${Q.id}/edit`,{state:{role:Q}}),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Edit Role",children:t.jsx(er,{className:"h-4 w-4"})}),e("role.delete")&&t.jsx("button",{onClick:()=>Z(Q),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete Role",children:t.jsx(ht,{className:"h-4 w-4"})})]})})]},Q.id))})]})})})]})}),t.jsx(vm,{open:y,title:"Delete Role",description:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-full mr-4",children:t.jsx(ht,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Are you sure?"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This action cannot be undone."})]})]}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["You are about to delete the role"," ",t.jsxs("strong",{children:['"',b?.name,'"']}),". This will permanently remove the role and all its associated permissions."]})]}),confirmText:"Delete Role",cancelText:"Cancel",loading:v,onConfirm:ee,onClose:()=>{v||p(!1)}})]})},jie=()=>{const e=mt(),{companySettings:r,isLoading:a}=Hr(),[s,n]=h.useState(null),i=[{id:"user-management",name:"User Management",description:"Manage users, roles, and permissions for your CRM system",icon:t.jsx(Os,{className:"w-6 h-6"}),color:"bg-emerald-500",items:[{name:"Users",description:"Create, edit, and manage user accounts",path:"/users"},{name:"Roles & Permissions",description:"Define roles and assign permissions",path:"/roles"},{name:"Teams",description:"Manage teams and reporting structures",path:"/business-settings/teams"}]},{id:Ci.CATEGORIES.COMPANY,name:"Company Information",description:"Basic company details, logo, and contact information",icon:t.jsx(Pl,{className:"w-6 h-6"}),color:"bg-blue-500",items:[{name:"Company Profile",description:"Name, address, logo, GST details",path:"/business-settings/company"}]},{id:Ci.CATEGORIES.CURRENCY_TAX,name:"Currency & Tax",description:"Currency settings, tax rates, and financial configuration",icon:t.jsx(Hs,{className:"w-6 h-6"}),color:"bg-green-500",items:[{name:"Currency Settings",description:"Primary currency, exchange rates",path:"/business-settings/currency"}]},{id:Ci.CATEGORIES.LEAD_SOURCES,name:"Lead Sources",description:"Configurable dropdown options for lead sources",icon:t.jsx(Os,{className:"w-6 h-6"}),color:"bg-purple-500",items:[{name:"Lead Sources",description:"Manage lead source options",path:"/business-settings/lead-sources"},{name:"Lead Form Fields",description:"Configure lead form fields - add, hide, show, make required",path:"/business-settings/lead-fields"}]},{id:"tags",name:"Tags",description:"Manage tags for organizing leads and deals",icon:t.jsx(Fo,{className:"w-6 h-6"}),color:"bg-blue-500",items:[{name:"Tags Management",description:"Create and manage tags",path:"/business-settings/tags"}]},{id:"product-config",name:"Product Configuration",description:"Configure product categories and measurement units",icon:t.jsx(Ka,{className:"w-6 h-6"}),color:"bg-green-500",items:[{name:"Product Categories",description:"Create and manage product categories",path:"/business-settings/product-categories"},{name:"Unit Types",description:"Manage measurement units for products",path:"/business-settings/unit-types"}]},{id:"industries",name:"Industries",description:"Manage industry options for leads and companies",icon:t.jsx(Pl,{className:"w-6 h-6"}),color:"bg-green-500",items:[{name:"Industries Management",description:"Create and manage industries",path:"/business-settings/industries"}]},{id:Ci.CATEGORIES.LEAD_STATUSES,name:"Deal Status",description:"Customizable  deal statuses",icon:t.jsx(lD,{className:"w-6 h-6"}),color:"bg-orange-500",items:[{name:"Deal Status Management",description:"Configure dynamic  deal statuses",path:"/business-settings/lead-statuses"}]},{id:Ci.CATEGORIES.TEMPLATES,name:"Document Templates",description:"Quotation, invoice, and email templates",icon:t.jsx(Lt,{className:"w-6 h-6"}),color:"bg-red-500",items:[{name:"Invoice Templates",description:"Invoice formats and layouts",path:"/business-settings/invoice-templates"},{name:"Document Numbering",description:"Configure prefixes, suffixes, and numbering formats",path:"/business-settings/numbering"},{name:"Terms & Conditions",description:"Legal terms and conditions templates",path:"/business-settings/terms-and-conditions"}]},{id:Ci.CATEGORIES.NOTIFICATIONS,name:"Notification Settings",description:"Email, SMS, and notification preferences",icon:t.jsx($l,{className:"w-6 h-6"}),color:"bg-yellow-500",items:[{name:"Channel Settings",description:"Email, SMS, WhatsApp preferences",path:"/business-settings/notifications"}]},{id:Ci.CATEGORIES.INTEGRATIONS,name:"API & Integrations",description:"WhatsApp, SMS, email gateway, and third-party integrations",icon:t.jsx(jb,{className:"w-6 h-6"}),color:"bg-teal-500",items:[{name:"Communication Settings",description:"Templates",path:"/business-settings/communication"},{name:"Lead Integrations",description:"Meta Ads, IndiaMart, TradeIndia integrations",path:"/business-settings/integrations/leads"},{name:"Communication APIs",description:"WhatsApp, SMS, Email gateways",path:"/business-settings/integrations/communication"}]}];return a?t.jsx(Nn,{message:"Loading business settings..."}):t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl",children:t.jsx(Ui,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Business Settings"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure your CRM system and business processes"})]})]}),r&&t.jsx(Ee,{variant:"GRADIENT",className:"border-l-4 border-l-blue-500",children:t.jsx(tt,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:t.jsx(Pl,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.name}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.email,"  ",r.timezone]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"GST Number"}),t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.gstNumber||"Not configured"})]})]})})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(o=>t.jsxs(Ee,{variant:"ELEVATED",className:"group hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:()=>n(o.id===s?null:o.id),children:[t.jsx(kt,{className:"pb-3",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:`p-3 ${o.color} rounded-xl text-white group-hover:scale-110 transition-transform duration-300`,children:o.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:o.name}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:o.description})]}),t.jsx(Vc,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${s===o.id?"rotate-90":"group-hover:translate-x-1"}`})]})}),s===o.id&&t.jsx(tt,{className:"pt-0",children:t.jsx("div",{className:"space-y-2 border-t border-gray-200 dark:border-gray-700 pt-4",children:o.items.map((c,u)=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer group/item",onClick:m=>{m.stopPropagation(),e(c.path)},children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white group-hover/item:text-blue-600 dark:group-hover/item:text-blue-400",children:c.name}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:c.description})]}),t.jsx(Vc,{className:"w-4 h-4 text-gray-400 group-hover/item:text-blue-500 group-hover/item:translate-x-1 transition-all"})]},u))})})]},o.id))})]})},Tu={getAll:async()=>(await oe.get("/teams")).data,getById:async e=>(await oe.get(`/teams/${e}`)).data,create:async e=>(await oe.post("/teams",e)).data,update:async(e,r)=>(await oe.patch(`/teams/${e}`,r)).data,delete:async e=>(await oe.delete(`/teams/${e}`)).data},Nie=()=>{const[e,r]=h.useState(!0),[a,s]=h.useState([]),[n,i]=h.useState([]),[o,c]=h.useState(!1),[u,m]=h.useState(null),[g,f]=h.useState(null),[y,p]=h.useState(""),[b,j]=h.useState({name:"",description:"",managerId:"",memberIds:[]});h.useEffect(()=>{v()},[]);const v=async()=>{try{const[D,I]=await Promise.all([Tu.getAll(),Er.getUsers()]);s(D);const H=I.data?.users||(Array.isArray(I.data)?I.data:[])||[];i(H)}catch(D){console.error("Error fetching data:",D),M.error("Failed to load teams")}finally{r(!1)}},N=D=>{D?(m(D),j({name:D.name,description:D.description||"",managerId:D.managerId?.toString()||"",memberIds:D.members?.map(I=>I.id.toString()).filter(I=>I!==D.managerId?.toString())||[]})):(m(null),j({name:"",description:"",managerId:"",memberIds:[]})),c(!0)},k=()=>{c(!1),m(null)},E=async D=>{D.preventDefault();try{const I={name:b.name,description:b.description,managerId:b.managerId?parseInt(b.managerId):void 0,memberIds:b.memberIds.map(H=>parseInt(H))};u?(await Tu.update(u.id,I),M.success("Team updated successfully")):(await Tu.create(I),M.success("Team created successfully")),k(),v()}catch(I){console.error("Error saving team:",I),M.error("Failed to save team")}},C=async D=>{if(window.confirm("Are you sure you want to delete this team? Members will be unassigned."))try{await Tu.delete(D),M.success("Team deleted successfully"),v()}catch(I){console.error("Error deleting team:",I),M.error("Failed to delete team")}},S=D=>{j(I=>{const H=I.memberIds;return H.includes(D)?{...I,memberIds:H.filter(W=>W!==D)}:{...I,memberIds:[...H,D]}})},P=a.filter(D=>D.name.toLowerCase().includes(y.toLowerCase()));return e?t.jsx(Nn,{}):t.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Teams"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Manage teams, managers, and members"})]}),t.jsx(me,{variant:"PRIMARY",onClick:()=>N(),icon:t.jsx(Rt,{size:18}),children:"Create Team"})]}),t.jsxs(Ee,{children:[t.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"relative max-w-sm",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search teams...",value:y,onChange:D=>p(D.target.value),className:"pl-9 pr-4 py-2 w-full text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500"})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left",children:[t.jsx("thead",{className:"text-xs text-gray-700 dark:text-gray-300 uppercase bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 font-medium",children:"Team Name"}),t.jsx("th",{className:"px-6 py-4 font-medium",children:"Manager"}),t.jsx("th",{className:"px-6 py-4 font-medium",children:"Members"}),t.jsx("th",{className:"px-6 py-4 font-medium",children:"Created At"}),t.jsx("th",{className:"px-6 py-4 font-medium text-right",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:P.length>0?P.map(D=>t.jsxs("tr",{className:"bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:D.name}),t.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-gray-400",children:D.manager?`${D.manager.firstName} ${D.manager.lastName}`:"-"}),t.jsxs("td",{className:"px-6 py-4 text-gray-600 dark:text-gray-400",children:[D._count?.members||0," Members"]}),t.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-gray-400",children:new Date(D.createdAt).toLocaleDateString()}),t.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[t.jsx("button",{onClick:()=>f(D),className:"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300 transition-colors",title:"View Details",children:t.jsx(Bt,{size:18})}),t.jsx("button",{onClick:()=>N(D),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:t.jsx(oD,{size:18})}),t.jsx("button",{onClick:()=>C(D.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors",children:t.jsx(ht,{size:18})})]})]},D.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:"No teams found"})})})]})})]}),o&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-lg overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:u?"Edit Team":"Create Team"}),t.jsx("button",{onClick:k,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:""})]}),t.jsxs("form",{onSubmit:E,className:"p-4 space-y-4 max-h-[80vh] overflow-y-auto",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Team Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:b.name,onChange:D=>j({...b,name:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),t.jsx("textarea",{value:b.description,onChange:D=>j({...b,description:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500",rows:2})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team Lead (Manager)"}),t.jsxs("select",{value:b.managerId,onChange:D=>{const I=D.target.value;j(H=>({...H,managerId:I,memberIds:H.memberIds.filter(W=>W!==I)}))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"Select Manager"}),n.map(D=>t.jsxs("option",{value:D.id,children:[D.firstName," ",D.lastName]},D.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team Members"}),t.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg max-h-48 overflow-y-auto divide-y divide-gray-200 dark:divide-gray-700",children:n.filter(D=>(!D.teamId||u&&D.teamId===u.id)&&D.id.toString()!==b.managerId).map(D=>t.jsxs("div",{className:"flex items-center p-2 hover:bg-gray-50 dark:hover:bg-gray-700 gap-3",children:[t.jsx("input",{type:"checkbox",checked:b.memberIds.includes(D.id.toString()),onChange:()=>S(D.id.toString()),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[D.firstName," ",D.lastName," (",D.email,")",D.team&&t.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:["(",D.team.name,")"]})]})]},D.id))}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Select users to add to this team."})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[t.jsx(me,{variant:"SECONDARY",onClick:k,type:"button",children:"Cancel"}),t.jsx(me,{variant:"PRIMARY",type:"submit",children:u?"Update Team":"Create Team"})]})]})]})}),g&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-lg overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Team Details"}),t.jsx("button",{onClick:()=>f(null),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:""})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Team Name"}),t.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white mt-1",children:g.name})]}),g.description&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),t.jsx("p",{className:"text-base text-gray-700 dark:text-gray-300 mt-1",children:g.description})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Team Manager"}),t.jsxs("div",{className:"flex items-center mt-2 p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-100 dark:border-blue-800",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-800 flex items-center justify-center text-blue-600 dark:text-blue-300 font-bold mr-3",children:g.manager?.firstName?.[0]||"M"}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[g.manager?.firstName," ",g.manager?.lastName]}),t.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Team Lead"})]})]})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Team Members (",g.members?.length||0,")"]}),t.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg divide-y divide-gray-200 dark:divide-gray-700 max-h-60 overflow-y-auto",children:g.members&&g.members.length>0?g.members.map(D=>t.jsxs("div",{className:"p-3 flex items-center hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[t.jsxs("div",{className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-400 font-medium text-xs mr-3",children:[D.firstName[0],D.lastName[0]]}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[D.firstName," ",D.lastName]})]},D.id)):t.jsx("p",{className:"p-4 text-sm text-gray-500 dark:text-gray-400 text-center",children:"No members assigned to this team."})})]})]}),t.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:t.jsx(me,{variant:"SECONDARY",onClick:()=>f(null),children:"Close"})})]})})]})},kie=()=>{const e=mt(),{companySettings:r,updateCompanySettings:a,isLoading:s}=Hr(),[n,i]=h.useState({name:"",email:"",phone:"",address:"",website:"",gstNumber:"",panNumber:"",cinNumber:"",timezone:"Asia/Kolkata",fiscalYearStart:"04-01",industry:"",employeeCount:"",description:""}),[o,c]=h.useState(!1),[u,m]=h.useState(null);h.useEffect(()=>{r&&(i(r),r.logo&&m(r.logo))},[r]);const g=(v,N)=>{i(k=>({...k,[v]:N}))},f=v=>{const N=v.target.files?.[0];if(N){if(N.size>5*1024*1024){M.error("Logo file size must be less than 5MB");return}const k=new FileReader;k.onload=E=>{const C=E.target?.result;m(C),i(S=>({...S,logo:C}))},k.readAsDataURL(N)}},y=async v=>{v.preventDefault(),c(!0);try{await a(n),M.success("Company settings updated successfully")}catch(N){console.error("Failed to update company settings:",N),M.error("Failed to update company settings")}finally{c(!1)}};if(s)return t.jsx(Nn,{message:"Loading company settings..."});const p=["Asia/Kolkata","America/New_York","Europe/London","Asia/Tokyo","Australia/Sydney","America/Los_Angeles","Europe/Paris","Asia/Singapore"],b=["Technology","Healthcare","Finance","Education","Manufacturing","Retail","Real Estate","Consulting","Marketing","Other"],j=["1-10","11-50","51-200","201-500","501-1000","1000+"];return t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"sm",onClick:()=>e("/business-settings"),className:"p-2",children:t.jsx(vr,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl",children:t.jsx(Pl,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Company Settings"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage your company information and basic details"})]})]})]}),t.jsxs("form",{onSubmit:y,className:"space-y-6",children:[t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(Pl,{className:"w-5 h-5"}),"Basic Information"]})}),t.jsx(tt,{className:"space-y-4",children:t.jsxs("div",{className:"flex items-start gap-6",children:[t.jsxs("div",{className:"flex-shrink-0",children:[t.jsx("div",{className:"w-24 h-24 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg flex items-center justify-center overflow-hidden",children:u?t.jsx("img",{src:u,alt:"Company Logo",className:"w-full h-full object-cover"}):t.jsxs("div",{className:"text-center",children:[t.jsx(Ri,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Logo"})]})}),t.jsx("input",{type:"file",id:"logo-upload",accept:"image/*",onChange:f,className:"hidden"}),t.jsx(me,{type:"button",variant:"OUTLINE",size:"sm",onClick:()=>document.getElementById("logo-upload")?.click(),className:"mt-2 w-full text-xs",children:"Upload Logo"})]}),t.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Company Name *"}),t.jsx("input",{type:"text",value:n.name||"",onChange:v=>g("name",v.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Industry"}),t.jsxs("select",{value:n.industry||"",onChange:v=>g("industry",v.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[t.jsx("option",{value:"",children:"Select Industry"}),b.map(v=>t.jsx("option",{value:v,children:v},v))]})]})]})]})})]}),t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(ir,{className:"w-5 h-5"}),"Contact Information"]})}),t.jsxs(tt,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center gap-1",children:[t.jsx(ir,{className:"w-4 h-4"}),"Email Address *"]}),t.jsx("input",{type:"email",value:n.email||"",onChange:v=>g("email",v.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center gap-1",children:[t.jsx(ba,{className:"w-4 h-4"}),"Phone Number"]}),t.jsx("input",{type:"tel",value:n.phone||"",onChange:v=>g("phone",v.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center gap-1",children:[t.jsx(Lo,{className:"w-4 h-4"}),"Address"]}),t.jsx("textarea",{value:n.address||"",onChange:v=>g("address",v.target.value),rows:3,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center gap-1",children:[t.jsx(ff,{className:"w-4 h-4"}),"Website"]}),t.jsx("input",{type:"url",value:n.website||"",onChange:v=>g("website",v.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://example.com"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center gap-1",children:[t.jsx(Os,{className:"w-4 h-4"}),"Employee Count"]}),t.jsxs("select",{value:n.employeeCount||"",onChange:v=>g("employeeCount",v.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[t.jsx("option",{value:"",children:"Select Range"}),j.map(v=>t.jsx("option",{value:v,children:v},v))]})]})]})]}),t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Business Details"})}),t.jsxs(tt,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"GST Number"}),t.jsx("input",{type:"text",value:n.gstNumber||"",onChange:v=>g("gstNumber",v.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"22AAAAA0000A1Z5"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"PAN Number"}),t.jsx("input",{type:"text",value:n.panNumber||"",onChange:v=>g("panNumber",v.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"AAAAA0000A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"CIN Number"}),t.jsx("input",{type:"text",value:n.cinNumber||"",onChange:v=>g("cinNumber",v.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"U12345AB1234PTC123456"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center gap-1",children:[t.jsx(nr,{className:"w-4 h-4"}),"Fiscal Year Start"]}),t.jsx("input",{type:"text",value:n.fiscalYearStart||"",onChange:v=>g("fiscalYearStart",v.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"MM-DD (e.g., 04-01)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Timezone"}),t.jsx("select",{value:n.timezone||"",onChange:v=>g("timezone",v.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:p.map(v=>t.jsx("option",{value:v,children:v},v))})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Company Description"}),t.jsx("textarea",{value:n.description||"",onChange:v=>g("description",v.target.value),rows:3,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Brief description of your company..."})]})]})]}),t.jsxs("div",{className:"flex gap-4 justify-end",children:[t.jsx(me,{type:"button",variant:"OUTLINE",onClick:()=>e("/business-settings"),disabled:o,children:"Cancel"}),t.jsxs(me,{type:"submit",variant:"PRIMARY",disabled:o,className:"flex items-center gap-2",children:[t.jsx(Ya,{className:"w-4 h-4"}),o?"Saving...":"Save Settings"]})]})]})]})},Sl={getAll:async()=>Ye.get("/taxes"),getById:async e=>Ye.get(`/taxes/${e}`),create:async e=>Ye.post("/taxes",e),update:async(e,r)=>Ye.patch(`/taxes/${e}`,r),delete:async e=>Ye.delete(`/taxes/${e}`)},wu={getAll:async()=>Ye.get("/currencies"),getById:async e=>Ye.get(`/currencies/${e}`),create:async e=>Ye.post("/currencies",e),update:async(e,r)=>Ye.patch(`/currencies/${e}`,r),delete:async e=>Ye.delete(`/currencies/${e}`)},Sie=()=>{const e=mt(),{taxSettings:r,updateTaxSettings:a,isLoading:s}=Hr(),[n,i]=h.useState({defaultRate:18,type:"GST",inclusive:!1,registrationNumber:""}),[o,c]=h.useState(!1),[u,m]=h.useState([]),[g,f]=h.useState(!0),[y,p]=h.useState(!1),[b,j]=h.useState(null),[v,N]=h.useState(""),[k,E]=h.useState(0),[C,S]=h.useState(""),[P,D]=h.useState(!0),[I,H]=h.useState(!1),[W,K]=h.useState([]),[B,z]=h.useState(!0),[q,J]=h.useState(!1),[ae,ne]=h.useState(null),[re,L]=h.useState(""),[G,T]=h.useState(""),[_,F]=h.useState(""),[ee,Z]=h.useState(1),[U,X]=h.useState(!0),[Q,V]=h.useState(!1),[ge,Te]=h.useState(!1);h.useEffect(()=>{r&&i(r)},[r]),h.useEffect(()=>{xe(),qe()},[]);const xe=async()=>{try{const Ne=await Sl.getAll();m(Ne)}catch(Ne){console.error("Failed to fetch taxes",Ne),M.error("Failed to load tax rates")}finally{f(!1)}},qe=async()=>{try{const Ne=await wu.getAll();K(Ne)}catch(Ne){console.error("Failed to fetch currencies",Ne),M.error("Failed to load currencies")}finally{z(!1)}},se=async Ne=>{Ne.preventDefault(),c(!0);try{await a(n),M.success("Tax settings updated successfully")}catch(Nt){console.error("Failed to update settings:",Nt),M.error("Failed to update settings")}finally{c(!1)}},De=()=>{j(null),N(""),E(0),S(""),D(!0),p(!0)},Me=Ne=>{j(Ne),N(Ne.name),E(Number(Ne.rate)),S(Ne.description||""),D(Ne.isActive),p(!0)},Ct=async Ne=>{Ne.preventDefault(),H(!0);try{const Nt={name:v,rate:k,description:C,isActive:P};b?(await Sl.update(b.id,Nt),M.success("Tax rate updated")):(await Sl.create(Nt),M.success("Tax rate created")),p(!1),xe()}catch{M.error("Failed to save tax rate")}finally{H(!1)}},Dt=async Ne=>{if(window.confirm("Are you sure you want to delete this tax rate?"))try{await Sl.delete(Ne),M.success("Tax rate deleted"),xe()}catch{M.error("Failed to delete tax rate")}},Mt=()=>{ne(null),L(""),T(""),F(""),Z(1),X(!0),V(!1),J(!0)},jt=Ne=>{ne(Ne),L(Ne.name),T(Ne.code),F(Ne.symbol),Z(Number(Ne.exchangeRate)),X(Ne.isActive),V(Ne.isDefault),J(!0)},le=async Ne=>{Ne.preventDefault(),Te(!0);try{const Nt={name:re,code:G,symbol:_,exchangeRate:ee,isActive:U,isDefault:Q};ae?(await wu.update(ae.id,Nt),M.success("Currency updated")):(await wu.create(Nt),M.success("Currency created")),J(!1),qe()}catch{M.error("Failed to save currency")}finally{Te(!1)}},Xe=async Ne=>{try{await wu.update(Ne.id,{isDefault:!0}),M.success(`${Ne.name} set as default`),qe()}catch{M.error("Failed to set default currency")}},Ke=async Ne=>{if(window.confirm("Are you sure you want to delete this currency?"))try{await wu.delete(Ne),M.success("Currency deleted"),qe()}catch{M.error("Failed to delete currency")}};return s?t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"})}):t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>e("/business-settings"),className:"p-2",children:t.jsx(vr,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-blue-600 rounded-xl",children:t.jsx(C2,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Currency & Tax Settings"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure currencies and tax calculations"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[t.jsx(Ee,{children:t.jsxs(tt,{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"text-md font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(Qr,{className:"w-5 h-5 text-green-500"}),"Currencies"]}),t.jsx("p",{className:"text-sm text-gray-500",children:"Manage currencies and exchange rates."})]}),t.jsxs(me,{type:"button",variant:"OUTLINE",size:"SM",onClick:Mt,className:"flex items-center gap-1",children:[t.jsx(Rt,{className:"w-4 h-4"}),"Add Currency"]})]}),B?t.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading currencies..."}):t.jsxs("div",{className:"space-y-3",children:[W.map(Ne=>t.jsxs("div",{className:"p-4 border border-gray-100 dark:border-gray-800 rounded-xl bg-white dark:bg-gray-800/50 flex items-center justify-between hover:border-indigo-500/30 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-50 dark:bg-green-900/20 flex items-center justify-center text-green-600 font-bold",children:Ne.symbol}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[Ne.name," (",Ne.code,")"]}),Ne.isDefault&&t.jsx("span",{className:"text-[10px] bg-blue-100 text-blue-600 px-1.5 py-0.5 rounded-full font-medium",children:"Default"}),!Ne.isActive&&t.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded-full font-medium",children:"Inactive"})]}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Rate: 1 USD = ",Ne.exchangeRate," ",Ne.code]})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[!Ne.isDefault&&Ne.isActive&&t.jsx(me,{type:"button",variant:"GHOST",size:"SM",onClick:()=>Xe(Ne),className:"px-2 py-1 text-[10px] font-medium text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20",children:"Set as Default"}),t.jsx(me,{type:"button",variant:"GHOST",size:"SM",onClick:()=>jt(Ne),className:"p-2 text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20",children:"Edit"}),t.jsx(me,{type:"button",variant:"GHOST",size:"SM",onClick:()=>Ke(Ne.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:t.jsx(ht,{className:"w-4 h-4"})})]})]},Ne.id)),W.length===0&&t.jsx("div",{className:"text-center py-8 border-2 border-dashed border-gray-100 dark:border-gray-800 rounded-xl",children:t.jsx("p",{className:"text-sm text-gray-500",children:'No currencies found. Click "Add Currency" to get started.'})})]})]})}),t.jsx(Ee,{children:t.jsxs(tt,{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"text-md font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(kb,{className:"w-5 h-5 text-blue-500"}),"Tax Rates"]}),t.jsx("p",{className:"text-sm text-gray-500",children:"Manage available tax rates for documents."})]}),t.jsxs(me,{type:"button",variant:"OUTLINE",size:"SM",onClick:De,className:"flex items-center gap-1",children:[t.jsx(Rt,{className:"w-4 h-4"}),"Add New Rate"]})]}),g?t.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading rates..."}):t.jsxs("div",{className:"space-y-3",children:[u.map(Ne=>t.jsxs("div",{className:"p-4 border border-gray-100 dark:border-gray-800 rounded-xl bg-white dark:bg-gray-800/50 flex items-center justify-between hover:border-blue-500/30 transition-colors",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[Ne.name," (",Ne.rate,"%)"]}),!Ne.isActive&&t.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded-full font-medium",children:"Inactive"})]}),Ne.description&&t.jsx("p",{className:"text-xs text-gray-500",children:Ne.description})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(me,{type:"button",variant:"GHOST",size:"SM",onClick:()=>Me(Ne),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20",children:"Edit"}),t.jsx(me,{type:"button",variant:"GHOST",size:"SM",onClick:()=>Dt(Ne.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:t.jsx(ht,{className:"w-4 h-4"})})]})]},Ne.id)),u.length===0&&t.jsx("div",{className:"text-center py-8 border-2 border-dashed border-gray-100 dark:border-gray-800 rounded-xl",children:t.jsx("p",{className:"text-sm text-gray-500",children:'No tax rates found. Click "Add New Rate" to get started.'})})]})]})})]}),t.jsx("form",{onSubmit:se,className:"hidden",children:t.jsxs("div",{className:"flex gap-4 justify-end",children:[t.jsx(me,{type:"button",variant:"OUTLINE",onClick:()=>e("/business-settings"),disabled:o,children:"Cancel"}),t.jsxs(me,{type:"submit",variant:"PRIMARY",disabled:o,className:"flex items-center gap-2",children:[t.jsx(Ya,{className:"w-4 h-4"}),o?"Saving...":"Save Settings"]})]})}),q&&t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl w-full max-w-md shadow-2xl border border-gray-100 dark:border-gray-800 overflow-hidden transform transition-all",children:[t.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-800 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/50",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:t.jsx(Qr,{className:"w-5 h-5 text-green-600"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:ae?"Edit Currency":"Add New Currency"})]}),t.jsx("button",{onClick:()=>J(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:t.jsx(ht,{className:"w-5 h-5 text-gray-400"})})]}),t.jsxs("form",{onSubmit:le,className:"p-6 space-y-5",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"Currency Name *"}),t.jsx("input",{type:"text",required:!0,value:re,onChange:Ne=>L(Ne.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 transition-all outline-none",placeholder:"e.g. US Dollar"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"Currency Code *"}),t.jsx("input",{type:"text",required:!0,value:G,onChange:Ne=>T(Ne.target.value.toUpperCase()),className:"w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 transition-all outline-none",placeholder:"e.g. USD",maxLength:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"Symbol *"}),t.jsx("input",{type:"text",required:!0,value:_,onChange:Ne=>F(Ne.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 transition-all outline-none",placeholder:"e.g. $"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"Exchange Rate *"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:t.jsx(C2,{className:"w-4 h-4"})}),t.jsx("input",{type:"number",required:!0,min:"0",step:"0.000001",value:ee,onChange:Ne=>Z(parseFloat(Ne.target.value)),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 transition-all outline-none"})]}),t.jsx("p",{className:"mt-1.5 text-[11px] text-gray-500 italic",children:"Enter how much of this currency equals 1 US Dollar."})]}),t.jsx("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-100 dark:border-gray-800",children:t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[t.jsxs("div",{className:"relative flex items-center",children:[t.jsx("input",{type:"checkbox",checked:U,onChange:Ne=>X(Ne.target.checked),className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border border-gray-300 dark:border-gray-600 checked:border-indigo-600 checked:bg-indigo-600 transition-all"}),t.jsx("svg",{className:"absolute h-3.5 w-3.5 text-white opacity-0 peer-checked:opacity-100 transition-opacity pointer-events-none left-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("polyline",{points:"20 6 9 17 4 12"})})]}),t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 group-hover:text-indigo-600 transition-colors",children:"Active"})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[t.jsxs("div",{className:"relative flex items-center",children:[t.jsx("input",{type:"checkbox",checked:Q,onChange:Ne=>V(Ne.target.checked),className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border border-gray-300 dark:border-gray-600 checked:border-blue-600 checked:bg-blue-600 transition-all"}),t.jsx("svg",{className:"absolute h-3.5 w-3.5 text-white opacity-0 peer-checked:opacity-100 transition-opacity pointer-events-none left-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("polyline",{points:"20 6 9 17 4 12"})})]}),t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 group-hover:text-blue-600 transition-colors",children:"Set as Default"})]})]})}),t.jsxs("div",{className:"pt-2 flex justify-end gap-3",children:[t.jsx(me,{type:"button",variant:"GHOST",onClick:()=>J(!1),className:"px-6 py-2.5",children:"Cancel"}),t.jsx(me,{type:"submit",disabled:ge,className:"px-8 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-200 dark:shadow-none",children:ge?"Saving...":ae?"Update":"Create"})]})]})]})}),y&&t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl w-full max-w-md shadow-2xl border border-gray-100 dark:border-gray-800 overflow-hidden transform transition-all",children:[t.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-800 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/50",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:t.jsx(kb,{className:"w-5 h-5 text-blue-600"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:b?"Edit Tax Rate":"Add Tax Rate"})]}),t.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:t.jsx(ht,{className:"w-5 h-5 text-gray-400"})})]}),t.jsxs("form",{onSubmit:Ct,className:"p-6 space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"Name *"}),t.jsx("input",{type:"text",required:!0,value:v,onChange:Ne=>N(Ne.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all outline-none",placeholder:"e.g. GST 18%"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"Rate (%) *"}),t.jsx("input",{type:"number",required:!0,min:"0",max:"100",step:"0.01",value:k,onChange:Ne=>E(parseFloat(Ne.target.value)),className:"w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"Description"}),t.jsx("textarea",{value:C,onChange:Ne=>S(Ne.target.value),rows:2,className:"w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all outline-none resize-none",placeholder:"Optional description..."})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-100 dark:border-gray-800",children:[t.jsxs("div",{className:"relative flex items-center",children:[t.jsx("input",{type:"checkbox",id:"rateActive",checked:P,onChange:Ne=>D(Ne.target.checked),className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border border-gray-300 dark:border-gray-600 checked:border-blue-600 checked:bg-blue-600 transition-all"}),t.jsx("svg",{className:"absolute h-3.5 w-3.5 text-white opacity-0 peer-checked:opacity-100 transition-opacity pointer-events-none left-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("polyline",{points:"20 6 9 17 4 12"})})]}),t.jsx("label",{htmlFor:"rateActive",className:"text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer",children:"Active"})]}),t.jsxs("div",{className:"pt-2 flex justify-end gap-3",children:[t.jsx(me,{type:"button",onClick:()=>p(!1),variant:"GHOST",className:"px-6 py-2.5",children:"Cancel"}),t.jsx(me,{type:"submit",disabled:I,className:"px-8 py-2.5 bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-200 dark:shadow-none",children:I?"Saving...":b?"Update":"Create"})]})]})]})})]})},Iw=["#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899","#14B8A6","#F97316","#84CC16","#6366F1","#64748B","#374151","#7C2D12","#B91C1C","#365314"],Jv=(e=[])=>{const r=Iw.filter(s=>!e.includes(s)),a=r.length>0?r:Iw;return a[Math.floor(Math.random()*a.length)]},Cie=()=>{const e=mt(),{leadSources:r,addLeadSource:a,updateLeadSource:s,deleteLeadSource:n,reorderLeadSources:i,isLoading:o}=Hr(),[c,u]=h.useState(!1),[m,g]=h.useState(null),[f,y]=h.useState(()=>({name:"",description:"",color:Jv(),isActive:!0,sortOrder:0})),[p,b]=h.useState(!1),[j,v]=h.useState({}),N=()=>{const S=r.map(P=>P.color).filter(P=>!!P);y({name:"",description:"",color:Jv(S),isActive:!0,sortOrder:r.length}),u(!1),g(null),v({})},k=S=>{y({name:S.name,description:S.description||"",color:S.color||Jv(),isActive:S.isActive,sortOrder:S.sortOrder}),g(S.id||null),u(!0),v({})},E=async S=>{S.preventDefault();const P={},D=(f.name||"").trim();if(D?D.length>50&&(P.name="Lead source name must be at most 50 characters"):P.name="Lead source name is required",Object.keys(P).length>0){v(P);return}v({}),b(!0);try{m?await s(m,{...f,name:D}):await a({...f,name:D}),N()}catch(I){console.error("Failed to save lead source:",I)}finally{b(!1)}},C=async S=>{if(window.confirm("Are you sure you want to delete this lead source? This action cannot be undone."))try{await n(S),M.success("Lead source deleted successfully")}catch(P){console.error("Failed to delete lead source:",P)}};return o?t.jsx(Nn,{message:"Loading lead sources..."}):t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"sm",onClick:()=>e("/business-settings"),className:"p-2",children:t.jsx(vr,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl",children:t.jsx(Os,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Lead Sources Management"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure and manage lead source options for your CRM"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"lg:col-span-1",children:t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:c?"Edit Lead Source":"Add New Lead Source"})}),t.jsx(tt,{children:t.jsxs("form",{onSubmit:E,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Source Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:f.name,onChange:S=>{const P=S.target.value;y(I=>({...I,name:P}));const D=P.trim();D?D.length>50?v(I=>({...I,name:"Lead source name must be at most 50 characters"})):v(I=>({...I,name:void 0})):v(I=>({...I,name:"Lead source name is required"}))},className:`w-full p-2 border rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${j.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., Website, Referral, Social Media"}),j.name&&t.jsx("p",{className:"mt-1 text-xs text-rose-600 dark:text-rose-400",children:j.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),t.jsx("textarea",{value:f.description,onChange:S=>y(P=>({...P,description:S.target.value})),rows:3,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Brief description of this lead source"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("input",{type:"color",value:f.color,onChange:S=>y(P=>({...P,color:S.target.value})),className:"w-10 h-10 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"}),t.jsx("input",{type:"text",value:f.color,onChange:S=>y(P=>({...P,color:S.target.value})),className:"flex-1 p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm"})]}),t.jsx("div",{className:"grid grid-cols-5 gap-2",children:Iw.map(S=>t.jsx("button",{type:"button",onClick:()=>y(P=>({...P,color:S})),className:`w-8 h-8 rounded border-2 ${f.color===S?"border-gray-800 dark:border-white":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:S}},S))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:f.isActive,onChange:S=>y(P=>({...P,isActive:S.target.checked})),className:"rounded border-gray-300 dark:border-gray-600"}),t.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700 dark:text-gray-300",children:"Active (available for selection)"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(me,{type:"submit",variant:"PRIMARY",disabled:p,className:"flex items-center gap-2",children:[t.jsx(Ya,{className:"w-4 h-4"}),p?"Saving...":c?"Update":"Add"]}),c&&t.jsx(me,{type:"button",variant:"OUTLINE",onClick:N,children:"Cancel"})]})]})})]})}),t.jsx("div",{className:"lg:col-span-2",children:t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Lead Sources (",r.length,")"]}),t.jsxs(me,{variant:"PRIMARY",size:"SM",onClick:N,className:"flex items-center gap-1",children:[t.jsx(Rt,{className:"w-4 h-4"}),"Add New"]})]})}),t.jsx(tt,{children:r.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Os,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Lead Sources Found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create your first lead source to start tracking where your leads come from."})]}):t.jsx("div",{className:"space-y-3",children:r.sort((S,P)=>S.sortOrder-P.sortOrder).map((S,P)=>t.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300 dark:border-gray-600",style:{backgroundColor:S.color}}),t.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["#",P+1]})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:S.name}),!S.isActive&&t.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full",children:"Inactive"})]}),S.description&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:S.description})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(me,{variant:"GHOST",size:"sm",onClick:()=>k(S),className:"p-1",title:"Edit",children:t.jsx(Ko,{className:"w-4 h-4 text-blue-500"})}),t.jsx(me,{variant:"GHOST",size:"sm",onClick:()=>C(S.id),className:"p-1",title:"Delete",children:t.jsx(ht,{className:"w-4 h-4 text-red-500"})})]})]},S.id))})})]})})]}),r.length>0&&t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Lead Source Analytics"})}),t.jsx(tt,{children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:r.filter(S=>S.isActive).length}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Sources"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:r.filter(S=>!S.isActive).length}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Inactive Sources"})]})]})})]})]})},qI=()=>{const[e,r]=h.useState([]),[a,s]=h.useState(!1),[n,i]=h.useState(null),[o,c]=h.useState({});h.useEffect(()=>{u()},[]);const u=async()=>{try{s(!0);const C=await oe.get("/business-settings/field-configs/lead");C.data?.success&&r(C.data.data)}catch(C){console.error("Error fetching fields:",C),M.error("Failed to load field settings")}finally{s(!1)}},m=C=>{i(C.id),c(C)},g=async()=>{if(n)try{await oe.put(`/business-settings/field-configs/${n}`,o),M.success("Field updated successfully"),i(null),c({}),u()}catch(C){console.error("Error updating field:",C),M.error("Failed to update field")}},f=()=>{i(null),c({})},y=async C=>{try{await oe.put(`/business-settings/field-configs/${C.id}`,{isVisible:!C.isVisible}),r(e.map(S=>S.id===C.id?{...S,isVisible:!S.isVisible}:S)),M.success(`Field ${C.isVisible?"hidden":"shown"}`)}catch(S){console.error("Error toggling visibility:",S),M.error("Failed to update field visibility")}},p=async(C,S)=>{const P=e.findIndex(H=>H.id===C.id),D=S==="up"?P-1:P+1;if(D<0||D>=e.length)return;const I=[...e];[I[P],I[D]]=[I[D],I[P]];try{const H=I.map((W,K)=>({id:W.id,displayOrder:K}));await Promise.all(H.map(W=>oe.put(`/business-settings/field-configs/${W.id}`,{displayOrder:W.displayOrder}))),r(I),M.success("Field order updated")}catch(H){console.error("Error reordering fields:",H),M.error("Failed to reorder fields")}},b=async C=>{try{await oe.put(`/business-settings/field-configs/${C.id}`,{isRequired:!C.isRequired}),r(e.map(S=>S.id===C.id?{...S,isRequired:!S.isRequired}:S)),M.success(`Field ${C.isRequired?"marked as optional":"marked as required"}`)}catch(S){console.error("Error updating required status:",S),M.error("Failed to update field")}try{window.dispatchEvent(new CustomEvent("fieldConfigsUpdated"))}catch{}},[j,v]=h.useState({entityType:"lead",fieldName:"",label:"",isRequired:!1,isVisible:!0,displayOrder:e.length,section:"personal",validation:{type:"text"}}),N=[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"url",label:"URL"},{value:"textarea",label:"Textarea"},{value:"select",label:"Select/Dropdown"},{value:"multiselect",label:"Multi-Select"},{value:"date",label:"Date"},{value:"datetime",label:"Date & Time"},{value:"checkbox",label:"Checkbox"}],k=async()=>{if(!j.fieldName||!j.label){M.error("Field key and label are required");return}try{s(!0);const C={...j,displayOrder:e.length,validation:j.validation||{type:"text"}};await oe.post("/business-settings/field-configs",C),M.success("Field added"),v({entityType:"lead",fieldName:"",label:"",isRequired:!1,isVisible:!0,displayOrder:e.length,section:"personal",validation:{type:"text"}}),await u();try{window.dispatchEvent(new CustomEvent("fieldConfigsUpdated"))}catch{}}catch(C){console.error("Error adding field:",C),M.error("Failed to add field")}finally{s(!1)}},E=async C=>{if(confirm("Delete this field? This cannot be undone."))try{await oe.delete(`/business-settings/field-configs/${C}`),M.success("Field deleted"),await u();try{window.dispatchEvent(new CustomEvent("fieldConfigsUpdated"))}catch{}}catch(S){console.error("Error deleting field:",S),M.error("Failed to delete field")}};return a?t.jsx("div",{className:"flex justify-center items-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Manage Lead Form Fields"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Show, hide, reorder, and configure lead form fields"})]}),t.jsx("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/40",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 items-end",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Field Key"}),t.jsx("input",{type:"text",placeholder:"e.g. customField",value:j.fieldName||"",onChange:C=>v({...j,fieldName:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Label"}),t.jsx("input",{type:"text",placeholder:"Display Label",value:j.label||"",onChange:C=>v({...j,label:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Field Type"}),t.jsx("select",{value:j.validation?.type||"text",onChange:C=>v({...j,validation:{...j.validation||{},type:C.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 text-sm",children:N.map(C=>t.jsx("option",{value:C.value,children:C.label},C.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Section"}),t.jsxs("select",{value:j.section||"personal",onChange:C=>v({...j,section:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 text-sm",children:[t.jsx("option",{value:"personal",children:"Personal"}),t.jsx("option",{value:"company",children:"Company"}),t.jsx("option",{value:"location",children:"Location"}),t.jsx("option",{value:"lead_management",children:"Lead Management"}),t.jsx("option",{value:"notes",children:"Notes"})]})]}),t.jsxs("div",{className:"flex gap-4 items-center",children:[t.jsxs("label",{className:"inline-flex items-center text-sm",children:[t.jsx("input",{type:"checkbox",checked:j.isRequired||!1,onChange:C=>v({...j,isRequired:C.target.checked}),className:"mr-2"}),"Required"]}),t.jsxs("label",{className:"inline-flex items-center text-sm",children:[t.jsx("input",{type:"checkbox",checked:j.isVisible!==!1,onChange:C=>v({...j,isVisible:C.target.checked}),className:"mr-2"}),"Visible"]})]}),t.jsx("div",{className:"col-span-full flex justify-end",children:t.jsxs("button",{onClick:k,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700",children:[t.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Add Field"]})})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase",children:"Field Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase",children:"Label"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase",children:"Section"}),t.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 dark:text-gray-300 uppercase",children:"Visible"}),t.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 dark:text-gray-300 uppercase",children:"Required"}),t.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 dark:text-gray-300 uppercase",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.map((C,S)=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C.fieldName})}),t.jsx("td",{className:"px-6 py-4",children:n===C.id?t.jsx("input",{type:"text",value:o.label||"",onChange:P=>c({...o,label:P.target.value}),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}):t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.label})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:C.validation?.type||"text"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium
                    ${C.section==="personal"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":C.section==="company"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":C.section==="location"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300":C.section==="lead_management"?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":C.section==="notes"?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}`,children:C.section.replace(/_/g," ")})}),t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsx("button",{onClick:()=>y(C),className:"inline-flex items-center justify-center p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",title:C.isVisible?"Hide field":"Show field",children:C.isVisible?t.jsx(Bt,{className:"h-4 w-4 text-green-600"}):t.jsx(pn,{className:"h-4 w-4 text-gray-400"})})}),t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsx("button",{onClick:()=>b(C),className:`inline-flex items-center px-3 py-1 rounded-lg text-xs font-medium transition-colors ${C.isRequired?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/50":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-900/50"}`,children:C.isRequired?"Required":"Optional"})}),t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsx("div",{className:"flex items-center justify-center gap-2",children:n===C.id?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:g,className:"inline-flex items-center p-2 text-green-600 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-colors",title:"Save",children:t.jsx(Ya,{className:"h-4 w-4"})}),t.jsx("button",{onClick:f,className:"inline-flex items-center p-2 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Cancel",children:t.jsx(da,{className:"h-4 w-4"})})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>m(C),className:"inline-flex items-center p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:t.jsx(oD,{className:"h-4 w-4"})}),!["firstName","lastName","email","phone","company"].includes(C.fieldName)&&t.jsx("button",{onClick:()=>E(C.id),className:"inline-flex items-center p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete",children:t.jsx(ht,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>p(C,"up"),disabled:S===0,className:"inline-flex items-center p-2 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Move up",children:t.jsx(_9,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>p(C,"down"),disabled:S===e.length-1,className:"inline-flex items-center p-2 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Move down",children:t.jsx(R9,{className:"h-4 w-4"})})]})})})]},C.id))})]})}),t.jsx("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700",children:t.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Total fields: ",e.length,"  Visible: ",e.filter(C=>C.isVisible).length,"  Required: ",e.filter(C=>C.isRequired).length]})})]})},Eie=()=>{const e=mt();return t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:()=>e("/business-settings"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",title:"Back to Business Settings",children:t.jsx(vr,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),t.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-blue-600 rounded-xl",children:t.jsx(Ui,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Lead Form Fields Configuration"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage lead form fields - Add, hide, show, make required/optional, and reorder fields"})]})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:t.jsx(qI,{})})]})},Zn={getTags:async()=>{const e=await oe.get("/tags");return e?.data?.data??e?.data??[]},createTag:async e=>(await oe.post("/tags",e)).data,updateTag:async(e,r)=>(await oe.put(`/tags/${e}`,r)).data,deleteTag:async e=>{await oe.delete(`/tags/${e}`)}},Lw=["#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899","#14B8A6","#F97316","#84CC16","#6366F1","#64748B","#374151","#7C2D12","#B91C1C","#365314"],eb=(e=[])=>{const r=Lw.filter(s=>!e.includes(s)),a=r.length>0?r:Lw;return a[Math.floor(Math.random()*a.length)]},Aie=()=>{const e=mt(),[r,a]=h.useState([]),[s,n]=h.useState(!0),[i,o]=h.useState(!1),[c,u]=h.useState(null),[m,g]=h.useState(()=>({name:"",color:eb(),description:"",isActive:!0})),[f,y]=h.useState(!1),[p,b]=h.useState({});h.useEffect(()=>{j()},[]);const j=async()=>{try{n(!0);const S=await Zn.getTags();a(Array.isArray(S)?S:[])}catch(S){console.error("Failed to fetch tags:",S),M.error("Failed to load tags"),a([])}finally{n(!1)}},v=()=>{const S=r.map(P=>P.color).filter(P=>!!P);g({name:"",color:eb(S),description:"",isActive:!0}),o(!1),u(null)},N=S=>{g({name:S.name,color:S.color||eb(),description:S.description||"",isActive:S.isActive!==void 0?S.isActive:!0}),u(S.id),o(!0)},k=async S=>{S.preventDefault();const P={},D=(m.name||"").trim();if(D?D.length>50&&(P.name="Tag name must be at most 50 characters"):P.name="Tag name is required",Object.keys(P).length>0){b(P);return}b({}),y(!0);try{const I={name:D,color:m.color||"#3B82F6",description:m.description||void 0,isActive:m.isActive};c?await Zn.updateTag(c,I)&&M.success("Tag updated successfully"):await Zn.createTag(I)&&M.success("Tag added successfully"),v(),j()}catch(I){console.error("Failed to save tag:",I);const H=I?.response?.data?.message?.message||I?.response?.data?.message||"Failed to save tag";M.error(Array.isArray(H)?H.join(", "):H)}finally{y(!1)}},E=async S=>{if(window.confirm("Are you sure you want to delete this tag? This action cannot be undone."))try{await Zn.deleteTag(S),M.success("Tag deleted successfully"),j()}catch(P){console.error("Failed to delete tag:",P),M.error("Failed to delete tag")}},C=async(S,P)=>{try{await Zn.updateTag(S,{isActive:!P}),M.success("Tag updated successfully"),j()}catch(D){console.error("Failed to update tag:",D),M.error("Failed to update tag")}};return s?t.jsx(Nn,{message:"Loading tags..."}):t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"sm",onClick:()=>e("/business-settings"),className:"p-2",children:t.jsx(vr,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-xl",children:t.jsx(Fo,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Tags Management"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure and manage tags for organizing leads and deals"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"lg:col-span-1",children:t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:i?"Edit Tag":"Add New Tag"})}),t.jsx(tt,{children:t.jsxs("form",{onSubmit:k,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Tag Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:m.name,onChange:S=>{const P=S.target.value;g(I=>({...I,name:P}));const D=P.trim();D?D.length>50?b(I=>({...I,name:"Tag name must be at most 50 characters"})):b(I=>({...I,name:void 0})):b(I=>({...I,name:"Tag name is required"}))},className:`w-full p-2 border rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${p.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., Hot Lead, VIP, Follow-up"}),p.name&&t.jsx("p",{className:"mt-1 text-xs text-rose-600 dark:text-rose-400",children:p.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),t.jsx("textarea",{value:m.description,onChange:S=>g(P=>({...P,description:S.target.value})),rows:3,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Brief description of this tag"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("input",{type:"color",value:m.color,onChange:S=>g(P=>({...P,color:S.target.value})),className:"w-10 h-10 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"}),t.jsx("input",{type:"text",value:m.color,onChange:S=>g(P=>({...P,color:S.target.value})),className:"flex-1 p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm"})]}),t.jsx("div",{className:"grid grid-cols-5 gap-2",children:Lw.map(S=>t.jsx("button",{type:"button",onClick:()=>g(P=>({...P,color:S})),className:`w-8 h-8 rounded border-2 ${m.color===S?"border-gray-800 dark:border-white":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:S}},S))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:m.isActive,onChange:S=>g(P=>({...P,isActive:S.target.checked})),className:"rounded border-gray-300 dark:border-gray-600"}),t.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700 dark:text-gray-300",children:"Active (available for selection)"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(me,{type:"submit",variant:"PRIMARY",disabled:f,className:"flex items-center gap-2",children:[t.jsx(Ya,{className:"w-4 h-4"}),f?"Saving...":i?"Update":"Add"]}),i&&t.jsx(me,{type:"button",variant:"OUTLINE",onClick:v,children:"Cancel"})]})]})})]})}),t.jsx("div",{className:"lg:col-span-2",children:t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Tags (",r.length,")"]}),t.jsxs(me,{variant:"PRIMARY",size:"SM",onClick:v,className:"flex items-center gap-1",children:[t.jsx(Rt,{className:"w-4 h-4"}),"Add New"]})]})}),t.jsx(tt,{children:r.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Fo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Tags Found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create your first tag to start organizing your leads and deals."})]}):t.jsx("div",{className:"space-y-3",children:r.map(S=>t.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[t.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300 dark:border-gray-600",style:{backgroundColor:S.color||"#6B7280"}}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:S.name}),S.isActive===!1&&t.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full",children:"Inactive"})]}),S.description&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:S.description})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(me,{variant:"GHOST",size:"sm",onClick:()=>C(S.id,S.isActive!==!1),className:"p-1",title:S.isActive!==!1?"Deactivate":"Activate",children:S.isActive!==!1?t.jsx(Bt,{className:"w-4 h-4 text-green-500"}):t.jsx(pn,{className:"w-4 h-4 text-gray-400"})}),t.jsx(me,{variant:"GHOST",size:"sm",onClick:()=>N(S),className:"p-1",title:"Edit",children:t.jsx(Ko,{className:"w-4 h-4 text-blue-500"})}),t.jsx(me,{variant:"GHOST",size:"sm",onClick:()=>E(S.id),className:"p-1",title:"Delete",children:t.jsx(ht,{className:"w-4 h-4 text-red-500"})})]})]},S.id))})})]})})]}),r.length>0&&t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Tags Analytics"})}),t.jsx(tt,{children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:r.filter(S=>S.isActive!==!1).length}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Tags"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:r.filter(S=>S.isActive===!1).length}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Inactive Tags"})]})]})})]})]})},bl={async getIndustries(){const e=await oe.get("/industries");return e.data?.data?.industries??e.data},async createIndustry(e){const r=await oe.post("/industries",e);return r.data?.data?.industry??r.data},async updateIndustry(e,r){const a=await oe.put(`/industries/${e}`,r);return a.data?.data?.industry??a.data},async deleteIndustry(e){await oe.delete(`/industries/${e}`)},async addField(e,r){const a=await oe.post(`/industries/${e}/fields`,r);return a.data?.data?.field??a.data},async updateField(e,r){const a=await oe.put(`/industries/fields/${e}`,r);return a.data?.data?.field??a.data},async deleteField(e){await oe.delete(`/industries/fields/${e}`)}},Pie=()=>{const e=mt(),[r,a]=h.useState([]),[s,n]=h.useState(!0),[i,o]=h.useState(!1),[c,u]=h.useState(null),[m,g]=h.useState({name:"",isActive:!0}),[f,y]=h.useState(!1);h.useEffect(()=>{p()},[]);const p=async()=>{try{n(!0);const E=await bl.getIndustries();a(Array.isArray(E)?E:[])}catch(E){console.error("Failed to fetch industries:",E),M.error("Failed to load industries"),a([])}finally{n(!1)}},b=()=>{g({name:"",isActive:!0}),o(!1),u(null)},j=E=>{g({name:E.name,isActive:E.isActive!==void 0?E.isActive:!0}),u(E.id),o(!0)},v=async E=>{if(E.preventDefault(),!m.name||!m.name.trim()){M.error("Industry name is required");return}y(!0);try{const C={name:m.name.trim(),isActive:m.isActive};c?await bl.updateIndustry(c,C)&&M.success("Industry updated successfully"):await bl.createIndustry(C)&&M.success("Industry added successfully"),b(),p()}catch(C){console.error("Failed to save industry:",C);const S=C?.response?.data?.message?.message||C?.response?.data?.message||"Failed to save industry";M.error(Array.isArray(S)?S.join(", "):S)}finally{y(!1)}},N=async E=>{if(window.confirm("Are you sure you want to delete this industry? This action cannot be undone."))try{await bl.deleteIndustry(E),M.success("Industry deleted successfully"),p()}catch(C){console.error("Failed to delete industry:",C),M.error("Failed to delete industry")}},k=async(E,C)=>{try{await bl.updateIndustry(E,{isActive:!C}),M.success("Industry updated successfully"),p()}catch(S){console.error("Failed to update industry:",S),M.error("Failed to update industry")}};return s?t.jsx(Nn,{message:"Loading industries..."}):t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"sm",onClick:()=>e("/business-settings"),className:"p-2",children:t.jsx(vr,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl",children:t.jsx(Pl,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Industries Management"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure and manage industry options for leads and companies"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"lg:col-span-1",children:t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:i?"Edit Industry":"Add New Industry"})}),t.jsx(tt,{children:t.jsxs("form",{onSubmit:v,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Industry Name *"}),t.jsx("input",{type:"text",value:m.name,onChange:E=>g(C=>({...C,name:E.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Technology, Healthcare, Finance",required:!0})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:m.isActive,onChange:E=>g(C=>({...C,isActive:E.target.checked})),className:"rounded border-gray-300 dark:border-gray-600"}),t.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700 dark:text-gray-300",children:"Active (available for selection)"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(me,{type:"submit",variant:"PRIMARY",disabled:f,className:"flex items-center gap-2",children:[t.jsx(Ya,{className:"w-4 h-4"}),f?"Saving...":i?"Update":"Add"]}),i&&t.jsx(me,{type:"button",variant:"OUTLINE",onClick:b,children:"Cancel"})]})]})})]})}),t.jsx("div",{className:"lg:col-span-2",children:t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Industries (",r.length,")"]}),t.jsxs(me,{variant:"OUTLINE",size:"sm",onClick:b,className:"flex items-center gap-1",children:[t.jsx(Rt,{className:"w-4 h-4"}),"Add New"]})]})}),t.jsx(tt,{children:r.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Pl,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Industries Found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create your first industry to start categorizing your leads and companies."})]}):t.jsx("div",{className:"space-y-3",children:r.sort((E,C)=>E.name.localeCompare(C.name)).map(E=>t.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsx("div",{className:"flex items-center gap-4 flex-1",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:E.name}),E.isActive===!1&&t.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full",children:"Inactive"})]}),E.description&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:E.description}),E.fields&&E.fields.length>0&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[E.fields.length," custom field",E.fields.length!==1?"s":""]})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(me,{variant:"GHOST",size:"sm",onClick:()=>k(E.id,E.isActive!==!1),className:"p-1",title:E.isActive!==!1?"Deactivate":"Activate",children:E.isActive!==!1?t.jsx(Bt,{className:"w-4 h-4 text-green-500"}):t.jsx(pn,{className:"w-4 h-4 text-gray-400"})}),t.jsx(me,{variant:"GHOST",size:"sm",onClick:()=>j(E),className:"p-1",title:"Edit",children:t.jsx(Ko,{className:"w-4 h-4 text-blue-500"})}),t.jsx(me,{variant:"GHOST",size:"sm",onClick:()=>N(E.id),className:"p-1",title:"Delete",children:t.jsx(ht,{className:"w-4 h-4 text-red-500"})})]})]},E.id))})})]})})]}),r.length>0&&t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Industries Analytics"})}),t.jsx(tt,{children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:r.filter(E=>E.isActive!==!1).length}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Industries"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:r.filter(E=>E.isActive===!1).length}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Inactive Industries"})]})]})})]})]})},Tie=()=>{const e=mt(),{dealStatuses:r,addDealStatus:a,updateDealStatus:s,deleteDealStatus:n,isLoading:i}=Hr(),[o,c]=h.useState(!1),[u,m]=h.useState(null),[g,f]=h.useState({name:"",color:"#3B82F6",sortOrder:0,isActive:!0}),[y,p]=h.useState(!1),b=()=>{f({name:"",color:"#3B82F6",sortOrder:r.length,isActive:!0}),c(!1),m(null)},j=k=>{f({name:k.name,color:k.color||"#3B82F6",sortOrder:k.sortOrder,isActive:k.isActive}),m(k.id||null),c(!0)},v=async k=>{if(k.preventDefault(),!g.name.trim()){M.error("Status name is required");return}p(!0);try{u?(await s(u,g),M.success("Deal status updated successfully")):(await a(g),M.success("Deal status added successfully")),b()}catch(C){console.error("Failed to save deal status:",C),M.error("Failed to save deal status")}finally{p(!1)}},N=async k=>{if(window.confirm("Are you sure you want to delete this status? This may affect deals using it."))try{await n(k),M.success("Deal status deleted successfully")}catch(E){console.error("Failed to delete deal status:",E),M.error("Failed to delete deal status")}};return i?t.jsx(Nn,{message:"Loading deal statuses..."}):t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>e("/business-settings"),className:"p-2",children:t.jsx(vr,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-orange-500 to-red-600 rounded-xl",children:t.jsx(lD,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Deal Status Management"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure dynamic stages and statuses for deals"})]})]})]}),!o&&t.jsxs(me,{variant:"PRIMARY",onClick:()=>{b(),c(!0)},className:"flex items-center gap-2",children:[t.jsx(Rt,{className:"w-4 h-4"}),"Add Status"]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"lg:col-span-2",children:t.jsxs(Ee,{children:[t.jsxs(kt,{className:"flex flex-row items-center justify-between border-b pb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Available Statuses"}),t.jsxs("div",{className:"text-xs text-gray-500 font-medium uppercase tracking-wider",children:[r.length," Total"]})]}),t.jsx(tt,{className:"pt-6",children:r.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Fo,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No statuses defined yet."})]}):t.jsx("div",{className:"space-y-3",children:r.sort((k,E)=>k.sortOrder-E.sortOrder).map(k=>t.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-100 dark:border-gray-700 rounded-xl hover:shadow-md transition-all bg-white dark:bg-gray-800 group",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:k.color||"#3B82F6"}}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:k.name}),!k.isActive&&t.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-gray-100 dark:bg-gray-800 text-gray-400 rounded-full font-bold",children:"INACTIVE"})]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["Order: ",k.sortOrder]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>j(k),className:"p-1.5 h-8 w-8 hover:bg-blue-50 hover:text-blue-600 rounded-lg",children:t.jsx(Ko,{className:"w-4 h-4"})}),t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>N(k.id),className:"p-1.5 h-8 w-8 hover:bg-red-50 hover:text-red-600 rounded-lg",children:t.jsx(ht,{className:"w-4 h-4"})})]})]},k.id))})})]})}),t.jsx("div",{children:o?t.jsxs(Ee,{className:"sticky top-6 border-2 border-orange-100 dark:border-orange-900/30",children:[t.jsx(kt,{className:"border-b pb-4",children:t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:u?"Edit Status":"New Status"})}),t.jsx(tt,{className:"pt-6",children:t.jsxs("form",{onSubmit:v,className:"space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 tracking-wider",children:"Status Name"}),t.jsx("input",{type:"text",value:g.name,onChange:k=>f(E=>({...E,name:k.target.value})),className:"w-full p-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 outline-none transition-all",placeholder:"e.g., Contacted, Qualified, Won",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 tracking-wider",children:"Color"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"color",value:g.color,onChange:k=>f(E=>({...E,color:k.target.value})),className:"w-10 h-10 p-0.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white cursor-pointer"}),t.jsx("span",{className:"text-xs font-mono text-gray-500 uppercase",children:g.color})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 tracking-wider",children:"Sort Order"}),t.jsx("input",{type:"number",value:g.sortOrder,onChange:k=>f(E=>({...E,sortOrder:parseInt(k.target.value)||0})),className:"w-full p-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 outline-none"})]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:g.isActive,onChange:k=>f(E=>({...E,isActive:k.target.checked})),className:"w-4 h-4 rounded text-orange-600 focus:ring-orange-500"}),t.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer",children:"Status is Active"})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx(me,{type:"submit",variant:"PRIMARY",className:"flex-1",disabled:y,children:y?"Saving...":u?"Update Status":"Add Status"}),t.jsx(me,{type:"button",variant:"GHOST",onClick:b,className:"flex-1",children:"Cancel"})]})]})})]}):t.jsx(Ee,{className:"bg-orange-50/50 dark:bg-orange-900/10 border-dashed border-2 border-orange-200 dark:border-orange-800",children:t.jsxs(tt,{className:"p-8 text-center",children:[t.jsx(Fo,{className:"w-12 h-12 text-orange-200 dark:text-orange-800 mx-auto mb-4"}),t.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Management"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-6",children:'Select a status to edit or click "Add Status" to create a new one. These statuses are used for deals.'}),t.jsxs(me,{variant:"OUTLINE",size:"SM",onClick:()=>{b(),c(!0)},className:"w-full border-orange-200 text-orange-600 hover:bg-orange-50",children:[t.jsx(Rt,{className:"w-4 h-4 mr-2"}),"New Status"]})]})})})]})]})},Die=()=>{const{t:e}=wn(),[r,a]=h.useState("email-templates"),[s,n]=h.useState([]),[i,o]=h.useState([]),[c,u]=h.useState([]),[m,g]=h.useState([]),[f,y]=h.useState(!0),[p,b]=h.useState(!1),[j,v]=h.useState(!1),[N,k]=h.useState(!1),[E,C]=h.useState(!1),[S,P]=h.useState(null),[D,I]=h.useState(null),[H,W]=h.useState(null),[K,B]=h.useState(null),[z,q]=h.useState("ALL"),[J,ae]=h.useState(null),[ne,re]=h.useState({name:"",type:"EMAIL",subject:"",content:"",isDefault:!1}),[L,G]=h.useState({name:"",category:"WELCOME",subject:"",htmlContent:"",textContent:"",variables:{},isActive:!0,isDefault:!1,status:"ACTIVE"}),[T,_]=h.useState({name:"",triggerType:"LEAD_CREATED",templateId:"",conditions:"",delay:0}),[F,ee]=h.useState({name:"",type:"EMAIL",config:"",isDefault:!1});h.useEffect(()=>{Z()},[]);const Z=async()=>{y(!0);try{await Promise.all([U(),X(),Q(),V()])}catch(le){console.error("Error fetching communication data:",le)}finally{y(!1)}},U=async()=>{try{const le=localStorage.getItem("authToken")||localStorage.getItem("token"),Ke=await(await fetch("/api/communications/templates",{headers:{Authorization:le?`Bearer ${le}`:""}})).json();Ke.success&&n(Ke.data.templates)}catch(le){console.error("Error fetching templates:",le)}},X=async()=>{try{const le=localStorage.getItem("authToken")||localStorage.getItem("token"),Ke=await(await fetch("/api/business-settings/email-templates",{headers:{Authorization:le?`Bearer ${le}`:""}})).json();Ke.success&&o(Ke.data)}catch(le){console.error("Error fetching email templates:",le)}},Q=async()=>{try{const le=localStorage.getItem("authToken")||localStorage.getItem("token"),Ke=await(await fetch("/api/automation/workflows",{headers:{Authorization:le?`Bearer ${le}`:""}})).json();Ke.success&&u(Ke.data.automations)}catch(le){console.error("Error fetching automations:",le)}},V=async()=>{try{const le=localStorage.getItem("authToken")||localStorage.getItem("token"),Ke=await(await fetch("/api/communication/providers",{headers:{Authorization:le?`Bearer ${le}`:""}})).json();Ke.success&&g(Ke.data.providers)}catch(le){console.error("Error fetching providers:",le)}},ge=async()=>{try{const le=localStorage.getItem("authToken")||localStorage.getItem("token"),Xe=S?`/api/communications/templates/${S.id}`:"/api/communications/templates",Ne=await(await fetch(Xe,{method:S?"PUT":"POST",headers:{Authorization:le?`Bearer ${le}`:"","Content-Type":"application/json"},body:JSON.stringify(ne)})).json();Ne.success?(M.success(S?"Template updated successfully":"Template created successfully"),b(!1),P(null),re({name:"",type:"EMAIL",subject:"",content:"",isDefault:!1}),await U()):M.error(Ne.message||"Failed to save template")}catch(le){console.error("Error saving template:",le),M.error("Failed to save template")}},Te=async le=>{if(confirm("Are you sure you want to delete this template?"))try{const Xe=localStorage.getItem("authToken")||localStorage.getItem("token"),Ne=await(await fetch(`/api/communications/templates/${le}`,{method:"DELETE",headers:{Authorization:Xe?`Bearer ${Xe}`:""}})).json();Ne.success?(M.success("Template deleted successfully"),await U()):M.error(Ne.message||"Failed to delete template")}catch(Xe){console.error("Error deleting template:",Xe),M.error("Failed to delete template")}},xe=le=>{P(le),re({name:le.name,type:le.type,subject:le.subject||"",content:le.content,isDefault:le.isDefault}),b(!0)},qe=le=>{switch(le){case"EMAIL":return t.jsx(ir,{className:"h-4 w-4 text-blue-500"});case"WHATSAPP":return t.jsx(_r,{className:"h-4 w-4 text-green-500"});case"SMS":return t.jsx(_r,{className:"h-4 w-4 text-purple-500"});default:return t.jsx(_r,{className:"h-4 w-4 text-gray-500"})}},se=le=>{switch(le){case"LEAD_CREATED":return"Lead Created";case"LEAD_UPDATED":return"Lead Updated";case"LEAD_STATUS_CHANGED":return"Status Changed";case"LEAD_ASSIGNED":return"Lead Assigned";default:return le}},De=le=>({WELCOME:"Welcome Email",EMAIL_VERIFICATION:"Email Verification",EMAIL_CHANGE_CONFIRMATION:"Email Change Confirmation",PASSWORD_RESET:"Password Reset",WELCOME_SERIES:"Welcome Series",ONBOARDING:"Onboarding",NEWSLETTER:"Newsletter",MARKETING:"Marketing",SYSTEM_NOTIFICATION:"System Notification",CUSTOM:"Custom"})[le]||le,Me=async()=>{try{const le=localStorage.getItem("authToken")||localStorage.getItem("token"),Xe=localStorage.getItem("userId"),Ke=Xe?parseInt(Xe,10):1,Ne=D?`/api/business-settings/email-templates/${D.id}`:"/api/business-settings/email-templates",Nt={...L,createdBy:Ke};if(L.isDefault){const Ot=i.filter(R=>R.category===L.category&&R.isDefault&&R.id!==D?.id);for(const R of Ot)await fetch(`/api/business-settings/email-templates/${R.id}`,{method:"PUT",headers:{Authorization:le?`Bearer ${le}`:"","Content-Type":"application/json"},body:JSON.stringify({...R,isDefault:!1})})}const vt=await(await fetch(Ne,{method:D?"PUT":"POST",headers:{Authorization:le?`Bearer ${le}`:"","Content-Type":"application/json"},body:JSON.stringify(Nt)})).json();vt.success?(M.success(D?"Email template updated successfully":"Email template created successfully"),v(!1),I(null),G({name:"",category:"WELCOME",subject:"",htmlContent:"",textContent:"",variables:{},isActive:!0,isDefault:!1,status:"ACTIVE"}),await X()):M.error(vt.message||"Failed to save email template")}catch(le){console.error("Error saving email template:",le),M.error("Failed to save email template")}},Ct=async le=>{if(confirm("Are you sure you want to delete this email template?"))try{const Xe=localStorage.getItem("authToken")||localStorage.getItem("token"),Ne=await(await fetch(`/api/business-settings/email-templates/${le}`,{method:"DELETE",headers:{Authorization:Xe?`Bearer ${Xe}`:""}})).json();Ne.success?(M.success("Email template deleted successfully"),await X()):M.error(Ne.message||"Failed to delete email template")}catch(Xe){console.error("Error deleting email template:",Xe),M.error("Failed to delete email template")}},Dt=le=>{I(le),G({name:le.name,category:le.category,subject:le.subject,htmlContent:le.htmlContent,textContent:le.textContent,variables:le.variables||{},isActive:le.isActive,isDefault:le.isDefault,status:le.status}),v(!0)},Mt=async le=>{try{const Xe=localStorage.getItem("authToken")||localStorage.getItem("token"),Ne=await(await fetch(`/api/business-settings/email-templates/preview/${le.id}`,{headers:{Authorization:Xe?`Bearer ${Xe}`:""}})).json();Ne.success&&ae(Ne.data)}catch(Xe){console.error("Error previewing email template:",Xe),M.error("Failed to preview email template")}},jt=z==="ALL"?i:i.filter(le=>le.category===z);return f?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Communication Settings"})}),t.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"email-templates",label:"Email Templates",icon:Lt},{id:"templates",label:"Message Templates",icon:ir}].map(le=>{const Xe=le.icon;return t.jsxs("button",{onClick:()=>a(le.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors ${r===le.id?"border-weconnect-red text-weconnect-red":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(Xe,{className:"h-4 w-4 mr-2"}),le.label]},le.id)})})}),r==="email-templates"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"System Email Templates"}),t.jsxs("button",{onClick:()=>{I(null),G({name:"",category:"WELCOME",subject:"",htmlContent:"",textContent:"",variables:{},isActive:!0,isDefault:!1,status:"ACTIVE"}),v(!0)},className:"bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center",children:[t.jsx(Rt,{className:"h-4 w-4 mr-2"}),"New Email Template"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Gl,{className:"h-4 w-4 text-gray-500"}),t.jsxs("select",{value:z,onChange:le=>q(le.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"ALL",children:"All Categories"}),t.jsx("option",{value:"WELCOME",children:"Welcome"}),t.jsx("option",{value:"EMAIL_VERIFICATION",children:"Email Verification"}),t.jsx("option",{value:"EMAIL_CHANGE_CONFIRMATION",children:"Email Change"}),t.jsx("option",{value:"PASSWORD_RESET",children:"Password Reset"}),t.jsx("option",{value:"WELCOME_SERIES",children:"Welcome Series"}),t.jsx("option",{value:"ONBOARDING",children:"Onboarding"}),t.jsx("option",{value:"NEWSLETTER",children:"Newsletter"}),t.jsx("option",{value:"MARKETING",children:"Marketing"}),t.jsx("option",{value:"SYSTEM_NOTIFICATION",children:"System Notification"}),t.jsx("option",{value:"CUSTOM",children:"Custom"})]})]}),t.jsx("div",{className:"grid grid-cols-1 gap-4",children:jt.map(le=>t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(Lt,{className:"h-5 w-5 text-blue-500"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:le.name}),t.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:De(le.category)}),le.isDefault&&t.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Default"}),!le.isActive&&t.jsx("span",{className:"bg-gray-100 text-gray-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Inactive"}),t.jsx("span",{className:`text-xs font-medium px-2.5 py-0.5 rounded-full ${le.status==="ACTIVE"?"bg-green-100 text-green-800":le.status==="DRAFT"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:le.status})]}),t.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Subject: ",le.subject]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:le.htmlContent.length>150?`${le.htmlContent.substring(0,150).replace(/<[^>]*>/g,"")}...`:le.htmlContent.replace(/<[^>]*>/g,"")}),le.variables&&Object.keys(le.variables).length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Variables: "}),Object.keys(le.variables).map(Xe=>t.jsxs("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-0.5 rounded",children:["{",Xe,"}"]},Xe))]}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Updated: ",new Date(le.updatedAt).toLocaleDateString()]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>Mt(le),className:"text-gray-400 hover:text-green-600 transition-colors",title:"Preview",children:t.jsx(Bt,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Dt(le),className:"text-gray-400 hover:text-blue-600 transition-colors",title:"Edit",children:t.jsx(er,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ct(le.id),className:"text-gray-400 hover:text-red-600 transition-colors",title:"Delete",children:t.jsx(ht,{className:"h-4 w-4"})})]})]})},le.id))}),jt.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Lt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:z==="ALL"?"No email templates found":`No templates found for ${De(z)}`}),t.jsx("button",{onClick:()=>{I(null),G({name:"",category:z!=="ALL"?z:"WELCOME",subject:"",htmlContent:"",textContent:"",variables:{},isActive:!0,isDefault:!1,status:"ACTIVE"}),v(!0)},className:"bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Create your first email template"})]})]}),r==="templates"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Message Templates"}),t.jsxs("button",{onClick:()=>{P(null),re({name:"",type:"EMAIL",subject:"",content:"",isDefault:!1}),b(!0)},className:"bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center",children:[t.jsx(Rt,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),t.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.map(le=>t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[t.jsx("div",{className:"flex-shrink-0",children:qe(le.type)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:le.name}),le.isDefault&&t.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Default"}),!le.isActive&&t.jsx("span",{className:"bg-gray-100 text-gray-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Inactive"})]}),le.subject&&t.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Subject: ",le.subject]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:le.content.length>100?`${le.content.substring(0,100)}...`:le.content}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created by ",le.createdByUser.firstName," ",le.createdByUser.lastName," on"," ",new Date(le.createdAt).toLocaleDateString()]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>xe(le),className:"text-gray-400 hover:text-blue-600 transition-colors",children:t.jsx(er,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Te(le.id),className:"text-gray-400 hover:text-red-600 transition-colors",children:t.jsx(ht,{className:"h-4 w-4"})})]})]})},le.id))}),s.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ir,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No templates found"}),t.jsx("button",{onClick:()=>b(!0),className:"bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Create your first template"})]})]}),r==="automations"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Automation Rules"}),t.jsxs("button",{onClick:()=>k(!0),className:"bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center",children:[t.jsx(Rt,{className:"h-4 w-4 mr-2"}),"New Automation"]})]}),t.jsx("div",{className:"grid grid-cols-1 gap-4",children:c.map(le=>t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(Dl,{className:"h-5 w-5 text-purple-500"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:le.name}),!le.isActive&&t.jsx("span",{className:"bg-gray-100 text-gray-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Inactive"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("strong",{children:"Trigger:"})," ",se(le.triggerType)]}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("strong",{children:"Template:"})," ",le.template.name," (",le.template.type,")"]}),le.delay&&le.delay>0&&t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("strong",{children:"Delay:"})," ",le.delay," minutes"]})]}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Created on ",new Date(le.createdAt).toLocaleDateString()]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{className:"text-gray-400 hover:text-blue-600 transition-colors",children:t.jsx(er,{className:"h-4 w-4"})}),t.jsx("button",{className:"text-gray-400 hover:text-red-600 transition-colors",children:t.jsx(ht,{className:"h-4 w-4"})})]})]})},le.id))}),c.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Dl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No automations found"}),t.jsx("button",{onClick:()=>k(!0),className:"bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Create your first automation"})]})]}),j&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:D?"Edit Email Template":"Create New Email Template"}),t.jsx("button",{onClick:()=>{v(!1),ae(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(da,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Template Name *"}),t.jsx("input",{type:"text",value:L.name,onChange:le=>G({...L,name:le.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Welcome Email Template"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category *"}),t.jsxs("select",{value:L.category,onChange:le=>G({...L,category:le.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"WELCOME",children:"Welcome"}),t.jsx("option",{value:"EMAIL_VERIFICATION",children:"Email Verification"}),t.jsx("option",{value:"EMAIL_CHANGE_CONFIRMATION",children:"Email Change Confirmation"}),t.jsx("option",{value:"PASSWORD_RESET",children:"Password Reset"}),t.jsx("option",{value:"WELCOME_SERIES",children:"Welcome Series"}),t.jsx("option",{value:"ONBOARDING",children:"Onboarding"}),t.jsx("option",{value:"NEWSLETTER",children:"Newsletter"}),t.jsx("option",{value:"MARKETING",children:"Marketing"}),t.jsx("option",{value:"SYSTEM_NOTIFICATION",children:"System Notification"}),t.jsx("option",{value:"CUSTOM",children:"Custom"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Subject *"}),t.jsx("input",{type:"text",value:L.subject,onChange:le=>G({...L,subject:le.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"{appName} - Welcome {firstName}"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Use ","{variableName}"," for dynamic values (e.g., ","{firstName}",", ","{email}",", ","{password}",", ","{appName}",")"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"HTML Content *"}),t.jsx("textarea",{value:L.htmlContent,onChange:le=>G({...L,htmlContent:le.target.value}),rows:10,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white font-mono text-sm",placeholder:"<p>Hello {firstName},</p><p>Your account has been created...</p>"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Plain Text Content *"}),t.jsx("textarea",{value:L.textContent,onChange:le=>G({...L,textContent:le.target.value}),rows:8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white font-mono text-sm",placeholder:"Hello {firstName}, Your account has been created..."})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Available Variables:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:["firstName","lastName","email","password","appName","verificationLink","resetLink"].map(le=>t.jsxs("button",{type:"button",onClick:()=>{const Xe=`{${le}}`;G(Ke=>({...Ke,htmlContent:Ke.htmlContent+Xe,textContent:Ke.textContent+Xe,variables:{...Ke.variables,[le]:!0}}))},className:"text-xs bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 text-gray-700 dark:text-gray-300 px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-500",children:["{",le,"}"]},le))}),t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Click on a variable to insert it into your template. Welcome emails should include ","{email}"," and ","{password}"," fields."]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:L.isActive,onChange:le=>G({...L,isActive:le.target.checked}),className:"h-4 w-4 text-weconnect-red focus:ring-weconnect-red border-gray-300 rounded"}),t.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Active"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isDefault",checked:L.isDefault,onChange:le=>G({...L,isDefault:le.target.checked}),className:"h-4 w-4 text-weconnect-red focus:ring-weconnect-red border-gray-300 rounded"}),t.jsx("label",{htmlFor:"isDefault",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Set as Default"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),t.jsxs("select",{value:L.status,onChange:le=>G({...L,status:le.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"DRAFT",children:"Draft"}),t.jsx("option",{value:"PENDING_APPROVAL",children:"Pending Approval"}),t.jsx("option",{value:"APPROVED",children:"Approved"}),t.jsx("option",{value:"ACTIVE",children:"Active"}),t.jsx("option",{value:"ARCHIVED",children:"Archived"})]})]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:[t.jsx("button",{onClick:()=>{v(!1),ae(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),t.jsxs("button",{onClick:Me,disabled:!L.name||!L.subject||!L.htmlContent||!L.textContent,className:"px-4 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[t.jsx(Ya,{className:"h-4 w-4 mr-2"}),D?"Update":"Create"," Template"]})]})]})})}),J&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Email Preview"}),t.jsx("button",{onClick:()=>ae(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(da,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject:"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white font-medium",children:J.subject})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"HTML Preview:"}),t.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-700",dangerouslySetInnerHTML:{__html:J.htmlContent}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Plain Text Preview:"}),t.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-700 text-sm whitespace-pre-wrap",children:J.textContent})]})]}),t.jsx("div",{className:"flex justify-end mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:t.jsx("button",{onClick:()=>ae(null),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",children:"Close"})})]})})}),p&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:S?"Edit Template":"Create New Template"}),t.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(da,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Template Name *"}),t.jsx("input",{type:"text",value:ne.name,onChange:le=>re({...ne,name:le.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Welcome Email"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type *"}),t.jsxs("select",{value:ne.type,onChange:le=>re({...ne,type:le.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"EMAIL",children:"Email"}),t.jsx("option",{value:"WHATSAPP",children:"WhatsApp"}),t.jsx("option",{value:"SMS",children:"SMS"})]})]})]}),ne.type==="EMAIL"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject *"}),t.jsx("input",{type:"text",value:ne.subject,onChange:le=>re({...ne,subject:le.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Welcome to {{companyName}}"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Message Content *"}),t.jsx("textarea",{value:ne.content,onChange:le=>re({...ne,content:le.target.value}),rows:8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Hi {{leadFirstName}}, welcome to {{companyName}}..."}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Available variables: ","{{leadFirstName}}, {{leadLastName}}, {{leadEmail}}, {{leadPhone}}, {{leadCompany}}, {{companyName}}, {{assignedUserName}}"]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isDefault",checked:ne.isDefault,onChange:le=>re({...ne,isDefault:le.target.checked}),className:"h-4 w-4 text-weconnect-red focus:ring-weconnect-red border-gray-300 rounded"}),t.jsx("label",{htmlFor:"isDefault",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Set as default template for this type"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:[t.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),t.jsxs("button",{onClick:ge,disabled:!ne.name||!ne.content,className:"px-4 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[t.jsx(Ya,{className:"h-4 w-4 mr-2"}),S?"Update":"Create"," Template"]})]})]})})})]})},Ch=[{name:"Twilio SMS",type:"SMS",provider:"TWILIO",fields:[{name:"accountSid",label:"Account SID",type:"text",required:!0,placeholder:"ACxxxxxxx"},{name:"authToken",label:"Auth Token",type:"password",required:!0},{name:"fromPhone",label:"From Phone Number",type:"text",required:!0,placeholder:"+1234567890"}]},{name:"TextLocal SMS",type:"SMS",provider:"TEXTLOCAL",fields:[{name:"apiKey",label:"API Key",type:"password",required:!0},{name:"sender",label:"Sender Name",type:"text",required:!0,placeholder:"6 chars max"}]},{name:"MSG91 SMS",type:"SMS",provider:"MSG91",fields:[{name:"apiKey",label:"API Key",type:"password",required:!0},{name:"senderId",label:"Sender ID",type:"text",required:!0}]},{name:"WhatsApp Business API",type:"WHATSAPP",provider:"WHATSAPP_BUSINESS",fields:[{name:"accessToken",label:"Access Token",type:"password",required:!0},{name:"phoneNumberId",label:"Phone Number ID",type:"text",required:!0},{name:"webhookVerifyToken",label:"Webhook Verify Token",type:"password",required:!0}]},{name:"Gupshup WhatsApp",type:"WHATSAPP",provider:"GUPSHUP",fields:[{name:"apiKey",label:"API Key",type:"password",required:!0},{name:"appName",label:"App Name",type:"text",required:!0},{name:"source",label:"Source Number",type:"text",required:!0,placeholder:"91xxxxxxxxxx"}]},{name:"SMTP Email",type:"EMAIL",provider:"SMTP",fields:[{name:"smtpHost",label:"SMTP Host",type:"text",required:!0,placeholder:"smtp.gmail.com"},{name:"smtpPort",label:"SMTP Port",type:"number",required:!0,placeholder:"587"},{name:"smtpUser",label:"SMTP Username",type:"email",required:!0},{name:"smtpPassword",label:"SMTP Password",type:"password",required:!0},{name:"fromName",label:"From Name",type:"text",required:!0,placeholder:"Your Company Name"},{name:"fromEmail",label:"From Email",type:"email",required:!0}]},{name:"SendGrid Email",type:"EMAIL",provider:"SENDGRID",fields:[{name:"apiKey",label:"API Key",type:"password",required:!0},{name:"fromName",label:"From Name",type:"text",required:!0},{name:"fromEmail",label:"From Email",type:"email",required:!0}]},{name:"Mailgun Email",type:"EMAIL",provider:"MAILGUN",fields:[{name:"apiKey",label:"API Key",type:"password",required:!0},{name:"domain",label:"Domain",type:"text",required:!0,placeholder:"mg.yourdomain.com"},{name:"fromName",label:"From Name",type:"text",required:!0},{name:"fromEmail",label:"From Email",type:"email",required:!0}]}],Oie=()=>{const{t:e}=wn(),[r,a]=h.useState([]),[s,n]=h.useState(!0),[i,o]=h.useState(!1),[c,u]=h.useState(null),[m,g]=h.useState(null),[f,y]=h.useState({}),[p,b]=h.useState(null),[j,v]=h.useState({name:"",type:"EMAIL",provider:"",config:{},isActive:!0,isDefault:!1});h.useEffect(()=>{N()},[]);const N=async()=>{n(!0);try{const B=localStorage.getItem("authToken")||localStorage.getItem("token"),q=await(await fetch("/api/communication/providers",{headers:{Authorization:B?`Bearer ${B}`:""}})).json();q.success&&a(q.data.providers||[])}catch(B){console.error("Error fetching providers:",B),a([])}finally{n(!1)}},k=async()=>{try{const B=localStorage.getItem("authToken")||localStorage.getItem("token"),z=c?`/api/communication/providers/${c.id}`:"/api/communication/providers",J=await(await fetch(z,{method:c?"PUT":"POST",headers:{Authorization:B?`Bearer ${B}`:"","Content-Type":"application/json"},body:JSON.stringify(j)})).json();J.success?(M.success(c?"Provider updated successfully":"Provider created successfully"),o(!1),u(null),g(null),S(),await N()):M.error(J.message||"Failed to save provider")}catch(B){console.error("Error saving provider:",B),M.error("Failed to save provider")}},E=async B=>{if(confirm("Are you sure you want to delete this provider?"))try{const z=localStorage.getItem("authToken")||localStorage.getItem("token"),J=await(await fetch(`/api/communication/providers/${B}`,{method:"DELETE",headers:{Authorization:z?`Bearer ${z}`:""}})).json();J.success?(M.success("Provider deleted successfully"),await N()):M.error(J.message||"Failed to delete provider")}catch(z){console.error("Error deleting provider:",z),M.error("Failed to delete provider")}},C=async B=>{b(B.id);try{const z=localStorage.getItem("authToken")||localStorage.getItem("token"),J=await(await fetch(`/api/communication/providers/${B.id}/test`,{method:"POST",headers:{Authorization:z?`Bearer ${z}`:"","Content-Type":"application/json"},body:JSON.stringify({testType:B.type.toLowerCase(),recipient:B.type==="EMAIL"?"test@example.com":"+919999999999"})})).json();J.success?M.success("Test message sent successfully!"):M.error(J.message||"Test failed")}catch(z){console.error("Error testing provider:",z),M.error("Test failed")}finally{b(null)}},S=()=>{v({name:"",type:"EMAIL",provider:"",config:{},isActive:!0,isDefault:!1})},P=B=>{u(B),v({...B});const z=B.config||{},q=Ch.find(J=>J.provider===z.provider)||Ch.find(J=>J.name===B.name)||Ch.find(J=>J.type===B.type);g(q||null),o(!0)},D=B=>{g(B),v(z=>({...z,name:B.name,type:B.type,provider:B.provider,config:{provider:B.provider}}))},I=(B,z)=>{v(q=>({...q,config:{...q.config,[B]:z}}))},H=B=>{y(z=>({...z,[B]:!z[B]}))},W=B=>{switch(B){case"EMAIL":return t.jsx(ir,{className:"h-5 w-5 text-blue-500"});case"WHATSAPP":return t.jsx(_r,{className:"h-5 w-5 text-green-500"});case"SMS":return t.jsx(tU,{className:"h-5 w-5 text-purple-500"});default:return t.jsx(Ui,{className:"h-5 w-5 text-gray-500"})}},K=B=>B.isActive?B.isDefault?t.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Default"}):t.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Active"}):t.jsx("span",{className:"bg-gray-100 text-gray-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Inactive"});return s?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red"})}):t.jsxs("div",{className:"space-y-6 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Communication API Settings"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Configure WhatsApp, SMS, and Email gateways for automated communications"})]}),t.jsxs("button",{onClick:()=>{S(),u(null),g(null),o(!0)},className:"bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center",children:[t.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Add Provider"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:["EMAIL","WHATSAPP","SMS"].map(B=>{const z=r.filter(J=>J.type===B),q=z.filter(J=>J.isActive).length;return t.jsx(Ee,{variant:"OUTLINED",children:t.jsx(kt,{className:"pb-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[W(B),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:B==="EMAIL"?"Email":B==="WHATSAPP"?"WhatsApp":"SMS"}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[q," active / ",z.length," total"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:z.length}),t.jsx("p",{className:"text-xs text-gray-500",children:"providers"})]})]})})},B)})}),t.jsx("div",{className:"space-y-4",children:r.length===0?t.jsx(Ee,{variant:"OUTLINED",children:t.jsxs(tt,{className:"text-center py-12",children:[t.jsx(Ui,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Communication Providers Configured"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Add your first communication provider to start sending automated messages"}),t.jsx("button",{onClick:()=>{S(),o(!0)},className:"bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Get Started"})]})}):r.map(B=>t.jsx(Ee,{variant:"ELEVATED",children:t.jsx(tt,{className:"p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[t.jsx("div",{className:"flex-shrink-0",children:W(B.type)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:B.name}),K(B)]}),t.jsxs("div",{className:"space-y-1 mb-3",children:[t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("span",{className:"font-medium",children:"Provider:"})," ",B.config?.provider||"Unknown"]}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("span",{className:"font-medium",children:"Type:"})," ",B.type]}),B.createdAt&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created on ",new Date(B.createdAt).toLocaleDateString()]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 text-sm",children:[t.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Configuration:"}),t.jsxs("div",{className:"space-y-1",children:[Object.entries(B.config).slice(0,3).map(([z,q])=>t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"text-gray-600 dark:text-gray-400 capitalize",children:[z.replace(/([A-Z])/g," $1").toLowerCase(),":"]}),t.jsx("span",{className:"text-gray-900 dark:text-white",children:z.toLowerCase().includes("password")||z.toLowerCase().includes("token")||z.toLowerCase().includes("key")?"":String(q).length>20?String(q).substring(0,20)+"...":String(q)})]},z)),Object.keys(B.config).length>3&&t.jsxs("p",{className:"text-xs text-gray-500",children:["+",Object.keys(B.config).length-3," more fields"]})]})]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>C(B),disabled:p===B.id,className:"text-gray-400 hover:text-blue-600 transition-colors disabled:opacity-50",title:"Test provider",children:p===B.id?t.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full"}):t.jsx(Tl,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>P(B),className:"text-gray-400 hover:text-blue-600 transition-colors",title:"Edit provider",children:t.jsx(er,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>E(B.id),className:"text-gray-400 hover:text-red-600 transition-colors",title:"Delete provider",children:t.jsx(ht,{className:"h-4 w-4"})})]})]})})},B.id))}),i&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:c?"Edit Provider":"Add Communication Provider"}),t.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(da,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-6",children:[!c&&!m&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-4",children:"Choose a Provider Template"}),t.jsx("div",{className:"grid grid-cols-1 gap-3",children:Ch.map((B,z)=>t.jsx("button",{onClick:()=>D(B),className:"text-left p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-weconnect-red hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:t.jsxs("div",{className:"flex items-center gap-3",children:[W(B.type),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:B.name}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[B.type,"  ",B.fields.length," configuration fields"]})]})]})},z))})]}),(m||c)&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Provider Name *"}),t.jsx("input",{type:"text",value:j.name,onChange:B=>v(z=>({...z,name:B.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"My WhatsApp Provider"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Provider Type"}),t.jsx("input",{type:"text",value:`${j.type} (${j.config?.provider||j.provider||"Unknown"})`,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-400"})]})]}),m&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white",children:"Configuration"}),m.fields.map(B=>t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[B.label," ",B.required&&"*"]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:B.type==="password"&&f[B.name]?"text":B.type,value:j.config?.[B.name]||"",onChange:z=>I(B.name,B.type==="number"?Number(z.target.value):z.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:B.placeholder,required:B.required}),B.type==="password"&&t.jsx("button",{type:"button",onClick:()=>H(B.name),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:f[B.name]?t.jsx(pn,{className:"h-4 w-4"}):t.jsx(Bt,{className:"h-4 w-4"})})]}),B.description&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:B.description})]},B.name))]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:j.isActive,onChange:B=>v(z=>({...z,isActive:B.target.checked})),className:"h-4 w-4 text-weconnect-red focus:ring-weconnect-red border-gray-300 rounded"}),t.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Enable this provider"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isDefault",checked:j.isDefault,onChange:B=>v(z=>({...z,isDefault:B.target.checked})),className:"h-4 w-4 text-weconnect-red focus:ring-weconnect-red border-gray-300 rounded"}),t.jsx("label",{htmlFor:"isDefault",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Set as default provider for this type"})]})]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:[t.jsx("button",{onClick:()=>{o(!1),g(null),S()},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),(m||c)&&t.jsxs("button",{onClick:k,disabled:!j.name,className:"px-4 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[t.jsx(Ya,{className:"h-4 w-4 mr-2"}),c?"Update":"Create"," Provider"]})]})]})})})]})},Iie=()=>{const e=mt(),[r,a]=h.useState([]),[s,n]=h.useState(!0),[i,o]=h.useState(!1),[c,u]=h.useState(null),[m,g]=h.useState({name:"",description:"",headerContent:"",footerContent:"",termsAndConditions:"",validityDays:30,showTax:!0,showDiscount:!0,logoPosition:"left",isDefault:!1,isActive:!0});h.useEffect(()=>{f()},[]);const f=async()=>{try{n(!0);const k=await Pt.get("/api/business-settings/quotation-templates");k.data.success&&a(k.data.data)}catch(k){console.error("Failed to fetch quotation templates:",k),M.error("Failed to load quotation templates")}finally{n(!1)}},y=async k=>{if(k.preventDefault(),!m.name?.trim()){M.error("Template name is required");return}try{c?(await Pt.put(`/api/business-settings/quotation-templates/${c.id}`,m)).data.success&&(M.success("Template updated successfully"),o(!1),u(null),v(),f()):(await Pt.post("/api/business-settings/quotation-templates",m)).data.success&&(M.success("Template created successfully"),o(!1),v(),f())}catch(E){console.error("Failed to save template:",E),M.error(E.response?.data?.message||"Failed to save template")}},p=k=>{u(k),g(k),o(!0)},b=async k=>{try{(await Pt.put(`/api/business-settings/quotation-templates/${k}/set-default`)).data.success&&(M.success("Default template updated successfully"),f())}catch(E){console.error("Failed to set default template:",E),M.error("Failed to set default template")}},j=async k=>{if(window.confirm("Are you sure you want to delete this template? This action cannot be undone."))try{(await Pt.delete(`/api/business-settings/quotation-templates/${k}`)).data.success&&(M.success("Template deleted successfully"),f())}catch(E){console.error("Failed to delete template:",E),M.error("Failed to delete template")}},v=()=>{g({name:"",description:"",headerContent:"",footerContent:"",termsAndConditions:"",validityDays:30,showTax:!0,showDiscount:!0,logoPosition:"left",isDefault:!1,isActive:!0})},N=(k,E)=>{g(C=>({...C,[k]:E}))};return s?t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"})}):i?t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"sm",onClick:()=>{o(!1),u(null),v()},className:"p-2",children:t.jsx(vr,{className:"w-4 h-4"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c?"Edit Template":"Create Template"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure quotation template settings"})]})]})}),t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Template Settings"})}),t.jsx(tt,{children:t.jsxs("form",{onSubmit:y,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Template Name *"}),t.jsx("input",{type:"text",value:m.name||"",onChange:k=>N("name",k.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"e.g., Standard Quotation",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Validity (Days)"}),t.jsx("input",{type:"number",value:m.validityDays||30,onChange:k=>N("validityDays",parseInt(k.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",min:"1"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),t.jsx("textarea",{value:m.description||"",onChange:k=>N("description",k.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Brief description of this template",rows:2})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Header Content"}),t.jsx("textarea",{value:m.headerContent||"",onChange:k=>N("headerContent",k.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Header text or HTML (will appear at top of quotation)",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Footer Content"}),t.jsx("textarea",{value:m.footerContent||"",onChange:k=>N("footerContent",k.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Footer text or HTML (will appear at bottom of quotation)",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Terms and Conditions"}),t.jsx("textarea",{value:m.termsAndConditions||"",onChange:k=>N("termsAndConditions",k.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter terms and conditions for this quotation",rows:5})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Logo Position"}),t.jsxs("select",{value:m.logoPosition||"left",onChange:k=>N("logoPosition",k.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[t.jsx("option",{value:"left",children:"Left"}),t.jsx("option",{value:"center",children:"Center"}),t.jsx("option",{value:"right",children:"Right"})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"showTax",checked:m.showTax||!1,onChange:k=>N("showTax",k.target.checked),className:"w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500"}),t.jsx("label",{htmlFor:"showTax",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Show Tax"})]})}),t.jsx("div",{className:"flex items-end",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"showDiscount",checked:m.showDiscount||!1,onChange:k=>N("showDiscount",k.target.checked),className:"w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500"}),t.jsx("label",{htmlFor:"showDiscount",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Show Discount"})]})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:m.isActive||!1,onChange:k=>N("isActive",k.target.checked),className:"w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500"}),t.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Active (make this template available for use)"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isDefault",checked:m.isDefault||!1,onChange:k=>N("isDefault",k.target.checked),className:"w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500"}),t.jsx("label",{htmlFor:"isDefault",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Set as default template"})]})]}),t.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[t.jsxs(me,{type:"submit",className:"flex items-center gap-2",children:[t.jsx(hf,{className:"w-4 h-4"}),c?"Update Template":"Create Template"]}),t.jsx(me,{type:"button",variant:"OUTLINE",onClick:()=>{o(!1),u(null),v()},children:"Cancel"})]})]})})]})]}):t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"sm",onClick:()=>e("/business-settings"),className:"p-2",children:t.jsx(vr,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-red-500 to-pink-600 rounded-xl",children:t.jsx(Lt,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Quotation Templates"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage quotation templates for your business"})]})]})]}),t.jsxs(me,{onClick:()=>{v(),o(!0)},className:"flex items-center gap-2",children:[t.jsx(Rt,{className:"w-4 h-4"}),"Create Template"]})]}),r.length===0?t.jsx(Ee,{children:t.jsxs(tt,{className:"text-center py-12",children:[t.jsx(Lt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Templates Yet"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create your first quotation template to get started"}),t.jsxs(me,{onClick:()=>o(!0),className:"flex items-center gap-2 mx-auto",children:[t.jsx(Rt,{className:"w-4 h-4"}),"Create Template"]})]})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(k=>t.jsxs(Ee,{className:"group hover:shadow-xl transition-all duration-300",children:[t.jsx(kt,{className:"pb-3",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:k.name}),k.isDefault&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs font-medium",children:[t.jsx(Bu,{className:"w-3 h-3 fill-current"}),"Default"]})]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:k.description||"No description"})]})})}),t.jsxs(tt,{className:"pt-0",children:[t.jsxs("div",{className:"mb-4 bg-gray-100 dark:bg-gray-800 rounded-lg p-4 space-y-2 text-xs text-gray-600 dark:text-gray-400",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Validity:"}),t.jsxs("span",{className:"font-medium",children:[k.validityDays," days"]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Show Tax:"}),t.jsx("span",{className:"font-medium",children:k.showTax?"Yes":"No"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Show Discount:"}),t.jsx("span",{className:"font-medium",children:k.showDiscount?"Yes":"No"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Status:"}),t.jsx("span",{className:k.isActive?"text-green-600":"text-red-600",children:k.isActive?"Active":"Inactive"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[!k.isDefault&&t.jsxs(me,{variant:"OUTLINE",size:"sm",onClick:()=>b(k.id),className:"flex items-center gap-2 justify-center",children:[t.jsx(Bu,{className:"w-4 h-4"}),"Set Default"]}),t.jsxs(me,{variant:"OUTLINE",size:"sm",onClick:()=>p(k),className:"flex items-center gap-2 justify-center",children:[t.jsx(Ko,{className:"w-4 h-4"}),"Edit"]}),!k.isDefault&&t.jsxs(me,{variant:"OUTLINE",size:"sm",onClick:()=>j(k.id),className:"flex items-center gap-2 justify-center text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 col-span-2",children:[t.jsx(ht,{className:"w-4 h-4"}),"Delete"]})]})]})]},k.id))}),t.jsx(Ee,{className:"border-l-4 border-l-blue-500",children:t.jsx(tt,{className:"p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:t.jsx(Lt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"About Quotation Templates"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Quotation templates define the design and structure of quotations generated in deal management. When you create a quotation from a deal, it will use the default template's settings for header, footer, terms, and display options. Products and services will be automatically fetched from the deal."})]})]})})})]})},Lie=()=>{const e=mt(),{companySettings:r,updateCompanySettings:a,currencySettings:s,isLoading:n}=Hr(),[i,o]=h.useState(null),c=[{id:"professional",name:"Professional Invoice",description:"Clean modern layout with logo left, invoice details right",type:"professional"},{id:"template1",name:"Values - Standard Left",description:"Clean layout with logo on the left",type:"standard-left"},{id:"template2",name:"Classic - Logo Right",description:"Traditional layout with logo on the right",type:"classic-right"},{id:"template3",name:"Bold Header",description:"Full-width colored header with green theme",type:"bold-header"},{id:"template5",name:"Minimalist",description:"Simple, data-focused black & white",type:"minimalist"}],u=f=>{const y=({children:b,className:j=""})=>t.jsx("div",{className:`bg-white rounded shadow-sm w-full h-full flex flex-col overflow-hidden text-gray-800 relative ${j}`,children:b}),p=()=>t.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-100 pb-2",children:[t.jsx("div",{className:"text-[7px] font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Notes & Terms"}),t.jsx("div",{className:"text-[6px] text-gray-400 line-clamp-2 italic",children:"Thank you for your business. Please pay within 15 days."})]});switch(f){case"professional":return t.jsxs(y,{className:"p-6 text-[9px]",children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-orange-600"}),t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-10 w-10 bg-orange-500 rounded flex items-center justify-center shadow-sm",children:t.jsx("span",{className:"text-white text-[12px] font-bold",children:"YL"})}),t.jsx("div",{className:"font-bold text-gray-900",children:"YOURLOGO"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-[18px] font-bold text-gray-900 tracking-wider",children:"INVOICE"}),t.jsx("div",{className:"text-[9px] text-gray-500",children:"#INV-2024-001"})]})]}),t.jsxs("div",{className:"flex justify-between mb-6",children:[t.jsxs("div",{className:"bg-orange-50 p-2 rounded w-48",children:[t.jsx("div",{className:"text-[7px] font-bold text-orange-600 mb-1",children:"BILL TO"}),t.jsx("div",{className:"font-bold text-gray-900",children:"Acme Corp Ltd."}),t.jsx("div",{className:"text-gray-500",children:"New Delhi, India"})]}),t.jsxs("div",{className:"border border-gray-100 p-2 rounded w-32",children:[t.jsx("div",{className:"text-[7px] font-bold text-gray-400",children:"DATE"}),t.jsx("div",{className:"font-bold text-gray-900",children:"16 Dec 2024"})]})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"bg-gray-900 text-white flex text-[7px] font-bold py-1.5 px-2 rounded-t",children:[t.jsx("div",{className:"flex-1",children:"ITEM"}),t.jsx("div",{className:"w-12 text-center",children:"QTY"}),t.jsx("div",{className:"w-20 text-right",children:"TOTAL"})]}),t.jsxs("div",{className:"flex text-[8px] py-1.5 px-2 border-b border-gray-50",children:[t.jsx("div",{className:"flex-1",children:"Web Development"}),t.jsx("div",{className:"w-12 text-center",children:"1"}),t.jsxs("div",{className:"w-20 text-right font-bold",children:[s?.symbol||"","50,000"]})]})]}),t.jsx("div",{className:"flex justify-end mt-4 mb-4",children:t.jsxs("div",{className:"bg-orange-600 text-white px-4 py-2 rounded flex justify-between w-40 items-center",children:[t.jsx("span",{className:"text-[7px] font-bold",children:"TOTAL"}),t.jsxs("span",{className:"text-[12px] font-bold",children:[s?.symbol||"","50,000"]})]})}),t.jsx(p,{})]});case"standard-left":return t.jsxs(y,{className:"p-6 text-[9px]",children:[t.jsxs("div",{className:"bg-blue-50 -mx-6 -mt-6 p-6 mb-6 flex justify-between items-center border-b border-blue-100",children:[t.jsx("div",{className:"font-bold text-blue-700 text-[12px]",children:"VALUES"}),t.jsx("div",{className:"text-[14px] font-bold text-blue-900",children:"INVOICE"})]}),t.jsxs("div",{className:"flex justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-[7px] font-bold text-blue-600 mb-1",children:"BILL TO"}),t.jsx("div",{className:"font-bold",children:"Tech Solutions"})]}),t.jsx("div",{className:"text-right text-gray-500",children:"#INV-2024-100"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"bg-blue-600 text-white flex text-[7px] font-bold py-1 px-2",children:[t.jsx("div",{className:"flex-1",children:"DESCRIPTION"}),t.jsx("div",{className:"w-20 text-right",children:"AMOUNT"})]}),t.jsxs("div",{className:"flex py-2 px-2 border-b border-gray-100",children:[t.jsx("div",{className:"flex-1",children:"Premium Package"}),t.jsxs("div",{className:"w-20 text-right font-bold",children:[s?.symbol||"","35,000"]})]})]}),t.jsx("div",{className:"flex justify-end mt-4",children:t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-[7px] font-bold text-gray-400",children:"TOTAL DUE"}),t.jsxs("div",{className:"text-[16px] font-bold text-blue-600",children:[s?.symbol||"","35,000"]})]})}),t.jsx(p,{})]});case"classic-right":return t.jsxs(y,{className:"p-6 text-[9px] font-serif",children:[t.jsxs("div",{className:"flex justify-between items-end mb-2",children:[t.jsx("div",{className:"text-[20px] font-bold tracking-tighter",children:"INVOICE"}),t.jsx("div",{className:"text-indigo-800 font-bold",children:"CLASSIC"})]}),t.jsx("div",{className:"h-0.5 bg-indigo-900 mb-6"}),t.jsxs("div",{className:"flex justify-between mb-8",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-[7px] text-indigo-900 font-sans font-bold mb-1",children:"BILL TO"}),t.jsx("div",{className:"font-bold text-[10px]",children:"Global Enterprises"})]}),t.jsx("div",{className:"text-right italic text-gray-400",children:"16 Dec 2024"})]}),t.jsxs("div",{className:"flex-1 font-sans",children:[t.jsxs("div",{className:"bg-indigo-50 border-y border-indigo-100 flex text-[7px] font-bold py-2 px-2",children:[t.jsx("div",{className:"flex-1",children:"DESCRIPTION"}),t.jsx("div",{className:"w-20 text-right",children:"TOTAL"})]}),t.jsxs("div",{className:"flex py-2 px-2 border-b border-gray-100",children:[t.jsx("div",{className:"flex-1",children:"Brand Strategy"}),t.jsxs("div",{className:"w-20 text-right font-bold",children:[s?.symbol||"","45,000"]})]})]}),t.jsx("div",{className:"flex justify-end mt-4",children:t.jsxs("div",{className:"bg-indigo-800 text-white px-4 py-2 rounded-sm shadow-md w-32",children:[t.jsx("div",{className:"text-[6px] opacity-70",children:"PAYABLE"}),t.jsxs("div",{className:"text-[12px] font-bold",children:[s?.symbol||"","45,000"]})]})}),t.jsx(p,{})]});case"bold-header":return t.jsxs(y,{className:"p-0 text-[9px]",children:[t.jsxs("div",{className:"h-20 bg-gray-50 border-b border-gray-100 p-6 flex justify-between items-center",children:[t.jsx("div",{className:"font-bold text-gray-900",children:"YOURLOGO"}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-[7px] font-bold text-emerald-600",children:"BILL TO"}),t.jsx("div",{className:"font-bold text-gray-900",children:"Industrial Corp"})]})]}),t.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[t.jsxs("div",{className:"bg-emerald-600 text-white p-3 rounded-lg mb-6 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-[6px] opacity-80",children:"INVOICE"}),t.jsx("div",{className:"text-[10px] font-bold",children:"#2024-100"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-[6px] opacity-80",children:"DUE"}),t.jsx("div",{className:"text-[10px] font-bold",children:"30 Dec"})]})]}),t.jsxs("div",{className:"border-b-2 border-emerald-50 text-[7px] font-bold text-gray-400 py-1 mb-2 flex",children:[t.jsx("div",{className:"flex-1",children:"ITEM"}),t.jsx("div",{className:"w-20 text-right",children:"PRICE"})]}),t.jsxs("div",{className:"flex py-2 border-b border-gray-50",children:[t.jsx("div",{className:"flex-1 font-bold",children:"Gold Membership Plan"}),t.jsxs("div",{className:"w-20 text-right font-bold",children:[s?.symbol||"","50,000"]})]}),t.jsx("div",{className:"mt-auto flex justify-end pt-4",children:t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-[7px] font-bold text-gray-400",children:"TOTAL DUE"}),t.jsxs("div",{className:"text-[20px] font-bold text-emerald-600",children:[s?.symbol||"","50,000"]})]})}),t.jsx(p,{})]})]});case"minimalist":return t.jsxs(y,{className:"p-8 border-[2px] border-gray-900 text-[9px] flex flex-col",children:[t.jsxs("div",{className:"flex flex-col items-center mb-6",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-900 rounded-full mb-2"}),t.jsx("div",{className:"text-[18px] font-black tracking-widest text-center",children:"INVOICE"})]}),t.jsxs("div",{className:"flex justify-between mb-6 border-b-2 border-gray-900 pb-4",children:[t.jsx("div",{children:t.jsx("div",{className:"font-bold",children:"Client Co."})}),t.jsx("div",{className:"text-right font-mono font-bold",children:"INV-001"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex font-bold border-b border-gray-100 pb-2 mb-2",children:[t.jsx("div",{className:"flex-1",children:"SERVICES"}),t.jsx("div",{className:"w-20 text-right",children:"TOTAL"})]}),t.jsxs("div",{className:"flex mb-2",children:[t.jsx("div",{className:"flex-1",children:"Consulting"}),t.jsxs("div",{className:"w-20 text-right font-bold",children:[s?.symbol||"","60,000"]})]})]}),t.jsx("div",{className:"border-t-2 border-gray-900 pt-4 text-right",children:t.jsxs("div",{className:"text-[24px] font-black",children:[s?.symbol||"","60,000"]})}),t.jsx(p,{})]});default:return null}},m=async f=>{try{await a({invoiceTemplate:f}),M.success("Invoice template updated successfully")}catch(y){console.error("Failed to update invoice template:",y),M.error("Failed to update invoice template")}};if(n)return t.jsx(Nn,{message:"Loading settings..."});const g=r?.invoiceTemplate||"template1";return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>e("/business-settings"),className:"p-2",children:t.jsx(vr,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-red-500 to-pink-600 rounded-xl",children:t.jsx(Lt,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Invoice Templates"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select the design for your invoices"})]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:c.map(f=>{const y=g===f.id;return t.jsx("div",{className:`group relative cursor-pointer transition-all duration-300 transform hover:-translate-y-1 ${y?"ring-2 ring-blue-500 ring-offset-2 dark:ring-offset-gray-900 rounded-xl":""}`,onClick:()=>m(f.id),children:t.jsxs(Ee,{className:"h-full overflow-hidden border-0 shadow-lg hover:shadow-xl transition-shadow bg-gray-50 dark:bg-gray-800/50",children:[t.jsxs("div",{className:"h-96 relative border-b border-gray-100 dark:border-gray-800 p-10 flex justify-center items-center bg-gray-100 dark:bg-gray-900/50",children:[t.jsx("div",{className:"w-72 h-[22rem] shadow-2xl transform transition-transform group-hover:scale-105",children:u(f.type)}),t.jsx("button",{onClick:p=>{p.stopPropagation(),o(f.type)},className:"absolute top-3 right-3 bg-white dark:bg-gray-800 p-2 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-all duration-300 hover:bg-blue-50 dark:hover:bg-blue-900/30 hover:scale-110 z-20",title:"Preview Invoice Design",children:t.jsx(Bt,{className:"w-4 h-4 text-blue-500"})}),y&&t.jsx("div",{className:"absolute inset-0 bg-blue-500/10 flex items-center justify-center backdrop-blur-[1px]",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-full p-2 shadow-lg mb-8",children:t.jsx(bb,{className:"w-8 h-8 text-blue-500"})})})]}),t.jsxs(tt,{className:"p-4 bg-white dark:bg-gray-800 relative z-10",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:`font-semibold text-sm ${y?"text-blue-600 dark:text-blue-400":"text-gray-900 dark:text-white"}`,children:f.name}),y&&t.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-2 py-0.5 rounded-full",children:"Active"})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:f.description})]})]})},f.id)})}),t.jsx(Ee,{className:"bg-blue-50 dark:bg-blue-900/10 border-blue-100 dark:border-blue-900/30",children:t.jsxs(tt,{className:"p-4 flex items-start gap-3",children:[t.jsx(X9,{className:"w-5 h-5 text-blue-500 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:"About Invoice Templates"}),t.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"The selected template will be automatically applied to all PDF invoices and quotations generated from the system. content layout and branding will be adjusted according to the chosen style."})]})]})})]}),i&&t.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>o(null),children:t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:f=>f.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:t.jsx(Lt,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Invoice Design Preview"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.find(f=>f.type===i)?.name})]})]}),t.jsx("button",{onClick:()=>o(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:t.jsx(da,{className:"w-5 h-5 text-gray-500"})})]}),t.jsx("div",{className:"p-8 bg-gray-100 dark:bg-gray-800/50 flex justify-center items-center min-h-[500px]",children:t.jsx("div",{className:"w-[420px] h-[560px] shadow-2xl rounded-lg overflow-hidden transform hover:scale-[1.02] transition-transform duration-300",children:t.jsx("div",{className:"bg-white w-full h-full flex flex-col",children:u(i)})})}),t.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:'Click "Use Template" below or click outside to close'}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(me,{variant:"SECONDARY",size:"SM",onClick:()=>o(null),children:"Close"}),t.jsx(me,{variant:"PRIMARY",size:"SM",onClick:()=>{const f=c.find(y=>y.type===i);f&&(m(f.id),o(null))},children:"Use This Template"})]})]})]})})]})},Rie=()=>{const e=mt(),[r,a]=h.useState({quotePrefix:"Q-",quoteSuffix:"",quotePad:6,invoicePrefix:"INV-",invoiceSuffix:"",invoicePad:6,quoteNumberingEnabled:!0,invoiceNumberingEnabled:!0}),[s,n]=h.useState(!0),[i,o]=h.useState(!1);h.useEffect(()=>{c()},[]);const c=async()=>{try{const f=await oe.get("/business-settings/numbering");f.data.success&&a(f.data.data)}catch(f){console.error("Error fetching numbering settings:",f),M.error("Failed to load numbering settings")}finally{n(!1)}},u=(f,y)=>{a(p=>({...p,[f]:y}))},m=async f=>{f.preventDefault(),o(!0);try{(await oe.put("/business-settings/numbering",r)).data.success&&M.success("Numbering settings updated successfully")}catch(y){console.error("Failed to update numbering settings:",y),M.error(y.response?.data?.message||"Failed to update numbering settings")}finally{o(!1)}},g=(f,y,p,b=1)=>`${f}${String(b).padStart(p,"0")}${y}`;return s?t.jsx(Nn,{message:"Loading numbering settings..."}):t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>e("/business-settings"),className:"p-2",children:t.jsx(vr,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-red-500 to-pink-600 rounded-xl",children:t.jsx(nD,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Document Numbering"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure prefixes, suffixes, and numbering formats for quotations and invoices"})]})]})]}),t.jsxs("form",{onSubmit:m,className:"space-y-6",children:[t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(Lt,{className:"w-5 h-5"}),"Quotation Numbering"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.quoteNumberingEnabled?"Enabled":"Disabled"}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:r.quoteNumberingEnabled,onChange:f=>u("quoteNumberingEnabled",f.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]})}),t.jsxs(tt,{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prefix *"}),t.jsx("input",{type:"text",value:r.quotePrefix,onChange:f=>u("quotePrefix",f.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Q-",required:!0}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Characters before the number (e.g., Q-, QUOTE-)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Suffix"}),t.jsx("input",{type:"text",value:r.quoteSuffix,onChange:f=>u("quoteSuffix",f.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"-2025"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Characters after the number (e.g., -2025, /2025)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Zero Padding *"}),t.jsx("input",{type:"number",value:r.quotePad,onChange:f=>u("quotePad",parseInt(f.target.value)||6),min:"1",max:"10",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Number of digits (e.g., 6 = Q-000001)"})]})]}),t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[t.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Preview"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"First quotation:"}),t.jsx("p",{className:"font-mono font-semibold text-blue-700 dark:text-blue-300",children:g(r.quotePrefix,r.quoteSuffix,r.quotePad,1)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"100th quotation:"}),t.jsx("p",{className:"font-mono font-semibold text-blue-700 dark:text-blue-300",children:g(r.quotePrefix,r.quoteSuffix,r.quotePad,100)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"1000th quotation:"}),t.jsx("p",{className:"font-mono font-semibold text-blue-700 dark:text-blue-300",children:g(r.quotePrefix,r.quoteSuffix,r.quotePad,1e3)})]})]})]})]})]}),t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(Li,{className:"w-5 h-5"}),"Invoice Numbering"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.invoiceNumberingEnabled?"Enabled":"Disabled"}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:r.invoiceNumberingEnabled,onChange:f=>u("invoiceNumberingEnabled",f.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]})}),t.jsxs(tt,{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prefix *"}),t.jsx("input",{type:"text",value:r.invoicePrefix,onChange:f=>u("invoicePrefix",f.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"INV-",required:!0}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Characters before the number (e.g., INV-, INVOICE-)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Suffix"}),t.jsx("input",{type:"text",value:r.invoiceSuffix,onChange:f=>u("invoiceSuffix",f.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"-2025"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Characters after the number (e.g., -2025, /2025)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Zero Padding *"}),t.jsx("input",{type:"number",value:r.invoicePad,onChange:f=>u("invoicePad",parseInt(f.target.value)||6),min:"1",max:"10",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Number of digits (e.g., 6 = INV-000001)"})]})]}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[t.jsx("h4",{className:"text-sm font-medium text-green-900 dark:text-green-100 mb-2",children:"Preview"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"First invoice:"}),t.jsx("p",{className:"font-mono font-semibold text-green-700 dark:text-green-300",children:g(r.invoicePrefix,r.invoiceSuffix,r.invoicePad,1)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"100th invoice:"}),t.jsx("p",{className:"font-mono font-semibold text-green-700 dark:text-green-300",children:g(r.invoicePrefix,r.invoiceSuffix,r.invoicePad,100)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"1000th invoice:"}),t.jsx("p",{className:"font-mono font-semibold text-green-700 dark:text-green-300",children:g(r.invoicePrefix,r.invoiceSuffix,r.invoicePad,1e3)})]})]})]})]})]}),t.jsxs("div",{className:"flex gap-4 justify-end",children:[t.jsxs(me,{type:"button",variant:"OUTLINE",onClick:()=>{a({quotePrefix:"Q-",quoteSuffix:"",quotePad:6,invoicePrefix:"INV-",invoiceSuffix:"",invoicePad:6,quoteNumberingEnabled:!0,invoiceNumberingEnabled:!0})},disabled:i,className:"flex items-center gap-2",children:[t.jsx(ym,{className:"w-4 h-4"}),"Reset to Defaults"]}),t.jsx(me,{type:"button",variant:"OUTLINE",onClick:()=>e("/business-settings"),disabled:i,children:"Cancel"}),t.jsxs(me,{type:"submit",variant:"PRIMARY",disabled:i,className:"flex items-center gap-2",children:[t.jsx(Ya,{className:"w-4 h-4"}),i?"Saving...":"Save Settings"]})]})]})]})},Mie=()=>{const e=mt(),[r,a]=h.useState([]),[s,n]=h.useState(!0),[i,o]=h.useState(!1),[c,u]=h.useState(null),[m,g]=h.useState({name:"",description:"",content:"",category:"general",isDefault:!1,isActive:!0});h.useEffect(()=>{f()},[]);const f=async()=>{try{n(!0);const k=await Pt.get("/api/business-settings/terms-and-conditions");k.data.success&&a(k.data.data)}catch(k){console.error("Failed to fetch terms and conditions:",k),M.error("Failed to load terms and conditions")}finally{n(!1)}},y=async k=>{if(k.preventDefault(),!m.name?.trim()){M.error("Template name is required");return}if(!m.content?.trim()){M.error("Content is required");return}try{c?(await Pt.put(`/api/business-settings/terms-and-conditions/${c.id}`,m)).data.success&&(M.success("Template updated successfully"),o(!1),u(null),v(),f()):(await Pt.post("/api/business-settings/terms-and-conditions",m)).data.success&&(M.success("Template created successfully"),o(!1),v(),f())}catch(E){console.error("Failed to save template:",E),M.error(E.response?.data?.message||"Failed to save template")}},p=k=>{u(k),g(k),o(!0)},b=async k=>{try{(await Pt.put(`/api/business-settings/terms-and-conditions/set-default/${k}`)).data.success&&(M.success("Default template updated successfully"),f())}catch(E){console.error("Failed to set default template:",E),M.error("Failed to set default template")}},j=async k=>{if(window.confirm("Are you sure you want to delete this template? This action cannot be undone."))try{(await Pt.delete(`/api/business-settings/terms-and-conditions/${k}`)).data.success&&(M.success("Template deleted successfully"),f())}catch(E){console.error("Failed to delete template:",E),M.error("Failed to delete template")}},v=()=>{g({name:"",description:"",content:"",category:"general",isDefault:!1,isActive:!0})},N=(k,E)=>{g(C=>({...C,[k]:E}))};return s?t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"})}):i?t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>{o(!1),u(null),v()},className:"p-2",children:t.jsx(vr,{className:"w-4 h-4"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c?"Edit Template":"Create Template"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure terms and conditions template settings"})]})]})}),t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Template Settings"})}),t.jsx(tt,{children:t.jsxs("form",{onSubmit:y,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Template Name *"}),t.jsx("input",{type:"text",value:m.name||"",onChange:k=>N("name",k.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"e.g., Standard Terms & Conditions",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),t.jsxs("select",{value:m.category||"general",onChange:k=>N("category",k.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[t.jsx("option",{value:"general",children:"General"}),t.jsx("option",{value:"service",children:"Service Agreement"}),t.jsx("option",{value:"product",children:"Product Sale"}),t.jsx("option",{value:"consultation",children:"Consultation"}),t.jsx("option",{value:"custom",children:"Custom"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),t.jsx("textarea",{value:m.description||"",onChange:k=>N("description",k.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Brief description of this template",rows:2})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Terms and Conditions Content *"}),t.jsx("textarea",{value:m.content||"",onChange:k=>N("content",k.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter the full terms and conditions text here...",rows:15,required:!0}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This content will be displayed in quotations and invoices. You can use HTML formatting if needed."})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:m.isActive||!1,onChange:k=>N("isActive",k.target.checked),className:"w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500"}),t.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Active (make this template available for use)"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isDefault",checked:m.isDefault||!1,onChange:k=>N("isDefault",k.target.checked),className:"w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500"}),t.jsx("label",{htmlFor:"isDefault",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Set as default template"})]})]}),t.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[t.jsxs(me,{type:"submit",className:"flex items-center gap-2",children:[t.jsx(hf,{className:"w-4 h-4"}),c?"Update Template":"Create Template"]}),t.jsx(me,{type:"button",variant:"OUTLINE",onClick:()=>{o(!1),u(null),v()},children:"Cancel"})]})]})})]})]}):t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"sm",onClick:()=>e("/business-settings"),className:"p-2",children:t.jsx(vr,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-red-500 to-pink-600 rounded-xl",children:t.jsx(Lt,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Terms & Conditions"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage terms and conditions templates for your business"})]})]})]}),t.jsxs(me,{onClick:()=>{v(),o(!0)},className:"flex items-center gap-2",children:[t.jsx(Rt,{className:"w-4 h-4"}),"Create Template"]})]}),r.length===0?t.jsx(Ee,{children:t.jsxs(tt,{className:"text-center py-12",children:[t.jsx(Lt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Templates Yet"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create your first terms and conditions template to get started"}),t.jsxs(me,{onClick:()=>o(!0),className:"flex items-center gap-2 mx-auto",children:[t.jsx(Rt,{className:"w-4 h-4"}),"Create Template"]})]})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(k=>t.jsxs(Ee,{className:"group hover:shadow-xl transition-all duration-300",children:[t.jsx(kt,{className:"pb-3",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:k.name}),k.isDefault&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs font-medium",children:[t.jsx(Bu,{className:"w-3 h-3 fill-current"}),"Default"]})]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:k.description||"No description"})]})})}),t.jsxs(tt,{className:"pt-0",children:[t.jsxs("div",{className:"mb-4 bg-gray-100 dark:bg-gray-800 rounded-lg p-4 space-y-2 text-xs text-gray-600 dark:text-gray-400",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Category:"}),t.jsx("span",{className:"font-medium capitalize",children:k.category})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Status:"}),t.jsx("span",{className:k.isActive?"text-green-600":"text-red-600",children:k.isActive?"Active":"Inactive"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Created:"}),t.jsx("span",{className:"font-medium",children:new Date(k.createdAt).toLocaleDateString()})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Content Preview:"}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded p-2 max-h-20 overflow-hidden",children:t.jsxs("p",{className:"text-xs text-gray-700 dark:text-gray-300 line-clamp-3",children:[k.content.replace(/<[^>]*>/g,"").substring(0,150),"..."]})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[!k.isDefault&&t.jsxs(me,{variant:"OUTLINE",size:"sm",onClick:()=>b(k.id),className:"flex items-center gap-2 justify-center",children:[t.jsx(Bu,{className:"w-4 h-4"}),"Set Default"]}),t.jsxs(me,{variant:"OUTLINE",size:"sm",onClick:()=>p(k),className:"flex items-center gap-2 justify-center",children:[t.jsx(Ko,{className:"w-4 h-4"}),"Edit"]}),!k.isDefault&&t.jsxs(me,{variant:"OUTLINE",size:"sm",onClick:()=>j(k.id),className:"flex items-center gap-2 justify-center text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 col-span-2",children:[t.jsx(ht,{className:"w-4 h-4"}),"Delete"]})]})]})]},k.id))}),t.jsx(Ee,{className:"border-l-4 border-l-blue-500",children:t.jsx(tt,{className:"p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:t.jsx(Lt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"About Terms & Conditions Templates"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Terms and conditions templates define the legal terms that will be included in your quotations and invoices. When you create a quotation or invoice, it will automatically use the default template's terms. You can create different templates for different types of services or products."})]})]})})})]})},_ie=()=>{const[e,r]=h.useState(null),[a,s]=h.useState(!0),[n,i]=h.useState(!1);h.useEffect(()=>{o()},[]);const o=async()=>{try{const f=await Qn.getPreferences();r(f)}catch(f){console.error("Failed to load preferences:",f),M.error("Failed to load preferences")}finally{s(!1)}},c=async()=>{if(e){i(!0);try{await Qn.updatePreferences(e),M.success("Preferences saved successfully")}catch(f){console.error("Failed to save preferences:",f),M.error("Failed to save preferences")}finally{i(!1)}}},u=f=>{e&&r({...e,[f]:!e[f]})},m=f=>{e&&r({...e,preferences:{...e.preferences,[f]:!e.preferences[f]}})};if(a)return t.jsx("div",{className:"p-6 flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ii,{className:"w-8 h-8 animate-spin mx-auto mb-2 text-blue-600"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading preferences..."})]})});if(!e)return t.jsx("div",{className:"p-6 flex items-center justify-center min-h-screen",children:t.jsx("div",{className:"text-center text-red-600",children:t.jsx("p",{children:"Failed to load preferences. Please try refreshing the page."})})});const g=[{key:"leadCreated",label:"New Lead Created",description:"When a new lead is added to the system"},{key:"leadUpdated",label:"Lead Updated",description:"When lead information is modified"},{key:"leadAssigned",label:"Lead Assigned to You",description:"When a lead is assigned to you"},{key:"leadStatusChanged",label:"Lead Status Changed",description:"When a lead status changes"},{key:"clientReply",label:"Client Reply",description:"When a client responds via email or WhatsApp"},{key:"paymentAdded",label:"Payment Added",description:"When a new payment is recorded"},{key:"paymentUpdated",label:"Payment Updated",description:"When payment information is modified"},{key:"taskAssigned",label:"Task Assigned to You",description:"When a task is assigned to you"},{key:"taskDue",label:"Task Due",description:"When your task is due soon"},{key:"meetingScheduled",label:"Meeting Scheduled",description:"When a meeting is scheduled with you"},{key:"followUpDue",label:"Follow-up Due",description:"When a follow-up is due"},{key:"dealCreated",label:"Deal Created",description:"When a new deal is created"},{key:"dealWon",label:"Deal Won",description:"When a deal is marked as won"},{key:"dealLost",label:"Deal Lost",description:"When a deal is marked as lost"},{key:"quotationSent",label:"Quotation Sent",description:"When a quotation is sent to a client"},{key:"quotationAccepted",label:"Quotation Accepted",description:"When a client accepts a quotation"},{key:"invoiceSent",label:"Invoice Sent",description:"When an invoice is sent"},{key:"invoicePaid",label:"Invoice Paid",description:"When an invoice is marked as paid"}];return t.jsxs("div",{className:"p-6  mx-auto space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Notification Preferences"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage how you receive notifications"})]}),t.jsx("button",{onClick:c,disabled:n,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?t.jsxs(t.Fragment,{children:[t.jsx(Ii,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Ya,{className:"h-4 w-4"}),"Save Changes"]})})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 p-6 space-y-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Global Settings"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx($l,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"In-App Notifications"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Show notifications in the application"})]})]}),t.jsx("button",{onClick:()=>u("inAppEnabled"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e.inAppEnabled?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e.inAppEnabled?"translate-x-3":"-translate-x-3"}`})})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[e.soundEnabled?t.jsx(nU,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}):t.jsx(iU,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Notification Sound"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Play sound when new notification arrives"})]})]}),t.jsx("button",{onClick:()=>u("soundEnabled"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e.soundEnabled?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e.soundEnabled?"translate-x-3":"-translate-x-3"}`})})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ir,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Email Notifications"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Send notifications to your email"})]})]}),t.jsx("button",{onClick:()=>u("emailEnabled"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e.emailEnabled?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e.emailEnabled?"translate-x-3":"-translate-x-3"}`})})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx(Yt,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Do Not Disturb"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Silence notifications during specific hours (24-hour format)"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Hour (0-23)"}),t.jsx("input",{type:"number",min:"0",max:"23",value:e.doNotDisturbStart??"",onChange:f=>r({...e,doNotDisturbStart:f.target.value?parseInt(f.target.value):void 0}),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"22"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Example: 22 for 10 PM"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"End Hour (0-23)"}),t.jsx("input",{type:"number",min:"0",max:"23",value:e.doNotDisturbEnd??"",onChange:f=>r({...e,doNotDisturbEnd:f.target.value?parseInt(f.target.value):void 0}),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"8"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Example: 8 for 8 AM"})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Notification Types"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Choose which types of notifications you want to receive"}),t.jsx("div",{className:"space-y-3",children:g.map(f=>t.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 dark:border-slate-700 last:border-0",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:f.label}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:f.description})]}),t.jsx("button",{onClick:()=>m(f.key),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ml-4 ${e.preferences[f.key]?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e.preferences[f.key]?"translate-x-3":"-translate-x-3"}`})})]},f.key))})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:c,disabled:n,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:n?t.jsxs(t.Fragment,{children:[t.jsx(Ii,{className:"h-5 w-5 animate-spin"}),"Saving Changes..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Ya,{className:"h-5 w-5"}),"Save All Changes"]})})})]})};class $ie{async getDashboardSettings(){return(await oe.get("/business-settings/dashboard")).data}async updateDashboardSettings(r){return(await oe.put("/business-settings/dashboard",r)).data}}const AP=new $ie,Uie=()=>{const e=mt(),[r,a]=h.useState({salesPipelineFlow:"Sales Pipeline Flow",performanceScorecard:"Performance Scorecard",dealVelocityVolume:"Deal Velocity & Volume",topPerformersMonth:"Top Performers This Month"}),[s,n]=h.useState(!0),[i,o]=h.useState(!1),[c,u]=h.useState(!1);h.useEffect(()=>{(async()=>{try{const p=await AP.getDashboardSettings();p.success&&a(p.data)}catch(p){console.error("Error fetching dashboard settings:",p)}finally{n(!1)}})()},[]);const m=(y,p)=>{a(b=>({...b,[y]:p})),u(!0)},g=async()=>{o(!0);try{(await AP.updateDashboardSettings(r)).success&&u(!1)}catch(y){console.error("Error saving dashboard settings:",y)}finally{o(!1)}},f=()=>{a({salesPipelineFlow:"Sales Pipeline Flow",performanceScorecard:"Performance Scorecard",dealVelocityVolume:"Deal Velocity & Volume",topPerformersMonth:"Top Performers This Month"}),u(!0)};return s?t.jsx(Nn,{message:"Loading dashboard settings..."}):t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(me,{variant:"GHOST",size:"SM",onClick:()=>e("/business-settings"),className:"flex items-center gap-2",children:[t.jsx(vr,{className:"w-4 h-4"}),"Back to Settings"]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl",children:t.jsx(Ka,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard Settings"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customize the names of your dashboard sections"})]})]})]}),t.jsxs(Ee,{variant:"ELEVATED",className:"max-w-2xl",children:[t.jsxs(kt,{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Section Names"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Change the display names for each dashboard section to match your business terminology."})]}),t.jsxs(tt,{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sales Pipeline Flow"}),t.jsx(Lc,{value:r.salesPipelineFlow,onChange:y=>m("salesPipelineFlow",y.target.value),placeholder:"Enter section name",className:"w-full"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The name for the sales pipeline chart section"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Performance Scorecard"}),t.jsx(Lc,{value:r.performanceScorecard,onChange:y=>m("performanceScorecard",y.target.value),placeholder:"Enter section name",className:"w-full"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The name for the performance metrics radial chart section"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Deal Velocity & Volume"}),t.jsx(Lc,{value:r.dealVelocityVolume,onChange:y=>m("dealVelocityVolume",y.target.value),placeholder:"Enter section name",className:"w-full"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The name for the deal velocity and volume chart section"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Top Performers This Month"}),t.jsx(Lc,{value:r.topPerformersMonth,onChange:y=>m("topPerformersMonth",y.target.value),placeholder:"Enter section name",className:"w-full"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The name for the top performers leaderboard section"})]})]}),t.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[t.jsxs(me,{variant:"PRIMARY",onClick:g,disabled:!c||i,className:"flex items-center gap-2",children:[t.jsx(Ya,{className:"w-4 h-4"}),i?"Saving...":"Save Changes"]}),t.jsx(me,{variant:"SECONDARY",onClick:f,disabled:i,children:"Reset to Defaults"})]})]})]}),t.jsxs(Ee,{variant:"ELEVATED",className:"max-w-2xl",children:[t.jsxs(kt,{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Preview"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"How your dashboard sections will appear with the current names."})]}),t.jsx(tt,{children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[t.jsx(Ka,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r.salesPipelineFlow})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[t.jsx(Ka,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r.performanceScorecard})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[t.jsx(Ka,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r.dealVelocityVolume})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[t.jsx(Ka,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r.topPerformersMonth})]})]})})]})]})},Dc={async getAll(){return(await oe.get("/business-settings/unit-types")).data},async getById(e){return(await oe.get(`/business-settings/unit-types/${e}`)).data},async create(e){return(await oe.post("/business-settings/unit-types",e)).data},async update(e,r){return(await oe.patch(`/business-settings/unit-types/${e}`,r)).data},async delete(e){await oe.delete(`/business-settings/unit-types/${e}`)},async toggle(e){return(await oe.patch(`/business-settings/unit-types/${e}/toggle`)).data}},Fie=()=>{const e=mt(),[r,a]=h.useState([]),[s,n]=h.useState(!0),[i,o]=h.useState(!1),[c,u]=h.useState(null),[m,g]=h.useState({name:"",description:"",isActive:!0}),[f,y]=h.useState(!1),[p,b]=h.useState({});h.useEffect(()=>{j()},[]);const j=async()=>{try{n(!0);const S=await Dc.getAll();a(S)}catch(S){console.error("Failed to fetch unit types:",S),M.error("Failed to load unit types"),a([])}finally{n(!1)}},v=()=>{g({name:"",description:"",isActive:!0}),o(!1),u(null)},N=S=>{g({name:S.name,description:S.description||"",isActive:S.isActive}),u(S.id),o(!0)},k=async S=>{S.preventDefault();const P={},D=(m.name||"").trim();if(D?D.length>50&&(P.name="Unit type name must be at most 50 characters"):P.name="Unit type name is required",Object.keys(P).length>0){b(P);return}b({}),y(!0);try{const I={name:D,description:m.description||void 0,isActive:m.isActive};c?(await Dc.update(c,I),M.success("Unit type updated successfully")):(await Dc.create(I),M.success("Unit type added successfully")),v(),j()}catch(I){console.error("Failed to save unit type:",I);const H=I?.response?.data?.message?.message||I?.response?.data?.message||"Failed to save unit type";M.error(Array.isArray(H)?H.join(", "):H)}finally{y(!1)}},E=async S=>{if(window.confirm("Are you sure you want to delete this unit type? This action cannot be undone."))try{await Dc.delete(S),M.success("Unit type deleted successfully"),j()}catch(P){console.error("Failed to delete unit type:",P),M.error("Failed to delete unit type")}},C=async(S,P)=>{try{await Dc.toggle(S),M.success("Unit type updated successfully"),j()}catch(D){console.error("Failed to update unit type:",D),M.error("Failed to update unit type")}};return s?t.jsx(Nn,{message:"Loading unit types..."}):t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>e("/business-settings"),className:"p-2",children:t.jsx(vr,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl",children:t.jsx(T2,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Unit Types"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage measurement units for your products"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"lg:col-span-1",children:t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:i?"Edit Unit Type":"Add New Unit Type"})}),t.jsx(tt,{children:t.jsxs("form",{onSubmit:k,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Unit Type Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:m.name,onChange:S=>{const P=S.target.value;g(D=>({...D,name:P})),P.trim()?P.length>50?b(D=>({...D,name:"Unit type name must be at most 50 characters"})):b(D=>({...D,name:void 0})):b(D=>({...D,name:"Unit type name is required"}))},className:`w-full p-2 border rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${p.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., piece, kg, liter, meter"}),p.name&&t.jsx("p",{className:"mt-1 text-xs text-rose-600 dark:text-rose-400",children:p.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),t.jsx("textarea",{value:m.description,onChange:S=>g(P=>({...P,description:S.target.value})),rows:3,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Brief description of this unit type"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:m.isActive,onChange:S=>g(P=>({...P,isActive:S.target.checked})),className:"rounded border-gray-300 dark:border-gray-600"}),t.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700 dark:text-gray-300",children:"Active (available for selection)"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(me,{type:"submit",variant:"PRIMARY",disabled:f,className:"flex items-center gap-2",children:[t.jsx(Ya,{className:"w-4 h-4"}),f?"Saving...":i?"Update":"Add"]}),i&&t.jsx(me,{type:"button",variant:"OUTLINE",onClick:v,children:"Cancel"})]})]})})]})}),t.jsx("div",{className:"lg:col-span-2",children:t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Unit Types (",r.length,")"]}),t.jsxs(me,{variant:"PRIMARY",size:"SM",onClick:v,className:"flex items-center gap-1",children:[t.jsx(Rt,{className:"w-4 h-4"}),"Add New"]})]})}),t.jsx(tt,{children:r.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(T2,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Unit Types Found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create your first unit type to start measuring your products."})]}):t.jsx("div",{className:"space-y-3",children:r.map(S=>t.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:S.name}),S.isActive===!1&&t.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full",children:"Inactive"})]}),S.description&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:S.description})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>C(S.id,S.isActive),className:"p-1",title:S.isActive?"Deactivate":"Activate",children:S.isActive?t.jsx(Bt,{className:"w-4 h-4 text-green-500"}):t.jsx(pn,{className:"w-4 h-4 text-gray-400"})}),t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>N(S),className:"p-1",title:"Edit",children:t.jsx(Ko,{className:"w-4 h-4 text-blue-500"})}),t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>E(S.id),className:"p-1",title:"Delete",children:t.jsx(ht,{className:"w-4 h-4 text-red-500"})})]})]},S.id))})})]})})]}),r.length>0&&t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Unit Types Analytics"})}),t.jsx(tt,{children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:r.filter(S=>S.isActive).length}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Unit Types"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:r.filter(S=>!S.isActive).length}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Inactive Unit Types"})]})]})})]})]})},Oc={getProductCategories:async()=>(await oe.get("/business-settings/product-categories")).data,createProductCategory:async e=>(await oe.post("/business-settings/product-categories",e)).data,updateProductCategory:async(e,r)=>(await oe.patch(`/business-settings/product-categories/${e}`,r)).data,deleteProductCategory:async e=>{await oe.delete(`/business-settings/product-categories/${e}`)},toggleProductCategory:async e=>(await oe.patch(`/business-settings/product-categories/${e}/toggle`)).data},zie=()=>{const e=mt(),[r,a]=h.useState([]),[s,n]=h.useState(!0),[i,o]=h.useState(!1),[c,u]=h.useState(null),[m,g]=h.useState({name:"",description:"",isActive:!0}),[f,y]=h.useState(!1),[p,b]=h.useState({});h.useEffect(()=>{j()},[]);const j=async()=>{try{n(!0);const S=await Oc.getProductCategories();a(S)}catch(S){console.error("Failed to fetch categories:",S),M.error("Failed to load product categories"),a([])}finally{n(!1)}},v=()=>{g({name:"",description:"",isActive:!0}),o(!1),u(null)},N=S=>{g({name:S.name,description:S.description||"",isActive:S.isActive}),u(S.id),o(!0)},k=async S=>{S.preventDefault();const P={},D=(m.name||"").trim();if(D?D.length>100&&(P.name="Category name must be at most 100 characters"):P.name="Category name is required",Object.keys(P).length>0){b(P);return}b({}),y(!0);try{const I={name:D,description:m.description||void 0,isActive:m.isActive};c?(await Oc.updateProductCategory(c,I),M.success("Category updated successfully")):(await Oc.createProductCategory(I),M.success("Category added successfully")),v(),j()}catch(I){console.error("Failed to save category:",I);const H=I?.response?.data?.message?.message||I?.response?.data?.message||"Failed to save category";M.error(Array.isArray(H)?H.join(", "):H)}finally{y(!1)}},E=async S=>{if(window.confirm("Are you sure you want to delete this category? This action cannot be undone."))try{await Oc.deleteProductCategory(S),M.success("Category deleted successfully"),j()}catch(P){console.error("Failed to delete category:",P),M.error("Failed to delete category")}},C=async(S,P)=>{try{await Oc.toggleProductCategory(S),M.success("Category updated successfully"),j()}catch(D){console.error("Failed to update category:",D),M.error("Failed to update category")}};return s?t.jsx(Nn,{message:"Loading product categories..."}):t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>e("/business-settings"),className:"p-2",children:t.jsx(vr,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-xl",children:t.jsx(_n,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Product Categories"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage categories for organizing your products"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"lg:col-span-1",children:t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:i?"Edit Category":"Add New Category"})}),t.jsx(tt,{children:t.jsxs("form",{onSubmit:k,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Category Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:m.name,onChange:S=>{const P=S.target.value;g(D=>({...D,name:P})),P.trim()?P.length>100?b(D=>({...D,name:"Category name must be at most 100 characters"})):b(D=>({...D,name:void 0})):b(D=>({...D,name:"Category name is required"}))},className:`w-full p-2 border rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${p.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., Electronics, Clothing, Home & Garden"}),p.name&&t.jsx("p",{className:"mt-1 text-xs text-rose-600 dark:text-rose-400",children:p.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),t.jsx("textarea",{value:m.description,onChange:S=>g(P=>({...P,description:S.target.value})),rows:3,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Brief description of this category"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:m.isActive,onChange:S=>g(P=>({...P,isActive:S.target.checked})),className:"rounded border-gray-300 dark:border-gray-600"}),t.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700 dark:text-gray-300",children:"Active (available for selection)"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(me,{type:"submit",variant:"PRIMARY",disabled:f,className:"flex items-center gap-2",children:[t.jsx(Ya,{className:"w-4 h-4"}),f?"Saving...":i?"Update":"Add"]}),i&&t.jsx(me,{type:"button",variant:"OUTLINE",onClick:v,children:"Cancel"})]})]})})]})}),t.jsx("div",{className:"lg:col-span-2",children:t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Categories (",r.length,")"]}),t.jsxs(me,{variant:"PRIMARY",size:"SM",onClick:v,className:"flex items-center gap-1",children:[t.jsx(Rt,{className:"w-4 h-4"}),"Add New"]})]})}),t.jsx(tt,{children:r.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(_n,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Categories Found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create your first product category to start organizing your products."})]}):t.jsx("div",{className:"space-y-3",children:r.map(S=>t.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:S.name}),S.isActive===!1&&t.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full",children:"Inactive"})]}),S.description&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:S.description})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>C(S.id,S.isActive),className:"p-1",title:S.isActive?"Deactivate":"Activate",children:S.isActive?t.jsx(Bt,{className:"w-4 h-4 text-green-500"}):t.jsx(pn,{className:"w-4 h-4 text-gray-400"})}),t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>N(S),className:"p-1",title:"Edit",children:t.jsx(Ko,{className:"w-4 h-4 text-blue-500"})}),t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>E(S.id),className:"p-1",title:"Delete",children:t.jsx(ht,{className:"w-4 h-4 text-red-500"})})]})]},S.id))})})]})})]}),r.length>0&&t.jsxs(Ee,{children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Categories Analytics"})}),t.jsx(tt,{children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:r.filter(S=>S.isActive).length}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Categories"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:r.filter(S=>!S.isActive).length}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Inactive Categories"})]})]})})]})]})},Sd=({title:e,subtitle:r,addLabel:a="Add",onAdd:s,bulkActions:n=[]})=>{const[i,o]=h.useState(!1),c=h.useRef(null);return h.useEffect(()=>{if(!i)return;const u=m=>{c.current&&!c.current.contains(m.target)&&o(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[i]),t.jsx("div",{className:"space-y-4",ref:c,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e}),r&&t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[n.length>0&&t.jsxs("div",{className:"relative",children:[t.jsx(me,{variant:"SECONDARY",size:"MD",onClick:()=>o(u=>!u),children:"Bulk Actions"}),i&&t.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-lg z-20",children:t.jsx("div",{className:"py-2",children:n.map((u,m)=>t.jsx("button",{disabled:u.disabled,onClick:()=>{u.onClick(),o(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:t.jsxs("span",{className:"inline-flex items-center gap-2",children:[u.icon,u.label]})},m))})})]}),s&&t.jsxs(me,{variant:"PRIMARY",size:"MD",onClick:s,children:[t.jsx(Rt,{className:"w-4 h-4 mr-2"}),a]})]})]})})},PP=e=>e==null?"":`"${String(e).replace(/"/g,'""')}`.concat('"'),Cd=(e,r,a)=>{try{const s=r.map(PP).join(","),n=a.map(m=>m.map(PP).join(",")).join(`
`),i=[s,n].join(`
`),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),c=window.URL.createObjectURL(o),u=document.createElement("a");u.href=c,u.setAttribute("download",e),document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(c)}catch(s){console.error("Failed to export CSV",s)}},hx=(e,r,a)=>{try{const s=a.map(o=>`<tr>${o.map(c=>`<td style="padding: 4px 8px; border: 1px solid #e5e7eb; font-size: 12px;">${c??""}</td>`).join("")}</tr>`).join(""),n=`<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>${e}</title>
    <style>
      body { font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; font-size: 12px; color: #111827; margin: 24px; }
      h1 { font-size: 18px; margin-bottom: 12px; }
      table { border-collapse: collapse; width: 100%; }
      th { text-align: left; padding: 6px 8px; border: 1px solid #e5e7eb; background: #f9fafb; font-size: 12px; }
    </style>
  </head>
  <body>
    <h1>${e}</h1>
    <table>
      <thead>
        <tr>${r.map(o=>`<th>${o}</th>`).join("")}</tr>
      </thead>
      <tbody>
        ${s}
      </tbody>
    </table>
    <script>
      window.onload = function() { window.print(); };
    <\/script>
  </body>
</html>`,i=window.open("","_blank");if(!i)return;i.document.open(),i.document.write(n),i.document.close()}catch(s){console.error("Failed to export PDF",s)}},Bie=()=>{const{hasPermission:e}=xr(),{t:r}=wn(),a=mt(),[s,n]=h.useState([]),[i,o]=h.useState(!0),[c,u]=h.useState(""),[m,g]=h.useState("ALL"),[f,y]=h.useState(1),[p,b]=h.useState(10),[j,v]=h.useState(null),[N,k]=h.useState("list"),[E,C]=h.useState(["quotationNumber","customer","email","related","amount","status","date"]),[S,P]=h.useState(null),[D,I]=h.useState({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10});h.useEffect(()=>{try{const L=localStorage.getItem("quotations_visible_columns");if(L){const G=JSON.parse(L);Array.isArray(G)&&G.every(T=>typeof T=="string")&&C(G)}}catch{}},[]),h.useEffect(()=>{try{localStorage.setItem("quotations_visible_columns",JSON.stringify(E))}catch{}},[E]),h.useEffect(()=>{H()},[c,m,f,p]);const H=async()=>{try{o(!0);const L=await oe.get("/quotations",{params:{page:f,limit:p,search:c||void 0,status:m!=="ALL"?m:void 0}});if(L.data.success){const G=L.data.data||{},T=Array.isArray(G)?G:G.items||[],_=G.total||T.length||0,F=G.page||f,ee=G.limit||p,Z=T.map(U=>({...U,customerName:U.lead?`${U.lead.firstName||""} ${U.lead.lastName||""}`.trim()||U.lead.company:U.deal?.title||"-",customerEmail:U.lead?.email||"-",relatedTo:U.deal?`Deal #${U.deal.id}`:U.lead?`Lead #${U.lead.id}`:void 0,relatedType:U.dealId?"deal":U.leadId?"lead":void 0}));n(Z),I({currentPage:F,totalPages:Math.max(1,Math.ceil(_/ee)),totalItems:_,itemsPerPage:ee})}}catch(L){console.error("Error fetching quotations:",L),M.error(L?.response?.data?.message||r("quotations.fetch_error")||"Failed to fetch quotations")}finally{o(!1)}},W=async L=>{try{const G=await oe.get(`/quotations/${L}/pdf/download`,{responseType:"blob"}),T=window.URL.createObjectURL(new Blob([G.data])),_=document.createElement("a");_.href=T;const F=s.find(ee=>ee.id===L);_.setAttribute("download",`${F?.quotationNumber||"quotation"}.pdf`),document.body.appendChild(_),_.click(),_.remove()}catch(G){console.error("Error downloading PDF:",G),M.error(G?.response?.data?.message||r("quotations.download_error")||"Failed to download PDF")}},K=async L=>{try{const G=await oe.get(`/quotations/${L}/pdf/preview`,{responseType:"blob"}),T=new Blob([G.data],{type:"application/pdf"}),_=window.URL.createObjectURL(T);window.open(_,"_blank")}catch(G){console.error("Error previewing PDF:",G),M.error(G?.response?.data?.message||r("quotations.preview_error")||"Failed to preview PDF")}},B=L=>{const G={DRAFT:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",SENT:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",VIEWED:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300",ACCEPTED:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",REJECTED:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",EXPIRED:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",CANCELLED:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"};return G[L]||G.DRAFT},z=L=>{switch(L){case"DRAFT":return t.jsx(Co,{className:"w-3 h-3"});case"SENT":return t.jsx(Tl,{className:"w-3 h-3"});case"VIEWED":return t.jsx(Bt,{className:"w-3 h-3"});case"ACCEPTED":return t.jsx(Co,{className:"w-3 h-3"});case"REJECTED":return t.jsx(ht,{className:"w-3 h-3"});case"EXPIRED":return t.jsx(Yt,{className:"w-3 h-3"});case"CANCELLED":return t.jsx(ht,{className:"w-3 h-3"});default:return t.jsx(Co,{className:"w-3 h-3"})}},q=s.filter(L=>{const G=L.quotationNumber.toLowerCase().includes(c.toLowerCase())||L.title.toLowerCase().includes(c.toLowerCase())||L.customerName?.toLowerCase().includes(c.toLowerCase()),T=m==="ALL"||L.status===m;return G&&T}),J=async L=>{if(window.confirm(r("quotations.confirm_delete")||"Are you sure you want to delete this quotation?"))try{(await oe.delete(`/quotations/${L}`)).data.success&&(M.success(r("quotations.delete_success")||"Quotation deleted successfully"),H())}catch(G){console.error("Error deleting quotation:",G),M.error(G?.response?.data?.message||r("quotations.delete_error")||"Failed to delete quotation")}},ae=L=>{a(`/quotations/edit/${L}`)},ne=async(L,G)=>{if(G&&G.stopPropagation(),j!==L)try{v(L),await oe.put(`/quotations/${L}/accept`),(await oe.post(`/quotations/${L}/generate-invoice`)).data?.success?(M.success("Sales order booked and invoice created"),H(),a("/invoices")):M.info("Quotation accepted, but invoice not created")}catch(T){console.error("Error booking sales order:",T),M.error(T?.response?.data?.message||"Failed to book sales order")}finally{v(null)}},re=L=>{P(S===L?null:L)};return i?t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:t.jsxs("div",{className:"space-y-6 p-6",children:[t.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-xl animate-pulse"}),t.jsxs("div",{children:[t.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),t.jsx("div",{className:"h-4 w-64 bg-gray-200 dark:bg-gray-700 rounded mt-2 animate-pulse"})]})]}),t.jsx("div",{className:"h-11 w-40 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"})]}),t.jsxs("div",{className:"mb-6 flex gap-3",children:[t.jsx("div",{className:"flex-1 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"}),t.jsx("div",{className:"w-40 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"}),t.jsx("div",{className:"w-24 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"})]}),t.jsxs(Ee,{className:"overflow-hidden bg-white dark:bg-gray-800",children:[t.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:t.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[t.jsx("div",{className:"col-span-3 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),t.jsx("div",{className:"col-span-2 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),t.jsx("div",{className:"col-span-2 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),t.jsx("div",{className:"col-span-2 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),t.jsx("div",{className:"col-span-2 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),t.jsx("div",{className:"col-span-1 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})}),t.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[1,2,3,4,5].map(L=>t.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-4",children:[t.jsxs("div",{className:"col-span-3 flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),t.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-3/4 animate-pulse"})]})]}),t.jsx("div",{className:"col-span-2",children:t.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})}),t.jsx("div",{className:"col-span-2",children:t.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-2/3"})}),t.jsx("div",{className:"col-span-2",children:t.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse w-20"})}),t.jsxs("div",{className:"col-span-2 space-y-1",children:[t.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),t.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-3/4"})]}),t.jsxs("div",{className:"col-span-1 flex justify-end gap-1",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),t.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),t.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]},L))})]})]})}):t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:t.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 py-6 space-y-6",children:[t.jsx("div",{className:"mb-8",children:t.jsx(Sd,{title:"Quotations",subtitle:`Manage and track your quotations  Showing ${D.totalItems} quotation${D.totalItems!==1?"s":""}`,addLabel:"Add Quotation",onAdd:e("deal.create")?()=>a("/quotations/new"):void 0,bulkActions:[{label:"Export Quotations (Excel)",icon:t.jsx(Uo,{className:"w-4 h-4"}),onClick:()=>{const L=["Quotation #","Title","Customer","Email","Related","Amount","Status","Created","Valid Until"],G=q.map(T=>[T.quotationNumber,T.title,T.customerName||"",T.customerEmail||"",T.relatedTo||"",`${T.currency} ${T.totalAmount.toLocaleString()}`,T.status,new Date(T.createdAt).toLocaleDateString(),T.validUntil?new Date(T.validUntil).toLocaleDateString():""]);Cd("quotations_export.csv",L,G)}},{label:"Export Quotations (PDF)",icon:t.jsx(Lt,{className:"w-4 h-4"}),onClick:()=>{const L=["Quotation #","Title","Customer","Email","Related","Amount","Status","Created","Valid Until"],G=q.map(T=>[T.quotationNumber,T.title,T.customerName||"",T.customerEmail||"",T.relatedTo||"",`${T.currency} ${T.totalAmount.toLocaleString()}`,T.status,new Date(T.createdAt).toLocaleDateString(),T.validUntil?new Date(T.validUntil).toLocaleDateString():""]);hx("Quotations",L,G)}}]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4",children:t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1 w-full",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),t.jsx("input",{type:"text",placeholder:"Search quotations...",value:c,onChange:L=>u(L.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white text-sm"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Gl,{size:18,className:"text-gray-500"}),t.jsxs("select",{value:m,onChange:L=>g(L.target.value),className:"px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white text-sm min-w-[150px]",children:[t.jsx("option",{value:"ALL",children:"All Status"}),t.jsx("option",{value:"DRAFT",children:"Draft"}),t.jsx("option",{value:"SENT",children:"Sent"}),t.jsx("option",{value:"VIEWED",children:"Viewed"}),t.jsx("option",{value:"ACCEPTED",children:"Accepted"}),t.jsx("option",{value:"REJECTED",children:"Rejected"}),t.jsx("option",{value:"EXPIRED",children:"Expired"}),t.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Show:"}),t.jsxs("select",{value:p,onChange:L=>{b(Number(L.target.value)),y(1)},className:"px-3 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white text-sm",children:[t.jsx("option",{value:"10",children:"10"}),t.jsx("option",{value:"25",children:"25"}),t.jsx("option",{value:"50",children:"50"}),t.jsx("option",{value:"100",children:"100"})]})]})]}),t.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${N==="list"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>k("list"),title:"List view",children:t.jsx(gi,{className:"w-4 h-4"})}),t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${N==="card"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>k("card"),title:"Card view",children:t.jsx(mi,{className:"w-4 h-4"})})]})]})}),N==="card"?t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-6",children:q.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Co,{size:40,className:"text-gray-400 dark:text-gray-600"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Quotations Found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto",children:c||m!=="ALL"?"Try adjusting your filters or search terms":"Create your first quotation to get started with tracking your sales pipeline"}),e("deal.create")&&t.jsxs(me,{onClick:()=>a("/quotations/new"),className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[t.jsx(Rt,{size:18,className:"mr-2"}),"Create Quotation"]})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:q.map(L=>t.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[t.jsxs("div",{className:"p-5 border-b border-gray-100 dark:border-gray-700 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-750",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg flex items-center justify-center",children:t.jsx(Co,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white",children:L.quotationNumber}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-[150px]",children:L.title})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:G=>{G.stopPropagation(),re(L.id)},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",children:t.jsx(iD,{size:16})}),S===L.id&&t.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg z-10 py-1 border border-gray-200 dark:border-gray-700",children:[t.jsxs("button",{onClick:G=>{G.stopPropagation(),re(L.id),K(L.id)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[t.jsx(Bt,{size:16}),"Preview"]}),e("deal.update")&&t.jsxs("button",{onClick:G=>{G.stopPropagation(),re(L.id),ae(L.id)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[t.jsx(er,{size:16}),"Edit"]}),t.jsxs("button",{onClick:G=>{G.stopPropagation(),re(L.id),W(L.id)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[t.jsx(hs,{size:16}),"Download"]}),e("deal.delete")&&t.jsxs("button",{onClick:G=>{G.stopPropagation(),re(L.id),J(L.id)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:[t.jsx(ht,{size:16}),"Delete"]})]})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ${B(L.status)}`,children:[z(L.status),L.status]}),t.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[L.currency," ",L.totalAmount.toLocaleString()]})]})]}),t.jsxs("div",{className:"p-5 space-y-3",children:[L.customerName&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[t.jsx(xt,{size:14}),t.jsx("span",{className:"truncate",children:L.customerName})]}),L.customerEmail&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[t.jsx(ir,{size:14}),t.jsx("span",{className:"truncate",children:L.customerEmail})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[t.jsx(nr,{size:14}),t.jsxs("span",{children:["Created: ",new Date(L.createdAt).toLocaleDateString()]})]}),L.validUntil&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[t.jsx(Yt,{size:14}),t.jsxs("span",{children:["Valid: ",new Date(L.validUntil).toLocaleDateString()]})]}),t.jsxs("div",{className:"pt-2 flex items-center justify-between",children:[t.jsx("button",{onClick:()=>a(`/quotations/${L.id}`),className:"text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300 text-sm font-medium",children:"View Details"}),L.status==="ACCEPTED"&&e("deal.update")&&t.jsxs("button",{onClick:G=>ne(L.id,G),disabled:j===L.id,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs font-medium rounded-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[t.jsx(Tl,{size:12}),j===L.id?"Processing...":"Book Order"]})]})]})]},L.id))})}):t.jsxs(Ee,{className:"overflow-hidden bg-white dark:bg-gray-800 shadow-sm",children:[t.jsx(to,{currentPage:D.currentPage,itemsPerPage:D.itemsPerPage,totalItems:D.totalItems,onItemsPerPageChange:L=>{b(L),y(1)},columnConfig:{columns:[{id:"quotationNumber",label:"Quotation"},{id:"customer",label:"Customer"},{id:"email",label:"Email"},{id:"related",label:"Related"},{id:"amount",label:"Amount"},{id:"status",label:"Status"},{id:"date",label:"Date"}],visibleColumns:E,onChange:C,minVisible:1}}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("div",{className:"min-w-[1000px]",children:[t.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:t.jsxs("div",{className:"grid grid-cols-12 gap-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap",children:[E.includes("quotationNumber")&&t.jsx("div",{className:"col-span-2",children:"Quotation"}),E.includes("customer")&&t.jsx("div",{className:"col-span-2",children:"Customer"}),E.includes("email")&&t.jsx("div",{className:"col-span-2",children:"Email"}),E.includes("related")&&t.jsx("div",{className:"col-span-1",children:"Related"}),E.includes("amount")&&t.jsx("div",{className:"col-span-1",children:"Amount"}),E.includes("status")&&t.jsx("div",{className:"col-span-1",children:"Status"}),E.includes("date")&&t.jsx("div",{className:"col-span-1",children:"Date"}),t.jsx("div",{className:"col-span-2 text-right",children:"Actions"})]})}),q.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Co,{size:40,className:"text-gray-400 dark:text-gray-600"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Quotations Found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto",children:c||m!=="ALL"?"Try adjusting your filters or search terms":"Create your first quotation to get started with tracking your sales pipeline"}),e("deal.create")&&t.jsxs(me,{onClick:()=>a("/quotations/new"),className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[t.jsx(Rt,{size:18,className:"mr-2"}),"Create Quotation"]})]}):t.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:q.map(L=>t.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors items-center cursor-pointer",onClick:()=>a(`/quotations/${L.id}`),children:[E.includes("quotationNumber")&&t.jsx("div",{className:"col-span-2 min-w-0",children:t.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center flex-shrink-0",children:t.jsx(Co,{className:"text-indigo-600 dark:text-indigo-400",size:18})}),t.jsxs("div",{className:"min-w-0 overflow-hidden",children:[t.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm truncate",children:L.quotationNumber}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:L.title})]})]})}),E.includes("customer")&&t.jsx("div",{className:"col-span-2 min-w-0",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xt,{size:14,className:"text-gray-400"}),t.jsx("div",{className:"text-sm text-gray-900 dark:text-white font-medium truncate",children:L.customerName||"-"})]})}),E.includes("email")&&t.jsx("div",{className:"col-span-2 min-w-0",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ir,{size:14,className:"text-gray-400"}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:L.customerEmail||"-"})]})}),E.includes("related")&&t.jsx("div",{className:"col-span-1 min-w-0",children:t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 truncate capitalize",children:L.relatedType?`${L.relatedType}${L.relatedTo?`: ${L.relatedTo}`:""}`:"-"})}),E.includes("amount")&&t.jsx("div",{className:"col-span-1 min-w-0",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Qr,{size:14,className:"text-gray-400"}),t.jsxs("div",{className:"text-sm font-bold text-gray-900 dark:text-white whitespace-nowrap",children:[L.currency," ",L.totalAmount.toLocaleString()]})]})}),E.includes("status")&&t.jsx("div",{className:"col-span-1 min-w-0",children:t.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ${B(L.status)}`,children:[z(L.status),L.status]})}),E.includes("date")&&t.jsx("div",{className:"col-span-1 min-w-0",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(nr,{size:14,className:"text-gray-400 flex-shrink-0"}),t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 whitespace-nowrap",children:new Date(L.createdAt).toLocaleDateString()})]}),L.validUntil&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Yt,{size:12,className:"text-gray-400 flex-shrink-0"}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 whitespace-nowrap",children:["Valid: ",new Date(L.validUntil).toLocaleDateString()]})]})]})}),t.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-1 flex-shrink-0",onClick:G=>G.stopPropagation(),children:[t.jsx("button",{onClick:G=>{G.stopPropagation(),K(L.id)},className:"p-1.5 text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"Preview",children:t.jsx(Bt,{size:14})}),e("deal.update")&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:G=>{G.stopPropagation(),ae(L.id)},className:"p-1.5 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"Edit",children:t.jsx(er,{size:14})}),L.status==="ACCEPTED"&&t.jsx("button",{onClick:G=>ne(L.id,G),disabled:j===L.id,className:"p-1.5 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Book Sales Order & Create Invoice",children:t.jsx(Tl,{size:14})})]}),t.jsx("button",{onClick:G=>{G.stopPropagation(),W(L.id)},className:"p-1.5 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"Download",children:t.jsx(hs,{size:14})}),e("deal.delete")&&t.jsx("button",{onClick:G=>{G.stopPropagation(),J(L.id)},className:"p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"Delete",children:t.jsx(ht,{size:14})})]})]},L.id))})]})})]}),D.totalPages>1&&t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row items-center justify-between bg-white dark:bg-gray-800 px-6 py-4 rounded-xl shadow-sm gap-4",children:[t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:(f-1)*p+1})," to ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:Math.min(f*p,D.totalItems)})," of ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:D.totalItems})," results"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>y(L=>Math.max(1,L-1)),disabled:f===1,className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),Array.from({length:Math.min(5,D.totalPages)},(L,G)=>{let T;return D.totalPages<=5||f<=3?T=G+1:f>=D.totalPages-2?T=D.totalPages-4+G:T=f-2+G,t.jsx("button",{onClick:()=>y(T),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${f===T?"bg-indigo-600 text-white":"text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:T},T)}),t.jsx("button",{onClick:()=>y(L=>Math.min(D.totalPages,L+1)),disabled:f===D.totalPages,className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})})},TP=()=>{const e=mt(),[r]=um(),{id:a}=ui(),s=!!a,[n,i]=h.useState(!1),[o,c]=h.useState([]),[u,m]=h.useState([]),[g,f]=h.useState([]),[y,p]=h.useState(""),[b,j]=h.useState(!1),v=h.useRef(null),[N,k]=h.useState([]),[E,C]=h.useState(null),[S,P]=h.useState(""),D=h.useRef(null),[I,H]=h.useState([]),[W,K]=h.useState([]),[B,z]=h.useState(""),[q,J]=h.useState(""),[ae,ne]=h.useState(""),[re,L]=h.useState(""),[G,T]=h.useState(""),[_,F]=h.useState("lead"),[ee,Z]=h.useState(""),[U,X]=h.useState("Draft"),[Q,V]=h.useState(""),[ge,Te]=h.useState(""),[xe,qe]=h.useState(""),[se,De]=h.useState(""),[Me,Ct]=h.useState(""),[Dt,Mt]=h.useState(""),[jt,le]=h.useState(""),[Xe,Ke]=h.useState(""),[Ne,Nt]=h.useState(""),[_t,vt]=h.useState(""),[Ot,R]=h.useState(new Date().toISOString().split("T")[0]),[ce,de]=h.useState(""),[ue,Pe]=h.useState("USD"),[pe,ve]=h.useState("none"),[Ve,Ge]=h.useState(""),[$t,Qt]=h.useState(!0),[qt,Xt]=h.useState([{description:"",longDescription:"",quantity:1,unit:"Unit",rate:0,taxRate:0,amount:0,isOptional:!1,productId:""}]),[Ut,Ft]=h.useState(0),[lr,ia]=h.useState(0),[pr,cr]=h.useState("Qty");h.useEffect(()=>{Ca()},[]),h.useEffect(()=>{_==="lead"&&u.length===0&&Vr()},[_]);const Vr=async()=>{try{const Re=(await Gt.getLeads({page:1,limit:1e3}))?.data?.leads||[];m(Re)}catch(ye){console.error(ye),M.error("Failed to load leads")}finally{}};h.useEffect(()=>{s&&(async()=>{try{const ye=await oe.get(`/quotations/${a}`),Re=ye?.data?.data?.quotation||ye?.data?.quotation||ye?.data;if(!Re)return;if(ne(Re.quotationNumber||""),T(Re.title||""),X(Re.status?Re.status.charAt(0)+Re.status.slice(1).toLowerCase():"Draft"),Pe(Re.currency||"USD"),de(Re.validUntil?String(Re.validUntil).slice(0,10):""),R(Re.createdAt?String(Re.createdAt).slice(0,10):Ot),De(""),Nt(Re.lead?.email||Ne),Re.lead){F("lead"),Z(String(Re.leadId));const Be=`${Re.lead.firstName||""} ${Re.lead.lastName||""}`.trim();qe(Be),p(Be)}if(Array.isArray(Re.items)&&Xt(Re.items.map(Be=>({description:Be.name||Be.description||"",longDescription:Be.description||"",quantity:Number(Be.quantity||1),unit:Be.unit||"Unit",rate:Number(Be.unitPrice||0),taxRate:Number(Be.taxRate||0),amount:Number(Be.totalAmount||0),isOptional:!1}))),Re.terms){J(Re.terms);const Be=W.find(Kt=>Kt.content===Re.terms);Be&&z(Be.id.toString())}}catch{}})()},[s,a]),h.useEffect(()=>{const ye=r.get("entityType")||null,Re=r.get("entityId");if(!ye||!Re)return;const Be=parseInt(Re);(async()=>{try{if(ye==="lead"){const Kt=await Gt.getLeadById(Be),Y=Kt?.data?.lead||Kt?.data||Kt;if(Y){F("lead"),Z(String(Y.id)),T(`Proposal for ${Y.firstName} ${Y.lastName}`);const Ae=`${Y.firstName||""} ${Y.lastName||""}`.trim();qe(Ae),p(Ae),Nt(Y.email||""),vt(Y.phone||""),De(Y.address||""),Ct(Y.city||""),Mt(Y.state||""),le(Y.country||""),Ke(Y.zipCode||""),Y?.currency&&Pe(Y.currency)}}else if(ye==="deal"){const Kt=await aa.getDealById(Be),Y=Kt?.data||Kt;if(Y){if(Te(String(Y.id)),Y.lead){F("lead"),Z(String(Y.lead.id));const Ae=`${Y.lead.firstName||""} ${Y.lead.lastName||""}`.trim();T(Y.title?`${Y.title}`:`Proposal for ${Ae||"Lead"}`),qe(Ae),p(Ae),Nt(Y.lead.email||""),vt("")}else T(Y.title||"Proposal");Y.currency&&Pe(Y.currency)}}}catch{}})()},[r]),h.useEffect(()=>{const ye=Re=>{v.current&&!v.current.contains(Re.target)&&j(!1),D.current&&!D.current.contains(Re.target)&&C(null)};return document.addEventListener("mousedown",ye),()=>document.removeEventListener("mousedown",ye)},[]),h.useEffect(()=>{const ye=setTimeout(()=>{y.length>=2&&_?rr(y):(f([]),j(!1))},300);return()=>clearTimeout(ye)},[y,_,u]);const Ca=async()=>{try{const[ye,Re,Be,Kt]=await Promise.all([oe.get("/quotations/template"),oe.get("/products?search=&page=1&limit=50"),oe.get("/business-settings/terms-and-conditions"),Sl.getAll()]);if(ye.data.success){const Y=ye.data.data;c(Y.users||[])}if(Re.data.success){const Y=Re.data.data;k(Y.products||Y.items||[])}if(Be.data.success){const Y=Be.data.data;K(Y||[])}Kt&&H(Kt);try{const Y=await oe.get("/quotations/next-number");if(Y.data.success){const Ae=Y.data.data.nextNumber;L(Ae),ae||ne(Ae)}}catch(Y){console.error("Error fetching next quotation number:",Y)}}catch(ye){console.error("Error fetching initial data:",ye)}},rr=ye=>{if(!_){M.info("Please select Lead first");return}if(!ye.trim()){f([]),j(!1);return}const Re=u.filter(Be=>`${Be.firstName||""} ${Be.lastName||""}`.trim().toLowerCase().includes(ye.trim().toLowerCase()));f(Re),j(!0)},jr=ye=>{Z(ye.id.toString());const Re=[ye.firstName,ye.lastName].filter(Boolean),Be=Re.length>0?Re.join(" "):ye.email||"Unknown Lead";qe(Be),p(Be),Nt(ye.email||""),vt(ye.phone||""),De(ye.address||""),Ct(ye.city||""),Mt(ye.state||""),le(ye.country||""),Ke(ye.zipCode||""),j(!1),M.success("Lead selected and details auto-filled")},Nr=(ye,Re)=>{const Be=[...qt],Kt=Number(Re.price||Re.unitPrice||0),Y=Number(Re.taxRate||0),We=(Be[ye].quantity||1)*Kt,bt=We*(Y/100),et=Re.name||Re.title||Re.itemName||Re.productName||"";Be[ye]={...Be[ye],description:et,longDescription:Re.description||Re.details||"",rate:Kt,unit:Re.unit||"Unit",taxRate:Y,productId:String(Re.id),amount:We+bt},Xt(Be),C(null),P("")},Fr=()=>{Xt([...qt,{description:"",longDescription:"",quantity:1,unit:"Unit",rate:0,taxRate:0,amount:0,isOptional:!1,productId:""}])},fe=ye=>{qt.length>1&&Xt(qt.filter((Re,Be)=>Be!==ye))},Ue=(ye,Re,Be)=>{const Kt=[...qt];Kt[ye]={...Kt[ye],[Re]:Be};const Y=Kt[ye],Ae=Y.quantity*Y.rate,We=Ae*(Y.taxRate/100);Y.amount=Ae+We,Xt(Kt)},gt=()=>qt.reduce((ye,Re)=>ye+Re.quantity*Re.rate,0),ft=()=>qt.reduce((ye,Re)=>{const Be=Re.quantity*Re.rate;return ye+Be*(Re.taxRate/100)},0),Et=()=>{const ye=gt();return pe==="%"?ye*(Ut/100):Ut},vs=()=>{const ye=gt(),Re=ft(),Be=Et();return ye+Re-Be+lr},Xs=async(ye=!1)=>{console.log("handleSubmit called with sendImmediately:",ye),console.log("Form data:",{subject:G,relatedId:ee,email:Ne,relatedType:_,toField:xe,items:qt});const Re=ee&&_||xe&&Ne;if(!Re){console.error("Validation failed:",{subject:!!G,hasValidRecipient:Re,relatedId:!!ee,relatedType:!!_,toField:!!xe,email:!!Ne}),M.error("Please select a lead or enter recipient details manually");return}try{i(!0);const Be=G||(_==="lead"&&xe?`Quotation for ${xe}`:"New Quotation"),Kt={quotationNumber:ae||void 0,subject:Be,relatedType:_,relatedId:parseInt(ee),...ge?{dealId:parseInt(ge)}:{},status:ye?"Sent":U,assignedTo:Q?parseInt(Q):null,to:xe,address:se,city:Me,state:Dt,country:jt,zipCode:Xe,email:Ne,phone:_t,date:Ot,openTill:ce,currency:ue,discountType:pe,discountValue:Ut,adjustmentValue:lr,tags:Ve,allowComments:$t,items:qt,terms:q||void 0};console.log("Sending payload:",Kt);const Y=s?await oe.put(`/quotations/${a}`,{title:Be,status:U.toUpperCase(),currency:ue,validUntil:ce||null,notes:void 0,terms:void 0}):await oe.post("/quotations",Kt);console.log("API response:",Y),Y.data.success&&(M.success(`Quotation ${ye?"created and sent":"saved"} successfully!`),e("/quotations"))}catch(Be){console.error("Error creating quotation:",Be),console.error("Error response:",Be.response),M.error(Be.response?.data?.message||"Failed to create quotation")}finally{i(!1)}},ke=gt(),$e=ft(),He=Et(),Ht=vs(),wt=ye=>ye.name||ye.title||ye.itemName||ye.productName||(typeof ye=="string"?ye:"")||"Unnamed Product",Rs=ye=>ye.description||ye.details||ye.longDescription||ye.summary||"";return t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-950",children:t.jsxs("div",{className:"mx-auto px-6 py-6",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:s?"Edit Quotation":"Create New Quotation"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Create professional quotations for your leads and track your sales pipeline"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(me,{variant:"SECONDARY",onClick:()=>Xs(!1),disabled:n,className:"px-4 py-2",children:"Save as Draft"}),t.jsx(me,{variant:"PRIMARY",onClick:()=>Xs(!0),loading:n,loadingText:"Saving...",className:"px-6 py-2",children:"Save & Send"})]})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsx(Ee,{padding:"lg",children:t.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[t.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Quotation Number"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("input",{type:"text",value:ae,onChange:ye=>ne(ye.target.value),placeholder:re||"Auto-generated",className:"input-base"}),re&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Preview: ",re," (leave empty for auto-generation)"]})]})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Status"}),t.jsxs("select",{value:U,onChange:ye=>X(ye.target.value),className:"input-base appearance-none",children:[t.jsx("option",{value:"Draft",children:"Draft"}),t.jsx("option",{value:"Sent",children:"Sent"}),t.jsx("option",{value:"Viewed",children:"Viewed"}),t.jsx("option",{value:"Accepted",children:"Accepted"}),t.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Assigned"}),t.jsxs("select",{value:Q,onChange:ye=>V(ye.target.value),className:"input-base appearance-none",children:[t.jsx("option",{value:"",children:"Select User"}),o.map(ye=>t.jsxs("option",{value:ye.id,children:[ye.firstName," ",ye.lastName]},ye.id))]})]}),t.jsxs("div",{className:"col-span-12",ref:v,children:[t.jsxs("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:[t.jsx("span",{className:"text-red-500",children:"*"})," Lead"]}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{type:"button",onClick:()=>{j(!b),_!=="lead"&&F("lead")},className:"w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white hover:border-blue-500 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all flex items-center justify-between group",children:[t.jsx("span",{className:`truncate font-medium ${xe?"":"text-gray-500"}`,children:xe||"Select Lead..."}),t.jsx(xn,{size:16,className:"text-gray-400 group-hover:text-blue-500 flex-shrink-0 ml-2 transition-colors"})]}),b&&t.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl max-h-64 overflow-hidden z-50",children:[t.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:t.jsxs("div",{className:"relative",children:[t.jsx(ma,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:y,onChange:ye=>{p(ye.target.value),rr(ye.target.value)},autoFocus:!0,placeholder:"Search leads...",className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",onClick:ye=>ye.stopPropagation()})]})}),t.jsx("div",{className:"overflow-y-auto max-h-48",children:g.length>0?g.map(ye=>{const Re=[ye.firstName,ye.lastName].filter(Boolean),Be=Re.length>0?Re.join(" "):ye.email||"Unknown Lead",Kt=Re.length>0?Re.map(Y=>Y[0]).join("").toUpperCase():ye.email?.[0]?.toUpperCase()||"?";return t.jsx("button",{type:"button",onClick:()=>jr(ye),className:"w-full text-left px-4 py-3 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-0",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 font-semibold flex items-center justify-center text-xs shrink-0",children:Kt}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:Be}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:ye.email})]})]})},ye.id)}):t.jsx("div",{className:"px-4 py-8 text-sm text-gray-500 dark:text-gray-400 text-center",children:t.jsx("p",{children:"No leads found"})})})]})]})]}),t.jsxs("div",{className:"col-span-12",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Address"}),t.jsx("textarea",{value:se,onChange:ye=>De(ye.target.value),rows:2,className:"input-base"})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"City"}),t.jsx("input",{type:"text",value:Me,onChange:ye=>Ct(ye.target.value),className:"input-base"})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"State"}),t.jsx("input",{type:"text",value:Dt,onChange:ye=>Mt(ye.target.value),className:"input-base"})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Country"}),t.jsxs("select",{value:jt,onChange:ye=>le(ye.target.value),className:"input-base appearance-none",children:[t.jsx("option",{value:"",children:"Select Country"}),t.jsx("option",{value:"US",children:"United States"}),t.jsx("option",{value:"IN",children:"India"}),t.jsx("option",{value:"UK",children:"United Kingdom"}),t.jsx("option",{value:"CA",children:"Canada"}),t.jsx("option",{value:"AU",children:"Australia"})]})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Zip Code"}),t.jsx("input",{type:"text",value:Xe,onChange:ye=>Ke(ye.target.value),className:"input-base"})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[t.jsxs("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:[t.jsx("span",{className:"text-red-500",children:"*"})," Email"]}),t.jsx("input",{type:"email",value:Ne,onChange:ye=>Nt(ye.target.value),className:"input-base",required:!0})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Phone"}),t.jsx("input",{type:"tel",value:_t,onChange:ye=>vt(ye.target.value),className:"input-base"})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[t.jsxs("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:[t.jsx("span",{className:"text-red-500",children:"*"})," Date"]}),t.jsx("input",{type:"date",value:Ot,onChange:ye=>R(ye.target.value),className:"input-base",required:!0})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Open Till"}),t.jsx("input",{type:"date",value:ce,onChange:ye=>de(ye.target.value),className:"input-base",min:Ot})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[t.jsxs("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:[t.jsx("span",{className:"text-red-500",children:"*"})," Currency"]}),t.jsxs("select",{value:ue,onChange:ye=>Pe(ye.target.value),className:"input-base appearance-none",children:[t.jsx("option",{value:"USD",children:"USD $"}),t.jsx("option",{value:"EUR",children:"EUR "}),t.jsx("option",{value:"GBP",children:"GBP "})]})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Discount Type"}),t.jsxs("select",{value:pe,onChange:ye=>ve(ye.target.value),className:"input-base appearance-none",children:[t.jsx("option",{value:"none",children:"No discount"}),t.jsx("option",{value:"%",children:"Percentage"}),t.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Tags"}),t.jsx("input",{type:"text",value:Ve,onChange:ye=>Ge(ye.target.value),placeholder:"Enter tags",className:"input-base"})]})]})}),t.jsx(Ee,{padding:"lg",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Quotation Items"}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[qt.length," ",qt.length===1?"item":"items"," added"]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{type:"button",onClick:()=>{sessionStorage.setItem("quotation_draft",JSON.stringify({subject:G,relatedType:_,relatedId:ee,status:U,assignedTo:Q,toField:xe,address:se,city:Me,state:Dt,country:jt,zipCode:Xe,email:Ne,phone:_t,date:Ot,openTill:ce,currency:ue,items:qt,discountType:pe,discountValue:Ut,adjustmentValue:lr})),e("/products?returnTo=quotation")},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[t.jsx(_n,{size:16}),"Add from Catalog"]}),t.jsxs("button",{type:"button",onClick:Fr,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[t.jsx(Rt,{size:16}),"Add Item"]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show quantity as:"}),t.jsxs("div",{className:"inline-flex rounded-lg border border-gray-300 dark:border-gray-600 overflow-hidden shadow-sm",children:[t.jsx("button",{type:"button",onClick:()=>cr("Qty"),className:`px-4 py-2 text-sm font-medium transition-colors ${pr==="Qty"?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Qty"}),t.jsx("button",{type:"button",onClick:()=>cr("Hours"),className:`px-4 py-2 text-sm font-medium border-l border-gray-300 dark:border-gray-600 transition-colors ${pr==="Hours"?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Hours"}),t.jsx("button",{type:"button",onClick:()=>cr("Qty/Hours"),className:`px-4 py-2 text-sm font-medium border-l border-gray-300 dark:border-gray-600 transition-colors ${pr==="Qty/Hours"?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Qty/Hours"})]})]}),t.jsx("div",{className:"overflow-visible border border-gray-200 dark:border-gray-700 rounded-lg",children:t.jsx("div",{className:"overflow-visible",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-12",children:t.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[180px]",children:"Item"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[150px]",children:"Description"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[200px]",children:"Long Description"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-24",children:pr}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-24",children:"Unit"}),t.jsxs("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-28",children:["Rate (",ue,")"]}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-24",children:"Tax %"}),t.jsxs("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-32",children:["Amount (",ue,")"]}),t.jsx("th",{className:"px-4 py-3 w-12"})]})}),t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:qt.map((ye,Re)=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("input",{type:"checkbox",checked:ye.isOptional,onChange:Be=>Ue(Re,"isOptional",Be.target.checked),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:"Mark as optional"})}),t.jsx("td",{className:"px-4 py-3 relative",children:t.jsxs("div",{className:"relative",ref:E===Re?D:null,children:[t.jsxs("button",{type:"button",onClick:()=>C(E===Re?null:Re),className:"w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white hover:border-blue-500 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all flex items-center justify-between group",children:[t.jsx("span",{className:"truncate font-medium",children:ye.description||"Select Product..."}),t.jsx(xn,{size:16,className:"text-gray-400 group-hover:text-blue-500 flex-shrink-0 ml-2 transition-colors"})]}),E===Re&&t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>C(null)}),E===Re&&t.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl max-h-64 overflow-hidden z-50",children:[t.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:t.jsxs("div",{className:"relative",children:[t.jsx(ma,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search products...",value:S,onChange:Be=>P(Be.target.value),className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",onClick:Be=>Be.stopPropagation()})]})}),t.jsxs("div",{className:"overflow-y-auto max-h-60",children:[N.filter(Be=>{const Kt=wt(Be).toLowerCase(),Y=Rs(Be).toLowerCase(),Ae=S.toLowerCase();return!S||Kt.includes(Ae)||Y.includes(Ae)}).map(Be=>t.jsx("button",{type:"button",onClick:()=>Nr(Re,Be),className:"w-full text-left px-4 py-3 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-0",children:t.jsx("div",{className:"flex items-center justify-between gap-2",children:t.jsx("div",{className:"min-w-0",children:t.jsx("div",{className:"font-semibold text-gray-900 dark:text-white truncate text-sm",children:wt(Be)})})})},Be.id)),N.length===0&&t.jsxs("div",{className:"px-4 py-8 text-sm text-gray-500 dark:text-gray-400 text-center",children:[t.jsx(_n,{size:32,className:"mx-auto mb-2 text-gray-300 dark:text-gray-600"}),t.jsx("p",{children:"No products found"}),t.jsx("button",{type:"button",onClick:()=>e("/products?returnTo=quotation"),className:"mt-3 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Browse Products"})]})]})]})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("input",{type:"text",value:ye.description,onChange:Be=>Ue(Re,"description",Be.target.value),placeholder:"Enter description",className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("textarea",{value:ye.longDescription,onChange:Be=>Ue(Re,"longDescription",Be.target.value),placeholder:"Additional details...",rows:2,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("input",{type:"number",value:ye.quantity,onChange:Be=>Ue(Re,"quantity",parseFloat(Be.target.value)||0),min:"0",step:"0.01",className:"w-full px-3 py-2 text-sm text-right border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("input",{type:"text",value:ye.unit,onChange:Be=>Ue(Re,"unit",Be.target.value),placeholder:"Unit",className:"w-full px-3 py-2 text-sm text-center border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("input",{type:"number",value:ye.rate,onChange:Be=>Ue(Re,"rate",parseFloat(Be.target.value)||0),min:"0",step:"0.01",placeholder:"0.00",className:"w-full px-3 py-2 text-sm text-right border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("select",{value:ye.taxRate,onChange:Be=>Ue(Re,"taxRate",parseFloat(Be.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[t.jsx("option",{value:"0",children:"No Tax"}),I.filter(Be=>Be.isActive).map(Be=>t.jsxs("option",{value:Be.rate,children:[Be.name," (",Be.rate,"%)"]},Be.id))]})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["$",ye.amount.toFixed(2)]})}),t.jsx("td",{className:"px-4 py-3 text-center",children:qt.length>1&&t.jsx("button",{type:"button",onClick:()=>fe(Re),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Remove item",children:t.jsx(ht,{size:16})})})]},Re))})]})})}),qt.some(ye=>ye.isOptional)&&t.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"}),t.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:"Items marked as optional are indicated with a checkbox"})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"lg:col-span-2",children:t.jsx(Ee,{padding:"lg",className:"h-full",children:t.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[t.jsxs("div",{className:"col-span-12",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Terms & Conditions"}),t.jsxs("select",{value:B,onChange:ye=>{const Re=ye.target.value;if(z(Re),Re){const Be=W.find(Kt=>Kt.id.toString()===Re);Be&&J(Be.content)}else J("")},className:"input-base appearance-none",children:[t.jsx("option",{value:"",children:"Select Terms & Conditions Template"}),W.filter(ye=>ye.isActive).map(ye=>t.jsxs("option",{value:ye.id,children:[ye.name," ",ye.isDefault?"(Default)":""]},ye.id))]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Choose a template or leave empty to use default terms"})]}),B&&t.jsxs("div",{className:"col-span-12",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Selected Template Content"}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 max-h-32 overflow-y-auto",children:t.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:q})})]}),t.jsx("div",{className:"col-span-12",children:t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:$t,onChange:ye=>Qt(ye.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Allow Comments"})]})})]})})}),t.jsx("div",{className:"lg:col-span-1 space-y-6",children:t.jsx(Ee,{padding:"lg",className:"sticky top-20",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white pb-3 border-b border-gray-200 dark:border-gray-700",children:"Summary"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Subtotal"}),t.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["$",ke.toFixed(2)]})]}),$e>0&&t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Tax"}),t.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["$",$e.toFixed(2)]})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Discount"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",value:Ut,onChange:ye=>Ft(parseFloat(ye.target.value)||0),min:"0",step:"0.01",className:"w-20 px-2 py-1 text-xs text-right border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500"}),t.jsxs("select",{value:pe,onChange:ye=>ve(ye.target.value),className:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"%",children:"%"}),t.jsx("option",{value:"fixed",children:"$"})]})]})]}),He>0&&t.jsx("div",{className:"flex items-center justify-end",children:t.jsxs("span",{className:"text-sm text-red-600 dark:text-red-400 font-medium",children:["-$",He.toFixed(2)]})}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Adjustment"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",value:lr,onChange:ye=>ia(parseFloat(ye.target.value)||0),step:"0.01",className:"w-20 px-2 py-1 text-xs text-right border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"$"})]})]}),t.jsxs("div",{className:"pt-3 mt-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[t.jsx("span",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Total"}),t.jsxs("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",Ht.toFixed(2)]})]})]}),t.jsxs("div",{className:"flex flex-col gap-2 pt-4",children:[t.jsx(me,{variant:"SECONDARY",fullWidth:!0,onClick:()=>Xs(!1),disabled:n,children:"Save as Draft"}),t.jsx(me,{variant:"PRIMARY",fullWidth:!0,onClick:()=>Xs(!0),loading:n,loadingText:"Saving...",children:"Save & Send"})]})]})})})]})]}),t.jsx("div",{className:"h-8"})]})})};var qie={};const Hie=()=>{const{id:e}=ui(),r=mt(),[a,s]=h.useState(null),[n,i]=h.useState(null),[o,c]=h.useState(!0),[u,m]=h.useState(!1);h.useEffect(()=>{g(),f()},[e]);const g=async()=>{try{c(!0);const N=await oe.get(`/quotations/${e}`);N.data.success&&s(N.data.data.quotation)}catch(N){M.error(N?.response?.data?.message||"Failed to fetch quotation"),r("/quotations")}finally{c(!1)}},f=async()=>{try{const N=await oe.get("/business-settings/all");N.data.success&&i(N.data.data)}catch(N){console.error("Error fetching business settings:",N)}},y=async()=>{if(a)try{m(!0);const N=await oe.get(`/quotations/${e}/pdf/download`,{responseType:"blob"}),k=window.URL.createObjectURL(new Blob([N.data])),E=document.createElement("a");E.href=k,E.setAttribute("download",`${a.quotationNumber}.pdf`),document.body.appendChild(E),E.click(),E.remove(),M.success("Quotation downloaded successfully")}catch{M.error("Failed to download PDF")}finally{m(!1)}},p=()=>{window.print()},b=async N=>{if(a)try{m(!0);let k="",E="";switch(N){case"accept":k=`/quotations/${e}/accept`,E="Quotation marked as accepted";break;case"reject":k=`/quotations/${e}/reject`,E="Quotation marked as rejected";break;case"send":k=`/quotations/${e}/send`,E="Quotation marked as sent";break}(await oe.put(k)).data.success&&(M.success(E),g())}catch{M.error("Failed to update quotation status")}finally{m(!1)}},j=N=>{switch(N){case"ACCEPTED":return{label:"Accepted",color:"bg-green-100 text-green-800"};case"REJECTED":return{label:"Rejected",color:"bg-red-100 text-red-800"};case"SENT":return{label:"Sent",color:"bg-blue-100 text-blue-800"};case"DRAFT":return{label:"Draft",color:"bg-gray-100 text-gray-800"};default:return{label:N,color:"bg-gray-100 text-gray-800"}}};if(o||!a)return t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})});const v=j(a.status);return t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-950 pb-12 print:bg-white print:pb-0",children:[t.jsx("div",{className:"bg-white dark:bg-slate-900 border-b border-gray-200 dark:border-slate-800 py-4 px-6 sticky top-0 z-10 print:hidden",children:t.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>r("/quotations"),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:t.jsx(vr,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[a.quotationNumber,t.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-bold uppercase tracking-wider ${v.color}`,children:v.label})]}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created on ",fy(new Date(a.createdAt),"PPP")]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs(me,{variant:"SECONDARY",size:"SM",onClick:p,children:[t.jsx(eU,{className:"w-4 h-4 mr-2"})," Print"]}),t.jsxs(me,{variant:"SECONDARY",size:"SM",onClick:y,loading:u,children:[t.jsx(hs,{className:"w-4 h-4 mr-2"})," PDF"]}),a.status==="DRAFT"&&t.jsxs(me,{variant:"PRIMARY",size:"SM",onClick:()=>b("send"),loading:u,children:[t.jsx(Tl,{className:"w-4 h-4 mr-2"})," Send"]}),a.status==="SENT"&&t.jsxs(t.Fragment,{children:[t.jsxs(me,{variant:"SECONDARY",size:"SM",className:"text-red-600 hover:bg-red-50",onClick:()=>b("reject"),loading:u,children:[t.jsx(va,{className:"w-4 h-4 mr-2"})," Reject"]}),t.jsxs(me,{variant:"PRIMARY",size:"SM",onClick:()=>b("accept"),loading:u,children:[t.jsx(ct,{className:"w-4 h-4 mr-2"})," Accept"]})]}),t.jsxs(me,{variant:"SECONDARY",size:"SM",onClick:()=>r(`/quotations/edit/${e}`),children:[t.jsx(er,{className:"w-4 h-4 mr-2"})," Edit"]})]})]})}),t.jsx("div",{className:"max-w-5xl mx-auto pt-8 px-6 print:pt-0 print:px-0",children:t.jsxs(Ee,{className:"shadow-2xl border-none p-0 overflow-hidden dark:bg-slate-900 print:shadow-none print:bg-white",children:[t.jsx("div",{className:"h-2 bg-indigo-600 print:h-1"}),t.jsxs("div",{className:"p-12 print:p-8",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-8 mb-16",children:[t.jsxs("div",{className:"space-y-6 max-w-md",children:[n?.companyLogo?t.jsx("img",{src:n.companyLogo.startsWith("data:image")?n.companyLogo:`${qie.REACT_APP_API_URL||""}/uploads/${n.companyLogo}`,alt:"Logo",className:"h-16 w-auto object-contain"}):t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-xl flex items-center justify-center",children:t.jsx($i,{className:"text-white w-7 h-7"})}),t.jsx("span",{className:"text-2xl font-black text-slate-800 dark:text-white tracking-tight",children:n?.companyName||"WE-CONNECT"})]}),t.jsxs("div",{className:"space-y-1 text-sm text-slate-500 dark:text-slate-400 font-medium",children:[t.jsx("p",{className:"text-slate-900 dark:text-slate-200 font-bold text-base mb-2",children:n?.companyName}),t.jsxs("p",{className:"flex items-center gap-2",children:[t.jsx(Lo,{className:"w-3.5 h-3.5"})," ",n?.companyAddress]}),t.jsxs("p",{className:"flex items-center gap-2",children:[t.jsx(ir,{className:"w-3.5 h-3.5"})," ",n?.companyEmail]}),t.jsxs("p",{className:"flex items-center gap-2",children:[t.jsx(ba,{className:"w-3.5 h-3.5"})," ",n?.companyPhone]}),n?.companyWebsite&&t.jsxs("p",{className:"flex items-center gap-2",children:[t.jsx(ff,{className:"w-3.5 h-3.5"})," ",n?.companyWebsite]})]})]}),t.jsxs("div",{className:"text-left md:text-right space-y-4 min-w-[200px]",children:[t.jsx("h2",{className:"text-5xl font-black text-slate-900 dark:text-white tracking-tighter opacity-10 print:opacity-20 uppercase",children:"Quotation"}),t.jsxs("div",{className:"space-y-1 pt-4",children:[t.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Quotation Number"}),t.jsx("p",{className:"text-2xl font-black text-indigo-600",children:a.quotationNumber})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 md:float-right",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-none",children:"Date"}),t.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:fy(new Date(a.createdAt),"dd MMM, yyyy")})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-none",children:"Valid Until"}),t.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:a.validUntil?fy(new Date(a.validUntil),"dd MMM, yyyy"):"-"})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 mb-16 px-8 py-10 bg-slate-50 dark:bg-slate-800/50 rounded-3xl border border-slate-100 dark:border-slate-800 print:bg-white print:border-slate-200",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-3 text-indigo-600 font-bold uppercase tracking-widest text-xs",children:[t.jsx("span",{className:"w-8 h-[2px] bg-indigo-600"}),"Recipient"]}),a.lead?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:[a.lead.firstName," ",a.lead.lastName]}),a.lead.company&&t.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:a.lead.company})]}),t.jsxs("div",{className:"space-y-1 text-sm text-slate-600 dark:text-slate-400 font-medium",children:[a.lead.address&&t.jsxs("p",{className:"flex items-start gap-2",children:[t.jsx(Lo,{className:"w-4 h-4 mt-0.5 shrink-0"})," ",a.lead.address]}),t.jsxs("p",{className:"flex items-center gap-2",children:[t.jsx(ir,{className:"w-4 h-4 shrink-0"})," ",a.lead.email]}),a.lead.phone&&t.jsxs("p",{className:"flex items-center gap-2",children:[t.jsx(ba,{className:"w-4 h-4 shrink-0"})," ",a.lead.phone]})]})]}):t.jsx("p",{className:"text-slate-400 italic font-medium",children:"Customer details not specified"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-3 text-slate-400 font-bold uppercase tracking-widest text-xs",children:[t.jsx("span",{className:"w-8 h-[2px] bg-slate-300"}),"Subject & Description"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white leading-tight",children:a.title}),a.description&&t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 leading-relaxed font-medium",children:a.description})]})]})]}),t.jsx("div",{className:"mb-12 overflow-hidden rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm print:shadow-none",children:t.jsxs("table",{className:"w-full text-left border-collapse",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-900 border-b border-slate-800",children:[t.jsx("th",{className:"px-6 py-5 text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 text-center w-16",children:"#"}),t.jsx("th",{className:"px-6 py-5 text-[10px] font-black uppercase tracking-[0.2em] text-slate-400",children:"Description"}),t.jsx("th",{className:"px-6 py-5 text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 text-center w-24",children:"Qty"}),t.jsx("th",{className:"px-6 py-5 text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 text-right w-40",children:"Unit Price"}),t.jsx("th",{className:"px-6 py-5 text-[10px] font-black uppercase tracking-[0.2em] text-slate-200 text-right w-40",children:"Amount"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:a.items?.map((N,k)=>t.jsxs("tr",{className:"group hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[t.jsx("td",{className:"px-6 py-6 text-sm font-black text-slate-300 dark:text-slate-600 text-center",children:String(k+1).padStart(2,"0")}),t.jsxs("td",{className:"px-6 py-6",children:[t.jsx("p",{className:"font-bold text-slate-900 dark:text-white mb-1 group-hover:text-indigo-600 transition-colors",children:N.name}),N.description&&t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium line-clamp-2",children:N.description})]}),t.jsxs("td",{className:"px-6 py-6 text-sm font-bold text-slate-900 dark:text-white text-center",children:[N.quantity," ",t.jsx("span",{className:"text-[10px] text-slate-400 uppercase ml-1",children:N.unit||"pcs"})]}),t.jsxs("td",{className:"px-6 py-6 text-sm font-semibold text-slate-900 dark:text-white text-right font-mono",children:[a.currency," ",Number(N.unitPrice).toLocaleString("en-US",{minimumFractionDigits:2})]}),t.jsxs("td",{className:"px-6 py-6 text-sm font-black text-slate-900 dark:text-white text-right font-mono",children:[a.currency," ",Number(N.totalAmount).toLocaleString("en-US",{minimumFractionDigits:2})]})]},N.id))})]})}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-12 border-t border-slate-100 dark:border-slate-800 pt-16",children:[t.jsxs("div",{className:"max-w-md space-y-8 flex-1",children:[a.notes&&t.jsxs("div",{className:"space-y-4 p-6 bg-slate-50 dark:bg-slate-800/30 rounded-2xl border border-slate-100 dark:border-slate-800/50",children:[t.jsxs("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[t.jsx(ur,{className:"w-3.5 h-3.5"})," Additional Notes"]}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 leading-relaxed font-medium",children:a.notes})]}),a.terms&&t.jsxs("div",{className:"space-y-4 p-6 bg-indigo-50/30 dark:bg-slate-800/30 rounded-2xl border border-indigo-100/50 dark:border-slate-800/50",children:[t.jsxs("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[t.jsx(Lt,{className:"w-3.5 h-3.5"})," Terms & Conditions"]}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 leading-relaxed font-medium",children:a.terms})]})]}),t.jsxs("div",{className:"min-w-[320px] space-y-4",children:[t.jsxs("div",{className:"space-y-3 px-2",children:[t.jsxs("div",{className:"flex justify-between text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:[t.jsx("span",{children:"Subtotal"}),t.jsxs("span",{className:"text-slate-900 dark:text-white",children:[a.currency," ",Number(a.subtotal).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),Number(a.taxAmount)>0&&t.jsxs("div",{className:"flex justify-between text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:[t.jsx("span",{children:"Tax Amount"}),t.jsxs("span",{className:"text-slate-900 dark:text-white",children:["+",a.currency," ",Number(a.taxAmount).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),Number(a.discountAmount)>0&&t.jsxs("div",{className:"flex justify-between text-sm font-bold text-red-500 uppercase tracking-wider",children:[t.jsx("span",{children:"Discount"}),t.jsxs("span",{children:["-",a.currency," ",Number(a.discountAmount).toLocaleString("en-US",{minimumFractionDigits:2})]})]})]}),t.jsxs("div",{className:"bg-indigo-600 rounded-3xl p-8 text-white shadow-xl shadow-indigo-600/20",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-indigo-200",children:"Total Amount Due"}),t.jsx(nr,{className:"w-4 h-4 text-indigo-200 opacity-50"})]}),t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsx("span",{className:"text-xl font-bold opacity-70",children:a.currency}),t.jsx("span",{className:"text-4xl font-black tracking-tighter tabular-nums",children:Number(a.totalAmount).toLocaleString("en-US",{minimumFractionDigits:2})})]})]})]})]}),t.jsxs("div",{className:"mt-24 pt-8 border-t border-slate-100 dark:border-slate-800 text-center",children:[t.jsxs("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest mb-1",children:["Thank you for choosing ",n?.companyName||"our services"]}),t.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"This is a computer generated document and does not require a physical signature."})]})]})]})}),t.jsx("style",{dangerouslySetInnerHTML:{__html:`
        @media print {
          body { background-color: white !important; }
          .min-h-screen { min-h-0 !important; }
          card { box-shadow: none !important; }
          footer, nav, .print-hidden { display: none !important; }
        }
      `}})]})},Wie=()=>{const{hasPermission:e}=xr(),r=mt(),[a]=um(),[s,n]=h.useState([]),[i,o]=h.useState(!0),[c,u]=h.useState(""),[m,g]=h.useState("ALL"),[f,y]=h.useState("card"),[p,b]=h.useState(["invoiceNumber","customer","email","related","totalAmount","paidAmount","status","dueDate","createdAt"]),[j,v]=h.useState(1),[N,k]=h.useState(10);h.useEffect(()=>{try{const P=localStorage.getItem("invoices_visible_columns");if(P){const D=JSON.parse(P);Array.isArray(D)&&D.every(I=>typeof I=="string")&&b(D)}}catch{}},[]),h.useEffect(()=>{try{localStorage.setItem("invoices_visible_columns",JSON.stringify(p))}catch{}},[p]),h.useEffect(()=>{E()},[c,m]);const E=async()=>{try{o(!0);const P=await oe.get("/invoices",{params:{search:c||void 0,status:m!=="ALL"?m:void 0}});if(P.data.success){const D=P.data.data||{},H=(Array.isArray(D)?D:D.items||[]).map(W=>({id:W.id,invoiceNumber:W.invoiceNumber,title:W.title,totalAmount:Number(W.totalAmount)||0,paidAmount:Number(W.paidAmount)||0,currency:W.currency||"USD",status:W.status,dueDate:W.dueDate,createdAt:W.createdAt,customerName:W.lead?`${W.lead.firstName||""} ${W.lead.lastName||""}`.trim()||W.lead.company:void 0,customerEmail:W.lead?.email,relatedTo:W.deal?`Deal #${W.deal.id}`:W.lead?`Lead #${W.lead.id}`:void 0,relatedType:W.dealId?"deal":W.leadId?"lead":void 0}));n(H)}}catch(P){console.error("Error fetching invoices:",P),M.error(P?.response?.data?.message||"Failed to fetch invoices"),n([])}finally{o(!1)}},C=P=>{const D={DRAFT:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",SENT:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",VIEWED:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300",PAID:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",OVERDUE:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",CANCELLED:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",REFUNDED:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"};return D[P]||D.DRAFT},S=s.filter(P=>{const D=P.invoiceNumber.toLowerCase().includes(c.toLowerCase())||P.title.toLowerCase().includes(c.toLowerCase())||P.customerName?.toLowerCase().includes(c.toLowerCase()),I=m==="ALL"||P.status===m;return D&&I});return i?t.jsx("div",{className:"flex items-center justify-center h-96",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-weconnect-red"})}):t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:t.jsxs("div",{className:"mx-auto px-6 py-6 space-y-6",children:[t.jsx("div",{children:t.jsx(Sd,{title:"Invoices",subtitle:"Track payments and manage all your invoices",addLabel:"Create Invoice",onAdd:e("deal.create")?()=>{const P=a.get("entityType"),D=a.get("entityId");r(P&&D?`/invoices/new?entityType=${P}&entityId=${D}`:"/invoices/new")}:void 0,bulkActions:[{label:"Export Invoices (Excel)",icon:t.jsx(Uo,{className:"w-4 h-4"}),onClick:()=>{const P=["Invoice #","Title","Customer","Email","Related","Total Amount","Paid Amount","Status","Created","Due Date"],D=S.map(I=>[I.invoiceNumber,I.title,I.customerName||"",I.customerEmail||"",I.relatedTo||"",`${I.currency} ${Number(I.totalAmount).toLocaleString()}`,`${I.currency} ${(Number(I.paidAmount)||0).toLocaleString()}`,I.status,new Date(I.createdAt).toLocaleDateString(),I.dueDate?new Date(I.dueDate).toLocaleDateString():""]);Cd("invoices_export.csv",P,D)}},{label:"Export Invoices (PDF)",icon:t.jsx(Lt,{className:"w-4 h-4"}),onClick:()=>{const P=["Invoice #","Title","Customer","Email","Related","Total Amount","Paid Amount","Status","Created","Due Date"],D=S.map(I=>[I.invoiceNumber,I.title,I.customerName||"",I.customerEmail||"",I.relatedTo||"",`${I.currency} ${Number(I.totalAmount).toLocaleString()}`,`${I.currency} ${(Number(I.paidAmount)||0).toLocaleString()}`,I.status,new Date(I.createdAt).toLocaleDateString(),I.dueDate?new Date(I.dueDate).toLocaleDateString():""]);hx("Invoices",P,D)}}]})}),t.jsx(Ee,{className:"p-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),t.jsx("input",{type:"text",placeholder:"Search invoices...",value:c,onChange:P=>u(P.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-slate-800 dark:text-white"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Gl,{size:20,className:"text-gray-500"}),t.jsxs("select",{value:m,onChange:P=>g(P.target.value),className:"px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-slate-800 dark:text-white",children:[t.jsx("option",{value:"ALL",children:"All Status"}),t.jsx("option",{value:"DRAFT",children:"Draft"}),t.jsx("option",{value:"SENT",children:"Sent"}),t.jsx("option",{value:"VIEWED",children:"Viewed"}),t.jsx("option",{value:"PAID",children:"Paid"}),t.jsx("option",{value:"PARTIALLY_PAID",children:"Partially Paid"}),t.jsx("option",{value:"OVERDUE",children:"Overdue"}),t.jsx("option",{value:"CANCELLED",children:"Cancelled"}),t.jsx("option",{value:"REFUNDED",children:"Refunded"})]})]}),t.jsxs("div",{className:"hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto",children:[t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${f==="list"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>y("list"),title:"List view",children:t.jsx(gi,{className:"w-4 h-4"})}),t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${f==="card"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>y("card"),title:"Card view",children:t.jsx(mi,{className:"w-4 h-4"})})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs(Ee,{className:"p-4 bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 border-emerald-200 dark:border-emerald-800",children:[t.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 text-sm font-medium",children:"Total Invoices"}),t.jsx("div",{className:"text-2xl font-bold text-emerald-900 dark:text-emerald-100 mt-1",children:s.length})]}),t.jsxs(Ee,{className:"p-4 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800",children:[t.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm font-medium",children:"Paid"}),t.jsx("div",{className:"text-2xl font-bold text-green-900 dark:text-green-100 mt-1",children:s.filter(P=>P.status==="PAID").length})]}),t.jsxs(Ee,{className:"p-4 bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800",children:[t.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm font-medium",children:"Overdue"}),t.jsx("div",{className:"text-2xl font-bold text-red-900 dark:text-red-100 mt-1",children:s.filter(P=>P.status==="OVERDUE").length})]}),t.jsxs(Ee,{className:"p-4 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200 dark:border-blue-800",children:[t.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium",children:"Total Revenue"}),t.jsxs("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100 mt-1",children:["$",s.reduce((P,D)=>P+(Number(D.paidAmount)||0),0).toLocaleString()]})]})]}),f==="card"?t.jsx("div",{className:"space-y-4",children:S.length===0?t.jsxs(Ee,{className:"p-12 text-center",children:[t.jsx(Li,{size:64,className:"mx-auto text-gray-400 dark:text-gray-600 mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Invoices Found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:c||m!=="ALL"?"Try adjusting your filters":"Create your first invoice to get started"}),e("deal.create")&&t.jsx(me,{onClick:()=>r("/invoices/new"),children:"Create Invoice"})]}):S.map(P=>t.jsx(Ee,{className:"p-6 hover:shadow-2xl transition-all duration-200 hover:scale-[1.01]",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-100 to-emerald-200 dark:from-emerald-900 dark:to-emerald-800 rounded-2xl",children:t.jsx(Li,{size:28,className:"text-emerald-600 dark:text-emerald-400"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:P.invoiceNumber}),t.jsx("span",{className:`px-3 py-1.5 text-xs font-bold rounded-full ${C(P.status)}`,children:P.status.replace("_"," ")})]}),t.jsx("p",{className:"text-base font-medium text-gray-700 dark:text-gray-300 mb-2",children:P.title}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[t.jsxs("span",{children:["Customer: ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:P.customerName})]}),P.relatedTo&&t.jsx("span",{children:""}),P.relatedTo&&t.jsxs("span",{children:["Related: ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:P.relatedTo})]})]}),t.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400 mt-2",children:[t.jsxs("span",{children:["Created: ",new Date(P.createdAt).toLocaleDateString()]}),P.dueDate&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["Due: ",new Date(P.dueDate).toLocaleDateString()]})]})]}),P.status==="PARTIALLY_PAID"&&t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[t.jsx("span",{children:"Payment Progress"}),t.jsxs("span",{children:["$",(Number(P.paidAmount)||0).toLocaleString()," / $",Number(P.totalAmount).toLocaleString()]})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:t.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 h-2 rounded-full transition-all duration-300",style:{width:`${(Number(P.paidAmount)||0)/Number(P.totalAmount)*100}%`}})})]})]})]}),t.jsxs("div",{className:"text-right ml-6",children:[t.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:[P.currency," $",Number(P.totalAmount).toLocaleString()]}),P.status==="PARTIALLY_PAID"&&t.jsxs("div",{className:"text-sm text-yellow-600 dark:text-yellow-400 mb-3 font-medium",children:["$",(Number(P.paidAmount)||0).toLocaleString()," paid"]}),P.status==="PAID"&&t.jsxs("div",{className:"text-sm text-green-600 dark:text-green-400 mb-3 font-medium flex items-center justify-end gap-1",children:[t.jsx(Qr,{size:14}),"Fully Paid"]}),t.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[t.jsx(me,{size:"SM",variant:"GHOST",title:"View",onClick:async()=>{try{const D=await oe.get(`/invoices/${P.id}/pdf/preview`,{responseType:"blob"}),I=URL.createObjectURL(new Blob([D.data],{type:"application/pdf"}));window.open(I,"_blank")}catch(D){M.error(D?.response?.data?.message||"Failed to preview invoice")}},children:t.jsx(Bt,{size:16})}),t.jsx(me,{size:"SM",variant:"GHOST",title:"Edit",onClick:()=>r(`/invoices/edit/${P.id}`),children:t.jsx(er,{size:16})}),t.jsx(me,{size:"SM",variant:"GHOST",title:"Download",onClick:async()=>{try{const D=await oe.get(`/invoices/${P.id}/pdf/download`,{responseType:"blob"}),I=URL.createObjectURL(new Blob([D.data])),H=document.createElement("a");H.href=I,H.download=`${P.invoiceNumber||"invoice"}.pdf`,H.click(),M.success("Invoice downloaded successfully")}catch(D){M.error(D?.response?.data?.message||"Failed to download invoice")}},children:t.jsx(hs,{size:16})}),P.status==="DRAFT"&&t.jsx(me,{size:"SM",variant:"PRIMARY",className:"ml-2",title:"Send",onClick:async()=>{try{await oe.put(`/invoices/${P.id}/send`),M.success("Invoice sent successfully"),E()}catch(D){M.error(D?.response?.data?.message||"Failed to send invoice")}},children:t.jsx(Tl,{size:16})}),t.jsx(me,{size:"SM",variant:"GHOST",className:"text-red-600 hover:text-red-700",title:"Delete",onClick:async()=>{if(window.confirm("Are you sure you want to delete this invoice?"))try{await oe.delete(`/invoices/${P.id}`),M.success("Invoice deleted successfully"),E()}catch(D){M.error(D?.response?.data?.message||"Failed to delete invoice")}},children:t.jsx(ht,{size:16})})]})]})]})},P.id))}):t.jsxs(Ee,{className:"overflow-hidden bg-white dark:bg-gray-800 shadow-sm",children:[t.jsx(to,{currentPage:j,itemsPerPage:N,totalItems:S.length,onItemsPerPageChange:P=>{k(P),v(1)},columnConfig:{columns:[{id:"invoiceNumber",label:"Invoice #"},{id:"customer",label:"Customer"},{id:"email",label:"Email"},{id:"related",label:"Related"},{id:"totalAmount",label:"Total Amount"},{id:"paidAmount",label:"Paid Amount"},{id:"status",label:"Status"},{id:"dueDate",label:"Due Date"},{id:"createdAt",label:"Created"}],visibleColumns:p,onChange:b,minVisible:1}}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50",children:t.jsxs("tr",{children:[p.includes("invoiceNumber")&&t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Invoice #"}),p.includes("customer")&&t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Customer"}),p.includes("email")&&t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Email"}),p.includes("related")&&t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Related"}),p.includes("totalAmount")&&t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Total"}),p.includes("paidAmount")&&t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Paid"}),p.includes("status")&&t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),p.includes("dueDate")&&t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Due Date"}),p.includes("createdAt")&&t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Created"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:S.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:p.length+1,className:"px-6 py-12 text-center",children:[t.jsx(Li,{size:64,className:"mx-auto text-gray-400 dark:text-gray-600 mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Invoices Found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:c||m!=="ALL"?"Try adjusting your filters":"Create your first invoice to get started"}),e("deal.create")&&t.jsx(me,{onClick:()=>r("/invoices/new"),children:"Create Invoice"})]})}):S.map(P=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[p.includes("invoiceNumber")&&t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:P.invoiceNumber}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:P.title})]}),p.includes("customer")&&t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:P.customerName||"-"}),p.includes("email")&&t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:P.customerEmail||"-"}),p.includes("related")&&t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:P.relatedTo||"-"}),p.includes("totalAmount")&&t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:[P.currency," $",Number(P.totalAmount).toLocaleString()]}),p.includes("paidAmount")&&t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[P.currency," $",(Number(P.paidAmount)||0).toLocaleString()]}),p.includes("status")&&t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold ${C(P.status)}`,children:P.status.replace("_"," ")})}),p.includes("dueDate")&&t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:P.dueDate?new Date(P.dueDate).toLocaleDateString():"-"}),p.includes("createdAt")&&t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(P.createdAt).toLocaleDateString()}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx(me,{size:"SM",variant:"GHOST",title:"View",onClick:async()=>{try{const D=await oe.get(`/invoices/${P.id}/pdf/preview`,{responseType:"blob"}),I=URL.createObjectURL(new Blob([D.data],{type:"application/pdf"}));window.open(I,"_blank")}catch(D){M.error(D?.response?.data?.message||"Failed to preview invoice")}},children:t.jsx(Bt,{size:16})}),t.jsx(me,{size:"SM",variant:"GHOST",title:"Edit",onClick:()=>r(`/invoices/edit/${P.id}`),children:t.jsx(er,{size:16})}),t.jsx(me,{size:"SM",variant:"GHOST",title:"Download",onClick:async()=>{try{const D=await oe.get(`/invoices/${P.id}/pdf/download`,{responseType:"blob"}),I=URL.createObjectURL(new Blob([D.data])),H=document.createElement("a");H.href=I,H.download=`${P.invoiceNumber||"invoice"}.pdf`,H.click(),M.success("Invoice downloaded successfully")}catch(D){M.error(D?.response?.data?.message||"Failed to download invoice")}},children:t.jsx(hs,{size:16})})]})})]},P.id))})]})})]})]})})},Ic={Afghanistan:"AFN",Albania:"EUR",Algeria:"DZD",Argentina:"ARS",Australia:"AUD",Austria:"EUR",Bahrain:"BHD",Bangladesh:"BDT",Belgium:"EUR",Benin:"XOF",Bhutan:"BTN",Botswana:"BWP",Brazil:"BRL",Bulgaria:"BGN","Burkina Faso":"XOF",Burundi:"BIF",Cambodia:"KHR",Cameroon:"XAF",Canada:"CAD","Cape Verde":"CVE","Central African Republic":"XAF",Chad:"XAF",Chile:"CLP",China:"CNY",Colombia:"COP",Comoros:"KMF",Congo:"XAF",Croatia:"HRK","Czech Republic":"CZK","Democratic Republic of the Congo":"CDF",Denmark:"DKK",Djibouti:"DJF",Egypt:"EGP","Equatorial Guinea":"XAF",Eritrea:"ERN",Estonia:"EUR",Ethiopia:"ETB",Eswatini:"SZL",Finland:"EUR",France:"EUR",Gabon:"XAF",Gambia:"GMD",Germany:"EUR",Ghana:"GHS",Greece:"EUR",Guinea:"GNF","Guinea-Bissau":"XOF","Hong Kong":"HKD",Hungary:"HUF",Iceland:"ISK",India:"INR",Indonesia:"IDR",Iran:"IRR",Iraq:"IQD",Ireland:"EUR",Israel:"ILS",Italy:"EUR","Ivory Coast":"XOF",Japan:"JPY",Jordan:"JOD",Kazakhstan:"KZT",Kenya:"KES",Kuwait:"KWD",Kyrgyzstan:"KGS",Laos:"LAK",Latvia:"EUR",Lebanon:"LBP",Lesotho:"LSL",Liberia:"LRD",Libya:"LYD",Lithuania:"EUR",Luxembourg:"EUR",Madagascar:"MGA",Malawi:"MWK",Malaysia:"MYR",Maldives:"MVR",Mali:"XOF",Mauritania:"MRU",Mauritius:"MUR",Mexico:"MXN",Mongolia:"MNT",Morocco:"MAD",Mozambique:"MZN",Myanmar:"MMK",Namibia:"NAD",Nepal:"NPR",Netherlands:"EUR","New Zealand":"NZD",Niger:"XOF",Nigeria:"NGN","North Korea":"KPW",Norway:"NOK",Oman:"OMR",Pakistan:"PKR",Peru:"PEN",Philippines:"PHP",Poland:"PLN",Portugal:"EUR",Qatar:"QAR","Republic of the Congo":"XAF",Romania:"RON",Russia:"RUB",Rwanda:"RWF","So Tom and Prncipe":"STN","Saudi Arabia":"SAR",Senegal:"XOF",Serbia:"RSD",Seychelles:"SCR","Sierra Leone":"SLL",Singapore:"SGD",Slovakia:"EUR",Slovenia:"EUR",Somalia:"SOS","South Africa":"ZAR","South Korea":"KRW",Spain:"EUR","Sri Lanka":"LKR",Sudan:"SDG",Sweden:"SEK",Switzerland:"CHF",Syria:"SYP",Tanzania:"TZS",Thailand:"THB",Togo:"XOF",Tunisia:"TND",Turkey:"TRY",Uganda:"UGX",Ukraine:"UAH","United Arab Emirates":"AED","United Kingdom":"GBP","United States":"USD",Uruguay:"UYU",Uzbekistan:"UZS",Vietnam:"VND",Yemen:"YER",Zambia:"ZMW",Zimbabwe:"ZWL"},Vie=e=>Ic[e],DP=()=>{const e=mt(),{currencySettings:r}=Hr(),[a]=um(),{id:s}=ui(),n=!!s,[i,o]=h.useState(!1),[c,u]=h.useState([]),[m,g]=h.useState([]),[f,y]=h.useState(null),[p,b]=h.useState(""),j=h.useRef(null),[v,N]=h.useState([]),[k,E]=h.useState(""),[C,S]=h.useState([]),[P,D]=h.useState(!1),I=h.useRef(null),[H,W]=h.useState([]),[K,B]=h.useState(""),[z,q]=h.useState(""),[J,ae]=h.useState(""),[ne,re]=h.useState(""),[L,G]=h.useState("Draft"),[T,_]=h.useState(""),[F,ee]=h.useState(""),[Z,U]=h.useState(""),[X,Q]=h.useState(""),[V,ge]=h.useState(""),[Te,xe]=h.useState(""),[qe,se]=h.useState(""),[De,Me]=h.useState(""),[Ct,Dt]=h.useState(""),[Mt,jt]=h.useState(new Date().toISOString().split("T")[0]),[le,Xe]=h.useState(""),[Ke,Ne]=h.useState(r?.primary||"USD"),[Nt,_t]=h.useState("none"),[vt,Ot]=h.useState(""),[R,ce]=h.useState(""),[de,ue]=h.useState([]),[Pe,pe]=h.useState(""),[ve,Ve]=h.useState(""),[Ge,$t]=h.useState([{description:"",longDescription:"",quantity:1,unit:"Unit",rate:0,taxRate:0,amount:0,isOptional:!1,productId:""}]),[Qt,qt]=h.useState(0),[Xt,Ut]=h.useState(0),[Ft,lr]=h.useState("Qty");h.useEffect(()=>{ia()},[]),h.useEffect(()=>{n&&(async()=>{try{const ke=await oe.get(`/invoices/${s}`),$e=ke?.data?.data?.invoice||ke?.data?.invoice||ke?.data;if(!$e)return;if(B($e.invoiceNumber||""),G($e.status?$e.status.charAt(0)+$e.status.slice(1).toLowerCase():"Draft"),Ne($e.currency||"USD"),Xe($e.dueDate?String($e.dueDate).slice(0,10):""),jt($e.createdAt?String($e.createdAt).slice(0,10):Mt),Ot($e.notes||""),ce($e.terms||""),Ve($e.terms||""),$e.terms){const He=de.find(Ht=>Ht.content===$e.terms);He&&pe(He.id.toString())}Me($e.lead?.email||De),$e.lead&&ae(String($e.leadId)),Array.isArray($e.items)&&$t($e.items.map(He=>({description:He.name||He.description||"",longDescription:He.description||"",quantity:Number(He.quantity||1),unit:He.unit||"Unit",rate:Number(He.unitPrice||0),taxRate:Number(He.taxRate||0),amount:Number(He.totalAmount||0),isOptional:!1,productId:He.productId?String(He.productId):""})))}catch(ke){console.error("Error loading invoice:",ke)}})()},[n,s]),h.useEffect(()=>{const ke=$e=>{j.current&&!j.current.contains($e.target)&&y(null),I.current&&!I.current.contains($e.target)&&D(!1)};return document.addEventListener("mousedown",ke),()=>document.removeEventListener("mousedown",ke)},[]),h.useEffect(()=>{const ke=setTimeout(()=>{k.length>=1?pr(k):S([])},300);return()=>clearTimeout(ke)},[k,H]),h.useEffect(()=>{if(Te){const ke=Vie(Te);ke&&Ne(ke)}},[Te]),h.useEffect(()=>{const ke=a.get("entityType")||null,$e=a.get("entityId");if(!ke||!$e||n)return;const He=parseInt($e);(async()=>{try{if(ke==="lead"){const Ht=await Gt.getLeadById(He),wt=Ht?.data?.lead||Ht?.data||Ht;wt&&(ae(String(wt.id)),Me(wt.email||""),Dt(wt.phone||""),U(wt.address||""),Q(wt.city||""),ge(wt.state||""),xe(wt.country||""),se(wt.zipCode||""),wt?.currency&&Ne(wt.currency))}else if(ke==="deal"){const Ht=await aa.getDealById(He),wt=Ht?.data?.deal||Ht?.data||Ht;wt&&ee(String(wt.id))}}catch(Ht){console.error("Error loading entity:",Ht)}})()},[a,n]);const ia=async()=>{try{const[ke,$e,He,Ht,wt,Rs]=await Promise.all([oe.get("/quotations/template"),oe.get("/business-settings/terms-and-conditions"),oe.get("/leads?page=1&limit=100"),oe.get("/business-settings/all"),oe.get("/products?page=1&limit=100"),Sl.getAll()]);if(ke.data.success){const ye=ke.data.data;u(ye.users||[])}if($e.data.success){const ye=$e.data.data;ue(ye||[])}if(He.data.success){const ye=He.data.data;W(ye.leads||ye.items||[])}if(wt.data.success){const ye=wt.data.data;g(ye.products||ye.items||[])}if(Rs&&N(Rs),Ht.data.success)try{const ye=await oe.get("/invoices/next-number");if(ye.data.success){const Re=ye.data.data.nextNumber;q(Re),K||B(Re)}}catch(ye){console.error("Error fetching next invoice number:",ye)}}catch(ke){console.error("Error fetching initial data:",ke)}},pr=ke=>{if(!ke.trim()){S([]);return}const $e=H.filter(He=>{const Ht=`${He.firstName||""} ${He.lastName||""}`.trim().toLowerCase(),wt=(He.email||"").toLowerCase().includes(ke.toLowerCase());return Ht.includes(ke.trim().toLowerCase())||wt});S($e),D(!0)},cr=ke=>{ae(ke.id.toString());const $e=[ke.firstName,ke.lastName].filter(Boolean),He=$e.length>0?$e.join(" "):ke.email||"Unknown Customer";re(He),E(He),Me(ke.email||""),Dt(ke.phone||""),U(ke.address||""),Q(ke.city||""),ge(ke.state||""),xe(ke.country||""),se(ke.zipCode||""),ke?.currency&&Ne(ke.currency),D(!1),M.success("Customer selected and details auto-filled")},Vr=(ke,$e)=>{const He=[...Ge],Ht=Number($e.price||$e.unitPrice||0),wt=Number($e.taxRate||0),ye=(He[ke].quantity||1)*Ht,Re=ye*(wt/100);He[ke]={...He[ke],description:$e.name||$e.title||"",longDescription:$e.description||"",rate:Ht,unit:$e.unit||"Unit",taxRate:wt,productId:$e.id.toString(),amount:ye+Re},$t(He),y(null),b("")},Ca=()=>{$t([...Ge,{description:"",longDescription:"",quantity:1,unit:"Unit",rate:0,taxRate:0,amount:0,isOptional:!1}])},rr=ke=>{Ge.length>1&&$t(Ge.filter(($e,He)=>He!==ke))},jr=(ke,$e,He)=>{const Ht=[...Ge];Ht[ke]={...Ht[ke],[$e]:He};const wt=Ht[ke],Rs=wt.quantity*wt.rate,ye=Rs*(wt.taxRate/100);wt.amount=Rs+ye,$t(Ht)},Nr=()=>Ge.reduce((ke,$e)=>ke+$e.quantity*$e.rate,0),Fr=()=>Ge.reduce((ke,$e)=>{const He=$e.quantity*$e.rate;return ke+He*($e.taxRate/100)},0),fe=()=>{const ke=Nr();return Nt==="%"?ke*(Qt/100):Qt},Ue=()=>{const ke=Nr(),$e=Fr(),He=fe();return ke+$e-He+Xt},gt=async(ke=!1)=>{if(!J||!De){M.error("Please select a customer and ensure email is filled");return}if(Ge.length===0||Ge.some($e=>!$e.description||$e.rate===0)){M.error("Please add at least one item with description and rate");return}try{o(!0);const $e=fe(),He={invoiceNumber:K||void 0,title:vt||"Invoice",description:vt,status:ke?"Sent":L.toUpperCase(),currency:Ke,dueDate:le||null,notes:vt,terms:R,leadId:J?parseInt(J,10):null,dealId:F?parseInt(F,10):null,createdBy:parseInt(localStorage.getItem("userId")||"1",10),discountAmount:Nt==="fixed"?$e:0,items:Ge.map(wt=>({name:wt.description,description:wt.longDescription,quantity:wt.quantity,unit:wt.unit,unitPrice:wt.rate,taxRate:wt.taxRate,discountRate:Nt==="%"?Qt:0,productId:wt.productId&&!isNaN(parseInt(wt.productId))?parseInt(wt.productId,10):void 0}))},Ht=n?await oe.put(`/invoices/${s}`,{title:vt||"Invoice",status:L.toUpperCase(),currency:Ke,dueDate:le||null,notes:vt,terms:R}):await oe.post("/invoices",He);if(Ht.data.success){if(M.success(`Invoice ${n?"updated":ke?"created and sent":"saved"} successfully!`),ke&&!n){const wt=Ht.data.data?.invoice?.id||Ht.data.data?.id;wt&&await oe.put(`/invoices/${wt}/send`)}e("/invoices")}}catch($e){console.error("Error creating invoice:",$e),console.error("Payload was:",{invoiceNumber:K,title:vt,status:L.toUpperCase(),leadId:parseInt(J),items:Ge}),M.error($e.response?.data?.message||"Failed to create invoice")}finally{o(!1)}},ft=Nr(),Et=Fr(),vs=fe(),Xs=Ue();return t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-950",children:t.jsxs("div",{className:"mx-auto px-6 py-6",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:n?"Edit Invoice":"Create New Invoice"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Create professional invoices for your customers and track payments"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(me,{variant:"SECONDARY",onClick:()=>gt(!1),disabled:i,className:"px-4 py-2",children:"Save as Draft"}),t.jsx(me,{variant:"PRIMARY",onClick:()=>gt(!0),loading:i,loadingText:"Saving...",className:"px-6 py-2",children:"Save & Send"})]})]})}),t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsx("div",{className:"space-y-6",children:t.jsxs(Ee,{padding:"lg",children:[t.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[t.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Invoice Number"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("input",{type:"text",value:K||z||"Auto-generated",readOnly:!0,disabled:!0,className:"input-base bg-gray-100 dark:bg-gray-700 cursor-not-allowed"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Auto-generated from Business Settings"})]})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-6",ref:I,children:[t.jsxs("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:[t.jsx("span",{className:"text-red-500",children:"*"})," Customer"]}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{type:"button",onClick:()=>D(!P),className:"w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white hover:border-blue-500 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all flex items-center justify-between group",children:[t.jsx("span",{className:`truncate font-medium ${ne?"":"text-gray-500"}`,children:ne||"Select Customer..."}),t.jsx(xn,{size:16,className:"text-gray-400 group-hover:text-blue-500 flex-shrink-0 ml-2 transition-colors"})]}),P&&t.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl max-h-64 overflow-hidden z-50",children:[t.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:t.jsxs("div",{className:"relative",children:[t.jsx(ma,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:k,onChange:ke=>{E(ke.target.value),pr(ke.target.value)},autoFocus:!0,placeholder:"Search customers...",className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",onClick:ke=>ke.stopPropagation()})]})}),t.jsx("div",{className:"overflow-y-auto max-h-48",children:(k?C:H).length>0?(k?C:H).map(ke=>{const $e=[ke.firstName,ke.lastName].filter(Boolean),He=$e.length>0?$e.join(" "):ke.email||"Unknown Customer",Ht=$e.length>0?$e.map(wt=>wt[0]).join("").toUpperCase():ke.email?.[0]?.toUpperCase()||"?";return t.jsx("button",{type:"button",onClick:()=>cr(ke),className:"w-full text-left px-4 py-3 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-0",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 font-semibold flex items-center justify-center text-xs shrink-0",children:Ht}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:He}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:ke.email})]})]})},ke.id)}):t.jsx("div",{className:"px-4 py-8 text-sm text-gray-500 dark:text-gray-400 text-center",children:t.jsx("p",{children:"No customers found"})})})]})]})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Status"}),t.jsxs("select",{value:L,onChange:ke=>G(ke.target.value),className:"input-base appearance-none",children:[t.jsx("option",{value:"DRAFT",children:"Draft"}),t.jsx("option",{value:"SENT",children:"Sent"}),t.jsx("option",{value:"PAID",children:"Paid"})]})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Assigned"}),t.jsxs("select",{value:T,onChange:ke=>_(ke.target.value),className:"input-base appearance-none",children:[t.jsx("option",{value:"",children:"Select User"}),c.map(ke=>t.jsxs("option",{value:ke.id,children:[ke.firstName," ",ke.lastName]},ke.id))]})]}),t.jsxs("div",{className:"col-span-12",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Address"}),t.jsx("textarea",{value:Z,onChange:ke=>U(ke.target.value),rows:2,className:"input-base"})]}),t.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"City"}),t.jsx("input",{type:"text",value:X,onChange:ke=>Q(ke.target.value),className:"input-base"})]}),t.jsxs("div",{className:"col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"State"}),t.jsx("input",{type:"text",value:V,onChange:ke=>ge(ke.target.value),className:"input-base"})]}),t.jsxs("div",{className:"col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Country"}),t.jsxs("select",{value:Te,onChange:ke=>xe(ke.target.value),className:"input-base appearance-none",children:[t.jsx("option",{value:"",children:"Select Country"}),t.jsx("option",{value:"US",children:"United States"}),t.jsx("option",{value:"IN",children:"India"}),t.jsx("option",{value:"UK",children:"United Kingdom"}),t.jsx("option",{value:"CA",children:"Canada"}),t.jsx("option",{value:"AU",children:"Australia"})]})]}),t.jsxs("div",{className:"col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Zip Code"}),t.jsx("input",{type:"text",value:qe,onChange:ke=>se(ke.target.value),className:"input-base"})]}),t.jsxs("div",{className:"col-span-6",children:[t.jsxs("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:[t.jsx("span",{className:"text-red-500",children:"*"})," Email"]}),t.jsx("input",{type:"email",value:De,onChange:ke=>Me(ke.target.value),className:"input-base",required:!0})]}),t.jsxs("div",{className:"col-span-6",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Phone"}),t.jsx("input",{type:"tel",value:Ct,onChange:ke=>Dt(ke.target.value),className:"input-base"})]}),t.jsxs("div",{className:"col-span-3",children:[t.jsxs("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:[t.jsx("span",{className:"text-red-500",children:"*"})," Invoice Date"]}),t.jsx("input",{type:"date",value:Mt,onChange:ke=>jt(ke.target.value),className:"input-base",required:!0})]}),t.jsxs("div",{className:"col-span-3",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Due Date"}),t.jsx("input",{type:"date",value:le,onChange:ke=>Xe(ke.target.value),className:"input-base",min:Mt})]}),t.jsxs("div",{className:"col-span-3",children:[t.jsxs("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:[t.jsx("span",{className:"text-red-500",children:"*"})," Currency"]}),r?.supportedCurrencies?.length?r.supportedCurrencies.map(ke=>t.jsx("option",{value:ke,children:ke},ke)):t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"USD",children:"USD $"}),t.jsx("option",{value:"INR",children:"INR "}),t.jsx("option",{value:"EUR",children:"EUR "}),t.jsx("option",{value:"GBP",children:"GBP "})]})]}),t.jsxs("div",{className:"col-span-3",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Discount Type"}),t.jsxs("select",{value:Nt,onChange:ke=>_t(ke.target.value),className:"input-base appearance-none",children:[t.jsx("option",{value:"none",children:"No discount"}),t.jsx("option",{value:"%",children:"Percentage"}),t.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]})]}),t.jsx("div",{className:"mt-6 border-t border-gray-200 dark:border-gray-700 pt-4",children:t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(me,{variant:"SECONDARY",onClick:()=>{sessionStorage.setItem("invoice_draft",JSON.stringify({invoiceNumber:K,customerId:J,status:L,assignedTo:T,address:Z,city:X,state:V,country:Te,zipCode:qe,email:De,phone:Ct,invoiceDate:Mt,dueDate:le,currency:Ke,items:Ge,discountType:Nt,discountValue:Qt,adjustmentValue:Xt})),e("/products?returnTo=invoice")},className:"inline-flex items-center gap-2 text-xs",children:[t.jsx(_n,{size:14}),"Add from Catalog"]}),t.jsx("button",{type:"button",onClick:Ca,className:"p-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors",children:t.jsx(Rt,{size:14})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Show quantity as:"}),t.jsxs("div",{className:"flex border border-gray-300 dark:border-gray-600 rounded overflow-hidden",children:[t.jsx("button",{type:"button",onClick:()=>lr("Qty"),className:`px-3 py-1 text-xs ${Ft==="Qty"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:"Qty"}),t.jsx("button",{type:"button",onClick:()=>lr("Hours"),className:`px-3 py-1 text-xs border-l border-gray-300 dark:border-gray-600 ${Ft==="Hours"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:"Hours"}),t.jsx("button",{type:"button",onClick:()=>lr("Qty/Hours"),className:`px-3 py-1 text-xs border-l border-gray-300 dark:border-gray-600 ${Ft==="Qty/Hours"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:"Qty/Hours"})]})]})]})}),t.jsx("div",{className:"overflow-visible border border-gray-200 dark:border-gray-700 rounded-lg",children:t.jsx("div",{className:"overflow-visible",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-12",children:t.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[200px]",children:"Product"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[150px]",children:"Description"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-24",children:"Qty"}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-20",children:"Unit"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-28",children:"Rate"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-20",children:"Tax %"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-32",children:"Amount"}),t.jsx("th",{className:"px-4 py-3 w-12"})]})}),t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Ge.map((ke,$e)=>t.jsxs("tr",{className:"relative",children:[t.jsx("td",{className:"px-4 py-3 align-top",children:t.jsx("input",{type:"checkbox",checked:ke.isOptional,onChange:He=>jr($e,"isOptional",He.target.checked),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 mt-2"})}),t.jsxs("td",{className:"px-4 py-3 align-top relative",ref:f===$e?j:null,children:[t.jsxs("button",{type:"button",onClick:()=>{y(f===$e?null:$e),b("")},className:"w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white hover:border-blue-500 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all flex items-center justify-between group",children:[t.jsx("span",{className:"truncate font-medium",children:ke.description||"Select Product..."}),t.jsx(xn,{size:16,className:"text-gray-400 group-hover:text-blue-500 flex-shrink-0 ml-2 transition-colors"})]}),f===$e&&t.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl max-h-64 overflow-hidden z-[100]",children:[t.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:t.jsx("input",{type:"text",placeholder:"Search products...",value:p,onChange:He=>b(He.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",onClick:He=>He.stopPropagation(),autoFocus:!0})}),t.jsxs("div",{className:"overflow-y-auto max-h-60",children:[m.filter(He=>!p||(He.name||He.title||"").toLowerCase().includes(p.toLowerCase())||(He.description||"").toLowerCase().includes(p.toLowerCase())).map(He=>t.jsx("button",{type:"button",onClick:()=>Vr($e,He),className:"w-full text-left px-4 py-3 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-0",children:t.jsx("div",{className:"flex items-center justify-between gap-2",children:t.jsx("div",{className:"min-w-0",children:t.jsx("div",{className:"font-semibold text-gray-900 dark:text-white truncate text-sm",children:He.name||He.title})})})},He.id)),m.length===0&&t.jsxs("div",{className:"px-4 py-8 text-sm text-gray-500 dark:text-gray-400 text-center",children:[t.jsx(_n,{size:32,className:"mx-auto mb-2 text-gray-300 dark:text-gray-600"}),t.jsx("p",{children:"No products found"}),t.jsx("button",{type:"button",onClick:()=>e("/products?returnTo=invoice"),className:"mt-3 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Browse Products"})]})]})]})]}),t.jsx("td",{className:"px-4 py-3 align-top",children:t.jsx("input",{type:"text",value:ke.longDescription,onChange:He=>jr($e,"longDescription",He.target.value),className:"input-base text-sm",placeholder:"Details..."})}),t.jsx("td",{className:"px-4 py-3 align-top",children:t.jsx("input",{type:"number",min:"0",value:ke.quantity,onChange:He=>jr($e,"quantity",parseFloat(He.target.value)||0),className:"input-base text-right text-sm"})}),t.jsx("td",{className:"px-4 py-3 align-top",children:t.jsx("input",{type:"text",value:ke.unit,onChange:He=>jr($e,"unit",He.target.value),className:"input-base text-center text-sm"})}),t.jsx("td",{className:"px-4 py-3 align-top",children:t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:Ke}),t.jsx("input",{type:"number",min:"0",step:"0.01",value:ke.rate,onChange:He=>jr($e,"rate",parseFloat(He.target.value)||0),className:"input-base pl-8 text-right text-sm"})]})}),t.jsx("td",{className:"px-4 py-3 align-top",children:t.jsxs("select",{value:ke.taxRate,onChange:He=>jr($e,"taxRate",parseFloat(He.target.value)),className:"input-base text-right text-sm appearance-none",children:[t.jsx("option",{value:"0",children:"No Tax"}),v.filter(He=>He.isActive).map(He=>t.jsxs("option",{value:He.rate,children:[He.name," (",He.rate,"%)"]},He.id))]})}),t.jsxs("td",{className:"px-4 py-3 align-top text-right font-medium text-gray-900 dark:text-white pt-3",children:[Ke," ",ke.amount.toFixed(2)]}),t.jsx("td",{className:"px-4 py-3 align-top text-center pt-3",children:t.jsx("button",{type:"button",onClick:()=>rr($e),className:"text-gray-400 hover:text-red-500 transition-colors p-1",children:t.jsx(ht,{size:16})})})]},$e))})]})})})]})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx("div",{className:"space-y-6",children:t.jsx(Ee,{padding:"lg",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:" Notes & Payment Terms"}),t.jsx("textarea",{value:vt,onChange:ke=>Ot(ke.target.value),placeholder:"Add notes...",rows:4,className:"input-base"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:" Terms & Conditions"}),t.jsxs("select",{value:Pe,onChange:ke=>{const $e=ke.target.value;if(pe($e),$e){const He=de.find(Ht=>Ht.id.toString()===$e);He&&(Ve(He.content),ce(He.content))}else Ve(""),ce("")},className:"input-base appearance-none",children:[t.jsx("option",{value:"",children:"Select Terms & Conditions Template"}),de.filter(ke=>ke.isActive).map(ke=>t.jsxs("option",{value:ke.id,children:[ke.name," ",ke.isDefault?"(Default)":""]},ke.id))]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choose a template or leave empty to use default terms"})]}),Pe&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Selected Template Content"}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 max-h-32 overflow-y-auto",children:t.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:ve})})]})]})})}),t.jsx("div",{className:"space-y-6",children:t.jsx(Ee,{padding:"lg",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Sub total"}),t.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:[Ke," ",ft.toFixed(2)]})]}),Et>0&&t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Tax"}),t.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:[Ke," ",Et.toFixed(2)]})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Discount"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",value:Qt,onChange:ke=>qt(parseFloat(ke.target.value)||0),min:"0",step:"0.01",className:"w-20 px-2 py-1 text-xs text-right border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white"}),t.jsxs("select",{value:Nt,onChange:ke=>_t(ke.target.value),className:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"%",children:"%"}),t.jsx("option",{value:"fixed",children:Ke})]}),t.jsxs("span",{className:"text-red-600 dark:text-red-400 font-medium",children:["-",Ke," ",vs.toFixed(2)]})]})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Adjustment"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",value:Xt,onChange:ke=>Ut(parseFloat(ke.target.value)||0),step:"0.01",className:"w-20 px-2 py-1 text-xs text-right border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white"}),t.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[Ke," ",Xt.toFixed(2)]})]})]}),t.jsxs("div",{className:"pt-3 mt-1 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[t.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:"Total"}),t.jsxs("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[Ke," ",Xs.toFixed(2)]})]}),t.jsxs("div",{className:"flex gap-2 pt-2",children:[t.jsx(me,{variant:"SECONDARY",fullWidth:!0,onClick:()=>gt(!1),disabled:i,children:"Save"}),t.jsx(me,{variant:"PRIMARY",fullWidth:!0,onClick:()=>gt(!0),loading:i,children:"Save & Send"})]})]})})})]})]}),t.jsx("div",{className:"h-8"})]})})},Kie="modulepreload",Gie=function(e){return"/"+e},OP={},Yie=function(r,a,s){let n=Promise.resolve();if(a&&a.length>0){let m=function(g){return Promise.all(g.map(f=>Promise.resolve(f).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var o=m;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");n=m(a.map(g=>{if(g=Gie(g),g in OP)return;OP[g]=!0;const f=g.endsWith(".css"),y=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${y}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":Kie,f||(p.as="script"),p.crossOrigin="",p.href=g,u&&p.setAttribute("nonce",u),document.head.appendChild(p),f)return new Promise((b,j)=>{p.addEventListener("load",b),p.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${g}`)))})}))}function i(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return n.then(c=>{for(const u of c||[])u.status==="rejected"&&i(u.reason);return r().catch(i)})},HI=({isOpen:e,onClose:r,onConvert:a,lead:s,isConverting:n})=>{const{dealStatuses:i}=Hr(),[o,c]=h.useState({createContact:!1,createCompany:!1,createDeal:!1,contactData:{},companyData:{},dealData:{currency:"USD",status:"",probability:50}});h.useEffect(()=>{s&&c(g=>({...g,contactData:{firstName:s.firstName,lastName:s.lastName,email:s.email,phone:s.phone||"",company:s.company||"",position:s.position||"",notes:s.notes||"",website:s?.website||""},dealData:{...g.dealData,title:`Deal with ${s.firstName} ${s.lastName}`,description:"Deal opportunity from lead conversion",value:s?.budget??s?.value??void 0,currency:s?.currency||g.dealData.currency,status:g.dealData.status||(i?.length>0?i.find(f=>f.isActive)?.name||i[0].name:"DRAFT")}}))},[s,i]);const u=(g,f,y)=>{if(g==="createDeal")c(p=>({...p,[g]:y}));else{if(g==="createContact"||g==="createCompany")return;c(p=>({...p,[g]:{...p[g],[f]:y}}))}},m=async g=>{if(g.preventDefault(),!o.createDeal){M.error("Please select Create Deal to convert the lead");return}if(o.createDeal&&!o.dealData.title){M.error("Deal title is required");return}try{const f={...o,createContact:!1,contactData:Object.fromEntries(Object.entries(o.contactData).filter(([y,p])=>p!==""&&p!==null&&p!==void 0)),companyData:Object.fromEntries(Object.entries(o.companyData).filter(([y,p])=>p!==""&&p!==null&&p!==void 0)),dealData:Object.fromEntries(Object.entries(o.dealData).filter(([y,p])=>p!==""&&p!==null&&p!==void 0))};await a(f)}catch{}};return!e||!s?null:t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:t.jsx("div",{className:"relative mx-auto p-5 border max-w-4xl w-full shadow-lg rounded-md bg-white dark:bg-gray-800",children:t.jsxs("form",{onSubmit:m,className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 dark:border-gray-700 pb-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:t.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center",children:t.jsxs("span",{className:"text-white font-medium text-sm",children:[s.firstName[0],s.lastName[0]]})})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:["Convert Lead: ",s.firstName," ",s.lastName]}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.email,"  ",s.company||"No company"]})]})]}),t.jsx("button",{type:"button",onClick:r,disabled:n,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50",children:t.jsx(da,{className:"h-5 w-5"})})]}),t.jsx("div",{className:"grid grid-cols-1 gap-6",children:t.jsxs("div",{className:`border rounded-lg p-4 ${o.createDeal?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700"}`,children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("input",{type:"checkbox",checked:o.createDeal,onChange:g=>u("createDeal","",g.target.checked),disabled:n,className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Qr,{className:"h-5 w-5 text-purple-600"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Create Deal"})]})]}),o.createDeal&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Deal Title *"}),t.jsx("input",{type:"text",value:o.dealData.title||"",onChange:g=>u("dealData","title",g.target.value),disabled:n,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Value"}),t.jsx("input",{type:"number",value:o.dealData.value||"",onChange:g=>u("dealData","value",parseFloat(g.target.value)||0),min:"0",step:"0.01",disabled:n,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Currency"}),t.jsx("div",{className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-300 flex items-center",children:t.jsx("span",{className:"font-medium",children:o.dealData.currency||"USD"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Probability (%)"}),t.jsx("input",{type:"number",value:o.dealData.probability||50,onChange:g=>u("dealData","probability",parseInt(g.target.value)||0),min:"0",max:"100",disabled:n,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),t.jsx("select",{value:o.dealData.status,onChange:g=>u("dealData","status",g.target.value),disabled:n,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:(i||[]).filter(g=>g.isActive).map(g=>t.jsx("option",{value:g.name,children:g.name},g.id))})]})]})]})}),t.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(ur,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{className:"text-blue-800 dark:text-blue-200 font-medium",children:"Conversion Summary"}),t.jsxs("ul",{className:"text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[t.jsx("li",{children:' The lead status will be changed to "Converted"'}),o.createDeal&&t.jsx("li",{children:" A new deal/opportunity will be created and linked"})]})]})]})}),t.jsxs("div",{className:"flex justify-end space-x-3 border-t border-gray-200 dark:border-gray-700 pt-4",children:[t.jsx("button",{type:"button",onClick:r,disabled:n,className:"px-6 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:n||!o.createDeal,className:"px-6 py-2 bg-[#ef444e] text-white text-sm font-medium rounded-lg hover:bg-[#f26971] focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:n?t.jsxs(t.Fragment,{children:[t.jsx(Ro,{className:"h-4 w-4 animate-spin"}),t.jsx("span",{children:"Converting..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(ct,{className:"h-4 w-4"}),t.jsx("span",{children:"Convert Lead"})]})})]})]})})})},zn=({currentPage:e,totalPages:r,totalItems:a,onPageChange:s,itemsPerPage:n=50,showItemsPerPage:i=!0,className:o=""})=>{if(r<=1)return null;const u=(()=>{const y=[],p=[];for(let b=Math.max(2,e-2);b<=Math.min(r-1,e+2);b++)y.push(b);return e-2>2?p.push(1,"..."):p.push(1),p.push(...y),e+2<r-1?p.push("...",r):p.push(r),p})(),m=(e-1)*n+1,g=Math.min(e*n,a);return t.jsx("div",{className:`px-6 py-4 border-t border-gray-100 dark:border-gray-700 ${o}`,children:t.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[i&&t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:m})," to"," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:g})," of"," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a})," results"]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsxs("button",{onClick:()=>s(e-1),disabled:e===1,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-500 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-700 dark:hover:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white dark:disabled:hover:bg-gray-800 transition-all duration-200",title:"Previous page",children:[t.jsx(Kw,{className:"h-4 w-4"}),t.jsx("span",{className:"ml-1 hidden sm:inline",children:"Previous"})]}),t.jsx("div",{className:"flex items-center space-x-1",children:u.map((f,y)=>{if(f==="...")return t.jsx("span",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:"..."},`dots-${y}`);const p=f,b=p===e;return t.jsx("button",{onClick:()=>s(p),className:`px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${b?"bg-[#ef444e] text-white shadow-sm hover:bg-[#f26971]":"text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,children:p},p)})}),t.jsxs("button",{onClick:()=>s(e+1),disabled:e===r,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-500 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-700 dark:hover:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white dark:disabled:hover:bg-gray-800 transition-all duration-200",title:"Next page",children:[t.jsx("span",{className:"mr-1 hidden sm:inline",children:"Next"}),t.jsx(Vc,{className:"h-4 w-4"})]})]})]})})},Kl=({rows:e=5,columns:r=6})=>t.jsxs("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:[Array.from({length:e}).map((a,s)=>t.jsx("tr",{children:Array.from({length:r}).map((n,i)=>t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"w-full",children:t.jsx("div",{className:"h-2 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden",children:t.jsx("div",{className:"h-full w-2/3 bg-gradient-to-r from-[#EF444E]/30 via-[#ff5a64]/40 to-[#EF444E]/30 animate-[shimmer_1.6s_infinite]"})})})},i))},s)),t.jsx("style",{children:`
        @keyframes shimmer {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
      `})]}),ya=({label:e,column:r,sortBy:a,sortOrder:s,onChange:n,className:i=""})=>{const o=a===r;return t.jsxs("button",{type:"button",onClick:()=>n(r),className:`inline-flex items-center gap-1 select-none ${i}`,children:[t.jsx("span",{children:e}),o?s==="asc"?t.jsx(sD,{className:"w-3 h-3"}):t.jsx(xn,{className:"w-3 h-3"}):null]})},IP=e=>[{value:"new",label:"New",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"},{value:"contacted",label:"Contacted",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"},{value:"qualified",label:"Qualified",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"},{value:"proposal",label:"Proposal",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300"},{value:"negotiation",label:"Negotiation",color:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300"},{value:"closed",label:"Closed",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"},{value:"lost",label:"Lost",color:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"},{value:"converted",label:"Converted",color:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300"}].find(s=>s.value===e)?.color||"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",Qie=()=>{const{t:e}=wn(),r=mt(),{refreshLeadsCount:a,refreshDealsCount:s}=jn(),[n,i]=h.useState([]),[o,c]=h.useState(!0),[u,m]=h.useState(null),[g,f]=h.useState("list"),[y,p]=h.useState({page:1,limit:10}),[b,j]=h.useState({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10}),[v,N]=h.useState(1),[k,E]=h.useState(!1),[C,S]=h.useState(null),[P,D]=h.useState(!1),[I,H]=h.useState(["name","email","phone","company","status","assignedTo","createdAt"]),[W,K]=h.useState(!1),[B,z]=h.useState(null),[q,J]=h.useState(!1),[ae,ne]=h.useState(!1),[re,L]=h.useState(!1),[G,T]=h.useState(!1),[_,F]=h.useState(!1),[ee,Z]=h.useState(null),[U,X]=h.useState(new Set),[Q,V]=h.useState(!1),[ge,Te]=h.useState(""),[xe,qe]=h.useState([]),[se,De]=h.useState(!1),{searchValue:Me,debouncedSearchValue:Ct,setSearch:Dt,isSearching:Mt}=dd("",500),jt=[{value:"new",label:e("leads.status.new"),color:"bg-blue-100 text-blue-800"},{value:"contacted",label:e("leads.status.contacted"),color:"bg-yellow-100 text-yellow-800"},{value:"qualified",label:e("leads.status.qualified"),color:"bg-green-100 text-green-800"},{value:"proposal",label:e("leads.status.proposal"),color:"bg-purple-100 text-purple-800"},{value:"negotiation",label:e("leads.status.negotiation"),color:"bg-orange-100 text-orange-800"},{value:"closed",label:e("leads.status.closed"),color:"bg-green-100 text-green-800"},{value:"lost",label:e("leads.status.lost"),color:"bg-red-100 text-red-800"},{value:"converted",label:e("leads.status.converted"),color:"bg-emerald-100 text-emerald-800"}],le=!!Ct,Xe=!!y.status,Ke=fe=>I.includes(fe),[Ne,Nt]=h.useState("createdAt"),[_t,vt]=h.useState("desc"),Ot=fe=>{Nt(Ue=>Ue===fe?(vt(gt=>gt==="asc"?"desc":"asc"),Ue):(vt("asc"),fe))},R=Fe.useMemo(()=>{const fe=[...n],Ue=_t==="asc"?1:-1,gt=ft=>{switch(Ne){case"name":return`${ft.firstName} ${ft.lastName}`.toLowerCase();case"email":return ft.email?.toLowerCase()||"";case"phone":return ft.phone||"";case"company":return ft.company?.toLowerCase()||"";case"status":return ft.status||"";case"createdAt":default:return ft.createdAt||""}};return fe.sort((ft,Et)=>String(gt(ft)).localeCompare(String(gt(Et)))*Ue)},[n,Ne,_t]);h.useEffect(()=>{ce()},[Ct,y.status,y.limit,v]),h.useEffect(()=>{try{const fe=localStorage.getItem("leads_visible_columns");if(fe){const Ue=JSON.parse(fe);Array.isArray(Ue)&&Ue.every(gt=>typeof gt=="string")&&H(Ue)}}catch{}},[]),h.useEffect(()=>{try{localStorage.setItem("leads_visible_columns",JSON.stringify(I))}catch{}},[I]);const ce=async()=>{try{c(!0);const fe=await Gt.getLeads({...y,page:v,search:Ct}),Ue=fe?.data?.leads??fe?.data?.items??[];i(Ue);const gt=fe?.data?.pagination??(fe?.data?.total!=null?{totalItems:fe.data.total,currentPage:fe.data.page??1,pageSize:fe.data.limit??Ue.length??0,totalPages:Math.ceil((fe.data.total||0)/(fe.data.limit||1))}:null);j(gt),m(null)}catch(fe){const Ue=fe?.response?.data?.message||e("leads.fetchError");m(Ue),M.error(Ue,{toastId:"leads_fetch_error"})}finally{c(!1)}},de=(fe,Ue)=>{p(gt=>({...gt,[fe]:Ue})),N(1)},ue=fe=>{Dt(fe),N(1)},Pe=fe=>{N(fe),window.scrollTo({top:0,behavior:"smooth"})},pe=()=>{r("/leads/new")},ve=fe=>{r(`/leads/${fe.id}`)},Ve=fe=>{r(`/leads/${fe.id}/edit`)},Ge=fe=>{S(fe),E(!0)},$t=async()=>{if(C){D(!0);try{await Gt.deleteLead(C.id),await a(),E(!1),S(null),M.success(e("leads.deleteSuccess")),ce()}catch(fe){const Ue=fe.response?.data?.message||e("leads.deleteError");m(Ue),M.error(Ue)}finally{D(!1)}}},Qt=()=>{p({page:1,limit:y.limit||10,status:void 0}),N(1),Dt("")},[qt,Xt]=h.useState({}),Ut=async(fe,Ue)=>{Xt(gt=>({...gt,[fe]:!0}));try{if(Ue==="closed"||Ue==="converted"){const ft=n.find(Et=>Et.id===fe);if(!ft)throw new Error("Lead not found");z(ft),K(!0)}else await Gt.updateLeadStatus(fe,Ue),i(ft=>ft.map(Et=>Et.id===fe?{...Et,status:Ue}:Et)),M.success("Lead status updated successfully");await a(),await s()}catch(gt){const ft=gt?.response?.data?.message||"Failed to update status";M.error(ft)}finally{Xt(gt=>({...gt,[fe]:!1}))}},Ft=fe=>{const Ue=new Set(U);Ue.has(fe)?Ue.delete(fe):Ue.add(fe),X(Ue)},lr=()=>{U.size===n.length?X(new Set):X(new Set(n.map(fe=>fe.id)))},ia=async()=>{if(!ge){M.error("Please select a user to assign to");return}if(U.size===0){M.error("Please select at least one lead to assign");return}De(!0);try{const fe=Array.from(U),Ue=ge==="unassigned"?null:parseInt(ge);await Gt.bulkAssignLeads(fe,Ue),i(gt=>gt.map(ft=>U.has(ft.id)?{...ft,assignedTo:Ue??void 0}:ft)),X(new Set),V(!1),Te(""),await a(),M.success(`Successfully assigned ${fe.length} leads`)}catch(fe){const Ue=fe?.response?.data?.message||"Failed to bulk assign leads";M.error(Ue)}finally{De(!1)}};h.useEffect(()=>{(async()=>{try{const{userService:Ue}=await Yie(async()=>{const{userService:Et}=await Promise.resolve().then(()=>p9);return{userService:Et}},void 0),gt=await Ue.getUsers({page:1,limit:100}),ft=gt?.data?.users||gt?.data||gt?.users||[];qe(ft.map(Et=>({id:Et.id,firstName:Et.firstName,lastName:Et.lastName})))}catch(Ue){console.error("Failed to fetch users:",Ue)}})()},[]);const pr=()=>{try{const Ue=["firstName","lastName","email","phone","company","position","status","website","industry","companySize","annualRevenue","budget","currency","priority","leadScore","address","city","state","country","zipCode","linkedinProfile","timezone","preferredContactMethod","notes"].join(",")+`
`,gt=new Blob([Ue],{type:"text/csv;charset=utf-8;"}),ft=window.URL.createObjectURL(gt),Et=document.createElement("a");Et.href=ft,Et.download="leads_template.csv",document.body.appendChild(Et),Et.click(),window.URL.revokeObjectURL(ft),document.body.removeChild(Et),M.success("CSV template downloaded successfully")}catch{M.error("Failed to generate CSV template")}},cr=fe=>{const Ue=fe.target.files?.[0];if(Ue){if(Ue.type!=="text/csv"&&!Ue.name.endsWith(".csv")){M.error("Please select a CSV file");return}if(Ue.size>10*1024*1024){M.error("File size must be less than 10MB");return}Z(Ue)}},Vr=async()=>{if(!ee){M.error("Please select a CSV file to import");return}L(!0);try{const fe=new FormData;fe.append("csvFile",ee);const Ue=await fetch("/api/leads/bulk/import",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(At.AUTH_TOKEN)}`},body:fe}),gt=Ue.headers.get("content-type");if(!gt||!gt.includes("application/json"))throw(await Ue.text()).includes("<!DOCTYPE")?new Error("Server returned an error page. Please check the server logs."):new Error("Invalid response format from server");const ft=await Ue.json();if(!Ue.ok)throw new Error(ft.message||"Import failed");if(ft.data?.errors&&ft.data.errors.length>0){const Et=ft.data.errors.slice(0,3).map(vs=>`Row ${vs.row}: ${vs.error}`).join(`
`);M.warning(`${ft.data?.message}

${Et}`,{autoClose:5e3})}else M.success(ft.data?.message||ft.message||"Import completed successfully");ne(!1),Z(null),ce(),a()}catch(fe){console.error("Import error:",fe),M.error(fe.message||"Failed to import leads")}finally{L(!1)}},Ca=async()=>{T(!0);try{const fe=new URLSearchParams;y.status&&fe.append("status",y.status),Ct&&fe.append("search",Ct);const Ue=await fetch(`/api/leads/bulk/export?${fe.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem(At.AUTH_TOKEN)}`}});if(!Ue.ok)throw new Error("Failed to export leads");const gt=await Ue.blob(),ft=window.URL.createObjectURL(gt),Et=document.createElement("a");Et.href=ft,Et.download=`leads_export_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(Et),Et.click(),window.URL.revokeObjectURL(ft),document.body.removeChild(Et),M.success("Leads exported successfully")}catch{M.error("Failed to export leads")}finally{T(!1)}},rr=async()=>{F(!0);try{const fe=await fetch("/api/leads/integrations/sync-all",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(At.AUTH_TOKEN)}`,"Content-Type":"application/json"}}),Ue=await fe.json();if(!fe.ok)throw new Error(Ue.message||"Sync failed");M.success("Integrations synced successfully"),ce(),a()}catch(fe){M.error(fe.message||"Failed to sync integrations")}finally{F(!1)}},jr=fe=>{fe.status==="converted"&&M.info("This lead was already converted. You can reconvert; we will handle it automatically."),z(fe),K(!0)},Nr=async fe=>{if(B){J(!0);try{const Ue={...fe,dealData:{...fe.dealData,status:fe.dealData?.status}};await Gt.convertLead(B.id,Ue),M.success("Lead converted successfully!"),K(!1),z(null),ce(),await Promise.all([a(),s()])}catch(Ue){const gt=Ue.response?.data?.message||"Failed to convert lead";if((/already\s*converted/i.test(gt)||Ue?.response?.status===409)&&B)try{const Et={...fe,dealData:{...fe.dealData,status:fe.dealData?.status}};await Gt.convertLeadForce(B.id,Et),M.success("Lead converted successfully!"),K(!1),z(null),ce(),await Promise.all([a(),s()]);return}catch(Et){try{await Gt.updateLeadStatus(B.id,"qualified");const vs={...fe,dealData:{...fe.dealData,status:fe.dealData?.status}};await Gt.convertLead(B.id,vs),M.success("Lead converted successfully!"),K(!1),z(null),ce(),await Promise.all([a(),s()]);return}catch(vs){const Xs=vs?.response?.data?.message||Et?.response?.data?.message||gt;M.error(Xs)}}else M.error(gt)}finally{J(!1)}}},Fr=le&&Xe?"No leads match your search and filters. Try adjusting your filters or search terms. You can also clear all filters to see all leads.":le?"No leads found for your search. Try adjusting your search terms. You can also clear all filters to see all leads.":Xe?"No leads found for the selected filters. Try adjusting your filters or clear all filters to see all leads.":"No leads found.";return t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx(Sd,{title:"Leads",subtitle:"Capture and manage your incoming opportunities",addLabel:"Add Lead",onAdd:pe,bulkActions:[{label:"Download Template",onClick:pr,icon:t.jsx(Uo,{className:"w-4 h-4"})},{label:"Import Leads",onClick:()=>ne(!0),icon:t.jsx(Ri,{className:"w-4 h-4"})},{label:"Export Leads",onClick:Ca,icon:t.jsx(Uo,{className:"w-4 h-4"}),disabled:G},{label:"Sync Integrations",onClick:rr,icon:t.jsx(Ro,{className:"w-4 h-4"}),disabled:_},...U.size>0?[{label:`Bulk Assign (${U.size})`,onClick:()=>V(!0),icon:t.jsx(xt,{className:"w-4 h-4"})}]:[]]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4",children:[t.jsxs("div",{className:"",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t.jsxs("div",{className:"flex items-center gap-2",children:[e("common.search"),Mt&&t.jsxs("span",{className:"text-xs text-blue-500 flex items-center gap-1",children:[t.jsx(ma,{className:"h-3 w-3"}),"Searching..."]})]})}),t.jsx(kd,{value:Me,onChange:ue,placeholder:e("leads.searchLeads"),className:"max-w-full"})]}),t.jsx("div",{className:"w-full sm:w-48 sm:min-w-[220px]",children:t.jsx(Yr,{label:e("leads.form.status"),value:y.status||"",onChange:fe=>de("status",fe),options:[{value:"",label:e("leads.form.allStatuses")},...jt.map(fe=>({value:fe.value,label:fe.label}))]})}),t.jsx("div",{className:"w-full sm:w-48 sm:min-w-[200px]",children:t.jsx(Yr,{label:e("leads.form.itemsPerPage"),value:String(y.limit||10),onChange:fe=>de("limit",Number(fe)),options:[{value:"5",label:"5"},{value:"10",label:"10"},{value:"20",label:"20"},{value:"50",label:"50"}]})})]}),t.jsxs("div",{className:"hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto",children:[t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${g==="list"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>f("list"),title:"List view",children:t.jsx(gi,{className:"w-4 h-4"})}),t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${g==="card"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>f("card"),title:"Card view",children:t.jsx(mi,{className:"w-4 h-4"})})]})]}),g==="card"?t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 transition-all duration-300 p-6",children:[n.length===0?t.jsx(qr,{title:u?"Network or server error":"No leads found",description:u?typeof u=="string"?u:String(u):Fr,icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),showClearButton:!u&&(le||Xe),onClear:u?void 0:Qt,isError:!!u}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:R.map(fe=>t.jsxs("div",{className:"rounded-lg border shadow-sm hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",style:{minHeight:"280px"},children:[t.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:[t.jsx("div",{className:"flex items-center justify-between mb-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-[#EF444E] to-[#ff5a64] rounded-lg shadow-2xl",children:t.jsx(xt,{className:"h-5 w-5 text-white"})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[fe.firstName," ",fe.lastName]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:fe.company||"No company"})]})]})}),t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium ${IP(fe.status)}`,children:fe.status})})]}),t.jsx("div",{className:"p-4 flex-1",children:t.jsxs("div",{className:"space-y-2",children:[fe.email&&t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-1.5",children:[t.jsx(ir,{className:"h-3 w-3 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:fe.email})]}),fe.phone&&t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-1.5",children:[t.jsx(ba,{className:"h-3 w-3 flex-shrink-0"}),t.jsx("span",{children:fe.phone})]}),fe.assignedUser&&t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-1.5",children:[t.jsx(xt,{className:"h-3 w-3 flex-shrink-0"}),t.jsxs("span",{children:[fe.assignedUser.firstName," ",fe.assignedUser.lastName]})]}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1.5",children:[t.jsx(nr,{className:"h-3 w-3 flex-shrink-0"}),t.jsx("span",{children:new Date(fe.createdAt).toLocaleDateString()})]})]})}),t.jsx("div",{className:"px-4 pb-4 pt-3 border-t border-gray-100 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>ve(fe),className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",title:"View Lead",children:t.jsx(Bt,{className:"h-4 w-4"})}),fe.status!=="converted"&&t.jsx("button",{onClick:()=>jr(fe),className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded transition-colors",title:"Convert Lead",children:t.jsx(N2,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>Ve(fe),className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Edit Lead",children:t.jsx(er,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ge(fe),className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete Lead",children:t.jsx(ht,{className:"h-4 w-4"})})]})]})})]},fe.id))}),n.length>0&&t.jsx("div",{className:"mt-6",children:t.jsx(zn,{currentPage:b.currentPage,totalPages:b.totalPages,totalItems:b.totalItems,onPageChange:Pe,itemsPerPage:b.itemsPerPage||y.limit||10})})]}):t.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl shadow border border-gray-200 dark:border-gray-700  transition-all duration-300",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"mb-4",children:t.jsx(to,{currentPage:b.currentPage,itemsPerPage:b.itemsPerPage||y.limit||10,totalItems:b.totalItems||n.length,onItemsPerPageChange:fe=>de("limit",fe),columnConfig:{columns:[{id:"name",label:"Lead"},{id:"email",label:"Email"},{id:"phone",label:"Phone"},{id:"company",label:"Company"},{id:"status",label:"Status"},{id:"assignedTo",label:"Assigned To"},{id:"createdAt",label:"Created"}],visibleColumns:I,onChange:H,minVisible:1}})}),t.jsx("div",{className:"overflow-hidden relative",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 mobile-card-view table-fixed",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:"w-12 px-4 py-3 text-start",children:t.jsx("input",{type:"checkbox",checked:U.size===n.length&&n.length>0,onChange:lr,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${Ke("name")?"":"hidden"}`,children:t.jsx(ya,{label:e("leads.table.lead"),column:"name",sortBy:Ne,sortOrder:_t,onChange:fe=>Ot(fe)})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${Ke("email")?"":"hidden"}`,children:t.jsx(ya,{label:e("leads.form.email"),column:"email",sortBy:Ne,sortOrder:_t,onChange:fe=>Ot(fe)})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${Ke("phone")?"":"hidden"}`,children:t.jsx(ya,{label:"Phone",column:"phone",sortBy:Ne,sortOrder:_t,onChange:fe=>Ot(fe)})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${Ke("company")?"":"hidden"}`,children:t.jsx(ya,{label:e("leads.table.company"),column:"company",sortBy:Ne,sortOrder:_t,onChange:fe=>Ot(fe)})}),t.jsx("th",{className:`px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${Ke("status")?"":"hidden"}`,children:t.jsx("div",{className:"flex items-center justify-center",children:t.jsx(ya,{label:e("leads.table.status"),column:"status",sortBy:Ne,sortOrder:_t,onChange:fe=>Ot(fe)})})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${Ke("assignedTo")?"":"hidden"}`,children:e("leads.table.assignedTo")}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${Ke("createdAt")?"":"hidden"}`,children:t.jsx(ya,{label:e("leads.table.created"),column:"createdAt",sortBy:Ne,sortOrder:_t,onChange:fe=>Ot(fe)})}),t.jsx("th",{className:"px-6 py-3 text-end text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:e("leads.table.actions")})]})}),o?t.jsx(Kl,{rows:8,columns:8}):t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:n.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:I.length+1,className:"px-6 py-12 text-center",children:t.jsx(qr,{title:u?"Network or server error":"No leads found",description:u?typeof u=="string"?u:String(u):Fr,icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),showClearButton:!u&&(le||Xe),onClear:u?void 0:Qt,isError:!!u})})}):R.map(fe=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsx("td",{className:"w-12 px-4 py-4",children:t.jsx("input",{type:"checkbox",checked:U.has(fe.id),onChange:()=>Ft(fe.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${Ke("name")?"":"hidden"}`,"data-label":"Lead",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:t.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center",children:t.jsxs("span",{className:"text-white font-medium text-sm leading-none",children:[fe.firstName?.[0]||"",fe.lastName?.[0]||""]})})}),t.jsx("div",{className:"min-w-0 flex-1",children:t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.jsxs("button",{onClick:()=>ve(fe),className:"hover:underline hover:text-[#ef444e] text-left truncate",children:[fe.firstName," ",fe.lastName]})})})]})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${Ke("email")?"":"hidden"}`,"data-label":"Email",children:t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1.5",children:[t.jsx(ir,{className:"h-3 w-3 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:fe.email})]})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${Ke("phone")?"":"hidden"}`,"data-label":"Phone",children:t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1.5",children:[t.jsx(ba,{className:"h-3 w-3 flex-shrink-0"}),t.jsx("span",{children:fe.phone||"-"})]})}),t.jsxs("td",{className:`px-6 py-4 whitespace-nowrap ${Ke("company")?"":"hidden"}`,"data-label":"Company",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:fe.company||"-"}),fe.position&&t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1.5 mt-1",children:[t.jsx(zu,{className:"h-3 w-3 flex-shrink-0"}),t.jsx("span",{children:fe.position})]})]}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-center ${Ke("status")?"":"hidden"}`,"data-label":"Status",children:t.jsxs("div",{className:"relative inline-flex items-center justify-center",children:[t.jsx("select",{value:fe.status,onChange:Ue=>Ut(fe.id,Ue.target.value),disabled:qt[fe.id],style:{WebkitAppearance:"none",backgroundImage:"none",lineHeight:"1.5",textAlign:"center",textAlignLast:"center"},className:`pr-5 pl-3 text-xs font-semibold rounded-full py-1 border-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed disabled:opacity-50 text-center leading-tight ${IP(fe.status)}`,children:jt.map(Ue=>t.jsx("option",{value:Ue.value,children:Ue.label},Ue.value))}),t.jsx(xn,{className:"pointer-events-none absolute right-1 top-1/2 -translate-y-1/2 h-3 w-3 text-blue-800/80 dark:text-blue-300/80"}),qt[fe.id]&&t.jsx("div",{className:"absolute right-1 top-1 w-3 h-3",children:t.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-current"})})]})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 ${Ke("assignedTo")?"":"hidden"}`,"data-label":"Assigned to",children:fe.assignedUser?`${fe.assignedUser.firstName} ${fe.assignedUser.lastName}`:"-"}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 ${Ke("createdAt")?"":"hidden"}`,"data-label":"Created",children:t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(nr,{className:"h-3 w-3 flex-shrink-0"}),t.jsx("span",{children:new Date(fe.createdAt).toLocaleDateString()})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-end text-sm font-medium","data-label":"Actions",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx("button",{onClick:()=>ve(fe),className:"text-green-600 hover:text-green-900 p-1 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",title:"View Lead",children:t.jsx(Bt,{className:"h-4 w-4"})}),fe.status!=="converted"&&t.jsx("button",{onClick:()=>jr(fe),className:"text-purple-600 hover:text-purple-900 p-1 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded transition-colors",title:"Convert Lead",children:t.jsx(N2,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ve(fe),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:e("common.edit"),children:t.jsx(er,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ge(fe),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:e("common.delete"),children:t.jsx(ht,{className:"h-4 w-4"})})]})})]},fe.id))})]})})}),t.jsx(zn,{currentPage:b.currentPage,totalPages:b.totalPages,totalItems:b.totalItems,onPageChange:Pe,itemsPerPage:b.itemsPerPage||y.limit||10})]})}),t.jsx(vm,{open:k&&!!C,title:e("leads.deleteLead"),description:C?t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:t.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center",children:t.jsxs("span",{className:"text-white font-medium text-sm",children:[C.firstName?.[0]||"",C.lastName?.[0]||""]})})}),t.jsxs("div",{className:"ml-3",children:[t.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[C.firstName," ",C.lastName]}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:C.email})]})]}),t.jsx("p",{children:e("leads.deleteConfirmation")})]}):null,confirmText:e("leads.deleteLead"),cancelText:e("common.cancel"),loading:P,onConfirm:$t,onClose:()=>{P||(E(!1),S(null))}}),ae&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Import Leads from CSV"}),t.jsx("button",{onClick:()=>{re||(ne(!1),Z(null))},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50",disabled:re,children:""})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("p",{className:"mb-2",children:"Upload a CSV file to import multiple leads at once."}),t.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[t.jsx("li",{children:"Use our template for best results"}),t.jsx("li",{children:"Required columns: firstName, lastName, email"}),t.jsx("li",{children:"Maximum file size: 10MB"}),t.jsx("li",{children:"Duplicate emails will be skipped"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select CSV File"}),t.jsx("input",{type:"file",accept:".csv",onChange:cr,disabled:re,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white disabled:opacity-50"}),ee&&t.jsxs("p",{className:"mt-2 text-sm text-green-600 dark:text-green-400",children:["Selected: ",ee.name]})]}),t.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[t.jsx("button",{onClick:()=>{ne(!1),Z(null)},disabled:re,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:Vr,disabled:!ee||re,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:re?t.jsxs(t.Fragment,{children:[t.jsx(Ro,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Import Leads"]})})]})]})]})})}),Q&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Bulk Assign Leads"}),t.jsx("button",{onClick:()=>{se||(V(!1),Te(""))},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50",disabled:se,children:""})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Assign ",U.size," selected lead(s) to a user"]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Assign to User"}),t.jsxs("select",{value:ge,onChange:fe=>Te(fe.target.value),disabled:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[t.jsx("option",{value:"",children:"-- Select a user --"}),t.jsx("option",{value:"unassigned",children:"Unassigned"}),xe.map(fe=>t.jsxs("option",{value:fe.id.toString(),children:[fe.firstName," ",fe.lastName]},fe.id))]})]}),t.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[t.jsx("button",{onClick:()=>{V(!1),Te("")},disabled:se,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:ia,disabled:!ge||se,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:se?t.jsxs(t.Fragment,{children:[t.jsx(Ro,{className:"h-4 w-4 mr-2 animate-spin"}),"Assigning..."]}):t.jsxs(t.Fragment,{children:[t.jsx(xt,{className:"h-4 w-4 mr-2"}),"Assign Leads"]})})]})]})]})})}),t.jsx(HI,{isOpen:W,onClose:()=>{q||(K(!1),z(null))},onConvert:async fe=>{await Nr(fe)},lead:B,isConverting:q})]})},Jt=({label:e,error:r,leftIcon:a,rightIcon:s,className:n,required:i,inputRef:o,...c})=>t.jsxs("div",{children:[e&&t.jsxs("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:[e,i&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[a&&t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 pr-2 flex items-center pointer-events-none",children:a}),a&&t.jsx("span",{className:"absolute inset-y-0 left-9 w-px bg-gray-200 dark:bg-gray-600"}),t.jsx("input",{...c,ref:o,required:i,className:["block w-full",a?"pl-12":"pl-4",s?"pr-12":"pr-4","py-3 rounded-lg border transition-all duration-200","bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100","placeholder:text-gray-500 dark:placeholder:text-gray-400",r?"border-red-300 dark:border-red-600 hover:border-red-400 dark:hover:border-red-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",n||""].join(" ")}),s&&t.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s})]}),r&&t.jsx("p",{className:"mt-1 text-xs text-rose-600 dark:text-rose-400",children:r})]}),qc=({label:e,error:r,className:a,rows:s=3,onChange:n,required:i,...o})=>{const c=u=>{let m=u.target.value;const g=/<script|<\/script|javascript:|on\w+\s*=|<iframe|<object|<embed/i;g.test(m)&&(m=m.replace(g,"")),u.target.value=m,n&&n(u)};return t.jsxs("div",{children:[e&&t.jsxs("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:[e,i&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("textarea",{rows:s,...o,onChange:c,required:i,className:["w-full rounded-lg border p-4 text-sm transition-all duration-200","bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100","placeholder:text-gray-500 dark:placeholder:text-gray-400","resize-y",r?"border-red-300 dark:border-red-600 hover:border-red-400 dark:hover:border-red-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",a||""].join(" ")}),r&&t.jsx("p",{className:"mt-1 text-xs text-rose-600 dark:text-rose-400",children:r})]})},Si=({label:e,placeholder:r="Select an option",value:a,options:s,onChange:n,error:i,required:o,searchable:c=!0,clearable:u=!0,leftIcon:m,disabled:g,className:f})=>{const[y,p]=h.useState(!1),[b,j]=h.useState(""),[v,N]=h.useState(-1),k=h.useRef(null),E=h.useRef(null),C=h.useRef(null),S=s.filter(K=>K.label.toLowerCase().includes(b.toLowerCase())),P=s.find(K=>K.value===a);h.useEffect(()=>{const K=B=>{k.current&&!k.current.contains(B.target)&&(p(!1),j(""),N(-1))};return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[]),h.useEffect(()=>{y&&c&&E.current&&E.current.focus()},[y,c]),h.useEffect(()=>{y&&v>=0&&C.current&&C.current.children[v]?.scrollIntoView({block:"nearest"})},[v,y]);const D=K=>{if(!y){(K.key==="ArrowDown"||K.key==="Enter"||K.key===" ")&&(K.preventDefault(),p(!0),N(0));return}switch(K.key){case"ArrowDown":K.preventDefault(),N(B=>B<S.length-1?B+1:0);break;case"ArrowUp":K.preventDefault(),N(B=>B>0?B-1:S.length-1);break;case"Enter":K.preventDefault(),v>=0&&S[v]&&I(S[v].value);break;case"Escape":p(!1),j(""),N(-1);break}},I=K=>{n(K),p(!1),j(""),N(-1)},H=K=>{K.stopPropagation(),n(""),j("")},W=()=>{g||(p(!y),y||N(-1))};return t.jsxs("div",{className:`relative ${f||""}`,ref:k,children:[e&&t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e,o&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:`
            relative w-full rounded-lg border transition-all duration-200 cursor-pointer
            ${m?"pl-12":"pl-4"} pr-10 py-3
            bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100
            ${i?"border-red-300 dark:border-red-600 hover:border-red-400 dark:hover:border-red-500":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}
            ${y?"ring-2 ring-blue-500 border-blue-500":"focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-blue-500"}
            ${g?"opacity-50 cursor-not-allowed bg-gray-50 dark:bg-gray-800":""}
          `,onClick:W,onKeyDown:D,tabIndex:g?-1:0,children:[m&&t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m}),m&&t.jsx("span",{className:"absolute inset-y-0 left-9 w-px bg-gray-200 dark:bg-gray-600"}),t.jsx("div",{className:"flex items-center justify-between w-full",children:y&&c?t.jsx("input",{ref:E,type:"text",value:b,onChange:K=>j(K.target.value),placeholder:"Type to search...",className:"bg-transparent border-none outline-none text-sm w-full",onKeyDown:D}):t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[P?.icon&&t.jsx("span",{className:"flex-shrink-0",children:P.icon}),t.jsx("span",{className:P?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400",children:P?P.label:r})]})}),t.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 space-x-1",children:[u&&P&&!g&&t.jsx("button",{onClick:H,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-600 rounded transition-colors",tabIndex:-1,children:t.jsx(da,{className:"h-4 w-4 text-gray-400 hover:text-gray-600"})}),t.jsx(xn,{className:`h-4 w-4 text-gray-400 transition-transform duration-200 ${y?"transform rotate-180":""}`})]})]}),y&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-auto",children:[c&&t.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-600",children:t.jsxs("div",{className:"relative",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:b,onChange:K=>j(K.target.value),placeholder:"Search options...",className:"w-full pl-10 pr-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onKeyDown:D})]})}),t.jsx("ul",{ref:C,className:"py-1",children:S.length===0?t.jsx("li",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 text-center",children:"No options found"}):S.map((K,B)=>t.jsx("li",{className:"relative",children:t.jsxs("button",{type:"button",onClick:()=>I(K.value),className:`
                        w-full text-left px-4 py-3 text-sm transition-colors duration-150
                        flex items-center space-x-3
                        ${B===v?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"hover:bg-gray-50 dark:hover:bg-gray-600"}
                        ${K.value===a?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 font-medium":"text-gray-900 dark:text-gray-100"}
                      `,children:[K.icon&&t.jsx("span",{className:"flex-shrink-0",children:K.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{children:K.label}),K.description&&t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:K.description})]}),K.value===a&&t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]})},K.value))})]})]}),i&&t.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:i})]})},cm=[{code:"US",name:"United States",phoneCode:"+1",flag:""},{code:"CA",name:"Canada",phoneCode:"+1",flag:""},{code:"GB",name:"United Kingdom",phoneCode:"+44",flag:""},{code:"AU",name:"Australia",phoneCode:"+61",flag:""},{code:"DE",name:"Germany",phoneCode:"+49",flag:""},{code:"FR",name:"France",phoneCode:"+33",flag:""},{code:"IT",name:"Italy",phoneCode:"+39",flag:""},{code:"ES",name:"Spain",phoneCode:"+34",flag:""},{code:"NL",name:"Netherlands",phoneCode:"+31",flag:""},{code:"BE",name:"Belgium",phoneCode:"+32",flag:""},{code:"CH",name:"Switzerland",phoneCode:"+41",flag:""},{code:"AT",name:"Austria",phoneCode:"+43",flag:""},{code:"SE",name:"Sweden",phoneCode:"+46",flag:""},{code:"NO",name:"Norway",phoneCode:"+47",flag:""},{code:"DK",name:"Denmark",phoneCode:"+45",flag:""},{code:"FI",name:"Finland",phoneCode:"+358",flag:""},{code:"PL",name:"Poland",phoneCode:"+48",flag:""},{code:"CZ",name:"Czech Republic",phoneCode:"+420",flag:""},{code:"HU",name:"Hungary",phoneCode:"+36",flag:""},{code:"SK",name:"Slovakia",phoneCode:"+421",flag:""},{code:"SI",name:"Slovenia",phoneCode:"+386",flag:""},{code:"HR",name:"Croatia",phoneCode:"+385",flag:""},{code:"RS",name:"Serbia",phoneCode:"+381",flag:""},{code:"BG",name:"Bulgaria",phoneCode:"+359",flag:""},{code:"RO",name:"Romania",phoneCode:"+40",flag:""},{code:"GR",name:"Greece",phoneCode:"+30",flag:""},{code:"TR",name:"Turkey",phoneCode:"+90",flag:""},{code:"RU",name:"Russia",phoneCode:"+7",flag:""},{code:"UA",name:"Ukraine",phoneCode:"+380",flag:""},{code:"BY",name:"Belarus",phoneCode:"+375",flag:""},{code:"LT",name:"Lithuania",phoneCode:"+370",flag:""},{code:"LV",name:"Latvia",phoneCode:"+371",flag:""},{code:"EE",name:"Estonia",phoneCode:"+372",flag:""},{code:"JP",name:"Japan",phoneCode:"+81",flag:""},{code:"KR",name:"South Korea",phoneCode:"+82",flag:""},{code:"CN",name:"China",phoneCode:"+86",flag:""},{code:"IN",name:"India",phoneCode:"+91",flag:""},{code:"ID",name:"Indonesia",phoneCode:"+62",flag:""},{code:"TH",name:"Thailand",phoneCode:"+66",flag:""},{code:"VN",name:"Vietnam",phoneCode:"+84",flag:""},{code:"PH",name:"Philippines",phoneCode:"+63",flag:""},{code:"MY",name:"Malaysia",phoneCode:"+60",flag:""},{code:"SG",name:"Singapore",phoneCode:"+65",flag:""},{code:"HK",name:"Hong Kong",phoneCode:"+852",flag:""},{code:"TW",name:"Taiwan",phoneCode:"+886",flag:""},{code:"NZ",name:"New Zealand",phoneCode:"+64",flag:""},{code:"BR",name:"Brazil",phoneCode:"+55",flag:""},{code:"MX",name:"Mexico",phoneCode:"+52",flag:""},{code:"AR",name:"Argentina",phoneCode:"+54",flag:""},{code:"CL",name:"Chile",phoneCode:"+56",flag:""},{code:"CO",name:"Colombia",phoneCode:"+57",flag:""},{code:"PE",name:"Peru",phoneCode:"+51",flag:""},{code:"VE",name:"Venezuela",phoneCode:"+58",flag:""},{code:"UY",name:"Uruguay",phoneCode:"+598",flag:""},{code:"PY",name:"Paraguay",phoneCode:"+595",flag:""},{code:"BO",name:"Bolivia",phoneCode:"+591",flag:""},{code:"EC",name:"Ecuador",phoneCode:"+593",flag:""},{code:"ZA",name:"South Africa",phoneCode:"+27",flag:""},{code:"NG",name:"Nigeria",phoneCode:"+234",flag:""},{code:"KE",name:"Kenya",phoneCode:"+254",flag:""},{code:"GH",name:"Ghana",phoneCode:"+233",flag:""},{code:"EG",name:"Egypt",phoneCode:"+20",flag:""},{code:"MA",name:"Morocco",phoneCode:"+212",flag:""},{code:"TN",name:"Tunisia",phoneCode:"+216",flag:""},{code:"DZ",name:"Algeria",phoneCode:"+213",flag:""},{code:"IL",name:"Israel",phoneCode:"+972",flag:""},{code:"SA",name:"Saudi Arabia",phoneCode:"+966",flag:""},{code:"AE",name:"United Arab Emirates",phoneCode:"+971",flag:""},{code:"QA",name:"Qatar",phoneCode:"+974",flag:""},{code:"KW",name:"Kuwait",phoneCode:"+965",flag:""},{code:"BH",name:"Bahrain",phoneCode:"+973",flag:""},{code:"OM",name:"Oman",phoneCode:"+968",flag:""},{code:"JO",name:"Jordan",phoneCode:"+962",flag:""},{code:"LB",name:"Lebanon",phoneCode:"+961",flag:""},{code:"SY",name:"Syria",phoneCode:"+963",flag:""},{code:"IQ",name:"Iraq",phoneCode:"+964",flag:""},{code:"IR",name:"Iran",phoneCode:"+98",flag:""},{code:"AF",name:"Afghanistan",phoneCode:"+93",flag:""},{code:"PK",name:"Pakistan",phoneCode:"+92",flag:""},{code:"BD",name:"Bangladesh",phoneCode:"+880",flag:""},{code:"LK",name:"Sri Lanka",phoneCode:"+94",flag:""},{code:"NP",name:"Nepal",phoneCode:"+977",flag:""},{code:"BT",name:"Bhutan",phoneCode:"+975",flag:""},{code:"MV",name:"Maldives",phoneCode:"+960",flag:""}],Xie=()=>cm.find(e=>e.code==="US")||cm[0],Zie=({value:e,onChange:r,label:a="Phone",error:s,required:n=!1,placeholder:i="Enter phone number"})=>{const[o,c]=h.useState(!1),[u,m]=h.useState(""),[g,f]=h.useState(Xie()),[y,p]=h.useState(""),b=h.useRef(null),j=h.useRef(null);h.useEffect(()=>{if(e){const E=cm.find(C=>e.startsWith(C.phoneCode));E?(f(E),p(e.substring(E.phoneCode.length).trim())):p(e)}},[]),h.useEffect(()=>{const E=C=>{b.current&&!b.current.contains(C.target)&&(c(!1),m(""))};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),h.useEffect(()=>{o&&j.current&&j.current.focus()},[o]);const v=cm.filter(E=>E.name.toLowerCase().includes(u.toLowerCase())||E.phoneCode.includes(u)||E.code.toLowerCase().includes(u.toLowerCase())),N=E=>{f(E),c(!1),m("");const C=y?`${E.phoneCode} ${y}`:"";r(C,E.code)},k=E=>{const C=E.target.value;p(C);const S=C?`${g.phoneCode} ${C}`:"";r(S,g.code)};return t.jsxs("div",{className:"w-full",children:[a&&t.jsxs("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:[a,n&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:`flex items-stretch rounded-lg border ${s?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-blue-500 transition-all`,children:[t.jsxs("button",{type:"button",onClick:()=>c(!o),className:"flex items-center gap-2 px-3 py-2 border-r border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors rounded-l-lg bg-gray-50/30 dark:bg-gray-800/30",children:[t.jsx("span",{className:"text-2xl leading-none",children:g.flag}),t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:g.phoneCode}),t.jsx(xn,{className:`h-4 w-4 text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),t.jsxs("div",{className:"flex-1 flex items-center",children:[t.jsx(ba,{className:"h-4 w-4 text-gray-400 ml-3"}),t.jsx("input",{type:"tel",value:y,onChange:k,placeholder:i,className:"flex-1 px-3 py-2 bg-transparent text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none"})]})]}),o&&t.jsxs("div",{ref:b,className:"absolute z-50 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-xl max-h-80 overflow-hidden",children:[t.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-600 sticky top-0 bg-white dark:bg-gray-800",children:t.jsxs("div",{className:"relative",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{ref:j,type:"text",value:u,onChange:E=>m(E.target.value),placeholder:"Search country or code...",className:"w-full pl-10 pr-8 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),u&&t.jsx("button",{type:"button",onClick:()=>m(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",children:t.jsx(da,{className:"h-4 w-4 text-gray-400"})})]})}),t.jsx("div",{className:"overflow-y-auto max-h-64 custom-scrollbar",children:v.length>0?v.map(E=>t.jsxs("button",{type:"button",onClick:()=>N(E),className:`w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${g.code===E.code?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[t.jsx("span",{className:"text-2xl leading-none",children:E.flag}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:E.name}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:E.code})]}),t.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:E.phoneCode})]},E.code)):t.jsxs("div",{className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:[t.jsx(ma,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-sm",children:"No countries found"})]})})]})]}),s&&t.jsxs("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[t.jsx("span",{className:"inline-block w-1 h-1 rounded-full bg-red-600 dark:bg-red-400"}),s]}),!s&&t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Select country code and enter your phone number"})]})},tb={firstName:"",lastName:"",email:"",phone:"",company:"",position:"",sourceId:void 0,status:"new",notes:"",assignedTo:void 0,tags:[],budget:void 0,currency:"USD",priority:"medium",website:"",address:"",industry:"",companySize:void 0,annualRevenue:void 0,leadScore:void 0,country:"",state:"",city:"",zipCode:"",linkedinProfile:"",timezone:"",preferredContactMethod:"email",lastContactedAt:void 0,nextFollowUpAt:void 0,customFields:{}},WI=({initial:e,onSubmit:r,submitting:a})=>{const{currencySettings:s}=Hr(),[n,i]=h.useState({form:{...tb,currency:s?.primary||"USD",...e||{}},errors:{},isSubmitting:!1,hasSubmitted:!1}),[o,c]=h.useState([]),{leadSources:u}=Hr(),[m,g]=h.useState(""),[f,y]=h.useState([]),[p,b]=h.useState([]),[j,v]=h.useState(!1),[N,k]=h.useState([]),E=()=>Object.keys(Ic).sort(),C=()=>{const T=[{value:"USD",label:"USD ($)",description:"US Dollar",symbol:"$"},{value:"EUR",label:"EUR ()",description:"Euro",symbol:""},{value:"GBP",label:"GBP ()",description:"British Pound",symbol:""},{value:"INR",label:"INR ()",description:"Indian Rupee",symbol:""},{value:"JPY",label:"JPY ()",description:"Japanese Yen",symbol:""},{value:"CNY",label:"CNY ()",description:"Chinese Yuan",symbol:""},{value:"CAD",label:"CAD ($)",description:"Canadian Dollar",symbol:"$"},{value:"AUD",label:"AUD ($)",description:"Australian Dollar",symbol:"$"},{value:"SGD",label:"SGD ($)",description:"Singapore Dollar",symbol:"$"},{value:"HKD",label:"HKD ($)",description:"Hong Kong Dollar",symbol:"$"},{value:"AED",label:"AED (.)",description:"UAE Dirham",symbol:"."},{value:"SAR",label:"SAR ()",description:"Saudi Riyal",symbol:""},{value:"QAR",label:"QAR ()",description:"Qatari Riyal",symbol:""}];let _=T;if(s?.supportedCurrencies&&s.supportedCurrencies.length>0){const ee=new Set(s.supportedCurrencies);s.primary&&ee.add(s.primary),_=T.filter(Z=>ee.has(Z.value)),s.supportedCurrencies.forEach(Z=>{T.find(U=>U.value===Z)||_.push({value:Z,label:`${Z}`,description:Z,symbol:""})})}const F=s?.primary||"USD";return _.sort((ee,Z)=>ee.value===F?-1:Z.value===F?1:ee.label.localeCompare(Z.label))},S=T=>({USD:"$",EUR:"",GBP:"",INR:"",JPY:"",CNY:"",CAD:"C$",AUD:"A$",SGD:"S$",HKD:"HK$",CHF:"",KRW:"",MXN:"MX$",BRL:"R$",RUB:"",ZAR:"R",TRY:"",NOK:"kr",SEK:"kr",DKK:"kr",PLN:"z",CZK:"K",HUF:"Ft",ILS:"",AED:".",SAR:"",THB:"",MYR:"RM",IDR:"Rp",PHP:"",VND:"",KGS:"",KPW:"",SYP:"",UYU:"$U",YER:""})[T]||T;h.useEffect(()=>{if(e){const T=e.tags?Array.isArray(e.tags)?e.tags.map(_=>typeof _=="object"?_.id:_).filter(Boolean):[]:[];i(_=>({..._,form:{...tb,currency:s?.primary||"USD",...e,tags:T}})),e.sourceId&&g(e.sourceId)}},[e,s]),h.useEffect(()=>{s&&!e&&i(T=>({...T,form:{...T.form,currency:T.form.currency||s.primary}}))},[s,e]),h.useEffect(()=>{if(n.form.country&&Ic[n.form.country]){const T=Ic[n.form.country];(!n.form.currency||n.form.currency===s?.primary||n.form.currency==="USD")&&i(_=>({..._,form:{..._.form,currency:T}}))}},[n.form.country]),h.useEffect(()=>{(async()=>{try{const[_,F,ee]=await Promise.all([Er.getUsers(),Zn.getTags(),bl.getIndustries().catch(()=>[])]),Z=_?.data??_?.users??_,U=F?.data??F?.tags??F;c(Array.isArray(Z)?Z:[]),y(Array.isArray(U)?U:[]),b(Array.isArray(ee)?ee:[]),Array.isArray(U)||console.warn("Tags payload not array:",F)}catch(_){console.error("Error loading form data:",_),i(F=>({...F,errors:{...F.errors,general:"Failed to load form data. Please refresh the page."}})),c([]),y([]),b([]),console.log("Setting fallback empty arrays due to API error"),n.form.sourceId&&g(n.form.sourceId)}finally{}})()},[]),h.useEffect(()=>{if(n.form.industry){const T=p.some(_=>_.isActive&&_.name.toLowerCase()===n.form.industry?.toLowerCase());v(!T)}else v(!1)},[n.form.industry,p]);const P=async()=>{try{const T=await oe.get("/business-settings/field-configs/lead");T.data?.success&&k(T.data.data)}catch(T){console.error("Error fetching field configs:",T),k([])}};h.useEffect(()=>{P();const T=()=>P();return window.addEventListener("fieldConfigsUpdated",T),()=>window.removeEventListener("fieldConfigsUpdated",T)},[]);const D=T=>{const _=(T||"").trim();if(!_)return"Email is required";if(!/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(_))return"Please enter a valid email address";const[ee,Z]=_.split("@");return ee.startsWith(".")||ee.endsWith(".")||ee.includes("..")||Z.includes("..")||Z.split(".").some(X=>!X||X.startsWith("-")||X.endsWith("-"))?"Please enter a valid email address":null},I={IN:{min:10,max:10},US:{min:10,max:10},CA:{min:10,max:10},GB:{min:10,max:10},AU:{min:9,max:9},AE:{min:9,max:9},SA:{min:9,max:9},SG:{min:8,max:8},MY:{min:9,max:10},ID:{min:10,max:12},PK:{min:10,max:10},BD:{min:10,max:10},NP:{min:10,max:10},LK:{min:9,max:9},PH:{min:10,max:10},ZA:{min:9,max:9},NG:{min:8,max:10}},H=()=>{if(!N.length)return[];const T={},_={personal:{title:"Personal Information",icon:t.jsx(xt,{className:"h-5 w-5"}),color:"blue"},company:{title:"Company Information",icon:t.jsx($i,{className:"h-5 w-5"}),color:"green"},location:{title:"Location & Contact",icon:t.jsx(Lo,{className:"h-5 w-5"}),color:"purple"},lead_management:{title:"Lead Management",icon:t.jsx(k2,{className:"h-5 w-5"}),color:"orange"},notes:{title:"Notes & Tags",icon:t.jsx(_r,{className:"h-5 w-5"}),color:"indigo"}};N.filter(ee=>ee.isVisible).sort((ee,Z)=>ee.displayOrder-Z.displayOrder).forEach(ee=>{const Z=ee.section||"other";if(!T[Z]){const U=_[Z]||{title:Z.replace(/_/g," "),icon:t.jsx(_r,{className:"h-5 w-5"}),color:"gray"};T[Z]={id:Z,...U,fields:[]}}T[Z].fields.push(ee)});const F=["personal","company","location","lead_management","notes"];return F.filter(ee=>T[ee]).map(ee=>T[ee]).concat(Object.values(T).filter(ee=>!F.includes(ee.id)))},W=T=>{const _={blue:{bg:"bg-transparent",icon:"text-blue-600 dark:text-blue-400",border:"border-gray-200 dark:border-gray-700"},green:{bg:"bg-transparent",icon:"text-green-600 dark:text-green-400",border:"border-gray-200 dark:border-gray-700"},purple:{bg:"bg-transparent",icon:"text-purple-600 dark:text-purple-400",border:"border-gray-200 dark:border-gray-700"},orange:{bg:"bg-transparent",icon:"text-orange-600 dark:text-orange-400",border:"border-gray-200 dark:border-gray-700"},indigo:{bg:"bg-transparent",icon:"text-indigo-600 dark:text-indigo-400",border:"border-gray-200 dark:border-gray-700"},gray:{bg:"bg-transparent",icon:"text-gray-600 dark:text-gray-400",border:"border-gray-200 dark:border-gray-700"}};return _[T]||_.gray},K=T=>{const _=n.form[T.fieldName]!==void 0?n.form[T.fieldName]:n.form.customFields?.[T.fieldName]||"",F=n.errors[T.fieldName];switch((T.validation?.type||"text").toLowerCase()){case"number":return t.jsx(Jt,{label:T.label,type:"number",value:_||"",onChange:U=>ae(T.fieldName,U.target.value?Number(U.target.value):void 0),required:T.isRequired,error:F,placeholder:T.placeholder},T.fieldName);case"date":return t.jsx(Jt,{label:T.label,type:"date",value:_||"",onChange:U=>ae(T.fieldName,U.target.value||void 0),required:T.isRequired,error:F,placeholder:T.placeholder},T.fieldName);case"datetime":case"datetime-local":return t.jsx(Jt,{label:T.label,type:"datetime-local",value:_||"",onChange:U=>ae(T.fieldName,U.target.value||void 0),required:T.isRequired,error:F,placeholder:T.placeholder},T.fieldName);case"textarea":return t.jsx(qc,{label:T.label,value:_||"",onChange:U=>ae(T.fieldName,U.target.value),required:T.isRequired,error:F,rows:3,placeholder:T.placeholder},T.fieldName);case"select":case"dropdown":const Z=T.options?.options||T.options||[];return t.jsx(Si,{label:T.label,value:_||"",placeholder:T.placeholder||`Select ${T.label}`,options:Array.isArray(Z)?Z.map(U=>({value:typeof U=="string"?U:U.value||U,label:typeof U=="string"?U:U.label||U.value||U})):[],onChange:U=>{T.fieldName.startsWith("custom")||!n.form.hasOwnProperty(T.fieldName)?ae(T.fieldName,U):J(T.fieldName,U)},searchable:!0,clearable:!T.isRequired,required:T.isRequired},T.fieldName);case"checkbox":return t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:_||!1,onChange:U=>ae(T.fieldName,U.target.checked),className:"h-4 w-4 text-blue-600 rounded"}),t.jsxs("label",{className:"ml-2 text-sm font-medium text-gray-900 dark:text-white",children:[T.label,T.isRequired&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]},T.fieldName);default:return t.jsx(Jt,{label:T.label,value:_||"",onChange:U=>{T.fieldName.startsWith("custom")||!n.form.hasOwnProperty(T.fieldName)?ae(T.fieldName,U.target.value):J(T.fieldName,U.target.value)},required:T.isRequired,error:F,placeholder:T.placeholder},T.fieldName)}},B=T=>{const _=n.form[T.fieldName]!==void 0?n.form[T.fieldName]:n.form.customFields?.[T.fieldName],F=n.errors[T.fieldName];if(!["firstName","lastName","email","phone","company","position","industry","website","companySize","annualRevenue","country","state","city","zipCode","address","timezone","linkedinProfile","sourceId","status","priority","assignedTo","budget","currency","leadScore","preferredContactMethod","nextFollowUpAt","notes","tags"].includes(T.fieldName))return K(T);switch(T.fieldName){case"firstName":case"lastName":return t.jsx(Jt,{label:T.label,leftIcon:t.jsx(xt,{className:"h-4 w-4 text-gray-400"}),value:_||"",onChange:Z=>J(T.fieldName,Z.target.value),required:T.isRequired,error:F,placeholder:T.placeholder},T.fieldName);case"email":return t.jsx(Jt,{label:T.label,leftIcon:t.jsx(ir,{className:"h-4 w-4 text-gray-400"}),type:"email",value:_||"",onChange:Z=>J(T.fieldName,Z.target.value),required:T.isRequired,error:F,placeholder:T.placeholder},T.fieldName);case"phone":return t.jsx(Zie,{label:T.label,value:_||"",onChange:Z=>J(T.fieldName,Z),error:F,placeholder:T.placeholder||"Enter phone number",required:T.isRequired},T.fieldName);case"company":return t.jsx(Jt,{label:T.label,leftIcon:t.jsx($i,{className:"h-4 w-4 text-gray-400"}),value:_||"",onChange:Z=>J(T.fieldName,Z.target.value),error:F,required:T.isRequired,placeholder:T.placeholder},T.fieldName);case"position":return t.jsx(Jt,{label:T.label,leftIcon:t.jsx(zu,{className:"h-4 w-4 text-gray-400"}),value:_||"",onChange:Z=>J(T.fieldName,Z.target.value),error:F,required:T.isRequired,placeholder:T.placeholder},T.fieldName);case"industry":return t.jsxs("div",{children:[t.jsx(Si,{label:T.label,leftIcon:t.jsx(wa,{className:"h-4 w-4 text-gray-400"}),value:j?"Other":_||"",onChange:Z=>{Z==="Other"?(v(!0),J(T.fieldName,"")):(v(!1),J(T.fieldName,Z))},options:[...p.filter(Z=>Z.isActive).map(Z=>({value:Z.name,label:Z.name})),{value:"Other",label:"Other"}],placeholder:T.placeholder||"Select industry",required:T.isRequired}),j&&t.jsx("div",{className:"mt-2",children:t.jsx(Jt,{label:"Specify Industry",leftIcon:t.jsx(wa,{className:"h-4 w-4 text-gray-400"}),value:_||"",onChange:Z=>J(T.fieldName,Z.target.value),placeholder:"e.g. Technology, Healthcare"})})]},T.fieldName);case"website":return t.jsx(Jt,{label:T.label,leftIcon:t.jsx(ff,{className:"h-4 w-4 text-gray-400"}),type:"url",value:_||"",onChange:Z=>J(T.fieldName,Z.target.value),placeholder:T.placeholder||"https://company.com",required:T.isRequired},T.fieldName);case"companySize":return t.jsx(Jt,{label:T.label,leftIcon:t.jsx(Os,{className:"h-4 w-4 text-gray-400"}),type:"number",value:_||"",onChange:Z=>J(T.fieldName,Z.target.value?Number(Z.target.value):void 0),placeholder:T.placeholder||"Number of employees",required:T.isRequired},T.fieldName);case"annualRevenue":return t.jsx(Jt,{label:T.label,leftIcon:t.jsx(Qr,{className:"h-4 w-4 text-gray-400"}),type:"number",value:_||"",onChange:Z=>J(T.fieldName,Z.target.value?Number(Z.target.value):void 0),placeholder:T.placeholder||"Annual revenue",required:T.isRequired},T.fieldName);case"country":return t.jsx(Si,{label:T.label,leftIcon:t.jsx(Jh,{className:"h-4 w-4 text-gray-400"}),value:_||"",placeholder:T.placeholder||"Select country",options:[{value:"",label:"Select country"},...E().map(Z=>({value:Z,label:Z,description:Ic[Z]?`Currency: ${Ic[Z]}`:void 0}))],onChange:Z=>J(T.fieldName,Z||""),searchable:!0,clearable:!0,required:T.isRequired},T.fieldName);case"state":return t.jsx(Jt,{label:T.label,leftIcon:t.jsx(Lo,{className:"h-4 w-4 text-gray-400"}),value:_||"",onChange:Z=>J(T.fieldName,Z.target.value),placeholder:T.placeholder||"State/Province",required:T.isRequired},T.fieldName);case"city":return t.jsx(Jt,{label:T.label,leftIcon:t.jsx(Lo,{className:"h-4 w-4 text-gray-400"}),value:_||"",onChange:Z=>J(T.fieldName,Z.target.value),placeholder:T.placeholder||"City",required:T.isRequired},T.fieldName);case"zipCode":return t.jsx(Jt,{label:T.label,leftIcon:t.jsx(Lo,{className:"h-4 w-4 text-gray-400"}),value:_||"",onChange:Z=>J(T.fieldName,Z.target.value),placeholder:T.placeholder||"ZIP/Postal Code",required:T.isRequired},T.fieldName);case"address":return t.jsx(qc,{label:T.label,value:_||"",onChange:Z=>J(T.fieldName,Z.target.value),placeholder:T.placeholder||"Address",rows:3,required:T.isRequired},T.fieldName);case"timezone":return t.jsx(Jt,{label:T.label,leftIcon:t.jsx(Yt,{className:"h-4 w-4 text-gray-400"}),value:_||"",onChange:Z=>J(T.fieldName,Z.target.value),placeholder:T.placeholder||"e.g. PST, EST, GMT",required:T.isRequired},T.fieldName);case"linkedinProfile":return t.jsx(Jt,{label:T.label,leftIcon:t.jsx(A2,{className:"h-4 w-4 text-gray-400"}),type:"url",value:_||"",onChange:Z=>J(T.fieldName,Z.target.value),placeholder:T.placeholder||"LinkedIn URL",required:T.isRequired},T.fieldName);case"sourceId":return t.jsx(Si,{label:T.label,leftIcon:t.jsx(P2,{className:"h-4 w-4 text-gray-400"}),value:m,placeholder:T.placeholder||"Select source",options:[{value:"",label:"Select source"},...Array.isArray(u)?u.filter(Z=>Z.isActive!==!1).sort((Z,U)=>(Z.sortOrder??0)-(U.sortOrder??0)).map(Z=>({value:Z.id||Z.name,label:Z.name,description:Z.description||void 0})):[]],onChange:Z=>{g(Z);const U=Number(Z);J(T.fieldName,Number.isFinite(U)?U:void 0)},searchable:!0,clearable:!0,required:T.isRequired},T.fieldName);case"status":return t.jsx(Si,{label:T.label,leftIcon:t.jsx(P2,{className:"h-4 w-4 text-gray-400"}),value:_||"new",placeholder:T.placeholder||"Select status",options:[{value:"new",label:"New",description:"Newly generated lead"},{value:"contacted",label:"Contacted",description:"Initial contact made"},{value:"qualified",label:"Qualified",description:"Lead has been qualified"},{value:"proposal",label:"Proposal",description:"Proposal sent"},{value:"negotiation",label:"Negotiation",description:"In negotiation phase"},{value:"closed",label:"Closed",description:"Successfully closed"},{value:"lost",label:"Lost",description:"Lead was lost"}],onChange:Z=>J(T.fieldName,Z),searchable:!1,clearable:!1,required:T.isRequired},T.fieldName);case"priority":return t.jsx(Si,{label:T.label,leftIcon:t.jsx(Jh,{className:"h-4 w-4 text-gray-400"}),value:_||"medium",placeholder:T.placeholder||"Select priority",options:[{value:"low",label:"Low",icon:t.jsx("span",{className:"text-green-500",children:""}),description:"Low priority"},{value:"medium",label:"Medium",icon:t.jsx("span",{className:"text-yellow-500",children:""}),description:"Medium priority"},{value:"high",label:"High",icon:t.jsx("span",{className:"text-orange-500",children:""}),description:"High priority"},{value:"urgent",label:"Urgent",icon:t.jsx("span",{className:"text-red-500",children:""}),description:"Urgent priority"}],onChange:Z=>J(T.fieldName,Z),searchable:!1,clearable:!1,required:T.isRequired},T.fieldName);case"assignedTo":return t.jsx(Si,{label:T.label,leftIcon:t.jsx(sU,{className:"h-4 w-4 text-gray-400"}),value:_??"",placeholder:T.placeholder||"Select user",options:[{value:"",label:"Select user"},...Array.isArray(o)?o.map(Z=>({value:Z.id,label:`${Z.firstName} ${Z.lastName}`,icon:t.jsx(xt,{className:"h-4 w-4 text-blue-500"}),description:`User ID: ${Z.id}`})):[]],onChange:Z=>J(T.fieldName,Z?Number(Z):void 0),searchable:!0,clearable:!0,required:T.isRequired},T.fieldName);case"budget":return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-900 dark:text-white",children:[T.label,T.isRequired&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsx("div",{className:"col-span-2",children:t.jsx(Jt,{leftIcon:t.jsx("span",{className:"text-gray-400 font-medium text-sm",children:S(n.form.currency||s?.primary||"USD")}),type:"number",step:"0.01",value:_||"",onChange:Z=>J(T.fieldName,Z.target.value?Number(Z.target.value):void 0),placeholder:T.placeholder||"Enter amount"})}),t.jsx("div",{children:t.jsx(Si,{value:n.form.currency||s?.primary||"USD",placeholder:"Currency",options:C(),onChange:Z=>J("currency",Z),searchable:!0,clearable:!1})})]})]},T.fieldName);case"currency":return null;case"leadScore":return t.jsx(Jt,{label:T.label,leftIcon:t.jsx(k2,{className:"h-4 w-4 text-gray-400"}),type:"number",min:"0",max:"100",value:_||"",onChange:Z=>J(T.fieldName,Z.target.value?Number(Z.target.value):void 0),placeholder:T.placeholder||"Score (0-100)",required:T.isRequired},T.fieldName);case"preferredContactMethod":return t.jsx(Si,{label:T.label,leftIcon:t.jsx(_r,{className:"h-4 w-4 text-gray-400"}),value:_||"email",placeholder:T.placeholder||"Select contact method",options:[{value:"email",label:"Email",icon:t.jsx(ir,{className:"h-4 w-4 text-blue-500"}),description:"Contact via email"},{value:"phone",label:"Phone",icon:t.jsx(ba,{className:"h-4 w-4 text-green-500"}),description:"Contact via phone call"},{value:"sms",label:"SMS",icon:t.jsx(_r,{className:"h-4 w-4 text-purple-500"}),description:"Contact via SMS"},{value:"whatsapp",label:"WhatsApp",icon:t.jsx(_r,{className:"h-4 w-4 text-green-600"}),description:"Contact via WhatsApp"},{value:"linkedin",label:"LinkedIn",icon:t.jsx(A2,{className:"h-4 w-4 text-blue-600"}),description:"Contact via LinkedIn"}],onChange:Z=>J(T.fieldName,Z),searchable:!1,clearable:!1,required:T.isRequired},T.fieldName);case"nextFollowUpAt":return t.jsx(Jt,{label:T.label,leftIcon:t.jsx(nr,{className:"h-4 w-4 text-gray-400"}),type:"datetime-local",value:_||"",onChange:Z=>J(T.fieldName,Z.target.value||void 0),required:T.isRequired},T.fieldName);case"notes":return t.jsx(qc,{label:T.label,value:_||"",onChange:Z=>J(T.fieldName,Z.target.value),error:F,rows:4,placeholder:T.placeholder||"Add any additional notes...",required:T.isRequired},T.fieldName);case"tags":return t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:[T.label,T.isRequired&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:"flex flex-wrap gap-3",children:Array.isArray(f)&&f.map(Z=>{const U=(n.form.tags||[]).includes(Z.id);return t.jsx("button",{type:"button",onClick:()=>ne(Z.id),className:`px-4 py-2 text-sm rounded-full border transition-all duration-200 ${U?"bg-blue-600 text-white border-blue-600 hover:bg-blue-700 shadow-md":"bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-200 border-gray-300 dark:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-500 hover:border-gray-400"}`,children:Z.name},Z.id)})})]},T.fieldName);default:return K(T)}},z={min:7,max:15},q=T=>{const _=(T||"").trim();if(!_)return"Phone is required";if(!/^[0-9+\s()-]+$/.test(_))return"Phone can only contain digits, spaces, +, -, (, )";const F=_.replace(/\D/g,"");let ee,Z=0;for(const X of cm){const Q=X.phoneCode.replace(/\D/g,"");F.startsWith(Q)&&Q.length>Z&&(ee=X.code,Z=Q.length)}const U=ee&&I[ee]?I[ee]:z;if(U){const X=ee&&Z>0?F.length-Z:F.length;if(X<U.min)return`Phone number must be at least ${U.min} digits`;if(U.max&&X>U.max)return`Phone number must be at most ${U.max} digits`}return null},J=(T,_)=>{i(F=>({...F,form:{...F.form,[T]:_},errors:{...F.errors,[T]:""}}))},ae=(T,_)=>{i(F=>({...F,form:{...F.form,customFields:{...F.form.customFields||{},[T]:_}},errors:{...F.errors,[T]:""}}))},ne=T=>{i(_=>{const F=Array.isArray(_.form.tags)?[..._.form.tags]:[],ee=F.indexOf(T);return ee===-1?F.push(T):F.splice(ee,1),{..._,form:{..._.form,tags:F}}})},re=()=>{const T={};for(const _ of N)if(_.isVisible&&_.isRequired){const F=n.form[_.fieldName]||n.form.customFields?.[_.fieldName];if(F==null||F===""||Array.isArray(F)&&F.length===0)T[_.fieldName]=`${_.label||_.fieldName} is required`;else{if(_.fieldName==="email"){const ee=D(String(F));ee&&(T[_.fieldName]=ee)}if(_.fieldName==="phone"){const ee=q(String(F));ee&&(T[_.fieldName]=ee)}}}return i(_=>({..._,errors:T})),Object.keys(T).length===0},L=async T=>{if(T&&typeof T.preventDefault=="function"&&T.preventDefault(),!!re())try{i(_=>({..._,isSubmitting:!0})),await r(n.form),i(_=>({..._,hasSubmitted:!0,isSubmitting:!1}))}catch(_){i(F=>({...F,isSubmitting:!1})),console.error("Error submitting lead:",_)}},G=H();return t.jsxs("form",{onSubmit:L,className:"bg-transparent space-y-8",children:[G.map(T=>{const _=W(T.color);return t.jsxs("div",{className:"pb-8 border-b border-gray-200 dark:border-gray-700 last:border-0 last:pb-0",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx("div",{className:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700/50 ${_.icon}`,children:T.icon}),t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white ml-3 tracking-tight",children:T.title})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-x-6 gap-y-6",children:T.fields.map(F=>{if(!F.isVisible)return null;const ee=B(F);return ee?t.jsx("div",{className:"w-full",children:ee},F.fieldName):null})})]},T.id)}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-end gap-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[t.jsx("button",{type:"button",onClick:()=>{i({...n,form:{...tb}})},className:"w-full sm:w-auto px-6 py-2.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Reset"}),t.jsx("button",{type:"submit",disabled:n.isSubmitting||a,className:"w-full sm:w-auto px-8 py-2.5 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-blue-500/20 transition-all active:scale-95",children:n.isSubmitting||a?t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Lead"})]})]})},$a=({to:e,onClick:r,className:a="",children:s})=>{const n=mt(),i=()=>{r?r():n(e||-1)};return t.jsxs("button",{onClick:i,className:`
        inline-flex items-center gap-2 px-4 py-2 text-sm font-medium 
        text-gray-700 dark:text-gray-300 
        bg-white dark:bg-gray-800 
        border border-gray-300 dark:border-gray-600 
        rounded-full
        hover:bg-gray-50 dark:hover:bg-gray-700 
        hover:border-gray-400 dark:hover:border-gray-500
        focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 
        dark:focus:ring-offset-gray-800
        transition-all duration-200 ease-in-out
        shadow-xs hover:shadow-sm
        ${a}
      `,children:[t.jsx(vr,{className:"h-4 w-4"}),s||"Back"]})},Jie=()=>{const[e,r]=h.useState(!1),a=mt(),{refreshLeadsCount:s}=jn(),n=async i=>{try{r(!0),await Gt.createLead({...i,sourceId:i.sourceId?Number(i.sourceId):void 0,assignedTo:i.assignedTo?Number(i.assignedTo):void 0,tags:Array.isArray(i.tags)?i.tags.filter(Boolean):[]}),await s(),M.success("Lead created"),a("/leads")}catch(o){const c=o?.response?.data;if(Array.isArray(c?.errors)&&c.errors.length>0){const u=[];for(const m of c.errors){const g=m?.msg||m?.message;g&&u.push(g)}M.error(u.join(`
`)||c?.message||"Validation errors",{toastId:"lead_create_validation_errors"})}else M.error(c?.message||o?.message||"Create failed",{toastId:"lead_create_error"})}finally{r(!1)}};return t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Create Lead"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Fill in the details below"})]}),t.jsx("div",{className:"flex items-center gap-4 mb-4",children:t.jsx($a,{to:"/leads"})})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:t.jsx(WI,{onSubmit:n,submitting:e})})]})},eoe=()=>{const[e,r]=h.useState(!0),[a,s]=h.useState(!1),[n,i]=h.useState(),o=mt(),{id:c}=ui(),{refreshLeadsCount:u}=jn();h.useEffect(()=>{(async()=>{try{r(!0);const f=await Gt.getLeadById(Number(c)),y=f?.data?.lead??f?.lead??f;i({firstName:y.firstName,lastName:y.lastName,email:y.email,phone:y.phone,company:y.company,position:y.position,industry:y.industry,website:y.website,companySize:y.companySize,annualRevenue:y.annualRevenue,address:y.address,country:y.country,state:y.state,city:y.city,zipCode:y.zipCode,linkedinProfile:y.linkedinProfile,timezone:y.timezone,preferredContactMethod:y.preferredContactMethod,sourceId:y.sourceId,status:(y.status||"new").toLowerCase(),priority:y.priority,assignedTo:y.assignedTo,budget:y.budget,currency:y.currency,leadScore:y.leadScore,notes:y.notes,tags:Array.isArray(y.tags)?y.tags.map(p=>p.id):[],lastContactedAt:y.lastContactedAt,nextFollowUpAt:y.nextFollowUpAt})}catch(f){M.error(f?.message||"Failed to load lead")}finally{r(!1)}})()},[c]);const m=async g=>{try{s(!0),await Gt.updateLead(Number(c),{...g,sourceId:g.sourceId?Number(g.sourceId):void 0,assignedTo:g.assignedTo?Number(g.assignedTo):void 0,tags:Array.isArray(g.tags)?g.tags.filter(Boolean):[]}),await u(),M.success("Lead updated"),o("/leads")}catch(f){M.error(f?.response?.data?.message||f?.message||"Update failed")}finally{s(!1)}};return t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit Lead"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Update the details below"})]}),t.jsx("div",{className:"flex items-center gap-4 mb-4",children:t.jsx($a,{to:"/leads"})})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:e?t.jsx(Zm,{}):t.jsx(WI,{initial:n,onSubmit:m,submitting:a,skipInternalLoadingUI:!0})})]})},toe=()=>localStorage.getItem(At.AUTH_TOKEN),ju=()=>{const e=toe();return Pt.create({baseURL:Vo,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})},Eh={getNotesByLeadId:async e=>{try{return(await ju().get(`/notes?leadId=${e}`)).data}catch(r){throw console.error("Error fetching notes:",r),r}},getNoteById:async e=>{try{return(await ju().get(`/notes/${e}`)).data}catch(r){throw console.error("Error fetching note:",r),r}},createNote:async e=>{try{return(await ju().post("/notes",e)).data}catch(r){throw console.error("Error creating note:",r),r}},updateNote:async(e,r)=>{try{return(await ju().put(`/notes/${e}`,r)).data}catch(a){throw console.error("Error updating note:",a),a}},deleteNote:async e=>{try{return(await ju().delete(`/notes/${e}`)).data}catch(r){throw console.error("Error deleting note:",r),r}}},cs={list:async e=>{const r=new URLSearchParams;e.page&&r.append("page",String(e.page)),e.limit&&r.append("limit",String(e.limit)),e.status&&r.append("status",e.status),e.search&&r.append("search",e.search),e.entityType&&e.entityId&&(r.append("entityType",e.entityType),r.append("entityId",String(e.entityId))),e.leadId&&r.append("leadId",String(e.leadId)),e.dealId&&r.append("dealId",String(e.dealId)),e.contactId&&r.append("contactId",String(e.contactId)),e.assignedTo&&r.append("assignedTo",String(e.assignedTo));const a=`/tasks?${r.toString()}`;return(await oe.get(a)).data},get:async e=>(await oe.get(`/tasks/${e}`)).data,create:async e=>(await oe.post("/tasks",e)).data,update:async(e,r)=>(await oe.put(`/tasks/${e}`,r)).data,complete:async e=>(await oe.put(`/tasks/${e}/complete`)).data,remove:async e=>(await oe.delete(`/tasks/${e}`)).data},LP={getMeetings:async e=>(await oe.get(`/communications/leads/${e}/meetings`)).data,createMeeting:async e=>(await oe.post("/communications/leads",e)).data,getCommunications:async e=>(await oe.get(`/communications/leads?leadId=${e}`)).data},RP=({lead:e,isOpen:r,onClose:a,onTransferComplete:s,mode:n="assign"})=>{const[i,o]=h.useState([]),[c,u]=h.useState(!1),[m,g]=h.useState(!1),[f,y]=h.useState(null),[p,b]=h.useState(""),[j,v]=h.useState("");h.useEffect(()=>{r&&(N(),b(""),y(null),v(""))},[r]);const N=async()=>{try{u(!0);const P=await Er.getUsers({page:1,limit:100}),D=Array.isArray(P?.data)?P.data:P?.data?.users||P?.data||P?.users||[];o(D)}catch(P){console.error("Error fetching users:",P),M.error("Failed to load users")}finally{u(!1)}},k=async P=>{if(P.preventDefault(),!!e)try{g(!0);let D;n==="transfer"?D=await Gt.transferLead(e.id,f,p):D=await Gt.assignLead(e.id,f);const I=D.data?.lead||D.lead;s(I);const H=n==="transfer"?"transferred":"assigned",W=f?i.find(K=>K.id===f)?.firstName+" "+i.find(K=>K.id===f)?.lastName:"Unassigned";M.success(`Lead ${H} to ${W} successfully`),a()}catch(D){const I=D?.response?.data?.message||`Failed to ${n} lead`;M.error(I)}finally{g(!1)}},E=i.filter(P=>`${P.firstName} ${P.lastName}`.toLowerCase().includes(j.toLowerCase())||P.email.toLowerCase().includes(j.toLowerCase())),C=i.find(P=>P.id===f),S=e?.assignedUser;return r?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-weconnect-red rounded-lg",children:n==="transfer"?t.jsx(xm,{className:"w-5 h-5 text-white"}):t.jsx(Os,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:n==="transfer"?"Transfer Lead":"Assign Lead"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e?`${e.firstName} ${e.lastName}`:""})]})]}),t.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(da,{className:"w-5 h-5"})})]}),t.jsxs("form",{onSubmit:k,className:"flex flex-col h-full max-h-[calc(90vh-80px)]",children:[t.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[S&&t.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Currently assigned to:"}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:t.jsxs("span",{className:"text-white font-medium text-sm",children:[S.firstName[0],S.lastName[0]]})}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[S.firstName," ",S.lastName]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:S.email})]})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n==="transfer"?"Transfer to:":"Assign to:"}),t.jsx("input",{type:"text",placeholder:"Search users...",value:j,onChange:P=>v(P.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white"})]}),t.jsx("div",{className:"mb-6",children:c?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red"})}):t.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[t.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${f===null?"border-weconnect-red bg-red-50 dark:bg-red-900/20":"border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,onClick:()=>y(null),children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center",children:t.jsx(xt,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Unassigned"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Remove current assignment"})]})]})}),E.map(P=>t.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${f===P.id?"border-weconnect-red bg-red-50 dark:bg-red-900/20":"border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,onClick:()=>y(P.id),children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:t.jsxs("span",{className:"text-white font-medium text-sm",children:[P.firstName[0],P.lastName[0]]})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[P.firstName," ",P.lastName]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:P.email})]}),P.roles&&P.roles.length>0&&t.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-600 rounded-full text-gray-600 dark:text-gray-300",children:P.roles[0].name})]})},P.id)),E.length===0&&j&&t.jsxs("div",{className:"flex items-center justify-center py-8 text-gray-500 dark:text-gray-400",children:[t.jsx(ur,{className:"w-5 h-5 mr-2"}),'No users found matching "',j,'"']})]})}),n==="transfer"&&t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Transfer Notes (Optional)"}),t.jsx("textarea",{value:p,onChange:P=>b(P.target.value),rows:3,placeholder:"Add a note about why this lead is being transferred...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white resize-none"})]}),C&&t.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:t.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[t.jsxs("strong",{children:[e?.firstName," ",e?.lastName]})," will be ",n==="transfer"?"transferred":"assigned"," to"," ",t.jsxs("strong",{children:[C.firstName," ",C.lastName]})]})}),f===null&&t.jsx("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:t.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:[t.jsxs("strong",{children:[e?.firstName," ",e?.lastName]})," will be unassigned"]})})]}),t.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[t.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t.jsx("span",{children:n==="transfer"?"Transferring...":"Assigning..."})]}):n==="transfer"?"Transfer Lead":"Assign Lead"})]})]})]})}):null},VI=({lead:e})=>{const[r,a]=h.useState("compose"),[s,n]=h.useState("EMAIL"),[i,o]=h.useState([]),[c,u]=h.useState([]),[m,g]=h.useState(!1),[f,y]=h.useState(!1),[p,b]=h.useState({templateId:"",subject:"",content:"",useTemplate:!1});h.useEffect(()=>{j(),v()},[]);const j=async()=>{try{const I=localStorage.getItem("authToken")||localStorage.getItem("token"),W=await(await fetch("/api/communications/templates",{headers:{Authorization:I?`Bearer ${I}`:""}})).json();W.success&&W.data?.templates&&o(W.data.templates)}catch(I){console.error("Error fetching templates:",I)}},v=async()=>{try{const I=localStorage.getItem("authToken")||localStorage.getItem("token"),W=await(await fetch(`/api/communications/messages?leadId=${e.id}`,{headers:{Authorization:I?`Bearer ${I}`:""}})).json();if(W.success){const K=W.data?.messages||W.data?.items||[];u(Array.isArray(K)?K:[])}}catch(I){console.error("Error fetching messages:",I)}},N=I=>{const H=i.find(W=>W.id.toString()===I);H&&(b({...p,templateId:I,subject:H.subject||"",content:H.content,useTemplate:!0}),n(H.type))},k=async()=>{if(!p.content.trim()){M.error("Message content is required");return}if(s==="EMAIL"&&!p.subject.trim()){M.error("Email subject is required");return}y(!0);try{const I=localStorage.getItem("authToken")||localStorage.getItem("token"),H=localStorage.getItem("userId"),W=H?parseInt(H,10):void 0;let K="",B={};s==="EMAIL"?(K="/api/communications/send-email",B={leadId:e.id,to:e.email,subject:p.subject,content:p.content,templateId:p.useTemplate&&p.templateId?parseInt(p.templateId,10):void 0,userId:W}):(K="/api/communications/send-whatsapp",B={leadId:e.id,to:e.phone,content:p.content,templateId:p.useTemplate&&p.templateId?parseInt(p.templateId,10):void 0,userId:W});const q=await(await fetch(K,{method:"POST",headers:{Authorization:I?`Bearer ${I}`:"","Content-Type":"application/json"},body:JSON.stringify(B)})).json();if(q.success)M.success(`${s.toLowerCase()} sent successfully`),b({templateId:"",subject:"",content:"",useTemplate:!1}),await v();else throw new Error(q.message||`Failed to send ${s.toLowerCase()}`)}catch(I){console.error("Error sending message:",I),M.error(I.message||"Failed to send message")}finally{y(!1)}},E=I=>{switch(I){case"SENT":return"text-blue-600 bg-blue-100";case"DELIVERED":return"text-green-600 bg-green-100";case"READ":return"text-purple-600 bg-purple-100";case"FAILED":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},C=I=>{switch(I){case"SENT":return t.jsx(Yt,{className:"h-4 w-4"});case"DELIVERED":return t.jsx(ct,{className:"h-4 w-4"});case"READ":return t.jsx(Bt,{className:"h-4 w-4"});case"FAILED":return t.jsx(va,{className:"h-4 w-4"});default:return t.jsx(ur,{className:"h-4 w-4"})}},S=I=>{switch(I){case"EMAIL":return t.jsx(ir,{className:"h-4 w-4 text-blue-500"});case"WHATSAPP":return t.jsx(_r,{className:"h-4 w-4 text-green-500"});case"SMS":return t.jsx(_r,{className:"h-4 w-4 text-purple-500"});default:return t.jsx(_r,{className:"h-4 w-4 text-gray-500"})}},P=I=>I.replace(/\{\{leadFirstName\}\}/g,e.firstName).replace(/\{\{leadLastName\}\}/g,e.lastName).replace(/\{\{leadEmail\}\}/g,e.email).replace(/\{\{leadPhone\}\}/g,e.phone||"").replace(/\{\{leadCompany\}\}/g,e.company||""),D=i.filter(I=>I.type===s&&I.isActive);return t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:t.jsxs("nav",{className:"flex space-x-8 px-6",children:[t.jsxs("button",{onClick:()=>a("compose"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${r==="compose"?"border-weconnect-red text-weconnect-red dark:text-weconnect-red":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[t.jsx(Rt,{className:"h-4 w-4 inline mr-2"}),"Compose Message"]}),t.jsxs("button",{onClick:()=>a("history"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${r==="history"?"border-weconnect-red text-weconnect-red dark:text-weconnect-red":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[t.jsx(Yt,{className:"h-4 w-4 inline mr-2"}),"Communication History"]})]})}),t.jsxs("div",{className:"p-6",children:[r==="compose"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Send Message to ",e.firstName," ",e.lastName]}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[t.jsx($i,{className:"h-4 w-4"}),t.jsx("span",{children:e.company||"No Company"})]})]}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsxs("button",{onClick:()=>n("EMAIL"),disabled:!e.email,className:`flex items-center px-4 py-2 rounded-lg border transition-colors ${s==="EMAIL"?"bg-blue-50 border-blue-200 text-blue-700":"bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100"} ${e.email?"":"opacity-50 cursor-not-allowed"}`,children:[t.jsx(ir,{className:"h-4 w-4 mr-2"}),"Email",!e.email&&t.jsx("span",{className:"ml-2 text-xs",children:"(No email)"})]}),t.jsxs("button",{onClick:()=>n("WHATSAPP"),disabled:!e.phone,className:`flex items-center px-4 py-2 rounded-lg border transition-colors ${s==="WHATSAPP"?"bg-green-50 border-green-200 text-green-700":"bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100"} ${e.phone?"":"opacity-50 cursor-not-allowed"}`,children:[t.jsx(_r,{className:"h-4 w-4 mr-2"}),"WhatsApp",!e.phone&&t.jsx("span",{className:"ml-2 text-xs",children:"(No phone)"})]}),t.jsxs("button",{onClick:()=>n("SMS"),disabled:!e.phone,className:`flex items-center px-4 py-2 rounded-lg border transition-colors ${s==="SMS"?"bg-purple-50 border-purple-200 text-purple-700":"bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100"} ${e.phone?"":"opacity-50 cursor-not-allowed"}`,children:[t.jsx(_r,{className:"h-4 w-4 mr-2"}),"SMS",!e.phone&&t.jsx("span",{className:"ml-2 text-xs",children:"(No phone)"})]})]}),D.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Use Template (Optional)"}),t.jsxs("select",{value:p.templateId,onChange:I=>N(I.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"",children:"Select a template..."}),D.map(I=>t.jsx("option",{value:I.id,children:I.name},I.id))]})]}),s==="EMAIL"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject *"}),t.jsx("input",{type:"text",value:p.subject,onChange:I=>b({...p,subject:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Enter email subject"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Message Content *"}),t.jsx("textarea",{value:p.content,onChange:I=>b({...p,content:I.target.value}),rows:8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:`Enter your ${s.toLowerCase()} message...`}),t.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[t.jsx("strong",{children:"Preview with variables:"}),t.jsx("p",{className:"mt-1 p-2 bg-gray-50 dark:bg-gray-700 rounded border text-gray-700 dark:text-gray-300",children:P(p.content)||"Enter content to see preview..."})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:k,disabled:f||!p.content.trim()||s==="EMAIL"&&!p.subject.trim(),className:"bg-weconnect-red text-white px-6 py-2 rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:f?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Tl,{className:"h-4 w-4 mr-2"}),"Send ",s]})})})]}),r==="history"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Communication History"}),c.length>0?t.jsx("div",{className:"space-y-4",children:c.map(I=>t.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"flex-shrink-0",children:S(I.type)}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:[I.type," ",I.direction==="OUTBOUND"?"to":"from"," ",e.firstName]}),t.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${E(I.status)}`,children:[C(I.status),t.jsx("span",{className:"ml-1",children:I.status})]})]}),I.subject&&t.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mt-1",children:["Subject: ",I.subject]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[I.direction==="OUTBOUND"?t.jsx(xm,{className:"h-4 w-4 text-blue-500"}):t.jsx(vr,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(I.sentAt).toLocaleString()})]})]}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-3",children:t.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:I.content})}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[t.jsxs("span",{children:["Sent by ",I.user.firstName," ",I.user.lastName]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[I.deliveredAt&&t.jsxs("span",{children:["Delivered: ",new Date(I.deliveredAt).toLocaleString()]}),I.readAt&&t.jsxs("span",{children:["Read: ",new Date(I.readAt).toLocaleString()]}),I.errorMessage&&t.jsxs("span",{className:"text-red-500",children:["Error: ",I.errorMessage]})]})]})]},I.id))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(_r,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"No communications yet"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Start a conversation by sending an email or WhatsApp message"}),t.jsx("button",{onClick:()=>a("compose"),className:"mt-4 bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Send First Message"})]})]})]})]})},KI=({entityType:e,entityId:r,quotations:a,invoices:s,onRefresh:n})=>{const{hasPermission:i}=xr(),o=mt(),[c,u]=h.useState("quotations"),m=y=>{const p={DRAFT:"bg-gray-100 text-gray-800",SENT:"bg-blue-100 text-blue-800",VIEWED:"bg-indigo-100 text-indigo-800",ACCEPTED:"bg-green-100 text-green-800",PAID:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",EXPIRED:"bg-orange-100 text-orange-800",OVERDUE:"bg-red-100 text-red-800",CANCELLED:"bg-gray-100 text-gray-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800",REFUNDED:"bg-purple-100 text-purple-800"};return p[y]||p.DRAFT},f=e==="deal"?{title:"Sales Proposals & Invoices",quotation:"Proposal",quotationPlural:"Proposals",emptyQuotationTitle:"No Proposals Yet",emptyQuotationDesc:"Create your first sales proposal to advance this deal.",emptyInvoiceDesc:"Generate invoices from accepted proposals or create directly."}:{title:"Quotations & Invoices",quotation:"Quotation",quotationPlural:"Quotations",emptyQuotationTitle:"No Quotations Yet",emptyQuotationDesc:"Create your first quotation for this contact.",emptyInvoiceDesc:"Create invoices from accepted quotations or directly."};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:f.title}),i(`${e}.create`)&&t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(me,{variant:"OUTLINE",className:"flex items-center gap-2",onClick:()=>o(`/quotations/new?entityType=${e}&entityId=${r}`),children:[t.jsx(Rt,{size:16}),"New ",f.quotation]}),t.jsxs(me,{className:"flex items-center gap-2 bg-weconnect-red hover:bg-red-600",onClick:()=>o(`/invoices/new?entityType=${e}&entityId=${r}`),children:[t.jsx(Rt,{size:16}),"New Invoice"]})]})]}),t.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"quotations",label:f.quotationPlural,count:a.length},{id:"invoices",label:"Invoices",count:s.length}].map(y=>t.jsxs("button",{onClick:()=>u(y.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${c===y.id?"border-weconnect-red text-weconnect-red":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[y.label,y.count>0&&t.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-2 py-1 rounded-full text-xs",children:y.count})]},y.id))})}),c==="quotations"&&t.jsx("div",{className:"space-y-4",children:a.length===0?t.jsxs(Ee,{className:"p-8 text-center",children:[t.jsx(Lt,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:f.emptyQuotationTitle}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:f.emptyQuotationDesc}),i(`${e}.create`)&&t.jsxs(me,{onClick:()=>o(`/quotations/new?entityType=${e}&entityId=${r}`),children:["Create ",f.quotation]})]}):a.map(y=>t.jsx(Ee,{className:"p-4 hover:shadow-lg transition-shadow",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(Lt,{size:24,className:"text-blue-600 dark:text-blue-400"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:y.quotationNumber}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:y.title}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created: ",new Date(y.createdAt).toLocaleDateString(),y.validUntil&&t.jsxs("span",{children:["  Valid until: ",new Date(y.validUntil).toLocaleDateString()]})]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${m(y.status)}`,children:y.status}),t.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",y.totalAmount.toLocaleString()]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(me,{size:"SM",variant:"GHOST",onClick:async()=>{try{const p=await oe.get(`/quotations/${y.id}/pdf/preview`,{responseType:"blob"}),b=URL.createObjectURL(new Blob([p.data],{type:"application/pdf"}));window.open(b,"_blank")}catch{}},children:t.jsx(Bt,{size:14})}),t.jsx(me,{size:"SM",variant:"GHOST",onClick:async()=>{try{const p=await oe.get(`/quotations/${y.id}/pdf/download`,{responseType:"blob"}),b=URL.createObjectURL(new Blob([p.data])),j=document.createElement("a");j.href=b,j.download=`${y.quotationNumber||"quotation"}.pdf`,j.click()}catch{}},children:t.jsx(hs,{size:14})}),t.jsx(me,{size:"SM",variant:"OUTLINE",onClick:async()=>{try{await oe.put(`/quotations/${y.id}/accept`),(await oe.post(`/quotations/${y.id}/generate-invoice`)).data?.success&&n?.()}catch{}},children:"Create Invoice"})]})]})]})},y.id))}),c==="invoices"&&t.jsx("div",{className:"space-y-4",children:s.length===0?t.jsxs(Ee,{className:"p-8 text-center",children:[t.jsx(Lt,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Invoices Yet"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:f.emptyInvoiceDesc}),i(`${e}.create`)&&t.jsx(me,{onClick:()=>o(`/invoices/new?entityType=${e}&entityId=${r}`),children:"Create Invoice"})]}):s.map(y=>t.jsx(Ee,{className:"p-4 hover:shadow-lg transition-shadow",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(Lt,{size:24,className:"text-green-600 dark:text-green-400"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:y.invoiceNumber}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:y.title}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created: ",new Date(y.createdAt).toLocaleDateString(),y.dueDate&&t.jsxs("span",{children:["  Due: ",new Date(y.dueDate).toLocaleDateString()]})]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${m(y.status)}`,children:y.status.replace("_"," ")}),t.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",Number(y.totalAmount).toLocaleString()]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(me,{size:"SM",variant:"GHOST",onClick:async p=>{p.stopPropagation();try{const b=await oe.get(`/invoices/${y.id}/pdf/preview`,{responseType:"blob"}),j=URL.createObjectURL(new Blob([b.data],{type:"application/pdf"}));window.open(j,"_blank")}catch(b){console.error("Error previewing invoice:",b),b?.response?.status===404?o(`/invoices/${y.id}`):M.error(b?.response?.data?.message||"Failed to preview invoice")}},children:t.jsx(Bt,{size:14})}),t.jsx(me,{size:"SM",variant:"GHOST",onClick:async p=>{p.stopPropagation();try{const b=await oe.get(`/invoices/${y.id}/pdf/download`,{responseType:"blob"}),j=URL.createObjectURL(new Blob([b.data])),v=document.createElement("a");v.href=j,v.download=`${y.invoiceNumber||"invoice"}.pdf`,v.click()}catch(b){console.error("Error downloading invoice:",b),b?.response?.status===404?o(`/invoices/${y.id}`):M.error(b?.response?.data?.message||"Failed to download invoice")}},children:t.jsx(hs,{size:14})})]})]})]})},y.id))})]})},GI=({entityType:e,entityId:r,tasks:a})=>{const{user:s,hasPermission:n}=xr(),[i,o]=h.useState(a),[c,u]=h.useState(!1),[m,g]=h.useState("all"),[f,y]=h.useState("all"),[p,b]=h.useState(""),[j,v]=h.useState(!1),[N,k]=h.useState(!1),[E,C]=h.useState({title:"",description:"",priority:"MEDIUM",dueDate:""});h.useEffect(()=>{S()},[e,r]);const S=async()=>{try{u(!0);const L=await cs.list({entityType:e,entityId:r,status:"PENDING,IN_PROGRESS,COMPLETED"}),T=(L?.data?.tasks||L?.data?.items||L?.tasks||L?.items||[]).map(_=>({..._,id:String(_.id),assignedTo:_.assignedUser?{id:String(_.assignedUser.id),firstName:_.assignedUser.firstName,lastName:_.assignedUser.lastName}:void 0,createdBy:_.createdByUser?{id:String(_.createdByUser.id),firstName:_.createdByUser.firstName,lastName:_.createdByUser.lastName}:void 0}));o(T)}catch{o(a||[])}finally{u(!1)}},P=async()=>{try{if(!E.title.trim()){M.error("Please enter a task title");return}const L=Number(s?.id||s?.userId);if(!L){M.error("Unable to determine current user");return}k(!0);const G={};e==="deal"&&(G.dealId=Number(r)),e==="lead"&&(G.leadId=Number(r)),e==="contact"&&(G.contactId=Number(r)),await cs.create({title:E.title.trim(),description:E.description?.trim()||void 0,priority:E.priority,status:"PENDING",dueDate:E.dueDate?new Date(E.dueDate).toISOString():void 0,createdBy:L,...G}),M.success("Task created"),v(!1),C({title:"",description:"",priority:"MEDIUM",dueDate:""}),await S()}catch(L){M.error(L?.response?.data?.message||"Failed to create task")}finally{k(!1)}},D=i.filter(L=>{const G=m==="all"||L.status===m,T=f==="all"||L.priority===f,_=p===""||L.title.toLowerCase().includes(p.toLowerCase())||L.description?.toLowerCase().includes(p.toLowerCase());return G&&T&&_}).sort((L,G)=>{const T={URGENT:4,HIGH:3,MEDIUM:2,LOW:1},_=T[L.priority],F=T[G.priority];return _!==F?F-_:L.dueDate&&G.dueDate?new Date(L.dueDate).getTime()-new Date(G.dueDate).getTime():new Date(G.createdAt).getTime()-new Date(L.createdAt).getTime()}),I=L=>{const G={LOW:"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300",MEDIUM:"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300",HIGH:"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-300",URGENT:"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300"};return G[L]||G.MEDIUM},H=L=>{const G={PENDING:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-300",IN_PROGRESS:"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300",COMPLETED:"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300",CANCELLED:"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300"};return G[L]||G.PENDING},W=L=>{switch(L){case"URGENT":return t.jsx(ur,{size:16,className:"text-red-600"});case"HIGH":return t.jsx(Jh,{size:16,className:"text-orange-600"});case"MEDIUM":return t.jsx(wa,{size:16,className:"text-blue-600"});default:return t.jsx(Gw,{size:16,className:"text-gray-600"})}},K=L=>{switch(L){case"COMPLETED":return t.jsx(ct,{size:20,className:"text-green-600"});case"IN_PROGRESS":return t.jsx(Yt,{size:20,className:"text-blue-600"});case"CANCELLED":return t.jsx(S2,{size:20,className:"text-red-600"});default:return t.jsx(S2,{size:20,className:"text-gray-400"})}},B=L=>{const G=new Date(L),T=new Date,_=G.getTime()-T.getTime(),F=Math.ceil(_/(1e3*60*60*24));return F<0?`Overdue by ${Math.abs(F)} days`:F===0?"Due today":F===1?"Due tomorrow":F<=7?`Due in ${F} days`:G.toLocaleDateString()},z=L=>new Date(L)<new Date,q=async(L,G)=>{try{if(G==="COMPLETED"){const T=await cs.update(Number(L),{status:"PENDING"}),_=T?.data?.task||T?.task;o(F=>F.map(ee=>ee.id===L?{...ee,status:"PENDING",completedAt:void 0}:ee)),M.success("Task reopened")}else{const T=await cs.complete(Number(L)),_=T?.data?.task||T?.task;o(F=>F.map(ee=>ee.id===L?{...ee,status:"COMPLETED",completedAt:new Date().toISOString()}:ee)),M.success("Task marked as completed")}}catch(T){M.error(T?.response?.data?.message||"Failed to update task")}},J={pending:D.filter(L=>L.status==="PENDING"),inProgress:D.filter(L=>L.status==="IN_PROGRESS"),completed:D.filter(L=>L.status==="COMPLETED"),cancelled:D.filter(L=>L.status==="CANCELLED")},ae=i.length,ne=i.filter(L=>L.status==="COMPLETED").length,re=i.filter(L=>L.dueDate&&z(L.dueDate)&&L.status!=="COMPLETED").length;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Task Management"}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mt-1",children:[t.jsxs("span",{children:[ae," total"]}),t.jsxs("span",{children:[ne," completed"]}),re>0&&t.jsxs("span",{className:"text-red-600 dark:text-red-400 font-medium",children:[re," overdue"]})]})]}),n("task.create")&&t.jsx(me,{onClick:()=>v(L=>!L),children:j?"Cancel":"New Task"})]}),j&&t.jsxs(Ee,{className:"p-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"Title"}),t.jsx("input",{type:"text",value:E.title,onChange:L=>C({...E,title:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Task title"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"Due Date"}),t.jsx("input",{type:"date",value:E.dueDate,onChange:L=>C({...E,dueDate:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"Priority"}),t.jsxs("select",{value:E.priority,onChange:L=>C({...E,priority:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[t.jsx("option",{value:"URGENT",children:"Urgent"}),t.jsx("option",{value:"HIGH",children:"High"}),t.jsx("option",{value:"MEDIUM",children:"Medium"}),t.jsx("option",{value:"LOW",children:"Low"})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"Description"}),t.jsx("textarea",{value:E.description,onChange:L=>C({...E,description:L.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Optional details"})]})]}),t.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[t.jsx(me,{onClick:P,disabled:N,className:"bg-weconnect-red hover:bg-red-600",children:N?"Creating...":"Create Task"}),t.jsx(me,{variant:"OUTLINE",onClick:()=>v(!1),children:"Cancel"})]})]}),t.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),t.jsx("input",{type:"text",placeholder:"Search tasks...",value:p,onChange:L=>b(L.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent"})]}),t.jsxs("select",{value:m,onChange:L=>g(L.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"PENDING",children:"Pending"}),t.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),t.jsx("option",{value:"COMPLETED",children:"Completed"}),t.jsx("option",{value:"CANCELLED",children:"Cancelled"})]}),t.jsxs("select",{value:f,onChange:L=>y(L.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent",children:[t.jsx("option",{value:"all",children:"All Priority"}),t.jsx("option",{value:"URGENT",children:"Urgent"}),t.jsx("option",{value:"HIGH",children:"High"}),t.jsx("option",{value:"MEDIUM",children:"Medium"}),t.jsx("option",{value:"LOW",children:"Low"})]})]}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-700 dark:text-gray-300",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),t.jsxs("span",{children:[J.completed.length," Completed"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),t.jsxs("span",{children:[J.inProgress.length," In Progress"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),t.jsxs("span",{children:[J.pending.length," Pending"]})]})]})]}),t.jsx("div",{className:"space-y-4",children:c?t.jsxs(Ee,{className:"p-8 text-center",children:[t.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-weconnect-red border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading tasks..."})]}):D.length===0?t.jsxs(Ee,{className:"p-8 text-center",children:[t.jsx(ct,{size:48,className:"mx-auto text-gray-400 dark:text-gray-500 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Tasks Found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:p||m!=="all"||f!=="all"?"Try adjusting your search or filter criteria.":"Create your first task to start organizing your work."})]}):D.map(L=>t.jsx(Ee,{className:"p-4 hover:shadow-lg transition-shadow",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[t.jsx("button",{onClick:()=>q(L.id,L.status),className:"mt-1 hover:scale-110 transition-transform",children:K(L.status)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("h3",{className:`text-lg font-semibold ${L.status==="COMPLETED"?"line-through text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:L.title}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${H(L.status)}`,children:L.status.replace("_"," ")}),t.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${I(L.priority)}`,children:[W(L.priority),t.jsx("span",{className:"ml-1",children:L.priority})]})]})]}),L.description&&t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:L.description}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[L.dueDate&&t.jsxs("div",{className:`flex items-center ${z(L.dueDate)&&L.status!=="COMPLETED"?"text-red-600 dark:text-red-400 font-medium":""}`,children:[t.jsx(Xh,{size:14,className:"mr-1"}),B(L.dueDate)]}),L.assignedTo&&t.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-400",children:[t.jsx(xt,{size:14,className:"mr-1"}),L.assignedTo.firstName," ",L.assignedTo.lastName]}),t.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-400",children:[t.jsx(Yt,{size:14,className:"mr-1"}),"Created ",new Date(L.createdAt).toLocaleDateString()]})]}),L.completedAt&&t.jsxs("div",{className:"mt-2 text-sm text-green-600 dark:text-green-400 font-medium",children:[" Completed on ",new Date(L.completedAt).toLocaleDateString()]})]})]})})},L.id))}),ae>0&&t.jsxs(Ee,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),t.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[ne," of ",ae," completed (",Math.round(ne/ae*100),"%)"]})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:t.jsx("div",{className:"h-2 bg-green-600 rounded-full transition-all duration-300",style:{width:`${ne/ae*100}%`}})})]})]})},YI=({activities:e})=>{const[r]=h.useState(e),[a,s]=h.useState(""),n=r.filter(m=>a===""||m.title.toLowerCase().includes(a.toLowerCase())||m.description?.toLowerCase().includes(a.toLowerCase())),i=m=>({CALL:ba,EMAIL:ir,MEETING:nr,VISIT:xt,DEMO:Sb,PRESENTATION:Lt,FOLLOW_UP:Yt,NOTE:_r,QUOTE_SENT:Lt,CONTRACT_SENT:Lt,PAYMENT_RECEIVED:ct,PROPOSAL_SENT:Lt,NEGOTIATION:wa,STAGE_CHANGED:wa,WON:ct,LOST:Yt,OTHER:_r})[m]||_r,o=m=>{const g={CALL:"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300",EMAIL:"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300",MEETING:"text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-300",VISIT:"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-300",DEMO:"text-indigo-600 bg-indigo-100 dark:bg-indigo-900 dark:text-indigo-300",PRESENTATION:"text-pink-600 bg-pink-100 dark:bg-pink-900 dark:text-pink-300",FOLLOW_UP:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-300",NOTE:"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-300",QUOTE_SENT:"text-emerald-600 bg-emerald-100 dark:bg-emerald-900 dark:text-emerald-300",CONTRACT_SENT:"text-teal-600 bg-teal-100 dark:bg-teal-900 dark:text-teal-300",PAYMENT_RECEIVED:"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300",PROPOSAL_SENT:"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300",NEGOTIATION:"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-300",STAGE_CHANGED:"text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-300",WON:"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300",LOST:"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300",OTHER:"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-300"};return g[m]||g.OTHER},c=m=>{const g=Math.floor(m/60),f=m%60;return g>0?`${g}h ${f}m`:`${f}m`},u=m=>{const g=new Date(m),y=new Date().getTime()-g.getTime(),p=Math.floor(y/(1e3*60)),b=Math.floor(p/60),j=Math.floor(b/24);return p<60?`${p} minutes ago`:b<24?`${b} hours ago`:j<7?`${j} days ago`:g.toLocaleDateString()};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Activity Timeline"}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("div",{className:"relative",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),t.jsx("input",{type:"text",placeholder:"Search activities...",value:a,onChange:m=>s(m.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent"})]})})]})}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700"}),t.jsx("div",{className:"space-y-6",children:n.length===0?t.jsxs(Ee,{className:"p-8 text-center",children:[t.jsx(nr,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Activities Found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:a?"Try adjusting your search criteria.":"No activities found. Activities will appear here automatically as you interact with this lead."})]}):n.map(m=>{const g=i(m.type),f=o(m.type);return t.jsxs("div",{className:"relative flex items-start",children:[t.jsx("div",{className:`absolute left-0 w-12 h-12 rounded-full border-4 border-white dark:border-gray-800 ${f} flex items-center justify-center z-10`,children:t.jsx(g,{size:18})}),t.jsx("div",{className:"ml-16 flex-1",children:t.jsx(Ee,{className:"p-4 hover:shadow-lg transition-shadow",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:m.title}),t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${f}`,children:m.type.replace("_"," ")}),m.isCompleted&&t.jsx(ct,{size:16,className:"text-green-600"})]}),m.description&&t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:m.description}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Yt,{size:14,className:"mr-1"}),u(m.createdAt)]}),m.duration&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(Sb,{size:14,className:"mr-1"}),c(m.duration)]}),m.user&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(xt,{size:14,className:"mr-1"}),m.user.firstName," ",m.user.lastName]})]}),m.outcome&&t.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("strong",{children:"Outcome:"})," ",m.outcome]})})]})})})})]},m.id)})})]}),n.length>0&&t.jsx("div",{className:"text-center",children:t.jsx(me,{variant:"OUTLINE",onClick:()=>{},children:"Load More Activities"})})]})},roe=()=>{const{id:e}=ui(),r=mt(),{hasPermission:a,user:s}=xr(),{getLeadSourceById:n}=Hr(),[i,o]=h.useState(null),[c,u]=h.useState(!0),[m,g]=h.useState(null),[f,y]=h.useState("overview"),[p,b]=h.useState(!1),[j,v]=h.useState(!1),[N,k]=h.useState(!1),[E,C]=h.useState(!1),[S,P]=h.useState(!1),[D,I]=h.useState(!1),[H,W]=h.useState(!1),[K,B]=h.useState([]),[z,q]=h.useState([]),[J,ae]=h.useState(!1),[ne,re]=h.useState(!1),[L,G]=h.useState([]),[T,_]=h.useState([]),[F,ee]=h.useState(!1),[Z,U]=h.useState(!1),[X,Q]=h.useState(!1),[V,ge]=h.useState([]),[Te,xe]=h.useState(!1),[qe,se]=h.useState(0),[De,Me]=h.useState([]),[Ct,Dt]=h.useState(!1),[Mt,jt]=h.useState([]),[le,Xe]=h.useState(!1),[Ke,Ne]=h.useState([]),[Nt,_t]=h.useState(!1),[vt,Ot]=h.useState({title:"",content:"",isPinned:!1}),[R,ce]=h.useState({phoneNumber:"",callType:"OUTBOUND",notes:"",outcome:""}),[de,ue]=h.useState({title:"",date:"",time:"",duration:"30",location:"",link:"",notes:""}),[Pe,pe]=h.useState(!1),[ve,Ve]=h.useState({title:"",description:"",dueDate:"",priority:"MEDIUM",assignedTo:""}),[Ge,$t]=h.useState([]);h.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission().then(Y=>{console.log("Notification permission:",Y)}),e&&(cr(parseInt(e)),Qt(parseInt(e)),lr(parseInt(e)),Fr(parseInt(e)),Ut(parseInt(e)),f==="call-logs"&&Ft(parseInt(e)),f==="proposals"&&(ia(parseInt(e)),pr(parseInt(e))),f==="meetings"&&Xt(parseInt(e))),(async()=>{try{const Y=await Er.getUsers({page:1,limit:100}),Ae=Y?.data?.users||Y?.data||Y?.users||[];$t(Ae.map(We=>({id:We.id,firstName:We.firstName,lastName:We.lastName})))}catch{}})()},[e,f]);const Qt=async Y=>{try{re(!0);const bt=((await $o.getActivitiesByLeadId(Y,1,100))?.data?.items||[]).map(et=>{let br=et.description||"";if(et.metadata&&et.metadata.changes&&Array.isArray(et.metadata.changes))br=et.metadata.changes.join(", ");else if(et.metadata){const ga=[];et.metadata.oldStatus&&et.metadata.newStatus&&ga.push(`Status: ${String(et.metadata.oldStatus).toLowerCase()}  ${String(et.metadata.newStatus).toLowerCase()}`),et.metadata.oldPriority&&et.metadata.newPriority&&ga.push(`Priority: ${String(et.metadata.oldPriority).toLowerCase()}  ${String(et.metadata.newPriority).toLowerCase()}`),et.metadata.newAssignedTo&&et.metadata.oldAssignedTo!==et.metadata.newAssignedTo&&ga.push("Assignment changed"),et.metadata.scheduledAt&&ga.push(`Scheduled for ${new Date(et.metadata.scheduledAt).toLocaleString()}`),ga.length>0&&(br=ga.join(", "))}return{id:String(et.id),type:qt(et.type),title:et.title,description:br||et.description,createdAt:et.createdAt,isCompleted:!0,user:et.user?{id:String(et.user.id),firstName:et.user.firstName||"",lastName:et.user.lastName||""}:void 0}});B(bt)}catch(Ae){console.error("Error fetching lead activities:",Ae),B([])}finally{re(!1)}},qt=Y=>({TASK_CREATED:"NOTE",TASK_UPDATED:"NOTE",TASK_COMPLETED:"NOTE",LEAD_UPDATED:"NOTE",LEAD_STATUS_CHANGED:"STAGE_CHANGED",LEAD_ASSIGNED:"NOTE",LEAD_CONVERTED:"STAGE_CHANGED",COMMUNICATION_LOGGED:"MEETING",FILE_UPLOADED:"NOTE",FILE_DELETED:"NOTE",QUOTATION_CREATED:"QUOTE_SENT",QUOTATION_UPDATED:"QUOTE_SENT",INVOICE_CREATED:"PAYMENT_RECEIVED",INVOICE_UPDATED:"PAYMENT_RECEIVED"})[Y]||"OTHER",Xt=async Y=>{try{_t(!0);const Ae=await LP.getMeetings(Y);console.log("Meetings response:",Ae);const We=Ae?.data?.items||[];Ne(We)}catch(Ae){console.error("Error fetching meetings:",Ae),console.error("Error details:",Ae?.response?.data||Ae?.message),M.error(Ae?.response?.data?.message||"Failed to fetch meetings"),Ne([])}finally{_t(!1)}},Ut=async Y=>{try{ae(!0);const We=(await Eh.getNotesByLeadId(Y))?.data?.notes||[];q(We)}catch(Ae){console.error("Error fetching notes:",Ae),M.error("Failed to fetch notes"),q([])}finally{ae(!1)}},Ft=async Y=>{try{ee(!0);const Ae=localStorage.getItem(At.AUTH_TOKEN),We=await fetch(`/api/call-logs/lead/${Y}`,{headers:{Authorization:`Bearer ${Ae}`,"Content-Type":"application/json"}});if(!We.ok)throw new Error("Failed to fetch call logs");const bt=await We.json();console.log("Fetched call logs:",bt);const br=(bt.data?.callLogs||bt.callLogs||[]).sort((ga,Ms)=>new Date(Ms.createdAt).getTime()-new Date(ga.createdAt).getTime());_(br),console.log(`Found ${br.length} call logs`)}catch(Ae){console.error("Error fetching call logs:",Ae),M.error("Failed to load call logs")}finally{ee(!1)}},lr=async Y=>{try{xe(!0);const Ae=await cs.list({entityType:"lead",entityId:Y.toString(),status:"PENDING,IN_PROGRESS,COMPLETED"}),bt=(Ae?.data?.tasks||Ae?.data?.items||Ae?.tasks||[]).sort((et,br)=>et.dueDate&&br.dueDate?new Date(et.dueDate).getTime()-new Date(br.dueDate).getTime():0);ge(bt)}catch(Ae){console.error("Error fetching tasks:",Ae),ge([])}finally{xe(!1)}},ia=async Y=>{try{Dt(!0);const Ae=localStorage.getItem(At.AUTH_TOKEN),We=await fetch(`/api/quotations?entityType=lead&entityId=${Y}`,{headers:{Authorization:`Bearer ${Ae}`,"Content-Type":"application/json"}});if(!We.ok)throw new Error("Failed to fetch quotations");const bt=await We.json();Me(bt.data?.items||bt.data?.quotations||bt.quotations||[])}catch(Ae){console.error("Error fetching quotations:",Ae),Me([])}finally{Dt(!1)}},pr=async Y=>{try{Xe(!0);const Ae=localStorage.getItem(At.AUTH_TOKEN),We=await fetch(`/api/invoices?entityType=lead&entityId=${Y}`,{headers:{Authorization:`Bearer ${Ae}`,"Content-Type":"application/json"}});if(!We.ok)throw new Error("Failed to fetch invoices");const bt=await We.json();jt(bt.data?.items||bt.data?.invoices||bt.invoices||[])}catch(Ae){console.error("Error fetching invoices:",Ae),jt([])}finally{Xe(!1)}},cr=async Y=>{try{u(!0),g(null);const Ae=await Gt.getLeadById(Y);o(Ae.data.lead||Ae.data||Ae)}catch(Ae){const We=Ae?.response?.data?.message||"Failed to load lead";g(We),M.error(We)}finally{u(!1)}},Vr=()=>{i&&r(`/leads/${i.id}/edit`)},Ca=Y=>{o(Y),C(!1),P(!1)},rr=async()=>{if(!de.title.trim()||!de.date||!de.time){M.error("Please fill in all required fields");return}if(!i||!s){M.error("Lead or user information missing");return}try{const Y=new Date(`${de.date}T${de.time}`);let Ae=`Meeting scheduled with ${i.firstName} ${i.lastName}`;if(de.location&&(Ae+=`
Location: ${de.location}`),de.link&&(Ae+=`
Meeting Link: ${de.link}`),de.notes&&(Ae+=`

Notes: ${de.notes}`),(await LP.createMeeting({leadId:i.id,userId:s.id,type:"MEETING",subject:de.title,content:Ae,direction:"outbound",duration:de.duration?parseInt(de.duration):void 0,scheduledAt:Y.toISOString()})).success){M.success("Meeting scheduled successfully");try{await fetch("/api/communication/send-meeting-email",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(At.AUTH_TOKEN)}`,"Content-Type":"application/json"},body:JSON.stringify({leadId:i.id,leadEmail:i.email,meetingTitle:de.title,meetingDate:de.date,meetingTime:de.time,location:de.location,link:de.link,notes:de.notes})})}catch(bt){console.warn("Failed to send meeting email:",bt)}k(!1),ue({title:"",date:"",time:"",duration:"30",location:"",link:"",notes:""}),e&&(Xt(parseInt(e)),Qt(parseInt(e)))}}catch(Y){M.error(Y?.response?.data?.message||"Failed to schedule meeting")}},jr=async()=>{if(!vt.title.trim()||!vt.content.trim()){M.error("Please fill in all fields");return}if(!e||!s?.id){M.error("Invalid lead or user information");return}try{const Y=await Eh.createNote({title:vt.title,content:vt.content,isPinned:vt.isPinned,leadId:parseInt(e),createdBy:s.id});if(Y.success){const Ae=Y.data.note;q([Ae,...z]),Ot({title:"",content:"",isPinned:!1}),b(!1),M.success("Note added successfully"),e&&Qt(parseInt(e))}else M.error(Y.message||"Failed to add note")}catch(Y){M.error(Y?.response?.data?.message||"Failed to add note")}},Nr=async Y=>{const Ae=Array.from(Y.target.files||[]);if(Ae.length!==0){try{const We=localStorage.getItem(At.AUTH_TOKEN);if(!We){M.error("Please login again to upload files");return}for(const bt of Ae){const et=new FormData;et.append("file",bt),et.append("entityType","lead"),et.append("entityId",i?.id?.toString()||"");const br=await fetch("/api/files/upload",{method:"POST",headers:{Authorization:`Bearer ${We}`},body:et});if(console.log("Upload response status:",br.status),!br.ok){const Ms=await br.json().catch(()=>({}));throw console.error("Upload failed:",Ms),new Error(Ms.message||`Failed to upload ${bt.name}`)}const ga=await br.json();console.log("Upload successful, response:",ga)}M.success(`${Ae.length} file(s) uploaded successfully`),i?.id&&Fr(i.id)}catch(We){console.error("Error uploading files:",We),M.error(We.message||"Failed to upload files")}v(!1)}},Fr=async Y=>{try{const Ae=localStorage.getItem(At.AUTH_TOKEN);if(!Ae){console.warn("No auth token found, skipping file fetch");return}const We=await fetch(`/api/files?entityType=lead&entityId=${Y}`,{headers:{Authorization:`Bearer ${Ae}`,"Content-Type":"application/json"}});if(We.ok){const bt=await We.json();console.log("Files response data:",bt);const et=bt.data?.files||bt.files||[];console.log("Setting files:",et),G(et)}else{const bt=await We.text();console.error("Failed to fetch files:",We.status,bt),(We.status===403||We.status===401)&&console.warn("Authentication failed when fetching files")}}catch(Ae){console.error("Error fetching files:",Ae)}},fe=Y=>{switch(Y){case"call":y("call-logs"),setTimeout(()=>Ue(),100);break;case"email":y("communication"),M.info("Opening email composer...");break;case"meeting":ue({...de,title:`Meeting with ${i?.firstName} ${i?.lastName}`,date:new Date(Date.now()+864e5).toISOString().split("T")[0],time:"14:00"}),k(!0);break;case"convert":I(!0);break}},Ue=async()=>{if(!i?.phone){M.error("No phone number available for this lead");return}try{Q(!0);const Y=localStorage.getItem(At.AUTH_TOKEN);window.location.href=`tel:${i.phone}`,"Notification"in window&&Notification.permission==="granted"?new Notification("Call Initiated",{body:`Calling ${i.firstName} ${i.lastName} at ${i.phone}`,icon:"/call-icon.png",tag:"call-initiation"}):"Notification"in window&&Notification.permission!=="denied"&&Notification.requestPermission().then(bt=>{bt==="granted"&&new Notification("Call Initiated",{body:`Calling ${i.firstName} ${i.lastName} at ${i.phone}`,icon:"/call-icon.png",tag:"call-initiation"})});const Ae=await fetch("/api/call-logs",{method:"POST",headers:{Authorization:`Bearer ${Y}`,"Content-Type":"application/json"},body:JSON.stringify({leadId:i.id,userId:s?.id,phoneNumber:i.phone,callType:"OUTBOUND",callStatus:"INITIATED"})});if(!Ae.ok){const bt=await Ae.json().catch(()=>({}));throw new Error(bt.message||"Failed to log call")}const We=await Ae.json();console.log("Call log saved:",We),M.success("Call initiated! Check your phone and notifications."),Ft(i.id)}catch(Y){console.error("Error initiating call:",Y),M.error(Y.message||"Unable to log call. Please try manually calling.")}finally{Q(!1)}},gt=async()=>{if(!R.phoneNumber.trim()){M.error("Please enter a phone number");return}try{const Y=localStorage.getItem(At.AUTH_TOKEN),Ae=await fetch("/api/call-logs",{method:"POST",headers:{Authorization:`Bearer ${Y}`,"Content-Type":"application/json"},body:JSON.stringify({leadId:i?.id,userId:s?.id,phoneNumber:R.phoneNumber,callType:R.callType,notes:R.notes,outcome:R.outcome})});if(!Ae.ok)throw new Error("Failed to add call log");const We=await Ae.json();if(console.log("Manual call log saved:",We),M.success("Call log added successfully"),U(!1),ce({phoneNumber:"",callType:"OUTBOUND",notes:"",outcome:""}),We.success&&We.data?.item){const bt={...We.data.item,user:{id:s?.id,firstName:s?.firstName||"",lastName:s?.lastName||""}};_(et=>[bt,...et])}else i?.id&&Ft(i.id);i?.id&&Qt(i.id)}catch(Y){console.error("Error adding call log:",Y),M.error("Failed to add call log")}},ft=async Y=>{if(confirm("Are you sure you want to delete this note?"))try{const Ae=await Eh.deleteNote(Y);Ae.success?(q(z.filter(We=>We.id!==Y)),M.success("Note deleted successfully"),e&&Qt(parseInt(e))):M.error(Ae.message||"Failed to delete note")}catch(Ae){console.error("Error deleting note:",Ae),M.error(Ae?.response?.data?.message||"Failed to delete note")}},Et=async Y=>{const Ae=z.find(We=>We.id===Y);if(Ae)try{const We=await Eh.updateNote(Y,{isPinned:!Ae.isPinned});We.success?(q(z.map(bt=>bt.id===Y?We.data.note:bt)),M.success("Note updated successfully"),e&&Qt(parseInt(e))):M.error(We.message||"Failed to update note")}catch(We){console.error("Error updating note:",We),M.error(We?.response?.data?.message||"Failed to update note")}},vs=async Y=>{try{const Ae=localStorage.getItem(At.AUTH_TOKEN),We=await fetch(`/api/files/${Y.id}/download?disposition=inline`,{headers:{Authorization:`Bearer ${Ae}`}});if(!We.ok)throw new Error("Failed to preview file");const bt=await We.blob(),et=URL.createObjectURL(bt);window.open(et,"_blank"),setTimeout(()=>URL.revokeObjectURL(et),3e4)}catch(Ae){M.error(Ae.message||"Unable to preview file")}},Xs=async Y=>{try{const Ae=localStorage.getItem(At.AUTH_TOKEN),We=await fetch(`/api/files/${Y.id}/download?disposition=attachment`,{headers:{Authorization:`Bearer ${Ae}`}});if(!We.ok)throw new Error("Failed to download file");const bt=await We.blob(),et=URL.createObjectURL(bt),br=document.createElement("a");br.href=et,br.download=Y.name||"download",document.body.appendChild(br),br.click(),br.remove(),setTimeout(()=>URL.revokeObjectURL(et),3e4)}catch(Ae){M.error(Ae.message||"Unable to download file")}},ke=async Y=>{if(confirm("Are you sure you want to delete this file?"))try{const Ae=localStorage.getItem(At.AUTH_TOKEN);if(!(await fetch(`/api/files/${Y}`,{method:"DELETE",headers:{Authorization:`Bearer ${Ae}`,"Content-Type":"application/json"}})).ok)throw new Error("Failed to delete file");M.success("File deleted successfully"),i?.id&&Fr(i.id)}catch(Ae){console.error("Error deleting file:",Ae),M.error("Failed to delete file")}},$e=async()=>{if(!i)return!1;try{return await Gt.updateLead(i.id,{status:"qualified"}),await cr(i.id),M.info("Lead conversion status reset. You can try converting again."),!0}catch(Y){return console.error("Failed to reset conversion status:",Y),M.error(Y?.response?.data?.message||"Failed to reset conversion status"),!1}},He=async Y=>{if(i)try{W(!0);const Ae=await Gt.convertLead(i.id,Y);M.success("Lead converted successfully!"),I(!1),await cr(i.id),Ae.data?.deal?.id&&setTimeout(()=>{r(`/deals/${Ae.data.deal.id}`)},1500)}catch(Ae){console.error("Error converting lead:",Ae);const We=Ae?.response?.data?.message||"Failed to convert lead";if(/already\s*converted/i.test(We)||Ae?.response?.status===409)try{const et=await Gt.convertLeadForce(i.id,Y);M.success("Lead converted successfully!"),I(!1),await cr(i.id),et.data?.deal?.id&&setTimeout(()=>r(`/deals/${et.data.deal.id}`),1200);return}catch(et){if(await $e())try{const ga=await Gt.convertLead(i.id,Y);M.success("Lead converted successfully!"),I(!1),await cr(i.id),ga.data?.deal?.id&&setTimeout(()=>r(`/deals/${ga.data.deal.id}`),1200);return}catch(ga){const Ms=ga?.response?.data?.message||"Failed to convert lead after reset";M.error(Ms)}else M.error(et?.response?.data?.message||We)}else M.error(We)}finally{W(!1)}},Ht=Y=>({new:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",contacted:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",qualified:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",proposal:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",negotiation:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",closed:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",lost:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"})[Y]||"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",wt=async Y=>{if(i)try{await Gt.updateLead(i.id,{status:Y}),o({...i,status:Y}),M.success("Lead status updated successfully")}catch(Ae){console.error("Failed to update lead status:",Ae),M.error(Ae?.response?.data?.message||"Failed to update lead status")}},Rs=Y=>{switch(Y){case"COMPLETED":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"ANSWERED":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"FAILED":case"NO_ANSWER":case"BUSY":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"INITIATED":case"RINGING":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"CANCELLED":return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}},ye=Y=>{if(!Y)return"N/A";const Ae=Math.floor(Y/60),We=Y%60;return`${Ae}:${We.toString().padStart(2,"0")}`},Re=Y=>Y==="INBOUND"?t.jsx(vr,{className:"h-4 w-4 text-green-500"}):t.jsx(xm,{className:"h-4 w-4 text-blue-500"});if(c)return t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:t.jsx(K2,{children:t.jsxs("div",{className:"py-8",children:[t.jsx("div",{className:"mb-8",children:t.jsx($a,{to:"/leads"})}),t.jsx("div",{className:"animate-pulse",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-6 mb-6",children:[t.jsx("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-700 rounded-full"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded mb-4 w-1/3"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),t.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"lg:col-span-2",children:t.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded-xl"})}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-xl"}),t.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-xl"})]})]})]})})]})})});if(m||!i)return t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:t.jsx(K2,{children:t.jsxs("div",{className:"py-8",children:[t.jsx("div",{className:"mb-8",children:t.jsx($a,{to:"/leads"})}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-12 text-center shadow-sm",children:[t.jsx(va,{className:"h-20 w-20 text-weconnect-red mx-auto mb-6"}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:m||"Lead not found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8 text-lg",children:"The lead you're looking for doesn't exist or you don't have permission to view it."}),t.jsx(me,{variant:"PRIMARY",onClick:()=>r("/leads"),className:"px-8 py-3",children:"Back to Leads"})]})]})})});const Be=i?.source||n(i?.sourceId?.toString()||""),Kt=[{id:"overview",label:"Overview",icon:Bt},{id:"activity",label:"Activity",icon:Wc},{id:"notes",label:"Notes",icon:Lt},{id:"files",label:"Files",icon:jb},{id:"proposals",label:"Proposals",icon:Lt},{id:"call-logs",label:"Call Logs",icon:ly},{id:"meetings",label:"Meetings",icon:nr},{id:"tasks",label:"Tasks",icon:ct},{id:"communication",label:"Communication",icon:_r}];return t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:t.jsx("div",{className:"mx-auto px-6",children:t.jsxs("div",{className:"py-4",children:[t.jsx("div",{className:"flex items-center justify-end mb-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[a("lead.update")&&t.jsxs("button",{onClick:Vr,className:"flex items-center px-3 py-1.5 bg-weconnect-red text-white rounded-lg hover:bg-red-600 transition-colors text-sm",children:[t.jsx(er,{className:"h-4 w-4 mr-1.5"}),"Edit"]}),t.jsx($a,{to:"/leads"})]})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-14 w-14 rounded-xl bg-weconnect-red flex items-center justify-center shadow-lg",children:t.jsxs("span",{className:"text-white font-bold text-xl",children:[i.firstName[0],i.lastName[0]]})})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:[i.firstName," ",i.lastName]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-gray-600 dark:text-gray-400 mb-2",children:[i.company&&t.jsxs("span",{className:"flex items-center",children:[t.jsx($i,{className:"h-3.5 w-3.5 mr-1.5 text-blue-500"}),i.company]}),i.email&&t.jsxs("span",{className:"flex items-center",children:[t.jsx(ir,{className:"h-3.5 w-3.5 mr-1.5 text-green-500"}),i.email]}),i.phone&&t.jsxs("span",{className:"flex items-center",children:[t.jsx(ba,{className:"h-3.5 w-3.5 mr-1.5 text-purple-500"}),i.phone]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsxs("select",{value:i.status,onChange:Y=>wt(Y.target.value),className:`inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium cursor-pointer border-0 focus:outline-none focus:ring-2 focus:ring-offset-1 ${Ht(i.status)}`,children:[t.jsx("option",{value:"new",children:"New"}),t.jsx("option",{value:"contacted",children:"Contacted"}),t.jsx("option",{value:"qualified",children:"Qualified"}),t.jsx("option",{value:"proposal",children:"Proposal"}),t.jsx("option",{value:"negotiation",children:"Negotiation"}),t.jsx("option",{value:"closed",children:"Closed"}),t.jsx("option",{value:"lost",children:"Lost"}),t.jsx("option",{value:"converted",children:"Converted"})]}),Be&&t.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium bg-blue-50 text-blue-600 border border-blue-200",children:Be.name}),i.assignedUser&&t.jsxs("span",{className:"flex items-center px-2.5 py-1 bg-gray-50 dark:bg-gray-700 rounded-lg text-xs",children:[t.jsx(xt,{className:"h-3 w-3 mr-1.5 text-orange-500"}),i.assignedUser.firstName," ",i.assignedUser.lastName]}),i.leadScore!==null&&i.leadScore!==void 0&&i.leadScore>0&&t.jsxs("div",{className:"flex items-center px-2.5 py-1 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[t.jsx(wa,{className:"h-3 w-3 mr-1.5 text-green-600 dark:text-green-400"}),t.jsxs("span",{className:"text-xs font-semibold text-green-600 dark:text-green-400",children:["Score: ",i.leadScore,"/10"]})]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>fe("call"),className:"flex items-center px-3 py-1.5 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors text-sm",title:"Call Lead",children:[t.jsx(ba,{className:"h-4 w-4 mr-1.5"}),"Call"]}),t.jsxs("button",{onClick:()=>fe("email"),className:"flex items-center px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors text-sm",title:"Send Email",children:[t.jsx(ir,{className:"h-4 w-4 mr-1.5"}),"Email"]}),t.jsxs("button",{onClick:()=>fe("meeting"),className:"flex items-center px-3 py-1.5 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-400 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors text-sm",title:"Schedule Meeting",children:[t.jsx(nr,{className:"h-4 w-4 mr-1.5"}),"Meeting"]}),t.jsxs("button",{onClick:()=>pe(!0),className:"flex items-center px-3 py-1.5 bg-teal-50 dark:bg-teal-900/20 text-teal-700 dark:text-teal-400 rounded-lg hover:bg-teal-100 dark:hover:bg-teal-900/30 transition-colors text-sm",title:"Create Task",children:[t.jsx(ct,{className:"h-4 w-4 mr-1.5"}),"Task"]}),t.jsxs("button",{onClick:()=>P(!0),className:"flex items-center px-3 py-1.5 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-400 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/30 transition-colors text-sm",title:"Assign Lead",children:[t.jsx(Os,{className:"h-4 w-4 mr-1.5"}),"Assign"]}),t.jsxs("button",{onClick:()=>I(!0),className:"flex items-center px-3 py-1.5 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400 rounded-lg hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors text-sm",title:"Convert Lead",children:[t.jsx(wa,{className:"h-4 w-4 mr-1.5"}),"Convert"]})]})]})]})})}),t.jsx("div",{className:"mx-auto px-6 py-6",children:t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:t.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto",children:Kt.map(Y=>{const Ae=Y.icon;return t.jsxs("button",{onClick:()=>y(Y.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${f===Y.id?"border-weconnect-red text-weconnect-red dark:text-weconnect-red":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[t.jsx(Ae,{className:"h-4 w-4 mr-1.5"}),Y.label]},Y.id)})})}),t.jsxs("div",{children:[f==="overview"&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Lead Details"}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Created ",new Date(i.createdAt).toLocaleDateString()]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[i.position&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Position"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:i.position})]}),i.website&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Website"}),t.jsx("p",{className:"text-sm",children:t.jsx("a",{href:i.website.startsWith("http://")||i.website.startsWith("https://")?i.website:`https://${i.website}`,target:"_blank",rel:"noopener noreferrer",onClick:Y=>{Y.stopPropagation();const Ae=i.website?.startsWith("http://")||i.website?.startsWith("https://")?i.website:`https://${i.website}`;window.open(Ae,"_blank","noopener,noreferrer")},className:"text-blue-600 dark:text-blue-400 hover:underline cursor-pointer font-medium",children:i.website})})]}),i.industry&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Industry"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:i.industry})]}),i.address&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Address"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:i.address})]})]}),t.jsxs("div",{className:"space-y-4",children:[(i.city||i.state||i.country)&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Location"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:[i.city,i.state,i.country].filter(Boolean).join(", ")||"N/A"})]}),i.zipCode&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Zip Code"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:i.zipCode})]}),i.companySize&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Company Size"}),t.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[i.companySize," employees"]})]}),i.annualRevenue&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Annual Revenue"}),t.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[i.currency||"USD"," ",Number(i.annualRevenue).toLocaleString()]})]})]}),t.jsxs("div",{className:"space-y-4",children:[i.priority&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Priority"}),t.jsx("p",{children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.priority==="urgent"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":i.priority==="high"?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":i.priority==="medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:i.priority})})]}),i.budget&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Budget"}),t.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[i.currency||"USD"," ",Number(i.budget).toLocaleString()]})]}),i.preferredContactMethod&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Preferred Contact"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white capitalize",children:i.preferredContactMethod})]}),i.timezone&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Timezone"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:i.timezone})]})]}),t.jsxs("div",{className:"space-y-4",children:[i.linkedinProfile&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"LinkedIn"}),t.jsx("p",{className:"text-sm",children:t.jsx("a",{href:i.linkedinProfile.startsWith("http://")||i.linkedinProfile.startsWith("https://")?i.linkedinProfile:`https://${i.linkedinProfile}`,target:"_blank",rel:"noopener noreferrer",onClick:Y=>{Y.stopPropagation();const Ae=i.linkedinProfile?.startsWith("http://")||i.linkedinProfile?.startsWith("https://")?i.linkedinProfile:`https://${i.linkedinProfile}`;window.open(Ae,"_blank","noopener,noreferrer")},className:"text-blue-600 dark:text-blue-400 hover:underline cursor-pointer font-medium",children:i.linkedinProfile})})]}),i.lastContactedAt&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Last Contacted"}),t.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[new Date(i.lastContactedAt).toLocaleDateString(),t.jsx("br",{}),t.jsx("span",{className:"text-xs text-gray-500",children:new Date(i.lastContactedAt).toLocaleTimeString()})]})]}),i.nextFollowUpAt&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Next Follow-up"}),t.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[new Date(i.nextFollowUpAt).toLocaleDateString(),t.jsx("br",{}),t.jsx("span",{className:"text-xs text-gray-500",children:new Date(i.nextFollowUpAt).toLocaleTimeString()})]})]})]})]}),i.notes&&t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Notes"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 rounded-md p-3",children:i.notes})]}),i.tags&&i.tags.length>0&&t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Tags"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:i.tags.map(Y=>{const Ae=Y.tag||Y;return t.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:(Ae.color||"#3B82F6")+"20",color:Ae.color||"#3B82F6"},children:[t.jsx(Fo,{className:"h-3 w-3 mr-1"}),Ae.name||Y.name]},Ae.id||Y.id)})})]})]}),f==="activity"&&(ne?t.jsx(Ee,{className:"p-6",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red"})})}):t.jsx(YI,{entityType:"lead",entityId:e||"",activities:K})),f==="notes"&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notes"}),t.jsx("button",{onClick:()=>b(!0),className:"bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm",children:"Add Note"})]}),J?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red"})}):z.length>0?t.jsx("div",{className:"space-y-4",children:z.map(Y=>t.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:Y.title}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>Et(Y.id),className:`p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-600 ${Y.isPinned?"text-yellow-500":"text-gray-400 dark:text-gray-500"}`,children:t.jsx(Bu,{className:"h-4 w-4",fill:Y.isPinned?"currentColor":"none"})}),t.jsx("button",{onClick:()=>ft(Y.id),className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-400 dark:text-gray-500 hover:text-red-500",children:t.jsx(ht,{className:"h-4 w-4"})})]})]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:Y.content}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[t.jsxs("span",{children:["by ",Y.user?`${Y.user.firstName} ${Y.user.lastName}`:"Unknown User"]}),t.jsx("span",{children:new Date(Y.createdAt).toLocaleDateString()})]})]},Y.id))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Lt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"No notes yet"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add notes to track important information about this lead"})]})]}),f==="files"&&(console.log("Rendering files tab, files state:",L,"length:",L.length),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Files & Attachments"}),t.jsxs("label",{className:"bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm cursor-pointer",children:["Upload File",t.jsx("input",{type:"file",multiple:!0,className:"hidden",onChange:Nr})]})]}),L.length>0?t.jsx("div",{className:"space-y-3",children:L.map(Y=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Lt,{className:"h-5 w-5 text-blue-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Y.name}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(Y.fileSize/1024/1024).toFixed(2)," MB  Uploaded ",new Date(Y.createdAt).toLocaleDateString()]}),t.jsxs("div",{className:"mt-1 flex gap-3",children:[t.jsx("button",{onClick:()=>vs(Y),className:"text-blue-600 dark:text-blue-400 text-xs hover:underline",children:"Preview"}),t.jsx("button",{onClick:()=>Xs(Y),className:"text-green-600 dark:text-green-400 text-xs hover:underline",children:"Download"})]})]})]}),t.jsx("button",{onClick:()=>ke(Y.id),className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-400 hover:text-red-500",children:t.jsx(ht,{className:"h-4 w-4"})})]},Y.id))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(jb,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"No files uploaded yet"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload documents, images, or other files related to this lead"})]})]})),f==="call-logs"&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Call Logs"}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("button",{onClick:()=>{ce({...R,phoneNumber:i?.phone||""}),U(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm flex items-center",children:[t.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Add Call Log"]}),t.jsx("button",{onClick:Ue,disabled:X||!i?.phone,className:"bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm flex items-center disabled:opacity-50",children:X?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Initiating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(ly,{className:"h-4 w-4 mr-2"}),"Call Now"]})})]})]}),F?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-weconnect-red border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading call logs..."})]}):T.length>0?t.jsx("div",{className:"space-y-4",children:T.map(Y=>t.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"flex-shrink-0",children:Re(Y.callType)}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:[Y.callType," Call"]}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Rs(Y.callStatus)}`,children:Y.callStatus.replace("_"," ")})]}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.jsx(ba,{className:"h-4 w-4 inline mr-1"}),Y.phoneNumber]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:ye(Y.duration)}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(Y.createdAt).toLocaleDateString()})]})]}),Y.notes&&t.jsxs("div",{className:"mb-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes:"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700 rounded p-2",children:Y.notes})]}),Y.outcome&&t.jsxs("div",{className:"mb-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Outcome:"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Y.outcome})]}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-600 pt-3",children:[t.jsxs("span",{children:["by ",Y.user.firstName," ",Y.user.lastName]}),t.jsx("span",{children:new Date(Y.startTime||Y.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},Y.id))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ly,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"No call logs found"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Start making calls to track your communication history"})]})]}),f==="proposals"&&t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:Ct?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-weconnect-red border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading proposals..."})]}):t.jsx(KI,{entityType:"lead",entityId:i.id.toString(),quotations:De,invoices:Mt,onRefresh:()=>{ia(i.id),pr(i.id)}})}),f==="meetings"&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Scheduled Meetings"}),t.jsxs("button",{onClick:()=>k(!0),className:"bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm flex items-center",children:[t.jsx(nr,{className:"h-4 w-4 mr-2"}),"Schedule Meeting"]})]}),Nt?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red"})}):Ke.length>0?t.jsx("div",{className:"space-y-4",children:Ke.map(Y=>t.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-1",children:Y.subject||"Meeting"}),Y.scheduledAt&&t.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mb-2",children:[t.jsx(nr,{className:"h-4 w-4 mr-2"}),new Date(Y.scheduledAt).toLocaleString()]}),Y.duration&&t.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mb-2",children:[t.jsx(Yt,{className:"h-4 w-4 mr-2"}),Y.duration," minutes"]}),Y.content&&t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 whitespace-pre-wrap",children:Y.content.split(`
`).map((Ae,We)=>{const bt=/(https?:\/\/[^\s]+|www\.[^\s]+|zoom\.us\/[^\s]+|meet\.google\.com\/[^\s]+|teams\.microsoft\.com\/[^\s]+|[a-zA-Z0-9][a-zA-Z0-9-]*\.[a-zA-Z]{2,}(?:\/[^\s]*)?)/gi,et=Ae.trim(),br=et.toLowerCase();if(br.match(/meeting\s+link\s*:/i)){const _s=et.toLowerCase().indexOf("meeting link:"),ro=et.substring(0,_s+13),Jr=et.substring(_s+13).trim();if(Jr){const za=Jr.startsWith("http://")||Jr.startsWith("https://")?Jr:`https://${Jr}`;return t.jsxs("p",{className:"mb-1",children:[t.jsxs("span",{children:[ro," "]}),t.jsx("a",{href:za,target:"_blank",rel:"noopener noreferrer",onClick:Ba=>{Ba.preventDefault(),Ba.stopPropagation(),window.open(za,"_blank","noopener,noreferrer")},className:"text-blue-600 dark:text-blue-400 hover:underline cursor-pointer font-medium",children:Jr})]},We)}}const Ms=br.startsWith("location:"),Zs=br.startsWith("notes:");if(Ms||Zs){const _s=et.indexOf(":");if(_s===-1)return t.jsx("p",{className:"mb-1",children:Ae},We);const ro=et.substring(0,_s+1),Jr=et.substring(_s+1).trim(),za=Jr.match(bt);if(za&&za.length>0){let Ba=0;const fi=[t.jsxs("span",{children:[ro," "]},"prefix")];return za.forEach((Jl,Jm)=>{const Jo=Jr.indexOf(Jl,Ba);Jo>Ba&&fi.push(t.jsx("span",{children:Jr.substring(Ba,Jo)},`text-${Jm}`));let ao=Jl.trim();!ao.startsWith("http://")&&!ao.startsWith("https://")&&(ao="https://"+ao),fi.push(t.jsx("a",{href:ao,target:"_blank",rel:"noopener noreferrer",onClick:Pd=>Pd.stopPropagation(),className:"text-blue-600 dark:text-blue-400 hover:underline cursor-pointer font-medium",children:Jl.trim()},`link-${Jm}`)),Ba=Jo+Jl.length}),Ba<Jr.length&&fi.push(t.jsx("span",{children:Jr.substring(Ba)},"text-end")),t.jsx("p",{className:"mb-1",children:fi},We)}return t.jsx("p",{className:"mb-1",children:Ae},We)}const Ad=Ae.match(bt);if(!Ad||Ad.length===0)return t.jsx("p",{className:"mb-1",children:Ae},We);let Ea=0;const Zl=[];return Ad.forEach((_s,ro)=>{const Jr=Ae.indexOf(_s,Ea);Jr>Ea&&Zl.push(t.jsx("span",{children:Ae.substring(Ea,Jr)},`text-${ro}`));let za=_s;!za.startsWith("http://")&&!za.startsWith("https://")&&(za="https://"+za),Zl.push(t.jsx("a",{href:za,target:"_blank",rel:"noopener noreferrer",onClick:Ba=>Ba.stopPropagation(),className:"text-blue-600 dark:text-blue-400 hover:underline cursor-pointer font-medium",children:_s},`link-${ro}`)),Ea=Jr+_s.length}),Ea<Ae.length&&Zl.push(t.jsx("span",{children:Ae.substring(Ea)},"text-end")),t.jsx("p",{className:"mb-1",children:Zl},We)})}),Y.outcome&&t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("span",{className:"font-medium",children:"Outcome:"})," ",Y.outcome]})]}),t.jsx("div",{className:"ml-4",children:Y.completedAt?t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:"Completed"}):t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:"Scheduled"})})]}),Y.user&&t.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 mt-2",children:[t.jsx(xt,{className:"h-3 w-3 mr-1"}),"Scheduled by ",Y.user.firstName," ",Y.user.lastName]})]},Y.id))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(nr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No meetings scheduled"}),t.jsx("button",{onClick:()=>k(!0),className:"bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm",children:"Schedule First Meeting"})]})]}),f==="tasks"&&t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:t.jsx(GI,{entityType:"lead",entityId:i.id.toString(),tasks:V.map(Y=>({...Y,id:String(Y.id),assignedTo:Y.assignedUser?{id:String(Y.assignedUser.id),firstName:Y.assignedUser.firstName,lastName:Y.assignedUser.lastName}:void 0,createdBy:Y.createdByUser?{id:String(Y.createdByUser.id),firstName:Y.createdByUser.firstName,lastName:Y.createdByUser.lastName}:{id:String(s?.id||""),firstName:s?.firstName||"",lastName:s?.lastName||""}}))},`tasks-${i.id}-${qe}`)}),f==="communication"&&t.jsx(VI,{lead:i})]})]})}),p&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>b(!1),children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",onClick:Y=>Y.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Note"}),t.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(va,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title *"}),t.jsx("input",{type:"text",value:vt.title,onChange:Y=>Ot({...vt,title:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Enter note title"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content *"}),t.jsx("textarea",{value:vt.content,onChange:Y=>Ot({...vt,content:Y.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Enter note content"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isPinned",checked:vt.isPinned,onChange:Y=>Ot({...vt,isPinned:Y.target.checked}),className:"h-4 w-4 text-weconnect-red focus:ring-weconnect-red border-gray-300 rounded"}),t.jsx("label",{htmlFor:"isPinned",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Pin this note"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[t.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),t.jsx("button",{onClick:jr,className:"px-4 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors",children:"Add Note"})]})]})}),N&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>k(!1),children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",onClick:Y=>Y.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Schedule Meeting"}),t.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(va,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Meeting Title *"}),t.jsx("input",{type:"text",value:de.title,onChange:Y=>ue({...de,title:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Enter meeting title"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date *"}),t.jsx("input",{type:"date",value:de.date,onChange:Y=>ue({...de,date:Y.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time *"}),t.jsx("input",{type:"time",value:de.time,onChange:Y=>ue({...de,time:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Duration (minutes)"}),t.jsxs("select",{value:de.duration,onChange:Y=>ue({...de,duration:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"15",children:"15 minutes"}),t.jsx("option",{value:"30",children:"30 minutes"}),t.jsx("option",{value:"45",children:"45 minutes"}),t.jsx("option",{value:"60",children:"1 hour"}),t.jsx("option",{value:"90",children:"1.5 hours"}),t.jsx("option",{value:"120",children:"2 hours"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),t.jsx("input",{type:"text",value:de.location,onChange:Y=>ue({...de,location:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Office address, physical location, etc."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Meeting Link"}),t.jsx("input",{type:"url",value:de.link,onChange:Y=>ue({...de,link:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"https://zoom.us/j/..., https://meet.google.com/..., etc."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),t.jsx("textarea",{value:de.notes,onChange:Y=>ue({...de,notes:Y.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Meeting agenda, topics to discuss, etc."})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[t.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),t.jsx("button",{onClick:rr,className:"px-4 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors",children:"Schedule Meeting"})]})]})}),t.jsx(RP,{lead:i,isOpen:E,onClose:()=>C(!1),onTransferComplete:Ca,mode:"transfer"}),t.jsx(RP,{lead:i,isOpen:S,onClose:()=>P(!1),onTransferComplete:Ca,mode:"assign"}),t.jsx(HI,{isOpen:D,onClose:()=>I(!1),onConvert:He,lead:i,isConverting:H}),Pe&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>pe(!1),children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",onClick:Y=>Y.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Create New Task"}),t.jsx("button",{onClick:()=>pe(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(va,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Task Title *"}),t.jsx("input",{type:"text",value:ve.title,onChange:Y=>Ve({...ve,title:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Enter task title"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),t.jsx("textarea",{value:ve.description,onChange:Y=>Ve({...ve,description:Y.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Enter task description"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Due Date"}),t.jsx("input",{type:"date",value:ve.dueDate,onChange:Y=>Ve({...ve,dueDate:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),t.jsxs("select",{value:ve.priority,onChange:Y=>Ve({...ve,priority:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"LOW",children:"Low"}),t.jsx("option",{value:"MEDIUM",children:"Medium"}),t.jsx("option",{value:"HIGH",children:"High"}),t.jsx("option",{value:"URGENT",children:"Urgent"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Assign To"}),t.jsxs("select",{value:ve.assignedTo,onChange:Y=>Ve({...ve,assignedTo:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"",children:"Unassigned"}),Ge.map(Y=>t.jsxs("option",{value:Y.id,children:[Y.firstName," ",Y.lastName]},Y.id))]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[t.jsx("button",{onClick:()=>{pe(!1),Ve({title:"",description:"",dueDate:"",priority:"MEDIUM",assignedTo:""})},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),t.jsx("button",{onClick:async()=>{if(!ve.title.trim()){M.error("Task title is required");return}if(!s?.id){M.error("User information not available");return}if(!i?.id){M.error("Lead information not available");return}try{let Y;ve.dueDate&&(Y=new Date(ve.dueDate).toISOString());const Ae={title:ve.title,description:ve.description||void 0,status:"PENDING",priority:ve.priority,dueDate:Y,assignedTo:ve.assignedTo?Number(ve.assignedTo):void 0,createdBy:Number(s?.id||s?.userId),leadId:Number(i.id)},We=await cs.create(Ae);if(We.success)M.success("Task created successfully!"),pe(!1),Ve({title:"",description:"",dueDate:"",priority:"MEDIUM",assignedTo:""}),i?.id&&(lr(i.id),se(bt=>bt+1)),i?.id&&Qt(i.id);else throw new Error(We.message||"Failed to create task")}catch(Y){console.error("Error creating task:",Y),M.error(Y?.response?.data?.message||Y?.message||"Failed to create task. Please try again.")}},className:"px-4 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors",children:"Create Task"})]})]})}),Z&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>U(!1),children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",onClick:Y=>Y.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add Call Log"}),t.jsx("button",{onClick:()=>U(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(va,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Lead Phone Number *"}),t.jsx("input",{type:"tel",value:R.phoneNumber,onChange:Y=>ce({...R,phoneNumber:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Enter or edit phone number"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Call Type *"}),t.jsxs("select",{value:R.callType,onChange:Y=>ce({...R,callType:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"OUTBOUND",children:"Outbound"}),t.jsx("option",{value:"INBOUND",children:"Inbound"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),t.jsx("textarea",{value:R.notes,onChange:Y=>ce({...R,notes:Y.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Add notes about call"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Outcome"}),t.jsx("input",{type:"text",value:R.outcome,onChange:Y=>ce({...R,outcome:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Call outcome (e.g., Follow-up scheduled, Not interested)"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[t.jsx("button",{onClick:()=>U(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),t.jsx("button",{onClick:gt,className:"px-4 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors",children:"Add Call Log"})]})]})})]})},rb=(e,r)=>{const a=r.find(s=>s.name.toUpperCase()===(e||"").toUpperCase());return a&&a.color?{backgroundColor:`${a.color}20`,color:a.color,border:`1px solid ${a.color}40`}:{backgroundColor:"#f3f4f6",color:"#374151"}},aoe=()=>{const e=mt(),[r,a]=h.useState([]),[s,n]=h.useState(!0),[i,o]=h.useState(null),[c,u]=h.useState("list"),[m,g]=h.useState([]),[f,y]=h.useState(!1),[p,b]=h.useState(null),[j,v]=h.useState(!1),[N,k]=h.useState(!1),[E,C]=h.useState([]),{hasPermission:S}=xr(),{refreshDealsCount:P}=jn(),{getDealStages:D,leadStatuses:I}=Hr(),{searchValue:H,debouncedSearchValue:W,setSearch:K,isSearching:B}=dd("",500),[z,q]=h.useState("createdAt"),[J,ae]=h.useState("desc"),[ne,re]=h.useState("ALL"),[L,G]=h.useState("ALL"),[T,_]=h.useState(1),[F,ee]=h.useState(10),[Z,U]=h.useState(["title","value","company","contact","phone","stage","status","expectedCloseDate"]),X=h.useMemo(()=>D(),[D]);h.useEffect(()=>{V(),Q()},[]);const Q=async()=>{try{const R=await Er.getUsers({limit:100});C(R.data.users||[])}catch(R){console.error("Error fetching users:",R)}};h.useEffect(()=>{_(1)},[W,z,J,ne,L,F]),h.useEffect(()=>{try{const R=localStorage.getItem("deals_visible_columns");if(R){const ce=JSON.parse(R);Array.isArray(ce)&&ce.every(de=>typeof de=="string")&&U(ce)}}catch{}},[]),h.useEffect(()=>{try{localStorage.setItem("deals_visible_columns",JSON.stringify(Z))}catch{}},[Z]);const V=async()=>{try{n(!0),o(null);const R=await aa.getDeals(1,100,W||void 0);a(R.data.deals||[]),await P()}catch(R){console.error("Error fetching deals:",R),R.response?.status===404?o("Deal API endpoints are being set up. Please check back in a moment."):R.response?.status===403?o("You do not have permission to view deals. Please contact your administrator."):o(R.response?.data?.message||"Failed to fetch deals"),a([])}finally{n(!1)}},ge=async(R,ce)=>{const de=r;a(ue=>ue.map(Pe=>Pe.id===R?{...Pe,status:ce}:Pe));try{await aa.updateDeal(R,{status:ce}),M.success("Status updated")}catch{M.error("Failed to update status"),a(de)}},Te=()=>{Cd("deals_template.csv",["title","description","value","currency","status","probability","expectedCloseDate"],[["Sample Deal","Sample Description","1000","USD","DRAFT","50","2023-12-31"]]),M.success("Template downloaded")},xe=async()=>{v(!0);try{const R=await aa.bulkExportDeals(W),ce=window.URL.createObjectURL(R),de=document.createElement("a");de.href=ce,de.download=`deals_export_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(de),de.click(),window.URL.revokeObjectURL(ce),document.body.removeChild(de),M.success("Deals exported successfully")}catch{M.error("Failed to export deals")}finally{v(!1)}},qe=R=>{const ce=R.target.files?.[0];if(ce){if(!ce.name.endsWith(".csv")){M.error("Please select a CSV file");return}b(ce)}},se=async()=>{if(!p){M.error("Please select a file");return}k(!0);try{const R=await aa.bulkImportDeals(p);R.success?(M.success(R.data?.message||"Import successful"),y(!1),b(null),V()):M.error(R.message||"Import failed")}catch(R){M.error(R.response?.data?.message||"Import failed")}finally{k(!1)}},De=async R=>{if(!R)return;const ce=R==="unassigned"?null:parseInt(R);try{await aa.bulkAssignDeals(m,ce),a(de=>de.map(ue=>m.includes(ue.id)?{...ue,assignedTo:ce??void 0}:ue)),g([]),M.success("Deals assigned successfully")}catch{M.error("Failed to assign deals")}},Ct=[...r.filter(R=>{const ce=(W||"").toLowerCase(),de=R.companies?.name||R.lead?.company||"",ue=!ce||(R.title||"").toLowerCase().includes(ce)||(R.description||"").toLowerCase().includes(ce)||(R.lead?.firstName||"").toLowerCase().includes(ce)||(R.lead?.lastName||"").toLowerCase().includes(ce)||(R.lead?.phone||"").toLowerCase().includes(ce)||de.toLowerCase().includes(ce),Pe=ne==="ALL"||(R.stage||"")===ne,pe=L==="ALL"||(R.status||"")===L;return ue&&Pe&&pe})].sort((R,ce)=>{const de=J==="asc"?1:-1,ue=ve=>{switch(z){case"title":return ve.title||"";case"value":return ve.value||0;case"stage":return ve.stage||"";case"expectedCloseDate":return ve.expectedCloseDate||"";case"company":return(ve.companies?.name||ve.lead?.company||"").toLowerCase();case"contact":return`${ve.lead?.firstName||""} ${ve.lead?.lastName||""}`.toLowerCase();case"phone":return ve.lead?.phone||"";case"status":return ve.status||"";case"createdAt":default:return ve.createdAt||""}},Pe=ue(R),pe=ue(ce);return z==="value"?(Pe-pe)*de:z==="createdAt"||z==="expectedCloseDate"?(new Date(Pe).getTime()-new Date(pe).getTime())*de:String(Pe).localeCompare(String(pe))*de}),Dt=R=>{q(ce=>ce===R?(ae(de=>de==="asc"?"desc":"asc"),ce):(ae("asc"),R))},Mt=Ct.length,jt=Math.max(1,Math.ceil(Mt/F)),le=(T-1)*F,Xe=le+F,Ke=Ct.slice(le,Xe),Ne=R=>Z.includes(R),Nt=R=>R&&X.find(de=>de.name===R)?.color||"#6B7280",_t=R=>{switch(R?.toLowerCase()){case"high":case"urgent":return"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300";case"medium":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300";case"low":return"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300";default:return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}},vt=R=>{switch(R?.toLowerCase()){case"high":case"urgent":return"bg-gradient-to-br from-red-100 to-orange-100 dark:from-red-950/40 dark:to-orange-950/30 border-red-300 dark:border-red-800/30";case"medium":return"bg-gradient-to-br from-amber-100 to-yellow-100 dark:from-amber-950/40 dark:to-yellow-950/30 border-amber-300 dark:border-amber-800/30";case"low":return"bg-gradient-to-br from-blue-100 to-cyan-100 dark:from-blue-950/40 dark:to-cyan-950/30 border-blue-300 dark:border-blue-800/30";default:return"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"}},Ot=R=>R.charAt(0).toUpperCase()+R.slice(1).toLowerCase();return s?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsx("div",{className:"space-y-4",children:t.jsx(Sd,{title:"Deals",subtitle:"Track and manage your sales opportunities",addLabel:"Add Deal",onAdd:S(Qe.DEAL.CREATE)?()=>e("/leads/new"):void 0,bulkActions:[{label:"Download Template",icon:t.jsx(Zh,{className:"w-4 h-4"}),onClick:Te},{label:"Import Deals",icon:t.jsx(Ri,{className:"w-4 h-4"}),onClick:()=>y(!0)},{label:"Export Deals (CSV)",icon:t.jsx(Uo,{className:"w-4 h-4"}),onClick:xe,disabled:j}]})}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4 flex-1",children:[t.jsxs("div",{className:"",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t.jsxs("div",{className:"flex items-center gap-2",children:["Search",B&&t.jsx("span",{className:"text-xs text-blue-500 flex items-center gap-1",children:"Searching..."})]})}),t.jsx(kd,{value:H,onChange:K,placeholder:"Search deals...",className:"max-w-full"})]}),t.jsx("div",{className:"w-full sm:w-48 sm:min-w-[220px]",children:t.jsx(Yr,{label:"Stage",value:ne,onChange:R=>re(R),options:[{value:"ALL",label:"All stages"},...X.map(R=>({value:R.name,label:R.name}))]})}),t.jsx("div",{className:"w-full sm:w-48 sm:min-w-[220px]",children:t.jsx(Yr,{label:"Status",value:L,onChange:R=>G(R),options:[{value:"ALL",label:"All statuses"},...(I||[]).map(R=>({value:R.name,label:R.name}))]})}),t.jsx("div",{className:"w-full sm:w-48 sm:min-w-[220px]",children:t.jsx(Yr,{label:"Sort by",value:z,onChange:R=>q(R),options:[{value:"createdAt",label:"Created date"},{value:"title",label:"Title"},{value:"value",label:"Value"},{value:"stage",label:"Stage"},{value:"expectedCloseDate",label:"Expected close"}]})}),t.jsx("div",{className:"w-full sm:w-48 sm:min-w-[200px]",children:t.jsx(Yr,{label:"Order",value:J,onChange:R=>ae(R),options:[{value:"asc",label:"Ascending"},{value:"desc",label:"Descending"}]})}),t.jsx("div",{className:"w-full sm:w-48 sm:min-w-[200px]",children:t.jsx(Yr,{label:"Items per page",value:String(F),onChange:R=>ee(Number(R)),options:[{value:"5",label:"5"},{value:"10",label:"10"},{value:"20",label:"20"},{value:"50",label:"50"}]})})]}),t.jsxs("div",{className:"hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto",children:[t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${c==="list"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>u("list"),title:"List view",children:t.jsx(gi,{className:"w-4 h-4"})}),t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${c==="kanban"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>u("kanban"),title:"Kanban view",children:t.jsx(mi,{className:"w-4 h-4"})})]})]}),i&&t.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:t.jsx("p",{className:"text-red-600 dark:text-red-400",children:i})}),c==="kanban"?t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 transition-all duration-300 p-6",children:[Ke.length===0?t.jsx(qr,{title:"No deals found",description:H?"No deals match your search criteria.":"Get started by creating your first deal.",icon:t.jsx(Qr,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),showClearButton:!!H,onClear:()=>K("")}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Ke.map(R=>{const ce=R.probability||0,de=R.priority||"medium";return t.jsxs("div",{className:`rounded-lg border shadow-sm hover:shadow-md transition-all duration-200 flex flex-col ${vt(de)}`,style:{minHeight:"320px"},children:[t.jsxs("div",{className:"px-4 pt-4 pb-2 flex items-center justify-between",children:[t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium ${_t(de)}`,children:Ot(de)}),t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium",style:rb(R.status||"",I),children:R.status||"DRAFT"})]}),t.jsxs("div",{className:"px-4 pb-3 flex-1",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2  cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors",onClick:()=>S(Qe.DEAL.READ)&&e(`/deals/${R.id}`),children:R.title}),R.description&&t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400  mb-3",children:R.description}),t.jsxs("div",{className:"flex items-center text-sm font-semibold text-green-600 dark:text-green-400 mb-3",children:[t.jsx(Qr,{className:"h-4 w-4 mr-1 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:new Intl.NumberFormat("en-US",{style:"currency",currency:R.currency||"USD"}).format(R.value||0)})]}),t.jsxs("div",{className:"space-y-1.5",children:[(R.companies?.name||R.lead?.company)&&t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center",children:[t.jsx($i,{className:"h-3 w-3 mr-1.5 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:R.companies?.name||R.lead?.company})]}),R.lead&&t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center",children:[t.jsx(xt,{className:"h-3 w-3 mr-1.5 flex-shrink-0"}),t.jsxs("span",{className:"truncate",children:[R.lead.firstName," ",R.lead.lastName]})]})]})]}),t.jsxs("div",{className:"px-4 pb-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Progress"}),t.jsxs("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:[ce,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:t.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${ce}%`}})})]}),t.jsx("div",{className:"px-4 pb-4 pt-3 border-t border-gray-100 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[R.assignedUser?t.jsx("div",{className:"h-6 w-6 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center",children:t.jsxs("span",{className:"text-white text-xs font-medium",children:[R.assignedUser.firstName?.[0]||"",R.assignedUser.lastName?.[0]||""]})}):t.jsx("div",{className:"h-6 w-6 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:t.jsx(xt,{className:"h-3 w-3 text-gray-500 dark:text-gray-400"})}),t.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(_r,{className:"h-3 w-3"}),t.jsx("span",{children:"0"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Z9,{className:"h-3 w-3"}),t.jsx("span",{children:"0"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[S(Qe.DEAL.READ)&&t.jsx("button",{onClick:ue=>{ue.stopPropagation(),e(`/deals/${R.id}`)},className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"View Deal",children:t.jsx(Bt,{className:"h-4 w-4"})}),S(Qe.DEAL.UPDATE)&&t.jsx("button",{onClick:ue=>{ue.stopPropagation(),e(`/deals/${R.id}/edit`)},className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",title:"Edit Deal",children:t.jsx(er,{className:"h-4 w-4"})}),S(Qe.DEAL.DELETE)&&t.jsx("button",{onClick:async ue=>{if(ue.stopPropagation(),!!confirm("Delete this deal?"))try{await aa.deleteDeal(R.id),a(Pe=>Pe.filter(pe=>pe.id!==R.id)),M.success("Deal deleted")}catch{M.error("Failed to delete")}},className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete Deal",children:t.jsx(ht,{className:"h-4 w-4"})}),t.jsx("button",{onClick:ue=>ue.stopPropagation(),className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"More options",children:t.jsx(Nb,{className:"h-4 w-4"})})]})]})})]},R.id)})}),Mt>0&&t.jsx("div",{className:"mt-6",children:t.jsx(zn,{currentPage:T,totalPages:jt,totalItems:Mt,itemsPerPage:F,onPageChange:R=>_(R)})})]}):t.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl shadow border border-gray-200 dark:border-gray-700 transition-all duration-300",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"mb-4",children:t.jsx(to,{currentPage:T,itemsPerPage:F,totalItems:Mt,onItemsPerPageChange:R=>ee(R),columnConfig:{columns:[{id:"title",label:"Title"},{id:"value",label:"Value"},{id:"company",label:"Company"},{id:"contact",label:"Contact"},{id:"phone",label:"Phone"},{id:"stage",label:"Stage"},{id:"status",label:"Status"},{id:"expectedCloseDate",label:"Expected Close"}],visibleColumns:Z,onChange:U,minVisible:1}})}),m.length>0&&t.jsxs("div",{className:"mb-4 flex items-center justify-between bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[t.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[m.length," selected"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Yr,{label:"Move to stage",value:"",onChange:async R=>{const ce=R;if(ce)try{a(de=>de.map(ue=>m.includes(ue.id)?{...ue,stage:ce}:ue)),await Promise.all(m.map(de=>aa.updateDeal(de,{stage:ce}))),M.success("Updated selected deals"),g([])}catch{M.error("Failed to update selected deals")}},options:X.map(R=>({value:R.name,label:R.name}))}),t.jsx(Yr,{label:"Assign to",value:"",onChange:R=>De(R),options:[{value:"unassigned",label:"Unassigned"},...E.map(R=>({value:String(R.id),label:`${R.firstName} ${R.lastName}`}))]}),S(Qe.DEAL.DELETE)&&t.jsxs(me,{variant:"DESTRUCTIVE",size:"SM",onClick:async()=>{if(confirm("Delete selected deals?"))try{await Promise.all(m.map(R=>aa.deleteDeal(R))),a(R=>R.filter(ce=>!m.includes(ce.id))),g([]),M.success("Deleted selected deals")}catch{M.error("Failed to delete selected deals")}},children:[t.jsx(ht,{className:"w-4 h-4 mr-1"})," Delete"]})]})]}),t.jsx("div",{className:"overflow-hidden relative",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 mobile-card-view table-fixed",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3",children:t.jsx("input",{type:"checkbox",checked:Ke.length>0&&Ke.every(R=>m.includes(R.id)),onChange:R=>{const ce=Ke.map(de=>de.id);g(R.target.checked?Array.from(new Set([...m,...ce])):m.filter(de=>!ce.includes(de)))}})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${Ne("title")?"":"hidden"}`,children:t.jsx(ya,{label:"Title",column:"title",sortBy:z,sortOrder:J,onChange:R=>Dt(R)})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${Ne("value")?"":"hidden"}`,children:t.jsx(ya,{label:"Value",column:"value",sortBy:z,sortOrder:J,onChange:R=>Dt(R)})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${Ne("company")?"":"hidden"}`,children:t.jsx(ya,{label:"Company",column:"company",sortBy:z,sortOrder:J,onChange:R=>Dt(R)})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${Ne("contact")?"":"hidden"}`,children:t.jsx(ya,{label:"Contact",column:"contact",sortBy:z,sortOrder:J,onChange:R=>Dt(R)})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${Ne("phone")?"":"hidden"}`,children:t.jsx(ya,{label:"Phone",column:"phone",sortBy:z,sortOrder:J,onChange:R=>Dt(R)})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${Ne("stage")?"":"hidden"}`,children:t.jsx(ya,{label:"Stage",column:"stage",sortBy:z,sortOrder:J,onChange:R=>Dt(R)})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${Ne("status")?"":"hidden"}`,children:"Status"}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${Ne("expectedCloseDate")?"":"hidden"}`,children:t.jsx(ya,{label:"Expected Close",column:"expectedCloseDate",sortBy:z,sortOrder:J,onChange:R=>Dt(R)})}),t.jsx("th",{className:"px-6 py-3 text-end text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Ke.map(R=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsx("td",{className:"px-4 py-4","data-label":"Select",children:t.jsx("input",{type:"checkbox",checked:m.includes(R.id),onChange:ce=>{g(de=>ce.target.checked?[...de,R.id]:de.filter(ue=>ue!==R.id))}})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${Ne("title")?"":"hidden"}`,"data-label":"Title",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center",children:t.jsx("span",{className:"text-white font-medium text-sm",children:(R.lead?.firstName?.[0]||R.companies?.name?.[0]||"D").toUpperCase()})})}),t.jsxs("div",{className:"min-w-[12rem]",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.jsx(ri,{to:`/deals/${R.id}`,className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:R.title})}),R.description&&t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-xs",children:R.description})]})]})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${Ne("value")?"":"hidden"}`,"data-label":"Value",children:t.jsxs("div",{className:"flex items-center text-sm font-semibold text-green-600 dark:text-green-400",children:[t.jsx("div",{className:"h-4 w-4 mr-1"}),new Intl.NumberFormat("en-US",{style:"currency",currency:R.currency}).format(R.value)]})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${Ne("company")?"":"hidden"}`,"data-label":"Company",children:t.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:R.companies?.name||R.lead?.company||"-"})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${Ne("contact")?"":"hidden"}`,"data-label":"Contact",children:t.jsxs("div",{className:"text-sm text-gray-900 dark:text-white flex items-center",children:[t.jsx(xt,{className:"h-3 w-3 mr-1"}),R.lead?`${R.lead.firstName} ${R.lead.lastName}`:"-"]})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${Ne("phone")?"":"hidden"}`,"data-label":"Phone",children:t.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:R.lead?.phone||"-"})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${Ne("stage")?"":"hidden"}`,"data-label":"Stage",children:t.jsx("span",{className:"px-2 py-1 text-xs rounded-full text-white",style:{backgroundColor:Nt(R.stage)},children:R.stage||"-"})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${Ne("status")?"":"hidden"}`,"data-label":"Status",children:S(Qe.DEAL.UPDATE)?t.jsx("select",{className:"text-xs px-2 py-1 rounded-md border border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500",style:rb(R.status||"",I),value:R.status,onChange:ce=>ge(R.id,ce.target.value),children:(I||[]).filter(ce=>ce.isActive).map(ce=>t.jsx("option",{value:ce.name,children:ce.name},ce.id))}):t.jsx("span",{className:"px-2 py-1 text-xs rounded-full",style:rb(R.status||"",I),children:R.status})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 ${Ne("expectedCloseDate")?"":"hidden"}`,"data-label":"Expected Close",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(nr,{className:"h-3 w-3 mr-1"}),R.expectedCloseDate?new Date(R.expectedCloseDate).toLocaleDateString():"-"]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-end text-sm font-medium","data-label":"Actions",children:t.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[S(Qe.DEAL.READ)&&t.jsx(ri,{to:`/deals/${R.id}`,className:"text-green-600 hover:text-green-900 p-1 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",title:"View Deal",children:t.jsx(Bt,{className:"h-4 w-4"})}),S(Qe.DEAL.UPDATE)&&t.jsx(ri,{to:`/deals/${R.id}/edit`,className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Edit Deal",children:t.jsx(er,{className:"h-4 w-4"})}),S(Qe.DEAL.DELETE)&&t.jsx("button",{className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete Deal",onClick:async()=>{if(confirm("Delete this deal?"))try{await aa.deleteDeal(R.id),a(ce=>ce.filter(de=>de.id!==R.id)),M.success("Deal deleted")}catch{M.error("Failed to delete")}},children:t.jsx(ht,{className:"h-4 w-4"})})]})})]},R.id))})]})})}),Mt>0&&t.jsx(zn,{currentPage:T,totalPages:jt,totalItems:Mt,itemsPerPage:F,onPageChange:R=>_(R)})]})}),Mt===0&&!s&&t.jsx(qr,{title:"No deals found",description:H?"No deals match your search criteria.":"Get started by creating your first deal.",icon:t.jsx(Qr,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),showClearButton:!!H,onClear:()=>K("")}),f&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200",children:[t.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Import Deals"}),t.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition-colors",children:t.jsx("div",{className:"h-6 w-6 rounded-full flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-700",children:t.jsx("span",{className:"text-xl",children:""})})})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.jsxs("p",{children:["Upload a CSV file with your deals data. Make sure it contains at least ",t.jsx("strong",{children:"title"})," and ",t.jsx("strong",{children:"value"})," columns."]}),t.jsxs("button",{onClick:Te,className:"mt-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 flex items-center gap-1 font-medium",children:[t.jsx(Zh,{className:"w-4 h-4"}),"Download CSV Template"]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select CSV File"}),t.jsxs("div",{className:`border-2 border-dashed rounded-xl p-8 text-center transition-all ${p?"border-green-300 bg-green-50 dark:border-green-800 dark:bg-green-900/10":"border-gray-300 hover:border-blue-400 dark:border-gray-600"}`,children:[t.jsx("input",{type:"file",accept:".csv",onChange:qe,className:"hidden",id:"deal-import-input"}),t.jsxs("label",{htmlFor:"deal-import-input",className:"cursor-pointer group",children:[t.jsx(Ri,{className:`mx-auto h-12 w-12 mb-3 transition-colors ${p?"text-green-500":"text-gray-400 group-hover:text-blue-500"}`}),t.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-900 dark:text-white",children:p?p.name:"Click to upload or drag and drop"}),t.jsx("span",{className:"mt-1 block text-xs text-gray-500 dark:text-gray-400",children:"CSV files only (max. 10MB)"})]})]})]})]}),t.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-800/50 flex gap-3",children:[t.jsx("button",{type:"button",onClick:()=>y(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors font-medium",children:"Cancel"}),t.jsx("button",{type:"button",onClick:se,disabled:!p||N,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium shadow-sm shadow-blue-200 dark:shadow-none disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:N?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"h-4 w-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Importing..."]}):"Import Deals"})]})]})})]})},soe=({entityType:e,entityId:r,communications:a,callLogs:s})=>{const{hasPermission:n}=xr(),[i,o]=h.useState("communications");return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Communication Center"}),n(`${e}.create`)&&t.jsxs(me,{className:"flex items-center gap-2",children:[t.jsx(Rt,{size:16}),"New Communication"]})]}),t.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"communications",label:"Communications",icon:_r},{id:"calls",label:"Call Logs",icon:ba}].map(c=>{const u=c.icon;return t.jsxs("button",{onClick:()=>o(c.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${i===c.id?"border-weconnect-red text-weconnect-red":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[t.jsx(u,{size:16}),c.label]},c.id)})})}),i==="communications"&&t.jsx("div",{className:"space-y-4",children:a.length===0?t.jsxs(Ee,{className:"p-8 text-center",children:[t.jsx(_r,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Communications Yet"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Start tracking communications to build a comprehensive history."}),n(`${e}.create`)&&t.jsx(me,{children:"Add Communication"})]}):a.map(c=>{const u=c.direction==="inbound";return t.jsx(Ee,{className:`p-4 ${u?"border-l-4 border-l-green-500 bg-green-50/50 dark:bg-green-900/10":"border-l-4 border-l-blue-500 bg-blue-50/50 dark:bg-blue-900/10"}`,children:t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsxs("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${u?"bg-green-100 dark:bg-green-900":"bg-blue-100 dark:bg-blue-900"}`,children:[c.type==="CALL"&&t.jsx(ba,{size:20,className:u?"text-green-600 dark:text-green-300":"text-blue-600 dark:text-blue-300"}),c.type==="EMAIL"&&t.jsx(ir,{size:20,className:u?"text-green-600 dark:text-green-300":"text-blue-600 dark:text-blue-300"}),c.type==="WHATSAPP"&&t.jsx(Y9,{size:20,className:u?"text-green-600 dark:text-green-300":"text-blue-600 dark:text-blue-300"}),c.type!=="CALL"&&c.type!=="EMAIL"&&c.type!=="WHATSAPP"&&t.jsx(_r,{size:20,className:u?"text-green-600 dark:text-green-300":"text-blue-600 dark:text-blue-300"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:c.subject||c.type}),t.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${u?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"}`,children:u?t.jsxs(t.Fragment,{children:[t.jsx(L9,{size:12}),"Received"]}):t.jsxs(t.Fragment,{children:[t.jsx(M9,{size:12}),"Sent"]})})]}),t.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(c.createdAt).toLocaleString()})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2 whitespace-pre-wrap",children:c.content}),c.user&&t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[u?"from":"by"," ",c.user.firstName," ",c.user.lastName]})]})]})},c.id)})}),i==="calls"&&t.jsx("div",{className:"space-y-4",children:s.length===0?t.jsxs(Ee,{className:"p-8 text-center",children:[t.jsx(ba,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Call Logs Yet"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Call logs will appear here when you make or receive calls."}),n(`${e}.create`)&&t.jsx(me,{children:"Log Call"})]}):s.map(c=>t.jsxs(Ee,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(ba,{size:20,className:`${c.callType==="INBOUND"?"text-green-600":"text-blue-600"}`}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:c.phoneNumber}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[c.callType,"  ",c.duration?`${Math.floor(c.duration/60)}m ${c.duration%60}s`:"No duration"]})]})]}),t.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(c.createdAt).toLocaleDateString()})]}),c.notes&&t.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:t.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.notes})})]},c.id))})]})},noe=({entityType:e,entityId:r,payments:a,invoices:s,currency:n})=>{const{user:i,hasPermission:o}=xr(),{formatCurrency:c,getCurrency:u}=Hr(),m=mt(),[g,f]=h.useState(a),[y,p]=h.useState(s),[b,j]=h.useState("overview"),[v,N]=h.useState(!1),[k,E]=h.useState(""),[C,S]=h.useState("all"),[P,D]=h.useState(!1),[I,H]=h.useState(!1),[W,K]=h.useState(null);h.useEffect(()=>{f(a)},[a]),h.useEffect(()=>{p(s)},[s]);const B=async U=>{if(window.confirm("Are you sure you want to delete this payment? This action cannot be undone."))try{await oe.delete(`/payments/${U}`),f(X=>X.filter(Q=>Q.id!==U)),M.success("Payment deleted successfully")}catch(X){console.error("Failed to delete payment:",X),M.error(X?.response?.data?.message||"Failed to delete payment")}finally{K(null)}},z=n||y?.[0]?.currency||u(),[q,J]=h.useState({amount:"",currency:z,paymentMethod:"CASH",paymentDate:new Date().toISOString().slice(0,10),reference:"",notes:"",invoiceId:""}),ae=y.reduce((U,X)=>U+X.totalAmount,0),ne=y.reduce((U,X)=>U+X.paidAmount,0),re=y.reduce((U,X)=>U+X.dueAmount,0),L=y.filter(U=>U.dueDate&&new Date(U.dueDate)<new Date&&["SENT","VIEWED","PARTIALLY_PAID"].includes(U.status)),G=U=>({CASH:$9,BANK_TRANSFER:Hs,CREDIT_CARD:Hs,DEBIT_CARD:Hs,PAYPAL:Hs,STRIPE:Hs,RAZORPAY:Hs,UPI:Hs,CHEQUE:Li,OTHER:Qr})[U]||Qr,T=(U,X)=>{if(X==="payment"){const Q={PENDING:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-300",PROCESSING:"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300",COMPLETED:"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300",FAILED:"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300",CANCELLED:"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300",REFUNDED:"text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-300"};return Q[U]||Q.PENDING}else{const Q={DRAFT:"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300",SENT:"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300",VIEWED:"text-indigo-600 bg-indigo-100 dark:bg-indigo-900 dark:text-indigo-300",PAID:"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300",PARTIALLY_PAID:"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-300",OVERDUE:"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300",CANCELLED:"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300",REFUNDED:"text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-300"};return Q[U]||Q.DRAFT}},_=(U,X)=>{if(X==="payment")switch(U){case"COMPLETED":return t.jsx(ct,{size:16,className:"text-green-600"});case"PROCESSING":return t.jsx(Yt,{size:16,className:"text-blue-600"});case"FAILED":return t.jsx(ur,{size:16,className:"text-red-600"});default:return t.jsx(Yt,{size:16,className:"text-yellow-600"})}else switch(U){case"PAID":return t.jsx(ct,{size:16,className:"text-green-600"});case"OVERDUE":return t.jsx(ur,{size:16,className:"text-red-600"});case"PARTIALLY_PAID":return t.jsx(Yt,{size:16,className:"text-orange-600"});default:return t.jsx(Lt,{size:16,className:"text-gray-600"})}},F=U=>new Date(U)<new Date,ee=g.filter(U=>{const X=k===""||U.paymentNumber.toLowerCase().includes(k.toLowerCase())||U.reference?.toLowerCase().includes(k.toLowerCase()),Q=C==="all"||U.status===C;return X&&Q}),Z=y.filter(U=>{const X=k===""||U.invoiceNumber.toLowerCase().includes(k.toLowerCase())||U.title.toLowerCase().includes(k.toLowerCase()),Q=C==="all"||U.status===C;return X&&Q});return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Payment Tracker"}),t.jsx("div",{className:"flex items-center space-x-3",children:o(`${e}.create`)&&t.jsxs(t.Fragment,{children:[t.jsxs(me,{variant:"OUTLINE",className:"flex items-center gap-2",onClick:()=>m(`/invoices/new?entityType=${e}&entityId=${r}`),children:[t.jsx(Lt,{size:16}),"Create Invoice"]}),t.jsxs(me,{className:"flex items-center gap-2",onClick:()=>D(!0),children:[t.jsx(Rt,{size:16}),"Record Payment"]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(Ee,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:t.jsx(Lt,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Invoiced"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c(ae,z)})]})]})}),t.jsx(Ee,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center",children:t.jsx(ct,{className:"w-6 h-6 text-green-600 dark:text-green-300"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Paid"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c(ne,z)})]})]})}),t.jsx(Ee,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900 rounded-lg flex items-center justify-center",children:t.jsx(Yt,{className:"w-6 h-6 text-orange-600 dark:text-orange-300"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Outstanding"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c(re,z)})]})]})}),t.jsx(Ee,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-lg flex items-center justify-center",children:t.jsx(ur,{className:"w-6 h-6 text-red-600 dark:text-red-300"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Overdue"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:L.length})]})]})})]}),t.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Overview",icon:wa},{id:"invoices",label:"Invoices",icon:Lt},{id:"payments",label:"Payments",icon:Hs}].map(U=>{const X=U.icon;return t.jsxs("button",{onClick:()=>j(U.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${b===U.id?"border-weconnect-red text-weconnect-red":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[t.jsx(X,{size:16}),U.label]},U.id)})})}),b==="overview"&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(Ee,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Payment Summary"}),ae>0?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Payment Progress"}),t.jsxs("span",{children:[Math.round(ne/ae*100),"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:t.jsx("div",{className:"h-2 bg-green-600 rounded-full transition-all duration-300",style:{width:`${ne/ae*100}%`}})}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Paid"}),t.jsx("p",{className:"font-semibold text-green-600",children:c(ne,u())})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Outstanding"}),t.jsx("p",{className:"font-semibold text-orange-600",children:c(re,u())})]})]})]}):t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No invoices created yet."})]}),t.jsxs(Ee,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),t.jsxs("div",{className:"space-y-3",children:[g.slice(0,5).map(U=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${U.status==="COMPLETED"?"bg-green-500":U.status==="FAILED"?"bg-red-500":"bg-yellow-500"}`}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Payment ",U.paymentNumber]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(U.paymentDate).toLocaleDateString()})]})]}),t.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c(U.amount,U.currency)})]},U.id)),g.length===0&&t.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"No payments recorded yet."})]})]})]}),b==="invoices"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),t.jsx("input",{type:"text",placeholder:"Search invoices...",value:k,onChange:U=>E(U.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent"})]}),t.jsxs("select",{value:C,onChange:U=>S(U.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"DRAFT",children:"Draft"}),t.jsx("option",{value:"SENT",children:"Sent"}),t.jsx("option",{value:"PAID",children:"Paid"}),t.jsx("option",{value:"OVERDUE",children:"Overdue"})]})]}),Z.length===0?t.jsxs(Ee,{className:"p-8 text-center",children:[t.jsx(Lt,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Invoices Found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create your first invoice to start tracking payments."}),o(`${e}.create`)&&t.jsx(me,{onClick:()=>m(`/invoices/new?entityType=${e}&entityId=${r}`),children:"Create Invoice"})]}):t.jsx("div",{className:"space-y-4",children:Z.map(U=>t.jsx(Ee,{className:"p-4 hover:shadow-lg transition-shadow",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{children:_(U.status,"invoice")}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:U.invoiceNumber}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:U.title}),t.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400 mt-1",children:[t.jsxs("span",{children:["Created: ",new Date(U.createdAt).toLocaleDateString()]}),U.dueDate&&t.jsxs("span",{className:F(U.dueDate)?"text-red-600 font-medium":"",children:["Due: ",new Date(U.dueDate).toLocaleDateString()]})]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T(U.status,"invoice")}`,children:U.status.replace("_"," ")}),t.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:c(U.totalAmount,U.currency)})]}),U.status==="PARTIALLY_PAID"&&t.jsxs("div",{className:"text-sm",children:[t.jsxs("span",{className:"text-green-600",children:["Paid: ",c(U.paidAmount,U.currency)]}),t.jsxs("span",{className:"text-orange-600 ml-2",children:["Due: ",c(U.dueAmount,U.currency)]})]}),t.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[t.jsx(me,{size:"SM",variant:"GHOST",children:t.jsx(Bt,{size:14})}),t.jsx(me,{size:"SM",variant:"GHOST",children:t.jsx(hs,{size:14})}),t.jsx(me,{size:"SM",variant:"GHOST",children:t.jsx(Nb,{size:14})})]})]})]})},U.id))})]}),b==="payments"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),t.jsx("input",{type:"text",placeholder:"Search payments...",value:k,onChange:U=>E(U.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent"})]}),t.jsxs("select",{value:C,onChange:U=>S(U.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"PENDING",children:"Pending"}),t.jsx("option",{value:"PROCESSING",children:"Processing"}),t.jsx("option",{value:"COMPLETED",children:"Completed"}),t.jsx("option",{value:"FAILED",children:"Failed"})]})]}),ee.length===0?t.jsxs(Ee,{className:"p-8 text-center",children:[t.jsx(Hs,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Payments Found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Record your first payment to start tracking transactions."}),o(`${e}.create`)&&t.jsx(me,{onClick:()=>D(!0),children:"Record Payment"})]}):t.jsx("div",{className:"space-y-4",children:ee.map(U=>{const X=G(U.paymentMethod);return t.jsx(Ee,{className:"p-4 hover:shadow-lg transition-shadow",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:t.jsx(X,{size:20,className:"text-gray-600 dark:text-gray-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:U.paymentNumber}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[U.paymentMethod.replace("_"," "),"  ",new Date(U.paymentDate).toLocaleDateString()]}),U.reference&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Ref: ",U.reference]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T(U.status,"payment")}`,children:[_(U.status,"payment"),t.jsx("span",{className:"ml-1",children:U.status})]}),t.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:c(U.amount,U.currency)})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[U.receiptUrl&&t.jsx(me,{size:"SM",variant:"GHOST",children:t.jsx(Li,{size:14})}),t.jsx(me,{size:"SM",variant:"GHOST",children:t.jsx(Bt,{size:14})}),t.jsxs("div",{className:"relative",children:[t.jsx(me,{size:"SM",variant:"GHOST",onClick:()=>K(W===U.id?null:U.id),children:t.jsx(Nb,{size:14})}),W===U.id&&t.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-10 overflow-hidden",children:t.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2 transition-colors",onClick:()=>B(U.id),children:[t.jsx(ht,{size:14}),"Delete Payment"]})})]})]})]})]})},U.id)})})]}),P&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:t.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 p-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-5",children:"Record Payment"}),y.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(ur,{size:48,className:"mx-auto text-yellow-500 mb-4"}),t.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Invoices Found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You need to create an invoice before you can record a payment. Payments must be linked to a specific invoice."}),t.jsxs("div",{className:"flex justify-center gap-3",children:[t.jsx(me,{variant:"OUTLINE",onClick:()=>D(!1),children:"Close"}),t.jsx(me,{onClick:()=>{D(!1),m(`/invoices/new?entityType=${e}&entityId=${r}`)},children:"Create Invoice"})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"Amount"}),t.jsx("input",{type:"number",value:q.amount,onChange:U=>J({...q,amount:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"0.00"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"Currency"}),t.jsx("input",{type:"text",value:q.currency,onChange:U=>J({...q,currency:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"Method"}),t.jsxs("select",{value:q.paymentMethod,onChange:U=>J({...q,paymentMethod:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[t.jsx("option",{value:"CASH",children:"Cash"}),t.jsx("option",{value:"BANK_TRANSFER",children:"Bank Transfer"}),t.jsx("option",{value:"CREDIT_CARD",children:"Credit Card"}),t.jsx("option",{value:"DEBIT_CARD",children:"Debit Card"}),t.jsx("option",{value:"PAYPAL",children:"PayPal"}),t.jsx("option",{value:"STRIPE",children:"Stripe"}),t.jsx("option",{value:"RAZORPAY",children:"Razorpay"}),t.jsx("option",{value:"UPI",children:"UPI"}),t.jsx("option",{value:"CHEQUE",children:"Cheque"}),t.jsx("option",{value:"OTHER",children:"Other"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"Payment Date"}),t.jsx("input",{type:"date",value:q.paymentDate,onChange:U=>J({...q,paymentDate:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"Reference"}),t.jsx("input",{type:"text",value:q.reference,onChange:U=>J({...q,reference:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Transaction ID, cheque no, etc."})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"Notes"}),t.jsx("textarea",{rows:3,value:q.notes,onChange:U=>J({...q,notes:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Optional notes"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:["Invoice Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:q.invoiceId,onChange:U=>{const X=U.target.value;J({...q,invoiceId:X});const Q=y.find(V=>String(V.id)===X);Q&&Q.dueAmount>0&&(!q.amount||Number(q.amount)<=0)&&J(V=>({...V,amount:String(Q.dueAmount)}))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[t.jsx("option",{value:"",children:"-- Select invoice --"}),y.filter(U=>(U.dueAmount??Math.max(U.totalAmount-(U.paidAmount||0),0))>0).map(U=>t.jsxs("option",{value:String(U.id),children:[U.invoiceNumber,"  Due ",c(U.dueAmount??Math.max(U.totalAmount-(U.paidAmount||0),0),U.currency)]},String(U.id)))]})]})]}),t.jsxs("div",{className:"mt-6 flex items-center gap-3 justify-end",children:[t.jsx(me,{onClick:async()=>{try{if(!q.invoiceId){M.error("Please select an invoice number");return}if(!q.amount||Number(q.amount)<=0){M.error("Enter a valid amount");return}H(!0);const U={amount:Number(q.amount),currency:q.currency,paymentMethod:q.paymentMethod,paymentDate:new Date(q.paymentDate).toISOString(),reference:q.reference||void 0,notes:q.notes||void 0,entityType:e,entityId:Number(r),invoiceId:Number(q.invoiceId)};e==="deal"&&(U.dealId=Number(r)),e==="lead"&&(U.leadId=Number(r));const X=await oe.post("/payments",U),Q=X?.data?.data?.payment||X?.data?.payment||X?.data;Q&&(f(V=>[{id:String(Q.id||Date.now()),paymentNumber:Q.paymentNumber||`PMT-${Q.id||Date.now()}`,amount:Number(Q.amount),currency:Q.currency||q.currency,paymentMethod:Q.paymentMethod||q.paymentMethod,paymentDate:Q.paymentDate||new Date().toISOString(),status:Q.status||"COMPLETED",reference:Q.reference,notes:Q.notes,receiptUrl:Q.receiptUrl,createdBy:Q.createdBy||{id:String(i?.id||"0"),firstName:i?.firstName||"",lastName:i?.lastName||""},createdAt:Q.createdAt||new Date().toISOString()},...V]),M.success("Payment recorded"),D(!1),J({amount:"",currency:z,paymentMethod:"CASH",paymentDate:new Date().toISOString().slice(0,10),reference:"",notes:"",invoiceId:""}))}catch(U){M.error(U?.response?.data?.message||"Failed to record payment")}finally{H(!1)}},disabled:I,className:"bg-weconnect-red hover:bg-red-600",children:I?"Saving...":"Save Payment"}),t.jsx(me,{variant:"OUTLINE",onClick:()=>D(!1),children:"Cancel"})]})]})]})})]})},ioe=({entityType:e,entityId:r,notifications:a})=>{const{hasPermission:s}=xr(),[n,i]=h.useState(a),[o,c]=h.useState("all"),u=v=>({LEAD_ASSIGNED:Yt,DEAL_CREATED:ct,DEAL_WON:ct,DEAL_LOST:da,TASK_DUE:Al,FOLLOW_UP_DUE:Yt,PAYMENT_RECEIVED:ct,QUOTE_ACCEPTED:ct,INVOICE_OVERDUE:Al,SYSTEM_ALERT:Al,REMINDER:$l,OTHER:E2})[v]||E2,m=(v,N)=>N==="URGENT"?"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300":N==="HIGH"?"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-300":{DEAL_WON:"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300",PAYMENT_RECEIVED:"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300",QUOTE_ACCEPTED:"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300",DEAL_LOST:"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300",INVOICE_OVERDUE:"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300",TASK_DUE:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-300",SYSTEM_ALERT:"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300",OTHER:"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300"}[v]||"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300",g=v=>{const N={LOW:"text-gray-600",NORMAL:"text-blue-600",HIGH:"text-orange-600",URGENT:"text-red-600"};return N[v]||N.NORMAL},f=async v=>{i(N=>N.map(k=>k.id===v?{...k,isRead:!0,readAt:new Date().toISOString()}:k))},y=async()=>{i(v=>v.map(N=>({...N,isRead:!0,readAt:new Date().toISOString()})))},p=n.filter(v=>o==="unread"?!v.isRead:o==="urgent"?v.priority==="URGENT":o==="high"?v.priority==="HIGH":!0),b=n.filter(v=>!v.isRead).length,j=n.filter(v=>v.priority==="URGENT").length;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Notifications"}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mt-1",children:[t.jsxs("span",{children:[n.length," total"]}),b>0&&t.jsxs("span",{className:"text-blue-600 font-medium",children:[b," unread"]}),j>0&&t.jsxs("span",{className:"text-red-600 font-medium",children:[j," urgent"]})]})]}),b>0&&t.jsx(me,{variant:"OUTLINE",onClick:y,children:"Mark All Read"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:[{id:"all",label:"All",count:n.length},{id:"unread",label:"Unread",count:b},{id:"urgent",label:"Urgent",count:j},{id:"high",label:"High Priority",count:n.filter(v=>v.priority==="HIGH").length}].map(v=>t.jsxs("button",{onClick:()=>c(v.id),className:`px-3 py-1 text-sm font-medium rounded-full transition-colors ${o===v.id?"bg-weconnect-red text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[v.label,v.count>0&&t.jsxs("span",{className:"ml-1 text-xs",children:["(",v.count,")"]})]},v.id))}),t.jsx("div",{className:"space-y-3",children:p.length===0?t.jsxs(Ee,{className:"p-8 text-center",children:[t.jsx($l,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:o==="all"?"No Notifications":`No ${o} notifications`}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o==="all"?"All notifications will appear here when you have activity.":`You don't have any ${o} notifications at the moment.`})]}):p.map(v=>{const N=u(v.type),k=m(v.type,v.priority);return t.jsx(Ee,{className:`p-4 cursor-pointer hover:shadow-lg transition-shadow ${v.isRead?"":"border-l-4 border-l-weconnect-red bg-blue-50/30 dark:bg-blue-900/10"}`,onClick:()=>!v.isRead&&f(v.id),children:t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${k}`,children:t.jsx(N,{size:20})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("h3",{className:`text-base font-semibold ${v.isRead?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:v.title}),v.priority!=="NORMAL"&&t.jsx("span",{className:`text-xs font-medium ${g(v.priority)}`,children:v.priority}),!v.isRead&&t.jsx("div",{className:"w-2 h-2 bg-weconnect-red rounded-full"})]}),t.jsx("p",{className:`text-sm mb-2 ${v.isRead?"text-gray-600 dark:text-gray-400":"text-gray-700 dark:text-gray-300"}`,children:v.message}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[new Date(v.createdAt).toLocaleDateString()," at ",new Date(v.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),v.actionUrl&&t.jsx(me,{size:"SM",variant:"GHOST",className:"text-xs",children:"View Details"})]})]})})})]})},v.id)})}),p.length>0&&p.length>=20&&t.jsx("div",{className:"text-center",children:t.jsx(me,{variant:"OUTLINE",children:"Load More Notifications"})})]})},ooe=()=>{const{id:e}=ui(),r=mt(),{formatCurrency:a,getDealStages:s,getCurrency:n}=Hr(),{user:i,hasPermission:o}=xr(),[c,u]=h.useState(null),[m,g]=h.useState(!0),[f,y]=um(),p=f.get("tab")||"overview",[b,j]=h.useState(p),[v,N]=h.useState(!1),[k,E]=h.useState(!1),[C,S]=h.useState(null),[P,D]=h.useState(!1),[I,H]=h.useState([]),[W,K]=h.useState([]),[B,z]=h.useState([]),[q,J]=h.useState([]),[ae,ne]=h.useState([]),[re,L]=h.useState([]),[G,T]=h.useState([]),[_,F]=h.useState([]),[ee,Z]=h.useState(!1),[U,X]=h.useState(!1),[Q,V]=h.useState(!1),[ge,Te]=h.useState(!1),[xe,qe]=h.useState(!1),se=[{id:"overview",label:"Overview",icon:Bt},{id:"pipeline",label:"Pipeline Progress",icon:wa},{id:"quotations",label:"Quotes & Proposals",icon:Lt},{id:"activities",label:"Sales Activities",icon:Wc},{id:"tasks",label:"Action Items",icon:ct},{id:"communications",label:"Communication",icon:_r},{id:"payments",label:"Payments & Revenue",icon:Hs},{id:"notifications",label:"Alerts",icon:$l}];h.useEffect(()=>{se.map(ve=>ve.id).includes(b)||j("overview")},[]);const De=s(),Me=Math.max(0,De.findIndex(pe=>pe.name===(c?.stage||""))),Ct=pe=>{const ve=String(pe?.name||"").toLowerCase();return pe?.isClosedWon?"WON":pe?.isClosedLost?"LOST":ve.includes("negotiation")?"NEGOTIATION":ve.includes("proposal")?"PROPOSAL":"DRAFT"},Dt=async pe=>{if(!c)return;const ve=De[pe];if(ve)try{const Ve=Ct(ve),Ge={status:Ve,probability:typeof ve.probability=="number"?ve.probability:c.probability};await aa.updateDeal(parseInt(c.id),Ge),u($t=>$t&&{...$t,stage:ve.name,status:Ve,probability:Ge.probability}),M.success(`Stage changed to ${ve.name}`)}catch(Ve){console.error("Failed to change stage",Ve),M.error("Failed to change stage")}},Mt=()=>Dt(Math.max(0,Me-1)),jt=()=>Dt(Math.min(De.length-1,Me+1));h.useEffect(()=>{e&&le()},[e]),h.useEffect(()=>{const pe=f.get("tab");if(b&&pe!==b){const ve=new URLSearchParams(f);ve.set("tab",b),y(ve,{replace:!0})}},[b]),h.useEffect(()=>{if(c)switch(b){case"overview":_t(),Ot();break;case"activities":_t();break;case"tasks":Ot();break;case"communications":R();break;case"quotations":ce();break;case"payments":de();break;case"notifications":ue();break}},[b,c]);const le=async()=>{try{g(!0);const ve=(await aa.getDeal(parseInt(e))).data,Ve={...ve,id:ve.id?.toString()||e,value:Number(ve.value??0),contactName:ve.contact?`${ve.contact.firstName} ${ve.contact.lastName}`:void 0,contactId:ve.contact?.id?.toString(),companyName:ve.companies?.name,assignedToName:ve.assignedUser?`${ve.assignedUser.firstName} ${ve.assignedUser.lastName}`:void 0,assignedToId:ve.assignedUser?.id?.toString(),leadId:ve.lead?.id?.toString()||ve.leadId?.toString(),leadName:ve.lead?`${ve.lead.firstName} ${ve.lead.lastName}`:void 0};u(Ve),Ve.leadId&&vt(Ve.leadId),ve.tasks&&ve.tasks.length>0&&K(ve.tasks)}catch(pe){console.error("Failed to fetch deal:",pe),pe.response?.status===404?(M.error("Deal not found"),r("/deals")):M.error("Failed to load deal details")}finally{g(!1)}},Xe=async()=>{if(!(!c||!window.confirm("Are you sure you want to delete this deal?")))try{N(!0),await aa.deleteDeal(parseInt(c.id)),M.success("Deal deleted successfully"),r("/deals")}catch(pe){console.error("Failed to delete deal:",pe),M.error("Failed to delete deal")}finally{N(!1)}},Ke=async()=>{if(!c?.leadId){M.error("This deal is not linked to a lead");return}if(window.confirm("Are you sure you want to undo the lead conversion? This will revert the lead to its previous status and delete this deal."))try{E(!0);const pe=await Gt.undoConversion(parseInt(c.leadId));pe.success?(M.success("Lead conversion undone successfully"),r(`/leads/${c.leadId}`)):M.error(pe.message||"Failed to undo conversion")}catch(pe){console.error("Failed to undo conversion:",pe),M.error(pe?.response?.data?.message||"Failed to undo conversion")}finally{E(!1)}},Ne=pe=>s().find(Ge=>Ge.name===pe)?.color||"#6B7280",Nt=pe=>{const ve={LOW:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",MEDIUM:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",HIGH:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",URGENT:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"};return ve[pe]||ve.MEDIUM},_t=async()=>{try{if(Z(!0),c?.leadId){const Ve=await $o.getActivitiesByLeadId(parseInt(c.leadId),1,5),Ge=Ve?.data?.items||Ve?.items||Ve?.data?.activities||[];H(Ge);return}const pe=await $o.getRecentActivities(5),ve=pe?.data?.items||pe?.items||[];H(ve)}catch(pe){console.error("Failed to fetch activities:",pe),H([])}finally{Z(!1)}},vt=async pe=>{try{D(!0);const ve=await Gt.getLeadById(parseInt(pe)),Ve=(ve&&(ve.data?.lead||ve.data||ve.lead))??ve;S(Ve)}catch(ve){console.error("Failed to fetch linked lead details:",ve),S(null)}finally{D(!1)}},Ot=async()=>{try{X(!0);const pe=await cs.list({page:1,limit:10,status:"PENDING,IN_PROGRESS",entityType:"deal",entityId:c?.id||e,dealId:parseInt(c?c.id:e)}),Ve=[...pe?.data?.tasks||pe?.data?.items||pe?.tasks||pe?.items||[]].sort((Ge,$t)=>Ge?.dueDate&&$t?.dueDate?new Date(Ge.dueDate).getTime()-new Date($t.dueDate).getTime():Ge?.dueDate?-1:$t?.dueDate?1:new Date($t.createdAt).getTime()-new Date(Ge.createdAt).getTime());K(Ve)}catch(pe){console.error("Failed to fetch tasks:",pe),K([])}finally{X(!1)}},R=async()=>{try{V(!0);const pe=localStorage.getItem(At.AUTH_TOKEN);if(c?.leadId){const Ge=c.leadId,[$t,Qt]=await Promise.all([fetch(`/api/communication/messages/lead/${Ge}`,{headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"}}),fetch(`/api/call-logs/lead/${Ge}`,{headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"}})]);if($t.ok){const qt=await $t.json(),Ut=(qt?.data?.messages||qt?.messages||[]).map(Ft=>({id:String(Ft.id),type:Ft.type,subject:Ft.subject,content:Ft.content,direction:(Ft.direction||"").toLowerCase(),createdAt:Ft.sentAt||Ft.createdAt,user:Ft.user?{firstName:Ft.user.firstName,lastName:Ft.user.lastName}:void 0}));z(Ut)}if(Qt.ok){const qt=await Qt.json();J(qt?.data?.callLogs||qt?.callLogs||[])}return}const[ve,Ve]=await Promise.all([fetch(`/api/communications?entityType=deal&entityId=${e}`,{headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"}}),fetch(`/api/call-logs?entityType=deal&entityId=${e}`,{headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"}})]);if(ve.ok){const Ge=await ve.json();z(Ge.data?.communications||Ge.communications||[])}if(Ve.ok){const Ge=await Ve.json();J(Ge.data?.callLogs||Ge.callLogs||[])}}catch(pe){console.error("Failed to fetch communications:",pe)}finally{V(!1)}},ce=async()=>{try{Te(!0);const pe=localStorage.getItem(At.AUTH_TOKEN),[ve,Ve]=await Promise.all([fetch(`/api/quotations?entityType=deal&entityId=${e}`,{headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"}}),fetch(`/api/invoices?entityType=deal&entityId=${e}`,{headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"}})]);if(ve.ok){const Ge=await ve.json();ne(Ge.data?.quotations||Ge.quotations||[])}if(Ve.ok){const Ge=await Ve.json();L(Ge.data?.invoices||Ge.invoices||[])}}catch(pe){console.error("Failed to fetch quotations:",pe)}finally{Te(!1)}},de=async()=>{try{qe(!0);const pe=localStorage.getItem(At.AUTH_TOKEN),[ve,Ve]=await Promise.all([fetch(`/api/payments?entityType=deal&entityId=${e}`,{headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"}}),fetch(`/api/invoices?entityType=deal&entityId=${e}`,{headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"}})]);if(ve.ok){const Ge=await ve.json();T(Ge.data?.payments||Ge.payments||[])}if(Ve.ok){const Ge=await Ve.json();L(Ge.data?.invoices||Ge.invoices||[])}}catch(pe){console.error("Failed to fetch payments or invoices:",pe)}finally{qe(!1)}},ue=async()=>{try{const pe=localStorage.getItem(At.AUTH_TOKEN),ve=await fetch(`/api/notifications?entityType=deal&entityId=${e}`,{headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"}});if(ve.ok){const Ve=await ve.json();F(Ve.data?.notifications||Ve.notifications||[])}}catch(pe){console.error("Failed to fetch notifications:",pe)}},Pe=pe=>{const ve={DRAFT:"bg-gray-100 text-gray-800",PROPOSAL:"bg-blue-100 text-blue-800",NEGOTIATION:"bg-yellow-100 text-yellow-800",WON:"bg-green-100 text-green-800",LOST:"bg-red-100 text-red-800"};return ve[pe]||ve.DRAFT};return m?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red"})}):c?t.jsxs("div",{className:"mx-auto p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center",children:t.jsxs(ri,{to:"/deals",className:"flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mr-4 transition-colors",children:[t.jsx(vr,{size:20,className:"mr-2"}),"Back to Deals"]})}),t.jsxs("div",{className:"flex space-x-3",children:[c.leadId&&t.jsxs(me,{variant:"OUTLINE",onClick:Ke,disabled:k,className:"flex items-center gap-2 border-orange-300 text-orange-700 hover:bg-orange-50 dark:border-orange-700 dark:text-orange-400 dark:hover:bg-orange-900/20",children:[t.jsx(ym,{size:16}),k?"Undoing...":"Undo Conversion"]}),o("deal.update")&&t.jsxs(me,{variant:"OUTLINE",onClick:()=>r(`/deals/${c.id}/edit`),className:"flex items-center gap-2",children:[t.jsx(er,{size:16}),"Edit Deal"]}),o("deal.delete")&&t.jsxs(me,{variant:"DESTRUCTIVE",onClick:Xe,disabled:v,className:"flex items-center gap-2",children:[t.jsx(ht,{size:16}),v?"Deleting...":"Delete"]})]})]}),t.jsxs(Ee,{variant:"ELEVATED",className:"p-6 rounded-2xl shadow-lg",children:[t.jsxs("div",{className:"flex items-start justify-between mb-6",children:[t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mr-4",children:t.jsx(Qr,{size:28,className:"text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:c.companyName||C?.company||""}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Deal: ",t.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:c.title})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[t.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${Pe(c.status)}`,children:c.status}),t.jsx("span",{className:"px-2.5 py-1 text-xs font-medium rounded-full text-white",style:{backgroundColor:Ne(c.stage)},children:c.stage}),t.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${Nt(c.priority)}`,children:c.priority}),t.jsxs("div",{className:"ml-2 flex items-center gap-2",children:[t.jsx("button",{onClick:Mt,className:"px-2 py-1 text-xs rounded-md border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Prev"}),t.jsx("select",{className:"text-xs px-2 py-1 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",value:De[Me]?.name||"",onChange:pe=>{const ve=De.findIndex(Ve=>Ve.name===pe.target.value);Dt(ve)},children:De.map(pe=>t.jsx("option",{value:pe.name,children:pe.name},pe.id||pe.name))}),t.jsx("button",{onClick:jt,className:"px-2 py-1 text-xs rounded-md border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Next"})]})]}),t.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:[c.probability,"% win probability  Expected close: ",c.expectedCloseDate?new Date(c.expectedCloseDate).toLocaleDateString():"Not set"]}),(c.companyName||C?.company||C)&&t.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-sm text-gray-600 dark:text-gray-400",children:[(c.companyName||C?.company)&&t.jsxs("span",{className:"inline-flex items-center bg-gray-100 dark:bg-gray-700 px-2.5 py-1 rounded-md",children:[t.jsx($i,{size:14,className:"mr-1.5 text-blue-500"}),c.companyName||C?.company]}),C&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"inline-flex items-center bg-gray-100 dark:bg-gray-700 px-2.5 py-1 rounded-md",children:[t.jsx(xt,{size:14,className:"mr-1.5 text-emerald-500"}),`${C.firstName||""} ${C.lastName||""}`.trim()]}),C.email&&t.jsxs("span",{className:"inline-flex items-center bg-gray-100 dark:bg-gray-700 px-2.5 py-1 rounded-md",children:[t.jsx(ir,{size:14,className:"mr-1.5 text-indigo-500"}),C.email]}),C.phone&&t.jsxs("span",{className:"inline-flex items-center bg-gray-100 dark:bg-gray-700 px-2.5 py-1 rounded-md",children:[t.jsx(ba,{size:14,className:"mr-1.5 text-purple-500"}),C.phone]})]})]}),c.leadId&&t.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-2",children:[t.jsx("span",{className:"text-gray-500",children:"Converted from lead:"})," ",t.jsx(ri,{to:`/leads/${c.leadId}`,className:"text-weconnect-red hover:underline font-medium",children:c.leadName||`Lead #${c.leadId}`})]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:a(c.value,c.currency)}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Opportunity Value"}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:["Expected Revenue: ",a(c.value*(c.probability/100),c.currency)]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2",children:[t.jsx("span",{children:"Pipeline"}),t.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:c.stage})]}),t.jsx("div",{className:"flex items-center",children:De.map((pe,ve)=>{const Ve=ve<Me,Ge=ve===Me,$t=Ne(pe.name);return t.jsxs(Fe.Fragment,{children:[t.jsxs("div",{className:"flex flex-col items-center min-w-[60px]",children:[t.jsx("div",{className:`h-5 w-5 rounded-full flex items-center justify-center border-2 ${Ve?"bg-green-500 border-green-500 text-white":Ge?"bg-white text-gray-800":"bg-white text-gray-400"}`,style:Ge?{borderColor:$t}:{},title:pe.name,children:Ve?"":""}),t.jsx("span",{className:`mt-2 text-[11px] ${Ve||Ge?"text-gray-800 dark:text-gray-200":"text-gray-500 dark:text-gray-400"} truncate max-w-[100px]`,children:pe.name})]}),ve<De.length-1&&t.jsx("div",{className:"w-10 sm:w-16 md:w-24 h-[2px] mx-2 rounded-full bg-gray-300 dark:bg-gray-600",children:t.jsx("div",{className:"h-[2px] rounded-full",style:{width:Ve?"100%":"0%",backgroundColor:$t}})})]},pe.name)})})]})]}),t.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:t.jsx("nav",{className:"-mb-px flex space-x-8",role:"tablist","aria-label":"Deal profile tabs",children:se.map(pe=>{const ve=pe.icon,Ve=b===pe.id;return t.jsxs("button",{onClick:()=>j(pe.id),role:"tab","aria-selected":Ve,"aria-controls":`panel-${pe.id}`,className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${Ve?"border-weconnect-red text-weconnect-red":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[t.jsx(ve,{size:16}),pe.label]},pe.id)})})}),t.jsxs("div",{className:"min-h-96",children:[b==="overview"&&t.jsxs("div",{id:"panel-overview",role:"tabpanel","aria-labelledby":"overview",className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(Ee,{className:"p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Deal Value"}),t.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:a(c.value,c.currency)})]}),t.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-lg",children:t.jsx(Qr,{size:20,className:"text-green-600 dark:text-green-400"})})]})}),t.jsx(Ee,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Expected Revenue"}),t.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:a(c.value*(c.probability/100),c.currency)})]}),t.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:t.jsx(wa,{size:20,className:"text-blue-600 dark:text-blue-400"})})]})}),t.jsx(Ee,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Win Probability"}),t.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[c.probability,"%"]})]}),t.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:t.jsx(Gw,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),t.jsx(Ee,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Days to Close"}),t.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:c.expectedCloseDate?Math.max(0,Math.ceil((new Date(c.expectedCloseDate).getTime()-new Date().getTime())/(1e3*60*60*24))):"N/A"})]}),t.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:t.jsx(Yt,{size:20,className:"text-orange-600 dark:text-orange-400"})})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs(Ee,{className:"p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Deal Information"}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Created ",new Date(c.createdAt).toLocaleDateString()]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Deal Title"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white font-medium",children:c.title})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Deal Value"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white font-semibold",children:a(c.value,c.currency)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Expected Revenue"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white font-semibold",children:a(c.value*(c.probability/100),c.currency)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Pipeline Stage"}),t.jsx("p",{className:"mt-1",children:t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-white",style:{backgroundColor:Ne(c.stage)},children:c.stage})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Expected Close Date"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:c.expectedCloseDate?new Date(c.expectedCloseDate).toLocaleDateString():"Not set"})]}),c.leadId&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Source Lead"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:t.jsx(ri,{to:`/leads/${c.leadId}`,className:"hover:text-weconnect-red transition-colors font-medium",children:c.leadName||`Lead #${c.leadId}`})})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),t.jsx("p",{className:"mt-1",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Pe(c.status)}`,children:c.status})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Win Probability"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:[c.probability,"%"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Priority"}),t.jsx("p",{className:"mt-1",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Nt(c.priority)}`,children:c.priority})})]}),(c.contactName||C)&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Contact Person"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(xt,{size:14,className:"text-gray-400"}),c.contactName||(C?`${C.firstName||""} ${C.lastName||""}`.trim():"")]})]}),(c.companyName||C?.company)&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Company"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx($i,{size:14,className:"text-gray-400"}),c.companyName||C?.company]})]}),C?.email&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Email"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(ir,{size:14,className:"text-gray-400"}),C.email]})]}),C?.phone&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Phone"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(ba,{size:14,className:"text-gray-400"}),C.phone]})]}),(C?.address||C?.city||C?.state||C?.zipCode||C?.country)&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Address"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900 dark:text-white flex items-start gap-2",children:[t.jsx(Lo,{size:14,className:"text-gray-400 mt-0.5"}),t.jsx("span",{children:[C?.address,[C?.city,C?.state].filter(Boolean).join(", "),[C?.zipCode,C?.country].filter(Boolean).join(" ")].filter(Boolean).join("  ")})]})]}),c.assignedToName&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Sales Rep"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:c.assignedToName})]})]})]}),c.description&&t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Description"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 rounded-md p-3",children:c.description})]}),c.notes&&t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Notes"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 rounded-md p-3",children:c.notes})]}),c.tags&&c.tags.length>0&&t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Tags"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map((pe,ve)=>t.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[t.jsx(Fo,{className:"h-3 w-3 mr-1"}),pe]},ve))})]})]}),t.jsxs(Ee,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activities"}),t.jsx(me,{size:"SM",variant:"GHOST",onClick:()=>j("activities"),children:"View All"})]}),ee?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-weconnect-red"})}):I.length>0?t.jsx("div",{className:"space-y-3",children:I.slice(0,3).map(pe=>t.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsx(Wc,{size:16,className:"text-gray-500 mt-1"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:pe.title}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:pe.createdAt?new Date(pe.createdAt).toLocaleDateString():""})]})]},pe.id))}):t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-8",children:"No recent activities"})]}),c.products&&c.products.length>0&&t.jsxs(Ee,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Products & Services"}),t.jsx("div",{className:"space-y-3",children:c.products.map(pe=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:pe.name}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Quantity: ",pe.quantity]})]}),t.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:a(pe.price*pe.quantity,c.currency)})]},pe.id))})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs(Ee,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Next Steps"}),t.jsx(me,{size:"SM",variant:"GHOST",onClick:()=>j("tasks"),children:"View All"})]}),U?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-weconnect-red"})}):W.length>0?t.jsx("div",{className:"space-y-3",children:W.slice(0,3).map(pe=>t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(ct,{size:16,className:"text-gray-500 mt-1"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:pe.title}),pe.dueDate&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Due: ",new Date(pe.dueDate).toLocaleDateString()]})]})]},pe.id))}):t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-8",children:"No pending tasks"})]}),t.jsxs(Ee,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Timeline"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(nr,{size:18,className:"mr-3 text-gray-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Created"}),t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:new Date(c.createdAt).toLocaleDateString()})]})]}),c.expectedCloseDate&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(nr,{size:18,className:"mr-3 text-gray-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Expected Close"}),t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:new Date(c.expectedCloseDate).toLocaleDateString()})]})]}),c.actualCloseDate&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(ct,{size:18,className:"mr-3 text-green-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Closed"}),t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:new Date(c.actualCloseDate).toLocaleDateString()})]})]})]})]}),t.jsxs(Ee,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Additional Details"}),c.description&&t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:t.jsx("p",{className:"text-gray-900 dark:text-white whitespace-pre-line",children:c.description})})]}),c.tags&&c.tags.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Tags"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map((pe,ve)=>t.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:pe},ve))})]}),c.notes&&t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:t.jsx("p",{className:"text-gray-900 dark:text-white whitespace-pre-line",children:c.notes})})]})]})]})]})]}),b==="pipeline"&&t.jsxs(Ee,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Pipeline Progress"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2",children:[t.jsxs("span",{children:["Current Stage: ",c.stage]}),t.jsxs("span",{children:[c.probability,"% Win Probability"]})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4",children:t.jsx("div",{className:"h-4 rounded-full transition-all duration-300 flex items-center justify-end pr-2",style:{width:`${c.probability}%`,backgroundColor:Ne(c.stage)},children:t.jsxs("span",{className:"text-xs text-white font-semibold",children:[c.probability,"%"]})})})]}),t.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Expected Outcome"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Deal Value"}),t.jsx("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:a(c.value,c.currency)})]}),t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Expected Revenue"}),t.jsx("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:a(c.value*(c.probability/100),c.currency)})]})]})]}),t.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Timeline"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Created"}),t.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(c.createdAt).toLocaleDateString()})]}),c.expectedCloseDate&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Expected Close"}),t.jsx("span",{className:"text-gray-900 dark:text-white font-semibold",children:new Date(c.expectedCloseDate).toLocaleDateString()})]}),c.actualCloseDate&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Closed"}),t.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(c.actualCloseDate).toLocaleDateString()})]})]})]})]})]}),b==="activities"&&(ee?t.jsx(Ee,{className:"p-6",id:"panel-activities",role:"tabpanel","aria-labelledby":"activities",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red"})})}):t.jsx("div",{id:"panel-activities",role:"tabpanel","aria-labelledby":"activities",children:t.jsx(YI,{entityType:"deal",entityId:c.id,activities:I})})),b==="tasks"&&(U?t.jsx(Ee,{className:"p-6",id:"panel-tasks",role:"tabpanel","aria-labelledby":"tasks",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red"})})}):t.jsx("div",{id:"panel-tasks",role:"tabpanel","aria-labelledby":"tasks",children:t.jsx(GI,{entityType:"deal",entityId:c.id,tasks:W})})),b==="communications"&&t.jsx("div",{id:"panel-communications",role:"tabpanel","aria-labelledby":"communications",children:c.leadId&&C?t.jsx(VI,{lead:{id:parseInt(c.leadId),firstName:C.firstName||"",lastName:C.lastName||"",email:C.email||"",phone:C.phone||"",company:C.company||c.companyName||""}}):Q?t.jsx(Ee,{className:"p-6",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red"})})}):t.jsx(soe,{entityType:"deal",entityId:c.id,communications:B,callLogs:q})}),b==="quotations"&&(ge?t.jsx(Ee,{className:"p-6",id:"panel-quotations",role:"tabpanel","aria-labelledby":"quotations",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red"})})}):t.jsx("div",{id:"panel-quotations",role:"tabpanel","aria-labelledby":"quotations",children:t.jsx(KI,{entityType:"deal",entityId:c.id,quotations:ae,invoices:re})})),b==="payments"&&(xe?t.jsx(Ee,{className:"p-6",id:"panel-payments",role:"tabpanel","aria-labelledby":"payments",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red"})})}):t.jsx("div",{id:"panel-payments",role:"tabpanel","aria-labelledby":"payments",children:t.jsx(noe,{entityType:"deal",entityId:c.id,payments:G,invoices:re,currency:c.currency})})),b==="notifications"&&t.jsx("div",{id:"panel-notifications",role:"tabpanel","aria-labelledby":"notifications",children:t.jsx(ioe,{entityType:"deal",entityId:c.id,notifications:_})})]})]}):t.jsx("div",{className:"mx-auto p-6",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Qr,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600 mb-4"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Deal Not Found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"The deal you're looking for doesn't exist or has been deleted."}),t.jsx(me,{onClick:()=>r("/deals"),children:"Back to Deals"})]})})},loe=()=>{const e=mt(),{currencySettings:r,dealStatuses:a}=Hr(),[s,n]=h.useState(!1);h.useEffect(()=>{M.info("Create a lead first, then convert it to a deal."),e("/leads/new",{replace:!0})},[e]);const[i,o]=h.useState({title:"",value:"",currency:r?.primary||"USD",status:"DRAFT",probability:"50",expectedCloseDate:"",contactId:"",companyId:"",description:""}),c=m=>{const{name:g,value:f}=m.target;o(y=>({...y,[g]:f}))},u=async m=>{if(m.preventDefault(),!i.title.trim()){M.error("Title is required");return}try{n(!0);const g={title:i.title.trim(),description:i.description?.trim()||void 0,value:i.value?Number(i.value):0,currency:i.currency||"USD",status:i.status,probability:i.probability?Number(i.probability):0,expectedCloseDate:i.expectedCloseDate||void 0,contactId:i.contactId?Number(i.contactId):void 0,companyId:i.companyId?Number(i.companyId):void 0},f=await aa.createDeal(g);M.success("Deal created");const y=f?.data?.id||f?.data?.deal?.id;e(y?`/deals/${y}`:"/deals")}catch(g){const f=g?.response?.data,y=Array.isArray(f?.errors)?f.errors.map(p=>p?.msg||p?.message).filter(Boolean).join(`
`):f?.message||g?.message||"Failed to create deal";M.error(y)}finally{n(!1)}};return t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Create Deal"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Fill in the details below"})]}),t.jsx($a,{to:"/deals"})]}),t.jsxs("form",{onSubmit:u,className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Title *"}),t.jsx("input",{name:"title",value:i.title,onChange:c,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Deal title",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Value"}),t.jsx("input",{name:"value",type:"number",step:"0.01",value:i.value,onChange:c,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"0.00"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Currency"}),t.jsx("input",{name:"currency",value:i.currency,onChange:c,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"USD"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),t.jsx("select",{name:"status",value:i.status,onChange:c,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",children:(a||[]).filter(m=>m.isActive).map(m=>t.jsx("option",{value:m.name,children:m.name},m.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Probability (%)"}),t.jsx("input",{name:"probability",type:"number",min:0,max:100,value:i.probability,onChange:c,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"0-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Expected Close Date"}),t.jsx("input",{name:"expectedCloseDate",type:"date",value:i.expectedCloseDate,onChange:c,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Contact ID"}),t.jsx("input",{name:"contactId",type:"number",value:i.contactId,onChange:c,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"e.g. 123"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Company ID"}),t.jsx("input",{name:"companyId",type:"number",value:i.companyId,onChange:c,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"e.g. 456"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),t.jsx("textarea",{name:"description",value:i.description,onChange:c,rows:4,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Add details about this deal"})]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx(me,{type:"button",variant:"SECONDARY",onClick:()=>e("/deals"),disabled:s,children:"Cancel"}),t.jsx(me,{type:"submit",variant:"PRIMARY",disabled:s,children:s?"Creating...":"Create Deal"})]})]})]})},coe=()=>{const e=mt(),{id:r}=ui(),{currencySettings:a,dealStatuses:s}=Hr(),[n,i]=h.useState(!0),[o,c]=h.useState(!1),[u,m]=h.useState({title:"",value:"",currency:a?.primary||"USD",status:"DRAFT",probability:"0",expectedCloseDate:"",contactId:"",companyId:"",description:""});h.useEffect(()=>{r&&(async()=>{try{i(!0);const b=(await aa.getDealById(Number(r))).data;m({title:b.title||"",value:String(b.value??""),currency:b.currency||a?.primary||"USD",status:b.status||"DRAFT",probability:String(b.probability??"0"),expectedCloseDate:b.expectedCloseDate?String(b.expectedCloseDate).slice(0,10):"",contactId:b.contact?.id?String(b.contact.id):b.contactId?String(b.contactId):"",companyId:b.companies?.id?String(b.companies.id):b.companyId?String(b.companyId):"",description:b.description||""})}catch(p){M.error(p?.response?.data?.message||"Failed to load deal"),e("/deals")}finally{i(!1)}})()},[r,e,a?.primary]);const g=y=>{const{name:p,value:b}=y.target;m(j=>({...j,[p]:b}))},f=async y=>{if(y.preventDefault(),!u.title.trim()){M.error("Title is required");return}try{c(!0);const p={title:u.title.trim(),description:u.description?.trim()||void 0,value:u.value?Number(u.value):void 0,currency:u.currency||void 0,status:u.status,probability:u.probability?Number(u.probability):void 0,expectedCloseDate:u.expectedCloseDate||void 0,contactId:u.contactId?Number(u.contactId):void 0,companyId:u.companyId?Number(u.companyId):void 0};await aa.updateDeal(Number(r),p),M.success("Deal updated"),e(`/deals/${r}`)}catch(p){const b=p?.response?.data,j=Array.isArray(b?.errors)?b.errors.map(v=>v?.msg||v?.message).filter(Boolean).join(`
`):b?.message||p?.message||"Failed to update deal";M.error(j)}finally{c(!1)}};return n?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit Deal"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Update the details below"})]}),t.jsx($a,{to:`/deals/${r}`})]}),t.jsxs("form",{onSubmit:f,className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Title *"}),t.jsx("input",{name:"title",value:u.title,onChange:g,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Deal title",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Value"}),t.jsx("input",{name:"value",type:"number",step:"0.01",value:u.value,onChange:g,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"0.00"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Currency"}),t.jsx("input",{name:"currency",value:u.currency,onChange:g,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"USD"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),t.jsx("select",{name:"status",value:u.status,onChange:g,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",children:(s||[]).filter(y=>y.isActive).map(y=>t.jsx("option",{value:y.name,children:y.name},y.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Probability (%)"}),t.jsx("input",{name:"probability",type:"number",min:0,max:100,value:u.probability,onChange:g,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"0-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Expected Close Date"}),t.jsx("input",{name:"expectedCloseDate",type:"date",value:u.expectedCloseDate,onChange:g,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Contact ID"}),t.jsx("input",{name:"contactId",type:"number",value:u.contactId,onChange:g,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"e.g. 123"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Company ID"}),t.jsx("input",{name:"companyId",type:"number",value:u.companyId,onChange:g,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"e.g. 456"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),t.jsx("textarea",{name:"description",value:u.description,onChange:g,rows:4,className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white",placeholder:"Add details about this deal"})]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx(me,{type:"button",variant:"SECONDARY",onClick:()=>e(`/deals/${r}`),disabled:o,children:"Cancel"}),t.jsx(me,{type:"submit",variant:"PRIMARY",disabled:o,children:o?"Saving...":"Save Changes"})]})]})]})},doe=()=>{const{hasPermission:e}=xr(),{refreshUsersCount:r}=jn(),{t:a}=wn(),s=mt(),[n,i]=h.useState([]),[o,c]=h.useState([]),[u,m]=h.useState(null),[g,f]=h.useState(!0),[y,p]=h.useState(null),[b,j]=h.useState("list"),[v,N]=h.useState(["user","role","status","lastLogin","createdAt"]),[k,E]=h.useState("users"),[C,S]=h.useState({status:"",roleId:"",search:""}),[P,D]=h.useState(1),[I]=h.useState(50),{searchValue:H,debouncedSearchValue:W,setSearch:K,isSearching:B}=dd("",500),[z,q]=h.useState(!1),[J,ae]=h.useState(null),[ne,re]=h.useState(!1);h.useEffect(()=>{L()},[W,C.status,C.roleId,P,k]),h.useEffect(()=>{try{const se=localStorage.getItem("users_visible_columns");if(se){const De=JSON.parse(se);Array.isArray(De)&&De.every(Me=>typeof Me=="string")&&N(De)}}catch{}},[]),h.useEffect(()=>{try{localStorage.setItem("users_visible_columns",JSON.stringify(v))}catch{}},[v]),h.useEffect(()=>{const se=De=>{De.key==="Escape"&&(W||C.status||C.roleId)&&X()};return document.addEventListener("keydown",se),()=>document.removeEventListener("keydown",se)},[C,W]);const L=async()=>{try{f(!0),p(null);const se=await Er.getUsers({search:W,status:C.status,roleId:C.roleId,page:P,limit:I}),De=se?.data?.users??(Array.isArray(se?.data)?se.data:void 0)??se?.users??[];i(De||[]);const Me=se?.data?.pagination||se?.pagination;m(Me?{currentPage:Me.currentPage??P,totalPages:Me.totalPages??1,totalUsers:Me.totalItems??De.length??0,hasNextPage:(Me.currentPage??1)<(Me.totalPages??1),hasPrevPage:(Me.currentPage??1)>1}:{currentPage:1,totalPages:1,totalUsers:De.length,hasNextPage:!1,hasPrevPage:!1})}catch(se){console.error("Error fetching users:",se);const De=se?.response?.data?.message||"Failed to fetch users";p(De),M.error(De,{toastId:"users_fetch_error"})}finally{f(!1)}},G=(se,De)=>{S(Me=>({...Me,[se]:De})),D(1)},T=se=>{K(se),D(1)},_=se=>{D(se),window.scrollTo({top:0,behavior:"smooth"})},F=se=>{s(`/users/${se.id}/edit`,{state:{user:se}})},ee=se=>{ae(se),q(!0)},Z=async se=>{try{await Er.updateUser(se.id,{isActive:!se.isActive}),M.success(`User ${se.isActive?"deactivated":"activated"} successfully`),await r(),L()}catch(De){const Me=De?.response?.data?.message||"Failed to update user status";M.error(Me)}},U=async()=>{if(J){re(!0);try{await Er.deleteUser(J.id),await r(),q(!1),ae(null),M.success("User deleted successfully!"),L()}catch(se){console.error("Error deleting user:",se);let De="An error occurred";se.response?.status===429?De="Too many requests. Please wait a moment and try again.":se.response?.data?.message&&(De=se.response.data.message),M.error(De)}finally{re(!1)}}},X=()=>{S({search:"",status:"",roleId:""}),D(1),K("")},Q=!!W,V=!!C.status,ge=!!C.roleId,Te=Q||V||ge,xe=se=>v.includes(se),qe=Q&&(V||ge)?"No users match your search and filters. Try adjusting your filters or search terms. You can also clear all filters to see all users.":Q?"No users found for your search. Try adjusting your search terms. You can also clear all filters to see all users.":V||ge?"No users found for the selected filters. Try adjusting your filters or clear all filters to see all users.":void 0;return t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end gap-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[t.jsxs("div",{className:"w-full sm:w-48",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t.jsxs("div",{className:"flex items-center gap-2",children:[a("common.search"),B&&t.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-500",children:[t.jsx(ma,{className:"h-3 w-3 animate-pulse"}),t.jsx("span",{children:"Searching..."})]})]})}),t.jsx(kd,{value:H,onChange:T,placeholder:a("users.searchUsers")})]}),t.jsx("div",{className:"w-full sm:w-48",children:t.jsx(Yr,{label:"Status",value:C.status,onChange:se=>G("status",se),options:[{value:"",label:"All Statuses"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]})}),t.jsx("div",{className:"w-full sm:w-48",children:t.jsx(Yr,{label:"Role",value:C.roleId,onChange:se=>G("roleId",se),options:[{value:"",label:"All Roles"},...o.map(se=>({value:se.id.toString(),label:se.name}))]})})]}),e("user.create")&&t.jsxs("button",{onClick:()=>s("/users/new"),className:"w-full sm:w-auto flex items-center justify-center px-4 py-3 bg-[#ef444e] text-white rounded-full hover:bg-[#f26971] transition-colors text-sm font-semibold",children:[t.jsx(Rt,{className:"h-4 w-4 mr-2"}),a("users.addUser")]})]}),t.jsxs("div",{className:"hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto",children:[t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${b==="list"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>j("list"),title:"List view",children:t.jsx(gi,{className:"w-4 h-4"})}),t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${b==="card"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>j("card"),title:"Card view",children:t.jsx(mi,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"flex space-x-1 bg-gray-200 dark:bg-gray-700 p-1 rounded-lg w-fit",children:[t.jsx("button",{onClick:()=>E("users"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${k==="users"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:a("users.allUsers")}),t.jsx("button",{onClick:()=>E("teams"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${k==="teams"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:"Teams"})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 overflow-hidden  transition-all duration-300",children:[t.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[k==="users"?a("users.allUsers"):"All Teams"," ",u&&`(${u.totalUsers})`]}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[k==="users"?a("users.manageAndTrack"):"Manage and track user teams.",u&&t.jsxs("span",{className:"ml-2 text-gray-500",children:[" Showing ",n.length," of ",u.totalUsers," users",u.totalPages>1&&`  Page ${u.currentPage} of ${u.totalPages}`]}),(W||C.status||C.roleId)&&t.jsx("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:" Filters active"})]})]}),t.jsx("div",{className:"flex items-center space-x-2"})]})}),k==="users"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mb-4",children:t.jsx(to,{currentPage:u?.currentPage||1,itemsPerPage:I,totalItems:u?.totalUsers||n.length,onItemsPerPageChange:se=>{},columnConfig:{columns:[{id:"user",label:"User"},{id:"role",label:"Role"},{id:"status",label:"Status"},{id:"lastLogin",label:"Last Login"},{id:"createdAt",label:"Created"}],visibleColumns:v,onChange:N,minVisible:1}})}),b==="card"?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-6",children:g?t.jsx("div",{className:"col-span-full",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):y?t.jsx("div",{className:"col-span-full text-center py-20",children:t.jsx(qr,{title:"Network or server error",description:y,icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),isError:!0})}):n.length===0?t.jsx("div",{className:"col-span-full text-center py-20",children:t.jsx(qr,{icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),description:qe,showClearButton:Te,onClear:X})}):n.map(se=>t.jsxs("div",{className:"rounded-lg border shadow-sm hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",style:{minHeight:"280px"},children:[t.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:[t.jsx("div",{className:"flex items-center justify-between mb-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-[#EF444E] to-[#ff5a64] rounded-lg shadow-2xl",children:t.jsx(xt,{className:"h-5 w-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white",children:se.fullName}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:se.email})]})]})}),t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium ${se.isActive?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400"}`,children:se.isActive?"Active":"Inactive"})})]}),t.jsx("div",{className:"p-4 flex-1",children:t.jsxs("div",{className:"space-y-2",children:[se.roles.length>0&&t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:t.jsx("div",{className:"flex flex-wrap gap-1",children:se.roles.map(De=>t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400",children:[t.jsx(Gs,{className:"h-3 w-3 mr-1"}),De.name]},De.id))})}),se.lastLogin&&t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-1.5",children:[t.jsx(nr,{className:"h-3 w-3 flex-shrink-0"}),t.jsxs("span",{children:["Last login: ",new Date(se.lastLogin).toLocaleDateString()]})]}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1.5",children:[t.jsx(nr,{className:"h-3 w-3 flex-shrink-0"}),t.jsxs("span",{children:["Created: ",new Date(se.createdAt).toLocaleDateString()]})]})]})}),t.jsx("div",{className:"px-4 pb-4 pt-3 border-t border-gray-100 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center gap-1",children:e("user.update")&&t.jsx("button",{onClick:()=>F(se),className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Edit User",children:t.jsx(er,{className:"h-4 w-4"})})}),t.jsxs("div",{className:"flex items-center gap-1",children:[e("user.update")&&t.jsx("button",{onClick:()=>Z(se),className:`p-1.5 rounded transition-colors ${se.isActive?"text-amber-600 hover:text-amber-900 hover:bg-amber-50 dark:hover:bg-amber-900/20":"text-green-600 hover:text-green-900 hover:bg-green-50 dark:hover:bg-green-900/20"}`,title:se.isActive?"Deactivate user":"Activate user",children:se.isActive?t.jsx(va,{className:"h-4 w-4"}):t.jsx(ct,{className:"h-4 w-4"})}),e("user.delete")&&t.jsx("button",{onClick:()=>ee(se),className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete User",children:t.jsx(ht,{className:"h-4 w-4"})})]})]})})]},se.id))}):t.jsx("div",{className:"overflow-x-auto relative",children:t.jsxs("table",{className:"w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${xe("user")?"":"hidden"}`,children:a("users.user")}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${xe("role")?"":"hidden"}`,children:a("users.role")}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${xe("status")?"":"hidden"}`,children:a("common.status")}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${xe("lastLogin")?"":"hidden"}`,children:a("users.lastLogin")}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${xe("createdAt")?"":"hidden"}`,children:a("users.created")}),t.jsx("th",{className:"px-6 py-3 text-end text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("common.actions")})]})}),g?t.jsx(Kl,{rows:8,columns:6}):t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:y?t.jsx("tr",{children:t.jsx("td",{colSpan:v.length+1,className:"px-6 py-12 text-center",children:t.jsx(qr,{title:"Network or server error",description:y,icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),isError:!0})})}):n.length>0?n.map(se=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${xe("user")?"":"hidden"}`,children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:t.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center",children:t.jsxs("span",{className:"text-white font-medium text-sm",children:[se.firstName[0],se.lastName[0]]})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:se.fullName}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center",children:[t.jsx(ir,{className:"h-3 w-3 mr-1"}),se.email]})]})]})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${xe("role")?"":"hidden"}`,children:t.jsx("div",{className:"flex flex-wrap gap-1",children:se.roles.length>0?se.roles.map(De=>t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400",children:[t.jsx(Gs,{className:"h-3 w-3 mr-1"}),De.name]},De.id)):t.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("users.noRoleAssigned")})})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${xe("status")?"":"hidden"}`,children:t.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${se.isActive?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400"}`,children:[se.isActive?t.jsx(ct,{className:"h-3 w-3 mr-1"}):t.jsx(va,{className:"h-3 w-3 mr-1"}),se.isActive?"Active":"Inactive"]})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 ${xe("lastLogin")?"":"hidden"}`,children:se.lastLogin?t.jsxs("div",{className:"flex items-center",children:[t.jsx(nr,{className:"h-3 w-3 mr-1"}),new Date(se.lastLogin).toLocaleDateString()]}):"Never"}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 ${xe("createdAt")?"":"hidden"}`,children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(nr,{className:"h-3 w-3 mr-1"}),new Date(se.createdAt).toLocaleDateString()]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-end text-sm font-medium",children:t.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e("user.update")&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>F(se),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Edit user",children:t.jsx(er,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Z(se),className:["p-1 rounded transition-colors",se.isActive?"text-amber-600 hover:text-amber-900 hover:bg-amber-50 dark:hover:bg-amber-900/20":"text-green-600 hover:text-green-900 hover:bg-green-50 dark:hover:bg-green-900/20"].join(" "),title:se.isActive?"Deactivate user":"Activate user",children:se.isActive?t.jsx(va,{className:"h-4 w-4"}):t.jsx(ct,{className:"h-4 w-4"})})]}),e("user.delete")&&t.jsx("button",{onClick:()=>ee(se),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete user",children:t.jsx(ht,{className:"h-4 w-4"})})]})})]},se.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:v.length+1,className:"px-6 py-12 text-center",children:t.jsx(qr,{icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),description:qe,showClearButton:Te,onClear:X})})})})]})})]}):t.jsx("div",{className:"overflow-x-auto relative",children:t.jsxs("table",{className:"w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User (Team Lead)"}),t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Reporting Authority"}),t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Team Size"}),t.jsx("th",{className:"px-6 py-3 text-end text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),g?t.jsx(Kl,{rows:8,columns:4}):y?t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.jsx("tr",{children:t.jsx("td",{colSpan:4,className:"px-6 py-12 text-center",children:t.jsx(qr,{title:"Network or server error",description:y,icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),isError:!0})})})}):n.length===0?t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.jsx("tr",{children:t.jsx("td",{colSpan:4,className:"px-6 py-12 text-center",children:t.jsx(qr,{icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),description:"No teams found. Try adjusting your filters or clear all filters to see all teams.",showClearButton:Te,onClear:X})})})}):t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:n.map(se=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold mr-3",children:se.firstName[0]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:se.fullName}),t.jsx("div",{className:"text-xs text-gray-500",children:se.email})]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:se.manager?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xt,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{children:se.manager.fullName})]}):t.jsx("span",{className:"text-gray-400 italic",children:"No Manager"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",children:[se.teamSize||0," Members"]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-end",children:t.jsx("button",{onClick:()=>F(se),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Edit user",children:t.jsx(er,{className:"h-4 w-4"})})})]},se.id))})]})}),u&&t.jsx(zn,{currentPage:u.currentPage,totalPages:u.totalPages,totalItems:u.totalUsers,onPageChange:_,itemsPerPage:50})]}),t.jsx(vm,{open:z&&!!J,title:"Delete User",description:J?t.jsxs("div",{className:"mb-2",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:t.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center",children:t.jsxs("span",{className:"text-white font-medium text-lg",children:[J.firstName[0],J.lastName[0]]})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:J.fullName}),t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:J.email})]})]}),t.jsx("p",{children:"Are you sure you want to delete this user? This action will deactivate their account and cannot be undone."})]}):null,confirmText:"Delete User",cancelText:"Cancel",loading:ne,onConfirm:U,onClose:()=>{ne||(q(!1),ae(null))}})]})},MP={firstName:"",lastName:"",email:"",password:"",roleIds:[],isActive:!0},QI=({initial:e,onSubmit:r,submitting:a,isEdit:s=!1})=>{const[n,i]=h.useState({...MP,...e||{}}),[o,c]=h.useState([]),[u,m]=h.useState([]),[g,f]=h.useState(null),[y,p]=h.useState(null),[b,j]=h.useState(null),[v,N]=h.useState(null),[k,E]=h.useState({length:!1,lowercase:!1,uppercase:!1,number:!1,special:!1}),[C,S]=h.useState(!1),[P,D]=h.useState(null);h.useEffect(()=>{e&&i({...MP,...e})},[e]),h.useEffect(()=>{(async()=>{try{const[J,ae]=await Promise.all([Ga.getRoles({status:"active"}),Er.getUsers()]),ne=J?.data?.roles??J?.roles??J?.data?.items??J?.items??[];c(Array.isArray(ne)?ne:[]);const re=ae?.data?.users??ae?.data??ae?.users??[];m(Array.isArray(re)?re.map(L=>({id:L.id,fullName:L.fullName||`${L.firstName} ${L.lastName}`,email:L.email})):[])}catch(J){console.error("Failed to load roles/users:",J)}})()},[]);const I=(q,J)=>{if(i(ae=>({...ae,[q]:J})),q==="email"){const ae=String(J||""),ne=ae?K(ae):null;f(ne)}if(q==="password"){const ae=String(J||"");E(z(ae)),y&&p(null)}if(q==="firstName"){const ae=B(String(J||""));j(ae)}if(q==="lastName"){const ae=B(String(J||""));N(ae)}},H=q=>{i(J=>(P&&D(null),{...J,roleIds:[q]}))},W=async q=>{q.preventDefault();let J=!1;const ae=String(n.firstName||"").trim(),ne=String(n.lastName||"").trim(),re=String(n.email||""),L=String(n.password||"");if(ae||(j("First name is required"),J=!0),ne||(N("Last name is required"),J=!0),re||(f("Email is required"),J=!0),J)return;const G=re?K(re):null;if(f(G),G)return;const T=B(ae),_=B(ne);if(j(T),N(_),T||_)return;if((!s||L)&&L){const ee=z(L);if(!(ee.length&&ee.lowercase&&ee.uppercase&&ee.number&&ee.special)){E(ee),p("Password must be 8+ chars with uppercase, lowercase, number, and special symbol");return}}if((n.roleIds||[]).filter(ee=>typeof ee=="number").length===0){D("Select at least one role");return}D(null),await r(n)},K=q=>{const J=(q||"").trim();if(!J||!/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(J))return"Please enter a valid email address";const[ne,re]=J.split("@");return ne.startsWith(".")||ne.endsWith(".")||ne.includes("..")||re.includes("..")||re.split(".").some(G=>!G||G.startsWith("-")||G.endsWith("-"))?"Please enter a valid email address":null},B=q=>{const J=q.trim();return J.length<3?"Must be at least 3 characters":/<[^>]*>/i.test(q)?"Invalid characters detected":/^[A-Za-z\s]+$/.test(J)?null:"Only letters and spaces are allowed"},z=q=>{const J=/[a-z]/.test(q),ae=/[A-Z]/.test(q),ne=/[0-9]/.test(q),re=/[^A-Za-z0-9]/.test(q);return{length:q.length>=8,lowercase:J,uppercase:ae,number:ne,special:re}};return t.jsxs("form",{onSubmit:W,className:"space-y-5",noValidate:!0,children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3",children:[t.jsx("div",{children:t.jsx(Jt,{label:"First Name",leftIcon:t.jsx(xt,{className:"h-4 w-4 text-gray-400"}),value:n.firstName||"",onChange:q=>I("firstName",q.target.value),required:!0,error:b||void 0})}),t.jsx("div",{children:t.jsx(Jt,{label:"Last Name",leftIcon:t.jsx(xt,{className:"h-4 w-4 text-gray-400"}),value:n.lastName||"",onChange:q=>I("lastName",q.target.value),required:!0,error:v||void 0})}),t.jsx("div",{children:t.jsx(Jt,{label:"Email",leftIcon:t.jsx(ir,{className:"h-4 w-4 text-gray-400"}),type:"email",value:n.email||"",onChange:q=>I("email",q.target.value),required:!0,error:g||void 0})}),t.jsx("div",{children:t.jsx(Jt,{label:s?"New Password":"Password",leftIcon:t.jsx(pm,{className:"h-4 w-4 text-gray-400"}),rightIcon:t.jsx("button",{type:"button",onClick:()=>S(!C),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:C?"Hide password":"Show password",children:C?t.jsx(pn,{className:"h-4 w-4"}):t.jsx(Bt,{className:"h-4 w-4"})}),type:C?"text":"password",value:n.password||"",onChange:q=>I("password",q.target.value),required:!1,minLength:8,placeholder:s?"Leave empty to keep current password":"Leave empty to auto-generate and email to the user",error:y||void 0})})]}),t.jsxs("div",{className:"text-xs text-gray-700 dark:text-gray-300 space-y-1",children:[t.jsx("div",{className:"font-medium",children:"Password must include (only if you set it manually):"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:[t.jsxs("div",{className:"flex items-center",children:[k.length?t.jsx(ct,{className:"h-4 w-4 text-green-600 mr-1"}):t.jsx(ur,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{children:"At least 8 characters"})]}),t.jsxs("div",{className:"flex items-center",children:[k.lowercase?t.jsx(ct,{className:"h-4 w-4 text-green-600 mr-1"}):t.jsx(ur,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{children:"Lowercase letter (a-z)"})]}),t.jsxs("div",{className:"flex items-center",children:[k.uppercase?t.jsx(ct,{className:"h-4 w-4 text-green-600 mr-1"}):t.jsx(ur,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{children:"Uppercase letter (A-Z)"})]}),t.jsxs("div",{className:"flex items-center",children:[k.number?t.jsx(ct,{className:"h-4 w-4 text-green-600 mr-1"}):t.jsx(ur,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{children:"Number (0-9)"})]}),t.jsxs("div",{className:"flex items-center",children:[k.special?t.jsx(ct,{className:"h-4 w-4 text-green-600 mr-1"}):t.jsx(ur,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{children:"Special symbol (!@#$%^&*...)"})]})]}),t.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:s?"Leave password empty to keep the current one.":""})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:n.isActive??!0,onChange:q=>I("isActive",q.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[t.jsx(ct,{className:"h-4 w-4 mr-1"}),"Active User"]})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Active users can log in and access the system"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t.jsx(Gs,{className:"h-4 w-4 mr-1"}),"Reporting Authority"]}),t.jsxs("select",{className:"block w-full px-4 py-3 rounded-lg border text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:n.managerId??"",onChange:q=>I("managerId",q.target.value?Number(q.target.value):void 0),children:[t.jsx("option",{value:"",children:"None"}),u.map(q=>t.jsxs("option",{value:q.id,children:[q.fullName," (",q.email,")"]},q.id))]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Select the user's reporting manager."})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t.jsx(Gs,{className:"h-4 w-4 mr-1"}),"Role"]}),t.jsx("div",{className:"space-y-2",children:o.length>0?o.map(q=>{const J=(n.roleIds||[]).includes(q.id);return t.jsxs("label",{className:`flex items-center space-x-2 p-2 rounded-lg border cursor-pointer transition-colors ${J?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[t.jsx("input",{type:"radio",name:"roleSelection",checked:J,onChange:()=>H(q.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.name}),q.description&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:q.description})]})]},q.id)}):t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No roles available. Please create roles first."})}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Select a role to assign to this user"}),P&&t.jsx("p",{className:"text-xs text-red-500 mt-1",children:P})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"submit",disabled:a,className:"inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold text-white bg-rose-500 hover:bg-rose-600 focus:outline-none focus:ring-2 focus:ring-rose-500 disabled:opacity-50",children:a?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),s?"Updating...":"Creating..."]}):s?"Update User":"Create User"})})]})},uoe=()=>{const[e,r]=h.useState(!1),a=mt(),{refreshUsersCount:s}=jn(),n=async i=>{try{if(r(!0),!i.roleIds||i.roleIds.length===0){M.error("Please select at least one role.");return}const o={email:i.email,firstName:i.firstName,lastName:i.lastName,roleIds:i.roleIds,...i.managerId?{managerId:i.managerId}:{}};i.password&&i.password.trim()&&(o.password=i.password.trim()),await Er.createUser(o),await s(),M.success("User created successfully!"),a("/users")}catch(o){M.error(o?.response?.data?.message||o?.message||"Create failed")}finally{r(!1)}};return t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Create User"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Fill in the details below"})]}),t.jsx("div",{className:"flex items-center gap-4 mb-4",children:t.jsx($a,{to:"/users"})})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:t.jsx(QI,{onSubmit:n,submitting:e})})]})},moe=()=>{const[e,r]=h.useState(!1),[a,s]=h.useState(!0),[n,i]=h.useState(null),o=mt(),c=Bn(),{id:u}=ui(),{refreshUsersCount:m}=jn();h.useEffect(()=>{(async()=>{if(!u){M.error("User ID not provided"),o("/users");return}try{s(!0);const y=c.state?.user;if(y)i({firstName:y.firstName,lastName:y.lastName,email:y.email,password:"",roleIds:y.roles?.map(p=>p.id)||[],isActive:y.isActive,managerId:y.managerId});else{const p=await Er.getUsers(),b=p?.data?.users??p?.data??p?.users??[],j=Array.isArray(b)?b.find(v=>v.id===parseInt(u)):null;if(!j){M.error("User not found"),o("/users");return}i({firstName:j.firstName,lastName:j.lastName,email:j.email,password:"",roleIds:j.roles?.map(v=>v.id)||[],isActive:j.isActive,managerId:j.managerId})}}catch(y){console.error("Error getting user data:",y),M.error("Failed to load user data"),o("/users")}finally{s(!1)}})()},[u,o,c.state]);const g=async f=>{if(u)try{r(!0);const y={email:f.email,firstName:f.firstName,lastName:f.lastName,isActive:f.isActive,managerId:f.managerId??null};f.password&&(y.password=f.password),await Er.updateUser(parseInt(u),y),await Ga.assignRoleToUser(parseInt(u),f.roleIds||[]),await m(),M.success("User updated successfully!"),o("/users")}catch(y){M.error(y?.response?.data?.message||y?.message||"Update failed")}finally{r(!1)}};return a?t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"flex items-center gap-4 mb-4",children:t.jsx($a,{to:"/users"})})}),t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(Zm,{})})]}):n?t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit User"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Update the user details below"})]}),t.jsx("div",{className:"flex items-center gap-4 mb-4",children:t.jsx($a,{to:"/users"})})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:t.jsx(QI,{initial:n,onSubmit:g,submitting:e,isEdit:!0})})]}):t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"flex items-center gap-4 mb-4",children:t.jsx($a,{to:"/users"})})}),t.jsx("div",{className:"text-center",children:t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"User not found"})})]})},XI=({initial:e,onSubmit:r,submitting:a})=>{const[s,n]=h.useState({name:"",description:"",permissionIds:[],accessScope:"OWN",isActive:!0}),[i,o]=h.useState({}),[c,u]=h.useState(!0),[m,g]=h.useState({});h.useEffect(()=>{b()},[]),h.useEffect(()=>{e&&(n({accessScope:"OWN",...e}),g({}))},[e]);const f=N=>{const k=(N||"").trim();return k?k.length<3?"Role name must be at least 3 characters":/<[^>]*>/i.test(k)?"Invalid characters detected":/^[A-Za-z\s]+$/.test(k)?null:"Only letters and spaces are allowed":"Role name is required"},y=/^[A-Za-z0-9 _-]+$/,p=N=>{const k=(N||"").trim();return k?y.test(k)?null:"Only letters, numbers, spaces, hyphen (-) and underscore (_) allowed":null},b=async()=>{try{const N=await Ga.getPermissions(),E=((Array.isArray(N?.data)?N.data:N?.permissions||N?.data||[])||[]).reduce((C,S)=>{if(!S)return C;const P=S.module||"GENERAL";return C[P]||(C[P]=[]),C[P].push(S),C},{});o(E)}catch(N){console.error("Error fetching permissions:",N),M.error("Failed to fetch permissions")}finally{u(!1)}},j=N=>{N.preventDefault();const k={},E=f(s.name);E&&(k.name=E),s.permissionIds.length===0&&(k.permissions="At least one permission is required");const C=p(s.description);if(C&&(k.description=C),Object.keys(k).length>0){g(k);return}g({}),r(s)},v=(N,k)=>{n(k?{...s,permissionIds:[...s.permissionIds,N]}:{...s,permissionIds:s.permissionIds.filter(E=>E!==N)})};return t.jsxs("form",{onSubmit:j,className:"space-y-5",noValidate:!0,children:[m.general&&t.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-sm text-red-700 dark:text-red-400",children:m.general}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3",children:[t.jsx("div",{children:t.jsx(Jt,{label:"Role Name",leftIcon:t.jsx(Gs,{className:"h-4 w-4 text-gray-400"}),value:s.name,onChange:N=>{const k=N.target.value;n({...s,name:k});const E=f(k);g(C=>({...C,name:E||""})),E||g(C=>{const{name:S,...P}=C;return P})},required:!0,error:m.name})}),e&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:s.isActive,onChange:N=>n({...s,isActive:N.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[t.jsx(ct,{className:"h-4 w-4 mr-1"}),"Active Role"]})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Active roles can be assigned to users"})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Access Scope *"}),t.jsxs("select",{value:s.accessScope,onChange:N=>n({...s,accessScope:N.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[t.jsx("option",{value:"OWN",children:"Own"}),t.jsx("option",{value:"GLOBAL",children:"Global"})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Choose whether this role grants access only to user's own records or global access."})]})}),t.jsx(qc,{label:"Description (Optional)",value:s.description,onChange:N=>{const k=N.target.value;n({...s,description:k});const E=p(k);g(C=>({...C,description:E||""})),E||g(C=>{const{description:S,...P}=C;return P})},error:m.description,rows:3}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t.jsx(Ui,{className:"h-4 w-4 mr-1"}),"Permissions *"]}),m.permissions&&t.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mb-3",children:m.permissions}),t.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-xl p-4 bg-white dark:bg-gray-700",children:c?t.jsx("div",{className:"text-center py-4",children:t.jsx(Zm,{})}):Object.entries(i||{}).length===0?t.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No permissions available"}):Object.entries(i||{}).map(([N,k])=>t.jsxs("div",{className:"mb-4 last:mb-0",children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[t.jsx(Ui,{className:"h-4 w-4 mr-2 text-purple-600 dark:text-purple-400"}),N]}),t.jsx("div",{className:"space-y-2 ml-6",children:k.map(E=>t.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:s.permissionIds.includes(E.id),onChange:C=>v(E.id,C.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:E.name}),E.description&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:E.description})]})]},E.id))})]},N))}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Select one or more permissions to assign to this role"})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"submit",disabled:a,className:"inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold text-white bg-rose-500 hover:bg-rose-600 focus:outline-none focus:ring-2 focus:ring-rose-500 disabled:opacity-50",children:a?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):e?"Update Role":"Create Role"})})]})},goe=()=>{const[e,r]=h.useState(!1),a=mt(),{refreshRolesCount:s}=jn(),n=async i=>{r(!0);const o=await Ga.createRole(i);o.success?(M.success(o.message),await s(),a("/roles")):M.error(o.message),r(!1)};return t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsxs("div",{className:"mb-6 flex  items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Create Role"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Fill in the details below to create a new role"})]}),t.jsx("div",{className:"flex items-center gap-4 mb-4",children:t.jsx($a,{to:"/roles"})})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:t.jsx(XI,{onSubmit:n,submitting:e})})]})},hoe=()=>{const[e,r]=h.useState(!0),[a,s]=h.useState(!1),[n,i]=h.useState(),[o,c]=h.useState(!1),[u,m]=h.useState(null),[g,f]=h.useState([]),y=mt(),{id:p}=ui(),b=Bn(),{refreshRolesCount:j}=jn();h.useEffect(()=>{p&&(async()=>{try{if(r(!0),b.state?.role){const P=b.state.role;i({name:P.name,description:P.description||"",permissionIds:P.permissions?.map(D=>D.id)||[],accessScope:P.accessScope||"OWN",isActive:P.isActive}),r(!1);return}const S=(await Ga.getRoles()).data.roles.find(P=>P.id===Number(p));if(!S){M.error("Role not found"),y("/roles");return}i({name:S.name,description:S.description||"",permissionIds:S.permissions?.map(P=>P.id)||[],accessScope:S.accessScope||"OWN",isActive:S.isActive})}catch(E){console.error("Error fetching role:",E),M.error("Failed to load role"),y("/roles")}finally{r(!1)}})()},[p,b.state,y]);const v=async k=>{if(n?.isActive===!0&&k.isActive===!1){try{const E=await Ga.getUsersByRole(Number(p));E.success&&f(E.data||[])}catch(E){console.error("Error fetching affected users:",E),f([])}m(k),c(!0);return}N(k)},N=async k=>{s(!0);const E=await Ga.updateRole(Number(p),k);if(E.success){if(M.success(E.message),E.warning&&M.warn(E.warning),k.isActive===!1&&E.affectedUserIds&&E.affectedUserIds.length>0)try{const C=new CustomEvent("roleDeactivated",{detail:{userIds:E.affectedUserIds,roleName:n?.name,timestamp:new Date().toISOString()}});window.dispatchEvent(C),sessionStorage.setItem("role_deactivation_event",JSON.stringify({userIds:E.affectedUserIds,roleName:n?.name,timestamp:new Date().toISOString()})),M.info(`${E.affectedUserIds.length} user(s) will be logged out automatically`)}catch(C){console.error("Error notifying users of logout:",C)}await j(),y("/roles")}else M.error(E.message);s(!1)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsxs("div",{className:"mb-6 flex  items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit Role"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Update the role details below"})]}),t.jsx("div",{className:"flex items-center gap-4 mb-4",children:t.jsx($a,{to:"/roles"})})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:e?t.jsx(Zm,{}):t.jsx(XI,{initial:n,onSubmit:v,submitting:a})})]}),o&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4 text-red-600",children:" Warning"}),t.jsx("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/40 border-2 border-red-600 rounded-lg",children:t.jsxs("p",{className:"text-red-900 dark:text-red-200 font-semibold text-center text-lg",children:[g.length," User",g.length!==1?"s":""," will be Deactivated"]})}),g.length>0&&t.jsxs("div",{className:"mb-6 max-h-48 overflow-y-auto bg-gray-50 dark:bg-gray-700/50 rounded p-4 border border-gray-200 dark:border-gray-600",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"These users will not be able to login:"}),t.jsx("ul",{className:"space-y-2",children:g.map(k=>t.jsxs("li",{className:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 bg-red-600 rounded-full"}),t.jsxs("span",{children:[k.firstName," ",k.lastName]}),t.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",k.email,")"]})]},k.id))})]}),t.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-3 mb-6",children:t.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[t.jsx("strong",{children:"Note:"})," These users won't be able to access the system until you reactivate the role."]})}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 rounded bg-gray-300 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-400 dark:hover:bg-gray-600 font-medium",children:"Cancel"}),t.jsx("button",{onClick:()=>{c(!1),N(u)},className:"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700 font-medium",children:"Yes, Deactivate"})]})]})})]})},foe=()=>{const e=mt(),{counts:r,refreshTrashCounts:a}=jn(),s=[{title:"Deleted Users",description:"Manage soft-deleted user accounts",icon:Os,path:"/trash/users",color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",countKey:"trashUsers",retention:"30 days"},{title:"Deleted Leads",description:"Review removed lead records",icon:Lt,path:"/trash/leads",color:"from-green-500 to-green-600",bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",countKey:"trashLeads",retention:"30 days"},{title:"Deleted Roles",description:"Access removed role definitions",icon:Gs,path:"/trash/roles",color:"from-purple-500 to-purple-600",bgColor:"bg-purple-50 dark:bg-purple-900/20",borderColor:"border-purple-200 dark:border-purple-800",countKey:"trashRoles",retention:"30 days"}];return h.useEffect(()=>{a()},[a]),t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[t.jsxs("div",{className:"relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-rose-500/10 to-orange-500/10 dark:from-red-500/5 dark:to-orange-500/5"}),t.jsx("div",{className:"pointer-events-none absolute -right-8 -top-8 md:right-6 md:-top-10 aspect-square opacity-20 dark:opacity-15",children:t.jsxs("div",{className:"relative w-[220px] h-[220px] md:w-[320px] md:h-[320px] rotate-12",children:[t.jsx("div",{className:"absolute inset-0 blur-2xl bg-gradient-to-br from-red-400/50 to-orange-400/40 rounded-full"}),t.jsx("div",{className:"absolute inset-6 rounded-3xl border-2 border-white/40 dark:border-white/10"}),t.jsx(ht,{className:"absolute inset-0 m-auto w-44 h-44 md:w-64 md:h-64 text-rose-600 dark:text-rose-400"})]})}),t.jsx("div",{className:"relative px-6 py-6",children:t.jsxs("div",{className:" mx-auto",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Trash Management"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 ",children:"View soft-deleted records. Items are permanently deleted after 30 days."})]})})]}),t.jsx("div",{className:"px-6 py-4",children:t.jsx("div",{className:"max-w-full mx-auto",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map(n=>t.jsxs("button",{onClick:()=>e(n.path),className:`group relative overflow-hidden bg-white dark:bg-gray-800 rounded-2xl shadow border ${n.borderColor} hover:shadow-lg transition-all duration-300 w-full text-left`,children:[t.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${n.color} opacity-0 group-hover:opacity-5 transition-opacity duration-300`}),t.jsxs("div",{className:"relative px-4 py-3 w-full",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3 w-full",children:[t.jsx("div",{className:`p-2.5 rounded-xl bg-gradient-to-br ${n.color} shadow-lg flex-shrink-0`,children:t.jsx(n.icon,{className:"h-4 w-4 text-white"})}),t.jsx(xm,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors flex-shrink-0"})]}),t.jsxs("div",{className:"text-left w-full",children:[t.jsx("h3",{className:"text-base font-bold text-gray-900 dark:text-white mb-1.5 group-hover:text-gray-700 dark:group-hover:text-gray-200 transition-colors",children:n.title}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs leading-relaxed mb-0",children:n.description}),t.jsxs("div",{className:"flex items-center justify-between pt-3 mt-3 border-t border-gray-100 dark:border-gray-700 w-full",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[t.jsx(Yt,{className:"h-3 w-3"}),t.jsx("span",{children:n.retention})]}),t.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:(()=>{const i=n.countKey,o=r?.[i]??0,c=n.title.split(" ")[1]?.toLowerCase()||"items";return`${o} ${c}`})()})]})]})]}),t.jsx("div",{className:"absolute inset-0 rounded-2xl border-2 border-transparent group-hover:border-gray-200 dark:group-hover:border-gray-600 transition-colors duration-300"})]},n.title))})})})]})},xoe=()=>{const[e,r]=h.useState([]),[a,s]=h.useState(1),[n]=h.useState(10),[i,o]=h.useState(0),[c,u]=h.useState(0),[m,g]=h.useState(!1),[f,y]=h.useState(""),p=h.useMemo(()=>async v=>{try{g(!0),y("");const N=await Er.getDeletedUsers(v,n),k=N?.data?.users??[];r(k),o(N?.data?.pagination?.totalItems??0),u(N?.data?.pagination?.totalPages??0)}catch(N){const k=N?.response?.data?.message||"Failed to load deleted users";y(k),M.error(k,{toastId:"trash_users_fetch_error"})}finally{g(!1)}},[n]),b=async v=>{if(window.confirm("Are you sure you want to restore this user?"))try{await Er.restoreUser(v),M.success("User restored successfully!"),p(a)}catch(N){const k=N?.response?.data?.message||"Failed to restore user";M.error(k,{toastId:"trash_users_restore_error"})}},j=async v=>{if(window.confirm("This will permanently delete the user and all of their data. This action cannot be undone. Continue?"))try{await Er.deleteUserPermanently(v),M.success("User deleted permanently!"),p(a)}catch(N){const k=N?.response?.data?.message||"Failed to permanently delete user";M.error(k,{toastId:"trash_users_permanent_delete_error"})}};return h.useEffect(()=>{p(a)},[p,a]),t.jsxs("div",{className:"relative space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen overflow-hidden",children:[t.jsx("div",{className:"pointer-events-none absolute -right-10 -top-10 md:right-0 md:-top-8 aspect-square opacity-20 dark:opacity-15",children:t.jsxs("div",{className:"relative w-[220px] h-[220px] md:w-[320px] md:h-[320px] rotate-12",children:[t.jsx("div",{className:"absolute inset-0 blur-2xl bg-gradient-to-br from-rose-400/40 to-orange-400/30 rounded-full"}),t.jsx("div",{className:"absolute inset-6 rounded-3xl border-2 border-white/40 dark:border-white/10"}),t.jsx(Os,{className:"absolute inset-0 m-auto w-44 h-44 md:w-64 md:h-64 text-rose-600/60 dark:text-rose-400/50"})]})}),t.jsxs("div",{className:"flex items-center  justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-[#EF444E] to-[#ff5a64] text-white shadow-md",children:t.jsx(Os,{className:"h-5 w-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Users Trash"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View soft-deleted users. Items are permanently deleted after 30 days."})]})]}),t.jsx($a,{to:"/trash"})]}),t.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden hover:shadow-xl transition-all duration-300",children:[t.jsx("div",{className:"overflow-x-auto relative",children:t.jsxs("table",{className:"w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User"}),t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Email"}),t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Deleted"}),t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),m?t.jsx(Kl,{rows:8,columns:5}):t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f?t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-6 py-12 text-center",children:t.jsx(qr,{title:"Network or server error",description:f,icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),isError:!0})})}):e.length>0?e.map(v=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center",children:t.jsxs("span",{className:"text-white font-medium text-sm",children:[v.firstName?.[0],v.lastName?.[0]]})}),t.jsxs("div",{className:"ml-4",children:[t.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[v.firstName," ",v.lastName]}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center md:hidden",children:[t.jsx(ir,{className:"h-3 w-3 mr-1"})," ",v.email]})]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 hidden md:table-cell",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ir,{className:"h-3 w-3 mr-1"})," ",v.email]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(nr,{className:"h-3 w-3 mr-1"})," ",new Date(v.deletedAt).toLocaleString()]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("button",{onClick:()=>b(v.id),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors",title:"Restore user",children:[t.jsx(ym,{className:"h-3 w-3 mr-1"}),"Restore"]}),t.jsxs("button",{onClick:()=>j(v.id),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",title:"Delete permanently",children:[t.jsx(ht,{className:"h-3 w-3 mr-1"}),"Delete"]})]})})]},v.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-6 py-12 text-center",children:t.jsx(qr,{icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),description:"No deleted users found."})})})})]})}),t.jsx(zn,{currentPage:a,totalPages:c,totalItems:i,onPageChange:v=>{s(v),window.scrollTo({top:0,behavior:"smooth"})},itemsPerPage:n})]})]})},poe=()=>{const[e,r]=h.useState([]),[a,s]=h.useState(1),[n]=h.useState(10),[i,o]=h.useState(0),[c,u]=h.useState(0),[m,g]=h.useState(!1),[f,y]=h.useState(""),p=h.useMemo(()=>async v=>{try{g(!0),y("");const N=await Gt.getDeletedLeads(v,n),k=N?.data?.leads??[];r(k),o(N?.data?.pagination?.totalItems??0),u(N?.data?.pagination?.totalPages??0)}catch(N){const k=N?.response?.data?.message||"Failed to load deleted leads";y(k),M.error(k,{toastId:"trash_leads_fetch_error"})}finally{g(!1)}},[n]),b=async v=>{if(window.confirm("Are you sure you want to restore this lead?"))try{await Gt.restoreLead(v),M.success("Lead restored successfully!"),p(a)}catch(N){const k=N?.response?.data?.message||"Failed to restore lead";M.error(k,{toastId:"trash_leads_restore_error"})}},j=async v=>{if(window.confirm("This will permanently delete the lead and its related data. This action cannot be undone. Continue?"))try{await Gt.deleteLeadPermanently(v),M.success("Lead deleted permanently!"),p(a)}catch(N){const k=N?.response?.data?.message||"Failed to permanently delete lead";M.error(k,{toastId:"trash_leads_permanent_delete_error"})}};return h.useEffect(()=>{p(a)},[p,a]),t.jsxs("div",{className:"relative space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen overflow-hidden",children:[t.jsx("div",{className:"pointer-events-none absolute -right-10 -top-10 md:right-0 md:-top-8 aspect-square opacity-20 dark:opacity-15",children:t.jsxs("div",{className:"relative w-[220px] h-[220px] md:w-[320px] md:h-[320px] rotate-12",children:[t.jsx("div",{className:"absolute inset-0 blur-2xl bg-gradient-to-br from-rose-400/40 to-orange-400/30 rounded-full"}),t.jsx("div",{className:"absolute inset-6 rounded-3xl border-2 border-white/40 dark:border-white/10"}),t.jsx(Lt,{className:"absolute inset-0 m-auto w-44 h-44 md:w-64 md:h-64 text-rose-600/60 dark:text-rose-400/50"})]})}),t.jsxs("div",{className:"flex items-center  justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-[#EF444E] to-[#ff5a64] text-white shadow-md",children:t.jsx(Lt,{className:"h-5 w-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Leads Trash"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View soft-deleted leads. Items are permanently deleted after 30 days."})]})]}),t.jsx($a,{to:"/trash"})]}),t.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden hover:shadow-xl transition-all duration-300",children:[t.jsx("div",{className:"overflow-x-auto relative",children:t.jsxs("table",{className:"w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Lead"}),t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Email"}),t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Phone"}),t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Company"}),t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Deleted"}),t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),m?t.jsx(Kl,{rows:8,columns:6}):t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:t.jsx(qr,{title:"Network or server error",description:f,icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),isError:!0})})}):e.length>0?e.map(v=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center",children:t.jsxs("span",{className:"text-white font-medium text-sm",children:[v.firstName?.[0],v.lastName?.[0]]})}),t.jsxs("div",{className:"ml-4",children:[t.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[v.firstName," ",v.lastName]}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 md:hidden",children:v.company||""})]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 hidden md:table-cell",children:v.email??""}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 hidden md:table-cell",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ba,{className:"h-3 w-3 mr-1"})," ",v.phone??""]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 hidden md:table-cell",children:v.company??""}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(nr,{className:"h-3 w-3 mr-1"}),v.deletedAt?new Date(v.deletedAt).toLocaleString():""]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("button",{onClick:()=>b(v.id),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors",title:"Restore lead",children:[t.jsx(ym,{className:"h-3 w-3 mr-1"}),"Restore"]}),t.jsxs("button",{onClick:()=>j(v.id),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",title:"Delete permanently",children:[t.jsx(ht,{className:"h-3 w-3 mr-1"}),"Delete"]})]})})]},v.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:t.jsx(qr,{icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),description:"No deleted leads found."})})})})]})}),t.jsx(zn,{currentPage:a,totalPages:c,totalItems:i,onPageChange:v=>{s(v),window.scrollTo({top:0,behavior:"smooth"})},itemsPerPage:n})]})]})},yoe=()=>{const[e,r]=h.useState([]),[a,s]=h.useState(1),[n]=h.useState(10),[i,o]=h.useState(0),[c,u]=h.useState(0),[m,g]=h.useState(!1),[f,y]=h.useState(""),p=h.useMemo(()=>async v=>{try{g(!0),y("");const N=await Ga.getDeletedRoles(v,n),k=N?.data?.roles??[];r(k),o(N?.data?.pagination?.totalItems??0),u(N?.data?.pagination?.totalPages??0)}catch(N){const k=N?.response?.data?.message||"Failed to load deleted roles";y(k),M.error(k,{toastId:"trash_roles_fetch_error"})}finally{g(!1)}},[n]),b=async v=>{if(window.confirm("Are you sure you want to restore this role?"))try{await Ga.restoreRole(v),M.success("Role restored successfully!"),p(a)}catch(N){const k=N?.response?.data?.message||"Failed to restore role";M.error(k,{toastId:"trash_roles_restore_error"})}},j=async v=>{if(window.confirm("This will permanently delete the role. Any associated permissions will be lost. Continue?"))try{await Ga.deleteRolePermanently(v),M.success("Role deleted permanently!"),p(a)}catch(N){const k=N?.response?.data?.message||"Failed to permanently delete role";M.error(k,{toastId:"trash_roles_permanent_delete_error"})}};return h.useEffect(()=>{p(a)},[p,a]),t.jsxs("div",{className:"relative space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen overflow-hidden",children:[t.jsx("div",{className:"pointer-events-none absolute -right-10 -top-10 md:right-0 md:-top-8 aspect-square opacity-20 dark:opacity-15",children:t.jsxs("div",{className:"relative w-[220px] h-[220px] md:w-[320px] md:h-[320px] rotate-12",children:[t.jsx("div",{className:"absolute inset-0 blur-2xl bg-gradient-to-br from-purple-400/40 to-rose-400/30 rounded-full"}),t.jsx("div",{className:"absolute inset-6 rounded-3xl border-2 border-white/40 dark:border-white/10"}),t.jsx(Gs,{className:"absolute inset-0 m-auto w-44 h-44 md:w-64 md:h-64 text-purple-600/60 dark:text-purple-400/50"})]})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 text-white shadow-md",children:t.jsx(Gs,{className:"h-5 w-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Roles Trash"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View soft-deleted roles. Items are permanently deleted after 30 days."})]})]}),t.jsx($a,{to:"/trash"})]}),t.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden hover:shadow-xl transition-all duration-300",children:[t.jsx("div",{className:"overflow-x-auto relative",children:t.jsxs("table",{className:"w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Role"}),t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Description"}),t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Deleted"}),t.jsx("th",{className:"px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),m?t.jsx(Kl,{rows:8,columns:5}):t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f?t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-6 py-12 text-center",children:t.jsx(qr,{title:"Network or server error",description:f,icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),isError:!0})})}):e.length>0?e.map(v=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg shadow-md",children:t.jsx(Gs,{className:"h-4 w-4 text-white"})}),t.jsx("span",{className:"ml-3 text-sm font-medium text-gray-900 dark:text-white",children:v.name})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:v.description??""}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(nr,{className:"h-3 w-3 mr-1"})," ",new Date(v.deletedAt).toLocaleString()]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("button",{onClick:()=>b(v.id),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors",title:"Restore role",children:[t.jsx(ym,{className:"h-3 w-3 mr-1"}),"Restore"]}),t.jsxs("button",{onClick:()=>j(v.id),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",title:"Delete permanently",children:[t.jsx(ht,{className:"h-3 w-3 mr-1"}),"Delete"]})]})})]},v.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-6 py-12 text-center",children:t.jsx(qr,{icon:t.jsx(xt,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),description:"No deleted roles found."})})})})]})}),t.jsx(zn,{currentPage:a,totalPages:c,totalItems:i,onPageChange:v=>{s(v),window.scrollTo({top:0,behavior:"smooth"})},itemsPerPage:n})]})]})},voe=()=>{const[e,r]=h.useState([]),[a,s]=h.useState({}),[n,i]=h.useState({}),[o,c]=h.useState(!0),[u,m]=h.useState(!1),[g,f]=h.useState(null),[y,p]=h.useState(null),[b,j]=h.useState({});h.useEffect(()=>{v()},[]);const v=async()=>{try{c(!0);const P=await fetch("/api/business-settings/integrations/available",{headers:{Authorization:`Bearer ${localStorage.getItem(At.AUTH_TOKEN)}`}});if(P.ok){const H=await P.json();r(H.data.integrations)}const D=await fetch("/api/business-settings/integrations/status",{headers:{Authorization:`Bearer ${localStorage.getItem(At.AUTH_TOKEN)}`}});if(D.ok){const H=await D.json();s(H.data.integrations)}const I=await fetch("/api/business-settings/settings",{headers:{Authorization:`Bearer ${localStorage.getItem(At.AUTH_TOKEN)}`}});if(I.ok){const H=await I.json();i(H.data.settings)}}catch(P){console.error("Error fetching integrations:",P),M.error("Failed to load integration settings")}finally{c(!1)}},N=(P,D)=>{i(I=>({...I,[P]:D}))},k=P=>{j(D=>({...D,[P]:!D[P]}))},E=async()=>{try{m(!0);const P=await fetch("/api/business-settings/settings",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem(At.AUTH_TOKEN)}`,"Content-Type":"application/json"},body:JSON.stringify(n)}),D=await P.json();if(!P.ok)throw new Error(D.message||"Failed to save settings");M.success("Integration settings saved successfully"),await v()}catch(P){M.error(P.message||"Failed to save settings")}finally{m(!1)}},C=async P=>{try{f(P);const D=await fetch(`/api/business-settings/integrations/${P}/test`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(At.AUTH_TOKEN)}`}}),I=await D.json();if(!D.ok)throw new Error(I.message||"Connection test failed");M.success(`${P} connection test successful`)}catch(D){M.error(D.message||`${P} connection test failed`)}finally{f(null)}},S=async P=>{try{p(P);const D=await fetch(`/api/business-settings/integrations/${P}/sync`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(At.AUTH_TOKEN)}`}}),I=await D.json();if(!D.ok)throw new Error(I.message||"Lead sync failed");M.success(I.message||`${P} leads synced successfully`)}catch(D){M.error(D.message||`${P} lead sync failed`)}finally{p(null)}};return o?t.jsx("div",{className:"space-y-6 p-6",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ro,{className:"h-5 w-5 animate-spin"}),t.jsx("span",{children:"Loading integration settings..."})]})}):t.jsxs("div",{className:"space-y-6 p-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Third-Party Integrations"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure integrations to automatically import leads from external platforms."})]}),e.map(P=>t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-6",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:t.jsx(Ui,{className:"h-6 w-6 text-white"})})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:P.displayName}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:P.description}),t.jsxs("div",{className:"flex items-center space-x-2",children:[a[P.name.replace("-","")]?.configured?t.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[t.jsx(ct,{className:"h-4 w-4 mr-1"}),t.jsx("span",{className:"text-sm",children:"Configured"})]}):t.jsxs("div",{className:"flex items-center text-gray-400",children:[t.jsx(va,{className:"h-4 w-4 mr-1"}),t.jsx("span",{className:"text-sm",children:"Not configured"})]}),a[P.name.replace("-","")]?.enabled&&t.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Enabled"})]})]})]}),t.jsx("div",{className:"flex items-center space-x-2",children:a[P.name.replace("-","")]?.configured&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>C(P.name),disabled:g===P.name||y===P.name,className:"px-3 py-2 text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:g===P.name?t.jsx(Ro,{className:"h-4 w-4 mr-1 animate-spin"}):"Test"}),t.jsx("button",{onClick:()=>S(P.name),disabled:g===P.name||y===P.name,className:"px-3 py-2 text-sm bg-green-100 text-green-700 rounded-md hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:y===P.name?t.jsx(Ro,{className:"h-4 w-4 mr-1 animate-spin"}):"Sync Now"})]})})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Configuration"}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable Integration"}),t.jsx("input",{type:"checkbox",checked:n[`${P.name.replace("-","")}Enabled`]||!1,onChange:D=>N(`${P.name.replace("-","")}Enabled`,D.target.checked),className:"rounded text-blue-600 focus:ring-blue-500"})]}),P.fields.map(D=>{const I=`${P.name.replace("-","")}${D.name==="apiKey"?"ApiKey":"ApiSecret"}`,H=D.type==="password",W=b[`${P.name}-${D.name}`];return t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[D.label," ",D.required&&"*"]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:H&&!W?"password":"text",value:n[I]||"",onChange:K=>N(I,K.target.value),placeholder:`Enter ${D.label.toLowerCase()}`,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white pr-10"}),H&&t.jsx("button",{type:"button",onClick:()=>k(`${P.name}-${D.name}`),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:W?t.jsx(pn,{className:"h-4 w-4"}):t.jsx(Bt,{className:"h-4 w-4"})})]})]},D.name)})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Setup Instructions"}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-md p-4",children:t.jsx("pre",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-sans",children:P.instructions})})]})]})]},P.name)),t.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-600",children:[t.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancel"}),t.jsx("button",{onClick:E,disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:u?t.jsxs(t.Fragment,{children:[t.jsx(Ro,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Settings"})]})]})},Ah={getLeadSources:async()=>(await oe.get("/lead-sources")).data,createLeadSource:async e=>(await oe.post("/lead-sources",e)).data,updateLeadSource:async(e,r)=>(await oe.put(`/lead-sources/${e}`,r)).data,deleteLeadSource:async e=>{await oe.delete(`/lead-sources/${e}`)}},ab=({open:e,title:r,onClose:a,onSubmit:s,submitText:n="Save",disabled:i,children:o})=>e?t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[t.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:a}),t.jsx("div",{className:"relative w-full max-w-md",children:t.jsx("div",{className:"relative overflow-hidden rounded-xl border border-gray-200/70 dark:border-gray-700/60 bg-white dark:bg-gray-900 shadow-xl max-h-[85vh] flex flex-col",children:t.jsxs("form",{onSubmit:s,noValidate:!0,children:[t.jsxs("div",{className:"flex items-start justify-between px-5 pt-5 pb-3",children:[t.jsx("h3",{id:"modal-title",className:"text-base font-semibold text-gray-900 dark:text-white",children:r}),t.jsx("button",{type:"button",onClick:a,className:"inline-flex h-8 w-8 items-center justify-center rounded-md text-gray-500 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-900/20","aria-label":"Close",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"h-4 w-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"px-5 pb-5 space-y-4 overflow-y-auto flex-1",children:o}),t.jsxs("div",{className:"flex justify-end gap-2 px-5 py-4 border-t border-gray-200 dark:border-gray-800 bg-gray-50/60 dark:bg-gray-900",children:[t.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-md text-sm border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-900/20",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:i,className:`px-4 py-2 rounded-md text-sm text-white focus:outline-none focus:ring-2 focus:ring-gray-900/20 transition-colors ${i?"bg-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600"}`,children:n})]})]})})})]}):null,boe=["#ef4444","#f97316","#f59e0b","#eab308","#84cc16","#22c55e","#10b981","#14b8a6","#06b6d4","#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899","#f43f5e","#111827","#64748b"],woe=({colors:e=boe,value:r,onChange:a})=>t.jsx("div",{className:"grid grid-cols-9 gap-2",children:e.map(s=>{const n=r?.toLowerCase()===s.toLowerCase();return t.jsx("button",{type:"button",onClick:()=>a&&a(s),className:`h-6 w-6 rounded-md border ${n?"ring-2 ring-offset-2 ring-gray-900 dark:ring-gray-300":""}`,style:{backgroundColor:s,borderColor:"#e5e7eb"},title:s},s)})}),joe=({checked:e,onChange:r,label:a,activeLabel:s="Active",inactiveLabel:n="Inactive",className:i=""})=>t.jsxs("div",{className:`flex items-center ${i}`,children:[a&&t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 mr-3",children:a}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("button",{type:"button",onClick:()=>r(!e),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#ef444e] focus:ring-offset-2 ${e?"bg-gradient-to-r from-[#ef444e] to-[#f26971]":"bg-gray-300 dark:bg-gray-600"}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e?"translate-x-6":"translate-x-1"}`})}),t.jsx("div",{className:"flex items-center space-x-1",children:e?t.jsxs(t.Fragment,{children:[t.jsx(ct,{className:"h-4 w-4 text-[#ef444e]"}),t.jsx("span",{className:"text-sm font-medium text-[#ef444e] dark:text-[#f26971]",children:s})]}):t.jsxs(t.Fragment,{children:[t.jsx(va,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:n})]})})]})]}),Noe=({fields:e,onEdit:r,onDelete:a,onToggleActive:s,showOptionsSource:n=!1})=>e.length===0?t.jsxs("div",{className:"text-center py-10 text-gray-500 dark:text-gray-400",children:[t.jsx("p",{className:"text-sm font-medium",children:"No fields configured"}),t.jsx("p",{className:"text-xs mt-1",children:"Default and custom fields will appear here"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-left text-gray-600 dark:text-gray-300",children:[t.jsx("th",{className:"py-2 pr-3",children:"Field"}),t.jsx("th",{className:"py-2 pr-3",children:"Key"}),t.jsx("th",{className:"py-2 pr-3",children:"Type"}),t.jsx("th",{className:"py-2 pr-3",children:"Options"}),t.jsx("th",{className:"py-2 pr-3",children:"Can Turn Off"}),t.jsx("th",{className:"py-2 pr-3",children:"Required"}),t.jsx("th",{className:"py-2 pr-3",children:"Active"}),t.jsx("th",{className:"py-2 pr-3 text-right",children:"Actions"})]})}),t.jsx("tbody",{children:e.map(i=>t.jsxs("tr",{className:"border-t border-gray-100 dark:border-gray-700 hover:bg-gray-50/70 dark:hover:bg-gray-700/40 transition-colors",children:[t.jsxs("td",{className:"py-2 pr-3",children:[t.jsxs("div",{className:"font-medium text-gray-900 dark:text-white flex items-center",children:[t.jsx(Lt,{className:"h-4 w-4 mr-2 text-gray-400"})," ",i.name]}),i.description&&t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:i.description})]}),t.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-300",children:i.key}),t.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-300",children:t.jsx("span",{className:"inline-flex items-center rounded-full bg-indigo-50 px-2 py-0.5 text-[11px] font-medium text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-200",children:i.type})}),t.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-300",children:i.type==="DROPDOWN"||i.type==="MULTI_SELECT"?t.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-[11px] font-medium text-gray-700 dark:bg-gray-700 dark:text-gray-200",children:n&&i.optionsSource?i.optionsSource==="roles"?"Roles":i.optionsSource==="users"?"Users":`${i.options?.length||0} values`:`${i.options?.length||0} values`}):t.jsx("span",{className:"text-xs text-gray-400",children:""})}),t.jsx("td",{className:"py-2 pr-3",children:t.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium ${i.canBeTurnedOff?"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-200":"bg-rose-50 text-rose-700 dark:bg-rose-900/40 dark:text-rose-200"}`,children:i.canBeTurnedOff?"Yes":"No"})}),t.jsx("td",{className:"py-2 pr-3",children:t.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium ${i.required?"bg-amber-50 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-200"}`,children:i.required?"Yes":"No"})}),t.jsx("td",{className:"py-2 pr-3",children:t.jsx("div",{title:i.canBeTurnedOff?"":"This field cannot be turned off",children:t.jsx(joe,{checked:i.isActive,onChange:o=>{i.canBeTurnedOff&&s(i,o)},activeLabel:"On",inactiveLabel:"Off",className:i.canBeTurnedOff?"":"opacity-50 pointer-events-none"})})}),t.jsx("td",{className:"py-2 pr-3",children:t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx("button",{onClick:()=>r(i),className:"px-2 py-1 rounded-md border border-gray-300 dark:border-gray-600 text-xs hover:bg-gray-50 dark:hover:bg-gray-700 shadow-sm dark:text-white",children:t.jsx(er,{className:"h-4 w-4"})}),!i.isDefault&&t.jsx("button",{onClick:()=>a(i.id,i.isDefault),className:"px-2 py-1 rounded-md border border-gray-300 dark:border-gray-600 text-xs hover:bg-red-50 dark:hover:bg-gray-700 text-red-600 shadow-sm",children:t.jsx(ht,{className:"h-4 w-4"})})]})})]},i.id))})]})}),ZI=/^[A-Za-z0-9 _-]+$/,Nu=e=>{const r=(e||"").trim();if(!r)return"Name is required";if(!ZI.test(r))return"Only letters, numbers, spaces, hyphen (-) and underscore (_) allowed"},ku=e=>{const r=(e||"").trim();if(r&&!ZI.test(r))return"Only letters, numbers, spaces, hyphen (-) and underscore (_) allowed"},JI="lead_form_fields",koe=()=>{try{const e=localStorage.getItem(JI);if(!e)return[];const r=JSON.parse(e);return Array.isArray(r)?r:[]}catch{return[]}},Su=e=>{try{localStorage.setItem(JI,JSON.stringify(e))}catch{}},_P=({title:e,subtitle:r})=>t.jsxs("div",{className:"text-center py-10 text-gray-500 dark:text-gray-400",children:[t.jsx("p",{className:"text-sm font-medium",children:e}),r&&t.jsx("p",{className:"text-xs mt-1",children:r})]}),sb=({icon:e,title:r,action:a})=>t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[e,t.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:r})]}),a]}),Soe=()=>{const{hasPermission:e}=xr(),{leadSources:r}=Hr(),[a,s]=h.useState([]),[n,i]=h.useState([]),[o,c]=h.useState(!1),[u,m]=h.useState(null),[g,f]=h.useState([]),y=h.useMemo(()=>({read:e("lead.read"),create:e("lead.create"),update:e("lead.update"),delete:e("lead.delete")}),[e]),p=async()=>{try{c(!0),m(null);const[L,G]=await Promise.all([Zn.getTags(),Ah.getLeadSources()]),T=L?.data?.tags??L?.tags??L,_=G?.data?.leadSources??G?.leadSources??G?.data??G;s(Array.isArray(T)?T:[]);const F=Array.isArray(r)&&r.length>0?r:Array.isArray(_)?_:[];i(F);const ee=koe();if(!ee||ee.length===0){const Z=Date.now(),U=[{id:Z-1900,name:"First Name",key:"first_name",type:"TEXT",canBeTurnedOff:!1,required:!0,description:"Lead's first name",isActive:!0,isDefault:!0},{id:Z-1800,name:"Last Name",key:"last_name",type:"TEXT",canBeTurnedOff:!1,required:!0,description:"Lead's last name",isActive:!0,isDefault:!0},{id:Z-1700,name:"Email",key:"email",type:"EMAIL",canBeTurnedOff:!0,required:!1,description:"Primary email address",isActive:!0,isDefault:!0},{id:Z-1600,name:"Phone Number",key:"phone",type:"PHONE",canBeTurnedOff:!0,required:!1,description:"Lead's phone number",isActive:!0,isDefault:!0},{id:Z-1500,name:"Company Name",key:"company",type:"TEXT",canBeTurnedOff:!0,required:!1,description:"Name of lead's company",isActive:!0,isDefault:!0},{id:Z-1400,name:"Job Title",key:"job_title",type:"TEXT",canBeTurnedOff:!0,required:!1,description:"Role of the lead in their company",isActive:!0,isDefault:!0},{id:Z-1300,name:"Lead Source",key:"source_id",type:"DROPDOWN",canBeTurnedOff:!0,required:!1,description:"Origin of the lead (Website, Referral, Ad, etc.)",isActive:!0,isDefault:!0},{id:Z-1200,name:"Industry",key:"industry",type:"DROPDOWN",canBeTurnedOff:!0,required:!1,description:"Industry the lead belongs to",isActive:!0,isDefault:!0},{id:Z-1100,name:"Lead Status",key:"status",type:"DROPDOWN",canBeTurnedOff:!1,required:!0,description:"Pipeline stage (New, Contacted, Qualified, etc.)",isActive:!0,isDefault:!0},{id:Z-1e3,name:"Rating",key:"rating",type:"DROPDOWN",canBeTurnedOff:!0,required:!1,description:"Lead quality (Hot, Warm, Cold)",isActive:!0,isDefault:!0},{id:Z-900,name:"Owner",key:"owner_id",type:"DROPDOWN",canBeTurnedOff:!1,required:!0,description:"CRM user assigned to this lead",isActive:!0,isDefault:!0},{id:Z-800,name:"Created Date",key:"created_at",type:"DATE",canBeTurnedOff:!1,required:!0,description:"Auto-generated creation timestamp",isActive:!0,isDefault:!0},{id:Z-700,name:"Last Contacted Date",key:"last_contacted_at",type:"DATE",canBeTurnedOff:!0,required:!1,description:"Last time the lead was contacted",isActive:!0,isDefault:!0},{id:Z-600,name:"Notes",key:"notes",type:"TEXT",canBeTurnedOff:!0,required:!1,description:"Additional notes about the lead",isActive:!0,isDefault:!0},{id:Z-500,name:"Tags",key:"tags",type:"MULTI_SELECT",canBeTurnedOff:!0,required:!1,description:"Tags to segment leads",isActive:!0,isDefault:!0},{id:Z-400,name:"Website",key:"website",type:"TEXT",canBeTurnedOff:!0,required:!1,description:"Lead/company website URL",isActive:!0,isDefault:!0},{id:Z-300,name:"Location / Address",key:"address",type:"TEXT",canBeTurnedOff:!0,required:!1,description:"Lead's address or location",isActive:!0,isDefault:!0},{id:Z-200,name:"Time Zone",key:"time_zone",type:"DROPDOWN",canBeTurnedOff:!0,required:!1,description:"List of all time zones for scheduling",isActive:!0,isDefault:!0}];Su(U),f(U)}else{const Z=[{name:"First Name",key:"first_name",type:"TEXT",canBeTurnedOff:!1,required:!0,description:"Lead's first name",isActive:!0,isDefault:!0},{name:"Last Name",key:"last_name",type:"TEXT",canBeTurnedOff:!1,required:!0,description:"Lead's last name",isActive:!0,isDefault:!0},{name:"Email",key:"email",type:"EMAIL",canBeTurnedOff:!0,required:!1,description:"Primary email address",isActive:!0,isDefault:!0},{name:"Phone Number",key:"phone",type:"PHONE",canBeTurnedOff:!0,required:!1,description:"Lead's phone number",isActive:!0,isDefault:!0},{name:"Company Name",key:"company",type:"TEXT",canBeTurnedOff:!0,required:!1,description:"Name of lead's company",isActive:!0,isDefault:!0},{name:"Job Title",key:"job_title",type:"TEXT",canBeTurnedOff:!0,required:!1,description:"Role of the lead in their company",isActive:!0,isDefault:!0},{name:"Lead Source",key:"source_id",type:"DROPDOWN",canBeTurnedOff:!0,required:!1,description:"Origin of the lead",isActive:!0,isDefault:!0},{name:"Industry",key:"industry",type:"DROPDOWN",canBeTurnedOff:!0,required:!1,description:"Industry the lead belongs to",isActive:!0,isDefault:!0},{name:"Lead Status",key:"status",type:"DROPDOWN",canBeTurnedOff:!1,required:!0,description:"Pipeline stage",isActive:!0,isDefault:!0},{name:"Rating",key:"rating",type:"DROPDOWN",canBeTurnedOff:!0,required:!1,description:"Lead quality",isActive:!0,isDefault:!0},{name:"Owner",key:"owner_id",type:"DROPDOWN",canBeTurnedOff:!1,required:!0,description:"Assigned CRM user",isActive:!0,isDefault:!0},{name:"Created Date",key:"created_at",type:"DATE",canBeTurnedOff:!1,required:!0,description:"Creation timestamp",isActive:!0,isDefault:!0},{name:"Last Contacted Date",key:"last_contacted_at",type:"DATE",canBeTurnedOff:!0,required:!1,description:"Last contacted time",isActive:!0,isDefault:!0},{name:"Notes",key:"notes",type:"TEXT",canBeTurnedOff:!0,required:!1,description:"Additional details",isActive:!0,isDefault:!0},{name:"Tags",key:"tags",type:"MULTI_SELECT",canBeTurnedOff:!0,required:!1,description:"Tags to segment leads",isActive:!0,isDefault:!0},{name:"Website",key:"website",type:"TEXT",canBeTurnedOff:!0,required:!1,description:"Company website",isActive:!0,isDefault:!0},{name:"Location / Address",key:"address",type:"TEXT",canBeTurnedOff:!0,required:!1,description:"Lead's address or location",isActive:!0,isDefault:!0},{name:"Time Zone",key:"time_zone",type:"DROPDOWN",canBeTurnedOff:!0,required:!1,description:"For scheduling follow-ups",isActive:!0,isDefault:!0}],U=ee.filter(ge=>ge.key!=="lead_id"&&ge.key!=="custom_fields"),X=new Set(U.map(ge=>ge.key)),V=[...U,...Z.filter(ge=>!X.has(ge.key)).map((ge,Te)=>({id:Date.now()+Te,...ge}))].map(ge=>ge.canBeTurnedOff?ge:{...ge,isActive:!0});Su(V),f(V)}}catch(L){m(L?.message||"Failed to load settings")}finally{c(!1)}};h.useEffect(()=>{y.read&&p()},[y.read,r]);const b=async L=>{W({open:!0,editing:L||null})},j=async L=>{if(y.delete&&confirm("Delete this tag?"))try{c(!0),await Zn.deleteTag(L),s(G=>G.filter(T=>T.id!==L)),M.success("Tag deleted")}catch(G){M.error(G?.message||"Delete failed")}finally{c(!1)}},v=async L=>{B({open:!0,editing:L||null})},N=async L=>{if(y.delete&&confirm("Delete this lead source?"))try{c(!0),await Ah.deleteLeadSource(L),i(G=>G.filter(T=>T.id!==L)),M.success("Lead source deleted")}catch(G){M.error(G?.message||"Delete failed")}finally{c(!1)}},[k,E]=h.useState({open:!1,editing:null}),C=()=>E({open:!0,editing:null}),S=L=>E({open:!0,editing:L}),P=L=>{L.preventDefault();const G=new FormData(L.currentTarget),T={id:k.editing?.id,name:String(G.get("name")||"").trim(),key:String(G.get("key")||"").trim(),type:String(G.get("type")||"TEXT"),canBeTurnedOff:!!G.get("canBeTurnedOff"),required:!!G.get("required"),options:(()=>{const ee=String(G.get("options")||"").trim();if(ee)return ee.split(/\n|,/).map(Z=>Z.trim()).filter(Z=>Z.length>0)})(),isActive:!!G.get("isActive"),isDefault:k.editing?.isDefault??!1,description:String(G.get("description")||"").trim()||void 0},_=Nu(T.name||""),F=ku(T.description);if(_||F){M.error(_||F);return}T.key||(T.key=T.name.toLowerCase().replace(/\s+/g,"_")),f(ee=>{let Z;if(T.id)Z=ee.map(U=>U.id===T.id?{...U,...T,options:T.type==="DROPDOWN"||T.type==="MULTI_SELECT"?T.options??U.options:void 0}:U);else{const U={id:Date.now(),name:T.name,key:T.key,type:T.type||"TEXT",canBeTurnedOff:!!T.canBeTurnedOff,required:!!T.required,description:T.description,options:T.type==="DROPDOWN"||T.type==="MULTI_SELECT"?T.options:void 0,isActive:T.isActive??!0,isDefault:!!T.isDefault};Z=[...ee,U]}return Su(Z),Z}),E({open:!1,editing:null}),M.success(T.id?"Field updated":"Field created")},D=(L,G)=>{G||confirm("Delete this field?")&&(f(T=>{const _=T.filter(F=>F.id!==L);return Su(_),_}),M.success("Field deleted"))},I=(L,G)=>{if(!L.canBeTurnedOff&&!G){M.info("This field cannot be turned off");return}f(T=>{const _=T.map(F=>F.id===L.id?{...F,isActive:G}:F);return Su(_),_})},[H,W]=h.useState({open:!1,editing:null}),[K,B]=h.useState({open:!1,editing:null}),[z,q]=h.useState({name:"",color:"#3B82F6",description:""}),[J,ae]=h.useState({});h.useEffect(()=>{H.open?(q({name:H.editing?.name||"",color:H.editing?.color||"#3B82F6",description:H.editing?.description||""}),ae({})):K.open?(q({name:K.editing?.name||"",description:K.editing?.description||""}),ae({})):(q({name:"",color:"#3B82F6",description:""}),ae({}))},[H,K]);const ne=async L=>{L.preventDefault();const G=Nu(z.name),T=ku(z.description);if(G||T){ae({name:G,description:T});return}try{if(c(!0),H.editing){const _=await Zn.updateTag(H.editing.id,{name:z.name,color:z.color,description:z.description}),F=_?.data?.tag??_?.tag??_;s(ee=>ee.map(Z=>Z.id===H.editing.id?{...Z,...F}:Z)),M.success("Tag updated")}else{const _=await Zn.createTag({name:z.name,color:z.color,description:z.description}),F=_?.data?.tag??_?.tag??_;s(ee=>[F,...ee]),M.success("Tag created")}W({open:!1,editing:null})}catch(_){M.error(_?.response?.data?.message||_?.message||"Operation failed")}finally{c(!1)}},re=async L=>{L.preventDefault();const G=Nu(z.name),T=ku(z.description);if(G||T){ae({name:G,description:T});return}try{if(c(!0),K.editing){const _=await Ah.updateLeadSource(K.editing.id,{name:z.name,description:z.description}),F=_?.data?.leadSource??_?.leadSource??_;i(ee=>ee.map(Z=>Z.id===K.editing.id?{...Z,...F}:Z)),M.success("Lead source updated")}else{const _=await Ah.createLeadSource({name:z.name,description:z.description}),F=_?.data?.leadSource??_?.leadSource??_;i(ee=>[F,...ee]),M.success("Lead source created")}B({open:!1,editing:null})}catch(_){M.error(_?.response?.data?.message||_?.message||"Operation failed")}finally{c(!1)}};return t.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 overflow-hidden",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:"absolute inset-x-0 top-0 h-40 bg-gradient-to-r from-green-500 via-green-500 to-green-500 opacity-20 blur-3xl pointer-events-none"})}),t.jsx("div",{className:"relative px-6 py-6",children:t.jsxs("div",{className:" mx-auto",children:[t.jsx("div",{className:"pointer-events-none absolute -right-10 -top-10 md:right-0 md:-top-8 aspect-square opacity-10 dark:opacity-10",children:t.jsxs("div",{className:"relative w-[220px] h-[220px] md:w-[300px] md:h-[300px] rotate-12",children:[t.jsx("div",{className:"absolute inset-0 blur-2xl bg-gradient-to-br from-green-400/40 via-green-400/30 to-green-400/30 rounded-full"}),t.jsx("div",{className:"absolute inset-6 rounded-3xl border-2 border-white/40 dark:border-white/10"})]})}),t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Lead Settings"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Organize taxonomy and configure the lead form for your team"})]}),t.jsx($a,{to:"/leads"})]}),t.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-lg border border-gray-200/60 dark:border-gray-700/60 p-5 my-6",children:[t.jsx(sb,{icon:t.jsx(oU,{className:"h-4 w-4 text-gray-600 dark:text-gray-300"}),title:"Lead Form Configuration",action:t.jsxs("button",{onClick:C,className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600 shadow-sm",children:[t.jsx(Rt,{className:"h-4 w-4 mr-1"})," Add Field"]})}),t.jsx("div",{className:"my-6",children:t.jsx(qI,{})}),t.jsx(Noe,{fields:g,onEdit:S,onDelete:D,onToggleActive:I,showOptionsSource:!1})]}),t.jsx(ab,{open:k.open,title:k.editing?"Edit Field":"Add Field",onClose:()=>E({open:!1,editing:null}),onSubmit:L=>P(L),submitText:k.editing?"Update":"Create",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Field Name"}),t.jsx("input",{name:"name",defaultValue:k.editing?.name||"",required:!0,className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Key"}),t.jsx("input",{name:"key",defaultValue:k.editing?.key||"",placeholder:"first_name",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),t.jsxs("select",{name:"type",defaultValue:k.editing?.type||"TEXT",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900",children:[t.jsx("option",{value:"TEXT",children:"Text"}),t.jsx("option",{value:"EMAIL",children:"Email"}),t.jsx("option",{value:"PHONE",children:"Phone"}),t.jsx("option",{value:"NUMBER",children:"Number"}),t.jsx("option",{value:"DATE",children:"Date"}),t.jsx("option",{value:"DROPDOWN",children:"Dropdown"}),t.jsx("option",{value:"MULTI_SELECT",children:"Multi-select"}),t.jsx("option",{value:"CHECKBOX",children:"Checkbox"}),t.jsx("option",{value:"TOGGLE",children:"Toggle"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),t.jsx("input",{name:"description",defaultValue:k.editing?.description||"",className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-4 text-xs",children:[t.jsxs("label",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[t.jsx("input",{type:"checkbox",name:"required",defaultChecked:k.editing?.required??!1,className:"mr-2"}),"Required"]}),t.jsxs("label",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[t.jsx("input",{type:"checkbox",name:"canBeTurnedOff",defaultChecked:k.editing?.canBeTurnedOff??!0,className:"mr-2"}),"Can be turned off"]}),t.jsxs("label",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[t.jsx("input",{type:"checkbox",name:"isActive",defaultChecked:k.editing?.isActive??!0,className:"mr-2"}),"Active"]})]}),(k.editing?.type==="DROPDOWN"||k.editing?.type==="MULTI_SELECT")&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Options (comma or newline separated)"}),t.jsx("textarea",{name:"options",defaultValue:(k.editing?.options||[]).join(`
`),rows:3,className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900",placeholder:`e.g.
Website
Referral
Ad`})]})]})}),u&&t.jsx("div",{className:"mb-3 text-sm text-red-600 dark:text-red-400",children:u}),t.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-lg border border-gray-200/60 dark:border-gray-700/60 p-5 my-6",children:[t.jsx(sb,{icon:t.jsx(aU,{className:"h-4 w-4 text-gray-600 dark:text-gray-300"}),title:"Tags",action:y.create?t.jsxs("button",{onClick:()=>b(),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600 shadow-sm",disabled:o,children:[t.jsx(Rt,{className:"h-4 w-4 mr-1"})," New Tag"]}):null}),a.length===0?t.jsx(_P,{title:"No tags yet",subtitle:"Create your first tag"}):t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-3",children:a.map(L=>t.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-3 flex items-start justify-between hover:bg-gray-50/70 dark:hover:bg-gray-700/40 transition shadow-sm",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"w-3 h-3 rounded",style:{backgroundColor:L.color}}),t.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:L.name})]}),L.description&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:L.description})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[y.update&&t.jsx("button",{className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 shadow-sm dark:text-white",onClick:()=>b(L),disabled:o,title:"Edit",children:t.jsx(er,{className:"h-4 w-4"})}),y.delete&&t.jsx("button",{className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-red-600 shadow-sm",onClick:()=>j(L.id),disabled:o,title:"Delete",children:t.jsx(ht,{className:"h-4 w-4"})})]})]},L.id))})]}),t.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-lg border border-gray-200/60 dark:border-gray-700/60 p-5 my-6",children:[t.jsx(sb,{icon:t.jsx(B9,{className:"h-4 w-4 text-gray-600 dark:text-gray-300"}),title:"Lead Sources",action:y.create?t.jsxs("button",{onClick:()=>v(),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600 shadow-sm",disabled:o,children:[t.jsx(Rt,{className:"h-4 w-4 mr-1"})," New Source"]}):null}),!Array.isArray(n)||n.length===0?t.jsx(_P,{title:"No lead sources yet",subtitle:"Create your first source"}):t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-3",children:n.map(L=>t.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-3 flex items-start justify-between hover:bg-gray-50/70 dark:hover:bg-gray-700/40 transition shadow-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:L.name}),L.description&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:L.description})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[y.update&&t.jsx("button",{className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 shadow-sm dark:text-white",onClick:()=>v(L),disabled:o,title:"Edit",children:t.jsx(er,{className:"h-4 w-4"})}),y.delete&&t.jsx("button",{className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-red-600 shadow-sm",onClick:()=>N(L.id),disabled:o,title:"Delete",children:t.jsx(ht,{className:"h-4 w-4"})})]})]},L.id))})]}),t.jsx(ab,{open:H.open,title:H.editing?"Edit Tag":"New Tag",onClose:()=>W({open:!1,editing:null}),onSubmit:ne,disabled:o,submitText:H.editing?"Update":"Create",children:t.jsxs("div",{className:"space-y-3",children:[t.jsx(Jt,{label:"Name",value:z.name,onChange:L=>{const G=L.target.value;q(_=>({..._,name:G}));const T=Nu(G);ae(_=>({..._,name:T}))},placeholder:"e.g. VIP",required:!0,error:J.name}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Color"}),t.jsx(woe,{value:z.color,onChange:L=>q(G=>({...G,color:L}))})]}),t.jsx(qc,{label:"Description",value:z.description,onChange:L=>{const G=L.target.value;q(_=>({..._,description:G}));const T=ku(G);ae(_=>({..._,description:T}))},placeholder:"Optional",rows:3,error:J.description})]})}),t.jsx(ab,{open:K.open,title:K.editing?"Edit Lead Source":"New Lead Source",onClose:()=>B({open:!1,editing:null}),onSubmit:re,disabled:o,submitText:K.editing?"Update":"Create",children:t.jsxs("div",{className:"space-y-3",children:[t.jsx(Jt,{label:"Name",value:z.name,onChange:L=>{const G=L.target.value;q(_=>({..._,name:G}));const T=Nu(G);ae(_=>({..._,name:T}))},placeholder:"e.g. Website",required:!0,error:J.name}),t.jsx(qc,{label:"Description",value:z.description,onChange:L=>{const G=L.target.value;q(_=>({..._,description:G}));const T=ku(G);ae(_=>({..._,description:T}))},placeholder:"Optional",rows:3,error:J.description})]})})]})})]})},$c=Pt.create({baseURL:Vo,headers:{"Content-Type":"application/json"}});$c.interceptors.request.use(e=>{const r=localStorage.getItem("token")||localStorage.getItem("authToken"),a=localStorage.getItem("userId");if(r)try{const s=YT(r);if(s&&s.userId!==void 0&&a!==null&&s.userId!==Number(a))return console.warn("[AuthService] Detected token/userId mismatch in localStorage; clearing stale auth state"),localStorage.removeItem("token"),localStorage.removeItem("authToken"),localStorage.removeItem("tokenExpiry"),localStorage.removeItem("userId"),Promise.reject(new Error("Token user mismatch - cleared stale auth"));e.headers.Authorization=`Bearer ${r}`}catch(s){console.error("[AuthService] Failed to parse JWT, clearing token",s),localStorage.removeItem("token"),localStorage.removeItem("authToken"),localStorage.removeItem("tokenExpiry")}return e},e=>Promise.reject(e));$c.interceptors.response.use(e=>e,e=>(console.error("API Error:",{status:e.response?.status,message:e.response?.data?.message,url:e.config?.url,method:e.config?.method}),e.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("tokenExpiry"),(e.response?.data?.tokenExpired||e.response?.data?.code==="TOKEN_EXPIRED")&&window.dispatchEvent(new CustomEvent("tokenExpired"))),Promise.reject(e)));const Coe={login:async e=>{try{const r=await $c.post("/auth/login",e);if(console.log("Login Response:",r.data),!r.data.success)throw new Error(r.data.message||"Invalid credentials");return r.data}catch(r){if(console.error("Login Error:",r),r.response?.data){const a=r.response.data.message||r.response.data.error||"Login failed";throw new Error(a)}throw new Error(r.message||"Login failed. Please check your connection.")}},getProfile:async()=>(await $c.get("/auth/profile")).data,getPermissionsForRole:async e=>(await $c.get(`/roles/${e}/permissions`)).data.data.permissions,register:async e=>(await $c.post("/auth/register",e)).data,logout:async()=>({success:!0,message:"Logged out successfully"})},Eoe=Vo.replace(/\/api\/?$/,"")||window.location.origin,Aoe=/^[A-Za-z]+(?: [A-Za-z]+)*$/,Poe="must contain only letters (A-Z), no numbers or special characters, and be at least 2 characters long",Toe=()=>{const{user:e,updateUser:r,hasRole:a}=xr(),{t:s}=wn(),{isDark:n,toggleTheme:i}=FT(),[o,c]=h.useState(!1),[u,m]=h.useState(!1),[,g]=h.useState([]),[f,y]=h.useState(!0),[p,b]=h.useState({firstName:e?.firstName||"",lastName:e?.lastName||"",email:e?.email||""}),[j,v]=h.useState({}),[N,k]=h.useState([]),[E,C]=h.useState(!1),[S,P]=h.useState(!1),[D,I]=h.useState(null),[H,W]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[K,B]=h.useState({length:!1,lowercase:!1,uppercase:!1,number:!1,special:!1}),[z,q]=h.useState(!1),[J,ae]=h.useState(null),[ne,re]=h.useState(null);h.useRef(null),h.useEffect(()=>{(async()=>{try{y(!0);const V=await bl.getIndustries();g(Array.isArray(V)?V:[])}catch(V){console.error("Failed to load industries:",V),g([])}finally{y(!1)}})()},[]),h.useEffect(()=>{(async()=>{const V=e?.roles||[],ge=V.some(qe=>{const se=(qe?.name||"").toLowerCase();return se==="admin"||se==="super_admin"||se==="super admin"}),Te=V.flatMap(qe=>Array.isArray(qe.permissions)?qe.permissions:[]),xe=(()=>{const qe=new Map;for(const se of Te)se&&typeof se.id=="number"&&!qe.has(se.id)&&qe.set(se.id,se);return Array.from(qe.values())})();if(!ge){k(xe);return}try{C(!0);const qe=await Ga.getPermissions(),se=qe?.data||qe||[],De=new Map;for(const Me of se)Me&&typeof Me.id=="number"&&!De.has(Me.id)&&De.set(Me.id,Me);k(Array.from(De.values()))}catch(qe){console.error("Failed to load full permissions for admin:",qe),k(xe)}finally{C(!1)}})()},[e?.roles]),h.useEffect(()=>{(async()=>{try{const V=e?.roles||[],ge=V.filter(se=>!Array.isArray(se.permissions)||se.permissions.length===0);if(ge.length===0)return;const Te=await Promise.all(ge.map(async se=>{try{const De=await Coe.getPermissionsForRole(String(se.id));return{id:se.id,permissions:De}}catch(De){return console.error("Failed to load permissions for role",se.id,De),{id:se.id,permissions:[]}}})),xe=new Map(Te.map(se=>[se.id,se.permissions])),qe=V.map(se=>({...se,permissions:Array.isArray(se.permissions)&&se.permissions.length>0?se.permissions:xe.get(se.id)||[]}));r({...e,roles:qe})}catch(V){console.error("Failed to enrich permissions:",V)}})()},[e?.roles]);const L=a?.("Admin")===!0,G=(Q,V)=>{const ge=(Q||"").trim();return ge.length<2||!Aoe.test(ge)?`${V} ${Poe}`:null},T=Q=>{const{name:V,value:ge}=Q.target;b(Te=>({...Te,[V]:ge})),v(Te=>({...Te,[V]:void 0}))},_=async()=>{const Q=G(p.firstName,s("user.firstName","First name")),V=G(p.lastName,s("user.lastName","Last name")),ge={};if(Q&&(ge.firstName=Q),V&&(ge.lastName=V),Object.keys(ge).length>0){v(ge),M.error(Object.values(ge).join(" "),{toastId:"profile_validation_error"});return}try{m(!0);const Te={firstName:p.firstName.trim(),lastName:p.lastName.trim()};L&&(Te.email=p.email);const xe=await Er.updateProfile(Te),qe=xe?.data?.user||xe?.user||xe,se={...e,...qe||{},roles:qe&&qe.roles?qe.roles:e?.roles||[]};r(se),M.success(s("user.profileUpdateSuccess","Profile updated successfully"),{toastId:"profile_update_success"}),v({}),c(!1)}catch(Te){const xe=Te?.response?.data?.message||Te?.message||s("errors.profileUpdateFailed","Failed to update profile");console.error("Failed to update profile:",xe),M.error(xe,{toastId:"profile_update_error"})}finally{m(!1)}},F=()=>{b({firstName:e?.firstName||"",lastName:e?.lastName||"",email:e?.email||""}),v({}),c(!1)},ee=Q=>Q?new Date(Q).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):s("common.noData"),Z=Q=>{const{name:V,value:ge}=Q.target;if(W(Te=>({...Te,[V]:ge})),ae(null),re(null),V==="newPassword"){const Te=ge||"",xe=/[a-z]/.test(Te),qe=/[A-Z]/.test(Te),se=/[0-9]/.test(Te),De=/[^A-Za-z0-9]/.test(Te),Me=Te.length>=8;B({length:Me,lowercase:xe,uppercase:qe,number:se,special:De})}},U=async()=>{if(ae(null),re(null),!H.currentPassword||!H.newPassword||!H.confirmPassword){ae("Please fill in all password fields");return}if(H.newPassword!==H.confirmPassword){ae("New password and confirm password do not match");return}const Q=H.newPassword||"",V=/[a-z]/.test(Q),ge=/[A-Z]/.test(Q),Te=/[0-9]/.test(Q),xe=/[^A-Za-z0-9]/.test(Q),qe=Q.length>=8;if(!(qe&&V&&ge&&Te&&xe)){B({length:qe,lowercase:V,uppercase:ge,number:Te,special:xe}),ae("Password must be 8+ chars with uppercase, lowercase, number, and special symbol");return}try{q(!0);const De=await Er.changePassword({currentPassword:H.currentPassword,newPassword:H.newPassword}),Me=De?.data?.user||De?.user||De;Me?r({...e,...Me}):e?.mustChangePassword&&r({...e,mustChangePassword:!1}),re("Password updated successfully"),W({currentPassword:"",newPassword:"",confirmPassword:""})}catch(De){const Me=De?.response?.data?.message||De?.message||"Failed to update password";ae(Me)}finally{q(!1)}},X=Bn();return h.useEffect(()=>{X.state&&X.state.focusPassword&&setTimeout(()=>{document.getElementById("change-password-section")?.scrollIntoView({behavior:"smooth"});const Q=document.querySelector('input[name="currentPassword"]');Q&&Q.focus()},500)},[X]),t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-6",children:t.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"mb-5",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s("user.profile")}),t.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:s("user.profileDescription","Manage your account settings and preferences")})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 p-5",children:t.jsxs("div",{className:"flex flex-col xl:flex-row gap-6 items-start",children:[t.jsxs("div",{className:"flex flex-col items-center xl:items-start",children:[t.jsxs("div",{className:"relative h-20 w-20 mb-3",children:[e?.profilePicture?t.jsx("img",{src:`${Eoe}/uploads/${e.profilePicture}`,alt:"Avatar",className:"h-20 w-20 rounded-full object-cover border-4 border-white dark:border-gray-700 shadow"}):t.jsx("div",{className:"h-20 w-20 bg-gradient-to-br from-[#EF444E] to-[#ff5a64] rounded-full flex items-center justify-center border-4 border-white dark:border-gray-700 shadow",children:t.jsx(xt,{className:"h-9 w-9 text-white"})}),o&&t.jsxs("label",{className:"absolute -bottom-2 right-0 inline-flex items-center px-2 py-1 text-[10px] font-medium text-white bg-[#EF444E] rounded-full hover:bg-[#dc2626] cursor-pointer shadow",children:[S?t.jsx("span",{className:"h-3.5 w-3.5 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}):t.jsx(er,{className:"h-3.5 w-3.5 mr-1"}),s("user.changeAvatar","Change Avatar"),t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async Q=>{const V=Q.target.files?.[0];if(V){I(null);try{P(!0);const ge=await Er.uploadProfilePicture(V),Te=ge?.data?.user||ge?.user||ge,xe={...e,...Te||{}};r(xe)}catch(ge){I(ge?.message||"Failed to upload")}finally{P(!1)}}}})]}),D&&t.jsx("p",{className:"text-xs text-red-500 mt-2",children:D})]}),t.jsxs("div",{className:"text-center xl:text-left",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:e?.fullName}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e?.roles?.[0]?.name||s("common.noRole")}),e?.email&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e.email})]})]}),t.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4 w-full",children:[t.jsxs("div",{className:"p-4 rounded-2xl border border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/40",children:[t.jsxs("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[t.jsx(nr,{className:"h-4 w-4"})," ",s("user.lastLogin")]}),t.jsx("p",{className:"mt-2 text-sm font-semibold text-gray-900 dark:text-white",children:ee(e?.lastLogin)})]}),t.jsxs("div",{className:"p-4 rounded-2xl border border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/40",children:[t.jsxs("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[t.jsx(Gs,{className:"h-4 w-4"})," ",s("user.permissions")]}),t.jsx("p",{className:"mt-2 text-3xl font-bold text-[#EF444E]",children:N.length>0?N.length:e?.roles?.reduce((Q,V)=>Q+(V.permissions?.length??0),0)||0}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s("user.permissionSummary","Total permissions granted")})]})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-6",children:[t.jsxs("div",{className:"xl:col-span-4 space-y-6",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 p-5",children:[t.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-3",children:s("user.contactOverview","Contact Snapshot")}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[t.jsx(ir,{className:"h-4 w-4"}),t.jsx("span",{children:s("user.email")})]}),t.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:p.email||e?.email||s("common.noData")})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[t.jsx(Gs,{className:"h-4 w-4"}),t.jsx("span",{children:s("common.role","Role")})]}),t.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e?.roles?.map(Q=>Q.name).join(", ")||s("common.noRole")})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 p-5 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:s("common.theme")}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s("user.themeDescription","Choose your preferred theme")})]}),t.jsx("button",{onClick:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${n?"bg-[#EF444E]":"bg-gray-200"}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n?"translate-x-3":"-translate-x-3"}`})})]}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700 pt-3",children:[t.jsx("span",{children:s("user.lastLogin")}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:ee(e?.lastLogin)})]})]})]}),t.jsxs("div",{className:"xl:col-span-8 space-y-6",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700",children:[t.jsxs("div",{className:"px-5 py-3 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[t.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:s("user.personalInformation")}),t.jsx("button",{onClick:()=>c(!o),className:"flex items-center px-3 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:o?t.jsxs(t.Fragment,{children:[t.jsx(da,{className:"h-4 w-4 mr-1"}),s("common.cancel")]}):t.jsxs(t.Fragment,{children:[t.jsx(er,{className:"h-4 w-4 mr-1"}),s("common.edit")]})})]}),f?t.jsx("div",{className:"p-5 animate-pulse",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[t.jsx("div",{className:"h-9 bg-gray-100 dark:bg-gray-700 rounded-xl"}),t.jsx("div",{className:"h-9 bg-gray-100 dark:bg-gray-700 rounded-xl"}),t.jsx("div",{className:"h-9 bg-gray-100 dark:bg-gray-700 rounded-xl"}),t.jsx("div",{className:"h-9 bg-gray-100 dark:bg-gray-700 rounded-xl"})]})}):t.jsxs("div",{className:"p-5",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[t.jsx(Jt,{label:s("user.firstName"),leftIcon:t.jsx(xt,{className:"h-4 w-4 text-gray-400"}),name:"firstName",value:p.firstName,onChange:T,disabled:!o,required:!0,error:j.firstName||void 0}),t.jsx(Jt,{label:s("user.lastName"),leftIcon:t.jsx(xt,{className:"h-4 w-4 text-gray-400"}),name:"lastName",value:p.lastName,onChange:T,disabled:!o,required:!0,error:j.lastName||void 0}),t.jsx(Jt,{label:s("user.email"),leftIcon:t.jsx(ir,{className:"h-4 w-4 text-gray-400"}),type:"email",name:"email",value:p.email,onChange:T,disabled:!o||!L})]}),o&&t.jsxs("div",{className:"mt-5 flex justify-end gap-2",children:[t.jsx("button",{onClick:F,disabled:u,className:"px-4 py-2 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50",children:s("common.cancel")}),t.jsxs("button",{onClick:_,disabled:u,className:"px-4 py-2 text-xs font-semibold text-white bg-[#EF444E] rounded-full hover:bg-[#dc2626] disabled:opacity-50 flex items-center",children:[u?t.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-1.5"}):t.jsx(Ya,{className:"h-4 w-4 mr-1.5"}),s("common.save")]})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 p-5",id:"change-password-section",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(pm,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mr-2"}),t.jsx("div",{children:t.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Change Password"})})]})}),t.jsxs("form",{onSubmit:Q=>{Q.preventDefault(),U()},children:[t.jsx("input",{type:"text",name:"username",value:e?.email||"",autoComplete:"username",style:{display:"none"},readOnly:!0}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[t.jsx(Jt,{label:"Current Password",name:"currentPassword",type:"password",value:H.currentPassword,onChange:Z,autoComplete:"current-password",required:!0}),t.jsx(Jt,{label:"New Password",name:"newPassword",type:"password",value:H.newPassword,onChange:Z,autoComplete:"new-password",required:!0}),t.jsx(Jt,{label:"Confirm New Password",name:"confirmPassword",type:"password",value:H.confirmPassword,onChange:Z,autoComplete:"new-password",required:!0})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"submit",disabled:z,children:"Update Password"})})]}),t.jsxs("div",{className:"text-xs text-gray-700 dark:text-gray-300 space-y-1 mb-2",children:[t.jsx("div",{className:"font-medium",children:"Password must include:"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:[t.jsxs("div",{className:"flex items-center",children:[K.length?t.jsx(ct,{className:"h-4 w-4 text-green-600 mr-1"}):t.jsx(ur,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{children:"At least 8 characters"})]}),t.jsxs("div",{className:"flex items-center",children:[K.lowercase?t.jsx(ct,{className:"h-4 w-4 text-green-600 mr-1"}):t.jsx(ur,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{children:"Lowercase letter (a-z)"})]}),t.jsxs("div",{className:"flex items-center",children:[K.uppercase?t.jsx(ct,{className:"h-4 w-4 text-green-600 mr-1"}):t.jsx(ur,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{children:"Uppercase letter (A-Z)"})]}),t.jsxs("div",{className:"flex items-center",children:[K.number?t.jsx(ct,{className:"h-4 w-4 text-green-600 mr-1"}):t.jsx(ur,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{children:"Number (0-9)"})]}),t.jsxs("div",{className:"flex items-center",children:[K.special?t.jsx(ct,{className:"h-4 w-4 text-green-600 mr-1"}):t.jsx(ur,{className:"h-4 w-4 text-gray-400 mr-1"}),t.jsx("span",{children:"Special symbol (!@#$%^&*...)"})]})]})]}),J&&t.jsx("p",{className:"text-xs text-red-500 mb-2",children:J}),ne&&t.jsx("p",{className:"text-xs text-green-600 mb-2",children:ne}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{onClick:U,disabled:z,className:"px-4 py-2 text-xs font-semibold text-white bg-[#EF444E] rounded-full hover:bg-[#dc2626] disabled:opacity-50 flex items-center",children:[z?t.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-1.5"}):t.jsx(Ya,{className:"h-4 w-4 mr-1.5"}),"Update Password"]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 p-5",children:[t.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-3",children:s("user.permissions","Permissions")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:E?t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:s("user.loadingPermissions","Loading permissions...")}):N.length===0?t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:s("user.noPermissions","No permissions assigned")}):N.map(Q=>t.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md",children:Q.name},Q.id))})]})]})]})]})]})})};class Doe{async list(r){return(await oe.get("/products",{params:r})).data}async getById(r){return(await oe.get(`/products/${r}`)).data}async create(r){return(await oe.post("/products",r)).data}async update(r,a){return(await oe.put(`/products/${r}`,a)).data}async remove(r){return(await oe.delete(`/products/${r}`)).data}async bulkExport(r){return(await oe.get("/products/bulk/export",{params:r,responseType:"blob"})).data}async bulkImport(r){const a=new FormData;return a.append("csvFile",r),(await oe.post("/products/bulk/import",a,{headers:{"Content-Type":"multipart/form-data"}})).data}async bulkDelete(r){return(await oe.delete("/products/bulk/delete",{data:{ids:r}})).data}}const Ai=new Doe,Ooe=({product:e,onClose:r})=>t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-[#EF444E] to-[#ff5a64] rounded-xl shadow-lg",children:t.jsx(_n,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex items-center gap-1 ${e.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:e.isActive?t.jsxs(t.Fragment,{children:[t.jsx(ct,{className:"h-3 w-3"})," Active"]}):t.jsxs(t.Fragment,{children:[t.jsx(va,{className:"h-3 w-3"})," Inactive"]})}),e.sku&&t.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[t.jsx(nD,{className:"h-3 w-3"})," ",e.sku]})]})]})]}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:t.jsx(da,{className:"h-5 w-5 text-gray-500"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.description&&t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Description"}),t.jsx("p",{className:"text-gray-900 dark:text-white whitespace-pre-wrap",children:e.description})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-100 dark:border-blue-800",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2 text-blue-700 dark:text-blue-400",children:[t.jsx(Qr,{className:"h-5 w-5"}),t.jsx("h3",{className:"font-semibold",children:"Pricing"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Price:"}),t.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[e.price," ",e.currency]})]}),e.cost&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Cost:"}),t.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[e.cost," ",e.currency]})]}),e.taxRate&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Tax Rate:"}),t.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[e.taxRate,"%"]})]})]})]}),t.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-100 dark:border-purple-800",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2 text-purple-700 dark:text-purple-400",children:[t.jsx(Fo,{className:"h-5 w-5"}),t.jsx("h3",{className:"font-semibold",children:"Details"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:e.type})]}),e.category&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Category:"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.category})]}),e.unit&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Unit:"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.unit})]}),e.hsnCode&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HSN Code:"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.hsnCode})]})]})]})]}),t.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:t.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500 dark:text-gray-400",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(nr,{className:"h-4 w-4"}),"Created: ",new Date(e.createdAt).toLocaleDateString()]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(nr,{className:"h-4 w-4"}),"Updated: ",new Date(e.updatedAt).toLocaleDateString()]})]})})]}),t.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 flex justify-end",children:t.jsx("button",{onClick:r,className:"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})}),Ioe=({onClose:e,onSave:r,initialProduct:a})=>{const s=mt(),{currencySettings:n}=Hr(),[i,o]=h.useState({name:a?.name||"",description:a?.description||"",sku:a?.sku||"",type:a?.type||"PHYSICAL",category:a?.category||"",price:a?.price||0,cost:a?.cost||0,currency:a?.currency||n?.primary||"INR",unit:a?.unit||"pcs",taxRate:a?.taxRate||0,hsnCode:a?.hsnCode||"",isActive:a?.isActive??!0}),[c,u]=h.useState(null),[m,g]=h.useState(!1),[f,y]=h.useState({}),[p,b]=h.useState([]),[j,v]=h.useState(!0),[N,k]=h.useState([]),[E,C]=h.useState(!0),[S,P]=h.useState([]),[D,I]=h.useState(!0),H=(z,q)=>{o(J=>({...J,[z]:q})),f[z]&&y(J=>({...J,[z]:""}))},W=z=>{const q=z.target.files?.[0];if(q){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(q.type)){y(ae=>({...ae,image:"Please select a valid image file (JPEG, PNG, GIF, WebP)"}));return}if(q.size>5*1024*1024){y(ae=>({...ae,image:"File size must be less than 5MB"}));return}u(q),y(ae=>({...ae,image:""}))}},K=()=>{const z={};return i.name.trim()||(z.name="Product name is required"),i.price<=0&&(z.price="Price must be greater than 0"),y(z),Object.keys(z).length===0};h.useEffect(()=>{(async()=>{try{const q=await Oc.getProductCategories();b(q)}catch(q){console.error("Failed to fetch categories:",q),M.error("Failed to load product categories")}finally{v(!1)}})()},[]),h.useEffect(()=>{(async()=>{try{const q=await Dc.getAll();k(q)}catch(q){console.error("Failed to fetch unit types:",q),M.error("Failed to load unit types")}finally{C(!1)}})()},[]),h.useEffect(()=>{(async()=>{try{const q=await Sl.getAll();P(q)}catch(q){console.error("Failed to fetch taxes:",q),M.error("Failed to load tax rates")}finally{I(!1)}})()},[]);const B=async()=>{if(K()){g(!0);try{const z={...i,type:i.type==="product"?"PHYSICAL":i.type||"PHYSICAL",price:Number(i.price)||0,cost:i.cost?Number(i.cost):void 0,taxRate:i.taxRate?Number(i.taxRate):void 0};(!z.description||!z.description.trim())&&(z.description=void 0),(!z.sku||!z.sku.trim())&&(z.sku=void 0),(!z.category||!z.category.trim())&&(z.category=void 0),(!z.hsnCode||!z.hsnCode.trim())&&(z.hsnCode=void 0);let q=null;if(a){if(q=await Ai.update(a.id,z),!q.success)throw new Error(q.message||"Failed to update product");M.success("Product updated successfully!")}else{if(q=await Ai.create(z),!q.success)throw new Error(q.message||"Failed to create product");M.success("Product created successfully!")}if(c)try{const J=a?.id||q?.data?.product?.id||q?.id;if(J){const ae=new FormData;ae.append("file",c),ae.append("entityType","product"),ae.append("entityId",J.toString()),ae.append("name",c.name);const ne=await fetch(`${Vo}/files/upload`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")||localStorage.getItem("authToken")}`},body:ae});if(!ne.ok)throw new Error("Failed to upload image");const re=await ne.json();if(re.success&&re.data?.file?.id){const L=`/api/files/${re.data.file.id}/download`;await Ai.update(J,{...z,image:L})}}}catch(J){console.error("Failed to upload image:",J),M.error("Product saved but failed to upload image.")}r(),e()}catch(z){console.error("Failed to save product:",z);const q=z?.response?.data?.message||"Failed to save product. Please try again.";M.error(q)}finally{g(!1)}}};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:t.jsx(_n,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a?"Edit Product":"Add New Product"})]}),t.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:t.jsx(da,{className:"h-5 w-5 text-gray-500"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2",children:"Basic Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Product Name *"}),t.jsx("input",{type:"text",value:i.name,onChange:z=>H("name",z.target.value),placeholder:"Enter product name",className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${f.name?"border-red-500":"border-gray-300 dark:border-gray-600"}`}),f.name&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"SKU"}),t.jsx("input",{type:"text",value:i.sku,onChange:z=>H("sku",z.target.value),placeholder:"Enter SKU",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),t.jsx("textarea",{value:i.description,onChange:z=>H("description",z.target.value),placeholder:"Enter product description",rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2",children:"Pricing & Inventory"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price *"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:n?.symbol||""}),t.jsx("input",{type:"number",value:i.price,onChange:z=>H("price",parseFloat(z.target.value)||0),placeholder:"0.00",step:"0.01",min:"0",className:`w-full pl-8 pr-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${f.price?"border-red-500":"border-gray-300 dark:border-gray-600"}`})]}),f.price&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.price})]}),t.jsx("div",{children:t.jsx("div",{className:"relative"})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Unit Type"}),t.jsxs("select",{value:i.unit,onChange:z=>H("unit",z.target.value),disabled:E,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50",children:[t.jsx("option",{value:"",children:E?"Loading unit types...":"Select Unit Type"}),N.filter(z=>z.isActive).map(z=>t.jsx("option",{value:z.name,children:z.name.charAt(0).toUpperCase()+z.name.slice(1)},z.id))]})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2",children:"Tax & Compliance"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tax Rate (%)"}),t.jsxs("select",{value:i.taxRate,onChange:z=>H("taxRate",parseFloat(z.target.value)||0),disabled:D,className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50 ${f.taxRate?"border-red-500":"border-gray-300 dark:border-gray-600"}`,children:[t.jsx("option",{value:"0",children:"No Tax (0%)"}),!D&&S.filter(z=>z.isActive).map(z=>t.jsxs("option",{value:Number(z.rate),children:[z.name," (",z.rate,"%)"]},z.id)),D&&t.jsx("option",{disabled:!0,children:"Loading taxes..."})]}),f.taxRate&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.taxRate})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"HSN Code"}),t.jsx("input",{type:"text",value:i.hsnCode,onChange:z=>H("hsnCode",z.target.value),placeholder:"e.g., 8471",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2",children:"Category & Settings"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Category"}),t.jsxs("button",{type:"button",onClick:()=>s("/business-settings/product-categories"),className:"inline-flex items-center gap-1 px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 rounded transition-colors",title:"Manage Product Categories",children:[t.jsx(Rt,{size:12}),"Categories"]})]}),t.jsxs("select",{value:i.category,onChange:z=>H("category",z.target.value),disabled:j,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50",children:[t.jsx("option",{value:"",children:j?"Loading categories...":"Select Category"}),p.filter(z=>z.isActive).map(z=>t.jsx("option",{value:z.name,children:z.name},z.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Product Type"}),t.jsxs("select",{value:i.type,onChange:z=>H("type",z.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[t.jsx("option",{value:"product",children:"Product"}),t.jsx("option",{value:"service",children:"Service"}),t.jsx("option",{value:"digital",children:"Digital Product"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:i.isActive,onChange:z=>H("isActive",z.target.checked),className:"w-4 h-4 text-weconnect-red border-gray-300 rounded focus:ring-weconnect-red"}),t.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Active (product will be available for sale)"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2",children:"Product Image"}),t.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ri,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[t.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-900 dark:text-white",children:"Upload product image"}),t.jsx("span",{className:"mt-1 block text-sm text-gray-500 dark:text-gray-400",children:"PNG, JPG, GIF up to 5MB"})]}),t.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:"image/*",onChange:W})]}),c&&t.jsx("div",{className:"mt-4",children:t.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400",children:["Selected: ",c.name]})}),f.image&&t.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.image})]})})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[t.jsx("button",{onClick:e,disabled:m,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),t.jsx("button",{onClick:B,disabled:m,className:"px-6 py-2 bg-weconnect-red text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Saving...":a?"Update Product":"Create Product"})]})]})})},Loe=()=>{const{hasPermission:e}=xr(),{t:r}=wn();mt();const[a,s]=h.useState([]),[n,i]=h.useState(null),[o,c]=h.useState(!0),[u,m]=h.useState(null),[g,f]=h.useState("list"),[y,p]=h.useState(["product","sku","category","price","status"]),[b,j]=h.useState({status:"",category:"",type:"",search:""}),[v,N]=h.useState(1),[k]=h.useState(50),{searchValue:E,debouncedSearchValue:C,setSearch:S,isSearching:P}=dd("",500),[D,I]=h.useState(!1),[H,W]=h.useState(null),[K,B]=h.useState(!1),[z,q]=h.useState(!1),[J,ae]=h.useState(void 0),[ne,re]=h.useState(null),[L,G]=h.useState([]),[T,_]=h.useState(!1),[F,ee]=h.useState(null),[Z,U]=h.useState(!1),[X,Q]=h.useState(!1);h.useEffect(()=>{V()},[C,b.status,b.category,b.type,v]);const V=async()=>{try{c(!0),m(null);const ue=await Ai.list({search:C,page:v,limit:k}),Pe=ue?.data?.items??ue?.data?.products??(Array.isArray(ue?.data)?ue.data:void 0)??ue?.products??[];s(Pe||[]);const pe=ue?.data?.pagination||ue?.pagination;i(pe?{currentPage:pe.currentPage??v,totalPages:pe.totalPages??1,totalProducts:pe.totalItems??Pe.length??0,hasNextPage:(pe.currentPage??1)<(pe.totalPages??1),hasPrevPage:(pe.currentPage??1)>1}:{currentPage:1,totalPages:1,totalProducts:Pe.length,hasNextPage:!1,hasPrevPage:!1})}catch(ue){console.error("Error fetching products:",ue);const Pe=ue?.response?.data?.message||"Failed to fetch products";m(Pe),M.error(Pe)}finally{c(!1)}},ge=(ue,Pe)=>{j(pe=>({...pe,[ue]:Pe})),N(1)},Te=ue=>{S(ue),N(1)},xe=ue=>{N(ue),window.scrollTo({top:0,behavior:"smooth"})},qe=ue=>{ae(ue),q(!0)},se=ue=>{re(ue)},De=()=>{ae(void 0),q(!0)},Me=ue=>{W(ue),I(!0)},Ct=async ue=>{try{await Ai.update(ue.id,{isActive:!ue.isActive}),M.success(`Product ${ue.isActive?"deactivated":"activated"} successfully`),V()}catch(Pe){M.error(Pe?.response?.data?.message||"Failed - status update")}},Dt=async()=>{if(H){B(!0);try{await Ai.remove(H.id),I(!1),W(null),M.success("Product deleted successfully!"),V()}catch(ue){M.error(ue.response?.data?.message||"An error occurred")}finally{B(!1)}}},Mt=()=>{j({search:"",status:"",category:"",type:""}),N(1),S("")},jt=()=>{Cd("products_import_template.csv",["name","sku","type","category","price","cost","currency","unit","taxRate","stockQuantity","minStockLevel","isActive"],[["Sample Product","SKU001","PHYSICAL","Electronics","100","70","USD","pcs","10","50","10","YES"]])},le=async()=>{try{U(!0);const ue=await Ai.bulkExport({search:C||void 0}),Pe=new Blob([ue],{type:"text/csv;charset=utf-8;"}),pe=window.URL.createObjectURL(Pe),ve=document.createElement("a");ve.href=pe,ve.setAttribute("download",`products_export_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(ve),ve.click(),ve.remove(),M.success("Products exported successfully")}catch{M.error("Failed to export products")}finally{U(!1)}},Xe=ue=>{const Pe=ue.target.files?.[0];if(Pe){if(!Pe.name.endsWith(".csv")){M.error("Please upload a CSV file");return}ee(Pe)}},Ke=async()=>{if(F)try{Q(!0);const ue=await Ai.bulkImport(F);ue.success?(M.success(ue.message||"Imported products successfully"),_(!1),ee(null),V()):M.error(ue.message||"Failed to import products")}catch(ue){M.error(ue.response?.data?.message||"Failed to import products")}finally{Q(!1)}},Ne=async()=>{if(L.length!==0&&window.confirm(`Are you sure? ${L.length} items.`))try{c(!0),await Ai.bulkDelete(L),M.success("Deleted successfully"),G([]),V()}catch(ue){M.error(ue.response?.data?.message||"Failed to delete")}finally{c(!1)}},Nt=ue=>{G(Pe=>Pe.includes(ue)?Pe.filter(pe=>pe!==ue):[...Pe,ue])},_t=()=>{L.length===a.length&&a.length>0?G([]):G(a.map(ue=>ue.id))},vt=!!C,Ot=!!b.status,R=!!b.category,ce=vt||Ot||R,de=ue=>y.includes(ue);return t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end gap-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[t.jsxs("div",{className:"w-full sm:w-48",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t.jsxs("div",{className:"flex items-center gap-2",children:[r("common.search"),P&&t.jsx(ma,{className:"h-3 w-3 animate-pulse text-blue-500"})]})}),t.jsx(kd,{value:E,onChange:Te,placeholder:"Search products..."})]}),t.jsx("div",{className:"w-full sm:w-48",children:t.jsx(Yr,{label:"Status",value:b.status,onChange:ue=>ge("status",ue),options:[{value:"",label:"All Statuses"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]})}),t.jsx("div",{className:"w-full sm:w-48",children:t.jsx(Yr,{label:"Category",value:b.category,onChange:ue=>ge("category",ue),options:[{value:"",label:"All Categories"}]})})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full lg:w-auto",children:[t.jsxs("button",{onClick:le,disabled:Z,className:"px-4 py-3 bg-white dark:bg-gray-800 border rounded-full text-sm font-semibold disabled:opacity-50 flex items-center",children:[t.jsx(Uo,{className:"h-4 w-4 mr-2"}),Z?"Exporting...":"Export"]}),t.jsxs("button",{onClick:()=>_(!0),className:"px-4 py-3 bg-white dark:bg-gray-800 border rounded-full text-sm font-semibold flex items-center",children:[t.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Import"]}),e("product.create")&&t.jsxs("button",{onClick:De,className:"px-4 py-3 bg-[#ef444e] text-white rounded-full text-sm font-semibold flex items-center",children:[t.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})]}),t.jsxs("div",{className:"hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto w-fit",children:[t.jsx("button",{className:`p-2 rounded-md ${g==="list"?"bg-white dark:bg-gray-700 shadow-sm":""}`,onClick:()=>f("list"),children:t.jsx(gi,{className:"w-4 h-4"})}),t.jsx("button",{className:`p-2 rounded-md ${g==="card"?"bg-white dark:bg-gray-700 shadow-sm":""}`,onClick:()=>f("card"),children:t.jsx(mi,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow border overflow-hidden",children:[t.jsx("div",{className:"p-6 border-b",children:t.jsxs("h3",{className:"text-lg font-semibold",children:["All Products ",n&&`(${n.totalProducts})`]})}),t.jsx(to,{currentPage:n?.currentPage||1,itemsPerPage:k,totalItems:n?.totalProducts||a.length,onItemsPerPageChange:()=>{},columnConfig:{columns:[{id:"product",label:"Product"},{id:"sku",label:"SKU"},{id:"category",label:"Category"},{id:"price",label:"Price"},{id:"status",label:"Status"}],visibleColumns:y,onChange:p,minVisible:1}}),L.length>0&&t.jsxs("div",{className:"m-4 flex items-center justify-between bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 rounded-lg p-3",children:[t.jsxs("span",{className:"text-sm font-medium",children:[L.length," selected"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:Ne,className:"bg-red-600 text-white px-3 py-1.5 rounded-md text-xs flex items-center",children:[t.jsx(ht,{className:"w-4 h-4 mr-1.5"})," Delete"]}),t.jsx("button",{onClick:()=>G([]),className:"text-xs text-gray-500",children:"Cancel"})]})]}),g==="card"?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-6",children:o?t.jsx("div",{className:"col-span-full py-20 text-center",children:t.jsx("div",{className:"animate-spin h-8 w-8 border-b-2 border-blue-600 mx-auto rounded-full"})}):u?t.jsx(qr,{title:"Error",description:u,isError:!0}):a.length===0?t.jsx(qr,{description:"No products found",showClearButton:ce,onClear:Mt}):a.map(ue=>t.jsxs("div",{className:`p-4 rounded-lg border relative group ${L.includes(ue.id)?"ring-2 ring-indigo-500":""}`,children:[t.jsx("button",{onClick:()=>Nt(ue.id),className:"absolute top-2 left-2 z-10 p-1 bg-white border rounded shadow-sm",children:L.includes(ue.id)?t.jsx(Rh,{className:"w-4 h-4 text-indigo-600"}):t.jsx(cy,{className:"w-4 h-4 text-gray-300"})}),t.jsxs("div",{className:"flex items-center gap-3 mb-3 mt-4",children:[t.jsx("div",{className:"p-2 bg-red-500 rounded-lg",children:t.jsx(_n,{className:"h-5 w-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-sm",children:ue.name}),t.jsx("p",{className:"text-xs text-gray-500",children:ue.sku||"No SKU"})]})]}),t.jsxs("div",{className:"text-sm font-semibold mb-2",children:[ue.price," ",ue.currency]}),t.jsxs("div",{className:"flex justify-between items-center border-t pt-3",children:[t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>se(ue),className:"p-1 hover:bg-gray-100 rounded text-gray-500",children:t.jsx(Bt,{className:"h-4 h-4"})}),t.jsx("button",{onClick:()=>qe(ue),className:"p-1 hover:bg-gray-100 rounded text-blue-600",children:t.jsx(er,{className:"h-4 h-4"})})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>Ct(ue),className:"p-1",children:ue.isActive?t.jsx(O2,{className:"text-green-600 h-5 w-5"}):t.jsx(D2,{className:"text-gray-400 h-5 w-5"})}),t.jsx("button",{onClick:()=>Me(ue),className:"p-1 hover:bg-red-50 text-red-600 rounded",children:t.jsx(ht,{className:"h-4 h-4"})})]})]})]},ue.id))}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-start",children:t.jsx("button",{onClick:_t,children:L.length===a.length&&a.length>0?t.jsx(Rh,{className:"w-4 h-4 text-indigo-600"}):t.jsx(cy,{className:"w-4 h-4 text-gray-400"})})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium uppercase tracking-wider ${de("product")?"":"hidden"}`,children:"Product"}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium uppercase tracking-wider ${de("sku")?"":"hidden"}`,children:"SKU"}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium uppercase tracking-wider ${de("category")?"":"hidden"}`,children:"Category"}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium uppercase tracking-wider ${de("price")?"":"hidden"}`,children:"Price"}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium uppercase tracking-wider ${de("status")?"":"hidden"}`,children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-end text-xs font-medium uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y",children:o?t.jsx(Kl,{rows:8,columns:7}):a.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"py-20",children:t.jsx(qr,{description:"No results",onClear:Mt,showClearButton:ce})})}):a.map(ue=>t.jsxs("tr",{className:L.includes(ue.id)?"bg-indigo-50/30":"",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("button",{onClick:()=>Nt(ue.id),children:L.includes(ue.id)?t.jsx(Rh,{className:"w-4 h-4 text-indigo-600"}):t.jsx(cy,{className:"w-4 h-4 text-gray-300"})})}),t.jsx("td",{className:`px-6 py-4 ${de("product")?"":"hidden"}`,children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"h-10 w-10 rounded-full bg-red-500 flex items-center justify-center mr-3",children:t.jsx(_n,{className:"h-5 w-5 text-white"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:ue.name}),t.jsx("div",{className:"text-xs text-gray-500 truncate w-40",children:ue.description})]})]})}),t.jsx("td",{className:`px-6 py-4 text-sm ${de("sku")?"":"hidden"}`,children:ue.sku||"-"}),t.jsx("td",{className:`px-6 py-4 text-sm ${de("category")?"":"hidden"}`,children:ue.category||"-"}),t.jsxs("td",{className:`px-6 py-4 text-sm ${de("price")?"":"hidden"}`,children:[ue.price," ",ue.currency]}),t.jsx("td",{className:`px-6 py-4 ${de("status")?"":"hidden"}`,children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${ue.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ue.isActive?"Active":"Inactive"})}),t.jsx("td",{className:"px-6 py-4 text-end",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>se(ue),className:"text-gray-400 hover:text-blue-600",children:t.jsx(Bt,{className:"h-4 w-4"})}),e("product.update")&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>qe(ue),className:"text-blue-600",children:t.jsx(er,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ct(ue),children:ue.isActive?t.jsx(O2,{className:"text-green-600 h-5 w-5"}):t.jsx(D2,{className:"text-gray-400 h-5 w-5"})})]}),e("product.delete")&&t.jsx("button",{onClick:()=>Me(ue),className:"text-red-600",children:t.jsx(ht,{className:"h-4 w-4"})})]})})]},ue.id))})]})}),n&&t.jsx(zn,{currentPage:n.currentPage,totalPages:n.totalPages,totalItems:n.totalProducts,onPageChange:xe,itemsPerPage:50})]}),T&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-lg overflow-hidden shadow-xl border",children:[t.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[t.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(Ri,{className:"w-5 h-5"})," Import Products"]}),t.jsx("button",{onClick:()=>{_(!1),ee(null)},children:t.jsx(da,{className:"w-5 h-5 text-gray-500"})})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upload CSV. Must have 'name' and 'price'."}),t.jsxs("button",{onClick:jt,className:"text-sm text-blue-600 flex items-center gap-1 mb-4",children:[t.jsx(Zh,{className:"w-4 h-4"})," Template"]}),t.jsx("div",{className:"border-2 border-dashed rounded-xl p-8 text-center",children:F?t.jsxs("div",{children:[t.jsx(Zh,{className:"h-10 w-10 text-blue-500 mx-auto mb-2"}),t.jsx("p",{className:"text-sm font-medium",children:F.name}),t.jsx("button",{onClick:()=>ee(null),className:"text-xs text-red-500 mt-2",children:"Remove"})]}):t.jsxs("label",{className:"cursor-pointer",children:[t.jsx(Ri,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),t.jsx("span",{className:"text-blue-600 font-medium",children:"Click to upload"}),t.jsx("input",{type:"file",className:"hidden",accept:".csv",onChange:Xe})]})}),t.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{_(!1),ee(null)},className:"px-4 py-2 border rounded-lg",children:"Cancel"}),t.jsx("button",{onClick:Ke,disabled:!F||X,className:"bg-blue-600 text-white px-4 py-2 rounded-lg disabled:opacity-50 flex items-center gap-2",children:X?"Importing...":"Start Import"})]})]})]})}),t.jsx(vm,{open:D&&!!H,title:"Delete Product",description:`Are you sure you want to delete ${H?.name}?`,confirmText:"Delete",loading:K,onConfirm:Dt,onClose:()=>{I(!1),W(null)}}),z&&t.jsx(Ioe,{onClose:()=>{q(!1),ae(void 0)},onSave:()=>{q(!1),V()},initialProduct:J}),ne&&t.jsx(Ooe,{product:ne,onClose:()=>re(null)})]})},Roe=()=>{const e=mt(),r=[{id:"task-reports",name:"Task Reports",description:"Analyze task completion rates, team productivity and efficiency.",icon:z9,color:"bg-blue-500",href:"/reports/tasks",count:"12 available"},{id:"lead-reports",name:"Lead Reports",description:"Track lead generation, conversion rates and source performance.",icon:Os,color:"bg-green-500",href:"/reports/leads",count:"8 available"},{id:"deal-reports",name:"Deal Reports",description:"Monitor sales pipeline, deal velocity and revenue forecasts.",icon:wa,color:"bg-purple-500",href:"/reports/deals",count:"15 available"},{id:"expense-reports",name:"Expense Reports",description:"Review spending patterns, budget adherence and financial health.",icon:Qr,color:"bg-orange-500",href:"/reports/expenses",count:"6 available"},{id:"invoice-reports",name:"Invoice Reports",description:"Track billing cycles, payments, and outstanding balances.",icon:Ka,color:"bg-red-500",href:"/reports/invoices",count:"10 available"},{id:"quotation-reports",name:"Quotation Reports",description:"Analyze acceptance rates and proposal effectiveness.",icon:wa,color:"bg-indigo-500",href:"/reports/quotations",count:"9 available"}];return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(Ka,{className:"w-8 h-8 text-weconnect-red"}),"Analytics & Reports"]}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Get deep insights into your business performance and team productivity."})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:r.map(a=>t.jsxs(Ee,{className:"group cursor-pointer hover:shadow-xl transition-all duration-300 border-gray-100 dark:border-slate-800 overflow-hidden",onClick:()=>e(a.href),children:[t.jsx("div",{className:`h-1.5 w-full ${a.color}`}),t.jsxs(tt,{className:"p-6",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsx("div",{className:`p-3 rounded-xl ${a.color} bg-opacity-10 text-white`,children:t.jsx(a.icon,{className:`w-8 h-8 ${a.color.replace("bg-","text-")}`})}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white group-hover:text-weconnect-red transition-colors",children:a.name}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed max-w-xs",children:a.description})]})]}),t.jsx("div",{className:"p-2 rounded-full bg-gray-50 dark:bg-slate-900 group-hover:bg-weconnect-red/10 group-hover:text-weconnect-red transition-all",children:t.jsx(Vc,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"mt-6 flex items-center justify-between border-t border-gray-50 dark:border-slate-800 pt-4",children:[t.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-gray-400",children:a.count}),t.jsx("span",{className:"text-sm font-medium text-weconnect-red opacity-0 group-hover:opacity-100 transition-opacity",children:"View Reports "})]})]})]},a.id))}),t.jsx(Ee,{className:"bg-gradient-to-br from-slate-900 to-slate-800 text-white border-none overflow-hidden",children:t.jsxs(tt,{className:"p-8 relative",children:[t.jsxs("div",{className:"relative z-10 max-w-2xl",children:[t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Build Custom Reports"}),t.jsx("p",{className:"text-slate-300 mb-6",children:"Need a more specific view of your data? Use our powerful custom report builder to visualize any dataset exactly how you want it."}),t.jsx("button",{className:"px-6 py-2.5 bg-weconnect-red hover:bg-red-700 text-white rounded-lg font-semibold transition-colors shadow-lg shadow-red-900/20",children:"Launch Report Builder"})]}),t.jsx(Ka,{className:"absolute right-[-20px] bottom-[-20px] w-64 h-64 text-white opacity-5 transform -rotate-12"})]})})]})},Ed=({currentPage:e,totalPages:r,totalItems:a,itemsPerPage:s,onPageChange:n,onItemsPerPageChange:i,showItemsPerPage:o=!0,itemsPerPageOptions:c=[5,10,25,50],className:u=""})=>{if(r<=1&&!o)return null;const m=(e-1)*s+1,g=Math.min(e*s,a),y=(()=>{const p=[];if(r<=7)for(let j=1;j<=r;j++)p.push(j);else{p.push(1),e>4&&p.push("...");const j=Math.max(2,e-2),v=Math.min(r-1,e+2);for(let N=j;N<=v;N++)p.push(N);e<r-3&&p.push("..."),r>1&&p.push(r)}return p})();return t.jsxs("div",{className:`flex items-center justify-between ${u}`,children:[o&&t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Items per page:"}),t.jsx("select",{value:s,onChange:p=>i(Number(p.target.value)),className:"border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:c.map(p=>t.jsx("option",{value:p,children:p},p))})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",m," to ",g," of ",a," entries"]}),r>1&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("button",{onClick:()=>n(1),disabled:e===1,className:"p-1 rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"First page",children:t.jsx(U9,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>n(e-1),disabled:e===1,className:"p-1 rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous page",children:t.jsx(Kw,{className:"h-4 w-4"})}),y.map((p,b)=>t.jsx("button",{onClick:()=>typeof p=="number"&&n(p),disabled:p==="..."||p===e,className:`px-3 py-1 rounded border text-sm transition-colors ${p===e?"bg-blue-600 text-white border-blue-600":p==="..."?"border-gray-300 dark:border-gray-600 cursor-default":"border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:p},b)),t.jsx("button",{onClick:()=>n(e+1),disabled:e===r,className:"p-1 rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next page",children:t.jsx(Vc,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>n(r),disabled:e===r,className:"p-1 rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Last page",children:t.jsx(F9,{className:"h-4 w-4"})})]})]})]})},Moe=()=>{const e=mt(),[r,a]=Fe.useState(1),[s,n]=Fe.useState(10),[i,o]=Fe.useState(!0),[c,u]=Fe.useState(null);Fe.useEffect(()=>{(async()=>{try{o(!0);const p=await Jn.getTaskReport(6,void 0,"all",r,s);p.success&&u(p.data)}catch(p){console.error("Error fetching task report:",p)}finally{o(!1)}})()},[r,s]);const m=[{label:"Total Tasks",value:c?.stats?.totalTasks||"0",icon:ct,color:"text-blue-500",bg:"bg-blue-50"},{label:"Completed",value:c?.stats?.completedTasks||"0",icon:Yt,color:"text-green-500",bg:"bg-green-50"},{label:"Overdue",value:c?.stats?.overdueTasks||"0",icon:Al,color:"text-red-500",bg:"bg-red-50"},{label:"Completion Rate",value:c?.stats?.completionRate||"0%",icon:vr,color:"text-purple-500",bg:"bg-purple-50"}];if(i)return t.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})});const g=({active:y,payload:p,label:b})=>y&&p&&p.length?t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700",children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:`${b}`}),p.map((j,v)=>t.jsx("p",{className:"text-sm",style:{color:j.color},children:`${j.name}: ${j.value}`},v))]}):null,f=({cx:y,cy:p,midAngle:b,innerRadius:j,outerRadius:v,percent:N})=>{const k=Math.PI/180,E=j+(v-j)*.5,C=y+E*Math.cos(-b*k),S=p+E*Math.sin(-b*k);return t.jsx("text",{x:C,y:S,fill:"white",textAnchor:C>y?"start":"end",dominantBaseline:"central",className:"text-sm font-medium",children:`${(N*100).toFixed(0)}%`})};return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>e("/reports"),className:"p-2",children:t.jsx(vr,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Task Performance Report"}),t.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Detailed analytics on task completion and team efficiency."})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs(me,{variant:"OUTLINE",className:"flex items-center gap-2",children:[t.jsx(Gl,{className:"w-4 h-4"})," Filter"]}),t.jsxs(me,{variant:"PRIMARY",className:"flex items-center gap-2",children:[t.jsx(hs,{className:"w-4 h-4"})," Export PDF"]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:m.map((y,p)=>t.jsx(Ee,{className:"border-none shadow-sm dark:bg-slate-900",children:t.jsxs(tt,{className:"p-6 flex items-center gap-4",children:[t.jsx("div",{className:`p-3 rounded-xl ${y.bg}`,children:t.jsx(y.icon,{className:`w-6 h-6 ${y.color}`})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:y.label}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.value})]})]})},p))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Task Completion Trend"})}),t.jsx(tt,{children:t.jsx(Ds,{width:"100%",height:300,children:t.jsxs(Xm,{data:c?.completionTrendData||[],children:[t.jsx(us,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(ms,{dataKey:"month",stroke:"#9CA3AF"}),t.jsx(gs,{stroke:"#9CA3AF"}),t.jsx(_a,{content:t.jsx(g,{})}),t.jsx(Ma,{}),t.jsx(Ki,{type:"monotone",dataKey:"completed",stroke:"#10b981",strokeWidth:2,dot:{fill:"#10b981"},activeDot:{r:8}}),t.jsx(Ki,{type:"monotone",dataKey:"overdue",stroke:"#ef4444",strokeWidth:2,dot:{fill:"#ef4444"},activeDot:{r:8}})]})})})]}),t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Task Priority Distribution"})}),t.jsx(tt,{children:t.jsx(Ds,{width:"100%",height:300,children:t.jsxs(gx,{children:[t.jsx(Gm,{data:c?.priorityDistributionData||[],cx:"50%",cy:"50%",labelLine:!1,label:f,outerRadius:80,fill:"#8884d8",dataKey:"value",children:(c?.priorityDistributionData||[]).map((y,p)=>t.jsx(Zo,{fill:y.color},`cell-${p}`))}),t.jsx(_a,{}),t.jsx(Ma,{})]})})})]})]}),t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Team Performance"})}),t.jsx(tt,{children:t.jsx(Ds,{width:"100%",height:300,children:t.jsxs(Nd,{data:c?.teamPerformanceData||[],children:[t.jsx(us,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(ms,{dataKey:"name",stroke:"#9CA3AF"}),t.jsx(gs,{stroke:"#9CA3AF"}),t.jsx(_a,{content:t.jsx(g,{})}),t.jsx(Ma,{}),t.jsx(Fn,{dataKey:"completed",fill:"#10b981"}),t.jsx(Fn,{dataKey:"overdue",fill:"#ef4444"})]})})})]}),t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Recent Overdue Tasks"})}),t.jsxs(tt,{className:"p-0",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-slate-950 text-gray-400 uppercase text-[10px] font-bold tracking-widest",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4",children:"Task Name"}),t.jsx("th",{className:"px-6 py-4",children:"Assigned To"}),t.jsx("th",{className:"px-6 py-4",children:"Due Date"}),t.jsx("th",{className:"px-6 py-4",children:"Status"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:(c?.recentOverdueTasks||[]).map((y,p)=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:y.name}),t.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-slate-300",children:y.user}),t.jsx("td",{className:"px-6 py-4 text-sm font-medium text-red-500",children:y.date}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"px-2.5 py-1 bg-red-100 text-red-600 rounded-full text-[10px] font-bold uppercase",children:y.status})})]},p))})]})}),t.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-slate-800",children:t.jsx(Ed,{currentPage:r,totalPages:c?.pagination?.pages||1,totalItems:c?.pagination?.total||0,itemsPerPage:s,onPageChange:a,onItemsPerPageChange:n})})]})]})]})},_oe=()=>{const e=mt(),[r,a]=h.useState(1),[s,n]=h.useState(10),[i,o]=h.useState(!0),[c,u]=h.useState(null),[m,g]=h.useState("6months"),[f,y]=h.useState("area"),[p,b]=h.useState("horizontal");h.useEffect(()=>{(async()=>{try{o(!0);const S=await Jn.getLeadReport(m==="3months"?3:m==="6months"?6:12,void 0,"all",r,s);S.success&&u(S.data)}catch(S){console.error("Error fetching lead report data:",S)}finally{o(!1)}})()},[m,r,s]);const j=[{label:"Total Leads",value:c?.stats?.totalLeads?.toLocaleString()||"0",icon:Os,color:"text-blue-500",bg:"bg-blue-50",change:c?.stats?.leadsChange||0,isPositive:c?.stats?.leadsChange>=0},{label:"Conversion Rate",value:c?.stats?.conversionRate||"0%",icon:Gw,color:"text-green-500",bg:"bg-green-50",change:c?.stats?.conversionChange||0,isPositive:c?.stats?.conversionChange>=0},{label:"Converted Leads",value:c?.stats?.convertedLeads?.toLocaleString()||"0",icon:Wc,color:"text-orange-500",bg:"bg-orange-50",change:c?.stats?.convertedChange||0,isPositive:c?.stats?.convertedChange>=0},{label:"Avg. Response",value:`${c?.stats?.avgResponseTimeHours||0} hrs`,icon:Yt,color:"text-purple-500",bg:"bg-purple-50",change:c?.stats?.responseChange||0,isPositive:c?.stats?.responseChange<=0}],v=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"],N=({active:C,payload:S,label:P})=>C&&S&&S.length?t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700",children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-white mb-2",children:`${P}`}),S.map((D,I)=>t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:D.color}}),t.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:`${D.name}: ${D.value.toLocaleString()}`})]},I)),S.length>1&&t.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-slate-700",children:t.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Total: ",S.reduce((D,I)=>D+I.value,0).toLocaleString()]})})]}):null,k=({cx:C,cy:S,midAngle:P,innerRadius:D,outerRadius:I,percent:H})=>{const W=Math.PI/180,K=D+(I-D)*.5,B=C+K*Math.cos(-P*W),z=S+K*Math.sin(-P*W);return t.jsx("text",{x:B,y:z,fill:"white",textAnchor:B>C?"start":"end",dominantBaseline:"central",className:"text-sm font-medium",children:`${(H*100).toFixed(0)}%`})},E=({active:C,payload:S,label:P})=>{if(C&&S&&S.length){const D=S.find(W=>W.dataKey==="leads")?.value||0,I=S.find(W=>W.dataKey==="converted")?.value||0,H=D>0?(I/D*100).toFixed(1):0;return t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700",children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-white mb-2",children:`${P}`}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Total Leads: ",D.toLocaleString()]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Converted: ",I.toLocaleString()]})]}),t.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-slate-700",children:t.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Conversion Rate: ",H,"%"]})})]})]})}return null};return i?t.jsx("div",{className:"h-full w-full flex items-center justify-center",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx(Ii,{className:"w-8 h-8 animate-spin text-blue-600"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading lead report data..."})]})}):(c?.funnelData?.map((C,S)=>{const P=S>0?c.funnelData[S-1].value:0,D=P>0?P-C.value:0,I=P>0?(D/P*100).toFixed(1):0,H=S>0?(C.value/c.funnelData[0].value*100).toFixed(1):100;return{...C,dropoff:D,dropoffRate:I,conversionRate:H,fill:v[S%v.length]}}),c?.sourceDistributionData?.map(C=>({source:C.name,leads:C.total,conversion:parseFloat(C.rate)*10,fullMark:100})),c?.sourceDistributionData?.map((C,S)=>({name:C.name,size:C.total,color:v[S%v.length]})),t.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>e("/reports"),className:"p-2",children:t.jsx(vr,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Lead Analysis Report"}),t.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Insights into lead funnel and conversion metrics."})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 p-1",children:[t.jsx("button",{onClick:()=>g("3months"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${m==="3months"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"}`,children:"3M"}),t.jsx("button",{onClick:()=>g("6months"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${m==="6months"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"}`,children:"6M"}),t.jsx("button",{onClick:()=>g("12months"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${m==="12months"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"}`,children:"1Y"})]}),t.jsxs(me,{variant:"OUTLINE",className:"flex items-center gap-2",children:[t.jsx(Gl,{className:"w-4 h-4"})," Filter"]}),t.jsxs(me,{variant:"PRIMARY",className:"flex items-center gap-2",children:[t.jsx(hs,{className:"w-4 h-4"})," Export Excel"]})]})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:j.map((C,S)=>t.jsx(Ee,{className:"border-none shadow-sm dark:bg-slate-900 hover:shadow-md transition-shadow",children:t.jsx(tt,{className:"p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`p-3 rounded-xl ${C.bg}`,children:t.jsx(C.icon,{className:`w-6 h-6 ${C.color}`})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:C.label}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:C.value})]})]}),t.jsxs("div",{className:`flex flex-col items-center gap-1 text-xs font-medium ${C.isPositive?"text-green-500":"text-red-500"}`,children:[C.isPositive?t.jsx(sD,{className:"w-4 h-4"}):t.jsx(xn,{className:"w-4 h-4"}),Math.abs(C.change),"%"]})]})})},S))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Lead Source Distribution"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:t.jsx(iD,{className:"w-4 h-4 text-gray-500"})}),t.jsx(e0,{className:"w-5 h-5 text-purple-500"})]})]})}),t.jsx(tt,{children:t.jsx(Ds,{width:"100%",height:300,children:t.jsxs(gx,{children:[t.jsx(Gm,{data:c?.sourceDistributionData||[],cx:"50%",cy:"50%",labelLine:!1,label:k,outerRadius:80,fill:"#8884d8",dataKey:"total",animationBegin:0,animationDuration:800,children:(c?.sourceDistributionData||[]).map((C,S)=>t.jsx(Zo,{fill:v[S%v.length]},`cell-${S}`))}),t.jsx(_a,{content:t.jsx(N,{})}),t.jsx(Ma,{})]})})})]}),t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Lead Conversion Trend"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-800 rounded-md border border-gray-200 dark:border-slate-700 p-0.5",children:[t.jsx("button",{onClick:()=>y("area"),className:`px-2 py-1 text-xs font-medium rounded transition-colors ${f==="area"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:"Area"}),t.jsx("button",{onClick:()=>y("line"),className:`px-2 py-1 text-xs font-medium rounded transition-colors ${f==="line"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:"Line"}),t.jsx("button",{onClick:()=>y("bar"),className:`px-2 py-1 text-xs font-medium rounded transition-colors ${f==="bar"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:"Bar"})]}),t.jsx(wa,{className:"w-5 h-5 text-green-500"})]})]})}),t.jsx(tt,{children:t.jsx(Ds,{width:"100%",height:300,children:f==="area"?t.jsxs(ik,{data:c?.conversionTrendData||[],children:[t.jsx(us,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(ms,{dataKey:"month",stroke:"#9CA3AF"}),t.jsx(gs,{stroke:"#9CA3AF"}),t.jsx(_a,{content:t.jsx(E,{})}),t.jsx(Ma,{}),t.jsx(td,{type:"monotone",dataKey:"leads",stackId:"1",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.6,animationDuration:800}),t.jsx(td,{type:"monotone",dataKey:"converted",stackId:"1",stroke:"#10B981",fill:"#10B981",fillOpacity:.6,animationDuration:800})]}):f==="line"?t.jsxs(Xm,{data:c?.conversionTrendData||[],children:[t.jsx(us,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(ms,{dataKey:"month",stroke:"#9CA3AF"}),t.jsx(gs,{stroke:"#9CA3AF"}),t.jsx(_a,{content:t.jsx(E,{})}),t.jsx(Ma,{}),t.jsx(Ki,{type:"monotone",dataKey:"leads",stroke:"#3B82F6",strokeWidth:2,dot:{fill:"#3B82F6"},activeDot:{r:6},animationDuration:800}),t.jsx(Ki,{type:"monotone",dataKey:"converted",stroke:"#10B981",strokeWidth:2,dot:{fill:"#10B981"},activeDot:{r:6},animationDuration:800})]}):t.jsxs(Nd,{data:c?.conversionTrendData||[],children:[t.jsx(us,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(ms,{dataKey:"month",stroke:"#9CA3AF"}),t.jsx(gs,{stroke:"#9CA3AF"}),t.jsx(_a,{content:t.jsx(E,{})}),t.jsx(Ma,{}),t.jsx(Fn,{dataKey:"leads",fill:"#3B82F6",animationDuration:800}),t.jsx(Fn,{dataKey:"converted",fill:"#10B981",animationDuration:800})]})})})]})]}),t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{children:t.jsxs("div",{className:"flex items-center justify-between w-full",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Source Performance"}),t.jsx(Wc,{className:"w-5 h-5 text-green-500"})]})}),t.jsxs(tt,{className:"p-0",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-slate-950 text-gray-400 uppercase text-[10px] font-bold tracking-widest",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4",children:"Source"}),t.jsx("th",{className:"px-6 py-4",children:"Total Leads"}),t.jsx("th",{className:"px-6 py-4",children:"Converted"}),t.jsx("th",{className:"px-6 py-4",children:"Conv. Rate"})]})}),t.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:[(c?.sourceDistributionData||[]).map((C,S)=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:C.name}),t.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-slate-300",children:C.total}),t.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-slate-300 font-medium",children:C.converted}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-16 h-1.5 bg-gray-100 dark:bg-slate-800 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:C.rate}})}),t.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:C.rate})]})})]},S)),(c?.sourceDistributionData||[]).length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:4,className:"px-6 py-10 text-center text-gray-400 font-medium italic",children:"No lead source data available."})})]})]})}),(c?.sourceDistributionData||[]).length>0&&t.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-slate-800",children:t.jsx(Ed,{currentPage:r,totalPages:c?.pagination?.pages||1,totalItems:c?.pagination?.total||0,itemsPerPage:s,onPageChange:a,onItemsPerPageChange:n})})]})]})]}))},$oe=()=>{const e=mt(),[r,a]=h.useState(1),[s,n]=h.useState(10),[i,o]=h.useState(!0),[c,u]=h.useState(null),[m,g]=h.useState("6months"),[f,y]=h.useState("area");h.useEffect(()=>{(async()=>{try{o(!0);const N=await Jn.getDealReport(m==="3months"?3:m==="6months"?6:12,void 0,"all",r,s);N.success&&u(N.data)}catch(N){console.error("Error fetching deal report data:",N)}finally{o(!1)}})()},[m,r,s]);const p=[{label:"Pipeline Value",value:c?.stats?.pipelineValue||"0",icon:zu,color:"text-blue-500",bg:"bg-blue-50"},{label:"Closed Deals",value:c?.stats?.closedDealsValue||"0",icon:wa,color:"text-green-500",bg:"bg-green-50"},{label:"Win Rate",value:c?.stats?.winRate||"0%",icon:kb,color:"text-orange-500",bg:"bg-orange-50"},{label:"Avg. Deal Size",value:c?.stats?.avgDealSize||"0",icon:Qr,color:"text-purple-500",bg:"bg-purple-50"}],{formatCurrency:b}=Hr(),j=({active:v,payload:N,label:k})=>v&&N&&N.length?t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700",children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-white mb-2",children:`${k}`}),N.map((E,C)=>t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:E.color}}),t.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:`${E.name}: ${b(E.value)}`})]},C))]}):null;return i?t.jsx("div",{className:"h-full w-full flex items-center justify-center",children:t.jsx(Ii,{className:"w-8 h-8 animate-spin text-blue-600"})}):t.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>e("/reports"),className:"p-2",children:t.jsx(vr,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Sales & Deal Report"}),t.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Comprehensive overview of sales pipeline and closure rates."})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 p-1",children:["3months","6months","12months"].map(v=>t.jsx("button",{onClick:()=>g(v),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${m===v?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"}`,children:v==="3months"?"3M":v==="6months"?"6M":"1Y"},v))}),t.jsxs(me,{variant:"OUTLINE",className:"flex items-center gap-2",children:[t.jsx(Gl,{className:"w-4 h-4"})," Filter"]}),t.jsxs(me,{variant:"PRIMARY",className:"flex items-center gap-2",children:[t.jsx(hs,{className:"w-4 h-4"})," Export"]})]})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:p.map((v,N)=>t.jsx(Ee,{className:"border-none shadow-sm dark:bg-slate-900",children:t.jsxs(tt,{className:"p-6 flex items-center gap-4",children:[t.jsx("div",{className:`p-3 rounded-xl ${v.bg}`,children:t.jsx(v.icon,{className:`w-6 h-6 ${v.color}`})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:v.label}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:v.value})]})]})},N))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Sales Forecast vs Actual"}),t.jsx("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-800 rounded-md border border-gray-200 dark:border-slate-700 p-0.5",children:["area","line","bar"].map(v=>t.jsx("button",{onClick:()=>y(v),className:`px-2 py-1 text-xs font-medium rounded transition-colors ${f===v?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:v.charAt(0).toUpperCase()+v.slice(1)},v))})]})}),t.jsx(tt,{children:t.jsx(Ds,{width:"100%",height:300,children:f==="area"?t.jsxs(ik,{data:c?.salesTrendData||[],children:[t.jsx(us,{strokeDasharray:"3 3",stroke:"#374151",vertical:!1}),t.jsx(ms,{dataKey:"month",stroke:"#9CA3AF"}),t.jsx(gs,{stroke:"#9CA3AF",tickFormatter:v=>`${c?.currency?.symbol||"$"}${v>=1e3?(v/1e3).toFixed(0)+"K":v}`}),t.jsx(_a,{content:t.jsx(j,{})}),t.jsx(Ma,{}),t.jsx(td,{type:"monotone",dataKey:"forecast",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.4,name:"Forecasted Revenue"}),t.jsx(td,{type:"monotone",dataKey:"actual",stroke:"#10B981",fill:"#10B981",fillOpacity:.6,name:"Actual Revenue"})]}):f==="line"?t.jsxs(Xm,{data:c?.salesTrendData||[],children:[t.jsx(us,{strokeDasharray:"3 3",stroke:"#374151",vertical:!1}),t.jsx(ms,{dataKey:"month",stroke:"#9CA3AF"}),t.jsx(gs,{stroke:"#9CA3AF",tickFormatter:v=>`${c?.currency?.symbol||"$"}${v>=1e3?(v/1e3).toFixed(0)+"K":v}`}),t.jsx(_a,{content:t.jsx(j,{})}),t.jsx(Ma,{}),t.jsx(Ki,{type:"monotone",dataKey:"forecast",stroke:"#3B82F6",strokeWidth:2,name:"Forecasted"}),t.jsx(Ki,{type:"monotone",dataKey:"actual",stroke:"#10B981",strokeWidth:2,name:"Actual"})]}):t.jsxs(Nd,{data:c?.salesTrendData||[],children:[t.jsx(us,{strokeDasharray:"3 3",stroke:"#374151",vertical:!1}),t.jsx(ms,{dataKey:"month",stroke:"#9CA3AF"}),t.jsx(gs,{stroke:"#9CA3AF"}),t.jsx(_a,{content:t.jsx(j,{})}),t.jsx(Ma,{}),t.jsx(Fn,{dataKey:"forecast",fill:"#3B82F6",name:"Forecasted"}),t.jsx(Fn,{dataKey:"actual",fill:"#10B981",name:"Actual"})]})})})]}),t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Deal Performance Metrics"}),t.jsx(Wc,{className:"w-5 h-5 text-purple-500"})]})}),t.jsx(tt,{children:t.jsxs("div",{className:"grid grid-cols-2 gap-4 h-[300px]",children:[t.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 dark:bg-blue-900/20 rounded-2xl",children:[t.jsx(Yt,{className:"w-10 h-10 text-blue-500 mb-4"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:c?.stats?.avgDaysToClose||0}),t.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Avg. Days to Close"})]}),t.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-green-50 dark:bg-green-900/20 rounded-2xl",children:[t.jsx(wa,{className:"w-10 h-10 text-green-500 mb-4"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:c?.stats?.winRate||"0%"}),t.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Winning Chance"})]})]})})]})]}),t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Recent Closed Deals"}),t.jsx(zu,{className:"w-5 h-5 text-blue-500"})]})}),t.jsxs(tt,{className:"p-0",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-slate-950 text-gray-400 uppercase text-[10px] font-bold tracking-widest",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4",children:"Deal Name"}),t.jsx("th",{className:"px-6 py-4",children:"Owner"}),t.jsx("th",{className:"px-6 py-4",children:"Value"}),t.jsx("th",{className:"px-6 py-4",children:"Closed On"})]})}),t.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:[(c?.recentClosedDeals||[]).map((v,N)=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:v.name}),t.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-slate-300",children:v.owner}),t.jsx("td",{className:"px-6 py-4 font-bold text-green-600 dark:text-green-400",children:v.value}),t.jsx("td",{className:"px-6 py-4 text-xs font-bold text-gray-400 uppercase tracking-widest",children:v.date})]},N)),(c?.recentClosedDeals||[]).length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:4,className:"px-6 py-10 text-center text-gray-400 font-medium italic",children:"No closed deals found in this period."})})]})]})}),(c?.recentClosedDeals||[]).length>0&&t.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-slate-800",children:t.jsx(Ed,{currentPage:r,totalPages:c?.pagination?.pages||1,totalItems:c?.pagination?.total||0,itemsPerPage:s,onPageChange:a,onItemsPerPageChange:n})})]})]})]})},Uoe=()=>{const e=mt(),[r,a]=Fe.useState(1),[s,n]=Fe.useState(10),[i,o]=Fe.useState(!0),[c,u]=Fe.useState(null),[m,g]=Fe.useState("6months");Fe.useEffect(()=>{(async()=>{try{o(!0);const N=await Jn.getExpenseReport(m==="3months"?3:m==="6months"?6:12,void 0,"all",r,s);N.success&&u(N.data)}catch(N){console.error("Error fetching expense report:",N)}finally{o(!1)}})()},[m,r,s]);const f=[{label:"Total Expenses",value:c?.stats?.totalAmount||"0",icon:e0,color:"text-red-500",bg:"bg-red-50"},{label:"Approved",value:c?.stats?.approvedAmount||"0",icon:e0,color:"text-green-500",bg:"bg-green-50"},{label:"Pending",value:c?.stats?.pendingAmount||"0",icon:zu,color:"text-blue-500",bg:"bg-blue-50"},{label:"Rejected",value:c?.stats?.rejectedAmount||"0",icon:Al,color:"text-orange-500",bg:"bg-orange-50"}],y=({active:v,payload:N,label:k})=>v&&N&&N.length?t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700",children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-white mb-2",children:`${k}`}),N.map((E,C)=>t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:E.color}}),t.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:`${E.name}: ${b(E.value)}`})]},C))]}):null,p=({cx:v,cy:N,midAngle:k,innerRadius:E,outerRadius:C,percent:S})=>{const P=Math.PI/180,D=E+(C-E)*.5,I=v+D*Math.cos(-k*P),H=N+D*Math.sin(-k*P);return t.jsx("text",{x:I,y:H,fill:"white",textAnchor:I>v?"start":"end",dominantBaseline:"central",className:"text-sm font-medium",children:`${(S*100).toFixed(0)}%`})},{formatCurrency:b}=Hr(),j=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"];return i?t.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:t.jsx(Ii,{className:"animate-spin h-10 w-10 text-indigo-600"})}):t.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>e("/reports"),className:"p-2",children:t.jsx(vr,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Expense Analysis Report"}),t.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Detailed breakdown of company spending and overheads."})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("select",{value:m,onChange:v=>g(v.target.value),className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[t.jsx("option",{value:"3months",children:"Last 3 Months"}),t.jsx("option",{value:"6months",children:"Last 6 Months"}),t.jsx("option",{value:"12months",children:"Last 12 Months"})]}),t.jsxs(me,{variant:"PRIMARY",className:"flex items-center gap-2",children:[t.jsx(hs,{className:"w-4 h-4"})," Export"]})]})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map((v,N)=>t.jsx(Ee,{className:"border-none shadow-sm dark:bg-slate-900",children:t.jsxs(tt,{className:"p-6 flex items-center gap-4",children:[t.jsx("div",{className:`p-3 rounded-xl ${v.bg}`,children:t.jsx(v.icon,{className:`w-6 h-6 ${v.color}`})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:v.label}),t.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:v.value})]})]})},N))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Monthly Expense Trend"}),t.jsx(wa,{className:"w-5 h-5 text-blue-500"})]})}),t.jsx(tt,{children:t.jsx(Ds,{width:"100%",height:300,children:t.jsxs(Nd,{data:c?.expenseTrendData||[],children:[t.jsx(us,{strokeDasharray:"3 3",stroke:"#374151",vertical:!1}),t.jsx(ms,{dataKey:"month",stroke:"#9CA3AF"}),t.jsx(gs,{stroke:"#9CA3AF",tickFormatter:v=>`${c?.currency?.symbol||""}${v>=1e3?(v/1e3).toFixed(0)+"K":v}`}),t.jsx(_a,{content:t.jsx(y,{})}),t.jsx(Ma,{}),t.jsx(Fn,{dataKey:"amount",name:"Total Expense",fill:"#EF4444",radius:[4,4,0,0]})]})})})]}),t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Expense Category Breakdown"}),t.jsx(Ka,{className:"w-5 h-5 text-purple-500"})]})}),t.jsx(tt,{children:t.jsx(Ds,{width:"100%",height:300,children:t.jsxs(gx,{children:[t.jsx(Gm,{data:c?.categoryDistributionData||[],cx:"50%",cy:"50%",labelLine:!1,label:p,outerRadius:80,fill:"#8884d8",dataKey:"value",children:(c?.categoryDistributionData||[]).map((v,N)=>t.jsx(Zo,{fill:j[N%j.length]},`cell-${N}`))}),t.jsx(_a,{formatter:v=>b(v)}),t.jsx(Ma,{})]})})})]})]}),t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Recent Large Expenses"})}),t.jsxs(tt,{className:"p-0",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-slate-950 text-gray-400 uppercase text-[10px] font-bold tracking-widest",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4",children:"Expense Description"}),t.jsx("th",{className:"px-6 py-4",children:"Category"}),t.jsx("th",{className:"px-6 py-4",children:"Submitted By"}),t.jsx("th",{className:"px-6 py-4",children:"Amount"}),t.jsx("th",{className:"px-6 py-4",children:"Date"}),t.jsx("th",{className:"px-6 py-4",children:"Status"})]})}),t.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:[(c?.recentExpenses||[]).map((v,N)=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:v.description}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:v.category}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:v.user}),t.jsx("td",{className:"px-6 py-4 font-bold text-red-600",children:v.amount}),t.jsx("td",{className:"px-6 py-4 text-xs font-medium text-gray-400",children:v.date}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] font-bold uppercase ${v.status==="APPROVED"?"bg-green-100 text-green-600":v.status==="PENDING"?"bg-blue-100 text-blue-600":"bg-red-100 text-red-600"}`,children:v.status})})]},N)),(c?.recentExpenses||[]).length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-gray-400 font-medium italic",children:"No expense data available for this range."})})]})]})}),t.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-slate-800",children:t.jsx(Ed,{currentPage:r,totalPages:c?.pagination?.pages||1,totalItems:c?.pagination?.total||0,itemsPerPage:s,onPageChange:a,onItemsPerPageChange:n})})]})]})]})},Foe=()=>{const e=mt(),[r,a]=Fe.useState(1),[s,n]=Fe.useState(10),[i,o]=Fe.useState(!0),[c,u]=Fe.useState(null),[m,g]=Fe.useState("6months");Fe.useEffect(()=>{(async()=>{try{o(!0);const N=await Jn.getInvoiceReport(m==="3months"?3:m==="6months"?6:12,void 0,"all",r,s);N.success&&u(N.data)}catch(N){console.error("Error fetching invoice report:",N)}finally{o(!1)}})()},[m,r,s]);const f=[{label:"Total Invoiced",value:c?.stats?.totalBilled||"0",icon:Qr,color:"text-blue-500",bg:"bg-blue-50"},{label:"Amount Paid",value:c?.stats?.totalPaid||"0",icon:ct,color:"text-green-500",bg:"bg-green-50"},{label:"Outstanding",value:c?.stats?.outstanding||"0",icon:Yt,color:"text-orange-500",bg:"bg-orange-50"},{label:"Overdue",value:c?.stats?.overdue||"0",icon:ur,color:"text-red-500",bg:"bg-red-50"}],y=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"],p=()=>{if(!c?.highValueInvoices?.length)return;const v=["Invoice #","Client","Amount","Status","Due Date"],N=c.highValueInvoices.map(S=>[S.id,S.client,S.amount,S.status,S.date]),k="data:text/csv;charset=utf-8,"+v.join(",")+`
`+N.map(S=>S.join(",")).join(`
`),E=encodeURI(k),C=document.createElement("a");C.setAttribute("href",E),C.setAttribute("download",`high_value_invoices_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(C),C.click(),document.body.removeChild(C)},b=v=>new Intl.NumberFormat("en-US",{style:"currency",currency:c?.currency?.code||"USD",maximumFractionDigits:0}).format(v),j=({active:v,payload:N,label:k})=>v&&N&&N.length?t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700",children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-white mb-2",children:`${k}`}),N.map((E,C)=>t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:E.color}}),t.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:`${E.name}: ${b(E.value)}`})]},C))]}):null;return i?t.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:t.jsx(Ii,{className:"animate-spin h-10 w-10 text-indigo-600"})}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>e("/reports"),className:"p-2",children:t.jsx(vr,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Invoice Analysis Report"}),t.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Financial insights, collection trends, and receivables."})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("select",{value:m,onChange:v=>g(v.target.value),className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[t.jsx("option",{value:"3months",children:"Last 3 Months"}),t.jsx("option",{value:"6months",children:"Last 6 Months"}),t.jsx("option",{value:"12months",children:"Last 12 Months"})]}),t.jsxs(me,{variant:"PRIMARY",className:"flex items-center gap-2",onClick:p,children:[t.jsx(hs,{className:"w-4 h-4"})," Export Report"]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map((v,N)=>t.jsx(Ee,{className:"border-none shadow-sm dark:bg-slate-900",children:t.jsxs(tt,{className:"p-6 flex items-center gap-4",children:[t.jsx("div",{className:`p-3 rounded-xl ${v.bg}`,children:t.jsx(v.icon,{className:`w-6 h-6 ${v.color}`})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:v.label}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:v.value})]})]})},N))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Revenue Analysis"}),t.jsx(wa,{className:"w-5 h-5 text-blue-500"})]})}),t.jsx(tt,{children:t.jsx(Ds,{width:"100%",height:300,children:t.jsxs(Nd,{data:c?.revenueTrendData||[],children:[t.jsx(us,{strokeDasharray:"3 3",stroke:"#374151",vertical:!1}),t.jsx(ms,{dataKey:"month",stroke:"#9CA3AF"}),t.jsx(gs,{stroke:"#9CA3AF",tickFormatter:v=>v>=1e3?`${c?.currency?.symbol||"$"}${(v/1e3).toFixed(0)}K`:`${c?.currency?.symbol||"$"}${v}`}),t.jsx(_a,{content:t.jsx(j,{})}),t.jsx(Ma,{}),t.jsx(Fn,{dataKey:"billed",name:"Billed",fill:"#3B82F6",radius:[4,4,0,0]}),t.jsx(Fn,{dataKey:"collected",name:"Collected",fill:"#10B981",radius:[4,4,0,0]})]})})})]}),t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Invoice Status Distribution"}),t.jsx(e0,{className:"w-5 h-5 text-purple-500"})]})}),t.jsx(tt,{children:t.jsx(Ds,{width:"100%",height:300,children:t.jsxs(gx,{children:[t.jsx(Gm,{data:c?.statusDistributionData||[],cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:v,percent:N})=>`${v} ${((N||0)*100).toFixed(0)}%`,children:(c?.statusDistributionData||[]).map((v,N)=>t.jsx(Zo,{fill:y[N%y.length]},`cell-${N}`))}),t.jsx(_a,{}),t.jsx(Ma,{})]})})})]})]}),t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Recent High-Value Invoices"})}),t.jsxs(tt,{className:"p-0",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left font-medium",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-slate-950 text-gray-400 uppercase text-[10px] font-bold tracking-widest",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-center",children:"Invoice #"}),t.jsx("th",{className:"px-6 py-4",children:"Client"}),t.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"}),t.jsx("th",{className:"px-6 py-4 text-center",children:"Status"}),t.jsx("th",{className:"px-6 py-4 text-center",children:"Due Date"})]})}),t.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:[(c?.highValueInvoices||[]).map((v,N)=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-600 dark:text-blue-400",children:v.id}),t.jsx("td",{className:"px-6 py-4 text-gray-900 dark:text-white",children:v.client}),t.jsx("td",{className:"px-6 py-4 text-right text-gray-900 dark:text-white font-bold",children:v.amount}),t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase ${v.status==="PAID"?"bg-green-100 text-green-600":v.status==="OVERDUE"?"bg-red-100 text-red-600":"bg-orange-100 text-orange-600"}`,children:v.status})}),t.jsx("td",{className:"px-6 py-4 text-center text-xs text-gray-400",children:v.date})]},N)),(c?.highValueInvoices||[]).length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-6 py-10 text-center text-gray-400 italic font-medium",children:"No invoice data found for this period."})})]})]})}),t.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-slate-800",children:t.jsx(Ed,{currentPage:r,totalPages:c?.pagination?.pages||1,totalItems:c?.pagination?.total||0,itemsPerPage:s,onPageChange:a,onItemsPerPageChange:n})})]})]})]})},zoe=()=>{const e=mt(),[r,a]=Fe.useState(1),[s,n]=Fe.useState(10),[i,o]=Fe.useState(!0),[c,u]=Fe.useState(null),[m,g]=Fe.useState("6months");Fe.useEffect(()=>{(async()=>{try{o(!0);const b=await Jn.getQuotationReport(m==="3months"?3:m==="6months"?6:12,void 0,"all",r,s);b.success&&u(b.data)}catch(b){console.error("Error fetching quotation report:",b)}finally{o(!1)}})()},[m,r,s]);const f=[{label:"Total Quotes",value:c?.stats?.total.toString()||"0",icon:q9,color:"text-purple-500",bg:"bg-purple-50"},{label:"Accepted",value:c?.stats?.accepted.toString()||"0",icon:ct,color:"text-green-500",bg:"bg-green-50"},{label:"Waiting",value:c?.stats?.waiting.toString()||"0",icon:Yt,color:"text-orange-500",bg:"bg-orange-50"},{label:"Rejected",value:c?.stats?.rejected.toString()||"0",icon:va,color:"text-red-500",bg:"bg-red-50"}],y=()=>{if(!c?.quotations?.length)return;const p=["Quote #","Subject","Client","Amount","Status","Valid Until"],b=c.quotations.map(k=>[k.id,k.subject,k.client,k.amount,k.status,k.validUntil]),j="data:text/csv;charset=utf-8,"+p.join(",")+`
`+b.map(k=>k.join(",")).join(`
`),v=encodeURI(j),N=document.createElement("a");N.setAttribute("href",v),N.setAttribute("download",`quotation_report_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(N),N.click(),document.body.removeChild(N)};return i?t.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:t.jsx(Ii,{className:"animate-spin h-10 w-10 text-indigo-600"})}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(me,{variant:"GHOST",size:"SM",onClick:()=>e("/reports"),className:"p-2",children:t.jsx(vr,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Quotation Performance"}),t.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Tracking proposal success rates and conversion pipeline."})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("select",{value:m,onChange:p=>g(p.target.value),className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-medium",children:[t.jsx("option",{value:"3months",children:"Last 3 Months"}),t.jsx("option",{value:"6months",children:"Last 6 Months"}),t.jsx("option",{value:"12months",children:"Last 12 Months"})]}),t.jsxs(me,{variant:"PRIMARY",className:"flex items-center gap-2",onClick:y,children:[t.jsx(hs,{className:"w-4 h-4"})," Export Report"]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map((p,b)=>t.jsx(Ee,{className:"border-none shadow-sm dark:bg-slate-900",children:t.jsxs(tt,{className:"p-6 flex items-center gap-4",children:[t.jsx("div",{className:`p-3 rounded-xl ${p.bg}`,children:t.jsx(p.icon,{className:`w-6 h-6 ${p.color}`})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:p.label}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:p.value})]})]})},b))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs(Ee,{className:"lg:col-span-2 dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Acceptance Rate Trend (%)"}),t.jsx(wa,{className:"w-5 h-5 text-green-500"})]})}),t.jsx(tt,{children:t.jsx(Ds,{width:"100%",height:300,children:t.jsxs(Xm,{data:c?.trendData||[],children:[t.jsx(us,{strokeDasharray:"3 3",stroke:"#374151",vertical:!1}),t.jsx(ms,{dataKey:"month",stroke:"#9CA3AF"}),t.jsx(gs,{stroke:"#9CA3AF",tickFormatter:p=>`${p}%`}),t.jsx(_a,{contentStyle:{backgroundColor:"#1E293B",border:"none",borderRadius:"8px",color:"#fff"},formatter:p=>[`${p}%`,"Acceptance Rate"]}),t.jsx(Ki,{type:"monotone",dataKey:"rate",stroke:"#10B981",strokeWidth:3,dot:{fill:"#10B981",r:4},activeDot:{r:6,strokeWidth:0}})]})})})]}),t.jsxs(Ee,{className:"min-h-[350px] flex items-center justify-center border-none dark:bg-slate-900 bg-blue-600 relative overflow-hidden group",children:[t.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:scale-110 transition-transform",children:t.jsx(ct,{className:"w-32 h-32 text-white"})}),t.jsxs("div",{className:"relative z-10 p-6 text-white h-full flex flex-col justify-center",children:[t.jsx("p",{className:"text-blue-100 text-sm font-bold uppercase tracking-widest mb-2",children:"Overall Conversion"}),t.jsxs("h2",{className:"text-6xl font-black mb-4",children:[c?.stats?.conversionRate,"%"]}),t.jsxs("div",{className:"flex items-center gap-2 text-blue-100 font-medium",children:[t.jsx(wa,{className:"w-4 h-4"}),t.jsx("span",{children:"Average across period"})]})]})]})]}),t.jsxs(Ee,{className:"dark:bg-slate-900 border-none shadow-sm",children:[t.jsx(kt,{children:t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"High-Value Quotations"})}),t.jsxs(tt,{className:"p-0",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-slate-950 text-gray-400 uppercase text-[10px] font-bold tracking-widest",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4",children:"Quote #"}),t.jsx("th",{className:"px-6 py-4",children:"Subject"}),t.jsx("th",{className:"px-6 py-4",children:"Client"}),t.jsx("th",{className:"px-6 py-4",children:"Amount"}),t.jsx("th",{className:"px-6 py-4",children:"Status"}),t.jsx("th",{className:"px-6 py-4",children:"Valid Until"})]})}),t.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:[(c?.quotations||[]).map((p,b)=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors",children:[t.jsxs("td",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(Lt,{className:"w-4 h-4 text-gray-400"}),p.id]}),t.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-slate-300 font-medium",children:p.subject}),t.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-slate-300",children:p.client}),t.jsx("td",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:p.amount}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold uppercase ${p.status==="ACCEPTED"?"bg-green-100 text-green-600":p.status==="REJECTED"?"bg-red-100 text-red-600":p.status==="EXPIRED"?"bg-gray-100 text-gray-600":"bg-orange-100 text-orange-600"}`,children:p.status})}),t.jsx("td",{className:"px-6 py-4 text-xs font-bold text-orange-500 uppercase tracking-widest",children:p.validUntil})]},b)),(c?.quotations||[]).length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-gray-400 italic",children:"No quotations found for this period."})})]})]})}),t.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-slate-800",children:t.jsx(Ed,{currentPage:r,totalPages:c?.pagination?.pages||1,totalItems:c?.pagination?.total||0,itemsPerPage:s,onPageChange:a,onItemsPerPageChange:n})})]})]})]})},Boe=({isOpen:e,onLogin:r,title:a="Session Expired",message:s="Your session has expired for security reasons. Please login again to continue using the application."})=>(Fe.useEffect(()=>{if(e){const n=setTimeout(()=>{const i=document.querySelector('[data-testid="login-again-button"]');i&&i.focus()},100);return()=>clearTimeout(n)}},[e]),e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[t.jsx("div",{className:"flex items-center justify-center mb-4",children:t.jsx("div",{className:"bg-red-100 dark:bg-red-900/20 rounded-full p-3",children:t.jsx(Al,{className:"h-8 w-8 text-red-600"})})}),t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:a}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s})]}),t.jsx("div",{className:"flex justify-center",children:t.jsxs("button",{"data-testid":"login-again-button",onClick:r,className:"flex items-center px-6 py-3 bg-[#ef444e] text-white rounded-lg hover:bg-[#f26971] transition-colors focus:outline-none focus:ring-2 focus:ring-[#ef444e] focus:ring-offset-2",children:[t.jsx(V9,{className:"h-4 w-4 mr-2"}),"Login Again"]})})]})}):null);class qoe extends h.Component{constructor(r){super(r),this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,a){console.error("Error caught by boundary:",r,a)}render(){return this.state.hasError?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:t.jsx("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 mb-4",children:t.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Something went wrong"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),t.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Refresh Page"})]})})}):this.props.children}}const Hoe=()=>{const[e]=um(),r=(e.get("q")||"").trim(),[a,s]=h.useState(!1),[n,i]=h.useState([]),[o,c]=h.useState([]);return h.useEffect(()=>{let u=!0;return(async()=>{s(!0);try{const g=r?Gt.getLeads({page:1,limit:10,search:r}):Promise.resolve({data:{leads:[]}}),f=r?aa.getDeals(1,10,r):Promise.resolve({data:{deals:[]}}),[y,p]=await Promise.all([g.catch(()=>({data:{leads:[]}})),f.catch(()=>({data:{deals:[]}}))]);if(!u)return;i(y?.data?.leads??y?.data?.items??[]),c(p?.data?.deals??[])}finally{u&&s(!1)}})(),()=>{u=!1}},[r]),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ma,{className:"w-5 h-5 text-gray-500"}),t.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Search results"}),r&&t.jsxs("span",{className:"text-gray-500",children:['for "',r,'"']})]}),a&&t.jsx("div",{className:"text-gray-500",children:"Searching..."}),!a&&!r&&t.jsx("div",{className:"text-gray-500",children:"Type a search above and press Enter."}),!a&&r&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 overflow-hidden",children:[t.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-slate-800 flex items-center gap-2",children:[t.jsx(xt,{className:"w-4 h-4 text-gray-500"}),t.jsx("h2",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:"Leads"}),t.jsx("span",{className:"ml-auto text-xs text-gray-500",children:n.length})]}),t.jsxs("ul",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:[n.map(u=>t.jsx("li",{children:t.jsxs(ri,{to:`/leads/${u.id}`,className:"block px-4 py-3 hover:bg-gray-50 dark:hover:bg-slate-800",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[u.firstName,u.lastName].filter(Boolean).join(" ")||u.email||`Lead #${u.id}`}),t.jsx("div",{className:"text-xs text-gray-500",children:u.email||u.phone||""})]})},u.id)),n.length===0&&t.jsx("li",{className:"px-4 py-6 text-sm text-gray-500",children:"No leads found"})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 overflow-hidden",children:[t.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-slate-800 flex items-center gap-2",children:[t.jsx(Qr,{className:"w-4 h-4 text-gray-500"}),t.jsx("h2",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:"Deals"}),t.jsx("span",{className:"ml-auto text-xs text-gray-500",children:o.length})]}),t.jsxs("ul",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:[o.map(u=>t.jsx("li",{children:t.jsxs(ri,{to:`/deals/${u.id}`,className:"block px-4 py-3 hover:bg-gray-50 dark:hover:bg-slate-800",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:u.title||`Deal #${u.id}`}),t.jsx("div",{className:"text-xs text-gray-500",children:u.value!=null&&u.currency?`${u.value} ${u.currency}`:u.status})]})},u.id)),o.length===0&&t.jsx("li",{className:"px-4 py-6 text-sm text-gray-500",children:"No deals found"})]})]})]})]})},$P=()=>{const e=mt(),r=Bn(),{user:a}=xr(),[s,n]=h.useState([]),[i,o]=h.useState(!1),[c,u]=h.useState(!1),[m,g]=h.useState([]),[f,y]=h.useState({title:"",description:"",dueDate:"",priority:"MEDIUM",assignedTo:""}),[p,b]=h.useState(""),[j,v]=h.useState("ALL"),[N,k]=h.useState("ALL"),[E,C]=h.useState("list"),[S,P]=h.useState(["title","status","priority","dueDate","assignedTo","lead","createdBy"]),[D,I]=h.useState(1),[H,W]=h.useState(10),[K,B]=h.useState(null);h.useEffect(()=>{try{const F=localStorage.getItem("tasks_visible_columns");if(F){const ee=JSON.parse(F);Array.isArray(ee)&&ee.every(Z=>typeof Z=="string")&&P(ee)}}catch{}},[]),h.useEffect(()=>{try{localStorage.setItem("tasks_visible_columns",JSON.stringify(S))}catch{}},[S]);const z=async()=>{try{o(!0);const F=j!=="ALL"?j:"PENDING,IN_PROGRESS,COMPLETED",ee=await cs.list({status:F,search:p||void 0,limit:100}),U=(ee?.data?.tasks||ee?.data?.items||ee?.tasks||[]).map(X=>({...X,id:String(X.id),assignedToUser:X.assignedUser,createdByUser:X.createdByUser,lead:X.lead}));n(U)}catch{M.error("Failed to load tasks")}finally{o(!1)}};h.useEffect(()=>{(async()=>{try{const F=await Er.getUsers({page:1,limit:100}),ee=F?.data?.users||F?.data||F?.users||[];g(ee.map(Z=>({id:Z.id,firstName:Z.firstName,lastName:Z.lastName})))}catch{}})()},[]),h.useEffect(()=>{z()},[j,p]),h.useEffect(()=>{const F=new URLSearchParams(r.search),ee=F.get("dueDate")||F.get("date");ee&&(u(!0),y(Z=>({...Z,dueDate:ee})),e(r.pathname,{replace:!0}))},[r.pathname,r.search,e]);const q=async()=>{if(!f.title.trim()){M.error("Title is required");return}if(!a?.id){M.error("User information not available");return}try{let F;f.dueDate&&(F=new Date(f.dueDate).toISOString());const ee={title:f.title,description:f.description||void 0,status:"PENDING",priority:f.priority,dueDate:F,assignedTo:f.assignedTo===""?void 0:f.assignedTo,createdBy:a.id};await cs.create(ee),M.success("Task created successfully"),u(!1),y({title:"",description:"",dueDate:"",priority:"MEDIUM",assignedTo:""}),z()}catch(F){M.error(F?.response?.data?.message||"Failed to create task")}},J=async F=>{try{F.status==="COMPLETED"?(await cs.update(Number(F.id),{status:"PENDING"}),M.success("Task reopened")):(await cs.complete(Number(F.id)),M.success("Task completed")),z()}catch{M.error("Failed to update task")}},ae=async F=>{if(window.confirm("Are you sure you want to delete this task?"))try{await cs.remove(Number(F.id)),M.success("Task deleted successfully"),z()}catch{M.error("Failed to delete task")}},ne=F=>{e(`/tasks/${F.id}`)},re=F=>{e(`/tasks/${F.id}`)},L=s.filter(F=>{const ee=p===""||F.title?.toLowerCase().includes(p.toLowerCase())||F.description?.toLowerCase().includes(p.toLowerCase()),Z=j==="ALL"||F.status===j,U=N==="ALL"||F.priority===N;return ee&&Z&&U}),G=F=>{const ee={PENDING:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",IN_PROGRESS:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",COMPLETED:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",CANCELLED:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"};return ee[F]||ee.PENDING},T=F=>{const ee={URGENT:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",HIGH:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300",MEDIUM:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",LOW:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"};return ee[F]||ee.MEDIUM},_=()=>L.map(ee=>[ee.title||"",ee.status||"",ee.priority||"",ee.dueDate?new Date(ee.dueDate).toLocaleDateString():"",ee.assignedToUser?`${ee.assignedToUser.firstName} ${ee.assignedToUser.lastName}`:"",ee.lead?`${ee.lead.firstName} ${ee.lead.lastName}`:"",ee.createdByUser?`${ee.createdByUser.firstName} ${ee.createdByUser.lastName}`:""]);return t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx(Sd,{title:"Task Management",subtitle:"Manage and track all your tasks",addLabel:"New Task",onAdd:()=>u(F=>!F),bulkActions:[{label:"Export Tasks (Excel)",icon:t.jsx(Uo,{className:"w-4 h-4"}),onClick:()=>{const F=["Title","Status","Priority","Due Date","Assigned To","Lead","Created By"],ee=_();Cd("tasks_export.csv",F,ee)}},{label:"Export Tasks (PDF)",icon:t.jsx(Lt,{className:"w-4 h-4"}),onClick:()=>{const F=["Title","Status","Priority","Due Date","Assigned To","Lead","Created By"],ee=_();hx("Tasks",F,ee)}}]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Search"}),t.jsxs("div",{className:"relative",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),t.jsx("input",{type:"text",placeholder:"Search tasks...",value:p,onChange:F=>b(F.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-weconnect-red dark:text-white text-sm"})]})]}),t.jsx("div",{className:"w-full sm:w-48 sm:min-w-[200px]",children:t.jsx(Yr,{label:"Status",value:j,onChange:F=>v(F),options:[{value:"ALL",label:"All Status"},{value:"PENDING",label:"Pending"},{value:"IN_PROGRESS",label:"In Progress"},{value:"COMPLETED",label:"Completed"},{value:"CANCELLED",label:"Cancelled"}]})}),t.jsx("div",{className:"w-full sm:w-48 sm:min-w-[200px]",children:t.jsx(Yr,{label:"Priority",value:N,onChange:F=>k(F),options:[{value:"ALL",label:"All Priority"},{value:"URGENT",label:"Urgent"},{value:"HIGH",label:"High"},{value:"MEDIUM",label:"Medium"},{value:"LOW",label:"Low"}]})}),t.jsxs("div",{className:"hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto",children:[t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${E==="list"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>C("list"),title:"List view",children:t.jsx(gi,{className:"w-4 h-4"})}),t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${E==="card"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>C("card"),title:"Card view",children:t.jsx(mi,{className:"w-4 h-4"})})]})]})]}),c&&t.jsxs(Ee,{className:"p-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Title"}),t.jsx(Lc,{value:f.title,onChange:F=>y({...f,title:F.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Due Date"}),t.jsx("input",{type:"date",value:f.dueDate,onChange:F=>y({...f,dueDate:F.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Description"}),t.jsx("textarea",{value:f.description,onChange:F=>y({...f,description:F.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Priority"}),t.jsxs("select",{value:f.priority,onChange:F=>y({...f,priority:F.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700",children:[t.jsx("option",{value:"URGENT",children:"Urgent"}),t.jsx("option",{value:"HIGH",children:"High"}),t.jsx("option",{value:"MEDIUM",children:"Medium"}),t.jsx("option",{value:"LOW",children:"Low"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Assign To"}),t.jsxs("select",{value:f.assignedTo??"",onChange:F=>y({...f,assignedTo:F.target.value?Number(F.target.value):""}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700",children:[t.jsx("option",{value:"",children:"Unassigned"}),m.map(F=>t.jsxs("option",{value:F.id,children:[F.firstName," ",F.lastName]},F.id))]})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[t.jsx(me,{variant:"OUTLINE",onClick:()=>u(!1),children:"Cancel"}),t.jsx(me,{onClick:q,children:"Create Task"})]})]}),E==="card"?t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 p-6",children:i?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-weconnect-red border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading tasks..."})]}):L.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(bb,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"No tasks found"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p||j!=="ALL"||N!=="ALL"?"Try adjusting your filters":"Create your first task to get started"})]}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:L.map(F=>t.jsxs("div",{className:"rounded-lg border shadow-sm hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 cursor-pointer",onClick:()=>e(`/tasks/${F.id}`),children:[t.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("button",{onClick:ee=>{ee.stopPropagation(),J(F)},className:"flex-shrink-0",title:F.status==="COMPLETED"?"Reopen task":"Complete task",children:F.status==="COMPLETED"?t.jsx(ct,{className:"text-green-600 dark:text-green-400",size:20}):t.jsx(Yt,{className:"text-gray-400 dark:text-gray-500",size:20})}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${G(F.status)}`,children:F.status.replace("_"," ")}),t.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${T(F.priority)}`,children:F.priority})]})]}),t.jsx("h3",{className:`text-sm font-bold text-gray-900 dark:text-white ${F.status==="COMPLETED"?"line-through":""}`,children:F.title})]}),t.jsxs("div",{className:"p-4 space-y-2",children:[F.description&&t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2",children:F.description}),F.dueDate&&t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[t.jsx(Xh,{size:12}),"Due: ",new Date(F.dueDate).toLocaleDateString()]}),F.assignedToUser&&t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[t.jsx(xt,{size:12}),F.assignedToUser.firstName," ",F.assignedToUser.lastName]}),F.lead&&t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Lead: ",F.lead.firstName," ",F.lead.lastName]}),t.jsxs("div",{className:"flex items-center justify-end gap-1 pt-2 border-t border-gray-100 dark:border-gray-700 mt-2",children:[t.jsx("button",{onClick:ee=>{ee.stopPropagation(),re(F)},className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"View Task",children:t.jsx(Bt,{className:"h-4 w-4"})}),t.jsx("button",{onClick:ee=>{ee.stopPropagation(),ne(F)},className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Edit Task",children:t.jsx(er,{className:"h-4 w-4"})}),t.jsx("button",{onClick:ee=>{ee.stopPropagation(),ae(F)},className:"p-1.5 text-red-600 hover:text-red-900 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete task",children:t.jsx(ht,{className:"h-4 w-4"})})]})]})]},F.id))})}):t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700",children:[t.jsx(to,{currentPage:D,itemsPerPage:H,totalItems:L.length,onItemsPerPageChange:F=>{W(F),I(1)},columnConfig:{columns:[{id:"title",label:"Title"},{id:"status",label:"Status"},{id:"priority",label:"Priority"},{id:"dueDate",label:"Due Date"},{id:"assignedTo",label:"Assigned To"},{id:"lead",label:"Lead"},{id:"createdBy",label:"Created By"}],visibleColumns:S,onChange:P,minVisible:1}}),t.jsx("div",{className:"p-6",children:i?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-weconnect-red border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading tasks..."})]}):L.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(bb,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"No tasks found"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p||j!=="ALL"||N!=="ALL"?"Try adjusting your filters":"Create your first task to get started"})]}):t.jsx("div",{className:"space-y-3",children:L.map(F=>t.jsxs("div",{className:"flex items-start justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",onClick:()=>e(`/tasks/${F.id}`),children:[t.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[t.jsx("button",{onClick:ee=>{ee.stopPropagation(),J(F)},className:"mt-1 flex-shrink-0",title:F.status==="COMPLETED"?"Reopen task":"Complete task",children:F.status==="COMPLETED"?t.jsx(ct,{className:"text-green-600 dark:text-green-400",size:20}):t.jsx(Yt,{className:"text-gray-400 dark:text-gray-500",size:20})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("h3",{className:`text-base font-semibold ${F.status==="COMPLETED"?"line-through text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:F.title}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${G(F.status)}`,children:F.status.replace("_"," ")}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${T(F.priority)}`,children:F.priority})]}),F.description&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:F.description}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[F.dueDate&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Xh,{size:14}),"Due: ",new Date(F.dueDate).toLocaleDateString()]}),F.assignedToUser&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(xt,{size:14}),F.assignedToUser.firstName," ",F.assignedToUser.lastName]}),F.lead&&t.jsxs("span",{className:"flex items-center gap-1",children:["Lead: ",F.lead.firstName," ",F.lead.lastName]}),F.createdByUser&&t.jsxs("span",{className:"flex items-center gap-1",children:["Created by: ",F.createdByUser.firstName," ",F.createdByUser.lastName]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-1 ml-4",children:[t.jsx("button",{onClick:ee=>{ee.stopPropagation(),re(F)},className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"View Task",children:t.jsx(Bt,{className:"h-4 w-4"})}),t.jsx("button",{onClick:ee=>{ee.stopPropagation(),ne(F)},className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Edit Task",children:t.jsx(er,{className:"h-4 w-4"})}),t.jsx("button",{onClick:ee=>{ee.stopPropagation(),ae(F)},className:"p-1.5 text-red-600 hover:text-red-900 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete task",children:t.jsx(ht,{className:"h-4 w-4"})})]})]},F.id))})})]})]})},Woe=()=>{const{id:e}=ui(),r=mt(),{user:a}=xr(),[s,n]=h.useState(null),[i,o]=h.useState(!0),[c,u]=h.useState(null),[m,g]=h.useState(!1);h.useEffect(()=>{e&&f()},[e]);const f=async()=>{try{o(!0),u(null);const j=await cs.get(Number(e)),v=j?.data?.task||j?.task;v?n(v):u("Task not found")}catch(j){console.error("Error fetching task:",j),u(j?.response?.data?.message||"Failed to load task"),M.error(j?.response?.data?.message||"Failed to load task")}finally{o(!1)}},y=async()=>{if(s)try{g(!0),s.status==="COMPLETED"?(await cs.update(s.id,{status:"PENDING"}),M.success("Task reopened")):(await cs.complete(s.id),M.success("Task completed")),f()}catch(j){M.error(j?.response?.data?.message||"Failed to update task")}finally{g(!1)}},p=j=>{const v={PENDING:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",IN_PROGRESS:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",COMPLETED:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",CANCELLED:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"};return v[j]||v.PENDING},b=j=>{const v={URGENT:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",HIGH:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300",MEDIUM:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",LOW:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"};return v[j]||v.MEDIUM};return i?t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:t.jsx("div",{className:"mx-auto px-6 py-6",children:t.jsx("div",{className:"flex items-center justify-center h-96",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-weconnect-red"})})})}):c||!s?t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:t.jsx("div",{className:"mx-auto px-6 py-6",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-12 text-center shadow-sm",children:[t.jsx(ur,{className:"h-20 w-20 text-weconnect-red mx-auto mb-6"}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:c||"Task not found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8 text-lg",children:"The task you're looking for doesn't exist or you don't have permission to view it."}),t.jsx(me,{variant:"PRIMARY",onClick:()=>r("/task-management"),className:"px-8 py-3",children:"Back to Tasks"})]})})}):t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:t.jsx("div",{className:"mx-auto px-6",children:t.jsxs("div",{className:"py-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx($a,{to:"/task-management"}),t.jsx("div",{className:"flex items-center space-x-3",children:t.jsx(me,{variant:s.status==="COMPLETED"?"SECONDARY":"PRIMARY",onClick:y,disabled:m,className:"flex items-center gap-2",children:s.status==="COMPLETED"?t.jsxs(t.Fragment,{children:[t.jsx(Yt,{className:"h-4 w-4"}),"Reopen Task"]}):t.jsxs(t.Fragment,{children:[t.jsx(ct,{className:"h-4 w-4"}),"Complete Task"]})})})]}),t.jsxs("div",{className:"flex items-start space-x-6",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:`h-20 w-20 rounded-2xl flex items-center justify-center shadow-lg ${s.status==="COMPLETED"?"bg-green-500":s.status==="IN_PROGRESS"?"bg-blue-500":"bg-yellow-500"}`,children:s.status==="COMPLETED"?t.jsx(ct,{className:"h-10 w-10 text-white"}):t.jsx(Yt,{className:"h-10 w-10 text-white"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-3",children:s.title}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[t.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-xl text-sm font-medium ${p(s.status)}`,children:s.status.replace("_"," ")}),t.jsxs("span",{className:`inline-flex items-center px-4 py-2 rounded-xl text-sm font-medium ${b(s.priority)}`,children:[t.jsx(Jh,{className:"h-4 w-4 mr-2"}),s.priority," Priority"]})]}),s.description&&t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:s.description})]})]})]})})}),t.jsx("div",{className:"mx-auto px-6",children:t.jsx("div",{className:"py-6 space-y-6",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs(Ee,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Task Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Status"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${p(s.status)}`,children:s.status.replace("_"," ")})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Priority"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${b(s.priority)}`,children:s.priority})})]}),s.dueDate&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Due Date"}),t.jsxs("p",{className:"text-sm text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(Xh,{className:"h-4 w-4"}),new Date(s.dueDate).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),s.completedAt&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Completed At"}),t.jsxs("p",{className:"text-sm text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(ct,{className:"h-4 w-4 text-green-600"}),new Date(s.completedAt).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Created At"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Last Updated"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(s.updatedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),s.lead&&t.jsxs(Ee,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Related Lead"}),t.jsx(me,{variant:"SECONDARY",size:"SM",onClick:()=>r(`/leads/${s.lead?.id}`),children:"View Lead"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Name"}),t.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[s.lead.firstName," ",s.lead.lastName]})]}),s.lead.email&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Email"}),t.jsxs("p",{className:"text-sm text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(ir,{className:"h-4 w-4"}),s.lead.email]})]}),s.lead.phone&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Phone"}),t.jsxs("p",{className:"text-sm text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(ba,{className:"h-4 w-4"}),s.lead.phone]})]}),s.lead.company&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Company"}),t.jsxs("p",{className:"text-sm text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx($i,{className:"h-4 w-4"}),s.lead.company]})]})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[s.assignedUser&&t.jsxs(Ee,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Assigned To"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-12 w-12 rounded-full bg-weconnect-red flex items-center justify-center",children:t.jsxs("span",{className:"text-white font-bold",children:[s.assignedUser.firstName[0],s.assignedUser.lastName[0]]})}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[s.assignedUser.firstName," ",s.assignedUser.lastName]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Assigned User"})]})]})]}),s.createdByUser&&t.jsxs(Ee,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Created By"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-500 flex items-center justify-center",children:t.jsxs("span",{className:"text-white font-bold",children:[s.createdByUser.firstName[0],s.createdByUser.lastName[0]]})}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[s.createdByUser.firstName," ",s.createdByUser.lastName]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Creator"})]})]})]}),t.jsxs(Ee,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(me,{variant:s.status==="COMPLETED"?"SECONDARY":"PRIMARY",fullWidth:!0,onClick:y,disabled:m,children:s.status==="COMPLETED"?"Reopen Task":"Complete Task"}),s.lead&&t.jsx(me,{variant:"SECONDARY",fullWidth:!0,onClick:()=>r(`/leads/${s.lead?.id}`),children:"View Lead Profile"})]})]})]})]})})})]})},dn={list:async e=>{const r=new URLSearchParams;e.page&&r.append("page",String(e.page)),e.limit&&r.append("limit",String(e.limit)),e.status&&r.append("status",e.status),e.search&&r.append("search",e.search),e.submittedBy&&r.append("submittedBy",String(e.submittedBy)),e.startDate&&r.append("startDate",e.startDate),e.endDate&&r.append("endDate",e.endDate),e.type&&r.append("type",e.type),e.projectId&&r.append("projectId",String(e.projectId)),e.dealId&&r.append("dealId",String(e.dealId)),e.leadId&&r.append("leadId",String(e.leadId)),e.currency&&r.append("currency",e.currency);const a=`/expenses?${r.toString()}`;return(await oe.get(a)).data},get:async e=>(await oe.get(`/expenses/${e}`)).data,create:async e=>(await oe.post("/expenses",e)).data,update:async(e,r)=>(await oe.put(`/expenses/${e}`,r)).data,approve:async(e,r)=>(await oe.put(`/expenses/${e}/approve`,r)).data,remove:async e=>(await oe.delete(`/expenses/${e}`)).data,getStats:async e=>{const r=new URLSearchParams;e&&r.append("userId",String(e));const a=`/expenses/stats${r.toString()?`?${r.toString()}`:""}`;return(await oe.get(a)).data},uploadReceipt:async(e,r,a)=>{const s=new FormData;return s.append("file",r),s.append("entityType","expense"),s.append("entityId",String(e)),a&&s.append("name",a),(await oe.post("/files/upload",s,{headers:{"Content-Type":"multipart/form-data"}})).data}},Voe=()=>{const[e,r]=h.useState([]),[a,s]=h.useState(!0),[n,i]=h.useState(null),[o,c]=h.useState("list"),[u,m]=h.useState([]),[g,f]=h.useState(null),[y,p]=h.useState(!1),[b,j]=h.useState({}),[v,N]=h.useState(!1),[k,E]=h.useState({expenseDate:new Date().toISOString().split("T")[0],amount:0,type:"TRAVEL",description:"",remarks:"",receiptUrl:"",submittedBy:0,currency:"USD"}),[C,S]=h.useState(null),{user:P,hasPermission:D,hasRole:I}=xr(),{formatCurrency:H,currencySettings:W}=Hr(),{searchValue:K,debouncedSearchValue:B,setSearch:z,isSearching:q}=dd("",500),[J,ae]=h.useState("createdAt"),[ne,re]=h.useState("desc"),[L,G]=h.useState("ALL"),[T,_]=h.useState("ALL"),[F,ee]=h.useState("ALL"),[Z,U]=h.useState(1),[X,Q]=h.useState(10),[V,ge]=h.useState(["type","amount","expenseDate","submittedBy","status","createdAt"]),Te=["TRAVEL","MEALS","ACCOMMODATION","OFFICE_SUPPLIES","UTILITIES","MARKETING","ENTERTAINMENT","TRAINING","EQUIPMENT","SOFTWARE","CONSULTING","MISCELLANEOUS","OTHER"];h.useEffect(()=>{xe()},[]),h.useEffect(()=>{try{const R=localStorage.getItem("expenses_visible_columns");if(R){const ce=JSON.parse(R);Array.isArray(ce)&&ce.every(de=>typeof de=="string")&&ge(ce)}}catch{}},[]),h.useEffect(()=>{try{localStorage.setItem("expenses_visible_columns",JSON.stringify(V))}catch{}},[V]),h.useEffect(()=>{U(1)},[B,J,ne,L,T,F,X]);const xe=async()=>{try{s(!0),i(null);const R=await dn.list({page:1,limit:100,search:B||void 0,status:L!=="ALL"?L:void 0,type:T!=="ALL"?T:void 0,currency:F!=="ALL"?F:void 0});if(R.success){const ce=R.data||{},de=Array.isArray(ce)?ce:ce.items||ce.expenses||[];r(de)}}catch(R){console.error("Error fetching expenses:",R),i(R.response?.data?.message||"Failed to fetch expenses"),r([])}finally{s(!1)}},se=[...e.filter(R=>{const ce=B.toLowerCase(),de=!ce||R.type.toLowerCase().includes(ce)||(R.description?.toLowerCase().includes(ce)??!1)||(R.submittedByUser?.firstName.toLowerCase().includes(ce)??!1)||(R.submittedByUser?.lastName.toLowerCase().includes(ce)??!1),ue=L==="ALL"||R.status===L,Pe=T==="ALL"||R.type===T,pe=F==="ALL"||R.currency===F;return de&&ue&&Pe&&pe})].sort((R,ce)=>{const de=ne==="asc"?1:-1,ue=ve=>{switch(J){case"expenseDate":return ve.expenseDate||"";case"amount":return ve.amount||0;case"type":return ve.type||"";case"status":return ve.status||"";case"submittedBy":return(ve.submittedByUser?`${ve.submittedByUser.firstName} ${ve.submittedByUser.lastName}`:"").toLowerCase();case"createdAt":default:return ve.createdAt||""}},Pe=ue(R),pe=ue(ce);return J==="amount"?(Pe-pe)*de:J==="createdAt"||J==="expenseDate"?(new Date(Pe).getTime()-new Date(pe).getTime())*de:String(Pe).localeCompare(String(pe))*de}),De=R=>{ae(ce=>ce===R?(re(de=>de==="asc"?"desc":"asc"),ce):(re("asc"),R))},Me=se.length,Ct=Math.max(1,Math.ceil(Me/X)),Dt=(Z-1)*X,Mt=Dt+X,jt=se.slice(Dt,Mt),le=R=>V.includes(R),Xe=R=>{const ce={PENDING:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",APPROVED:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",REJECTED:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300",REIMBURSED:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"};return ce[R]||ce.PENDING},Ke=R=>{switch(R){case"APPROVED":return t.jsx(ct,{className:"text-green-600 dark:text-green-400",size:14});case"REJECTED":return t.jsx(va,{className:"text-red-600 dark:text-red-400",size:14});case"REIMBURSED":return t.jsx(ct,{className:"text-blue-600 dark:text-blue-400",size:14});default:return t.jsx(Yt,{className:"text-yellow-600 dark:text-yellow-400",size:14})}},Ne=R=>({TRAVEL:"",MEALS:"",ACCOMMODATION:"",OFFICE_SUPPLIES:"",UTILITIES:"",MARKETING:"",ENTERTAINMENT:"",TRAINING:"",EQUIPMENT:"",SOFTWARE:"",CONSULTING:"",MISCELLANEOUS:"",OTHER:""})[R]||"",Nt=async()=>{if(!k.expenseDate){M.error("Expense date is required");return}if(!k.amount||k.amount<=0){M.error("Amount must be greater than 0");return}if(!P?.id){M.error("User information not available");return}try{let R=k.expenseDate;R&&!R.includes("T")?R=new Date(R+"T00:00:00").toISOString():R&&(R=new Date(R).toISOString());const ce={expenseDate:R,amount:k.amount,type:k.type,description:k.description||void 0,remarks:k.remarks||void 0,submittedBy:P.id,currency:k.currency||"USD"},de=await dn.create(ce),ue=de?.data?.expense||de?.data||de?.expense;if(C&&ue?.id)try{const Pe=await dn.uploadReceipt(ue.id,C,`receipt-${ue.id}`),pe=Pe?.data?.file||Pe?.file,ve=pe?.id?`/files/${pe.id}/download?disposition=inline`:pe?.filePath;ve&&await dn.update(ue.id,{receiptUrl:ve})}catch(Pe){console.error("Receipt upload failed:",Pe),M.warn("Expense created, but receipt upload failed")}M.success("Expense created successfully"),N(!1),S(null),E({expenseDate:new Date().toISOString().split("T")[0],amount:0,type:"TRAVEL",description:"",remarks:"",receiptUrl:"",submittedBy:P.id,currency:"USD"}),xe()}catch(R){console.error("Error creating expense:",R);const ce=R?.response?.data?.message||R?.response?.data?.error||R?.message||"Failed to create expense";M.error(ce)}},_t=R=>{f(R),p(!1),j({expenseDate:new Date(R.expenseDate).toISOString().split("T")[0],amount:R.amount,type:R.type,description:R.description,remarks:R.remarks,currency:R.currency,submittedBy:R.submittedByUser?.id||P?.id||0,dealId:R.deal?.id,leadId:R.lead?.id})},vt=async()=>{if(g)try{await dn.update(g.id,{...b,expenseDate:b.expenseDate?new Date(b.expenseDate).toISOString():void 0}),M.success("Expense updated"),p(!1),xe()}catch(R){M.error(R?.response?.data?.message||"Failed to update expense")}},Ot=async()=>{if(g&&confirm("Are you sure you want to delete this expense?"))try{await dn.remove(g.id),M.success("Expense deleted"),f(null),xe()}catch(R){M.error(R?.response?.data?.message||"Failed to delete expense")}};return a?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[t.jsx("div",{className:"space-y-4",children:t.jsx(Sd,{title:"Expenses",subtitle:"Track and manage your expenses",addLabel:"Add Expense",onAdd:D("expense.create")||I("Admin")?()=>N(!0):void 0,bulkActions:[{label:"Export Expenses (Excel)",icon:t.jsx(Uo,{className:"w-4 h-4"}),onClick:()=>{const ce=[{id:"type",label:"Type",value:Pe=>Pe.type.replace("_"," ")},{id:"amount",label:"Amount",value:Pe=>H(Pe.amount,Pe.currency)},{id:"expenseDate",label:"Expense Date",value:Pe=>new Date(Pe.expenseDate).toLocaleDateString()},{id:"submittedBy",label:"Submitted By",value:Pe=>Pe.submittedByUser?`${Pe.submittedByUser.firstName} ${Pe.submittedByUser.lastName}`:""},{id:"status",label:"Status",value:Pe=>Pe.status},{id:"createdAt",label:"Created",value:Pe=>new Date(Pe.createdAt).toLocaleDateString()}].filter(Pe=>V.includes(Pe.id)),de=ce.map(Pe=>Pe.label),ue=se.map(Pe=>ce.map(pe=>pe.value(Pe)));Cd("expenses_export.csv",de,ue)}},{label:"Export Expenses (PDF)",icon:t.jsx(Lt,{className:"w-4 h-4"}),onClick:()=>{const ce=[{id:"type",label:"Type",value:Pe=>Pe.type.replace("_"," ")},{id:"amount",label:"Amount",value:Pe=>H(Pe.amount,Pe.currency)},{id:"expenseDate",label:"Expense Date",value:Pe=>new Date(Pe.expenseDate).toLocaleDateString()},{id:"submittedBy",label:"Submitted By",value:Pe=>Pe.submittedByUser?`${Pe.submittedByUser.firstName} ${Pe.submittedByUser.lastName}`:""},{id:"status",label:"Status",value:Pe=>Pe.status},{id:"createdAt",label:"Created",value:Pe=>new Date(Pe.createdAt).toLocaleDateString()}].filter(Pe=>V.includes(Pe.id)),de=ce.map(Pe=>Pe.label),ue=se.map(Pe=>ce.map(pe=>pe.value(Pe)));hx("Expenses",de,ue)}}]})}),v&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between z-10",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Create New Expense"}),t.jsx("button",{onClick:()=>N(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:""})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Expense Date *"}),t.jsx("input",{type:"date",value:k.expenseDate,onChange:R=>E({...k,expenseDate:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Amount *"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500 font-medium text-xs",children:W?.symbol||"$"}),t.jsx("input",{type:"number",step:"0.01",min:"0",value:k.amount,onChange:R=>E({...k,amount:parseFloat(R.target.value)||0}),className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type *"}),t.jsx("select",{value:k.type,onChange:R=>E({...k,type:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white",required:!0,children:Te.map(R=>t.jsxs("option",{value:R,children:[Ne(R)," ",R.replace("_"," ")]},R))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Currency"}),t.jsxs("select",{value:k.currency,onChange:R=>E({...k,currency:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white",children:[t.jsx("option",{value:"USD",children:"USD"}),t.jsx("option",{value:"EUR",children:"EUR"}),t.jsx("option",{value:"GBP",children:"GBP"}),t.jsx("option",{value:"INR",children:"INR"})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Upload Receipt"}),t.jsx("input",{type:"file",accept:"image/*,application/pdf",onChange:R=>S(R.target.files?.[0]||null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),t.jsx("textarea",{value:k.description,onChange:R=>E({...k,description:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white",rows:3})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Remarks"}),t.jsx("textarea",{value:k.remarks,onChange:R=>E({...k,remarks:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white",rows:2})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[t.jsx(me,{variant:"OUTLINE",onClick:()=>N(!1),children:"Cancel"}),t.jsx(me,{onClick:Nt,children:"Create Expense"})]})]})]})}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4 flex-1",children:[t.jsxs("div",{className:"",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t.jsxs("div",{className:"flex items-center gap-2",children:["Search",q&&t.jsx("span",{className:"text-xs text-blue-500 flex items-center gap-1",children:"Searching..."})]})}),t.jsx(kd,{value:K,onChange:z,placeholder:"Search expenses...",className:"max-w-full"})]}),t.jsx("div",{className:"w-full sm:w-48 sm:min-w-[220px]",children:t.jsx(Yr,{label:"Status",value:L,onChange:R=>G(R),options:[{value:"ALL",label:"All statuses"},{value:"PENDING",label:"Pending"},{value:"APPROVED",label:"Approved"},{value:"REJECTED",label:"Rejected"},{value:"REIMBURSED",label:"Reimbursed"}]})}),t.jsx("div",{className:"w-full sm:w-48 sm:min-w-[220px]",children:t.jsx(Yr,{label:"Type",value:T,onChange:R=>_(R),options:[{value:"ALL",label:"All types"},...Te.map(R=>({value:R,label:`${Ne(R)} ${R.replace("_"," ")}`}))]})}),t.jsx("div",{className:"w-full sm:w-48 sm:min-w-[220px]",children:t.jsx(Yr,{label:"Currency",value:F,onChange:R=>ee(R),options:[{value:"ALL",label:"All currencies"},{value:"USD",label:"USD"},{value:"EUR",label:"EUR"},{value:"GBP",label:"GBP"},{value:"INR",label:"INR"}]})}),t.jsx("div",{className:"w-full sm:w-48 sm:min-w-[220px]",children:t.jsx(Yr,{label:"Sort by",value:J,onChange:R=>ae(R),options:[{value:"createdAt",label:"Created date"},{value:"expenseDate",label:"Expense date"},{value:"amount",label:"Amount"},{value:"type",label:"Type"},{value:"status",label:"Status"},{value:"submittedBy",label:"Submitted By"}]})}),t.jsx("div",{className:"w-full sm:w-48 sm:min-w-[200px]",children:t.jsx(Yr,{label:"Order",value:ne,onChange:R=>re(R),options:[{value:"asc",label:"Ascending"},{value:"desc",label:"Descending"}]})}),t.jsx("div",{className:"w-full sm:w-48 sm:min-w-[200px]",children:t.jsx(Yr,{label:"Items per page",value:String(X),onChange:R=>Q(Number(R)),options:[{value:"5",label:"5"},{value:"10",label:"10"},{value:"20",label:"20"},{value:"50",label:"50"}]})})]}),t.jsxs("div",{className:"hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto",children:[t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${o==="list"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>c("list"),title:"List view",children:t.jsx(gi,{className:"w-4 h-4"})}),t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${o==="grid"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>c("grid"),title:"Grid view",children:t.jsx(mi,{className:"w-4 h-4"})})]})]}),n&&t.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:t.jsx("p",{className:"text-red-600 dark:text-red-400",children:n})}),o==="grid"?t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 transition-all duration-300 p-6",children:[jt.length===0?t.jsx(qr,{title:"No expenses found",description:K?"No expenses match your search criteria.":"Get started by creating your first expense.",icon:t.jsx(Hs,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),showClearButton:!!K,onClear:()=>z("")}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:jt.map(R=>t.jsxs("div",{className:"rounded-lg border shadow-sm hover:shadow-md transition-all duration-200 flex flex-col bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",style:{minHeight:"280px"},children:[t.jsx("div",{className:"px-4 pt-4 pb-2",children:t.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-md text-xs font-medium ${Xe(R.status)}`,children:[Ke(R.status),R.status]})}),t.jsxs("div",{className:"px-4 pb-3 flex-1",children:[t.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2 cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors",onClick:()=>_t(R),children:[Ne(R.type)," ",R.type.replace("_"," ")]}),R.description&&t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:R.description}),t.jsx("div",{className:"flex items-center text-sm font-semibold text-green-600 dark:text-green-400 mb-3",children:t.jsx("span",{className:"truncate",children:H(R.amount,R.currency)})}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center",children:[t.jsx(nr,{className:"h-3 w-3 mr-1.5 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:new Date(R.expenseDate).toLocaleDateString()})]}),R.submittedByUser&&t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center",children:[t.jsx(xt,{className:"h-3 w-3 mr-1.5 flex-shrink-0"}),t.jsxs("span",{className:"truncate",children:[R.submittedByUser.firstName," ",R.submittedByUser.lastName]})]}),R.approvedByUser&&t.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 flex items-center",children:[t.jsx(ct,{className:"h-3 w-3 mr-1.5 flex-shrink-0"}),t.jsxs("span",{className:"truncate",children:["Approved by ",R.approvedByUser.firstName]})]})]})]}),t.jsx("div",{className:"px-4 pb-4 pt-3 border-t border-gray-100 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[R.receiptUrl&&t.jsx("button",{onClick:()=>window.open(R.receiptUrl,"_blank"),className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"View Receipt",children:t.jsx(Li,{className:"h-4 w-4"})}),t.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[(D("expense.read")||I("Admin"))&&t.jsx("button",{onClick:ce=>{ce.stopPropagation(),_t(R)},className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"View Expense",children:t.jsx(Bt,{className:"h-4 w-4"})}),(D("expense.approve")||I("Admin"))&&R.status==="PENDING"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:async ce=>{ce.stopPropagation();const de=prompt("Approval remarks");try{await dn.approve(R.id,{status:"APPROVED",reviewedBy:P.id,approvalRemarks:de||void 0}),M.success("Expense approved"),xe()}catch(ue){M.error(ue?.response?.data?.message||"Approval failed")}},className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",title:"Approve",children:t.jsx(ct,{className:"h-4 w-4"})}),t.jsx("button",{onClick:async ce=>{ce.stopPropagation();const de=prompt("Rejection remarks");try{await dn.approve(R.id,{status:"REJECTED",reviewedBy:P.id,approvalRemarks:de||void 0}),M.success("Expense rejected"),xe()}catch(ue){M.error(ue?.response?.data?.message||"Rejection failed")}},className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Reject",children:t.jsx(va,{className:"h-4 w-4"})})]}),(D("expense.update")||I("Admin"))&&R.status==="PENDING"&&t.jsx("button",{onClick:ce=>{ce.stopPropagation(),_t(R),p(!0)},className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",title:"Edit Expense",children:t.jsx(er,{className:"h-4 w-4"})}),(D("expense.delete")||I("Admin"))&&t.jsx("button",{onClick:async ce=>{if(ce.stopPropagation(),!!confirm("Delete this expense?"))try{await dn.remove(R.id),r(de=>de.filter(ue=>ue.id!==R.id)),M.success("Expense deleted")}catch{M.error("Failed to delete")}},className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete Expense",children:t.jsx(ht,{className:"h-4 w-4"})})]})]})})]},R.id))}),Me>0&&t.jsx("div",{className:"mt-6",children:t.jsx(zn,{currentPage:Z,totalPages:Ct,totalItems:Me,itemsPerPage:X,onPageChange:R=>U(R)})})]}):t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 transition-all duration-300",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"mb-4",children:t.jsx(to,{currentPage:Z,itemsPerPage:X,totalItems:Me,onItemsPerPageChange:R=>Q(R),columnConfig:{columns:[{id:"type",label:"Type"},{id:"amount",label:"Amount"},{id:"expenseDate",label:"Date"},{id:"submittedBy",label:"Submitted By"},{id:"status",label:"Status"},{id:"createdAt",label:"Created"}],visibleColumns:V,onChange:ge,minVisible:1}})}),t.jsx("div",{className:"overflow-hidden relative",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 mobile-card-view table-fixed",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3",children:t.jsx("input",{type:"checkbox",checked:jt.length>0&&jt.every(R=>u.includes(R.id)),onChange:R=>{const ce=jt.map(de=>de.id);m(R.target.checked?Array.from(new Set([...u,...ce])):u.filter(de=>!ce.includes(de)))}})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${le("type")?"":"hidden"}`,children:t.jsx(ya,{label:"Type",column:"type",sortBy:J,sortOrder:ne,onChange:R=>De(R)})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${le("amount")?"":"hidden"}`,children:t.jsx(ya,{label:"Amount",column:"amount",sortBy:J,sortOrder:ne,onChange:R=>De(R)})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${le("expenseDate")?"":"hidden"}`,children:t.jsx(ya,{label:"Date",column:"expenseDate",sortBy:J,sortOrder:ne,onChange:R=>De(R)})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${le("submittedBy")?"":"hidden"}`,children:t.jsx(ya,{label:"Submitted By",column:"submittedBy",sortBy:J,sortOrder:ne,onChange:R=>De(R)})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${le("status")?"":"hidden"}`,children:t.jsx(ya,{label:"Status",column:"status",sortBy:J,sortOrder:ne,onChange:R=>De(R)})}),t.jsx("th",{className:`px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${le("createdAt")?"":"hidden"}`,children:t.jsx(ya,{label:"Created",column:"createdAt",sortBy:J,sortOrder:ne,onChange:R=>De(R)})}),t.jsx("th",{className:"px-6 py-3 text-end text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:jt.map(R=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[t.jsx("td",{className:"px-4 py-4","data-label":"Select",children:t.jsx("input",{type:"checkbox",checked:u.includes(R.id),onChange:ce=>{m(de=>ce.target.checked?[...de,R.id]:de.filter(ue=>ue!==R.id))}})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${le("type")?"":"hidden"}`,"data-label":"Type",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"text-xl",children:Ne(R.type)}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:R.type.replace("_"," ")}),R.description&&t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-xs",children:R.description})]})]})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${le("amount")?"":"hidden"}`,"data-label":"Amount",children:t.jsx("div",{className:"flex items-center text-sm font-semibold text-green-600 dark:text-green-400",children:H(R.amount,R.currency)})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${le("expenseDate")?"":"hidden"}`,"data-label":"Date",children:t.jsxs("div",{className:"text-sm text-gray-900 dark:text-white flex items-center",children:[t.jsx(nr,{className:"h-3 w-3 mr-1"}),new Date(R.expenseDate).toLocaleDateString()]})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${le("submittedBy")?"":"hidden"}`,"data-label":"Submitted By",children:t.jsxs("div",{className:"text-sm text-gray-900 dark:text-white flex items-center",children:[t.jsx(xt,{className:"h-3 w-3 mr-1"}),R.submittedByUser?`${R.submittedByUser.firstName} ${R.submittedByUser.lastName}`:"-"]})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${le("status")?"":"hidden"}`,"data-label":"Status",children:t.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${Xe(R.status)}`,children:[Ke(R.status),R.status]})}),t.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 ${le("createdAt")?"":"hidden"}`,"data-label":"Created",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(nr,{className:"h-3 w-3 mr-1"}),new Date(R.createdAt).toLocaleDateString()]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-end text-sm font-medium","data-label":"Actions",children:t.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[(D("expense.read")||I("Admin"))&&t.jsx("button",{onClick:()=>_t(R),className:"text-green-600 hover:text-green-900 p-1 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",title:"View Expense",children:t.jsx(Bt,{className:"h-4 w-4"})}),(D("expense.approve")||I("Admin"))&&R.status==="PENDING"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:async()=>{const ce=prompt("Approval remarks");try{await dn.approve(R.id,{status:"APPROVED",reviewedBy:P.id,approvalRemarks:ce||void 0}),M.success("Expense approved"),xe()}catch(de){M.error(de?.response?.data?.message||"Approval failed")}},className:"text-green-600 hover:text-green-900 p-1 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",title:"Approve",children:t.jsx(ct,{className:"h-4 w-4"})}),t.jsx("button",{onClick:async()=>{const ce=prompt("Rejection remarks");try{await dn.approve(R.id,{status:"REJECTED",reviewedBy:P.id,approvalRemarks:ce||void 0}),M.success("Expense rejected"),xe()}catch(de){M.error(de?.response?.data?.message||"Rejection failed")}},className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Reject",children:t.jsx(va,{className:"h-4 w-4"})})]}),(D("expense.update")||I("Admin"))&&R.status==="PENDING"&&t.jsx("button",{onClick:()=>{_t(R),p(!0)},className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Edit Expense",children:t.jsx(er,{className:"h-4 w-4"})}),(D("expense.delete")||I("Admin"))&&t.jsx("button",{className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete Expense",onClick:async()=>{if(confirm("Delete this expense?"))try{await dn.remove(R.id),r(ce=>ce.filter(de=>de.id!==R.id)),M.success("Expense deleted")}catch{M.error("Failed to delete")}},children:t.jsx(ht,{className:"h-4 w-4"})})]})})]},R.id))})]})})}),Me>0&&t.jsx(zn,{currentPage:Z,totalPages:Ct,totalItems:Me,itemsPerPage:X,onPageChange:R=>U(R)})]})}),Me===0&&!a&&t.jsx(qr,{title:"No expenses found",description:K?"No expenses match your search criteria.":"Get started by creating your first expense.",icon:t.jsx(Hs,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"}),showClearButton:!!K,onClear:()=>z("")}),g&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between z-10",children:[t.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(Li,{className:"text-emerald-500",size:24}),"Expense #",g.id]}),t.jsxs("div",{className:"flex gap-2",children:[(D("expense.update")||I("Admin"))&&g.status==="PENDING"&&t.jsxs(me,{variant:"OUTLINE",size:"SM",onClick:()=>p(R=>!R),children:[t.jsx(er,{size:16,className:"mr-2"}),y?"Cancel":"Edit"]}),(D("expense.delete")||I("Admin"))&&t.jsxs(me,{variant:"OUTLINE",size:"SM",onClick:Ot,children:[t.jsx(ht,{size:16,className:"mr-2"}),"Delete"]}),t.jsx(me,{variant:"OUTLINE",size:"SM",onClick:()=>f(null),children:""})]})]}),t.jsx("div",{className:"p-6",children:y?t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Date"}),t.jsx("input",{type:"date",value:b.expenseDate,onChange:R=>j({...b,expenseDate:R.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Amount"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-3 top-3 text-gray-500 font-medium",children:W?.symbol||"$"}),t.jsx("input",{type:"number",step:"0.01",min:"0",value:b.amount??0,onChange:R=>j({...b,amount:parseFloat(R.target.value)||0}),className:"w-full pl-8 pr-4 py-3 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),t.jsx("select",{value:b.type,onChange:R=>j({...b,type:R.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white",children:Te.map(R=>t.jsxs("option",{value:R,children:[Ne(R)," ",R.replace("_"," ")]},R))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Currency"}),t.jsxs("select",{value:b.currency||"USD",onChange:R=>j({...b,currency:R.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white",children:[t.jsx("option",{value:"USD",children:"USD"}),t.jsx("option",{value:"EUR",children:"EUR"}),t.jsx("option",{value:"GBP",children:"GBP"}),t.jsx("option",{value:"INR",children:"INR"})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),t.jsx("textarea",{value:b.description||"",onChange:R=>j({...b,description:R.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white",rows:3})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Remarks"}),t.jsx("textarea",{value:b.remarks||"",onChange:R=>j({...b,remarks:R.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white",rows:2})]}),t.jsxs("div",{className:"md:col-span-2 flex justify-end gap-3",children:[t.jsx(me,{variant:"OUTLINE",onClick:()=>p(!1),children:"Cancel"}),t.jsx(me,{onClick:vt,children:"Save Changes"})]})]}):t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx("div",{className:"md:col-span-2",children:t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx("div",{className:"text-4xl",children:Ne(g.type)}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:g.type.replace("_"," ")}),t.jsxs("span",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold border ${Xe(g.status)}`,children:[Ke(g.status),g.status]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400",children:H(g.amount,g.currency)}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:g.currency})]})]})}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Expense Date"}),t.jsxs("p",{className:"text-lg text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(nr,{size:18,className:"text-emerald-500"}),new Date(g.expenseDate).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Created At"}),t.jsx("p",{className:"text-lg text-gray-900 dark:text-white",children:new Date(g.createdAt).toLocaleString()})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Created By"}),t.jsxs("p",{className:"text-lg text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(xt,{size:18,className:"text-emerald-500"}),g.submittedByUser?`${g.submittedByUser.firstName} ${g.submittedByUser.lastName}`:g.createdByUser?`${g.createdByUser.firstName} ${g.createdByUser.lastName}`:"-"]})]}),g.approvedByUser&&t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Approved By"}),t.jsxs("p",{className:"text-lg text-green-600 dark:text-green-400 flex items-center gap-2",children:[t.jsx(ct,{size:18}),g.approvedByUser.firstName," ",g.approvedByUser.lastName]})]}),g.approvedAt&&t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Approved At"}),t.jsx("p",{className:"text-lg text-gray-900 dark:text-white",children:new Date(g.approvedAt).toLocaleString()})]}),g.rejectedByUser&&t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Rejected By"}),t.jsxs("p",{className:"text-lg text-red-600 dark:text-red-400 flex items-center gap-2",children:[t.jsx(va,{size:18}),g.rejectedByUser.firstName," ",g.rejectedByUser.lastName]})]}),g.description&&t.jsxs("div",{className:"md:col-span-2 space-y-1",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Description"}),t.jsx("p",{className:"text-base text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-900 p-4 rounded-xl",children:g.description})]}),g.remarks&&t.jsxs("div",{className:"md:col-span-2 space-y-1",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Remarks"}),t.jsx("p",{className:"text-base text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-900 p-4 rounded-xl",children:g.remarks})]}),g.receiptUrl&&t.jsx("div",{className:"md:col-span-2",children:t.jsxs(me,{variant:"OUTLINE",onClick:()=>window.open(g.receiptUrl,"_blank"),children:[t.jsx(hs,{size:16,className:"mr-2"}),"View Receipt"]})})]})})]})})]})},Koe=({workflow:e,onClose:r})=>{const a=i=>i.replace(/_/g," ").toLowerCase(),s=i=>i.replace(/_/g," ").toLowerCase(),n=i=>{const o=Object.entries(i.config);return o.length===0?null:t.jsx("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 p-2 rounded",children:o.map(([c,u])=>t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsxs("span",{className:"font-medium capitalize",children:[c,":"]}),t.jsx("span",{className:"break-all",children:String(u)})]},c))})};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:e.isActive?"Active":"Inactive"}),t.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Created ",new Date(e.createdAt).toLocaleDateString()]})]})]}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:t.jsx(da,{className:"h-5 w-5 text-gray-500"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[e.description&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Description"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:e.description})]}),t.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-lg",children:t.jsx(Dl,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Trigger"}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["When ",e.trigger.replace(/_/g," ").toLowerCase()]})]})]})}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700 -z-10"}),t.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800 mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/40 rounded-lg",children:t.jsx(ur,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Conditions"}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Match ",e.conditions.logic.toLowerCase()," of the following"]})]})]}),t.jsx("div",{className:"space-y-2 pl-12",children:e.conditions.conditions.map((i,o)=>t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded border border-gray-200 dark:border-gray-700 text-sm",children:[t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.field}),t.jsx("span",{className:"mx-2 text-gray-500",children:a(i.operator)}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:String(i.value)})]},o))})]}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/40 rounded-lg",children:t.jsx(ct,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Actions"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Execute the following actions"})]})]}),t.jsx("div",{className:"space-y-4 pl-12",children:e.actions.map((i,o)=>t.jsxs("div",{className:"relative bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-2 font-medium text-gray-900 dark:text-white",children:[t.jsx(xm,{className:"h-4 w-4 text-gray-400"}),s(i.type)]}),n(i)]},o))})]})]})]}),t.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 flex justify-end",children:t.jsx("button",{onClick:r,className:"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})})};var On=(e=>(e.LEAD_CREATED="LEAD_CREATED",e.LEAD_UPDATED="LEAD_UPDATED",e.LEAD_STATUS_CHANGED="LEAD_STATUS_CHANGED",e.LEAD_ASSIGNED="LEAD_ASSIGNED",e.DEAL_CREATED="DEAL_CREATED",e.DEAL_UPDATED="DEAL_UPDATED",e.DEAL_STAGE_CHANGED="DEAL_STAGE_CHANGED",e.TASK_CREATED="TASK_CREATED",e.TASK_COMPLETED="TASK_COMPLETED",e))(On||{}),qs=(e=>(e.EQUALS="EQUALS",e.NOT_EQUALS="NOT_EQUALS",e.CONTAINS="CONTAINS",e.NOT_CONTAINS="NOT_CONTAINS",e.GREATER_THAN="GREATER_THAN",e.LESS_THAN="LESS_THAN",e.GREATER_THAN_OR_EQUAL="GREATER_THAN_OR_EQUAL",e.LESS_THAN_OR_EQUAL="LESS_THAN_OR_EQUAL",e.IS_EMPTY="IS_EMPTY",e.IS_NOT_EMPTY="IS_NOT_EMPTY",e))(qs||{}),qh=(e=>(e.AND="AND",e.OR="OR",e))(qh||{}),ra=(e=>(e.ASSIGN_TO_USER="ASSIGN_TO_USER",e.ASSIGN_TO_TEAM="ASSIGN_TO_TEAM",e.CHANGE_STATUS="CHANGE_STATUS",e.SEND_EMAIL="SEND_EMAIL",e.SEND_WHATSAPP="SEND_WHATSAPP",e.CREATE_TASK="CREATE_TASK",e.ADD_TAG="ADD_TAG",e.REMOVE_TAG="REMOVE_TAG",e.UPDATE_FIELD="UPDATE_FIELD",e.SEND_WEBHOOK="SEND_WEBHOOK",e))(ra||{});const Goe={LEAD_CREATED:[{value:"source",label:"Source",category:"Lead Info"},{value:"status",label:"Status",category:"Lead Info"},{value:"city",label:"City",category:"Lead Info"},{value:"budget",label:"Budget",category:"Lead Info"},{value:"email",label:"Email",category:"Contact"},{value:"phone",label:"Phone",category:"Contact"},{value:"company",label:"Company",category:"Contact"},{value:"assignedTo",label:"Assigned To",category:"Assignment"},{value:"createdAt",label:"Created Date",category:"System"}],LEAD_UPDATED:[{value:"source",label:"Source",category:"Lead Info"},{value:"status",label:"Status",category:"Lead Info"},{value:"city",label:"City",category:"Lead Info"},{value:"budget",label:"Budget",category:"Lead Info"},{value:"email",label:"Email",category:"Contact"},{value:"phone",label:"Phone",category:"Contact"},{value:"company",label:"Company",category:"Contact"},{value:"assignedTo",label:"Assigned To",category:"Assignment"},{value:"updatedAt",label:"Updated Date",category:"System"}],LEAD_STATUS_CHANGED:[{value:"status",label:"New Status",category:"Lead Info"},{value:"previousStatus",label:"Previous Status",category:"Lead Info"},{value:"source",label:"Source",category:"Lead Info"},{value:"city",label:"City",category:"Lead Info"},{value:"assignedTo",label:"Assigned To",category:"Assignment"}],LEAD_ASSIGNED:[{value:"assignedTo",label:"Assigned To",category:"Assignment"},{value:"previousAssignee",label:"Previous Assignee",category:"Assignment"},{value:"source",label:"Source",category:"Lead Info"},{value:"status",label:"Status",category:"Lead Info"},{value:"city",label:"City",category:"Lead Info"}],DEAL_CREATED:[{value:"title",label:"Deal Title",category:"Deal Info"},{value:"stage",label:"Stage",category:"Deal Info"},{value:"value",label:"Deal Value",category:"Deal Info"},{value:"probability",label:"Probability (%)",category:"Deal Info"},{value:"expectedCloseDate",label:"Expected Close Date",category:"Deal Info"},{value:"source",label:"Source",category:"Lead Info"},{value:"assignedTo",label:"Assigned To",category:"Assignment"}],DEAL_UPDATED:[{value:"title",label:"Deal Title",category:"Deal Info"},{value:"stage",label:"Stage",category:"Deal Info"},{value:"value",label:"Deal Value",category:"Deal Info"},{value:"probability",label:"Probability (%)",category:"Deal Info"},{value:"expectedCloseDate",label:"Expected Close Date",category:"Deal Info"},{value:"source",label:"Source",category:"Lead Info"},{value:"assignedTo",label:"Assigned To",category:"Assignment"},{value:"updatedAt",label:"Updated Date",category:"System"}],DEAL_STAGE_CHANGED:[{value:"stage",label:"New Stage",category:"Deal Info"},{value:"previousStage",label:"Previous Stage",category:"Deal Info"},{value:"value",label:"Deal Value",category:"Deal Info"},{value:"assignedTo",label:"Assigned To",category:"Assignment"}],TASK_CREATED:[{value:"title",label:"Task Title",category:"Task Info"},{value:"status",label:"Status",category:"Task Info"},{value:"priority",label:"Priority",category:"Task Info"},{value:"dueDate",label:"Due Date",category:"Task Info"},{value:"assignedTo",label:"Assigned To",category:"Assignment"},{value:"createdAt",label:"Created Date",category:"System"}],TASK_COMPLETED:[{value:"status",label:"Status",category:"Task Info"},{value:"completedAt",label:"Completed Date",category:"Task Info"},{value:"priority",label:"Priority",category:"Task Info"},{value:"assignedTo",label:"Assigned To",category:"Assignment"}]},fx=e=>Goe[e]||[],Yoe=e=>fx(e).reduce((a,s)=>(a[s.category]||(a[s.category]=[]),a[s.category].push(s),a),{}),Hh=e=>{switch(e){case"LEAD_CREATED":case"LEAD_UPDATED":return{field:"source",operator:"EQUALS",value:""};case"DEAL_CREATED":case"DEAL_UPDATED":return{field:"stage",operator:"EQUALS",value:""};case"TASK_CREATED":return{field:"priority",operator:"EQUALS",value:""};case"LEAD_STATUS_CHANGED":return{field:"status",operator:"EQUALS",value:""};default:return{field:"status",operator:"EQUALS",value:""}}},nb=e=>{const r=[];if(e.name?.trim()||r.push("Workflow name is required"),e.trigger||r.push("Trigger is required"),e.conditions?.conditions?.length||r.push("At least one condition is required"),e.actions?.length||r.push("At least one action is required"),e.conditions?.conditions&&e.trigger){const a=fx(e.trigger).map(s=>s.value);e.conditions.conditions.forEach((s,n)=>{a.includes(s.field)||r.push(`Condition ${n+1}: Field "${s.field}" is not available for trigger "${e.trigger}"`)})}return{isValid:r.length===0,errors:r}},Cc={async getWorkflows(e=!1){return(await oe.get(`/automation/workflows?includeInactive=${e}`)).data},async getWorkflow(e){return(await oe.get(`/automation/workflows/${e}`)).data},async createWorkflow(e){const r=nb(e);if(!r.isValid)throw new Error(`Validation failed: ${r.errors.join(", ")}`);return(await oe.post("/automation/workflows",e)).data},async updateWorkflow(e,r){if(r.name||r.trigger||r.conditions||r.actions){const s=nb(r);if(!s.isValid)throw new Error(`Validation failed: ${s.errors.join(", ")}`)}return(await oe.patch(`/automation/workflows/${e}`,r)).data},async deleteWorkflow(e){await oe.delete(`/automation/workflows/${e}`)},async toggleWorkflow(e,r){return(await oe.patch(`/automation/workflows/${e}/toggle`,{isActive:r})).data},async executeWorkflow(e,r){return(await oe.post(`/automation/workflows/${e}/execute`,r)).data},async getExecutionHistory(e,r=50){const a=new URLSearchParams;return e&&a.append("workflowId",e.toString()),a.append("limit",r.toString()),(await oe.get(`/automation/executions?${a.toString()}`)).data},getFieldsForTrigger:fx,getGroupedFieldsForTrigger:Yoe,getDefaultCondition:Hh,validateWorkflowPayload:nb},Qoe=[{value:On.LEAD_CREATED,label:"Lead Created"},{value:On.LEAD_UPDATED,label:"Lead Updated"},{value:On.LEAD_STATUS_CHANGED,label:"Lead Status Changed"},{value:On.LEAD_ASSIGNED,label:"Lead Assigned"},{value:On.DEAL_CREATED,label:"Deal Created"},{value:On.DEAL_UPDATED,label:"Deal Updated"},{value:On.DEAL_STAGE_CHANGED,label:"Deal Stage Changed"},{value:On.TASK_CREATED,label:"Task Created"},{value:On.TASK_COMPLETED,label:"Task Completed"}],Xoe=[{value:qs.EQUALS,label:"Equals"},{value:qs.NOT_EQUALS,label:"Not Equals"},{value:qs.CONTAINS,label:"Contains"},{value:qs.NOT_CONTAINS,label:"Does Not Contain"},{value:qs.GREATER_THAN,label:"Greater Than"},{value:qs.LESS_THAN,label:"Less Than"},{value:qs.GREATER_THAN_OR_EQUAL,label:"Greater Than or Equal"},{value:qs.LESS_THAN_OR_EQUAL,label:"Less Than or Equal"},{value:qs.IS_EMPTY,label:"Is Empty"},{value:qs.IS_NOT_EMPTY,label:"Is Not Empty"}],Zoe=[{value:ra.ASSIGN_TO_USER,label:"Assign to User"},{value:ra.ASSIGN_TO_TEAM,label:"Assign to Team"},{value:ra.CHANGE_STATUS,label:"Change Status"},{value:ra.SEND_EMAIL,label:"Send Email"},{value:ra.SEND_WHATSAPP,label:"Send WhatsApp"},{value:ra.CREATE_TASK,label:"Create Task"},{value:ra.ADD_TAG,label:"Add Tag"},{value:ra.REMOVE_TAG,label:"Remove Tag"},{value:ra.UPDATE_FIELD,label:"Update Field"},{value:ra.SEND_WEBHOOK,label:"Send Webhook"}],Joe=e=>e.reduce((r,a)=>(r[a.category]||(r[a.category]=[]),r[a.category].push(a),r),{}),ele=({onClose:e,onSave:r,initialWorkflow:a})=>{const[s,n]=h.useState(a?.name||""),[i,o]=h.useState(a?.description||""),[c,u]=h.useState(a?.isActive??!0),[m,g]=h.useState(a?.trigger||On.LEAD_CREATED),[f,y]=h.useState(a?.conditions?.logic||qh.AND),[p,b]=h.useState(a?.conditions?.conditions||[Hh(m)]),[j,v]=h.useState(a?.actions||[{type:ra.ASSIGN_TO_USER,config:{}}]),[N,k]=h.useState(!1),[E,C]=h.useState(null),[S,P]=h.useState(null),[D,I]=h.useState([]),[H,W]=h.useState([]);h.useEffect(()=>{(async()=>{try{const V=await Er.getUsers(),ge=(Array.isArray(V?.data)?V.data:V?.data?.users)??[];I(ge)}catch(V){console.error("Failed to load users for workflow builder",V)}})(),(async()=>{try{const V=await Tu.getAll();W(V||[])}catch(V){console.error("Failed to load teams for workflow builder",V)}})()},[]);const K=()=>{b([...p,Hh(m)])},B=X=>{g(X),b([Hh(X)])},z=X=>{b(p.filter((Q,V)=>V!==X))},q=(X,Q,V)=>{const ge=[...p];ge[X]={...ge[X],[Q]:V},b(ge)},J=()=>{v([...j,{type:ra.ASSIGN_TO_USER,config:{}}])},ae=X=>{v(j.filter((Q,V)=>V!==X))},ne=(X,Q)=>{const V=[...j];V[X]={type:Q,config:{}},v(V)},re=(X,Q,V)=>{const ge=[...j];ge[X].config[Q]=V,v(ge)},L=X=>{C(X)},G=(X,Q)=>{if(X.preventDefault(),E===null||E===Q)return;const V=[...p],ge=V[E];V.splice(E,1),V.splice(Q,0,ge),b(V),C(Q)},T=()=>{C(null)},_=X=>{P(X)},F=(X,Q)=>{if(X.preventDefault(),S===null||S===Q)return;const V=[...j],ge=V[S];V.splice(S,1),V.splice(Q,0,ge),v(V),P(Q)},ee=()=>{P(null)},Z=async()=>{if(!s.trim()){alert("Please enter a workflow name");return}k(!0);try{await r({name:s,description:i,isActive:c,trigger:m,conditions:{logic:f,conditions:p},actions:j})}catch(X){console.error("Failed to save workflow:",X),alert("Failed to save workflow. Please try again.")}finally{k(!1)}},U=(X,Q)=>{switch(X.type){case ra.ASSIGN_TO_USER:return t.jsxs("select",{value:X.config.userId||"",onChange:V=>re(Q,"userId",parseInt(V.target.value)||""),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[t.jsx("option",{value:"",disabled:!0,children:"Select User"}),D.map(V=>t.jsx("option",{value:V.id,children:V.fullName},V.id))]});case ra.ASSIGN_TO_TEAM:return t.jsxs("select",{value:X.config.teamId||"",onChange:V=>re(Q,"teamId",parseInt(V.target.value)||""),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[t.jsx("option",{value:"",disabled:!0,children:"Select Team"}),H.map(V=>t.jsx("option",{value:V.id,children:V.name},V.id))]});case ra.CHANGE_STATUS:return t.jsx("input",{type:"text",placeholder:"New Status",value:X.config.status||"",onChange:V=>re(Q,"status",V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"});case ra.SEND_EMAIL:return t.jsxs("div",{className:"space-y-2",children:[t.jsx("input",{type:"email",placeholder:"To Email",value:X.config.to||"",onChange:V=>re(Q,"to",V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"}),t.jsx("input",{type:"text",placeholder:"Subject",value:X.config.subject||"",onChange:V=>re(Q,"subject",V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"}),t.jsx("textarea",{placeholder:"Message",value:X.config.body||"",onChange:V=>re(Q,"body",V.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]});case ra.CREATE_TASK:return t.jsxs("div",{className:"space-y-2",children:[t.jsx("input",{type:"text",placeholder:"Task Title",value:X.config.title||"",onChange:V=>re(Q,"title",V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"}),t.jsx("textarea",{placeholder:"Task Description",value:X.config.description||"",onChange:V=>re(Q,"description",V.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]});case ra.ADD_TAG:case ra.REMOVE_TAG:return t.jsx("input",{type:"text",placeholder:"Tag Name",value:X.config.tag||"",onChange:V=>re(Q,"tag",V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"});case ra.UPDATE_FIELD:return t.jsxs("div",{className:"space-y-2",children:[t.jsx("input",{type:"text",placeholder:"Field Name",value:X.config.field||"",onChange:V=>re(Q,"field",V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"}),t.jsx("input",{type:"text",placeholder:"New Value",value:X.config.value||"",onChange:V=>re(Q,"value",V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]});default:return null}};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a?"Edit Workflow":"Create New Workflow"}),t.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:t.jsx(da,{className:"h-5 w-5 text-gray-500"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Workflow Name *"}),t.jsx("input",{type:"text",value:s,onChange:X=>n(X.target.value),placeholder:"e.g., Auto-assign new leads",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),t.jsx("textarea",{value:i,onChange:X=>o(X.target.value),placeholder:"Describe what this workflow does...",rows:2,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:c,onChange:X=>u(X.target.checked),className:"w-4 h-4 text-weconnect-red border-gray-300 rounded focus:ring-weconnect-red"}),t.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Active (workflow will run automatically)"})]})]}),t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:" Trigger"}),t.jsx("select",{value:m,onChange:X=>B(X.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Qoe.map(X=>t.jsx("option",{value:X.value,children:X.label},X.value))})]}),t.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" Conditions"}),t.jsxs("select",{value:f,onChange:X=>y(X.target.value),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[t.jsx("option",{value:qh.AND,children:"All (AND)"}),t.jsx("option",{value:qh.OR,children:"Any (OR)"})]})]}),t.jsx("div",{className:"space-y-2",children:p.map((X,Q)=>t.jsxs("div",{draggable:!0,onDragStart:()=>L(Q),onDragOver:V=>G(V,Q),onDragEnd:T,className:"flex items-center gap-2 bg-white dark:bg-gray-700 p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-move hover:border-gray-400 dark:hover:border-gray-500",children:[t.jsx(wb,{className:"h-4 w-4 text-gray-400"}),t.jsx("select",{value:X.field,onChange:V=>q(Q,"field",V.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:Object.entries(Joe(fx(m))).map(([V,ge])=>t.jsx("optgroup",{label:V,children:ge.map(Te=>t.jsx("option",{value:Te.value,children:Te.label},Te.value))},V))}),t.jsx("select",{value:X.operator,onChange:V=>q(Q,"operator",V.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:Xoe.map(V=>t.jsx("option",{value:V.value,children:V.label},V.value))}),X.operator!==qs.IS_EMPTY&&X.operator!==qs.IS_NOT_EMPTY&&t.jsx("input",{type:"text",value:X.value||"",onChange:V=>q(Q,"value",V.target.value),placeholder:"Value",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"}),t.jsx("button",{onClick:()=>z(Q),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors",children:t.jsx(ht,{className:"h-4 w-4 text-red-600"})})]},Q))}),t.jsxs("button",{onClick:K,className:"mt-3 w-full py-2 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-600 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors flex items-center justify-center gap-2",children:[t.jsx(Rt,{className:"h-4 w-4"}),"Add Condition"]})]}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:" Actions"}),t.jsx("div",{className:"space-y-3",children:j.map((X,Q)=>t.jsx("div",{draggable:!0,onDragStart:()=>_(Q),onDragOver:V=>F(V,Q),onDragEnd:ee,className:"bg-white dark:bg-gray-700 p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-move hover:border-gray-400 dark:hover:border-gray-500",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(wb,{className:"h-4 w-4 text-gray-400 mt-2"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("select",{value:X.type,onChange:V=>ne(Q,V.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:Zoe.map(V=>t.jsx("option",{value:V.value,children:V.label},V.value))}),t.jsx("button",{onClick:()=>ae(Q),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors",children:t.jsx(ht,{className:"h-4 w-4 text-red-600"})})]}),U(X,Q)]})]})},Q))}),t.jsxs("button",{onClick:J,className:"mt-3 w-full py-2 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-600 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors flex items-center justify-center gap-2",children:[t.jsx(Rt,{className:"h-4 w-4"}),"Add Action"]})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[t.jsx("button",{onClick:e,disabled:N,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),t.jsx("button",{onClick:Z,disabled:N,className:"px-6 py-2 bg-weconnect-red text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Saving...":"Save Workflow"})]})]})})},tle=()=>{const{hasPermission:e}=xr(),[r,a]=h.useState([]),[s,n]=h.useState([]),[i,o]=h.useState(!0),[c,u]=h.useState(!1),[m,g]=h.useState(null),[f,y]=h.useState(null),[p,b]=h.useState("workflows"),[j,v]=h.useState("list");h.useEffect(()=>{N()},[]);const N=async()=>{try{o(!0);const[W,K]=await Promise.all([Cc.getWorkflows(!0),Cc.getExecutionHistory()]);a(W),n(K)}catch(W){console.error("Failed to load automation data:",W)}finally{o(!1)}},k=async W=>{try{m?await Cc.updateWorkflow(m.id,W):await Cc.createWorkflow(W),u(!1),g(null),N()}catch(K){throw console.error("Failed to save workflow:",K),K}},E=W=>{g(W),u(!0)},C=W=>{y(W)},S=async(W,K)=>{try{await Cc.toggleWorkflow(W,!K),N()}catch(B){console.error("Failed to toggle workflow:",B),alert("Failed to toggle workflow")}},P=async W=>{if(confirm("Are you sure you want to delete this workflow?"))try{await Cc.deleteWorkflow(W),N()}catch(K){console.error("Failed to delete workflow:",K),alert("Failed to delete workflow")}},D=W=>{switch(W){case"SUCCESS":return t.jsx(ct,{className:"h-5 w-5 text-green-500"});case"FAILED":return t.jsx(va,{className:"h-5 w-5 text-red-500"});case"RUNNING":case"PENDING":return t.jsx(Yt,{className:"h-5 w-5 text-yellow-500"});default:return t.jsx(ur,{className:"h-5 w-5 text-gray-500"})}},I=W=>{switch(W){case"SUCCESS":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"FAILED":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";case"RUNNING":case"PENDING":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}},H=W=>t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:W.name}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${W.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:W.isActive?"Active":"Inactive"})]}),W.description&&t.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3",children:W.description}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Dl,{className:"h-4 w-4"}),W.trigger.replace(/_/g," ")]}),t.jsxs("span",{children:[W.conditions.conditions.length," conditions"]}),t.jsxs("span",{children:[W.actions.length," actions"]}),W._count&&t.jsxs("span",{children:[W._count.executions," executions"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>C(W),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"View Details",children:t.jsx(Bt,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),e(Qe.AUTOMATION.UPDATE)&&t.jsx("button",{onClick:()=>S(W.id,W.isActive),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:W.isActive?"Pause":"Activate",children:W.isActive?t.jsx(J9,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}):t.jsx(Sb,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),e(Qe.AUTOMATION.UPDATE)&&t.jsx("button",{onClick:()=>E(W),className:"p-2 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:t.jsx(er,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),e(Qe.AUTOMATION.DELETE)&&t.jsx("button",{onClick:()=>P(W.id),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete",children:t.jsx(ht,{className:"h-4 w-4 text-red-600"})})]})]})},W.id);return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-pink-100 dark:bg-pink-900/30 rounded-xl",children:t.jsx(Dl,{className:"h-6 w-6 text-pink-600 dark:text-pink-400"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Automation"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Build rules to automate your workflows"})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${j==="list"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>v("list"),title:"List view",children:t.jsx(gi,{className:"w-4 h-4"})}),t.jsx("button",{className:`flex items-center justify-center p-2 rounded-md transition-colors ${j==="grid"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>v("grid"),title:"Grid view",children:t.jsx(mi,{className:"w-4 h-4"})})]}),e(Qe.AUTOMATION.CREATE)&&t.jsxs("button",{className:"bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center",onClick:()=>{g(null),u(!0)},children:[t.jsx(Rt,{className:"h-4 w-4 mr-2"}),"New Workflow"]})]})]}),t.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("button",{onClick:()=>b("workflows"),className:`px-4 py-2 border-b-2 font-medium transition-colors ${p==="workflows"?"border-weconnect-red text-weconnect-red":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:["Workflows (",r.length,")"]}),t.jsxs("button",{onClick:()=>b("logs"),className:`px-4 py-2 border-b-2 font-medium transition-colors ${p==="logs"?"border-weconnect-red text-weconnect-red":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:["Execution Logs (",s.length,")"]})]})}),i?t.jsx("div",{className:"text-center py-12",children:t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red"})}):p==="workflows"?t.jsx("div",{className:"space-y-4",children:r.length===0?t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-12 text-center",children:[t.jsx(Dl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No workflows yet"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create your first automation workflow to get started"}),e(Qe.AUTOMATION.CREATE)&&t.jsxs("button",{onClick:()=>{g(null),u(!0)},className:"bg-weconnect-red text-white px-6 py-2 rounded-lg hover:bg-red-600 transition-colors inline-flex items-center",children:[t.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Create Workflow"]})]}):j==="grid"?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(W=>H(W))}):t.jsx("div",{className:"space-y-4",children:r.map(W=>H(W))})}):t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(Yt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No execution history"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Workflow executions will appear here"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Workflow"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Trigger"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Duration"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Time"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.map(W=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900/30",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-2",children:[D(W.status),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I(W.status)}`,children:W.status})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:W.workflow.name})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:W.workflow.trigger.replace(/_/g," ")})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:W.duration?`${W.duration}ms`:"-"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:_D(new Date(W.startedAt),{addSuffix:!0})})})]},W.id))})]})})}),c&&t.jsx(ele,{onClose:()=>{u(!1),g(null)},onSave:k,initialWorkflow:m||void 0}),f&&t.jsx(Koe,{workflow:f,onClose:()=>y(null)})]})},rle=()=>{const{hasPermission:e}=xr(),[r,a]=h.useState([]),[s,n]=h.useState(!0),[i,o]=h.useState(null);return h.useEffect(()=>{(async()=>{try{if(!e(Qe.ACTIVITY.READ)){o("You do not have permission to view activities.");return}n(!0);const u=await $o.getRecentActivities(100),m=u?.data?.items||u?.data||[],g=Array.isArray(m)?m.map(GT):[];a(g)}catch(u){console.error("Error fetching activities:",u),o("Failed to load activities.")}finally{n(!1)}})()},[e]),e(Qe.ACTIVITY.READ)?t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"All Activities"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"View all system activities and user actions"})]}),s?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-red-600 dark:text-red-400",children:i})}):r.length===0?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No activities found."})}):t.jsx("div",{className:"space-y-4",children:r.map(c=>t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:c.title}),t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${c.iconColor}`,children:c.type?.replace("_"," ")||"OTHER"})]}),c.description&&t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:c.description}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Yt,{size:14,className:"mr-1"}),c.time]}),c.user&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(xt,{size:14,className:"mr-1"}),c.user.firstName," ",c.user.lastName]})]})]})})},c.id))})]}):t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Access Denied"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You don't have permission to view activities."})]})})};function ale(){const{error:e,isAuthenticated:r,isBootstrapping:a}=xr(),s=mt(),[n,i]=h.useState(!1),[o,c]=h.useState(void 0),[u,m]=h.useState(void 0);Fe.useEffect(()=>{e==="Session expired. Please login again."&&i(!0)},[e]),Fe.useEffect(()=>{const f=y=>{const p=y;c(p.detail?.title),m(p.detail?.message),i(!0)};return window.addEventListener("tokenExpired",f),()=>{window.removeEventListener("tokenExpired",f)}},[]);const g=()=>{i(!1),c(void 0),m(void 0),s("/login")};return a?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),t.jsx(Yh,{position:nn.POSITION,autoClose:nn.AUTO_CLOSE,hideProgressBar:nn.HIDE_PROGRESS_BAR,newestOnTop:!0,closeOnClick:nn.CLOSE_ON_CLICK,pauseOnHover:nn.PAUSE_ON_HOVER,draggable:nn.DRAGGABLE,theme:"colored"})]}):t.jsxs(t.Fragment,{children:[r?t.jsxs(FM,{children:[t.jsx(rt,{path:"/",element:t.jsx(it,{requiredPermission:Qe.DASHBOARD.READ,children:t.jsx(ot,{children:t.jsx(bie,{})})})}),t.jsx(rt,{path:"/leads",element:t.jsx(it,{requiredPermission:Qe.LEAD.READ,children:t.jsx(ot,{children:t.jsx(Qie,{})})})}),t.jsx(rt,{path:"/leads/new",element:t.jsx(it,{requiredPermission:"lead.create",children:t.jsx(ot,{children:t.jsx(Jie,{})})})}),t.jsx(rt,{path:"/leads/:id/edit",element:t.jsx(it,{requiredPermission:"lead.update",children:t.jsx(ot,{children:t.jsx(eoe,{})})})}),t.jsx(rt,{path:"/leads/:id",element:t.jsx(it,{requiredPermission:"lead.read",children:t.jsx(ot,{children:t.jsx(roe,{})})})}),t.jsx(rt,{path:"/deals",element:t.jsx(it,{requiredPermission:Qe.DEAL.READ,children:t.jsx(ot,{children:t.jsx(aoe,{})})})}),t.jsx(rt,{path:"/deals/new",element:t.jsx(it,{requiredPermission:Qe.DEAL.CREATE,children:t.jsx(ot,{children:t.jsx(loe,{})})})}),t.jsx(rt,{path:"/deals/:id/edit",element:t.jsx(it,{requiredPermission:Qe.DEAL.UPDATE,children:t.jsx(ot,{children:t.jsx(coe,{})})})}),t.jsx(rt,{path:"/deals/:id",element:t.jsx(it,{requiredPermission:Qe.DEAL.READ,children:t.jsx(ot,{children:t.jsx(ooe,{})})})}),t.jsx(rt,{path:"/search",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Hoe,{})})})}),t.jsx(rt,{path:"/quotations",element:t.jsx(it,{requiredPermission:Qe.QUOTATION.READ,children:t.jsx(ot,{children:t.jsx(Bie,{})})})}),t.jsx(rt,{path:"/quotations/:id",element:t.jsx(it,{requiredPermission:Qe.QUOTATION.READ,children:t.jsx(ot,{children:t.jsx(Hie,{})})})}),t.jsx(rt,{path:"/quotations/new",element:t.jsx(it,{requiredPermission:Qe.QUOTATION.CREATE,children:t.jsx(ot,{children:t.jsx(TP,{})})})}),t.jsx(rt,{path:"/quotations/edit/:id",element:t.jsx(it,{requiredPermission:Qe.QUOTATION.UPDATE,children:t.jsx(ot,{children:t.jsx(TP,{})})})}),t.jsx(rt,{path:"/invoices",element:t.jsx(it,{requiredPermission:Qe.INVOICE.READ,children:t.jsx(ot,{children:t.jsx(Wie,{})})})}),t.jsx(rt,{path:"/invoices/new",element:t.jsx(it,{requiredPermission:Qe.INVOICE.CREATE,children:t.jsx(ot,{children:t.jsx(DP,{})})})}),t.jsx(rt,{path:"/invoices/edit/:id",element:t.jsx(it,{requiredPermission:Qe.INVOICE.UPDATE,children:t.jsx(ot,{children:t.jsx(DP,{})})})}),t.jsx(rt,{path:"/products",element:t.jsx(it,{requiredPermission:"product.read",children:t.jsx(ot,{children:t.jsx(Loe,{})})})}),t.jsx(rt,{path:"/products/new",element:t.jsx(it,{requiredPermission:"product.create",children:t.jsx(ot,{children:t.jsx("div",{children:"Product Create Form - Coming Soon"})})})}),t.jsx(rt,{path:"/products/:id/edit",element:t.jsx(it,{requiredPermission:"product.update",children:t.jsx(ot,{children:t.jsx("div",{children:"Product Edit Form - Coming Soon"})})})}),t.jsx(rt,{path:"/task-management",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx($P,{})})})}),t.jsx(rt,{path:"/tasks/:id",element:t.jsx(it,{requiredPermission:Qe.ACTIVITY.READ,children:t.jsx(ot,{children:t.jsx(Woe,{})})})}),t.jsx(rt,{path:"/activities",element:t.jsx(it,{requiredPermission:Qe.ACTIVITY.READ,children:t.jsx(ot,{children:t.jsx(rle,{})})})}),t.jsx(rt,{path:"/expense-management",element:t.jsx(it,{requiredPermission:Qe.EXPENSE.READ,children:t.jsx(ot,{children:t.jsx(Voe,{})})})}),t.jsx(rt,{path:"/automation-management",element:t.jsx(it,{requiredPermission:Qe.AUTOMATION.READ,children:t.jsx(ot,{children:t.jsx(tle,{})})})}),t.jsx(rt,{path:"/users",element:t.jsx(it,{requiredPermission:"user.read",children:t.jsx(ot,{children:t.jsx(doe,{})})})}),t.jsx(rt,{path:"/users/new",element:t.jsx(it,{requiredPermission:"user.create",children:t.jsx(ot,{children:t.jsx(uoe,{})})})}),t.jsx(rt,{path:"/users/:id/edit",element:t.jsx(it,{requiredPermission:"user.update",children:t.jsx(ot,{children:t.jsx(moe,{})})})}),t.jsx(rt,{path:"/roles",element:t.jsx(it,{requiredPermission:"role.read",children:t.jsx(ot,{children:t.jsx(wie,{})})})}),t.jsx(rt,{path:"/roles/new",element:t.jsx(it,{requiredPermission:"role.create",children:t.jsx(ot,{children:t.jsx(goe,{})})})}),t.jsx(rt,{path:"/roles/:id/edit",element:t.jsx(it,{requiredPermission:Qe.ROLE.UPDATE,children:t.jsx(ot,{children:t.jsx(hoe,{})})})}),t.jsx(rt,{path:"/business-settings",element:t.jsx(it,{requiredPermission:Qe.BUSINESS_SETTINGS.READ,children:t.jsx(ot,{children:t.jsx(jie,{})})})}),t.jsx(rt,{path:"/business-settings/teams",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Nie,{})})})}),t.jsx(rt,{path:"/business-settings/company",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(kie,{})})})}),t.jsx(rt,{path:"/business-settings/currency",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Sie,{})})})}),t.jsx(rt,{path:"/business-settings/lead-sources",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Cie,{})})})}),t.jsx(rt,{path:"/business-settings/lead-fields",element:t.jsx(it,{requiredPermission:Qe.BUSINESS_SETTINGS.READ,children:t.jsx(ot,{children:t.jsx(Eie,{})})})}),t.jsx(rt,{path:"/settings/leads",element:t.jsx(it,{requiredPermission:Qe.LEAD.READ,children:t.jsx(ot,{children:t.jsx(Soe,{})})})}),t.jsx(rt,{path:"/business-settings/tags",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Aie,{})})})}),t.jsx(rt,{path:"/business-settings/industries",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Pie,{})})})}),t.jsx(rt,{path:"/business-settings/unit-types",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Fie,{})})})}),t.jsx(rt,{path:"/business-settings/product-categories",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(zie,{})})})}),t.jsx(rt,{path:"/business-settings/lead-statuses",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Tie,{})})})}),t.jsx(rt,{path:"/business-settings/communication",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Die,{})})})}),t.jsx(rt,{path:"/business-settings/integrations/communication",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Oie,{})})})}),t.jsx(rt,{path:"/business-settings/notifications",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(_ie,{})})})}),t.jsx(rt,{path:"/business-settings/integrations/leads",element:t.jsx(it,{requiredPermission:Qe.LEAD.CREATE,children:t.jsx(ot,{children:t.jsx(voe,{})})})}),t.jsx(rt,{path:"/business-settings/quotation-templates",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Iie,{})})})}),t.jsx(rt,{path:"/business-settings/invoice-templates",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Lie,{})})})}),t.jsx(rt,{path:"/business-settings/numbering",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Rie,{})})})}),t.jsx(rt,{path:"/business-settings/terms-and-conditions",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Mie,{})})})}),t.jsx(rt,{path:"/reports",element:t.jsx(it,{requiredPermission:Qe.DASHBOARD.READ,children:t.jsx(ot,{children:t.jsx(Roe,{})})})}),t.jsx(rt,{path:"/reports/tasks",element:t.jsx(it,{requiredPermission:Qe.DASHBOARD.READ,children:t.jsx(ot,{children:t.jsx(Moe,{})})})}),t.jsx(rt,{path:"/reports/leads",element:t.jsx(it,{requiredPermission:Qe.DASHBOARD.READ,children:t.jsx(ot,{children:t.jsx(_oe,{})})})}),t.jsx(rt,{path:"/reports/deals",element:t.jsx(it,{requiredPermission:Qe.DASHBOARD.READ,children:t.jsx(ot,{children:t.jsx($oe,{})})})}),t.jsx(rt,{path:"/reports/expenses",element:t.jsx(it,{requiredPermission:Qe.DASHBOARD.READ,children:t.jsx(ot,{children:t.jsx(Uoe,{})})})}),t.jsx(rt,{path:"/reports/invoices",element:t.jsx(it,{requiredPermission:Qe.DASHBOARD.READ,children:t.jsx(ot,{children:t.jsx(Foe,{})})})}),t.jsx(rt,{path:"/reports/quotations",element:t.jsx(it,{requiredPermission:Qe.DASHBOARD.READ,children:t.jsx(ot,{children:t.jsx(zoe,{})})})}),t.jsx(rt,{path:"/business-settings/dashboard",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Uie,{})})})}),t.jsx(rt,{path:"/profile",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(Toe,{})})})}),t.jsx(rt,{path:"/tasks",element:t.jsx(it,{requiredPermission:Qe.ACTIVITY.READ,children:t.jsx(ot,{children:t.jsx($P,{})})})}),t.jsx(rt,{path:"/trash",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(foe,{})})})}),t.jsx(rt,{path:"/trash/users",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(xoe,{})})})}),t.jsx(rt,{path:"/trash/leads",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(poe,{})})})}),t.jsx(rt,{path:"/trash/roles",element:t.jsx(it,{children:t.jsx(ot,{children:t.jsx(yoe,{})})})}),t.jsx(rt,{path:"*",element:t.jsx(Th,{to:"/",replace:!0})})]}):t.jsx(AF,{}),r&&t.jsx(Boe,{isOpen:n,onLogin:g,title:o,message:u}),t.jsx(Yh,{position:nn.POSITION,autoClose:nn.AUTO_CLOSE,hideProgressBar:nn.HIDE_PROGRESS_BAR,newestOnTop:!0,closeOnClick:nn.CLOSE_ON_CLICK,pauseOnHover:nn.PAUSE_ON_HOVER,draggable:nn.DRAGGABLE,theme:"colored"})]})}function sle(){return t.jsx(qoe,{children:t.jsx(Y$,{children:t.jsx(D$,{children:t.jsx(T$,{children:t.jsx(g9,{children:t.jsx(b9,{children:t.jsx(T9,{children:t.jsx(D9,{children:t.jsx(ale,{})})})})})})})})})}const Tt=e=>typeof e=="string",Cu=()=>{let e,r;const a=new Promise((s,n)=>{e=s,r=n});return a.resolve=e,a.reject=r,a},UP=e=>e==null?"":""+e,nle=(e,r,a)=>{e.forEach(s=>{r[s]&&(a[s]=r[s])})},ile=/###/g,FP=e=>e&&e.indexOf("###")>-1?e.replace(ile,"."):e,zP=e=>!e||Tt(e),_u=(e,r,a)=>{const s=Tt(r)?r.split("."):r;let n=0;for(;n<s.length-1;){if(zP(e))return{};const i=FP(s[n]);!e[i]&&a&&(e[i]=new a),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={},++n}return zP(e)?{}:{obj:e,k:FP(s[n])}},BP=(e,r,a)=>{const{obj:s,k:n}=_u(e,r,Object);if(s!==void 0||r.length===1){s[n]=a;return}let i=r[r.length-1],o=r.slice(0,r.length-1),c=_u(e,o,Object);for(;c.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),c=_u(e,o,Object),c?.obj&&typeof c.obj[`${c.k}.${i}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${i}`]=a},ole=(e,r,a,s)=>{const{obj:n,k:i}=_u(e,r,Object);n[i]=n[i]||[],n[i].push(a)},rf=(e,r)=>{const{obj:a,k:s}=_u(e,r);if(a&&Object.prototype.hasOwnProperty.call(a,s))return a[s]},lle=(e,r,a)=>{const s=rf(e,a);return s!==void 0?s:rf(r,a)},eL=(e,r,a)=>{for(const s in r)s!=="__proto__"&&s!=="constructor"&&(s in e?Tt(e[s])||e[s]instanceof String||Tt(r[s])||r[s]instanceof String?a&&(e[s]=r[s]):eL(e[s],r[s],a):e[s]=r[s]);return e},Ec=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var cle={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const dle=e=>Tt(e)?e.replace(/[&<>"'\/]/g,r=>cle[r]):e;class ule{constructor(r){this.capacity=r,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(r){const a=this.regExpMap.get(r);if(a!==void 0)return a;const s=new RegExp(r);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(r,s),this.regExpQueue.push(r),s}}const mle=[" ",",","?","!",";"],gle=new ule(20),hle=(e,r,a)=>{r=r||"",a=a||"";const s=mle.filter(o=>r.indexOf(o)<0&&a.indexOf(o)<0);if(s.length===0)return!0;const n=gle.getRegExp(`(${s.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!n.test(e);if(!i){const o=e.indexOf(a);o>0&&!n.test(e.substring(0,o))&&(i=!0)}return i},Rw=(e,r,a=".")=>{if(!e)return;if(e[r])return Object.prototype.hasOwnProperty.call(e,r)?e[r]:void 0;const s=r.split(a);let n=e;for(let i=0;i<s.length;){if(!n||typeof n!="object")return;let o,c="";for(let u=i;u<s.length;++u)if(u!==i&&(c+=a),c+=s[u],o=n[c],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&u<s.length-1)continue;i+=u-i+1;break}n=o}return n},dm=e=>e?.replace("_","-"),fle={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,r){console?.[e]?.apply?.(console,r)}};class af{constructor(r,a={}){this.init(r,a)}init(r,a={}){this.prefix=a.prefix||"i18next:",this.logger=r||fle,this.options=a,this.debug=a.debug}log(...r){return this.forward(r,"log","",!0)}warn(...r){return this.forward(r,"warn","",!0)}error(...r){return this.forward(r,"error","")}deprecate(...r){return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(r,a,s,n){return n&&!this.debug?null:(Tt(r[0])&&(r[0]=`${s}${this.prefix} ${r[0]}`),this.logger[a](r))}create(r){return new af(this.logger,{prefix:`${this.prefix}:${r}:`,...this.options})}clone(r){return r=r||this.options,r.prefix=r.prefix||this.prefix,new af(this.logger,r)}}var ti=new af;class xx{constructor(){this.observers={}}on(r,a){return r.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const n=this.observers[s].get(a)||0;this.observers[s].set(a,n+1)}),this}off(r,a){if(this.observers[r]){if(!a){delete this.observers[r];return}this.observers[r].delete(a)}}emit(r,...a){this.observers[r]&&Array.from(this.observers[r].entries()).forEach(([n,i])=>{for(let o=0;o<i;o++)n(...a)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([n,i])=>{for(let o=0;o<i;o++)n.apply(n,[r,...a])})}}class qP extends xx{constructor(r,a={ns:["translation"],defaultNS:"translation"}){super(),this.data=r||{},this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(r){this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}removeNamespaces(r){const a=this.options.ns.indexOf(r);a>-1&&this.options.ns.splice(a,1)}getResource(r,a,s,n={}){const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,o=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;r.indexOf(".")>-1?c=r.split("."):(c=[r,a],s&&(Array.isArray(s)?c.push(...s):Tt(s)&&i?c.push(...s.split(i)):c.push(s)));const u=rf(this.data,c);return!u&&!a&&!s&&r.indexOf(".")>-1&&(r=c[0],a=c[1],s=c.slice(2).join(".")),u||!o||!Tt(s)?u:Rw(this.data?.[r]?.[a],s,i)}addResource(r,a,s,n,i={silent:!1}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let c=[r,a];s&&(c=c.concat(o?s.split(o):s)),r.indexOf(".")>-1&&(c=r.split("."),n=a,a=c[1]),this.addNamespaces(a),BP(this.data,c,n),i.silent||this.emit("added",r,a,s,n)}addResources(r,a,s,n={silent:!1}){for(const i in s)(Tt(s[i])||Array.isArray(s[i]))&&this.addResource(r,a,i,s[i],{silent:!0});n.silent||this.emit("added",r,a,s)}addResourceBundle(r,a,s,n,i,o={silent:!1,skipCopy:!1}){let c=[r,a];r.indexOf(".")>-1&&(c=r.split("."),n=s,s=a,a=c[1]),this.addNamespaces(a);let u=rf(this.data,c)||{};o.skipCopy||(s=JSON.parse(JSON.stringify(s))),n?eL(u,s,i):u={...u,...s},BP(this.data,c,u),o.silent||this.emit("added",r,a,s)}removeResourceBundle(r,a){this.hasResourceBundle(r,a)&&delete this.data[r][a],this.removeNamespaces(a),this.emit("removed",r,a)}hasResourceBundle(r,a){return this.getResource(r,a)!==void 0}getResourceBundle(r,a){return a||(a=this.options.defaultNS),this.getResource(r,a)}getDataByLanguage(r){return this.data[r]}hasLanguageSomeTranslations(r){const a=this.getDataByLanguage(r);return!!(a&&Object.keys(a)||[]).find(n=>a[n]&&Object.keys(a[n]).length>0)}toJSON(){return this.data}}var tL={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,r,a,s,n){return e.forEach(i=>{r=this.processors[i]?.process(r,a,s,n)??r}),r}};const rL=Symbol("i18next/PATH_KEY");function xle(){const e=[],r=Object.create(null);let a;return r.get=(s,n)=>(a?.revoke?.(),n===rL?e:(e.push(n),a=Proxy.revocable(s,r),a.proxy)),Proxy.revocable(Object.create(null),r).proxy}function Mw(e,r){const{[rL]:a}=e(xle());return a.join(r?.keySeparator??".")}const HP={},ib=e=>!Tt(e)&&typeof e!="boolean"&&typeof e!="number";class sf extends xx{constructor(r,a={}){super(),nle(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r,this),this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ti.create("translator")}changeLanguage(r){r&&(this.language=r)}exists(r,a={interpolation:{}}){const s={...a};if(r==null)return!1;const n=this.resolve(r,s);if(n?.res===void 0)return!1;const i=ib(n.res);return!(s.returnObjects===!1&&i)}extractFromKey(r,a){let s=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const n=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let i=a.ns||this.options.defaultNS||[];const o=s&&r.indexOf(s)>-1,c=!this.options.userDefinedKeySeparator&&!a.keySeparator&&!this.options.userDefinedNsSeparator&&!a.nsSeparator&&!hle(r,s,n);if(o&&!c){const u=r.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:r,namespaces:Tt(i)?[i]:i};const m=r.split(s);(s!==n||s===n&&this.options.ns.indexOf(m[0])>-1)&&(i=m.shift()),r=m.join(n)}return{key:r,namespaces:Tt(i)?[i]:i}}translate(r,a,s){let n=typeof a=="object"?{...a}:a;if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),r==null)return"";typeof r=="function"&&(r=Mw(r,{...this.options,...n})),Array.isArray(r)||(r=[String(r)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:c,namespaces:u}=this.extractFromKey(r[r.length-1],n),m=u[u.length-1];let g=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;g===void 0&&(g=":");const f=n.lng||this.language,y=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f?.toLowerCase()==="cimode")return y?i?{res:`${m}${g}${c}`,usedKey:c,exactUsedKey:c,usedLng:f,usedNS:m,usedParams:this.getUsedParamsDetails(n)}:`${m}${g}${c}`:i?{res:c,usedKey:c,exactUsedKey:c,usedLng:f,usedNS:m,usedParams:this.getUsedParamsDetails(n)}:c;const p=this.resolve(r,n);let b=p?.res;const j=p?.usedKey||c,v=p?.exactUsedKey||c,N=["[object Number]","[object Function]","[object RegExp]"],k=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,C=n.count!==void 0&&!Tt(n.count),S=sf.hasDefaultValue(n),P=C?this.pluralResolver.getSuffix(f,n.count,n):"",D=n.ordinal&&C?this.pluralResolver.getSuffix(f,n.count,{ordinal:!1}):"",I=C&&!n.ordinal&&n.count===0,H=I&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${P}`]||n[`defaultValue${D}`]||n.defaultValue;let W=b;E&&!b&&S&&(W=H);const K=ib(W),B=Object.prototype.toString.apply(W);if(E&&W&&K&&N.indexOf(B)<0&&!(Tt(k)&&Array.isArray(W))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const z=this.options.returnedObjectHandler?this.options.returnedObjectHandler(j,W,{...n,ns:u}):`key '${c} (${this.language})' returned an object instead of string.`;return i?(p.res=z,p.usedParams=this.getUsedParamsDetails(n),p):z}if(o){const z=Array.isArray(W),q=z?[]:{},J=z?v:j;for(const ae in W)if(Object.prototype.hasOwnProperty.call(W,ae)){const ne=`${J}${o}${ae}`;S&&!b?q[ae]=this.translate(ne,{...n,defaultValue:ib(H)?H[ae]:void 0,joinArrays:!1,ns:u}):q[ae]=this.translate(ne,{...n,joinArrays:!1,ns:u}),q[ae]===ne&&(q[ae]=W[ae])}b=q}}else if(E&&Tt(k)&&Array.isArray(b))b=b.join(k),b&&(b=this.extendTranslation(b,r,n,s));else{let z=!1,q=!1;!this.isValidLookup(b)&&S&&(z=!0,b=H),this.isValidLookup(b)||(q=!0,b=c);const ae=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&q?void 0:b,ne=S&&H!==b&&this.options.updateMissing;if(q||z||ne){if(this.logger.log(ne?"updateKey":"missingKey",f,m,c,ne?H:b),o){const T=this.resolve(c,{...n,keySeparator:!1});T&&T.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let re=[];const L=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&L&&L[0])for(let T=0;T<L.length;T++)re.push(L[T]);else this.options.saveMissingTo==="all"?re=this.languageUtils.toResolveHierarchy(n.lng||this.language):re.push(n.lng||this.language);const G=(T,_,F)=>{const ee=S&&F!==b?F:ae;this.options.missingKeyHandler?this.options.missingKeyHandler(T,m,_,ee,ne,n):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(T,m,_,ee,ne,n),this.emit("missingKey",T,m,_,b)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?re.forEach(T=>{const _=this.pluralResolver.getSuffixes(T,n);I&&n[`defaultValue${this.options.pluralSeparator}zero`]&&_.indexOf(`${this.options.pluralSeparator}zero`)<0&&_.push(`${this.options.pluralSeparator}zero`),_.forEach(F=>{G([T],c+F,n[`defaultValue${F}`]||H)})}):G(re,c,H))}b=this.extendTranslation(b,r,n,p,s),q&&b===c&&this.options.appendNamespaceToMissingKey&&(b=`${m}${g}${c}`),(q||z)&&this.options.parseMissingKeyHandler&&(b=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${m}${g}${c}`:c,z?b:void 0,n))}return i?(p.res=b,p.usedParams=this.getUsedParamsDetails(n),p):b}extendTranslation(r,a,s,n,i){if(this.i18nFormat?.parse)r=this.i18nFormat.parse(r,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const u=Tt(r)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let m;if(u){const f=r.match(this.interpolator.nestingRegexp);m=f&&f.length}let g=s.replace&&!Tt(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),r=this.interpolator.interpolate(r,g,s.lng||this.language||n.usedLng,s),u){const f=r.match(this.interpolator.nestingRegexp),y=f&&f.length;m<y&&(s.nest=!1)}!s.lng&&n&&n.res&&(s.lng=this.language||n.usedLng),s.nest!==!1&&(r=this.interpolator.nest(r,(...f)=>i?.[0]===f[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${a[0]}`),null):this.translate(...f,a),s)),s.interpolation&&this.interpolator.reset()}const o=s.postProcess||this.options.postProcess,c=Tt(o)?[o]:o;return r!=null&&c?.length&&s.applyPostProcessor!==!1&&(r=tL.handle(c,r,a,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),r}resolve(r,a={}){let s,n,i,o,c;return Tt(r)&&(r=[r]),r.forEach(u=>{if(this.isValidLookup(s))return;const m=this.extractFromKey(u,a),g=m.key;n=g;let f=m.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const y=a.count!==void 0&&!Tt(a.count),p=y&&!a.ordinal&&a.count===0,b=a.context!==void 0&&(Tt(a.context)||typeof a.context=="number")&&a.context!=="",j=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);f.forEach(v=>{this.isValidLookup(s)||(c=v,!HP[`${j[0]}-${v}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(c)&&(HP[`${j[0]}-${v}`]=!0,this.logger.warn(`key "${n}" for languages "${j.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),j.forEach(N=>{if(this.isValidLookup(s))return;o=N;const k=[g];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(k,g,N,v,a);else{let C;y&&(C=this.pluralResolver.getSuffix(N,a.count,a));const S=`${this.options.pluralSeparator}zero`,P=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(a.ordinal&&C.indexOf(P)===0&&k.push(g+C.replace(P,this.options.pluralSeparator)),k.push(g+C),p&&k.push(g+S)),b){const D=`${g}${this.options.contextSeparator||"_"}${a.context}`;k.push(D),y&&(a.ordinal&&C.indexOf(P)===0&&k.push(D+C.replace(P,this.options.pluralSeparator)),k.push(D+C),p&&k.push(D+S))}}let E;for(;E=k.pop();)this.isValidLookup(s)||(i=E,s=this.getResource(N,v,E,a))}))})}),{res:s,usedKey:n,exactUsedKey:i,usedLng:o,usedNS:c}}isValidLookup(r){return r!==void 0&&!(!this.options.returnNull&&r===null)&&!(!this.options.returnEmptyString&&r==="")}getResource(r,a,s,n={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(r,a,s,n):this.resourceStore.getResource(r,a,s,n)}getUsedParamsDetails(r={}){const a=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=r.replace&&!Tt(r.replace);let n=s?r.replace:r;if(s&&typeof r.count<"u"&&(n.count=r.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!s){n={...n};for(const i of a)delete n[i]}return n}static hasDefaultValue(r){const a="defaultValue";for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&a===s.substring(0,a.length)&&r[s]!==void 0)return!0;return!1}}class WP{constructor(r){this.options=r,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ti.create("languageUtils")}getScriptPartFromCode(r){if(r=dm(r),!r||r.indexOf("-")<0)return null;const a=r.split("-");return a.length===2||(a.pop(),a[a.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(a.join("-"))}getLanguagePartFromCode(r){if(r=dm(r),!r||r.indexOf("-")<0)return r;const a=r.split("-");return this.formatLanguageCode(a[0])}formatLanguageCode(r){if(Tt(r)&&r.indexOf("-")>-1){let a;try{a=Intl.getCanonicalLocales(r)[0]}catch{}return a&&this.options.lowerCaseLng&&(a=a.toLowerCase()),a||(this.options.lowerCaseLng?r.toLowerCase():r)}return this.options.cleanCode||this.options.lowerCaseLng?r.toLowerCase():r}isSupportedCode(r){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(r=this.getLanguagePartFromCode(r)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(r)>-1}getBestMatchFromCodes(r){if(!r)return null;let a;return r.forEach(s=>{if(a)return;const n=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(n))&&(a=n)}),!a&&this.options.supportedLngs&&r.forEach(s=>{if(a)return;const n=this.getScriptPartFromCode(s);if(this.isSupportedCode(n))return a=n;const i=this.getLanguagePartFromCode(s);if(this.isSupportedCode(i))return a=i;a=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),a||(a=this.getFallbackCodes(this.options.fallbackLng)[0]),a}getFallbackCodes(r,a){if(!r)return[];if(typeof r=="function"&&(r=r(a)),Tt(r)&&(r=[r]),Array.isArray(r))return r;if(!a)return r.default||[];let s=r[a];return s||(s=r[this.getScriptPartFromCode(a)]),s||(s=r[this.formatLanguageCode(a)]),s||(s=r[this.getLanguagePartFromCode(a)]),s||(s=r.default),s||[]}toResolveHierarchy(r,a){const s=this.getFallbackCodes((a===!1?[]:a)||this.options.fallbackLng||[],r),n=[],i=o=>{o&&(this.isSupportedCode(o)?n.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Tt(r)&&(r.indexOf("-")>-1||r.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(r)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(r)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(r))):Tt(r)&&i(this.formatLanguageCode(r)),s.forEach(o=>{n.indexOf(o)<0&&i(this.formatLanguageCode(o))}),n}}const VP={zero:0,one:1,two:2,few:3,many:4,other:5},KP={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class ple{constructor(r,a={}){this.languageUtils=r,this.options=a,this.logger=ti.create("pluralResolver"),this.pluralRulesCache={}}addRule(r,a){this.rules[r]=a}clearCache(){this.pluralRulesCache={}}getRule(r,a={}){const s=dm(r==="dev"?"en":r),n=a.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:s,type:n});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(s,{type:n})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),KP;if(!r.match(/-|_/))return KP;const u=this.languageUtils.getLanguagePartFromCode(r);o=this.getRule(u,a)}return this.pluralRulesCache[i]=o,o}needsPlural(r,a={}){let s=this.getRule(r,a);return s||(s=this.getRule("dev",a)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(r,a,s={}){return this.getSuffixes(r,s).map(n=>`${a}${n}`)}getSuffixes(r,a={}){let s=this.getRule(r,a);return s||(s=this.getRule("dev",a)),s?s.resolvedOptions().pluralCategories.sort((n,i)=>VP[n]-VP[i]).map(n=>`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${n}`):[]}getSuffix(r,a,s={}){const n=this.getRule(r,s);return n?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${n.select(a)}`:(this.logger.warn(`no plural rule found for: ${r}`),this.getSuffix("dev",a,s))}}const GP=(e,r,a,s=".",n=!0)=>{let i=lle(e,r,a);return!i&&n&&Tt(a)&&(i=Rw(e,a,s),i===void 0&&(i=Rw(r,a,s))),i},ob=e=>e.replace(/\$/g,"$$$$");class YP{constructor(r={}){this.logger=ti.create("interpolator"),this.options=r,this.format=r?.interpolation?.format||(a=>a),this.init(r)}init(r={}){r.interpolation||(r.interpolation={escapeValue:!0});const{escape:a,escapeValue:s,useRawValueToEscape:n,prefix:i,prefixEscaped:o,suffix:c,suffixEscaped:u,formatSeparator:m,unescapeSuffix:g,unescapePrefix:f,nestingPrefix:y,nestingPrefixEscaped:p,nestingSuffix:b,nestingSuffixEscaped:j,nestingOptionsSeparator:v,maxReplaces:N,alwaysFormat:k}=r.interpolation;this.escape=a!==void 0?a:dle,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=i?Ec(i):o||"{{",this.suffix=c?Ec(c):u||"}}",this.formatSeparator=m||",",this.unescapePrefix=g?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=y?Ec(y):p||Ec("$t("),this.nestingSuffix=b?Ec(b):j||Ec(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=N||1e3,this.alwaysFormat=k!==void 0?k:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const r=(a,s)=>a?.source===s?(a.lastIndex=0,a):new RegExp(s,"g");this.regexp=r(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=r(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=r(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(r,a,s,n){let i,o,c;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},m=p=>{if(p.indexOf(this.formatSeparator)<0){const N=GP(a,u,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(N,void 0,s,{...n,...a,interpolationkey:p}):N}const b=p.split(this.formatSeparator),j=b.shift().trim(),v=b.join(this.formatSeparator).trim();return this.format(GP(a,u,j,this.options.keySeparator,this.options.ignoreJSONStructure),v,s,{...n,...a,interpolationkey:j})};this.resetRegExp();const g=n?.missingInterpolationHandler||this.options.missingInterpolationHandler,f=n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>ob(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?ob(this.escape(p)):ob(p)}].forEach(p=>{for(c=0;i=p.regex.exec(r);){const b=i[1].trim();if(o=m(b),o===void 0)if(typeof g=="function"){const v=g(r,i,n);o=Tt(v)?v:""}else if(n&&Object.prototype.hasOwnProperty.call(n,b))o="";else if(f){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${b} for interpolating ${r}`),o="";else!Tt(o)&&!this.useRawValueToEscape&&(o=UP(o));const j=p.safeValue(o);if(r=r.replace(i[0],j),f?(p.regex.lastIndex+=o.length,p.regex.lastIndex-=i[0].length):p.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),r}nest(r,a,s={}){let n,i,o;const c=(u,m)=>{const g=this.nestingOptionsSeparator;if(u.indexOf(g)<0)return u;const f=u.split(new RegExp(`${g}[ ]*{`));let y=`{${f[1]}`;u=f[0],y=this.interpolate(y,o);const p=y.match(/'/g),b=y.match(/"/g);((p?.length??0)%2===0&&!b||b.length%2!==0)&&(y=y.replace(/'/g,'"'));try{o=JSON.parse(y),m&&(o={...m,...o})}catch(j){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,j),`${u}${g}${y}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,u};for(;n=this.nestingRegexp.exec(r);){let u=[];o={...s},o=o.replace&&!Tt(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const m=/{.*}/.test(n[1])?n[1].lastIndexOf("}")+1:n[1].indexOf(this.formatSeparator);if(m!==-1&&(u=n[1].slice(m).split(this.formatSeparator).map(g=>g.trim()).filter(Boolean),n[1]=n[1].slice(0,m)),i=a(c.call(this,n[1].trim(),o),o),i&&n[0]===r&&!Tt(i))return i;Tt(i)||(i=UP(i)),i||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${r}`),i=""),u.length&&(i=u.reduce((g,f)=>this.format(g,f,s.lng,{...s,interpolationkey:n[1].trim()}),i.trim())),r=r.replace(n[0],i),this.regexp.lastIndex=0}return r}}const yle=e=>{let r=e.toLowerCase().trim();const a={};if(e.indexOf("(")>-1){const s=e.split("(");r=s[0].toLowerCase().trim();const n=s[1].substring(0,s[1].length-1);r==="currency"&&n.indexOf(":")<0?a.currency||(a.currency=n.trim()):r==="relativetime"&&n.indexOf(":")<0?a.range||(a.range=n.trim()):n.split(";").forEach(o=>{if(o){const[c,...u]=o.split(":"),m=u.join(":").trim().replace(/^'+|'+$/g,""),g=c.trim();a[g]||(a[g]=m),m==="false"&&(a[g]=!1),m==="true"&&(a[g]=!0),isNaN(m)||(a[g]=parseInt(m,10))}})}return{formatName:r,formatOptions:a}},QP=e=>{const r={};return(a,s,n)=>{let i=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(i={...i,[n.interpolationkey]:void 0});const o=s+JSON.stringify(i);let c=r[o];return c||(c=e(dm(s),n),r[o]=c),c(a)}},vle=e=>(r,a,s)=>e(dm(a),s)(r);class ble{constructor(r={}){this.logger=ti.create("formatter"),this.options=r,this.init(r)}init(r,a={interpolation:{}}){this.formatSeparator=a.interpolation.formatSeparator||",";const s=a.cacheInBuiltFormats?QP:vle;this.formats={number:s((n,i)=>{const o=new Intl.NumberFormat(n,{...i});return c=>o.format(c)}),currency:s((n,i)=>{const o=new Intl.NumberFormat(n,{...i,style:"currency"});return c=>o.format(c)}),datetime:s((n,i)=>{const o=new Intl.DateTimeFormat(n,{...i});return c=>o.format(c)}),relativetime:s((n,i)=>{const o=new Intl.RelativeTimeFormat(n,{...i});return c=>o.format(c,i.range||"day")}),list:s((n,i)=>{const o=new Intl.ListFormat(n,{...i});return c=>o.format(c)})}}add(r,a){this.formats[r.toLowerCase().trim()]=a}addCached(r,a){this.formats[r.toLowerCase().trim()]=QP(a)}format(r,a,s,n={}){const i=a.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(c=>c.indexOf(")")>-1)){const c=i.findIndex(u=>u.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,c)].join(this.formatSeparator)}return i.reduce((c,u)=>{const{formatName:m,formatOptions:g}=yle(u);if(this.formats[m]){let f=c;try{const y=n?.formatParams?.[n.interpolationkey]||{},p=y.locale||y.lng||n.locale||n.lng||s;f=this.formats[m](c,p,{...g,...n,...y})}catch(y){this.logger.warn(y)}return f}else this.logger.warn(`there was no format function for ${m}`);return c},r)}}const wle=(e,r)=>{e.pending[r]!==void 0&&(delete e.pending[r],e.pendingCount--)};class jle extends xx{constructor(r,a,s,n={}){super(),this.backend=r,this.store=a,this.services=s,this.languageUtils=s.languageUtils,this.options=n,this.logger=ti.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,n.backend,n)}queueLoad(r,a,s,n){const i={},o={},c={},u={};return r.forEach(m=>{let g=!0;a.forEach(f=>{const y=`${m}|${f}`;!s.reload&&this.store.hasResourceBundle(m,f)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?o[y]===void 0&&(o[y]=!0):(this.state[y]=1,g=!1,o[y]===void 0&&(o[y]=!0),i[y]===void 0&&(i[y]=!0),u[f]===void 0&&(u[f]=!0)))}),g||(c[m]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(u)}}loaded(r,a,s){const n=r.split("|"),i=n[0],o=n[1];a&&this.emit("failedLoading",i,o,a),!a&&s&&this.store.addResourceBundle(i,o,s,void 0,void 0,{skipCopy:!0}),this.state[r]=a?-1:2,a&&s&&(this.state[r]=0);const c={};this.queue.forEach(u=>{ole(u.loaded,[i],o),wle(u,r),a&&u.errors.push(a),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(m=>{c[m]||(c[m]={});const g=u.loaded[m];g.length&&g.forEach(f=>{c[m][f]===void 0&&(c[m][f]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(u=>!u.done)}read(r,a,s,n=0,i=this.retryTimeout,o){if(!r.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:r,ns:a,fcName:s,tried:n,wait:i,callback:o});return}this.readingCalls++;const c=(m,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(m&&g&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,r,a,s,n+1,i*2,o)},i);return}o(m,g)},u=this.backend[s].bind(this.backend);if(u.length===2){try{const m=u(r,a);m&&typeof m.then=="function"?m.then(g=>c(null,g)).catch(c):c(null,m)}catch(m){c(m)}return}return u(r,a,c)}prepareLoading(r,a,s={},n){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();Tt(r)&&(r=this.languageUtils.toResolveHierarchy(r)),Tt(a)&&(a=[a]);const i=this.queueLoad(r,a,s,n);if(!i.toLoad.length)return i.pending.length||n(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(r,a,s){this.prepareLoading(r,a,{},s)}reload(r,a,s){this.prepareLoading(r,a,{reload:!0},s)}loadOne(r,a=""){const s=r.split("|"),n=s[0],i=s[1];this.read(n,i,"read",void 0,void 0,(o,c)=>{o&&this.logger.warn(`${a}loading namespace ${i} for language ${n} failed`,o),!o&&c&&this.logger.log(`${a}loaded namespace ${i} for language ${n}`,c),this.loaded(r,o,c)})}saveMissing(r,a,s,n,i,o={},c=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(a)){this.logger.warn(`did not save key "${s}" as the namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const u={...o,isUpdate:i},m=this.backend.create.bind(this.backend);if(m.length<6)try{let g;m.length===5?g=m(r,a,s,n,u):g=m(r,a,s,n),g&&typeof g.then=="function"?g.then(f=>c(null,f)).catch(c):c(null,g)}catch(g){c(g)}else m(r,a,s,n,c,u)}!r||!r[0]||this.store.addResource(r[0],a,s,n)}}}const XP=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let r={};if(typeof e[1]=="object"&&(r=e[1]),Tt(e[1])&&(r.defaultValue=e[1]),Tt(e[2])&&(r.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const a=e[3]||e[2];Object.keys(a).forEach(s=>{r[s]=a[s]})}return r},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),ZP=e=>(Tt(e.ns)&&(e.ns=[e.ns]),Tt(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Tt(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),Ph=()=>{},Nle=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(a=>{typeof e[a]=="function"&&(e[a]=e[a].bind(e))})};class $u extends xx{constructor(r={},a){if(super(),this.options=ZP(r),this.services={},this.logger=ti,this.modules={external:[]},Nle(this),a&&!this.isInitialized&&!r.isClone){if(!this.options.initAsync)return this.init(r,a),this;setTimeout(()=>{this.init(r,a)},0)}}init(r={},a){this.isInitializing=!0,typeof r=="function"&&(a=r,r={}),r.defaultNS==null&&r.ns&&(Tt(r.ns)?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const s=XP();this.options={...s,...this.options,...ZP(r)},this.options.interpolation={...s.interpolation,...this.options.interpolation},r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=s.overloadTranslationOptionHandler);const n=m=>m?typeof m=="function"?new m:m:null;if(!this.options.isClone){this.modules.logger?ti.init(n(this.modules.logger),this.options):ti.init(null,this.options);let m;this.modules.formatter?m=this.modules.formatter:m=ble;const g=new WP(this.options);this.store=new qP(this.options.resources,this.options);const f=this.services;f.logger=ti,f.resourceStore=this.store,f.languageUtils=g,f.pluralResolver=new ple(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),m&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(f.formatter=n(m),f.formatter.init&&f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new YP(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new jle(n(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",(p,...b)=>{this.emit(p,...b)}),this.modules.languageDetector&&(f.languageDetector=n(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=n(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new sf(this.services,this.options),this.translator.on("*",(p,...b)=>{this.emit(p,...b)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,a||(a=Ph),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const m=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);m.length>0&&m[0]!=="dev"&&(this.options.lng=m[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(m=>{this[m]=(...g)=>this.store[m](...g)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(m=>{this[m]=(...g)=>(this.store[m](...g),this)});const c=Cu(),u=()=>{const m=(g,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(f),a(g,f)};if(this.languages&&!this.isInitialized)return m(null,this.t.bind(this));this.changeLanguage(this.options.lng,m)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),c}loadResources(r,a=Ph){let s=a;const n=Tt(r)?r:this.language;if(typeof r=="function"&&(s=r),!this.options.resources||this.options.partialBundledLanguages){if(n?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const i=[],o=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(m=>{m!=="cimode"&&i.indexOf(m)<0&&i.push(m)})};n?o(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>o(u)),this.options.preload?.forEach?.(c=>o(c)),this.services.backendConnector.load(i,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(c)})}else s(null)}reloadResources(r,a,s){const n=Cu();return typeof r=="function"&&(s=r,r=void 0),typeof a=="function"&&(s=a,a=void 0),r||(r=this.languages),a||(a=this.options.ns),s||(s=Ph),this.services.backendConnector.reload(r,a,i=>{n.resolve(),s(i)}),n}use(r){if(!r)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!r.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return r.type==="backend"&&(this.modules.backend=r),(r.type==="logger"||r.log&&r.warn&&r.error)&&(this.modules.logger=r),r.type==="languageDetector"&&(this.modules.languageDetector=r),r.type==="i18nFormat"&&(this.modules.i18nFormat=r),r.type==="postProcessor"&&tL.addPostProcessor(r),r.type==="formatter"&&(this.modules.formatter=r),r.type==="3rdParty"&&this.modules.external.push(r),this}setResolvedLanguage(r){if(!(!r||!this.languages)&&!(["cimode","dev"].indexOf(r)>-1)){for(let a=0;a<this.languages.length;a++){const s=this.languages[a];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(r)<0&&this.store.hasLanguageSomeTranslations(r)&&(this.resolvedLanguage=r,this.languages.unshift(r))}}changeLanguage(r,a){this.isLanguageChangingTo=r;const s=Cu();this.emit("languageChanging",r);const n=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},i=(c,u)=>{u?this.isLanguageChangingTo===r&&(n(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,s.resolve((...m)=>this.t(...m)),a&&a(c,(...m)=>this.t(...m))},o=c=>{!r&&!c&&this.services.languageDetector&&(c=[]);const u=Tt(c)?c:c&&c[0],m=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(Tt(c)?[c]:c);m&&(this.language||n(m),this.translator.language||this.translator.changeLanguage(m),this.services.languageDetector?.cacheUserLanguage?.(m)),this.loadResources(m,g=>{i(g,m)})};return!r&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!r&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(r),s}getFixedT(r,a,s){const n=(i,o,...c)=>{let u;typeof o!="object"?u=this.options.overloadTranslationOptionHandler([i,o].concat(c)):u={...o},u.lng=u.lng||n.lng,u.lngs=u.lngs||n.lngs,u.ns=u.ns||n.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||s||n.keyPrefix);const m=this.options.keySeparator||".";let g;return u.keyPrefix&&Array.isArray(i)?g=i.map(f=>(typeof f=="function"&&(f=Mw(f,{...this.options,...o})),`${u.keyPrefix}${m}${f}`)):(typeof i=="function"&&(i=Mw(i,{...this.options,...o})),g=u.keyPrefix?`${u.keyPrefix}${m}${i}`:i),this.t(g,u)};return Tt(r)?n.lng=r:n.lngs=r,n.ns=a,n.keyPrefix=s,n}t(...r){return this.translator?.translate(...r)}exists(...r){return this.translator?.exists(...r)}setDefaultNamespace(r){this.options.defaultNS=r}hasLoadedNamespace(r,a={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=a.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const o=(c,u)=>{const m=this.services.backendConnector.state[`${c}|${u}`];return m===-1||m===0||m===2};if(a.precheck){const c=a.precheck(this,o);if(c!==void 0)return c}return!!(this.hasResourceBundle(s,r)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(s,r)&&(!n||o(i,r)))}loadNamespaces(r,a){const s=Cu();return this.options.ns?(Tt(r)&&(r=[r]),r.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{s.resolve(),a&&a(n)}),s):(a&&a(),Promise.resolve())}loadLanguages(r,a){const s=Cu();Tt(r)&&(r=[r]);const n=this.options.preload||[],i=r.filter(o=>n.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=n.concat(i),this.loadResources(o=>{s.resolve(),a&&a(o)}),s):(a&&a(),Promise.resolve())}dir(r){if(r||(r=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!r)return"rtl";try{const n=new Intl.Locale(r);if(n&&n.getTextInfo){const i=n.getTextInfo();if(i&&i.direction)return i.direction}}catch{}const a=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new WP(XP());return r.toLowerCase().indexOf("-latn")>1?"ltr":a.indexOf(s.getLanguagePartFromCode(r))>-1||r.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(r={},a){const s=new $u(r,a);return s.createInstance=$u.createInstance,s}cloneInstance(r={},a=Ph){const s=r.forkResourceStore;s&&delete r.forkResourceStore;const n={...this.options,...r,isClone:!0},i=new $u(n);if((r.debug!==void 0||r.prefix!==void 0)&&(i.logger=i.logger.clone(r)),["store","services","language"].forEach(c=>{i[c]=this[c]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},s){const c=Object.keys(this.store.data).reduce((u,m)=>(u[m]={...this.store.data[m]},u[m]=Object.keys(u[m]).reduce((g,f)=>(g[f]={...u[m][f]},g),u[m]),u),{});i.store=new qP(c,n),i.services.resourceStore=i.store}return r.interpolation&&(i.services.interpolator=new YP(n)),i.translator=new sf(i.services,n),i.translator.on("*",(c,...u)=>{i.emit(c,...u)}),i.init(n,a),i.translator.options=n,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ys=$u.createInstance();ys.createInstance;ys.dir;ys.init;ys.loadResources;ys.reloadResources;ys.use;ys.changeLanguage;ys.getFixedT;ys.t;ys.exists;ys.setDefaultNamespace;ys.hasLoadedNamespace;ys.loadNamespaces;ys.loadLanguages;const{slice:kle,forEach:Sle}=[];function Cle(e){return Sle.call(kle.call(arguments,1),r=>{if(r)for(const a in r)e[a]===void 0&&(e[a]=r[a])}),e}function Ele(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(a=>a.test(e))}const JP=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Ale=function(e,r){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},n=encodeURIComponent(r);let i=`${e}=${n}`;if(s.maxAge>0){const o=s.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(o)}`}if(s.domain){if(!JP.test(s.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${s.domain}`}if(s.path){if(!JP.test(s.path))throw new TypeError("option path is invalid");i+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(i+="; HttpOnly"),s.secure&&(i+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(i+="; Partitioned"),i},eT={create(e,r,a,s){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};a&&(n.expires=new Date,n.expires.setTime(n.expires.getTime()+a*60*1e3)),s&&(n.domain=s),document.cookie=Ale(e,r,n)},read(e){const r=`${e}=`,a=document.cookie.split(";");for(let s=0;s<a.length;s++){let n=a[s];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(r)===0)return n.substring(r.length,n.length)}return null},remove(e,r){this.create(e,"",-1,r)}};var Ple={name:"cookie",lookup(e){let{lookupCookie:r}=e;if(r&&typeof document<"u")return eT.read(r)||void 0},cacheUserLanguage(e,r){let{lookupCookie:a,cookieMinutes:s,cookieDomain:n,cookieOptions:i}=r;a&&typeof document<"u"&&eT.create(a,e,s,n,i)}},Tle={name:"querystring",lookup(e){let{lookupQuerystring:r}=e,a;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const i=s.substring(1).split("&");for(let o=0;o<i.length;o++){const c=i[o].indexOf("=");c>0&&i[o].substring(0,c)===r&&(a=i[o].substring(c+1))}}return a}},Dle={name:"hash",lookup(e){let{lookupHash:r,lookupFromHashIndex:a}=e,s;if(typeof window<"u"){const{hash:n}=window.location;if(n&&n.length>2){const i=n.substring(1);if(r){const o=i.split("&");for(let c=0;c<o.length;c++){const u=o[c].indexOf("=");u>0&&o[c].substring(0,u)===r&&(s=o[c].substring(u+1))}}if(s)return s;if(!s&&a>-1){const o=n.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?o[typeof a=="number"?a:0]?.replace("/",""):void 0}}}return s}};let Ac=null;const tT=()=>{if(Ac!==null)return Ac;try{if(Ac=typeof window<"u"&&window.localStorage!==null,!Ac)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Ac=!1}return Ac};var Ole={name:"localStorage",lookup(e){let{lookupLocalStorage:r}=e;if(r&&tT())return window.localStorage.getItem(r)||void 0},cacheUserLanguage(e,r){let{lookupLocalStorage:a}=r;a&&tT()&&window.localStorage.setItem(a,e)}};let Pc=null;const rT=()=>{if(Pc!==null)return Pc;try{if(Pc=typeof window<"u"&&window.sessionStorage!==null,!Pc)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Pc=!1}return Pc};var Ile={name:"sessionStorage",lookup(e){let{lookupSessionStorage:r}=e;if(r&&rT())return window.sessionStorage.getItem(r)||void 0},cacheUserLanguage(e,r){let{lookupSessionStorage:a}=r;a&&rT()&&window.sessionStorage.setItem(a,e)}},Lle={name:"navigator",lookup(e){const r=[];if(typeof navigator<"u"){const{languages:a,userLanguage:s,language:n}=navigator;if(a)for(let i=0;i<a.length;i++)r.push(a[i]);s&&r.push(s),n&&r.push(n)}return r.length>0?r:void 0}},Rle={name:"htmlTag",lookup(e){let{htmlTag:r}=e,a;const s=r||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(a=s.getAttribute("lang")),a}},Mle={name:"path",lookup(e){let{lookupFromPathIndex:r}=e;if(typeof window>"u")return;const a=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?a[typeof r=="number"?r:0]?.replace("/",""):void 0}},_le={name:"subdomain",lookup(e){let{lookupFromSubdomainIndex:r}=e;const a=typeof r=="number"?r+1:1,s=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(s)return s[a]}};let aL=!1;try{document.cookie,aL=!0}catch{}const sL=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];aL||sL.splice(1,1);const $le=()=>({order:sL,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class nL{constructor(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(r,a)}init(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=r,this.options=Cle(a,this.options||{},$le()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=n=>n.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(Ple),this.addDetector(Tle),this.addDetector(Ole),this.addDetector(Ile),this.addDetector(Lle),this.addDetector(Rle),this.addDetector(Mle),this.addDetector(_le),this.addDetector(Dle)}addDetector(r){return this.detectors[r.name]=r,this}detect(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,a=[];return r.forEach(s=>{if(this.detectors[s]){let n=this.detectors[s].lookup(this.options);n&&typeof n=="string"&&(n=[n]),n&&(a=a.concat(n))}}),a=a.filter(s=>s!=null&&!Ele(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?a:a.length>0?a[0]:null}cacheUserLanguage(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;a&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(r)>-1||a.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(r,this.options)}))}}nL.type="languageDetector";const Ule={dashboard:"Dashboard",users:"Users",leads:"Leads",roles:"Roles",income:"Income"},Fle={search:"Search",notifications:"Notifications",theme:"Theme",language:"Language",logout:"Logout",active:"Active",noRole:"No Role",welcome:"Welcome to WeConnect",description:"Your comprehensive lead management system",loading:"Loading...",error:"Error",success:"Success",cancel:"Cancel",save:"Save",edit:"Edit",delete:"Delete",create:"Create",update:"Update",close:"Close",yes:"Yes",no:"No",confirm:"Confirm",back:"Back",next:"Next",previous:"Previous",submit:"Submit",reset:"Reset",filter:"Filter",showFilters:"Show Filters",hide:"Hide",show:"Show",sort:"Sort",refresh:"Refresh",export:"Export",import:"Import",download:"Download",upload:"Upload",view:"View",details:"Details",status:"Status",actions:"Actions",select:"Select",all:"All",none:"None",total:"Total",of:"of",items:"items",page:"Page",perPage:"per page",showing:"Showing",to:"to",results:"results",noData:"No data available",noResults:"No results found",empty:"Empty",required:"Required",optional:"Optional",invalid:"Invalid",valid:"Valid",enabled:"Enabled",disabled:"Disabled",visible:"Visible",hidden:"Hidden",public:"Public",private:"Private",archived:"Archived",draft:"Draft",published:"Published",pending:"Pending",approved:"Approved",rejected:"Rejected",completed:"Completed",inProgress:"In Progress",cancelled:"Cancelled",suspended:"Suspended",information:"Information"},zle={greeting:"Hi, {{name}}",profile:"User Profile",profileDescription:"Manage your account settings and preferences",personalInformation:"Personal Information",rolesAndPermissions:"Roles & Permissions",accountSettings:"Account Settings",themeDescription:"Choose your preferred theme",languageDescription:"Select your preferred language",notificationsDescription:"Manage your notification preferences",settings:"Settings",help:"Help & Support",fullName:"Full Name",firstName:"First Name",lastName:"Last Name",email:"Email",phone:"Phone",role:"Role",permissions:"Permissions",lastLogin:"Last Login",createdAt:"Created At",changePassword:"Change Password",currentPassword:"Current Password",newPassword:"New Password",confirmPassword:"Confirm Password",uploadPicture:"Upload profile picture",logoutConfirmation:"Are you sure you want to logout?",updatedAt:"Updated At",isActive:"Is Active",password:"Password",personalInfo:"Personal Information",security:"Security",preferences:"Preferences",avatar:"Avatar",bio:"Biography",location:"Location",timezone:"Timezone",language:"Language",theme:"Theme",notifications:"Notifications",emailNotifications:"Email Notifications",pushNotifications:"Push Notifications",smsNotifications:"SMS Notifications"},Ble={collapse:"Collapse Sidebar",expand:"Expand Sidebar",menu:"Menu"},qle={en:"English",hi:"Hindi",es:"Spanish",fr:"French",de:"German",ar:"Arabic",zh:"Chinese",ja:"Japanese",ko:"Korean",pt:"Portuguese"},Hle={save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",create:"Create",update:"Update"},Wle={title:"Dashboard",welcome:"Welcome back!",overview:"Overview",stats:"Statistics",recentActivity:"Recent Activity",quickActions:"Quick Actions",totalUsers:"Total Users",totalLeads:"Total Leads",totalRoles:"Total Roles",totalIncome:"Total Income",activeUsers:"Active Users",newUsers:"New Users",newLeads:"New Leads",conversionRate:"Conversion Rate",growth:"Growth",thisMonth:"This Month",lastMonth:"Last Month",thisYear:"This Year",lastYear:"Last Year",today:"Today",yesterday:"Yesterday",week:"Week",month:"Month",quarter:"Quarter",year:"Year",chart:"Chart",table:"Table",list:"List",grid:"Grid",calendar:"Calendar",timeline:"Timeline",analytics:"Analytics",reports:"Reports",insights:"Insights",trends:"Trends",performance:"Performance",metrics:"Metrics",kpi:"KPI",goals:"Goals",targets:"Targets",achievements:"Achievements",milestones:"Milestones"},Vle={title:"Users",addUser:"Add User",editUser:"Edit User",deleteUser:"Delete User",userDetails:"User Details",userList:"User List",userManagement:"User Management",totalUsers:"Total Users",activeUsers:"Active Users",newUsers:"New Users",inactiveUsers:"Inactive Users",allUsers:"All Users",manageAndTrack:"Manage and track your user accounts",user:"User",role:"Role",lastLogin:"Last Login",created:"Created",noRoleAssigned:"No role assigned",inviteUser:"Invite User",bulkActions:"Bulk Actions",selectUsers:"Select Users",exportUsers:"Export Users",importUsers:"Import Users",filterUsers:"Filter Users",searchUsers:"Search Users",sortUsers:"Sort Users",userRoles:"User Roles",userPermissions:"User Permissions",userGroups:"User Groups",userTeams:"User Teams",userDepartments:"User Departments",userLocations:"User Locations",userStatus:"User Status",userType:"User Type",userLevel:"User Level",userCategory:"User Category",userTags:"User Tags",userNotes:"User Notes",userHistory:"User History",userLogs:"User Logs",userAudit:"User Audit",userReports:"User Reports",userAnalytics:"User Analytics"},Kle={title:"Leads",addLead:"Add Lead",editLead:"Edit Lead",deleteLead:"Delete Lead",leadDetails:"Lead Details",leadList:"Lead List",leadManagement:"Lead Management",totalLeads:"Total Leads",newLeads:"New Leads",qualified:"Qualified",closed:"Closed",searchLeads:"Search leads...",leadSource:"Lead Source",leadStatus:"Lead Status",leadStage:"Lead Stage",leadType:"Lead Type",leadPriority:"Lead Priority",leadScore:"Lead Score",leadOwner:"Lead Owner",leadAssigned:"Lead Assigned",leadContact:"Lead Contact",leadCompany:"Lead Company",leadIndustry:"Lead Industry",leadSize:"Lead Size",leadRevenue:"Lead Revenue",leadBudget:"Lead Budget",leadTimeline:"Lead Timeline",leadNotes:"Lead Notes",leadHistory:"Lead History",leadActivities:"Lead Activities",leadTasks:"Lead Tasks",leadEmails:"Lead Emails",leadCalls:"Lead Calls",leadMeetings:"Lead Meetings",leadDocuments:"Lead Documents",leadReports:"Lead Reports",leadAnalytics:"Lead Analytics",leadConversion:"Lead Conversion",leadPipeline:"Lead Pipeline",leadFunnel:"Lead Funnel",leadTracking:"Lead Tracking",leadScoring:"Lead Scoring",leadNurturing:"Lead Nurturing",leadQualification:"Lead Qualification",leadProspecting:"Lead Prospecting",leadGeneration:"Lead Generation",leadCapture:"Lead Capture",leadImport:"Lead Import",leadExport:"Lead Export",leadBulkActions:"Lead Bulk Actions",leadFilter:"Lead Filter",leadSearch:"Lead Search",leadSort:"Lead Sort",status:{new:"New",contacted:"Contacted",qualified:"Qualified",proposal:"Proposal",negotiation:"Negotiation",closed:"Closed",lost:"Lost",converted:"Converted"},table:{lead:"Lead",company:"Company",status:"Status",assignedTo:"Assigned To",created:"Created",actions:"Actions"},form:{createNewLead:"Create New Lead",editLead:"Edit Lead",viewLead:"View Lead",personalInformation:"Personal Information",firstName:"First Name",lastName:"Last Name",email:"Email",phone:"Phone",company:"Company",position:"Position",leadSource:"Lead Source",status:"Status",notes:"Notes",assignedTo:"Assigned To",tags:"Tags",enterFirstName:"Enter first name",enterLastName:"Enter last name",enterEmail:"Enter email",enterPhone:"Enter phone number",enterCompany:"Enter company name",enterPosition:"Enter position",enterNotes:"Enter any additional notes about this lead...",selectLeadSource:"Select lead source",selectStatus:"Select status",selectAssignedUser:"Select assigned user",selectTags:"Select tags",allStatuses:"All Statuses",itemsPerPage:"Items per page",unassigned:"Unassigned",manageAndTrack:"Manage and track your lead pipeline",allLeads:"All Leads"},pagination:{previous:"Previous",next:"Next",showing:"Showing",to:"to",of:"of",results:"results"},deleteConfirmation:"Are you sure you want to delete this lead? This action cannot be undone.",deleteSuccess:"Lead deleted successfully",deleteError:"Failed to delete lead",fetchError:"Failed to fetch leads",saveError:"Failed to save lead"},Gle={changeFromLastMonth:"{{value}} from last month",changeLastMonth:"{{value}} last month",changeFromYesterday:"{{value}} from yesterday"},Yle={title:"Roles",addRole:"Add Role",editRole:"Edit Role",deleteRole:"Delete Role",roleDetails:"Role Details",roleList:"Role List",roleManagement:"Role Management",permissions:"Permissions",totalRoles:"Total Roles",activeRoles:"Active Roles",totalPermissions:"Total Permissions",inactiveRoles:"Inactive Roles",searchRoles:"Search roles...",roleName:"Role Name",roleDescription:"Role Description",rolePermissions:"Role Permissions",roleUsers:"Role Users",roleHierarchy:"Role Hierarchy",roleLevel:"Role Level",roleType:"Role Type",roleCategory:"Role Category",roleStatus:"Role Status",roleAccess:"Role Access",roleScope:"Role Scope",roleInheritance:"Role Inheritance",roleDelegation:"Role Delegation",roleAssignment:"Role Assignment",roleRemoval:"Role Removal",roleTransfer:"Role Transfer",roleAudit:"Role Audit",roleHistory:"Role History",roleReports:"Role Reports",roleAnalytics:"Role Analytics",roleSettings:"Role Settings",roleConfiguration:"Role Configuration",roleTemplates:"Role Templates",rolePresets:"Role Presets",roleCustomization:"Role Customization"},Qle={login:"Login",logout:"Logout",register:"Register",signup:"Sign Up",signin:"Sign In",forgotPassword:"Forgot Password",resetPassword:"Reset Password",changePassword:"Change Password",email:"Email",password:"Password",confirmPassword:"Confirm Password",rememberMe:"Remember Me",staySignedIn:"Stay Signed In",createAccount:"Create Account",alreadyHaveAccount:"Already have an account?",dontHaveAccount:"Don't have an account?",signInWith:"Sign in with",signUpWith:"Sign up with",or:"or",continue:"Continue",back:"Back",next:"Next",previous:"Previous",submit:"Submit",cancel:"Cancel",save:"Save",update:"Update",delete:"Delete",edit:"Edit",view:"View",close:"Close",yes:"Yes",no:"No",confirm:"Confirm",success:"Success",error:"Error",warning:"Warning",info:"Information",loading:"Loading...",processing:"Processing...",pleaseWait:"Please wait...",thankYou:"Thank you!",welcome:"Welcome!",goodbye:"Goodbye!",seeYouLater:"See you later!",takeCare:"Take care!",haveAGreatDay:"Have a great day!",goodMorning:"Good morning!",goodAfternoon:"Good afternoon!",goodEvening:"Good evening!",goodNight:"Good night!"},Xle={confirmDelete:"Confirm Delete",confirmAction:"Confirm Action",areYouSure:"Are you sure?",thisActionCannotBeUndone:"This action cannot be undone.",deleteConfirmation:"Delete Confirmation",actionConfirmation:"Action Confirmation",warning:"Warning",information:"Information",success:"Success",error:"Error",close:"Close",cancel:"Cancel",confirm:"Confirm",yes:"Yes",no:"No",ok:"OK",retry:"Retry",ignore:"Ignore",abort:"Abort",continue:"Continue",back:"Back",next:"Next",previous:"Previous",finish:"Finish",skip:"Skip",reset:"Reset",apply:"Apply",save:"Save",update:"Update",create:"Create",edit:"Edit",delete:"Delete",remove:"Remove",add:"Add",insert:"Insert",append:"Append",prepend:"Prepend",replace:"Replace",move:"Move",copy:"Copy",paste:"Paste",cut:"Cut",duplicate:"Duplicate",clone:"Clone",archive:"Archive",unarchive:"Unarchive",hide:"Hide",show:"Show",expand:"Expand",collapse:"Collapse",minimize:"Minimize",maximize:"Maximize",restore:"Restore",refresh:"Refresh",reload:"Reload",restart:"Restart",stop:"Stop",pause:"Pause",play:"Play",resume:"Resume"},Zle={required:"Required",optional:"Optional",invalid:"Invalid",valid:"Valid",error:"Error",success:"Success",warning:"Warning",info:"Information",help:"Help",hint:"Hint",tip:"Tip",note:"Note",example:"Example",sample:"Sample",template:"Template",default:"Default",custom:"Custom",standard:"Standard",advanced:"Advanced",basic:"Basic",simple:"Simple",complex:"Complex",easy:"Easy",hard:"Hard",difficult:"Difficult",challenging:"Challenging",straightforward:"Straightforward",complicated:"Complicated",intricate:"Intricate",elaborate:"Elaborate",detailed:"Detailed",comprehensive:"Comprehensive",thorough:"Thorough",complete:"Complete",partial:"Partial",incomplete:"Incomplete",finished:"Finished",unfinished:"Unfinished",done:"Done",undone:"Undone",ready:"Ready",notReady:"Not Ready",prepared:"Prepared",unprepared:"Unprepared",set:"Set",unset:"Unset",configured:"Configured",unconfigured:"Unconfigured",enabled:"Enabled",disabled:"Disabled",active:"Active",inactive:"Inactive",online:"Online",offline:"Offline",connected:"Connected",disconnected:"Disconnected",available:"Available",unavailable:"Unavailable",busy:"Busy",free:"Free",occupied:"Occupied",vacant:"Vacant",open:"Open",closed:"Closed",locked:"Locked",unlocked:"Unlocked",secure:"Secure",insecure:"Insecure",public:"Public",private:"Private",shared:"Shared",exclusive:"Exclusive",common:"Common",rare:"Rare",unique:"Unique",ordinary:"Ordinary",extraordinary:"Extraordinary",normal:"Normal",abnormal:"Abnormal",regular:"Regular",irregular:"Irregular",nonStandard:"Non-Standard",conventional:"Conventional",unconventional:"Unconventional",traditional:"Traditional",modern:"Modern",contemporary:"Contemporary",classic:"Classic",vintage:"Vintage",antique:"Antique",new:"New",old:"Old",fresh:"Fresh",stale:"Stale",recent:"Recent",ancient:"Ancient",current:"Current",previous:"Previous",next:"Next",last:"Last",first:"First",initial:"Initial",final:"Final",beginning:"Beginning",end:"End",start:"Start",stop:"Stop",begin:"Begin",finish:"Finish"},Jle={navigation:Ule,common:Fle,user:zle,sidebar:Ble,languages:qle,actions:Hle,dashboard:Wle,users:Vle,leads:Kle,stats:Gle,roles:Yle,auth:Qle,modals:Xle,forms:Zle},ece={dashboard:"",users:"",leads:"",roles:"",income:""},tce={search:"",notifications:"",theme:"",language:"",logout:"",active:"",noRole:"  ",welcome:"WeConnect    ",description:"    ",loading:"   ...",error:"",success:"",cancel:" ",save:"",edit:" ",delete:"",create:"",update:" ",close:" ",yes:"",no:"",confirm:" ",back:"",next:"",previous:"",submit:" ",reset:" ",filter:"",showFilters:" ",hide:"",show:"",sort:" ",refresh:" ",export:" ",import:" ",download:" ",upload:" ",view:"",details:"",status:"",actions:"",select:"",all:"",none:" ",total:"",of:"",items:"",page:"",perPage:" ",showing:"  ",to:"",results:"",noData:"   ",noResults:"   ",empty:"",required:"",optional:"",invalid:"",valid:"",enabled:"",disabled:"",visible:"  ",hidden:" ",public:"",private:"",archived:"",draft:"",published:"",pending:"",approved:"",rejected:"",completed:"",inProgress:" ",cancelled:"",suspended:"",information:""},rce={greeting:", {{name}}",profile:" ",settings:"",help:"  ",fullName:" ",firstName:" ",lastName:" ",email:"",phone:"",role:"",permissions:"",lastLogin:" ",createdAt:" ",updatedAt:"  ",isActive:" ",password:"",confirmPassword:"   ",currentPassword:" ",newPassword:" ",changePassword:" ",personalInfo:" ",security:"",preferences:"",avatar:"",bio:"",location:"",timezone:" ",language:"",theme:"",notifications:"",emailNotifications:" ",pushNotifications:" ",smsNotifications:" "},ace={collapse:"  ",expand:"  ",menu:""},sce={en:"",hi:"",es:"",fr:"",de:"",ar:"",zh:"",ja:"",ko:"",pt:""},nce={save:"",cancel:" ",edit:" ",delete:"",create:"",update:" "},ice={title:"",welcome:"   !",overview:"",stats:"",recentActivity:"  ",quickActions:" ",totalUsers:" ",totalLeads:" ",totalRoles:" ",totalIncome:" ",activeUsers:" ",newUsers:" ",newLeads:" ",conversionRate:" ",growth:"",thisMonth:" ",lastMonth:" ",thisYear:" ",lastYear:" ",today:"",yesterday:"",week:"",month:"",quarter:"",year:"",chart:"",table:"",list:"",grid:"",calendar:"",timeline:"",analytics:"",reports:"",insights:"",trends:"",performance:"",metrics:"",kpi:"",goals:"",targets:"",achievements:"",milestones:"  "},oce={title:"",addUser:" ",editUser:"  ",deleteUser:" ",userDetails:" ",userList:" ",userManagement:" ",totalUsers:" ",activeUsers:" ",newUsers:" ",inactiveUsers:" ",allUsers:" ",manageAndTrack:"       ",user:"",role:"",lastLogin:" ",created:" ",noRoleAssigned:"    ",inviteUser:"   ",bulkActions:" ",selectUsers:" ",exportUsers:"  ",importUsers:"  ",filterUsers:"  ",searchUsers:" ",sortUsers:"  ",userRoles:" ",userPermissions:" ",userGroups:" ",userTeams:" ",userDepartments:" ",userLocations:" ",userStatus:" ",userType:" ",userLevel:" ",userCategory:" ",userTags:" ",userNotes:" ",userHistory:" ",userLogs:" ",userAudit:" ",userReports:" ",userAnalytics:" "},lce={title:"",addLead:" ",editLead:"  ",deleteLead:" ",leadDetails:" ",leadList:" ",leadManagement:" ",totalLeads:" ",newLeads:" ",qualified:"",closed:"",searchLeads:" ...",leadSource:" ",leadStatus:" ",leadStage:" ",leadType:" ",leadPriority:" ",leadScore:" ",leadOwner:" ",leadAssigned:"  ",leadContact:" ",leadCompany:" ",leadIndustry:" ",leadSize:" ",leadRevenue:" ",leadBudget:" ",leadTimeline:" ",leadNotes:" ",leadHistory:" ",leadActivities:" ",leadTasks:" ",leadEmails:" ",leadCalls:" ",leadMeetings:" ",leadDocuments:" ",leadReports:" ",leadAnalytics:" ",leadConversion:" ",leadPipeline:" ",leadFunnel:" ",leadTracking:" ",leadScoring:" ",leadNurturing:" ",leadQualification:" ",leadProspecting:" ",leadGeneration:" ",leadCapture:" ",leadImport:" ",leadExport:" ",leadBulkActions:"  ",leadFilter:" ",leadSearch:" ",leadSort:"  ",status:{new:"",contacted:" ",qualified:"",proposal:"",negotiation:"",closed:"",lost:" "},table:{lead:"",company:"",status:"",assignedTo:" ",created:" ",actions:""},form:{createNewLead:"  ",editLead:"  ",viewLead:" ",personalInformation:" ",firstName:" ",lastName:" ",email:"",phone:"",company:"",position:"",leadSource:" ",status:"",notes:"",assignedTo:" ",tags:"",enterFirstName:"   ",enterLastName:"   ",enterEmail:"  ",enterPhone:"   ",enterCompany:"    ",enterPosition:"  ",enterNotes:"         ...",selectLeadSource:"  ",selectStatus:" ",selectAssignedUser:"    ",selectTags:" ",allStatuses:" ",itemsPerPage:"  ",unassigned:"   ",manageAndTrack:"       ",allLeads:" "},pagination:{previous:"",next:"",showing:"  ",to:"",of:"",results:""},deleteConfirmation:"        ?       ",deleteSuccess:"    ",deleteError:"   ",fetchError:"    ",saveError:"   "},cce={title:"",addRole:" ",editRole:"  ",deleteRole:" ",roleDetails:" ",roleList:" ",roleManagement:" ",permissions:"",totalRoles:" ",activeRoles:" ",totalPermissions:" ",inactiveRoles:" ",searchRoles:" ...",roleName:" ",roleDescription:" ",rolePermissions:" ",roleUsers:" ",roleHierarchy:" ",roleLevel:" ",roleType:" ",roleCategory:" ",roleStatus:" ",roleAccess:" ",roleScope:" ",roleInheritance:" ",roleDelegation:" ",roleAssignment:" ",roleRemoval:" ",roleTransfer:" ",roleAudit:" ",roleHistory:" ",roleReports:" ",roleAnalytics:" ",roleSettings:" ",roleConfiguration:" ",roleTemplates:" ",rolePresets:" ",roleCustomization:" "},dce={login:"",logout:"",register:"",signup:" ",signin:" ",forgotPassword:"  ",resetPassword:"  ",changePassword:" ",email:"",password:"",confirmPassword:"   ",rememberMe:"  ",staySignedIn:"  ",createAccount:" ",alreadyHaveAccount:"    ?",dontHaveAccount:"  ?",signInWith:"    ",signUpWith:"    ",or:"",continue:" ",back:"",next:"",previous:"",submit:" ",cancel:" ",save:"",update:" ",delete:"",edit:" ",view:"",close:" ",yes:"",no:"",confirm:" ",success:"",error:"",warning:"",info:"",loading:"   ...",processing:"   ...",pleaseWait:"  ...",thankYou:"!",welcome:" !",goodbye:"!",seeYouLater:" !",takeCare:" !",haveAGreatDay:"   !",goodMorning:"!",goodAfternoon:" !",goodEvening:"!",goodNight:" !"},uce={changeFromLastMonth:"{{value}}   ",changeLastMonth:"{{value}}  ",changeFromYesterday:"{{value}}  "},mce={confirmDelete:"   ",confirmAction:"   ",areYouSure:"   ?",thisActionCannotBeUndone:"      ",deleteConfirmation:"  ",actionConfirmation:"  ",warning:"",information:"",success:"",error:"",close:" ",cancel:" ",confirm:" ",yes:"",no:"",ok:" ",retry:"  ",ignore:" ",abort:" ",continue:" ",back:"",next:"",previous:"",finish:" ",skip:"",reset:" ",apply:" ",save:"",update:" ",create:"",edit:" ",delete:"",remove:"",add:"",insert:" ",append:"",prepend:" ",replace:"",move:" ",copy:" ",paste:" ",cut:"",duplicate:" ",clone:" ",archive:" ",unarchive:" ",hide:"",show:"",expand:" ",collapse:" ",minimize:" ",maximize:" ",restore:" ",refresh:" ",reload:"  ",restart:"  ",stop:"",pause:"",play:"",resume:" "},gce={required:"",optional:"",invalid:"",valid:"",error:"",success:"",warning:"",info:"",help:"",hint:"",tip:"",note:"",example:"",sample:"",template:"",default:"",custom:"",standard:"",advanced:"",basic:"",simple:"",complex:"",easy:"",hard:"",difficult:"",challenging:"",straightforward:"",complicated:"",intricate:"",elaborate:"",detailed:"",comprehensive:"",thorough:"",complete:"",partial:"",incomplete:"",finished:"",unfinished:"",done:" ",undone:" ",ready:"",notReady:" ",prepared:"",unprepared:"",set:"",unset:"",configured:"  ",unconfigured:"   ",enabled:"",disabled:"",active:"",inactive:"",online:"",offline:"",connected:" ",disconnected:"",available:"",unavailable:"",busy:"",free:"",occupied:"",vacant:"",open:"",closed:"",locked:"",unlocked:"",secure:"",insecure:"",public:"",private:"",shared:"",exclusive:"",common:"",rare:"",unique:"",ordinary:"",extraordinary:"",normal:"",abnormal:"",regular:"",irregular:"",nonStandard:"-",conventional:"",unconventional:"",traditional:"",modern:"",contemporary:"",classic:"",vintage:"",antique:"",new:"",old:"",fresh:"",stale:"",recent:" ",ancient:"",current:"",previous:"",next:"",last:"",first:"",initial:"",final:"",beginning:"",end:"",start:"",stop:"",begin:" ",finish:" "},hce={navigation:ece,common:tce,user:rce,sidebar:ace,languages:sce,actions:nce,dashboard:ice,users:oce,leads:lce,roles:cce,auth:dce,stats:uce,modals:mce,forms:gce},fce={dashboard:"Panel de Control",users:"Usuarios",leads:"Leads",roles:"Roles",income:"Ingresos"},xce={filter:"Filtrar",showFilters:"Mostrar filtros",hide:"Ocultar",show:"Mostrar",search:"Buscar",status:"Estado",actions:"Acciones",language:"Idioma",logout:"Cerrar sesin",information:"Informacin"},pce={greeting:"Hola, {{name}}",profile:"Perfil de Usuario",settings:"Configuracin",help:"Ayuda y Soporte"},yce={collapse:"Contraer Barra Lateral",expand:"Expandir Barra Lateral",menu:"Men"},vce={en:"Ingls",hi:"Hindi",es:"Espaol",fr:"Francs",de:"Alemn",ar:"rabe",zh:"Chino",ja:"Japons",ko:"Coreano",pt:"Portugus"},bce={save:"Guardar",cancel:"Cancelar",edit:"Editar",delete:"Eliminar",create:"Crear",update:"Actualizar"},wce={welcome:"Bienvenido de vuelta!",totalUsers:"Usuarios totales",activeUsers:"Usuarios activos",totalRoles:"Roles totales",recentActivity:"Actividad reciente"},jce={title:"Usuarios",userManagement:"Gestin de usuarios",addUser:"Agregar usuario",totalUsers:"Usuarios totales",activeUsers:"Usuarios activos",newUsers:"Usuarios nuevos",inactiveUsers:"Usuarios inactivos",allUsers:"Todos los usuarios",manageAndTrack:"Administra y sigue tus cuentas de usuario",user:"Usuario",role:"Rol",lastLogin:"ltimo acceso",created:"Creado",noRoleAssigned:"Sin rol asignado",searchUsers:"Buscar usuarios..."},Nce={title:"Leads",leadManagement:"Gestin de leads",addLead:"Agregar lead",totalLeads:"Leads totales",newLeads:"Leads nuevos",qualified:"Calificados",closed:"Cerrados",searchLeads:"Buscar leads...",status:{new:"Nuevo",contacted:"Contactado",qualified:"Calificado",proposal:"Propuesta",negotiation:"Negociacin",closed:"Cerrado",lost:"Perdido"},table:{lead:"Lead",company:"Empresa",status:"Estado",assignedTo:"Asignado a",created:"Creado",actions:"Acciones"},form:{createNewLead:"Crear Nuevo Lead",editLead:"Editar Lead",viewLead:"Ver Lead",personalInformation:"Informacin Personal",firstName:"Nombre",lastName:"Apellido",email:"Correo",phone:"Telfono",company:"Empresa",position:"Cargo",leadSource:"Fuente del Lead",status:"Estado",notes:"Notas",assignedTo:"Asignado a",tags:"Etiquetas",enterFirstName:"Ingrese el nombre",enterLastName:"Ingrese el apellido",enterEmail:"Ingrese el correo",enterPhone:"Ingrese el telfono",enterCompany:"Ingrese el nombre de la empresa",enterPosition:"Ingrese el cargo",enterNotes:"Ingrese cualquier nota adicional sobre este lead...",selectLeadSource:"Seleccione la fuente del lead",selectStatus:"Seleccione el estado",selectAssignedUser:"Seleccione el usuario asignado",selectTags:"Seleccione las etiquetas",allStatuses:"Todos los Estados",itemsPerPage:"Elementos por pgina",unassigned:"Sin asignar",manageAndTrack:"Administra y sigue tu pipeline de leads",allLeads:"Todos los Leads"},pagination:{previous:"Anterior",next:"Siguiente",showing:"Mostrando",to:"a",of:"de",results:"resultados"},deleteConfirmation:"Ests seguro de que quieres eliminar este lead? Esta accin no se puede deshacer.",deleteSuccess:"Lead eliminado exitosamente",deleteError:"Error al eliminar el lead",fetchError:"Error al obtener los leads",saveError:"Error al guardar el lead"},kce={changeFromLastMonth:"{{value}} del mes pasado",changeLastMonth:"{{value}} el mes pasado",changeFromYesterday:"{{value}} de ayer"},Sce={title:"Roles",permissions:"Permisos",roleManagement:"Gestin de roles",createRole:"Crear rol",totalRoles:"Roles totales",activeRoles:"Roles activos",inactiveRoles:"Roles inactivos",totalPermissions:"Permisos totales",searchRoles:"Buscar roles..."},Cce={navigation:fce,common:xce,user:pce,sidebar:yce,languages:vce,actions:bce,dashboard:wce,users:jce,leads:Nce,stats:kce,roles:Sce},Ece={dashboard:"Tableau de Bord",users:"Utilisateurs",leads:"Prospects",roles:"Rles",income:"Revenus"},Ace={filter:"Filtrer",showFilters:"Afficher les filtres",hide:"Masquer",show:"Afficher",search:"Rechercher",status:"Statut",actions:"Actions",language:"Langue",logout:"Dconnexion"},Pce={greeting:"Bonjour, {{name}}",profile:"Profil Utilisateur",settings:"Paramtres",help:"Aide et Support"},Tce={collapse:"Rduire la Barre Latrale",expand:"Dvelopper la Barre Latrale",menu:"Menu"},Dce={en:"Anglais",hi:"Hindi",es:"Espagnol",fr:"Franais",de:"Allemand",ar:"Arabe",zh:"Chinois",ja:"Japonais",ko:"Coren",pt:"Portugais"},Oce={save:"Enregistrer",cancel:"Annuler",edit:"Modifier",delete:"Supprimer",create:"Crer",update:"Mettre  Jour"},Ice={welcome:"Bon retour !",totalUsers:"Utilisateurs totaux",activeUsers:"Utilisateurs actifs",totalRoles:"Rles totaux",recentActivity:"Activit rcente"},Lce={title:"Utilisateurs",userManagement:"Gestion des utilisateurs",addUser:"Ajouter un utilisateur",totalUsers:"Utilisateurs totaux",activeUsers:"Utilisateurs actifs",newUsers:"Nouveaux utilisateurs",inactiveUsers:"Utilisateurs inactifs",allUsers:"Tous les utilisateurs",manageAndTrack:"Grez et suivez vos comptes utilisateur",user:"Utilisateur",role:"Rle",lastLogin:"Dernire connexion",created:"Cr",noRoleAssigned:"Aucun rle attribu",searchUsers:"Rechercher des utilisateurs..."},Rce={title:"Prospects",leadManagement:"Gestion des prospects",addLead:"Ajouter un prospect",totalLeads:"Prospects totaux",newLeads:"Nouveaux prospects",qualified:"Qualifis",closed:"Ferms",searchLeads:"Rechercher des prospects...",status:{new:"Nouveau",contacted:"Contact",qualified:"Qualifi",proposal:"Proposition",negotiation:"Ngociation",closed:"Ferm",lost:"Perdu"}},Mce={title:"Rles",permissions:"Autorisations",roleManagement:"Gestion des rles",createRole:"Crer un rle",totalRoles:"Rles totaux",activeRoles:"Rles actifs",inactiveRoles:"Rles inactifs",totalPermissions:"Autorisations totales",searchRoles:"Rechercher des rles..."},_ce={navigation:Ece,common:Ace,user:Pce,sidebar:Tce,languages:Dce,actions:Oce,dashboard:Ice,users:Lce,leads:Rce,roles:Mce},$ce={dashboard:"Dashboard",users:"Benutzer",leads:"Leads",roles:"Rollen",income:"Einkommen"},Uce={filter:"Filtern",showFilters:"Filter anzeigen",hide:"Ausblenden",show:"Anzeigen",search:"Suche",status:"Status",actions:"Aktionen",language:"Sprache",logout:"Abmelden"},Fce={greeting:"Hallo, {{name}}",profile:"Benutzerprofil",settings:"Einstellungen",help:"Hilfe & Support"},zce={collapse:"Seitenleiste Einklappen",expand:"Seitenleiste Ausklappen",menu:"Men"},Bce={en:"Englisch",hi:"Hindi",es:"Spanisch",fr:"Franzsisch",de:"Deutsch",ar:"Arabisch",zh:"Chinesisch",ja:"Japanisch",ko:"Koreanisch",pt:"Portugiesisch"},qce={save:"Speichern",cancel:"Abbrechen",edit:"Bearbeiten",delete:"Lschen",create:"Erstellen",update:"Aktualisieren"},Hce={welcome:"Willkommen zurck!",totalUsers:"Gesamtbenutzer",activeUsers:"Aktive Benutzer",totalRoles:"Gesamtrollen",recentActivity:"Aktuelle Aktivitt"},Wce={title:"Benutzer",userManagement:"Benutzerverwaltung",addUser:"Benutzer hinzufgen",totalUsers:"Gesamtbenutzer",activeUsers:"Aktive Benutzer",newUsers:"Neue Benutzer",inactiveUsers:"Inaktive Benutzer",allUsers:"Alle Benutzer",manageAndTrack:"Verwalten und verfolgen Sie Ihre Benutzerkonten",user:"Benutzer",role:"Rolle",lastLogin:"Letzte Anmeldung",created:"Erstellt",noRoleAssigned:"Keine Rolle zugewiesen",searchUsers:"Benutzer suchen..."},Vce={title:"Leads",leadManagement:"Lead-Management",addLead:"Lead hinzufgen",totalLeads:"Gesamtleads",newLeads:"Neue Leads",qualified:"Qualifiziert",closed:"Geschlossen",searchLeads:"Leads suchen...",status:{new:"Neu",contacted:"Kontaktiert",qualified:"Qualifiziert",proposal:"Angebot",negotiation:"Verhandlung",closed:"Geschlossen",lost:"Verloren"}},Kce={title:"Rollen",permissions:"Berechtigungen",roleManagement:"Rollenverwaltung",createRole:"Rolle erstellen",totalRoles:"Gesamtrollen",activeRoles:"Aktive Rollen",inactiveRoles:"Inaktive Rollen",totalPermissions:"Gesamtberechtigungen",searchRoles:"Rollen suchen..."},Gce={navigation:$ce,common:Uce,user:Fce,sidebar:zce,languages:Bce,actions:qce,dashboard:Hce,users:Wce,leads:Vce,roles:Kce},Yce={dashboard:" ",users:"",leads:" ",roles:"",income:""},Qce={filter:"",showFilters:"  ",hide:"",show:"",search:"",status:"",actions:"",language:"",logout:" "},Xce={greeting:" {{name}}",profile:"  ",settings:"",help:" "},Zce={collapse:"  ",expand:"  ",menu:""},Jce={en:"",hi:"",es:"",fr:"",de:"",ar:"",zh:"",ja:"",ko:"",pt:""},ede={save:"",cancel:"",edit:"",delete:"",create:"",update:""},tde={welcome:" !",totalUsers:" ",activeUsers:" ",totalRoles:" ",recentActivity:" "},rde={title:"",userManagement:" ",addUser:" ",totalUsers:" ",activeUsers:" ",newUsers:" ",inactiveUsers:"  ",allUsers:" ",manageAndTrack:"    ",user:"",role:"",lastLogin:"  ",created:" ",noRoleAssigned:"   ",searchUsers:"  ..."},ade={title:" ",leadManagement:"  ",addLead:"  ",totalLeads:"  ",newLeads:"  ",qualified:"",closed:"",searchLeads:"   ...",status:{new:"",contacted:" ",qualified:"",proposal:"",negotiation:"",closed:"",lost:""}},sde={title:"",permissions:"",roleManagement:" ",createRole:" ",totalRoles:" ",activeRoles:" ",inactiveRoles:"  ",totalPermissions:" ",searchRoles:"  ..."},nde={navigation:Yce,common:Qce,user:Xce,sidebar:Zce,languages:Jce,actions:ede,dashboard:tde,users:rde,leads:ade,roles:sde},ide={dashboard:"",users:"",leads:"",roles:"",income:""},ode={filter:"",showFilters:"",hide:"",show:"",search:"",status:"",actions:"",language:"",logout:""},lde={greeting:"{{name}}",profile:"",settings:"",help:""},cde={collapse:"",expand:"",menu:""},dde={en:"",hi:"",es:"",fr:"",de:"",ar:"",zh:"",ja:"",ko:"",pt:""},ude={save:"",cancel:"",edit:"",delete:"",create:"",update:""},mde={welcome:"",totalUsers:"",activeUsers:"",totalRoles:"",recentActivity:""},gde={title:"",userManagement:"",addUser:"",totalUsers:"",activeUsers:"",newUsers:"",inactiveUsers:"",allUsers:"",manageAndTrack:"",user:"",role:"",lastLogin:"",created:"",noRoleAssigned:"",searchUsers:"..."},hde={title:"",leadManagement:"",addLead:"",totalLeads:"",newLeads:"",qualified:"",closed:"",searchLeads:"...",status:{new:"",contacted:"",qualified:"",proposal:"",negotiation:"",closed:"",lost:""},table:{lead:"",company:"",status:"",assignedTo:"",created:"",actions:""},form:{email:"",allLeads:""}},fde={title:"",permissions:"",roleManagement:"",createRole:"",totalRoles:"",activeRoles:"",inactiveRoles:"",totalPermissions:"",searchRoles:"..."},xde={navigation:ide,common:ode,user:lde,sidebar:cde,languages:dde,actions:ude,dashboard:mde,users:gde,leads:hde,roles:fde},pde={dashboard:"",users:"",leads:"",roles:"",income:""},yde={filter:"",showFilters:"",hide:"",show:"",search:"",status:"",actions:"",language:"",logout:""},vde={greeting:"{{name}}",profile:"",settings:"",help:""},bde={collapse:"",expand:"",menu:""},wde={en:"",hi:"",es:"",fr:"",de:"",ar:"",zh:"",ja:"",ko:"",pt:""},jde={save:"",cancel:"",edit:"",delete:"",create:"",update:""},Nde={welcome:"",totalUsers:"",activeUsers:"",totalRoles:"",recentActivity:""},kde={title:"",userManagement:"",addUser:"",totalUsers:"",activeUsers:"",newUsers:"",inactiveUsers:"",allUsers:"",manageAndTrack:"",user:"",role:"",lastLogin:"",created:"",noRoleAssigned:"",searchUsers:"..."},Sde={title:"",leadManagement:"",addLead:"",totalLeads:"",newLeads:"",qualified:"",closed:"",searchLeads:"...",status:{new:"",contacted:"",qualified:"",proposal:"",negotiation:"",closed:"",lost:""}},Cde={title:"",permissions:"",roleManagement:"",createRole:"",totalRoles:"",activeRoles:"",inactiveRoles:"",totalPermissions:"",searchRoles:"..."},Ede={navigation:pde,common:yde,user:vde,sidebar:bde,languages:wde,actions:jde,dashboard:Nde,users:kde,leads:Sde,roles:Cde},Ade={dashboard:"",users:"",leads:"",roles:"",income:""},Pde={filter:"",showFilters:" ",hide:"",show:"",search:"",status:"",actions:"",language:"",logout:""},Tde={greeting:", {{name}}",profile:" ",settings:"",help:"  "},Dde={collapse:" ",expand:" ",menu:""},Ode={en:"",hi:"",es:"",fr:"",de:"",ar:"",zh:"",ja:"",ko:"",pt:""},Ide={save:"",cancel:"",edit:"",delete:"",create:"",update:""},Lde={welcome:"   !",totalUsers:" ",activeUsers:" ",totalRoles:" ",recentActivity:" "},Rde={title:"",userManagement:" ",addUser:" ",totalUsers:" ",activeUsers:" ",newUsers:" ",inactiveUsers:" ",allUsers:" ",manageAndTrack:"   ",user:"",role:"",lastLogin:" ",created:"",noRoleAssigned:"  ",searchUsers:" ..."},Mde={title:"",leadManagement:" ",addLead:" ",totalLeads:" ",newLeads:" ",qualified:" ",closed:"",searchLeads:" ...",status:{new:"",contacted:"",qualified:" ",proposal:"",negotiation:"",closed:"",lost:""}},_de={title:"",permissions:"",roleManagement:" ",createRole:" ",totalRoles:" ",activeRoles:" ",inactiveRoles:" ",totalPermissions:" ",searchRoles:" ..."},$de={navigation:Ade,common:Pde,user:Tde,sidebar:Dde,languages:Ode,actions:Ide,dashboard:Lde,users:Rde,leads:Mde,roles:_de},Ude={dashboard:"Painel de Controle",users:"Usurios",leads:"Leads",roles:"Funes",income:"Receita"},Fde={filter:"Filtrar",showFilters:"Mostrar filtros",hide:"Ocultar",show:"Mostrar",search:"Buscar",status:"Status",actions:"Aes",language:"Idioma",logout:"Sair"},zde={greeting:"Ol, {{name}}",profile:"Perfil do Usurio",settings:"Configuraes",help:"Ajuda e Suporte"},Bde={collapse:"Recolher Barra Lateral",expand:"Expandir Barra Lateral",menu:"Menu"},qde={en:"Ingls",hi:"Hindi",es:"Espanhol",fr:"Francs",de:"Alemo",ar:"rabe",zh:"Chins",ja:"Japons",ko:"Coreano",pt:"Portugus"},Hde={save:"Salvar",cancel:"Cancelar",edit:"Editar",delete:"Excluir",create:"Criar",update:"Atualizar"},Wde={welcome:"Bem-vindo de volta!",totalUsers:"Usurios totais",activeUsers:"Usurios ativos",totalRoles:"Funes totais",recentActivity:"Atividade recente"},Vde={title:"Usurios",userManagement:"Gerenciamento de usurios",addUser:"Adicionar usurio",totalUsers:"Usurios totais",activeUsers:"Usurios ativos",newUsers:"Novos usurios",inactiveUsers:"Usurios inativos",allUsers:"Todos os usurios",manageAndTrack:"Gerencie e acompanhe suas contas de usurio",user:"Usurio",role:"Funo",lastLogin:"ltimo acesso",created:"Criado",noRoleAssigned:"Nenhuma funo atribuda",searchUsers:"Pesquisar usurios..."},Kde={title:"Leads",leadManagement:"Gerenciamento de leads",addLead:"Adicionar lead",totalLeads:"Leads totais",newLeads:"Novos leads",qualified:"Qualificados",closed:"Fechados",searchLeads:"Pesquisar leads...",status:{new:"Novo",contacted:"Contactado",qualified:"Qualificado",proposal:"Proposta",negotiation:"Negociao",closed:"Fechado",lost:"Perdido"}},Gde={title:"Funes",permissions:"Permisses",roleManagement:"Gerenciamento de funes",createRole:"Criar funo",totalRoles:"Funes totais",activeRoles:"Funes ativas",inactiveRoles:"Funes inativas",totalPermissions:"Permisses totais",searchRoles:"Pesquisar funes..."},Yde={navigation:Ude,common:Fde,user:zde,sidebar:Bde,languages:qde,actions:Hde,dashboard:Wde,users:Vde,leads:Kde,roles:Gde},Qde={en:{translation:Jle},hi:{translation:hce},es:{translation:Cce},fr:{translation:_ce},de:{translation:Gce},ar:{translation:nde},zh:{translation:xde},ja:{translation:Ede},ko:{translation:$de},pt:{translation:Yde}};ys.use(nL).use(q$).init({resources:Qde,fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]}});document.documentElement.classList.add("no-blur");GR.createRoot(document.getElementById("root")).render(t.jsx(Fe.StrictMode,{children:t.jsx(GM,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:t.jsx(sle,{})})}));
