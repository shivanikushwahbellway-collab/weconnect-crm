function qR(e, r) { for (var a = 0; a < r.length; a++) { const s = r[a]; if (typeof s != "string" && !Array.isArray(s)) { for (const n in s) if (n !== "default" && !(n in e)) { const i = Object.getOwnPropertyDescriptor(s, n); i && Object.defineProperty(e, n, i.get ? i : { enumerable: !0, get: () => s[n] }) } } } return Object.freeze(Object.defineProperty(e, Symbol.toStringTag, { value: "Module" })) } (function () { const r = document.createElement("link").relList; if (r && r.supports && r.supports("modulepreload")) return; for (const n of document.querySelectorAll('link[rel="modulepreload"]')) s(n); new MutationObserver(n => { for (const i of n) if (i.type === "childList") for (const o of i.addedNodes) o.tagName === "LINK" && o.rel === "modulepreload" && s(o) }).observe(document, { childList: !0, subtree: !0 }); function a(n) { const i = {}; return n.integrity && (i.integrity = n.integrity), n.referrerPolicy && (i.referrerPolicy = n.referrerPolicy), n.crossOrigin === "use-credentials" ? i.credentials = "include" : n.crossOrigin === "anonymous" ? i.credentials = "omit" : i.credentials = "same-origin", i } function s(n) { if (n.ep) return; n.ep = !0; const i = a(n); fetch(n.href, i) } })(); function mi(e) { return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e } var Jp = { exports: {} }, gu = {}, ey = { exports: {} }, qt = {}; var IS; function HR() { if (IS) return qt; IS = 1; var e = Symbol.for("react.element"), r = Symbol.for("react.portal"), a = Symbol.for("react.fragment"), s = Symbol.for("react.strict_mode"), n = Symbol.for("react.profiler"), i = Symbol.for("react.provider"), o = Symbol.for("react.context"), c = Symbol.for("react.forward_ref"), u = Symbol.for("react.suspense"), m = Symbol.for("react.memo"), g = Symbol.for("react.lazy"), f = Symbol.iterator; function y(T) { return T === null || typeof T != "object" ? null : (T = f && T[f] || T["@@iterator"], typeof T == "function" ? T : null) } var p = { isMounted: function () { return !1 }, enqueueForceUpdate: function () { }, enqueueReplaceState: function () { }, enqueueSetState: function () { } }, b = Object.assign, j = {}; function v(T, _, H) { this.props = T, this.context = _, this.refs = j, this.updater = H || p } v.prototype.isReactComponent = {}, v.prototype.setState = function (T, _) { if (typeof T != "object" && typeof T != "function" && T != null) throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables."); this.updater.enqueueSetState(this, T, _, "setState") }, v.prototype.forceUpdate = function (T) { this.updater.enqueueForceUpdate(this, T, "forceUpdate") }; function S() { } S.prototype = v.prototype; function k(T, _, H) { this.props = T, this.context = _, this.refs = j, this.updater = H || p } var E = k.prototype = new S; E.constructor = k, b(E, v.prototype), E.isPureReactComponent = !0; var C = Array.isArray, N = Object.prototype.hasOwnProperty, A = { current: null }, D = { key: !0, ref: !0, __self: !0, __source: !0 }; function I(T, _, H) { var U, K = {}, Z = null, J = null; if (_ != null) for (U in _.ref !== void 0 && (J = _.ref), _.key !== void 0 && (Z = "" + _.key), _) N.call(_, U) && !D.hasOwnProperty(U) && (K[U] = _[U]); var te = arguments.length - 2; if (te === 1) K.children = H; else if (1 < te) { for (var G = Array(te), de = 0; de < te; de++)G[de] = arguments[de + 2]; K.children = G } if (T && T.defaultProps) for (U in te = T.defaultProps, te) K[U] === void 0 && (K[U] = te[U]); return { $$typeof: e, type: T, key: Z, ref: J, props: K, _owner: A.current } } function $(T, _) { return { $$typeof: e, type: T.type, key: _, ref: T.ref, props: T.props, _owner: T._owner } } function B(T) { return typeof T == "object" && T !== null && T.$$typeof === e } function W(T) { var _ = { "=": "=0", ":": "=2" }; return "$" + T.replace(/[=:]/g, function (H) { return _[H] }) } var M = /\/+/g; function q(T, _) { return typeof T == "object" && T !== null && T.key != null ? W("" + T.key) : _.toString(36) } function V(T, _, H, U, K) { var Z = typeof T; (Z === "undefined" || Z === "boolean") && (T = null); var J = !1; if (T === null) J = !0; else switch (Z) { case "string": case "number": J = !0; break; case "object": switch (T.$$typeof) { case e: case r: J = !0 } }if (J) return J = T, K = K(J), T = U === "" ? "." + q(J, 0) : U, C(K) ? (H = "", T != null && (H = T.replace(M, "$&/") + "/"), V(K, _, H, "", function (de) { return de })) : K != null && (B(K) && (K = $(K, H + (!K.key || J && J.key === K.key ? "" : ("" + K.key).replace(M, "$&/") + "/") + T)), _.push(K)), 1; if (J = 0, U = U === "" ? "." : U + ":", C(T)) for (var te = 0; te < T.length; te++) { Z = T[te]; var G = U + q(Z, te); J += V(Z, _, H, G, K) } else if (G = y(T), typeof G == "function") for (T = G.call(T), te = 0; !(Z = T.next()).done;)Z = Z.value, G = U + q(Z, te++), J += V(Z, _, H, G, K); else if (Z === "object") throw _ = String(T), Error("Objects are not valid as a React child (found: " + (_ === "[object Object]" ? "object with keys {" + Object.keys(T).join(", ") + "}" : _) + "). If you meant to render a collection of children, use an array instead."); return J } function X(T, _, H) { if (T == null) return T; var U = [], K = 0; return V(T, U, "", "", function (Z) { return _.call(H, Z, K++) }), U } function se(T) { if (T._status === -1) { var _ = T._result; _ = _(), _.then(function (H) { (T._status === 0 || T._status === -1) && (T._status = 1, T._result = H) }, function (H) { (T._status === 0 || T._status === -1) && (T._status = 2, T._result = H) }), T._status === -1 && (T._status = 0, T._result = _) } if (T._status === 1) return T._result.default; throw T._result } var le = { current: null }, ee = { transition: null }, L = { ReactCurrentDispatcher: le, ReactCurrentBatchConfig: ee, ReactCurrentOwner: A }; function z() { throw Error("act(...) is not supported in production builds of React.") } return qt.Children = { map: X, forEach: function (T, _, H) { X(T, function () { _.apply(this, arguments) }, H) }, count: function (T) { var _ = 0; return X(T, function () { _++ }), _ }, toArray: function (T) { return X(T, function (_) { return _ }) || [] }, only: function (T) { if (!B(T)) throw Error("React.Children.only expected to receive a single React element child."); return T } }, qt.Component = v, qt.Fragment = a, qt.Profiler = n, qt.PureComponent = k, qt.StrictMode = s, qt.Suspense = u, qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = L, qt.act = z, qt.cloneElement = function (T, _, H) { if (T == null) throw Error("React.cloneElement(...): The argument must be a React element, but you passed " + T + "."); var U = b({}, T.props), K = T.key, Z = T.ref, J = T._owner; if (_ != null) { if (_.ref !== void 0 && (Z = _.ref, J = A.current), _.key !== void 0 && (K = "" + _.key), T.type && T.type.defaultProps) var te = T.type.defaultProps; for (G in _) N.call(_, G) && !D.hasOwnProperty(G) && (U[G] = _[G] === void 0 && te !== void 0 ? te[G] : _[G]) } var G = arguments.length - 2; if (G === 1) U.children = H; else if (1 < G) { te = Array(G); for (var de = 0; de < G; de++)te[de] = arguments[de + 2]; U.children = te } return { $$typeof: e, type: T.type, key: K, ref: Z, props: U, _owner: J } }, qt.createContext = function (T) { return T = { $$typeof: o, _currentValue: T, _currentValue2: T, _threadCount: 0, Provider: null, Consumer: null, _defaultValue: null, _globalName: null }, T.Provider = { $$typeof: i, _context: T }, T.Consumer = T }, qt.createElement = I, qt.createFactory = function (T) { var _ = I.bind(null, T); return _.type = T, _ }, qt.createRef = function () { return { current: null } }, qt.forwardRef = function (T) { return { $$typeof: c, render: T } }, qt.isValidElement = B, qt.lazy = function (T) { return { $$typeof: g, _payload: { _status: -1, _result: T }, _init: se } }, qt.memo = function (T, _) { return { $$typeof: m, type: T, compare: _ === void 0 ? null : _ } }, qt.startTransition = function (T) { var _ = ee.transition; ee.transition = {}; try { T() } finally { ee.transition = _ } }, qt.unstable_act = z, qt.useCallback = function (T, _) { return le.current.useCallback(T, _) }, qt.useContext = function (T) { return le.current.useContext(T) }, qt.useDebugValue = function () { }, qt.useDeferredValue = function (T) { return le.current.useDeferredValue(T) }, qt.useEffect = function (T, _) { return le.current.useEffect(T, _) }, qt.useId = function () { return le.current.useId() }, qt.useImperativeHandle = function (T, _, H) { return le.current.useImperativeHandle(T, _, H) }, qt.useInsertionEffect = function (T, _) { return le.current.useInsertionEffect(T, _) }, qt.useLayoutEffect = function (T, _) { return le.current.useLayoutEffect(T, _) }, qt.useMemo = function (T, _) { return le.current.useMemo(T, _) }, qt.useReducer = function (T, _, H) { return le.current.useReducer(T, _, H) }, qt.useRef = function (T) { return le.current.useRef(T) }, qt.useState = function (T) { return le.current.useState(T) }, qt.useSyncExternalStore = function (T, _, H) { return le.current.useSyncExternalStore(T, _, H) }, qt.useTransition = function () { return le.current.useTransition() }, qt.version = "18.3.1", qt } var LS; function ld() { return LS || (LS = 1, ey.exports = HR()), ey.exports } var RS; function WR() { if (RS) return gu; RS = 1; var e = ld(), r = Symbol.for("react.element"), a = Symbol.for("react.fragment"), s = Object.prototype.hasOwnProperty, n = e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, i = { key: !0, ref: !0, __self: !0, __source: !0 }; function o(c, u, m) { var g, f = {}, y = null, p = null; m !== void 0 && (y = "" + m), u.key !== void 0 && (y = "" + u.key), u.ref !== void 0 && (p = u.ref); for (g in u) s.call(u, g) && !i.hasOwnProperty(g) && (f[g] = u[g]); if (c && c.defaultProps) for (g in u = c.defaultProps, u) f[g] === void 0 && (f[g] = u[g]); return { $$typeof: r, type: c, key: y, ref: p, props: f, _owner: n.current } } return gu.Fragment = a, gu.jsx = o, gu.jsxs = o, gu } var MS; function VR() { return MS || (MS = 1, Jp.exports = WR()), Jp.exports } var t = VR(), h = ld(); const Je = mi(h), oT = qR({ __proto__: null, default: Je }, [h]); var i0 = {}, ty = { exports: {} }, Ts = {}, ry = { exports: {} }, ay = {}; var _S; function GR() { return _S || (_S = 1, (function (e) { function r(ee, L) { var z = ee.length; ee.push(L); e: for (; 0 < z;) { var T = z - 1 >>> 1, _ = ee[T]; if (0 < n(_, L)) ee[T] = L, ee[z] = _, z = T; else break e } } function a(ee) { return ee.length === 0 ? null : ee[0] } function s(ee) { if (ee.length === 0) return null; var L = ee[0], z = ee.pop(); if (z !== L) { ee[0] = z; e: for (var T = 0, _ = ee.length, H = _ >>> 1; T < H;) { var U = 2 * (T + 1) - 1, K = ee[U], Z = U + 1, J = ee[Z]; if (0 > n(K, z)) Z < _ && 0 > n(J, K) ? (ee[T] = J, ee[Z] = z, T = Z) : (ee[T] = K, ee[U] = z, T = U); else if (Z < _ && 0 > n(J, z)) ee[T] = J, ee[Z] = z, T = Z; else break e } } return L } function n(ee, L) { var z = ee.sortIndex - L.sortIndex; return z !== 0 ? z : ee.id - L.id } if (typeof performance == "object" && typeof performance.now == "function") { var i = performance; e.unstable_now = function () { return i.now() } } else { var o = Date, c = o.now(); e.unstable_now = function () { return o.now() - c } } var u = [], m = [], g = 1, f = null, y = 3, p = !1, b = !1, j = !1, v = typeof setTimeout == "function" ? setTimeout : null, S = typeof clearTimeout == "function" ? clearTimeout : null, k = typeof setImmediate < "u" ? setImmediate : null; typeof navigator < "u" && navigator.scheduling !== void 0 && navigator.scheduling.isInputPending !== void 0 && navigator.scheduling.isInputPending.bind(navigator.scheduling); function E(ee) { for (var L = a(m); L !== null;) { if (L.callback === null) s(m); else if (L.startTime <= ee) s(m), L.sortIndex = L.expirationTime, r(u, L); else break; L = a(m) } } function C(ee) { if (j = !1, E(ee), !b) if (a(u) !== null) b = !0, se(N); else { var L = a(m); L !== null && le(C, L.startTime - ee) } } function N(ee, L) { b = !1, j && (j = !1, S(I), I = -1), p = !0; var z = y; try { for (E(L), f = a(u); f !== null && (!(f.expirationTime > L) || ee && !W());) { var T = f.callback; if (typeof T == "function") { f.callback = null, y = f.priorityLevel; var _ = T(f.expirationTime <= L); L = e.unstable_now(), typeof _ == "function" ? f.callback = _ : f === a(u) && s(u), E(L) } else s(u); f = a(u) } if (f !== null) var H = !0; else { var U = a(m); U !== null && le(C, U.startTime - L), H = !1 } return H } finally { f = null, y = z, p = !1 } } var A = !1, D = null, I = -1, $ = 5, B = -1; function W() { return !(e.unstable_now() - B < $) } function M() { if (D !== null) { var ee = e.unstable_now(); B = ee; var L = !0; try { L = D(!0, ee) } finally { L ? q() : (A = !1, D = null) } } else A = !1 } var q; if (typeof k == "function") q = function () { k(M) }; else if (typeof MessageChannel < "u") { var V = new MessageChannel, X = V.port2; V.port1.onmessage = M, q = function () { X.postMessage(null) } } else q = function () { v(M, 0) }; function se(ee) { D = ee, A || (A = !0, q()) } function le(ee, L) { I = v(function () { ee(e.unstable_now()) }, L) } e.unstable_IdlePriority = 5, e.unstable_ImmediatePriority = 1, e.unstable_LowPriority = 4, e.unstable_NormalPriority = 3, e.unstable_Profiling = null, e.unstable_UserBlockingPriority = 2, e.unstable_cancelCallback = function (ee) { ee.callback = null }, e.unstable_continueExecution = function () { b || p || (b = !0, se(N)) }, e.unstable_forceFrameRate = function (ee) { 0 > ee || 125 < ee ? console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported") : $ = 0 < ee ? Math.floor(1e3 / ee) : 5 }, e.unstable_getCurrentPriorityLevel = function () { return y }, e.unstable_getFirstCallbackNode = function () { return a(u) }, e.unstable_next = function (ee) { switch (y) { case 1: case 2: case 3: var L = 3; break; default: L = y }var z = y; y = L; try { return ee() } finally { y = z } }, e.unstable_pauseExecution = function () { }, e.unstable_requestPaint = function () { }, e.unstable_runWithPriority = function (ee, L) { switch (ee) { case 1: case 2: case 3: case 4: case 5: break; default: ee = 3 }var z = y; y = ee; try { return L() } finally { y = z } }, e.unstable_scheduleCallback = function (ee, L, z) { var T = e.unstable_now(); switch (typeof z == "object" && z !== null ? (z = z.delay, z = typeof z == "number" && 0 < z ? T + z : T) : z = T, ee) { case 1: var _ = -1; break; case 2: _ = 250; break; case 5: _ = 1073741823; break; case 4: _ = 1e4; break; default: _ = 5e3 }return _ = z + _, ee = { id: g++, callback: L, priorityLevel: ee, startTime: z, expirationTime: _, sortIndex: -1 }, z > T ? (ee.sortIndex = z, r(m, ee), a(u) === null && ee === a(m) && (j ? (S(I), I = -1) : j = !0, le(C, z - T))) : (ee.sortIndex = _, r(u, ee), b || p || (b = !0, se(N))), ee }, e.unstable_shouldYield = W, e.unstable_wrapCallback = function (ee) { var L = y; return function () { var z = y; y = L; try { return ee.apply(this, arguments) } finally { y = z } } } })(ay)), ay } var $S; function KR() { return $S || ($S = 1, ry.exports = GR()), ry.exports } var US; function YR() {
    if (US) return Ts; US = 1; var e = ld(), r = KR(); function a(l) { for (var d = "https://reactjs.org/docs/error-decoder.html?invariant=" + l, x = 1; x < arguments.length; x++)d += "&args[]=" + encodeURIComponent(arguments[x]); return "Minified React error #" + l + "; visit " + d + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings." } var s = new Set, n = {}; function i(l, d) { o(l, d), o(l + "Capture", d) } function o(l, d) { for (n[l] = d, l = 0; l < d.length; l++)s.add(d[l]) } var c = !(typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u"), u = Object.prototype.hasOwnProperty, m = /^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/, g = {}, f = {}; function y(l) { return u.call(f, l) ? !0 : u.call(g, l) ? !1 : m.test(l) ? f[l] = !0 : (g[l] = !0, !1) } function p(l, d, x, w) { if (x !== null && x.type === 0) return !1; switch (typeof d) { case "function": case "symbol": return !0; case "boolean": return w ? !1 : x !== null ? !x.acceptsBooleans : (l = l.toLowerCase().slice(0, 5), l !== "data-" && l !== "aria-"); default: return !1 } } function b(l, d, x, w) { if (d === null || typeof d > "u" || p(l, d, x, w)) return !0; if (w) return !1; if (x !== null) switch (x.type) { case 3: return !d; case 4: return d === !1; case 5: return isNaN(d); case 6: return isNaN(d) || 1 > d }return !1 } function j(l, d, x, w, P, O, F) { this.acceptsBooleans = d === 2 || d === 3 || d === 4, this.attributeName = w, this.attributeNamespace = P, this.mustUseProperty = x, this.propertyName = l, this.type = d, this.sanitizeURL = O, this.removeEmptyString = F } var v = {}; "children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function (l) { v[l] = new j(l, 0, !1, l, null, !1, !1) }), [["acceptCharset", "accept-charset"], ["className", "class"], ["htmlFor", "for"], ["httpEquiv", "http-equiv"]].forEach(function (l) { var d = l[0]; v[d] = new j(d, 1, !1, l[1], null, !1, !1) }), ["contentEditable", "draggable", "spellCheck", "value"].forEach(function (l) { v[l] = new j(l, 2, !1, l.toLowerCase(), null, !1, !1) }), ["autoReverse", "externalResourcesRequired", "focusable", "preserveAlpha"].forEach(function (l) { v[l] = new j(l, 2, !1, l, null, !1, !1) }), "allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function (l) { v[l] = new j(l, 3, !1, l.toLowerCase(), null, !1, !1) }), ["checked", "multiple", "muted", "selected"].forEach(function (l) { v[l] = new j(l, 3, !0, l, null, !1, !1) }), ["capture", "download"].forEach(function (l) { v[l] = new j(l, 4, !1, l, null, !1, !1) }), ["cols", "rows", "size", "span"].forEach(function (l) { v[l] = new j(l, 6, !1, l, null, !1, !1) }), ["rowSpan", "start"].forEach(function (l) { v[l] = new j(l, 5, !1, l.toLowerCase(), null, !1, !1) }); var S = /[\-:]([a-z])/g; function k(l) { return l[1].toUpperCase() } "accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function (l) { var d = l.replace(S, k); v[d] = new j(d, 1, !1, l, null, !1, !1) }), "xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function (l) { var d = l.replace(S, k); v[d] = new j(d, 1, !1, l, "http://www.w3.org/1999/xlink", !1, !1) }), ["xml:base", "xml:lang", "xml:space"].forEach(function (l) { var d = l.replace(S, k); v[d] = new j(d, 1, !1, l, "http://www.w3.org/XML/1998/namespace", !1, !1) }), ["tabIndex", "crossOrigin"].forEach(function (l) { v[l] = new j(l, 1, !1, l.toLowerCase(), null, !1, !1) }), v.xlinkHref = new j("xlinkHref", 1, !1, "xlink:href", "http://www.w3.org/1999/xlink", !0, !1), ["src", "href", "action", "formAction"].forEach(function (l) { v[l] = new j(l, 1, !1, l.toLowerCase(), null, !0, !0) }); function E(l, d, x, w) { var P = v.hasOwnProperty(d) ? v[d] : null; (P !== null ? P.type !== 0 : w || !(2 < d.length) || d[0] !== "o" && d[0] !== "O" || d[1] !== "n" && d[1] !== "N") && (b(d, x, P, w) && (x = null), w || P === null ? y(d) && (x === null ? l.removeAttribute(d) : l.setAttribute(d, "" + x)) : P.mustUseProperty ? l[P.propertyName] = x === null ? P.type === 3 ? !1 : "" : x : (d = P.attributeName, w = P.attributeNamespace, x === null ? l.removeAttribute(d) : (P = P.type, x = P === 3 || P === 4 && x === !0 ? "" : "" + x, w ? l.setAttributeNS(w, d, x) : l.setAttribute(d, x)))) } var C = e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED, N = Symbol.for("react.element"), A = Symbol.for("react.portal"), D = Symbol.for("react.fragment"), I = Symbol.for("react.strict_mode"), $ = Symbol.for("react.profiler"), B = Symbol.for("react.provider"), W = Symbol.for("react.context"), M = Symbol.for("react.forward_ref"), q = Symbol.for("react.suspense"), V = Symbol.for("react.suspense_list"), X = Symbol.for("react.memo"), se = Symbol.for("react.lazy"), le = Symbol.for("react.offscreen"), ee = Symbol.iterator; function L(l) { return l === null || typeof l != "object" ? null : (l = ee && l[ee] || l["@@iterator"], typeof l == "function" ? l : null) } var z = Object.assign, T; function _(l) {
        if (T === void 0) try { throw Error() } catch (x) { var d = x.stack.trim().match(/\n( *(at )?)/); T = d && d[1] || "" } return `
`+ T + l
    } var H = !1; function U(l, d) {
        if (!l || H) return ""; H = !0; var x = Error.prepareStackTrace; Error.prepareStackTrace = void 0; try { if (d) if (d = function () { throw Error() }, Object.defineProperty(d.prototype, "props", { set: function () { throw Error() } }), typeof Reflect == "object" && Reflect.construct) { try { Reflect.construct(d, []) } catch (Se) { var w = Se } Reflect.construct(l, [], d) } else { try { d.call() } catch (Se) { w = Se } l.call(d.prototype) } else { try { throw Error() } catch (Se) { w = Se } l() } } catch (Se) {
            if (Se && w && typeof Se.stack == "string") {
                for (var P = Se.stack.split(`
`), O = w.stack.split(`
`), F = P.length - 1, ae = O.length - 1; 1 <= F && 0 <= ae && P[F] !== O[ae];)ae--; for (; 1 <= F && 0 <= ae; F--, ae--)if (P[F] !== O[ae]) {
                    if (F !== 1 || ae !== 1) do if (F--, ae--, 0 > ae || P[F] !== O[ae]) {
                        var oe = `
`+ P[F].replace(" at new ", " at "); return l.displayName && oe.includes("<anonymous>") && (oe = oe.replace("<anonymous>", l.displayName)), oe
                    } while (1 <= F && 0 <= ae); break
                }
            }
        } finally { H = !1, Error.prepareStackTrace = x } return (l = l ? l.displayName || l.name : "") ? _(l) : ""
    } function K(l) { switch (l.tag) { case 5: return _(l.type); case 16: return _("Lazy"); case 13: return _("Suspense"); case 19: return _("SuspenseList"); case 0: case 2: case 15: return l = U(l.type, !1), l; case 11: return l = U(l.type.render, !1), l; case 1: return l = U(l.type, !0), l; default: return "" } } function Z(l) { if (l == null) return null; if (typeof l == "function") return l.displayName || l.name || null; if (typeof l == "string") return l; switch (l) { case D: return "Fragment"; case A: return "Portal"; case $: return "Profiler"; case I: return "StrictMode"; case q: return "Suspense"; case V: return "SuspenseList" }if (typeof l == "object") switch (l.$$typeof) { case W: return (l.displayName || "Context") + ".Consumer"; case B: return (l._context.displayName || "Context") + ".Provider"; case M: var d = l.render; return l = l.displayName, l || (l = d.displayName || d.name || "", l = l !== "" ? "ForwardRef(" + l + ")" : "ForwardRef"), l; case X: return d = l.displayName || null, d !== null ? d : Z(l.type) || "Memo"; case se: d = l._payload, l = l._init; try { return Z(l(d)) } catch { } }return null } function J(l) { var d = l.type; switch (l.tag) { case 24: return "Cache"; case 9: return (d.displayName || "Context") + ".Consumer"; case 10: return (d._context.displayName || "Context") + ".Provider"; case 18: return "DehydratedFragment"; case 11: return l = d.render, l = l.displayName || l.name || "", d.displayName || (l !== "" ? "ForwardRef(" + l + ")" : "ForwardRef"); case 7: return "Fragment"; case 5: return d; case 4: return "Portal"; case 3: return "Root"; case 6: return "Text"; case 16: return Z(d); case 8: return d === I ? "StrictMode" : "Mode"; case 22: return "Offscreen"; case 12: return "Profiler"; case 21: return "Scope"; case 13: return "Suspense"; case 19: return "SuspenseList"; case 25: return "TracingMarker"; case 1: case 0: case 17: case 2: case 14: case 15: if (typeof d == "function") return d.displayName || d.name || null; if (typeof d == "string") return d }return null } function te(l) { switch (typeof l) { case "boolean": case "number": case "string": case "undefined": return l; case "object": return l; default: return "" } } function G(l) { var d = l.type; return (l = l.nodeName) && l.toLowerCase() === "input" && (d === "checkbox" || d === "radio") } function de(l) { var d = G(l) ? "checked" : "value", x = Object.getOwnPropertyDescriptor(l.constructor.prototype, d), w = "" + l[d]; if (!l.hasOwnProperty(d) && typeof x < "u" && typeof x.get == "function" && typeof x.set == "function") { var P = x.get, O = x.set; return Object.defineProperty(l, d, { configurable: !0, get: function () { return P.call(this) }, set: function (F) { w = "" + F, O.call(this, F) } }), Object.defineProperty(l, d, { enumerable: x.enumerable }), { getValue: function () { return w }, setValue: function (F) { w = "" + F }, stopTracking: function () { l._valueTracker = null, delete l[d] } } } } function Te(l) { l._valueTracker || (l._valueTracker = de(l)) } function pe(l) { if (!l) return !1; var d = l._valueTracker; if (!d) return !0; var x = d.getValue(), w = ""; return l && (w = G(l) ? l.checked ? "true" : "false" : l.value), l = w, l !== x ? (d.setValue(l), !0) : !1 } function He(l) { if (l = l || (typeof document < "u" ? document : void 0), typeof l > "u") return null; try { return l.activeElement || l.body } catch { return l.body } } function ne(l, d) { var x = d.checked; return z({}, d, { defaultChecked: void 0, defaultValue: void 0, value: void 0, checked: x ?? l._wrapperState.initialChecked }) } function De(l, d) { var x = d.defaultValue == null ? "" : d.defaultValue, w = d.checked != null ? d.checked : d.defaultChecked; x = te(d.value != null ? d.value : x), l._wrapperState = { initialChecked: w, initialValue: x, controlled: d.type === "checkbox" || d.type === "radio" ? d.checked != null : d.value != null } } function $e(l, d) { d = d.checked, d != null && E(l, "checked", d, !1) } function Et(l, d) { $e(l, d); var x = te(d.value), w = d.type; if (x != null) w === "number" ? (x === 0 && l.value === "" || l.value != x) && (l.value = "" + x) : l.value !== "" + x && (l.value = "" + x); else if (w === "submit" || w === "reset") { l.removeAttribute("value"); return } d.hasOwnProperty("value") ? Ft(l, d.type, x) : d.hasOwnProperty("defaultValue") && Ft(l, d.type, te(d.defaultValue)), d.checked == null && d.defaultChecked != null && (l.defaultChecked = !!d.defaultChecked) } function Bt(l, d, x) { if (d.hasOwnProperty("value") || d.hasOwnProperty("defaultValue")) { var w = d.type; if (!(w !== "submit" && w !== "reset" || d.value !== void 0 && d.value !== null)) return; d = "" + l._wrapperState.initialValue, x || d === l.value || (l.value = d), l.defaultValue = d } x = l.name, x !== "" && (l.name = ""), l.defaultChecked = !!l._wrapperState.initialChecked, x !== "" && (l.name = x) } function Ft(l, d, x) { (d !== "number" || He(l.ownerDocument) !== l) && (x == null ? l.defaultValue = "" + l._wrapperState.initialValue : l.defaultValue !== "" + x && (l.defaultValue = "" + x)) } var mt = Array.isArray; function ce(l, d, x, w) { if (l = l.options, d) { d = {}; for (var P = 0; P < x.length; P++)d["$" + x[P]] = !0; for (x = 0; x < l.length; x++)P = d.hasOwnProperty("$" + l[x].value), l[x].selected !== P && (l[x].selected = P), P && w && (l[x].defaultSelected = !0) } else { for (x = "" + te(x), d = null, P = 0; P < l.length; P++) { if (l[P].value === x) { l[P].selected = !0, w && (l[P].defaultSelected = !0); return } d !== null || l[P].disabled || (d = l[P]) } d !== null && (d.selected = !0) } } function Xe(l, d) { if (d.dangerouslySetInnerHTML != null) throw Error(a(91)); return z({}, d, { value: void 0, defaultValue: void 0, children: "" + l._wrapperState.initialValue }) } function jt(l, d) { var x = d.value; if (x == null) { if (x = d.children, d = d.defaultValue, x != null) { if (d != null) throw Error(a(92)); if (mt(x)) { if (1 < x.length) throw Error(a(93)); x = x[0] } d = x } d == null && (d = ""), x = d } l._wrapperState = { initialValue: te(x) } } function Q(l, d) { var x = te(d.value), w = te(d.defaultValue); x != null && (x = "" + x, x !== l.value && (l.value = x), d.defaultValue == null && l.defaultValue !== x && (l.defaultValue = x)), w != null && (l.defaultValue = "" + w) } function Le(l) { var d = l.textContent; d === l._wrapperState.initialValue && d !== "" && d !== null && (l.value = d) } function Ve(l) { switch (l) { case "svg": return "http://www.w3.org/2000/svg"; case "math": return "http://www.w3.org/1998/Math/MathML"; default: return "http://www.w3.org/1999/xhtml" } } function et(l, d) { return l == null || l === "http://www.w3.org/1999/xhtml" ? Ve(d) : l === "http://www.w3.org/2000/svg" && d === "foreignObject" ? "http://www.w3.org/1999/xhtml" : l } var pt, Y = (function (l) { return typeof MSApp < "u" && MSApp.execUnsafeLocalFunction ? function (d, x, w, P) { MSApp.execUnsafeLocalFunction(function () { return l(d, x, w, P) }) } : l })(function (l, d) { if (l.namespaceURI !== "http://www.w3.org/2000/svg" || "innerHTML" in l) l.innerHTML = d; else { for (pt = pt || document.createElement("div"), pt.innerHTML = "<svg>" + d.valueOf().toString() + "</svg>", d = pt.firstChild; l.firstChild;)l.removeChild(l.firstChild); for (; d.firstChild;)l.appendChild(d.firstChild) } }); function je(l, d) { if (d) { var x = l.firstChild; if (x && x === l.lastChild && x.nodeType === 3) { x.nodeValue = d; return } } l.textContent = d } var Ne = { animationIterationCount: !0, aspectRatio: !0, borderImageOutset: !0, borderImageSlice: !0, borderImageWidth: !0, boxFlex: !0, boxFlexGroup: !0, boxOrdinalGroup: !0, columnCount: !0, columns: !0, flex: !0, flexGrow: !0, flexPositive: !0, flexShrink: !0, flexNegative: !0, flexOrder: !0, gridArea: !0, gridRow: !0, gridRowEnd: !0, gridRowSpan: !0, gridRowStart: !0, gridColumn: !0, gridColumnEnd: !0, gridColumnSpan: !0, gridColumnStart: !0, fontWeight: !0, lineClamp: !0, lineHeight: !0, opacity: !0, order: !0, orphans: !0, tabSize: !0, widows: !0, zIndex: !0, zoom: !0, fillOpacity: !0, floodOpacity: !0, stopOpacity: !0, strokeDasharray: !0, strokeDashoffset: !0, strokeMiterlimit: !0, strokeOpacity: !0, strokeWidth: !0 }, fe = ["Webkit", "ms", "Moz", "O"]; Object.keys(Ne).forEach(function (l) { fe.forEach(function (d) { d = d + l.charAt(0).toUpperCase() + l.substring(1), Ne[d] = Ne[l] }) }); function ke(l, d, x) { return d == null || typeof d == "boolean" || d === "" ? "" : x || typeof d != "number" || d === 0 || Ne.hasOwnProperty(l) && Ne[l] ? ("" + d).trim() : d + "px" } function he(l, d) { l = l.style; for (var x in d) if (d.hasOwnProperty(x)) { var w = x.indexOf("--") === 0, P = ke(x, d[x], w); x === "float" && (x = "cssFloat"), w ? l.setProperty(x, P) : l[x] = P } } var Ee = z({ menuitem: !0 }, { area: !0, base: !0, br: !0, col: !0, embed: !0, hr: !0, img: !0, input: !0, keygen: !0, link: !0, meta: !0, param: !0, source: !0, track: !0, wbr: !0 }); function Ge(l, d) { if (d) { if (Ee[l] && (d.children != null || d.dangerouslySetInnerHTML != null)) throw Error(a(137, l)); if (d.dangerouslySetInnerHTML != null) { if (d.children != null) throw Error(a(60)); if (typeof d.dangerouslySetInnerHTML != "object" || !("__html" in d.dangerouslySetInnerHTML)) throw Error(a(61)) } if (d.style != null && typeof d.style != "object") throw Error(a(62)) } } function qe(l, d) { if (l.indexOf("-") === -1) return typeof d.is == "string"; switch (l) { case "annotation-xml": case "color-profile": case "font-face": case "font-face-src": case "font-face-uri": case "font-face-format": case "font-face-name": case "missing-glyph": return !1; default: return !0 } } var vt = null; function yr(l) { return l = l.target || l.srcElement || window, l.correspondingUseElement && (l = l.correspondingUseElement), l.nodeType === 3 ? l.parentNode : l } var vr = null, tr = null, Nt = null; function Ut(l) { if (l = Zd(l)) { if (typeof vr != "function") throw Error(a(280)); var d = l.stateNode; d && (d = wg(d), vr(l.stateNode, l.type, d)) } } function sr(l) { tr ? Nt ? Nt.push(l) : Nt = [l] : tr = l } function _r() { if (tr) { var l = tr, d = Nt; if (Nt = tr = null, Ut(l), d) for (l = 0; l < d.length; l++)Ut(d[l]) } } function wr(l, d) { return l(d) } function kr() { } var Sr = !1; function Hr(l, d, x) { if (Sr) return l(d, x); Sr = !0; try { return wr(l, d, x) } finally { Sr = !1, (tr !== null || Nt !== null) && (kr(), _r()) } } function nr(l, d) { var x = l.stateNode; if (x === null) return null; var w = wg(x); if (w === null) return null; x = w[d]; e: switch (d) { case "onClick": case "onClickCapture": case "onDoubleClick": case "onDoubleClickCapture": case "onMouseDown": case "onMouseDownCapture": case "onMouseMove": case "onMouseMoveCapture": case "onMouseUp": case "onMouseUpCapture": case "onMouseEnter": (w = !w.disabled) || (l = l.type, w = !(l === "button" || l === "input" || l === "select" || l === "textarea")), l = !w; break e; default: l = !1 }if (l) return null; if (x && typeof x != "function") throw Error(a(231, d, typeof x)); return x } var na = !1; if (c) try { var lr = {}; Object.defineProperty(lr, "passive", { get: function () { na = !0 } }), window.addEventListener("test", lr, lr), window.removeEventListener("test", lr, lr) } catch { na = !1 } function ia(l, d, x, w, P, O, F, ae, oe) { var Se = Array.prototype.slice.call(arguments, 3); try { d.apply(x, Se) } catch (Me) { this.onError(Me) } } var xa = !1, Wr = null, Vr = !1, jr = null, ge = { onError: function (l) { xa = !0, Wr = l } }; function Qe(l, d, x, w, P, O, F, ae, oe) { xa = !1, Wr = null, ia.apply(ge, arguments) } function Rt(l, d, x, w, P, O, F, ae, oe) { if (Qe.apply(this, arguments), xa) { if (xa) { var Se = Wr; xa = !1, Wr = null } else throw Error(a(198)); Vr || (Vr = !0, jr = Se) } } function Ct(l) { var d = l, x = l; if (l.alternate) for (; d.return;)d = d.return; else { l = d; do d = l, (d.flags & 4098) !== 0 && (x = d.return), l = d.return; while (l) } return d.tag === 3 ? x : null } function xe(l) { if (l.tag === 13) { var d = l.memoizedState; if (d === null && (l = l.alternate, l !== null && (d = l.memoizedState)), d !== null) return d.dehydrated } return null } function _e(l) { if (Ct(l) !== l) throw Error(a(188)) } function Be(l) { var d = l.alternate; if (!d) { if (d = Ct(l), d === null) throw Error(a(188)); return d !== l ? null : l } for (var x = l, w = d; ;) { var P = x.return; if (P === null) break; var O = P.alternate; if (O === null) { if (w = P.return, w !== null) { x = w; continue } break } if (P.child === O.child) { for (O = P.child; O;) { if (O === x) return _e(P), l; if (O === w) return _e(P), d; O = O.sibling } throw Error(a(188)) } if (x.return !== w.return) x = P, w = O; else { for (var F = !1, ae = P.child; ae;) { if (ae === x) { F = !0, x = P, w = O; break } if (ae === w) { F = !0, w = P, x = O; break } ae = ae.sibling } if (!F) { for (ae = O.child; ae;) { if (ae === x) { F = !0, x = O, w = P; break } if (ae === w) { F = !0, w = O, x = P; break } ae = ae.sibling } if (!F) throw Error(a(189)) } } if (x.alternate !== w) throw Error(a(190)) } if (x.tag !== 3) throw Error(a(188)); return x.stateNode.current === x ? l : d } function zt(l) { return l = Be(l), l !== null ? At(l) : null } function At(l) { if (l.tag === 5 || l.tag === 6) return l; for (l = l.child; l !== null;) { var d = At(l); if (d !== null) return d; l = l.sibling } return null } var Ns = r.unstable_scheduleCallback, Cr = r.unstable_cancelCallback, ve = r.unstable_shouldYield, Fe = r.unstable_requestPaint, Ie = r.unstable_now, Vt = r.unstable_getCurrentPriorityLevel, ht = r.unstable_ImmediatePriority, re = r.unstable_UserBlockingPriority, Pe = r.unstable_NormalPriority, We = r.unstable_LowPriority, bt = r.unstable_IdlePriority, Ke = null, Tt = null; function Jr(l) { if (Tt && typeof Tt.onCommitFiberRoot == "function") try { Tt.onCommitFiberRoot(Ke, l, void 0, (l.current.flags & 128) === 128) } catch { } } var pa = Math.clz32 ? Math.clz32 : oo, jx = Math.log, Ld = Math.LN2; function oo(l) { return l >>>= 0, l === 0 ? 32 : 31 - (jx(l) / Ld | 0) | 0 } var pi = 64, Ja = 4194304; function tn(l) { switch (l & -l) { case 1: return 1; case 2: return 2; case 4: return 4; case 8: return 8; case 16: return 16; case 32: return 32; case 64: case 128: case 256: case 512: case 1024: case 2048: case 4096: case 8192: case 16384: case 32768: case 65536: case 131072: case 262144: case 524288: case 1048576: case 2097152: return l & 4194240; case 4194304: case 8388608: case 16777216: case 33554432: case 67108864: return l & 130023424; case 134217728: return 134217728; case 268435456: return 268435456; case 536870912: return 536870912; case 1073741824: return 1073741824; default: return l } } function oa(l, d) { var x = l.pendingLanes; if (x === 0) return 0; var w = 0, P = l.suspendedLanes, O = l.pingedLanes, F = x & 268435455; if (F !== 0) { var ae = F & ~P; ae !== 0 ? w = tn(ae) : (O &= F, O !== 0 && (w = tn(O))) } else F = x & ~P, F !== 0 ? w = tn(F) : O !== 0 && (w = tn(O)); if (w === 0) return 0; if (d !== 0 && d !== w && (d & P) === 0 && (P = w & -w, O = d & -d, P >= O || P === 16 && (O & 4194240) !== 0)) return d; if ((w & 4) !== 0 && (w |= x & 16), d = l.entangledLanes, d !== 0) for (l = l.entanglements, d &= w; 0 < d;)x = 31 - pa(d), P = 1 << x, w |= l[x], d &= ~P; return w } function ks(l, d) { switch (l) { case 1: case 2: case 4: return d + 250; case 8: case 16: case 32: case 64: case 128: case 256: case 512: case 1024: case 2048: case 4096: case 8192: case 16384: case 32768: case 65536: case 131072: case 262144: case 524288: case 1048576: case 2097152: return d + 5e3; case 4194304: case 8388608: case 16777216: case 33554432: case 67108864: return -1; case 134217728: case 268435456: case 536870912: case 1073741824: return -1; default: return -1 } } function zs(l, d) { for (var x = l.suspendedLanes, w = l.pingedLanes, P = l.expirationTimes, O = l.pendingLanes; 0 < O;) { var F = 31 - pa(O), ae = 1 << F, oe = P[F]; oe === -1 ? ((ae & x) === 0 || (ae & w) !== 0) && (P[F] = ks(ae, d)) : oe <= d && (l.expiredLanes |= ae), O &= ~ae } } function lo(l) { return l = l.pendingLanes & -1073741825, l !== 0 ? l : l & 1073741824 ? 1073741824 : 0 } function rl() { var l = pi; return pi <<= 1, (pi & 4194240) === 0 && (pi = 64), l } function ac(l) { for (var d = [], x = 0; 31 > x; x++)d.push(l); return d } function yi(l, d, x) { l.pendingLanes |= d, d !== 536870912 && (l.suspendedLanes = 0, l.pingedLanes = 0), l = l.eventTimes, d = 31 - pa(d), l[d] = x } function al(l, d) { var x = l.pendingLanes & ~d; l.pendingLanes = d, l.suspendedLanes = 0, l.pingedLanes = 0, l.expiredLanes &= d, l.mutableReadLanes &= d, l.entangledLanes &= d, d = l.entanglements; var w = l.eventTimes; for (l = l.expirationTimes; 0 < x;) { var P = 31 - pa(x), O = 1 << P; d[P] = 0, w[P] = -1, l[P] = -1, x &= ~O } } function Rd(l, d) { var x = l.entangledLanes |= d; for (l = l.entanglements; x;) { var w = 31 - pa(x), P = 1 << w; P & d | l[w] & d && (l[w] |= d), x &= ~P } } var gr = 0; function uk(l) { return l &= -l, 1 < l ? 4 < l ? (l & 268435455) !== 0 ? 16 : 536870912 : 4 : 1 } var mk, Nx, gk, hk, fk, kx = !1, ig = [], co = null, uo = null, mo = null, Md = new Map, _d = new Map, go = [], uL = "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" "); function xk(l, d) { switch (l) { case "focusin": case "focusout": co = null; break; case "dragenter": case "dragleave": uo = null; break; case "mouseover": case "mouseout": mo = null; break; case "pointerover": case "pointerout": Md.delete(d.pointerId); break; case "gotpointercapture": case "lostpointercapture": _d.delete(d.pointerId) } } function $d(l, d, x, w, P, O) { return l === null || l.nativeEvent !== O ? (l = { blockedOn: d, domEventName: x, eventSystemFlags: w, nativeEvent: O, targetContainers: [P] }, d !== null && (d = Zd(d), d !== null && Nx(d)), l) : (l.eventSystemFlags |= w, d = l.targetContainers, P !== null && d.indexOf(P) === -1 && d.push(P), l) } function mL(l, d, x, w, P) { switch (d) { case "focusin": return co = $d(co, l, d, x, w, P), !0; case "dragenter": return uo = $d(uo, l, d, x, w, P), !0; case "mouseover": return mo = $d(mo, l, d, x, w, P), !0; case "pointerover": var O = P.pointerId; return Md.set(O, $d(Md.get(O) || null, l, d, x, w, P)), !0; case "gotpointercapture": return O = P.pointerId, _d.set(O, $d(_d.get(O) || null, l, d, x, w, P)), !0 }return !1 } function pk(l) { var d = sl(l.target); if (d !== null) { var x = Ct(d); if (x !== null) { if (d = x.tag, d === 13) { if (d = xe(x), d !== null) { l.blockedOn = d, fk(l.priority, function () { gk(x) }); return } } else if (d === 3 && x.stateNode.current.memoizedState.isDehydrated) { l.blockedOn = x.tag === 3 ? x.stateNode.containerInfo : null; return } } } l.blockedOn = null } function og(l) { if (l.blockedOn !== null) return !1; for (var d = l.targetContainers; 0 < d.length;) { var x = Cx(l.domEventName, l.eventSystemFlags, d[0], l.nativeEvent); if (x === null) { x = l.nativeEvent; var w = new x.constructor(x.type, x); vt = w, x.target.dispatchEvent(w), vt = null } else return d = Zd(x), d !== null && Nx(d), l.blockedOn = x, !1; d.shift() } return !0 } function yk(l, d, x) { og(l) && x.delete(d) } function gL() { kx = !1, co !== null && og(co) && (co = null), uo !== null && og(uo) && (uo = null), mo !== null && og(mo) && (mo = null), Md.forEach(yk), _d.forEach(yk) } function Ud(l, d) { l.blockedOn === d && (l.blockedOn = null, kx || (kx = !0, r.unstable_scheduleCallback(r.unstable_NormalPriority, gL))) } function Fd(l) { function d(P) { return Ud(P, l) } if (0 < ig.length) { Ud(ig[0], l); for (var x = 1; x < ig.length; x++) { var w = ig[x]; w.blockedOn === l && (w.blockedOn = null) } } for (co !== null && Ud(co, l), uo !== null && Ud(uo, l), mo !== null && Ud(mo, l), Md.forEach(d), _d.forEach(d), x = 0; x < go.length; x++)w = go[x], w.blockedOn === l && (w.blockedOn = null); for (; 0 < go.length && (x = go[0], x.blockedOn === null);)pk(x), x.blockedOn === null && go.shift() } var sc = C.ReactCurrentBatchConfig, lg = !0; function hL(l, d, x, w) { var P = gr, O = sc.transition; sc.transition = null; try { gr = 1, Sx(l, d, x, w) } finally { gr = P, sc.transition = O } } function fL(l, d, x, w) { var P = gr, O = sc.transition; sc.transition = null; try { gr = 4, Sx(l, d, x, w) } finally { gr = P, sc.transition = O } } function Sx(l, d, x, w) { if (lg) { var P = Cx(l, d, x, w); if (P === null) qx(l, d, w, cg, x), xk(l, w); else if (mL(P, l, d, x, w)) w.stopPropagation(); else if (xk(l, w), d & 4 && -1 < uL.indexOf(l)) { for (; P !== null;) { var O = Zd(P); if (O !== null && mk(O), O = Cx(l, d, x, w), O === null && qx(l, d, w, cg, x), O === P) break; P = O } P !== null && w.stopPropagation() } else qx(l, d, w, null, x) } } var cg = null; function Cx(l, d, x, w) { if (cg = null, l = yr(w), l = sl(l), l !== null) if (d = Ct(l), d === null) l = null; else if (x = d.tag, x === 13) { if (l = xe(d), l !== null) return l; l = null } else if (x === 3) { if (d.stateNode.current.memoizedState.isDehydrated) return d.tag === 3 ? d.stateNode.containerInfo : null; l = null } else d !== l && (l = null); return cg = l, null } function vk(l) { switch (l) { case "cancel": case "click": case "close": case "contextmenu": case "copy": case "cut": case "auxclick": case "dblclick": case "dragend": case "dragstart": case "drop": case "focusin": case "focusout": case "input": case "invalid": case "keydown": case "keypress": case "keyup": case "mousedown": case "mouseup": case "paste": case "pause": case "play": case "pointercancel": case "pointerdown": case "pointerup": case "ratechange": case "reset": case "resize": case "seeked": case "submit": case "touchcancel": case "touchend": case "touchstart": case "volumechange": case "change": case "selectionchange": case "textInput": case "compositionstart": case "compositionend": case "compositionupdate": case "beforeblur": case "afterblur": case "beforeinput": case "blur": case "fullscreenchange": case "focus": case "hashchange": case "popstate": case "select": case "selectstart": return 1; case "drag": case "dragenter": case "dragexit": case "dragleave": case "dragover": case "mousemove": case "mouseout": case "mouseover": case "pointermove": case "pointerout": case "pointerover": case "scroll": case "toggle": case "touchmove": case "wheel": case "mouseenter": case "mouseleave": case "pointerenter": case "pointerleave": return 4; case "message": switch (Vt()) { case ht: return 1; case re: return 4; case Pe: case We: return 16; case bt: return 536870912; default: return 16 }default: return 16 } } var ho = null, Ex = null, dg = null; function bk() { if (dg) return dg; var l, d = Ex, x = d.length, w, P = "value" in ho ? ho.value : ho.textContent, O = P.length; for (l = 0; l < x && d[l] === P[l]; l++); var F = x - l; for (w = 1; w <= F && d[x - w] === P[O - w]; w++); return dg = P.slice(l, 1 < w ? 1 - w : void 0) } function ug(l) { var d = l.keyCode; return "charCode" in l ? (l = l.charCode, l === 0 && d === 13 && (l = 13)) : l = d, l === 10 && (l = 13), 32 <= l || l === 13 ? l : 0 } function mg() { return !0 } function wk() { return !1 } function Bs(l) { function d(x, w, P, O, F) { this._reactName = x, this._targetInst = P, this.type = w, this.nativeEvent = O, this.target = F, this.currentTarget = null; for (var ae in l) l.hasOwnProperty(ae) && (x = l[ae], this[ae] = x ? x(O) : O[ae]); return this.isDefaultPrevented = (O.defaultPrevented != null ? O.defaultPrevented : O.returnValue === !1) ? mg : wk, this.isPropagationStopped = wk, this } return z(d.prototype, { preventDefault: function () { this.defaultPrevented = !0; var x = this.nativeEvent; x && (x.preventDefault ? x.preventDefault() : typeof x.returnValue != "unknown" && (x.returnValue = !1), this.isDefaultPrevented = mg) }, stopPropagation: function () { var x = this.nativeEvent; x && (x.stopPropagation ? x.stopPropagation() : typeof x.cancelBubble != "unknown" && (x.cancelBubble = !0), this.isPropagationStopped = mg) }, persist: function () { }, isPersistent: mg }), d } var nc = { eventPhase: 0, bubbles: 0, cancelable: 0, timeStamp: function (l) { return l.timeStamp || Date.now() }, defaultPrevented: 0, isTrusted: 0 }, Ax = Bs(nc), zd = z({}, nc, { view: 0, detail: 0 }), xL = Bs(zd), Px, Tx, Bd, gg = z({}, zd, { screenX: 0, screenY: 0, clientX: 0, clientY: 0, pageX: 0, pageY: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, getModifierState: Ox, button: 0, buttons: 0, relatedTarget: function (l) { return l.relatedTarget === void 0 ? l.fromElement === l.srcElement ? l.toElement : l.fromElement : l.relatedTarget }, movementX: function (l) { return "movementX" in l ? l.movementX : (l !== Bd && (Bd && l.type === "mousemove" ? (Px = l.screenX - Bd.screenX, Tx = l.screenY - Bd.screenY) : Tx = Px = 0, Bd = l), Px) }, movementY: function (l) { return "movementY" in l ? l.movementY : Tx } }), jk = Bs(gg), pL = z({}, gg, { dataTransfer: 0 }), yL = Bs(pL), vL = z({}, zd, { relatedTarget: 0 }), Dx = Bs(vL), bL = z({}, nc, { animationName: 0, elapsedTime: 0, pseudoElement: 0 }), wL = Bs(bL), jL = z({}, nc, { clipboardData: function (l) { return "clipboardData" in l ? l.clipboardData : window.clipboardData } }), NL = Bs(jL), kL = z({}, nc, { data: 0 }), Nk = Bs(kL), SL = { Esc: "Escape", Spacebar: " ", Left: "ArrowLeft", Up: "ArrowUp", Right: "ArrowRight", Down: "ArrowDown", Del: "Delete", Win: "OS", Menu: "ContextMenu", Apps: "ContextMenu", Scroll: "ScrollLock", MozPrintableKey: "Unidentified" }, CL = { 8: "Backspace", 9: "Tab", 12: "Clear", 13: "Enter", 16: "Shift", 17: "Control", 18: "Alt", 19: "Pause", 20: "CapsLock", 27: "Escape", 32: " ", 33: "PageUp", 34: "PageDown", 35: "End", 36: "Home", 37: "ArrowLeft", 38: "ArrowUp", 39: "ArrowRight", 40: "ArrowDown", 45: "Insert", 46: "Delete", 112: "F1", 113: "F2", 114: "F3", 115: "F4", 116: "F5", 117: "F6", 118: "F7", 119: "F8", 120: "F9", 121: "F10", 122: "F11", 123: "F12", 144: "NumLock", 145: "ScrollLock", 224: "Meta" }, EL = { Alt: "altKey", Control: "ctrlKey", Meta: "metaKey", Shift: "shiftKey" }; function AL(l) { var d = this.nativeEvent; return d.getModifierState ? d.getModifierState(l) : (l = EL[l]) ? !!d[l] : !1 } function Ox() { return AL } var PL = z({}, zd, { key: function (l) { if (l.key) { var d = SL[l.key] || l.key; if (d !== "Unidentified") return d } return l.type === "keypress" ? (l = ug(l), l === 13 ? "Enter" : String.fromCharCode(l)) : l.type === "keydown" || l.type === "keyup" ? CL[l.keyCode] || "Unidentified" : "" }, code: 0, location: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, repeat: 0, locale: 0, getModifierState: Ox, charCode: function (l) { return l.type === "keypress" ? ug(l) : 0 }, keyCode: function (l) { return l.type === "keydown" || l.type === "keyup" ? l.keyCode : 0 }, which: function (l) { return l.type === "keypress" ? ug(l) : l.type === "keydown" || l.type === "keyup" ? l.keyCode : 0 } }), TL = Bs(PL), DL = z({}, gg, { pointerId: 0, width: 0, height: 0, pressure: 0, tangentialPressure: 0, tiltX: 0, tiltY: 0, twist: 0, pointerType: 0, isPrimary: 0 }), kk = Bs(DL), OL = z({}, zd, { touches: 0, targetTouches: 0, changedTouches: 0, altKey: 0, metaKey: 0, ctrlKey: 0, shiftKey: 0, getModifierState: Ox }), IL = Bs(OL), LL = z({}, nc, { propertyName: 0, elapsedTime: 0, pseudoElement: 0 }), RL = Bs(LL), ML = z({}, gg, { deltaX: function (l) { return "deltaX" in l ? l.deltaX : "wheelDeltaX" in l ? -l.wheelDeltaX : 0 }, deltaY: function (l) { return "deltaY" in l ? l.deltaY : "wheelDeltaY" in l ? -l.wheelDeltaY : "wheelDelta" in l ? -l.wheelDelta : 0 }, deltaZ: 0, deltaMode: 0 }), _L = Bs(ML), $L = [9, 13, 27, 32], Ix = c && "CompositionEvent" in window, qd = null; c && "documentMode" in document && (qd = document.documentMode); var UL = c && "TextEvent" in window && !qd, Sk = c && (!Ix || qd && 8 < qd && 11 >= qd), Ck = " ", Ek = !1; function Ak(l, d) { switch (l) { case "keyup": return $L.indexOf(d.keyCode) !== -1; case "keydown": return d.keyCode !== 229; case "keypress": case "mousedown": case "focusout": return !0; default: return !1 } } function Pk(l) { return l = l.detail, typeof l == "object" && "data" in l ? l.data : null } var ic = !1; function FL(l, d) { switch (l) { case "compositionend": return Pk(d); case "keypress": return d.which !== 32 ? null : (Ek = !0, Ck); case "textInput": return l = d.data, l === Ck && Ek ? null : l; default: return null } } function zL(l, d) { if (ic) return l === "compositionend" || !Ix && Ak(l, d) ? (l = bk(), dg = Ex = ho = null, ic = !1, l) : null; switch (l) { case "paste": return null; case "keypress": if (!(d.ctrlKey || d.altKey || d.metaKey) || d.ctrlKey && d.altKey) { if (d.char && 1 < d.char.length) return d.char; if (d.which) return String.fromCharCode(d.which) } return null; case "compositionend": return Sk && d.locale !== "ko" ? null : d.data; default: return null } } var BL = { color: !0, date: !0, datetime: !0, "datetime-local": !0, email: !0, month: !0, number: !0, password: !0, range: !0, search: !0, tel: !0, text: !0, time: !0, url: !0, week: !0 }; function Tk(l) { var d = l && l.nodeName && l.nodeName.toLowerCase(); return d === "input" ? !!BL[l.type] : d === "textarea" } function Dk(l, d, x, w) { sr(w), d = yg(d, "onChange"), 0 < d.length && (x = new Ax("onChange", "change", null, x, w), l.push({ event: x, listeners: d })) } var Hd = null, Wd = null; function qL(l) { Yk(l, 0) } function hg(l) { var d = uc(l); if (pe(d)) return l } function HL(l, d) { if (l === "change") return d } var Ok = !1; if (c) { var Lx; if (c) { var Rx = "oninput" in document; if (!Rx) { var Ik = document.createElement("div"); Ik.setAttribute("oninput", "return;"), Rx = typeof Ik.oninput == "function" } Lx = Rx } else Lx = !1; Ok = Lx && (!document.documentMode || 9 < document.documentMode) } function Lk() { Hd && (Hd.detachEvent("onpropertychange", Rk), Wd = Hd = null) } function Rk(l) { if (l.propertyName === "value" && hg(Wd)) { var d = []; Dk(d, Wd, l, yr(l)), Hr(qL, d) } } function WL(l, d, x) { l === "focusin" ? (Lk(), Hd = d, Wd = x, Hd.attachEvent("onpropertychange", Rk)) : l === "focusout" && Lk() } function VL(l) { if (l === "selectionchange" || l === "keyup" || l === "keydown") return hg(Wd) } function GL(l, d) { if (l === "click") return hg(d) } function KL(l, d) { if (l === "input" || l === "change") return hg(d) } function YL(l, d) { return l === d && (l !== 0 || 1 / l === 1 / d) || l !== l && d !== d } var An = typeof Object.is == "function" ? Object.is : YL; function Vd(l, d) { if (An(l, d)) return !0; if (typeof l != "object" || l === null || typeof d != "object" || d === null) return !1; var x = Object.keys(l), w = Object.keys(d); if (x.length !== w.length) return !1; for (w = 0; w < x.length; w++) { var P = x[w]; if (!u.call(d, P) || !An(l[P], d[P])) return !1 } return !0 } function Mk(l) { for (; l && l.firstChild;)l = l.firstChild; return l } function _k(l, d) { var x = Mk(l); l = 0; for (var w; x;) { if (x.nodeType === 3) { if (w = l + x.textContent.length, l <= d && w >= d) return { node: x, offset: d - l }; l = w } e: { for (; x;) { if (x.nextSibling) { x = x.nextSibling; break e } x = x.parentNode } x = void 0 } x = Mk(x) } } function $k(l, d) { return l && d ? l === d ? !0 : l && l.nodeType === 3 ? !1 : d && d.nodeType === 3 ? $k(l, d.parentNode) : "contains" in l ? l.contains(d) : l.compareDocumentPosition ? !!(l.compareDocumentPosition(d) & 16) : !1 : !1 } function Uk() { for (var l = window, d = He(); d instanceof l.HTMLIFrameElement;) { try { var x = typeof d.contentWindow.location.href == "string" } catch { x = !1 } if (x) l = d.contentWindow; else break; d = He(l.document) } return d } function Mx(l) { var d = l && l.nodeName && l.nodeName.toLowerCase(); return d && (d === "input" && (l.type === "text" || l.type === "search" || l.type === "tel" || l.type === "url" || l.type === "password") || d === "textarea" || l.contentEditable === "true") } function QL(l) { var d = Uk(), x = l.focusedElem, w = l.selectionRange; if (d !== x && x && x.ownerDocument && $k(x.ownerDocument.documentElement, x)) { if (w !== null && Mx(x)) { if (d = w.start, l = w.end, l === void 0 && (l = d), "selectionStart" in x) x.selectionStart = d, x.selectionEnd = Math.min(l, x.value.length); else if (l = (d = x.ownerDocument || document) && d.defaultView || window, l.getSelection) { l = l.getSelection(); var P = x.textContent.length, O = Math.min(w.start, P); w = w.end === void 0 ? O : Math.min(w.end, P), !l.extend && O > w && (P = w, w = O, O = P), P = _k(x, O); var F = _k(x, w); P && F && (l.rangeCount !== 1 || l.anchorNode !== P.node || l.anchorOffset !== P.offset || l.focusNode !== F.node || l.focusOffset !== F.offset) && (d = d.createRange(), d.setStart(P.node, P.offset), l.removeAllRanges(), O > w ? (l.addRange(d), l.extend(F.node, F.offset)) : (d.setEnd(F.node, F.offset), l.addRange(d))) } } for (d = [], l = x; l = l.parentNode;)l.nodeType === 1 && d.push({ element: l, left: l.scrollLeft, top: l.scrollTop }); for (typeof x.focus == "function" && x.focus(), x = 0; x < d.length; x++)l = d[x], l.element.scrollLeft = l.left, l.element.scrollTop = l.top } } var XL = c && "documentMode" in document && 11 >= document.documentMode, oc = null, _x = null, Gd = null, $x = !1; function Fk(l, d, x) { var w = x.window === x ? x.document : x.nodeType === 9 ? x : x.ownerDocument; $x || oc == null || oc !== He(w) || (w = oc, "selectionStart" in w && Mx(w) ? w = { start: w.selectionStart, end: w.selectionEnd } : (w = (w.ownerDocument && w.ownerDocument.defaultView || window).getSelection(), w = { anchorNode: w.anchorNode, anchorOffset: w.anchorOffset, focusNode: w.focusNode, focusOffset: w.focusOffset }), Gd && Vd(Gd, w) || (Gd = w, w = yg(_x, "onSelect"), 0 < w.length && (d = new Ax("onSelect", "select", null, d, x), l.push({ event: d, listeners: w }), d.target = oc))) } function fg(l, d) { var x = {}; return x[l.toLowerCase()] = d.toLowerCase(), x["Webkit" + l] = "webkit" + d, x["Moz" + l] = "moz" + d, x } var lc = { animationend: fg("Animation", "AnimationEnd"), animationiteration: fg("Animation", "AnimationIteration"), animationstart: fg("Animation", "AnimationStart"), transitionend: fg("Transition", "TransitionEnd") }, Ux = {}, zk = {}; c && (zk = document.createElement("div").style, "AnimationEvent" in window || (delete lc.animationend.animation, delete lc.animationiteration.animation, delete lc.animationstart.animation), "TransitionEvent" in window || delete lc.transitionend.transition); function xg(l) { if (Ux[l]) return Ux[l]; if (!lc[l]) return l; var d = lc[l], x; for (x in d) if (d.hasOwnProperty(x) && x in zk) return Ux[l] = d[x]; return l } var Bk = xg("animationend"), qk = xg("animationiteration"), Hk = xg("animationstart"), Wk = xg("transitionend"), Vk = new Map, Gk = "abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" "); function fo(l, d) { Vk.set(l, d), i(d, [l]) } for (var Fx = 0; Fx < Gk.length; Fx++) { var zx = Gk[Fx], ZL = zx.toLowerCase(), JL = zx[0].toUpperCase() + zx.slice(1); fo(ZL, "on" + JL) } fo(Bk, "onAnimationEnd"), fo(qk, "onAnimationIteration"), fo(Hk, "onAnimationStart"), fo("dblclick", "onDoubleClick"), fo("focusin", "onFocus"), fo("focusout", "onBlur"), fo(Wk, "onTransitionEnd"), o("onMouseEnter", ["mouseout", "mouseover"]), o("onMouseLeave", ["mouseout", "mouseover"]), o("onPointerEnter", ["pointerout", "pointerover"]), o("onPointerLeave", ["pointerout", "pointerover"]), i("onChange", "change click focusin focusout input keydown keyup selectionchange".split(" ")), i("onSelect", "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")), i("onBeforeInput", ["compositionend", "keypress", "textInput", "paste"]), i("onCompositionEnd", "compositionend focusout keydown keypress keyup mousedown".split(" ")), i("onCompositionStart", "compositionstart focusout keydown keypress keyup mousedown".split(" ")), i("onCompositionUpdate", "compositionupdate focusout keydown keypress keyup mousedown".split(" ")); var Kd = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "), eR = new Set("cancel close invalid load scroll toggle".split(" ").concat(Kd)); function Kk(l, d, x) { var w = l.type || "unknown-event"; l.currentTarget = x, Rt(w, d, void 0, l), l.currentTarget = null } function Yk(l, d) { d = (d & 4) !== 0; for (var x = 0; x < l.length; x++) { var w = l[x], P = w.event; w = w.listeners; e: { var O = void 0; if (d) for (var F = w.length - 1; 0 <= F; F--) { var ae = w[F], oe = ae.instance, Se = ae.currentTarget; if (ae = ae.listener, oe !== O && P.isPropagationStopped()) break e; Kk(P, ae, Se), O = oe } else for (F = 0; F < w.length; F++) { if (ae = w[F], oe = ae.instance, Se = ae.currentTarget, ae = ae.listener, oe !== O && P.isPropagationStopped()) break e; Kk(P, ae, Se), O = oe } } } if (Vr) throw l = jr, Vr = !1, jr = null, l } function Dr(l, d) { var x = d[Yx]; x === void 0 && (x = d[Yx] = new Set); var w = l + "__bubble"; x.has(w) || (Qk(d, l, 2, !1), x.add(w)) } function Bx(l, d, x) { var w = 0; d && (w |= 4), Qk(x, l, w, d) } var pg = "_reactListening" + Math.random().toString(36).slice(2); function Yd(l) { if (!l[pg]) { l[pg] = !0, s.forEach(function (x) { x !== "selectionchange" && (eR.has(x) || Bx(x, !1, l), Bx(x, !0, l)) }); var d = l.nodeType === 9 ? l : l.ownerDocument; d === null || d[pg] || (d[pg] = !0, Bx("selectionchange", !1, d)) } } function Qk(l, d, x, w) { switch (vk(d)) { case 1: var P = hL; break; case 4: P = fL; break; default: P = Sx }x = P.bind(null, d, x, l), P = void 0, !na || d !== "touchstart" && d !== "touchmove" && d !== "wheel" || (P = !0), w ? P !== void 0 ? l.addEventListener(d, x, { capture: !0, passive: P }) : l.addEventListener(d, x, !0) : P !== void 0 ? l.addEventListener(d, x, { passive: P }) : l.addEventListener(d, x, !1) } function qx(l, d, x, w, P) { var O = w; if ((d & 1) === 0 && (d & 2) === 0 && w !== null) e: for (; ;) { if (w === null) return; var F = w.tag; if (F === 3 || F === 4) { var ae = w.stateNode.containerInfo; if (ae === P || ae.nodeType === 8 && ae.parentNode === P) break; if (F === 4) for (F = w.return; F !== null;) { var oe = F.tag; if ((oe === 3 || oe === 4) && (oe = F.stateNode.containerInfo, oe === P || oe.nodeType === 8 && oe.parentNode === P)) return; F = F.return } for (; ae !== null;) { if (F = sl(ae), F === null) return; if (oe = F.tag, oe === 5 || oe === 6) { w = O = F; continue e } ae = ae.parentNode } } w = w.return } Hr(function () { var Se = O, Me = yr(x), Ue = []; e: { var Re = Vk.get(l); if (Re !== void 0) { var tt = Ax, dt = l; switch (l) { case "keypress": if (ug(x) === 0) break e; case "keydown": case "keyup": tt = TL; break; case "focusin": dt = "focus", tt = Dx; break; case "focusout": dt = "blur", tt = Dx; break; case "beforeblur": case "afterblur": tt = Dx; break; case "click": if (x.button === 2) break e; case "auxclick": case "dblclick": case "mousedown": case "mousemove": case "mouseup": case "mouseout": case "mouseover": case "contextmenu": tt = jk; break; case "drag": case "dragend": case "dragenter": case "dragexit": case "dragleave": case "dragover": case "dragstart": case "drop": tt = yL; break; case "touchcancel": case "touchend": case "touchmove": case "touchstart": tt = IL; break; case Bk: case qk: case Hk: tt = wL; break; case Wk: tt = RL; break; case "scroll": tt = xL; break; case "wheel": tt = _L; break; case "copy": case "cut": case "paste": tt = NL; break; case "gotpointercapture": case "lostpointercapture": case "pointercancel": case "pointerdown": case "pointermove": case "pointerout": case "pointerover": case "pointerup": tt = kk }var gt = (d & 4) !== 0, la = !gt && l === "scroll", ye = gt ? Re !== null ? Re + "Capture" : null : Re; gt = []; for (var me = Se, we; me !== null;) { we = me; var ze = we.stateNode; if (we.tag === 5 && ze !== null && (we = ze, ye !== null && (ze = nr(me, ye), ze != null && gt.push(Qd(me, ze, we)))), la) break; me = me.return } 0 < gt.length && (Re = new tt(Re, dt, null, x, Me), Ue.push({ event: Re, listeners: gt })) } } if ((d & 7) === 0) { e: { if (Re = l === "mouseover" || l === "pointerover", tt = l === "mouseout" || l === "pointerout", Re && x !== vt && (dt = x.relatedTarget || x.fromElement) && (sl(dt) || dt[vi])) break e; if ((tt || Re) && (Re = Me.window === Me ? Me : (Re = Me.ownerDocument) ? Re.defaultView || Re.parentWindow : window, tt ? (dt = x.relatedTarget || x.toElement, tt = Se, dt = dt ? sl(dt) : null, dt !== null && (la = Ct(dt), dt !== la || dt.tag !== 5 && dt.tag !== 6) && (dt = null)) : (tt = null, dt = Se), tt !== dt)) { if (gt = jk, ze = "onMouseLeave", ye = "onMouseEnter", me = "mouse", (l === "pointerout" || l === "pointerover") && (gt = kk, ze = "onPointerLeave", ye = "onPointerEnter", me = "pointer"), la = tt == null ? Re : uc(tt), we = dt == null ? Re : uc(dt), Re = new gt(ze, me + "leave", tt, x, Me), Re.target = la, Re.relatedTarget = we, ze = null, sl(Me) === Se && (gt = new gt(ye, me + "enter", dt, x, Me), gt.target = we, gt.relatedTarget = la, ze = gt), la = ze, tt && dt) t: { for (gt = tt, ye = dt, me = 0, we = gt; we; we = cc(we))me++; for (we = 0, ze = ye; ze; ze = cc(ze))we++; for (; 0 < me - we;)gt = cc(gt), me--; for (; 0 < we - me;)ye = cc(ye), we--; for (; me--;) { if (gt === ye || ye !== null && gt === ye.alternate) break t; gt = cc(gt), ye = cc(ye) } gt = null } else gt = null; tt !== null && Xk(Ue, Re, tt, gt, !1), dt !== null && la !== null && Xk(Ue, la, dt, gt, !0) } } e: { if (Re = Se ? uc(Se) : window, tt = Re.nodeName && Re.nodeName.toLowerCase(), tt === "select" || tt === "input" && Re.type === "file") var ft = HL; else if (Tk(Re)) if (Ok) ft = KL; else { ft = VL; var kt = WL } else (tt = Re.nodeName) && tt.toLowerCase() === "input" && (Re.type === "checkbox" || Re.type === "radio") && (ft = GL); if (ft && (ft = ft(l, Se))) { Dk(Ue, ft, x, Me); break e } kt && kt(l, Re, Se), l === "focusout" && (kt = Re._wrapperState) && kt.controlled && Re.type === "number" && Ft(Re, "number", Re.value) } switch (kt = Se ? uc(Se) : window, l) { case "focusin": (Tk(kt) || kt.contentEditable === "true") && (oc = kt, _x = Se, Gd = null); break; case "focusout": Gd = _x = oc = null; break; case "mousedown": $x = !0; break; case "contextmenu": case "mouseup": case "dragend": $x = !1, Fk(Ue, x, Me); break; case "selectionchange": if (XL) break; case "keydown": case "keyup": Fk(Ue, x, Me) }var St; if (Ix) e: { switch (l) { case "compositionstart": var Dt = "onCompositionStart"; break e; case "compositionend": Dt = "onCompositionEnd"; break e; case "compositionupdate": Dt = "onCompositionUpdate"; break e }Dt = void 0 } else ic ? Ak(l, x) && (Dt = "onCompositionEnd") : l === "keydown" && x.keyCode === 229 && (Dt = "onCompositionStart"); Dt && (Sk && x.locale !== "ko" && (ic || Dt !== "onCompositionStart" ? Dt === "onCompositionEnd" && ic && (St = bk()) : (ho = Me, Ex = "value" in ho ? ho.value : ho.textContent, ic = !0)), kt = yg(Se, Dt), 0 < kt.length && (Dt = new Nk(Dt, l, null, x, Me), Ue.push({ event: Dt, listeners: kt }), St ? Dt.data = St : (St = Pk(x), St !== null && (Dt.data = St)))), (St = UL ? FL(l, x) : zL(l, x)) && (Se = yg(Se, "onBeforeInput"), 0 < Se.length && (Me = new Nk("onBeforeInput", "beforeinput", null, x, Me), Ue.push({ event: Me, listeners: Se }), Me.data = St)) } Yk(Ue, d) }) } function Qd(l, d, x) { return { instance: l, listener: d, currentTarget: x } } function yg(l, d) { for (var x = d + "Capture", w = []; l !== null;) { var P = l, O = P.stateNode; P.tag === 5 && O !== null && (P = O, O = nr(l, x), O != null && w.unshift(Qd(l, O, P)), O = nr(l, d), O != null && w.push(Qd(l, O, P))), l = l.return } return w } function cc(l) { if (l === null) return null; do l = l.return; while (l && l.tag !== 5); return l || null } function Xk(l, d, x, w, P) { for (var O = d._reactName, F = []; x !== null && x !== w;) { var ae = x, oe = ae.alternate, Se = ae.stateNode; if (oe !== null && oe === w) break; ae.tag === 5 && Se !== null && (ae = Se, P ? (oe = nr(x, O), oe != null && F.unshift(Qd(x, oe, ae))) : P || (oe = nr(x, O), oe != null && F.push(Qd(x, oe, ae)))), x = x.return } F.length !== 0 && l.push({ event: d, listeners: F }) } var tR = /\r\n?/g, rR = /\u0000|\uFFFD/g; function Zk(l) {
        return (typeof l == "string" ? l : "" + l).replace(tR, `
`).replace(rR, "")
    } function vg(l, d, x) { if (d = Zk(d), Zk(l) !== d && x) throw Error(a(425)) } function bg() { } var Hx = null, Wx = null; function Vx(l, d) { return l === "textarea" || l === "noscript" || typeof d.children == "string" || typeof d.children == "number" || typeof d.dangerouslySetInnerHTML == "object" && d.dangerouslySetInnerHTML !== null && d.dangerouslySetInnerHTML.__html != null } var Gx = typeof setTimeout == "function" ? setTimeout : void 0, aR = typeof clearTimeout == "function" ? clearTimeout : void 0, Jk = typeof Promise == "function" ? Promise : void 0, sR = typeof queueMicrotask == "function" ? queueMicrotask : typeof Jk < "u" ? function (l) { return Jk.resolve(null).then(l).catch(nR) } : Gx; function nR(l) { setTimeout(function () { throw l }) } function Kx(l, d) { var x = d, w = 0; do { var P = x.nextSibling; if (l.removeChild(x), P && P.nodeType === 8) if (x = P.data, x === "/$") { if (w === 0) { l.removeChild(P), Fd(d); return } w-- } else x !== "$" && x !== "$?" && x !== "$!" || w++; x = P } while (x); Fd(d) } function xo(l) { for (; l != null; l = l.nextSibling) { var d = l.nodeType; if (d === 1 || d === 3) break; if (d === 8) { if (d = l.data, d === "$" || d === "$!" || d === "$?") break; if (d === "/$") return null } } return l } function e1(l) { l = l.previousSibling; for (var d = 0; l;) { if (l.nodeType === 8) { var x = l.data; if (x === "$" || x === "$!" || x === "$?") { if (d === 0) return l; d-- } else x === "/$" && d++ } l = l.previousSibling } return null } var dc = Math.random().toString(36).slice(2), Gn = "__reactFiber$" + dc, Xd = "__reactProps$" + dc, vi = "__reactContainer$" + dc, Yx = "__reactEvents$" + dc, iR = "__reactListeners$" + dc, oR = "__reactHandles$" + dc; function sl(l) { var d = l[Gn]; if (d) return d; for (var x = l.parentNode; x;) { if (d = x[vi] || x[Gn]) { if (x = d.alternate, d.child !== null || x !== null && x.child !== null) for (l = e1(l); l !== null;) { if (x = l[Gn]) return x; l = e1(l) } return d } l = x, x = l.parentNode } return null } function Zd(l) { return l = l[Gn] || l[vi], !l || l.tag !== 5 && l.tag !== 6 && l.tag !== 13 && l.tag !== 3 ? null : l } function uc(l) { if (l.tag === 5 || l.tag === 6) return l.stateNode; throw Error(a(33)) } function wg(l) { return l[Xd] || null } var Qx = [], mc = -1; function po(l) { return { current: l } } function Or(l) { 0 > mc || (l.current = Qx[mc], Qx[mc] = null, mc--) } function Er(l, d) { mc++, Qx[mc] = l.current, l.current = d } var yo = {}, es = po(yo), Ss = po(!1), nl = yo; function gc(l, d) { var x = l.type.contextTypes; if (!x) return yo; var w = l.stateNode; if (w && w.__reactInternalMemoizedUnmaskedChildContext === d) return w.__reactInternalMemoizedMaskedChildContext; var P = {}, O; for (O in x) P[O] = d[O]; return w && (l = l.stateNode, l.__reactInternalMemoizedUnmaskedChildContext = d, l.__reactInternalMemoizedMaskedChildContext = P), P } function Cs(l) { return l = l.childContextTypes, l != null } function jg() { Or(Ss), Or(es) } function t1(l, d, x) { if (es.current !== yo) throw Error(a(168)); Er(es, d), Er(Ss, x) } function r1(l, d, x) { var w = l.stateNode; if (d = d.childContextTypes, typeof w.getChildContext != "function") return x; w = w.getChildContext(); for (var P in w) if (!(P in d)) throw Error(a(108, J(l) || "Unknown", P)); return z({}, x, w) } function Ng(l) { return l = (l = l.stateNode) && l.__reactInternalMemoizedMergedChildContext || yo, nl = es.current, Er(es, l), Er(Ss, Ss.current), !0 } function a1(l, d, x) { var w = l.stateNode; if (!w) throw Error(a(169)); x ? (l = r1(l, d, nl), w.__reactInternalMemoizedMergedChildContext = l, Or(Ss), Or(es), Er(es, l)) : Or(Ss), Er(Ss, x) } var bi = null, kg = !1, Xx = !1; function s1(l) { bi === null ? bi = [l] : bi.push(l) } function lR(l) { kg = !0, s1(l) } function vo() { if (!Xx && bi !== null) { Xx = !0; var l = 0, d = gr; try { var x = bi; for (gr = 1; l < x.length; l++) { var w = x[l]; do w = w(!0); while (w !== null) } bi = null, kg = !1 } catch (P) { throw bi !== null && (bi = bi.slice(l + 1)), Ns(ht, vo), P } finally { gr = d, Xx = !1 } } return null } var hc = [], fc = 0, Sg = null, Cg = 0, rn = [], an = 0, il = null, wi = 1, ji = ""; function ol(l, d) { hc[fc++] = Cg, hc[fc++] = Sg, Sg = l, Cg = d } function n1(l, d, x) { rn[an++] = wi, rn[an++] = ji, rn[an++] = il, il = l; var w = wi; l = ji; var P = 32 - pa(w) - 1; w &= ~(1 << P), x += 1; var O = 32 - pa(d) + P; if (30 < O) { var F = P - P % 5; O = (w & (1 << F) - 1).toString(32), w >>= F, P -= F, wi = 1 << 32 - pa(d) + P | x << P | w, ji = O + l } else wi = 1 << O | x << P | w, ji = l } function Zx(l) { l.return !== null && (ol(l, 1), n1(l, 1, 0)) } function Jx(l) { for (; l === Sg;)Sg = hc[--fc], hc[fc] = null, Cg = hc[--fc], hc[fc] = null; for (; l === il;)il = rn[--an], rn[an] = null, ji = rn[--an], rn[an] = null, wi = rn[--an], rn[an] = null } var qs = null, Hs = null, $r = !1, Pn = null; function i1(l, d) { var x = ln(5, null, null, 0); x.elementType = "DELETED", x.stateNode = d, x.return = l, d = l.deletions, d === null ? (l.deletions = [x], l.flags |= 16) : d.push(x) } function o1(l, d) { switch (l.tag) { case 5: var x = l.type; return d = d.nodeType !== 1 || x.toLowerCase() !== d.nodeName.toLowerCase() ? null : d, d !== null ? (l.stateNode = d, qs = l, Hs = xo(d.firstChild), !0) : !1; case 6: return d = l.pendingProps === "" || d.nodeType !== 3 ? null : d, d !== null ? (l.stateNode = d, qs = l, Hs = null, !0) : !1; case 13: return d = d.nodeType !== 8 ? null : d, d !== null ? (x = il !== null ? { id: wi, overflow: ji } : null, l.memoizedState = { dehydrated: d, treeContext: x, retryLane: 1073741824 }, x = ln(18, null, null, 0), x.stateNode = d, x.return = l, l.child = x, qs = l, Hs = null, !0) : !1; default: return !1 } } function ep(l) { return (l.mode & 1) !== 0 && (l.flags & 128) === 0 } function tp(l) { if ($r) { var d = Hs; if (d) { var x = d; if (!o1(l, d)) { if (ep(l)) throw Error(a(418)); d = xo(x.nextSibling); var w = qs; d && o1(l, d) ? i1(w, x) : (l.flags = l.flags & -4097 | 2, $r = !1, qs = l) } } else { if (ep(l)) throw Error(a(418)); l.flags = l.flags & -4097 | 2, $r = !1, qs = l } } } function l1(l) { for (l = l.return; l !== null && l.tag !== 5 && l.tag !== 3 && l.tag !== 13;)l = l.return; qs = l } function Eg(l) { if (l !== qs) return !1; if (!$r) return l1(l), $r = !0, !1; var d; if ((d = l.tag !== 3) && !(d = l.tag !== 5) && (d = l.type, d = d !== "head" && d !== "body" && !Vx(l.type, l.memoizedProps)), d && (d = Hs)) { if (ep(l)) throw c1(), Error(a(418)); for (; d;)i1(l, d), d = xo(d.nextSibling) } if (l1(l), l.tag === 13) { if (l = l.memoizedState, l = l !== null ? l.dehydrated : null, !l) throw Error(a(317)); e: { for (l = l.nextSibling, d = 0; l;) { if (l.nodeType === 8) { var x = l.data; if (x === "/$") { if (d === 0) { Hs = xo(l.nextSibling); break e } d-- } else x !== "$" && x !== "$!" && x !== "$?" || d++ } l = l.nextSibling } Hs = null } } else Hs = qs ? xo(l.stateNode.nextSibling) : null; return !0 } function c1() { for (var l = Hs; l;)l = xo(l.nextSibling) } function xc() { Hs = qs = null, $r = !1 } function rp(l) { Pn === null ? Pn = [l] : Pn.push(l) } var cR = C.ReactCurrentBatchConfig; function Jd(l, d, x) { if (l = x.ref, l !== null && typeof l != "function" && typeof l != "object") { if (x._owner) { if (x = x._owner, x) { if (x.tag !== 1) throw Error(a(309)); var w = x.stateNode } if (!w) throw Error(a(147, l)); var P = w, O = "" + l; return d !== null && d.ref !== null && typeof d.ref == "function" && d.ref._stringRef === O ? d.ref : (d = function (F) { var ae = P.refs; F === null ? delete ae[O] : ae[O] = F }, d._stringRef = O, d) } if (typeof l != "string") throw Error(a(284)); if (!x._owner) throw Error(a(290, l)) } return l } function Ag(l, d) { throw l = Object.prototype.toString.call(d), Error(a(31, l === "[object Object]" ? "object with keys {" + Object.keys(d).join(", ") + "}" : l)) } function d1(l) { var d = l._init; return d(l._payload) } function u1(l) { function d(ye, me) { if (l) { var we = ye.deletions; we === null ? (ye.deletions = [me], ye.flags |= 16) : we.push(me) } } function x(ye, me) { if (!l) return null; for (; me !== null;)d(ye, me), me = me.sibling; return null } function w(ye, me) { for (ye = new Map; me !== null;)me.key !== null ? ye.set(me.key, me) : ye.set(me.index, me), me = me.sibling; return ye } function P(ye, me) { return ye = Eo(ye, me), ye.index = 0, ye.sibling = null, ye } function O(ye, me, we) { return ye.index = we, l ? (we = ye.alternate, we !== null ? (we = we.index, we < me ? (ye.flags |= 2, me) : we) : (ye.flags |= 2, me)) : (ye.flags |= 1048576, me) } function F(ye) { return l && ye.alternate === null && (ye.flags |= 2), ye } function ae(ye, me, we, ze) { return me === null || me.tag !== 6 ? (me = Gp(we, ye.mode, ze), me.return = ye, me) : (me = P(me, we), me.return = ye, me) } function oe(ye, me, we, ze) { var ft = we.type; return ft === D ? Me(ye, me, we.props.children, ze, we.key) : me !== null && (me.elementType === ft || typeof ft == "object" && ft !== null && ft.$$typeof === se && d1(ft) === me.type) ? (ze = P(me, we.props), ze.ref = Jd(ye, me, we), ze.return = ye, ze) : (ze = Zg(we.type, we.key, we.props, null, ye.mode, ze), ze.ref = Jd(ye, me, we), ze.return = ye, ze) } function Se(ye, me, we, ze) { return me === null || me.tag !== 4 || me.stateNode.containerInfo !== we.containerInfo || me.stateNode.implementation !== we.implementation ? (me = Kp(we, ye.mode, ze), me.return = ye, me) : (me = P(me, we.children || []), me.return = ye, me) } function Me(ye, me, we, ze, ft) { return me === null || me.tag !== 7 ? (me = fl(we, ye.mode, ze, ft), me.return = ye, me) : (me = P(me, we), me.return = ye, me) } function Ue(ye, me, we) { if (typeof me == "string" && me !== "" || typeof me == "number") return me = Gp("" + me, ye.mode, we), me.return = ye, me; if (typeof me == "object" && me !== null) { switch (me.$$typeof) { case N: return we = Zg(me.type, me.key, me.props, null, ye.mode, we), we.ref = Jd(ye, null, me), we.return = ye, we; case A: return me = Kp(me, ye.mode, we), me.return = ye, me; case se: var ze = me._init; return Ue(ye, ze(me._payload), we) }if (mt(me) || L(me)) return me = fl(me, ye.mode, we, null), me.return = ye, me; Ag(ye, me) } return null } function Re(ye, me, we, ze) { var ft = me !== null ? me.key : null; if (typeof we == "string" && we !== "" || typeof we == "number") return ft !== null ? null : ae(ye, me, "" + we, ze); if (typeof we == "object" && we !== null) { switch (we.$$typeof) { case N: return we.key === ft ? oe(ye, me, we, ze) : null; case A: return we.key === ft ? Se(ye, me, we, ze) : null; case se: return ft = we._init, Re(ye, me, ft(we._payload), ze) }if (mt(we) || L(we)) return ft !== null ? null : Me(ye, me, we, ze, null); Ag(ye, we) } return null } function tt(ye, me, we, ze, ft) { if (typeof ze == "string" && ze !== "" || typeof ze == "number") return ye = ye.get(we) || null, ae(me, ye, "" + ze, ft); if (typeof ze == "object" && ze !== null) { switch (ze.$$typeof) { case N: return ye = ye.get(ze.key === null ? we : ze.key) || null, oe(me, ye, ze, ft); case A: return ye = ye.get(ze.key === null ? we : ze.key) || null, Se(me, ye, ze, ft); case se: var kt = ze._init; return tt(ye, me, we, kt(ze._payload), ft) }if (mt(ze) || L(ze)) return ye = ye.get(we) || null, Me(me, ye, ze, ft, null); Ag(me, ze) } return null } function dt(ye, me, we, ze) { for (var ft = null, kt = null, St = me, Dt = me = 0, La = null; St !== null && Dt < we.length; Dt++) { St.index > Dt ? (La = St, St = null) : La = St.sibling; var rr = Re(ye, St, we[Dt], ze); if (rr === null) { St === null && (St = La); break } l && St && rr.alternate === null && d(ye, St), me = O(rr, me, Dt), kt === null ? ft = rr : kt.sibling = rr, kt = rr, St = La } if (Dt === we.length) return x(ye, St), $r && ol(ye, Dt), ft; if (St === null) { for (; Dt < we.length; Dt++)St = Ue(ye, we[Dt], ze), St !== null && (me = O(St, me, Dt), kt === null ? ft = St : kt.sibling = St, kt = St); return $r && ol(ye, Dt), ft } for (St = w(ye, St); Dt < we.length; Dt++)La = tt(St, ye, Dt, we[Dt], ze), La !== null && (l && La.alternate !== null && St.delete(La.key === null ? Dt : La.key), me = O(La, me, Dt), kt === null ? ft = La : kt.sibling = La, kt = La); return l && St.forEach(function (Ao) { return d(ye, Ao) }), $r && ol(ye, Dt), ft } function gt(ye, me, we, ze) { var ft = L(we); if (typeof ft != "function") throw Error(a(150)); if (we = ft.call(we), we == null) throw Error(a(151)); for (var kt = ft = null, St = me, Dt = me = 0, La = null, rr = we.next(); St !== null && !rr.done; Dt++, rr = we.next()) { St.index > Dt ? (La = St, St = null) : La = St.sibling; var Ao = Re(ye, St, rr.value, ze); if (Ao === null) { St === null && (St = La); break } l && St && Ao.alternate === null && d(ye, St), me = O(Ao, me, Dt), kt === null ? ft = Ao : kt.sibling = Ao, kt = Ao, St = La } if (rr.done) return x(ye, St), $r && ol(ye, Dt), ft; if (St === null) { for (; !rr.done; Dt++, rr = we.next())rr = Ue(ye, rr.value, ze), rr !== null && (me = O(rr, me, Dt), kt === null ? ft = rr : kt.sibling = rr, kt = rr); return $r && ol(ye, Dt), ft } for (St = w(ye, St); !rr.done; Dt++, rr = we.next())rr = tt(St, ye, Dt, rr.value, ze), rr !== null && (l && rr.alternate !== null && St.delete(rr.key === null ? Dt : rr.key), me = O(rr, me, Dt), kt === null ? ft = rr : kt.sibling = rr, kt = rr); return l && St.forEach(function (BR) { return d(ye, BR) }), $r && ol(ye, Dt), ft } function la(ye, me, we, ze) { if (typeof we == "object" && we !== null && we.type === D && we.key === null && (we = we.props.children), typeof we == "object" && we !== null) { switch (we.$$typeof) { case N: e: { for (var ft = we.key, kt = me; kt !== null;) { if (kt.key === ft) { if (ft = we.type, ft === D) { if (kt.tag === 7) { x(ye, kt.sibling), me = P(kt, we.props.children), me.return = ye, ye = me; break e } } else if (kt.elementType === ft || typeof ft == "object" && ft !== null && ft.$$typeof === se && d1(ft) === kt.type) { x(ye, kt.sibling), me = P(kt, we.props), me.ref = Jd(ye, kt, we), me.return = ye, ye = me; break e } x(ye, kt); break } else d(ye, kt); kt = kt.sibling } we.type === D ? (me = fl(we.props.children, ye.mode, ze, we.key), me.return = ye, ye = me) : (ze = Zg(we.type, we.key, we.props, null, ye.mode, ze), ze.ref = Jd(ye, me, we), ze.return = ye, ye = ze) } return F(ye); case A: e: { for (kt = we.key; me !== null;) { if (me.key === kt) if (me.tag === 4 && me.stateNode.containerInfo === we.containerInfo && me.stateNode.implementation === we.implementation) { x(ye, me.sibling), me = P(me, we.children || []), me.return = ye, ye = me; break e } else { x(ye, me); break } else d(ye, me); me = me.sibling } me = Kp(we, ye.mode, ze), me.return = ye, ye = me } return F(ye); case se: return kt = we._init, la(ye, me, kt(we._payload), ze) }if (mt(we)) return dt(ye, me, we, ze); if (L(we)) return gt(ye, me, we, ze); Ag(ye, we) } return typeof we == "string" && we !== "" || typeof we == "number" ? (we = "" + we, me !== null && me.tag === 6 ? (x(ye, me.sibling), me = P(me, we), me.return = ye, ye = me) : (x(ye, me), me = Gp(we, ye.mode, ze), me.return = ye, ye = me), F(ye)) : x(ye, me) } return la } var pc = u1(!0), m1 = u1(!1), Pg = po(null), Tg = null, yc = null, ap = null; function sp() { ap = yc = Tg = null } function np(l) { var d = Pg.current; Or(Pg), l._currentValue = d } function ip(l, d, x) { for (; l !== null;) { var w = l.alternate; if ((l.childLanes & d) !== d ? (l.childLanes |= d, w !== null && (w.childLanes |= d)) : w !== null && (w.childLanes & d) !== d && (w.childLanes |= d), l === x) break; l = l.return } } function vc(l, d) { Tg = l, ap = yc = null, l = l.dependencies, l !== null && l.firstContext !== null && ((l.lanes & d) !== 0 && (Es = !0), l.firstContext = null) } function sn(l) { var d = l._currentValue; if (ap !== l) if (l = { context: l, memoizedValue: d, next: null }, yc === null) { if (Tg === null) throw Error(a(308)); yc = l, Tg.dependencies = { lanes: 0, firstContext: l } } else yc = yc.next = l; return d } var ll = null; function op(l) { ll === null ? ll = [l] : ll.push(l) } function g1(l, d, x, w) { var P = d.interleaved; return P === null ? (x.next = x, op(d)) : (x.next = P.next, P.next = x), d.interleaved = x, Ni(l, w) } function Ni(l, d) { l.lanes |= d; var x = l.alternate; for (x !== null && (x.lanes |= d), x = l, l = l.return; l !== null;)l.childLanes |= d, x = l.alternate, x !== null && (x.childLanes |= d), x = l, l = l.return; return x.tag === 3 ? x.stateNode : null } var bo = !1; function lp(l) { l.updateQueue = { baseState: l.memoizedState, firstBaseUpdate: null, lastBaseUpdate: null, shared: { pending: null, interleaved: null, lanes: 0 }, effects: null } } function h1(l, d) { l = l.updateQueue, d.updateQueue === l && (d.updateQueue = { baseState: l.baseState, firstBaseUpdate: l.firstBaseUpdate, lastBaseUpdate: l.lastBaseUpdate, shared: l.shared, effects: l.effects }) } function ki(l, d) { return { eventTime: l, lane: d, tag: 0, payload: null, callback: null, next: null } } function wo(l, d, x) { var w = l.updateQueue; if (w === null) return null; if (w = w.shared, (Qt & 2) !== 0) { var P = w.pending; return P === null ? d.next = d : (d.next = P.next, P.next = d), w.pending = d, Ni(l, x) } return P = w.interleaved, P === null ? (d.next = d, op(w)) : (d.next = P.next, P.next = d), w.interleaved = d, Ni(l, x) } function Dg(l, d, x) { if (d = d.updateQueue, d !== null && (d = d.shared, (x & 4194240) !== 0)) { var w = d.lanes; w &= l.pendingLanes, x |= w, d.lanes = x, Rd(l, x) } } function f1(l, d) { var x = l.updateQueue, w = l.alternate; if (w !== null && (w = w.updateQueue, x === w)) { var P = null, O = null; if (x = x.firstBaseUpdate, x !== null) { do { var F = { eventTime: x.eventTime, lane: x.lane, tag: x.tag, payload: x.payload, callback: x.callback, next: null }; O === null ? P = O = F : O = O.next = F, x = x.next } while (x !== null); O === null ? P = O = d : O = O.next = d } else P = O = d; x = { baseState: w.baseState, firstBaseUpdate: P, lastBaseUpdate: O, shared: w.shared, effects: w.effects }, l.updateQueue = x; return } l = x.lastBaseUpdate, l === null ? x.firstBaseUpdate = d : l.next = d, x.lastBaseUpdate = d } function Og(l, d, x, w) { var P = l.updateQueue; bo = !1; var O = P.firstBaseUpdate, F = P.lastBaseUpdate, ae = P.shared.pending; if (ae !== null) { P.shared.pending = null; var oe = ae, Se = oe.next; oe.next = null, F === null ? O = Se : F.next = Se, F = oe; var Me = l.alternate; Me !== null && (Me = Me.updateQueue, ae = Me.lastBaseUpdate, ae !== F && (ae === null ? Me.firstBaseUpdate = Se : ae.next = Se, Me.lastBaseUpdate = oe)) } if (O !== null) { var Ue = P.baseState; F = 0, Me = Se = oe = null, ae = O; do { var Re = ae.lane, tt = ae.eventTime; if ((w & Re) === Re) { Me !== null && (Me = Me.next = { eventTime: tt, lane: 0, tag: ae.tag, payload: ae.payload, callback: ae.callback, next: null }); e: { var dt = l, gt = ae; switch (Re = d, tt = x, gt.tag) { case 1: if (dt = gt.payload, typeof dt == "function") { Ue = dt.call(tt, Ue, Re); break e } Ue = dt; break e; case 3: dt.flags = dt.flags & -65537 | 128; case 0: if (dt = gt.payload, Re = typeof dt == "function" ? dt.call(tt, Ue, Re) : dt, Re == null) break e; Ue = z({}, Ue, Re); break e; case 2: bo = !0 } } ae.callback !== null && ae.lane !== 0 && (l.flags |= 64, Re = P.effects, Re === null ? P.effects = [ae] : Re.push(ae)) } else tt = { eventTime: tt, lane: Re, tag: ae.tag, payload: ae.payload, callback: ae.callback, next: null }, Me === null ? (Se = Me = tt, oe = Ue) : Me = Me.next = tt, F |= Re; if (ae = ae.next, ae === null) { if (ae = P.shared.pending, ae === null) break; Re = ae, ae = Re.next, Re.next = null, P.lastBaseUpdate = Re, P.shared.pending = null } } while (!0); if (Me === null && (oe = Ue), P.baseState = oe, P.firstBaseUpdate = Se, P.lastBaseUpdate = Me, d = P.shared.interleaved, d !== null) { P = d; do F |= P.lane, P = P.next; while (P !== d) } else O === null && (P.shared.lanes = 0); ul |= F, l.lanes = F, l.memoizedState = Ue } } function x1(l, d, x) { if (l = d.effects, d.effects = null, l !== null) for (d = 0; d < l.length; d++) { var w = l[d], P = w.callback; if (P !== null) { if (w.callback = null, w = x, typeof P != "function") throw Error(a(191, P)); P.call(w) } } } var eu = {}, Kn = po(eu), tu = po(eu), ru = po(eu); function cl(l) { if (l === eu) throw Error(a(174)); return l } function cp(l, d) { switch (Er(ru, d), Er(tu, l), Er(Kn, eu), l = d.nodeType, l) { case 9: case 11: d = (d = d.documentElement) ? d.namespaceURI : et(null, ""); break; default: l = l === 8 ? d.parentNode : d, d = l.namespaceURI || null, l = l.tagName, d = et(d, l) }Or(Kn), Er(Kn, d) } function bc() { Or(Kn), Or(tu), Or(ru) } function p1(l) { cl(ru.current); var d = cl(Kn.current), x = et(d, l.type); d !== x && (Er(tu, l), Er(Kn, x)) } function dp(l) { tu.current === l && (Or(Kn), Or(tu)) } var Gr = po(0); function Ig(l) { for (var d = l; d !== null;) { if (d.tag === 13) { var x = d.memoizedState; if (x !== null && (x = x.dehydrated, x === null || x.data === "$?" || x.data === "$!")) return d } else if (d.tag === 19 && d.memoizedProps.revealOrder !== void 0) { if ((d.flags & 128) !== 0) return d } else if (d.child !== null) { d.child.return = d, d = d.child; continue } if (d === l) break; for (; d.sibling === null;) { if (d.return === null || d.return === l) return null; d = d.return } d.sibling.return = d.return, d = d.sibling } return null } var up = []; function mp() { for (var l = 0; l < up.length; l++)up[l]._workInProgressVersionPrimary = null; up.length = 0 } var Lg = C.ReactCurrentDispatcher, gp = C.ReactCurrentBatchConfig, dl = 0, Kr = null, ja = null, Oa = null, Rg = !1, au = !1, su = 0, dR = 0; function ts() { throw Error(a(321)) } function hp(l, d) { if (d === null) return !1; for (var x = 0; x < d.length && x < l.length; x++)if (!An(l[x], d[x])) return !1; return !0 } function fp(l, d, x, w, P, O) { if (dl = O, Kr = d, d.memoizedState = null, d.updateQueue = null, d.lanes = 0, Lg.current = l === null || l.memoizedState === null ? hR : fR, l = x(w, P), au) { O = 0; do { if (au = !1, su = 0, 25 <= O) throw Error(a(301)); O += 1, Oa = ja = null, d.updateQueue = null, Lg.current = xR, l = x(w, P) } while (au) } if (Lg.current = $g, d = ja !== null && ja.next !== null, dl = 0, Oa = ja = Kr = null, Rg = !1, d) throw Error(a(300)); return l } function xp() { var l = su !== 0; return su = 0, l } function Yn() { var l = { memoizedState: null, baseState: null, baseQueue: null, queue: null, next: null }; return Oa === null ? Kr.memoizedState = Oa = l : Oa = Oa.next = l, Oa } function nn() { if (ja === null) { var l = Kr.alternate; l = l !== null ? l.memoizedState : null } else l = ja.next; var d = Oa === null ? Kr.memoizedState : Oa.next; if (d !== null) Oa = d, ja = l; else { if (l === null) throw Error(a(310)); ja = l, l = { memoizedState: ja.memoizedState, baseState: ja.baseState, baseQueue: ja.baseQueue, queue: ja.queue, next: null }, Oa === null ? Kr.memoizedState = Oa = l : Oa = Oa.next = l } return Oa } function nu(l, d) { return typeof d == "function" ? d(l) : d } function pp(l) { var d = nn(), x = d.queue; if (x === null) throw Error(a(311)); x.lastRenderedReducer = l; var w = ja, P = w.baseQueue, O = x.pending; if (O !== null) { if (P !== null) { var F = P.next; P.next = O.next, O.next = F } w.baseQueue = P = O, x.pending = null } if (P !== null) { O = P.next, w = w.baseState; var ae = F = null, oe = null, Se = O; do { var Me = Se.lane; if ((dl & Me) === Me) oe !== null && (oe = oe.next = { lane: 0, action: Se.action, hasEagerState: Se.hasEagerState, eagerState: Se.eagerState, next: null }), w = Se.hasEagerState ? Se.eagerState : l(w, Se.action); else { var Ue = { lane: Me, action: Se.action, hasEagerState: Se.hasEagerState, eagerState: Se.eagerState, next: null }; oe === null ? (ae = oe = Ue, F = w) : oe = oe.next = Ue, Kr.lanes |= Me, ul |= Me } Se = Se.next } while (Se !== null && Se !== O); oe === null ? F = w : oe.next = ae, An(w, d.memoizedState) || (Es = !0), d.memoizedState = w, d.baseState = F, d.baseQueue = oe, x.lastRenderedState = w } if (l = x.interleaved, l !== null) { P = l; do O = P.lane, Kr.lanes |= O, ul |= O, P = P.next; while (P !== l) } else P === null && (x.lanes = 0); return [d.memoizedState, x.dispatch] } function yp(l) { var d = nn(), x = d.queue; if (x === null) throw Error(a(311)); x.lastRenderedReducer = l; var w = x.dispatch, P = x.pending, O = d.memoizedState; if (P !== null) { x.pending = null; var F = P = P.next; do O = l(O, F.action), F = F.next; while (F !== P); An(O, d.memoizedState) || (Es = !0), d.memoizedState = O, d.baseQueue === null && (d.baseState = O), x.lastRenderedState = O } return [O, w] } function y1() { } function v1(l, d) { var x = Kr, w = nn(), P = d(), O = !An(w.memoizedState, P); if (O && (w.memoizedState = P, Es = !0), w = w.queue, vp(j1.bind(null, x, w, l), [l]), w.getSnapshot !== d || O || Oa !== null && Oa.memoizedState.tag & 1) { if (x.flags |= 2048, iu(9, w1.bind(null, x, w, P, d), void 0, null), Ia === null) throw Error(a(349)); (dl & 30) !== 0 || b1(x, d, P) } return P } function b1(l, d, x) { l.flags |= 16384, l = { getSnapshot: d, value: x }, d = Kr.updateQueue, d === null ? (d = { lastEffect: null, stores: null }, Kr.updateQueue = d, d.stores = [l]) : (x = d.stores, x === null ? d.stores = [l] : x.push(l)) } function w1(l, d, x, w) { d.value = x, d.getSnapshot = w, N1(d) && k1(l) } function j1(l, d, x) { return x(function () { N1(d) && k1(l) }) } function N1(l) { var d = l.getSnapshot; l = l.value; try { var x = d(); return !An(l, x) } catch { return !0 } } function k1(l) { var d = Ni(l, 1); d !== null && In(d, l, 1, -1) } function S1(l) { var d = Yn(); return typeof l == "function" && (l = l()), d.memoizedState = d.baseState = l, l = { pending: null, interleaved: null, lanes: 0, dispatch: null, lastRenderedReducer: nu, lastRenderedState: l }, d.queue = l, l = l.dispatch = gR.bind(null, Kr, l), [d.memoizedState, l] } function iu(l, d, x, w) { return l = { tag: l, create: d, destroy: x, deps: w, next: null }, d = Kr.updateQueue, d === null ? (d = { lastEffect: null, stores: null }, Kr.updateQueue = d, d.lastEffect = l.next = l) : (x = d.lastEffect, x === null ? d.lastEffect = l.next = l : (w = x.next, x.next = l, l.next = w, d.lastEffect = l)), l } function C1() { return nn().memoizedState } function Mg(l, d, x, w) { var P = Yn(); Kr.flags |= l, P.memoizedState = iu(1 | d, x, void 0, w === void 0 ? null : w) } function _g(l, d, x, w) { var P = nn(); w = w === void 0 ? null : w; var O = void 0; if (ja !== null) { var F = ja.memoizedState; if (O = F.destroy, w !== null && hp(w, F.deps)) { P.memoizedState = iu(d, x, O, w); return } } Kr.flags |= l, P.memoizedState = iu(1 | d, x, O, w) } function E1(l, d) { return Mg(8390656, 8, l, d) } function vp(l, d) { return _g(2048, 8, l, d) } function A1(l, d) { return _g(4, 2, l, d) } function P1(l, d) { return _g(4, 4, l, d) } function T1(l, d) { if (typeof d == "function") return l = l(), d(l), function () { d(null) }; if (d != null) return l = l(), d.current = l, function () { d.current = null } } function D1(l, d, x) { return x = x != null ? x.concat([l]) : null, _g(4, 4, T1.bind(null, d, l), x) } function bp() { } function O1(l, d) { var x = nn(); d = d === void 0 ? null : d; var w = x.memoizedState; return w !== null && d !== null && hp(d, w[1]) ? w[0] : (x.memoizedState = [l, d], l) } function I1(l, d) { var x = nn(); d = d === void 0 ? null : d; var w = x.memoizedState; return w !== null && d !== null && hp(d, w[1]) ? w[0] : (l = l(), x.memoizedState = [l, d], l) } function L1(l, d, x) { return (dl & 21) === 0 ? (l.baseState && (l.baseState = !1, Es = !0), l.memoizedState = x) : (An(x, d) || (x = rl(), Kr.lanes |= x, ul |= x, l.baseState = !0), d) } function uR(l, d) { var x = gr; gr = x !== 0 && 4 > x ? x : 4, l(!0); var w = gp.transition; gp.transition = {}; try { l(!1), d() } finally { gr = x, gp.transition = w } } function R1() { return nn().memoizedState } function mR(l, d, x) { var w = So(l); if (x = { lane: w, action: x, hasEagerState: !1, eagerState: null, next: null }, M1(l)) _1(d, x); else if (x = g1(l, d, x, w), x !== null) { var P = ds(); In(x, l, w, P), $1(x, d, w) } } function gR(l, d, x) { var w = So(l), P = { lane: w, action: x, hasEagerState: !1, eagerState: null, next: null }; if (M1(l)) _1(d, P); else { var O = l.alternate; if (l.lanes === 0 && (O === null || O.lanes === 0) && (O = d.lastRenderedReducer, O !== null)) try { var F = d.lastRenderedState, ae = O(F, x); if (P.hasEagerState = !0, P.eagerState = ae, An(ae, F)) { var oe = d.interleaved; oe === null ? (P.next = P, op(d)) : (P.next = oe.next, oe.next = P), d.interleaved = P; return } } catch { } finally { } x = g1(l, d, P, w), x !== null && (P = ds(), In(x, l, w, P), $1(x, d, w)) } } function M1(l) { var d = l.alternate; return l === Kr || d !== null && d === Kr } function _1(l, d) { au = Rg = !0; var x = l.pending; x === null ? d.next = d : (d.next = x.next, x.next = d), l.pending = d } function $1(l, d, x) { if ((x & 4194240) !== 0) { var w = d.lanes; w &= l.pendingLanes, x |= w, d.lanes = x, Rd(l, x) } } var $g = { readContext: sn, useCallback: ts, useContext: ts, useEffect: ts, useImperativeHandle: ts, useInsertionEffect: ts, useLayoutEffect: ts, useMemo: ts, useReducer: ts, useRef: ts, useState: ts, useDebugValue: ts, useDeferredValue: ts, useTransition: ts, useMutableSource: ts, useSyncExternalStore: ts, useId: ts, unstable_isNewReconciler: !1 }, hR = { readContext: sn, useCallback: function (l, d) { return Yn().memoizedState = [l, d === void 0 ? null : d], l }, useContext: sn, useEffect: E1, useImperativeHandle: function (l, d, x) { return x = x != null ? x.concat([l]) : null, Mg(4194308, 4, T1.bind(null, d, l), x) }, useLayoutEffect: function (l, d) { return Mg(4194308, 4, l, d) }, useInsertionEffect: function (l, d) { return Mg(4, 2, l, d) }, useMemo: function (l, d) { var x = Yn(); return d = d === void 0 ? null : d, l = l(), x.memoizedState = [l, d], l }, useReducer: function (l, d, x) { var w = Yn(); return d = x !== void 0 ? x(d) : d, w.memoizedState = w.baseState = d, l = { pending: null, interleaved: null, lanes: 0, dispatch: null, lastRenderedReducer: l, lastRenderedState: d }, w.queue = l, l = l.dispatch = mR.bind(null, Kr, l), [w.memoizedState, l] }, useRef: function (l) { var d = Yn(); return l = { current: l }, d.memoizedState = l }, useState: S1, useDebugValue: bp, useDeferredValue: function (l) { return Yn().memoizedState = l }, useTransition: function () { var l = S1(!1), d = l[0]; return l = uR.bind(null, l[1]), Yn().memoizedState = l, [d, l] }, useMutableSource: function () { }, useSyncExternalStore: function (l, d, x) { var w = Kr, P = Yn(); if ($r) { if (x === void 0) throw Error(a(407)); x = x() } else { if (x = d(), Ia === null) throw Error(a(349)); (dl & 30) !== 0 || b1(w, d, x) } P.memoizedState = x; var O = { value: x, getSnapshot: d }; return P.queue = O, E1(j1.bind(null, w, O, l), [l]), w.flags |= 2048, iu(9, w1.bind(null, w, O, x, d), void 0, null), x }, useId: function () { var l = Yn(), d = Ia.identifierPrefix; if ($r) { var x = ji, w = wi; x = (w & ~(1 << 32 - pa(w) - 1)).toString(32) + x, d = ":" + d + "R" + x, x = su++, 0 < x && (d += "H" + x.toString(32)), d += ":" } else x = dR++, d = ":" + d + "r" + x.toString(32) + ":"; return l.memoizedState = d }, unstable_isNewReconciler: !1 }, fR = { readContext: sn, useCallback: O1, useContext: sn, useEffect: vp, useImperativeHandle: D1, useInsertionEffect: A1, useLayoutEffect: P1, useMemo: I1, useReducer: pp, useRef: C1, useState: function () { return pp(nu) }, useDebugValue: bp, useDeferredValue: function (l) { var d = nn(); return L1(d, ja.memoizedState, l) }, useTransition: function () { var l = pp(nu)[0], d = nn().memoizedState; return [l, d] }, useMutableSource: y1, useSyncExternalStore: v1, useId: R1, unstable_isNewReconciler: !1 }, xR = { readContext: sn, useCallback: O1, useContext: sn, useEffect: vp, useImperativeHandle: D1, useInsertionEffect: A1, useLayoutEffect: P1, useMemo: I1, useReducer: yp, useRef: C1, useState: function () { return yp(nu) }, useDebugValue: bp, useDeferredValue: function (l) { var d = nn(); return ja === null ? d.memoizedState = l : L1(d, ja.memoizedState, l) }, useTransition: function () { var l = yp(nu)[0], d = nn().memoizedState; return [l, d] }, useMutableSource: y1, useSyncExternalStore: v1, useId: R1, unstable_isNewReconciler: !1 }; function Tn(l, d) { if (l && l.defaultProps) { d = z({}, d), l = l.defaultProps; for (var x in l) d[x] === void 0 && (d[x] = l[x]); return d } return d } function wp(l, d, x, w) { d = l.memoizedState, x = x(w, d), x = x == null ? d : z({}, d, x), l.memoizedState = x, l.lanes === 0 && (l.updateQueue.baseState = x) } var Ug = { isMounted: function (l) { return (l = l._reactInternals) ? Ct(l) === l : !1 }, enqueueSetState: function (l, d, x) { l = l._reactInternals; var w = ds(), P = So(l), O = ki(w, P); O.payload = d, x != null && (O.callback = x), d = wo(l, O, P), d !== null && (In(d, l, P, w), Dg(d, l, P)) }, enqueueReplaceState: function (l, d, x) { l = l._reactInternals; var w = ds(), P = So(l), O = ki(w, P); O.tag = 1, O.payload = d, x != null && (O.callback = x), d = wo(l, O, P), d !== null && (In(d, l, P, w), Dg(d, l, P)) }, enqueueForceUpdate: function (l, d) { l = l._reactInternals; var x = ds(), w = So(l), P = ki(x, w); P.tag = 2, d != null && (P.callback = d), d = wo(l, P, w), d !== null && (In(d, l, w, x), Dg(d, l, w)) } }; function U1(l, d, x, w, P, O, F) { return l = l.stateNode, typeof l.shouldComponentUpdate == "function" ? l.shouldComponentUpdate(w, O, F) : d.prototype && d.prototype.isPureReactComponent ? !Vd(x, w) || !Vd(P, O) : !0 } function F1(l, d, x) { var w = !1, P = yo, O = d.contextType; return typeof O == "object" && O !== null ? O = sn(O) : (P = Cs(d) ? nl : es.current, w = d.contextTypes, O = (w = w != null) ? gc(l, P) : yo), d = new d(x, O), l.memoizedState = d.state !== null && d.state !== void 0 ? d.state : null, d.updater = Ug, l.stateNode = d, d._reactInternals = l, w && (l = l.stateNode, l.__reactInternalMemoizedUnmaskedChildContext = P, l.__reactInternalMemoizedMaskedChildContext = O), d } function z1(l, d, x, w) { l = d.state, typeof d.componentWillReceiveProps == "function" && d.componentWillReceiveProps(x, w), typeof d.UNSAFE_componentWillReceiveProps == "function" && d.UNSAFE_componentWillReceiveProps(x, w), d.state !== l && Ug.enqueueReplaceState(d, d.state, null) } function jp(l, d, x, w) { var P = l.stateNode; P.props = x, P.state = l.memoizedState, P.refs = {}, lp(l); var O = d.contextType; typeof O == "object" && O !== null ? P.context = sn(O) : (O = Cs(d) ? nl : es.current, P.context = gc(l, O)), P.state = l.memoizedState, O = d.getDerivedStateFromProps, typeof O == "function" && (wp(l, d, O, x), P.state = l.memoizedState), typeof d.getDerivedStateFromProps == "function" || typeof P.getSnapshotBeforeUpdate == "function" || typeof P.UNSAFE_componentWillMount != "function" && typeof P.componentWillMount != "function" || (d = P.state, typeof P.componentWillMount == "function" && P.componentWillMount(), typeof P.UNSAFE_componentWillMount == "function" && P.UNSAFE_componentWillMount(), d !== P.state && Ug.enqueueReplaceState(P, P.state, null), Og(l, x, P, w), P.state = l.memoizedState), typeof P.componentDidMount == "function" && (l.flags |= 4194308) } function wc(l, d) {
        try { var x = "", w = d; do x += K(w), w = w.return; while (w); var P = x } catch (O) {
            P = `
Error generating stack: `+ O.message + `
`+ O.stack
        } return { value: l, source: d, stack: P, digest: null }
    } function Np(l, d, x) { return { value: l, source: null, stack: x ?? null, digest: d ?? null } } function kp(l, d) { try { console.error(d.value) } catch (x) { setTimeout(function () { throw x }) } } var pR = typeof WeakMap == "function" ? WeakMap : Map; function B1(l, d, x) { x = ki(-1, x), x.tag = 3, x.payload = { element: null }; var w = d.value; return x.callback = function () { Vg || (Vg = !0, Up = w), kp(l, d) }, x } function q1(l, d, x) { x = ki(-1, x), x.tag = 3; var w = l.type.getDerivedStateFromError; if (typeof w == "function") { var P = d.value; x.payload = function () { return w(P) }, x.callback = function () { kp(l, d) } } var O = l.stateNode; return O !== null && typeof O.componentDidCatch == "function" && (x.callback = function () { kp(l, d), typeof w != "function" && (No === null ? No = new Set([this]) : No.add(this)); var F = d.stack; this.componentDidCatch(d.value, { componentStack: F !== null ? F : "" }) }), x } function H1(l, d, x) { var w = l.pingCache; if (w === null) { w = l.pingCache = new pR; var P = new Set; w.set(d, P) } else P = w.get(d), P === void 0 && (P = new Set, w.set(d, P)); P.has(x) || (P.add(x), l = DR.bind(null, l, d, x), d.then(l, l)) } function W1(l) { do { var d; if ((d = l.tag === 13) && (d = l.memoizedState, d = d !== null ? d.dehydrated !== null : !0), d) return l; l = l.return } while (l !== null); return null } function V1(l, d, x, w, P) { return (l.mode & 1) === 0 ? (l === d ? l.flags |= 65536 : (l.flags |= 128, x.flags |= 131072, x.flags &= -52805, x.tag === 1 && (x.alternate === null ? x.tag = 17 : (d = ki(-1, 1), d.tag = 2, wo(x, d, 1))), x.lanes |= 1), l) : (l.flags |= 65536, l.lanes = P, l) } var yR = C.ReactCurrentOwner, Es = !1; function cs(l, d, x, w) { d.child = l === null ? m1(d, null, x, w) : pc(d, l.child, x, w) } function G1(l, d, x, w, P) { x = x.render; var O = d.ref; return vc(d, P), w = fp(l, d, x, w, O, P), x = xp(), l !== null && !Es ? (d.updateQueue = l.updateQueue, d.flags &= -2053, l.lanes &= ~P, Si(l, d, P)) : ($r && x && Zx(d), d.flags |= 1, cs(l, d, w, P), d.child) } function K1(l, d, x, w, P) { if (l === null) { var O = x.type; return typeof O == "function" && !Vp(O) && O.defaultProps === void 0 && x.compare === null && x.defaultProps === void 0 ? (d.tag = 15, d.type = O, Y1(l, d, O, w, P)) : (l = Zg(x.type, null, w, d, d.mode, P), l.ref = d.ref, l.return = d, d.child = l) } if (O = l.child, (l.lanes & P) === 0) { var F = O.memoizedProps; if (x = x.compare, x = x !== null ? x : Vd, x(F, w) && l.ref === d.ref) return Si(l, d, P) } return d.flags |= 1, l = Eo(O, w), l.ref = d.ref, l.return = d, d.child = l } function Y1(l, d, x, w, P) { if (l !== null) { var O = l.memoizedProps; if (Vd(O, w) && l.ref === d.ref) if (Es = !1, d.pendingProps = w = O, (l.lanes & P) !== 0) (l.flags & 131072) !== 0 && (Es = !0); else return d.lanes = l.lanes, Si(l, d, P) } return Sp(l, d, x, w, P) } function Q1(l, d, x) { var w = d.pendingProps, P = w.children, O = l !== null ? l.memoizedState : null; if (w.mode === "hidden") if ((d.mode & 1) === 0) d.memoizedState = { baseLanes: 0, cachePool: null, transitions: null }, Er(Nc, Ws), Ws |= x; else { if ((x & 1073741824) === 0) return l = O !== null ? O.baseLanes | x : x, d.lanes = d.childLanes = 1073741824, d.memoizedState = { baseLanes: l, cachePool: null, transitions: null }, d.updateQueue = null, Er(Nc, Ws), Ws |= l, null; d.memoizedState = { baseLanes: 0, cachePool: null, transitions: null }, w = O !== null ? O.baseLanes : x, Er(Nc, Ws), Ws |= w } else O !== null ? (w = O.baseLanes | x, d.memoizedState = null) : w = x, Er(Nc, Ws), Ws |= w; return cs(l, d, P, x), d.child } function X1(l, d) { var x = d.ref; (l === null && x !== null || l !== null && l.ref !== x) && (d.flags |= 512, d.flags |= 2097152) } function Sp(l, d, x, w, P) { var O = Cs(x) ? nl : es.current; return O = gc(d, O), vc(d, P), x = fp(l, d, x, w, O, P), w = xp(), l !== null && !Es ? (d.updateQueue = l.updateQueue, d.flags &= -2053, l.lanes &= ~P, Si(l, d, P)) : ($r && w && Zx(d), d.flags |= 1, cs(l, d, x, P), d.child) } function Z1(l, d, x, w, P) { if (Cs(x)) { var O = !0; Ng(d) } else O = !1; if (vc(d, P), d.stateNode === null) zg(l, d), F1(d, x, w), jp(d, x, w, P), w = !0; else if (l === null) { var F = d.stateNode, ae = d.memoizedProps; F.props = ae; var oe = F.context, Se = x.contextType; typeof Se == "object" && Se !== null ? Se = sn(Se) : (Se = Cs(x) ? nl : es.current, Se = gc(d, Se)); var Me = x.getDerivedStateFromProps, Ue = typeof Me == "function" || typeof F.getSnapshotBeforeUpdate == "function"; Ue || typeof F.UNSAFE_componentWillReceiveProps != "function" && typeof F.componentWillReceiveProps != "function" || (ae !== w || oe !== Se) && z1(d, F, w, Se), bo = !1; var Re = d.memoizedState; F.state = Re, Og(d, w, F, P), oe = d.memoizedState, ae !== w || Re !== oe || Ss.current || bo ? (typeof Me == "function" && (wp(d, x, Me, w), oe = d.memoizedState), (ae = bo || U1(d, x, ae, w, Re, oe, Se)) ? (Ue || typeof F.UNSAFE_componentWillMount != "function" && typeof F.componentWillMount != "function" || (typeof F.componentWillMount == "function" && F.componentWillMount(), typeof F.UNSAFE_componentWillMount == "function" && F.UNSAFE_componentWillMount()), typeof F.componentDidMount == "function" && (d.flags |= 4194308)) : (typeof F.componentDidMount == "function" && (d.flags |= 4194308), d.memoizedProps = w, d.memoizedState = oe), F.props = w, F.state = oe, F.context = Se, w = ae) : (typeof F.componentDidMount == "function" && (d.flags |= 4194308), w = !1) } else { F = d.stateNode, h1(l, d), ae = d.memoizedProps, Se = d.type === d.elementType ? ae : Tn(d.type, ae), F.props = Se, Ue = d.pendingProps, Re = F.context, oe = x.contextType, typeof oe == "object" && oe !== null ? oe = sn(oe) : (oe = Cs(x) ? nl : es.current, oe = gc(d, oe)); var tt = x.getDerivedStateFromProps; (Me = typeof tt == "function" || typeof F.getSnapshotBeforeUpdate == "function") || typeof F.UNSAFE_componentWillReceiveProps != "function" && typeof F.componentWillReceiveProps != "function" || (ae !== Ue || Re !== oe) && z1(d, F, w, oe), bo = !1, Re = d.memoizedState, F.state = Re, Og(d, w, F, P); var dt = d.memoizedState; ae !== Ue || Re !== dt || Ss.current || bo ? (typeof tt == "function" && (wp(d, x, tt, w), dt = d.memoizedState), (Se = bo || U1(d, x, Se, w, Re, dt, oe) || !1) ? (Me || typeof F.UNSAFE_componentWillUpdate != "function" && typeof F.componentWillUpdate != "function" || (typeof F.componentWillUpdate == "function" && F.componentWillUpdate(w, dt, oe), typeof F.UNSAFE_componentWillUpdate == "function" && F.UNSAFE_componentWillUpdate(w, dt, oe)), typeof F.componentDidUpdate == "function" && (d.flags |= 4), typeof F.getSnapshotBeforeUpdate == "function" && (d.flags |= 1024)) : (typeof F.componentDidUpdate != "function" || ae === l.memoizedProps && Re === l.memoizedState || (d.flags |= 4), typeof F.getSnapshotBeforeUpdate != "function" || ae === l.memoizedProps && Re === l.memoizedState || (d.flags |= 1024), d.memoizedProps = w, d.memoizedState = dt), F.props = w, F.state = dt, F.context = oe, w = Se) : (typeof F.componentDidUpdate != "function" || ae === l.memoizedProps && Re === l.memoizedState || (d.flags |= 4), typeof F.getSnapshotBeforeUpdate != "function" || ae === l.memoizedProps && Re === l.memoizedState || (d.flags |= 1024), w = !1) } return Cp(l, d, x, w, O, P) } function Cp(l, d, x, w, P, O) { X1(l, d); var F = (d.flags & 128) !== 0; if (!w && !F) return P && a1(d, x, !1), Si(l, d, O); w = d.stateNode, yR.current = d; var ae = F && typeof x.getDerivedStateFromError != "function" ? null : w.render(); return d.flags |= 1, l !== null && F ? (d.child = pc(d, l.child, null, O), d.child = pc(d, null, ae, O)) : cs(l, d, ae, O), d.memoizedState = w.state, P && a1(d, x, !0), d.child } function J1(l) { var d = l.stateNode; d.pendingContext ? t1(l, d.pendingContext, d.pendingContext !== d.context) : d.context && t1(l, d.context, !1), cp(l, d.containerInfo) } function eS(l, d, x, w, P) { return xc(), rp(P), d.flags |= 256, cs(l, d, x, w), d.child } var Ep = { dehydrated: null, treeContext: null, retryLane: 0 }; function Ap(l) { return { baseLanes: l, cachePool: null, transitions: null } } function tS(l, d, x) { var w = d.pendingProps, P = Gr.current, O = !1, F = (d.flags & 128) !== 0, ae; if ((ae = F) || (ae = l !== null && l.memoizedState === null ? !1 : (P & 2) !== 0), ae ? (O = !0, d.flags &= -129) : (l === null || l.memoizedState !== null) && (P |= 1), Er(Gr, P & 1), l === null) return tp(d), l = d.memoizedState, l !== null && (l = l.dehydrated, l !== null) ? ((d.mode & 1) === 0 ? d.lanes = 1 : l.data === "$!" ? d.lanes = 8 : d.lanes = 1073741824, null) : (F = w.children, l = w.fallback, O ? (w = d.mode, O = d.child, F = { mode: "hidden", children: F }, (w & 1) === 0 && O !== null ? (O.childLanes = 0, O.pendingProps = F) : O = Jg(F, w, 0, null), l = fl(l, w, x, null), O.return = d, l.return = d, O.sibling = l, d.child = O, d.child.memoizedState = Ap(x), d.memoizedState = Ep, l) : Pp(d, F)); if (P = l.memoizedState, P !== null && (ae = P.dehydrated, ae !== null)) return vR(l, d, F, w, ae, P, x); if (O) { O = w.fallback, F = d.mode, P = l.child, ae = P.sibling; var oe = { mode: "hidden", children: w.children }; return (F & 1) === 0 && d.child !== P ? (w = d.child, w.childLanes = 0, w.pendingProps = oe, d.deletions = null) : (w = Eo(P, oe), w.subtreeFlags = P.subtreeFlags & 14680064), ae !== null ? O = Eo(ae, O) : (O = fl(O, F, x, null), O.flags |= 2), O.return = d, w.return = d, w.sibling = O, d.child = w, w = O, O = d.child, F = l.child.memoizedState, F = F === null ? Ap(x) : { baseLanes: F.baseLanes | x, cachePool: null, transitions: F.transitions }, O.memoizedState = F, O.childLanes = l.childLanes & ~x, d.memoizedState = Ep, w } return O = l.child, l = O.sibling, w = Eo(O, { mode: "visible", children: w.children }), (d.mode & 1) === 0 && (w.lanes = x), w.return = d, w.sibling = null, l !== null && (x = d.deletions, x === null ? (d.deletions = [l], d.flags |= 16) : x.push(l)), d.child = w, d.memoizedState = null, w } function Pp(l, d) { return d = Jg({ mode: "visible", children: d }, l.mode, 0, null), d.return = l, l.child = d } function Fg(l, d, x, w) { return w !== null && rp(w), pc(d, l.child, null, x), l = Pp(d, d.pendingProps.children), l.flags |= 2, d.memoizedState = null, l } function vR(l, d, x, w, P, O, F) { if (x) return d.flags & 256 ? (d.flags &= -257, w = Np(Error(a(422))), Fg(l, d, F, w)) : d.memoizedState !== null ? (d.child = l.child, d.flags |= 128, null) : (O = w.fallback, P = d.mode, w = Jg({ mode: "visible", children: w.children }, P, 0, null), O = fl(O, P, F, null), O.flags |= 2, w.return = d, O.return = d, w.sibling = O, d.child = w, (d.mode & 1) !== 0 && pc(d, l.child, null, F), d.child.memoizedState = Ap(F), d.memoizedState = Ep, O); if ((d.mode & 1) === 0) return Fg(l, d, F, null); if (P.data === "$!") { if (w = P.nextSibling && P.nextSibling.dataset, w) var ae = w.dgst; return w = ae, O = Error(a(419)), w = Np(O, w, void 0), Fg(l, d, F, w) } if (ae = (F & l.childLanes) !== 0, Es || ae) { if (w = Ia, w !== null) { switch (F & -F) { case 4: P = 2; break; case 16: P = 8; break; case 64: case 128: case 256: case 512: case 1024: case 2048: case 4096: case 8192: case 16384: case 32768: case 65536: case 131072: case 262144: case 524288: case 1048576: case 2097152: case 4194304: case 8388608: case 16777216: case 33554432: case 67108864: P = 32; break; case 536870912: P = 268435456; break; default: P = 0 }P = (P & (w.suspendedLanes | F)) !== 0 ? 0 : P, P !== 0 && P !== O.retryLane && (O.retryLane = P, Ni(l, P), In(w, l, P, -1)) } return Wp(), w = Np(Error(a(421))), Fg(l, d, F, w) } return P.data === "$?" ? (d.flags |= 128, d.child = l.child, d = OR.bind(null, l), P._reactRetry = d, null) : (l = O.treeContext, Hs = xo(P.nextSibling), qs = d, $r = !0, Pn = null, l !== null && (rn[an++] = wi, rn[an++] = ji, rn[an++] = il, wi = l.id, ji = l.overflow, il = d), d = Pp(d, w.children), d.flags |= 4096, d) } function rS(l, d, x) { l.lanes |= d; var w = l.alternate; w !== null && (w.lanes |= d), ip(l.return, d, x) } function Tp(l, d, x, w, P) { var O = l.memoizedState; O === null ? l.memoizedState = { isBackwards: d, rendering: null, renderingStartTime: 0, last: w, tail: x, tailMode: P } : (O.isBackwards = d, O.rendering = null, O.renderingStartTime = 0, O.last = w, O.tail = x, O.tailMode = P) } function aS(l, d, x) { var w = d.pendingProps, P = w.revealOrder, O = w.tail; if (cs(l, d, w.children, x), w = Gr.current, (w & 2) !== 0) w = w & 1 | 2, d.flags |= 128; else { if (l !== null && (l.flags & 128) !== 0) e: for (l = d.child; l !== null;) { if (l.tag === 13) l.memoizedState !== null && rS(l, x, d); else if (l.tag === 19) rS(l, x, d); else if (l.child !== null) { l.child.return = l, l = l.child; continue } if (l === d) break e; for (; l.sibling === null;) { if (l.return === null || l.return === d) break e; l = l.return } l.sibling.return = l.return, l = l.sibling } w &= 1 } if (Er(Gr, w), (d.mode & 1) === 0) d.memoizedState = null; else switch (P) { case "forwards": for (x = d.child, P = null; x !== null;)l = x.alternate, l !== null && Ig(l) === null && (P = x), x = x.sibling; x = P, x === null ? (P = d.child, d.child = null) : (P = x.sibling, x.sibling = null), Tp(d, !1, P, x, O); break; case "backwards": for (x = null, P = d.child, d.child = null; P !== null;) { if (l = P.alternate, l !== null && Ig(l) === null) { d.child = P; break } l = P.sibling, P.sibling = x, x = P, P = l } Tp(d, !0, x, null, O); break; case "together": Tp(d, !1, null, null, void 0); break; default: d.memoizedState = null }return d.child } function zg(l, d) { (d.mode & 1) === 0 && l !== null && (l.alternate = null, d.alternate = null, d.flags |= 2) } function Si(l, d, x) { if (l !== null && (d.dependencies = l.dependencies), ul |= d.lanes, (x & d.childLanes) === 0) return null; if (l !== null && d.child !== l.child) throw Error(a(153)); if (d.child !== null) { for (l = d.child, x = Eo(l, l.pendingProps), d.child = x, x.return = d; l.sibling !== null;)l = l.sibling, x = x.sibling = Eo(l, l.pendingProps), x.return = d; x.sibling = null } return d.child } function bR(l, d, x) { switch (d.tag) { case 3: J1(d), xc(); break; case 5: p1(d); break; case 1: Cs(d.type) && Ng(d); break; case 4: cp(d, d.stateNode.containerInfo); break; case 10: var w = d.type._context, P = d.memoizedProps.value; Er(Pg, w._currentValue), w._currentValue = P; break; case 13: if (w = d.memoizedState, w !== null) return w.dehydrated !== null ? (Er(Gr, Gr.current & 1), d.flags |= 128, null) : (x & d.child.childLanes) !== 0 ? tS(l, d, x) : (Er(Gr, Gr.current & 1), l = Si(l, d, x), l !== null ? l.sibling : null); Er(Gr, Gr.current & 1); break; case 19: if (w = (x & d.childLanes) !== 0, (l.flags & 128) !== 0) { if (w) return aS(l, d, x); d.flags |= 128 } if (P = d.memoizedState, P !== null && (P.rendering = null, P.tail = null, P.lastEffect = null), Er(Gr, Gr.current), w) break; return null; case 22: case 23: return d.lanes = 0, Q1(l, d, x) }return Si(l, d, x) } var sS, Dp, nS, iS; sS = function (l, d) { for (var x = d.child; x !== null;) { if (x.tag === 5 || x.tag === 6) l.appendChild(x.stateNode); else if (x.tag !== 4 && x.child !== null) { x.child.return = x, x = x.child; continue } if (x === d) break; for (; x.sibling === null;) { if (x.return === null || x.return === d) return; x = x.return } x.sibling.return = x.return, x = x.sibling } }, Dp = function () { }, nS = function (l, d, x, w) { var P = l.memoizedProps; if (P !== w) { l = d.stateNode, cl(Kn.current); var O = null; switch (x) { case "input": P = ne(l, P), w = ne(l, w), O = []; break; case "select": P = z({}, P, { value: void 0 }), w = z({}, w, { value: void 0 }), O = []; break; case "textarea": P = Xe(l, P), w = Xe(l, w), O = []; break; default: typeof P.onClick != "function" && typeof w.onClick == "function" && (l.onclick = bg) }Ge(x, w); var F; x = null; for (Se in P) if (!w.hasOwnProperty(Se) && P.hasOwnProperty(Se) && P[Se] != null) if (Se === "style") { var ae = P[Se]; for (F in ae) ae.hasOwnProperty(F) && (x || (x = {}), x[F] = "") } else Se !== "dangerouslySetInnerHTML" && Se !== "children" && Se !== "suppressContentEditableWarning" && Se !== "suppressHydrationWarning" && Se !== "autoFocus" && (n.hasOwnProperty(Se) ? O || (O = []) : (O = O || []).push(Se, null)); for (Se in w) { var oe = w[Se]; if (ae = P?.[Se], w.hasOwnProperty(Se) && oe !== ae && (oe != null || ae != null)) if (Se === "style") if (ae) { for (F in ae) !ae.hasOwnProperty(F) || oe && oe.hasOwnProperty(F) || (x || (x = {}), x[F] = ""); for (F in oe) oe.hasOwnProperty(F) && ae[F] !== oe[F] && (x || (x = {}), x[F] = oe[F]) } else x || (O || (O = []), O.push(Se, x)), x = oe; else Se === "dangerouslySetInnerHTML" ? (oe = oe ? oe.__html : void 0, ae = ae ? ae.__html : void 0, oe != null && ae !== oe && (O = O || []).push(Se, oe)) : Se === "children" ? typeof oe != "string" && typeof oe != "number" || (O = O || []).push(Se, "" + oe) : Se !== "suppressContentEditableWarning" && Se !== "suppressHydrationWarning" && (n.hasOwnProperty(Se) ? (oe != null && Se === "onScroll" && Dr("scroll", l), O || ae === oe || (O = [])) : (O = O || []).push(Se, oe)) } x && (O = O || []).push("style", x); var Se = O; (d.updateQueue = Se) && (d.flags |= 4) } }, iS = function (l, d, x, w) { x !== w && (d.flags |= 4) }; function ou(l, d) { if (!$r) switch (l.tailMode) { case "hidden": d = l.tail; for (var x = null; d !== null;)d.alternate !== null && (x = d), d = d.sibling; x === null ? l.tail = null : x.sibling = null; break; case "collapsed": x = l.tail; for (var w = null; x !== null;)x.alternate !== null && (w = x), x = x.sibling; w === null ? d || l.tail === null ? l.tail = null : l.tail.sibling = null : w.sibling = null } } function rs(l) { var d = l.alternate !== null && l.alternate.child === l.child, x = 0, w = 0; if (d) for (var P = l.child; P !== null;)x |= P.lanes | P.childLanes, w |= P.subtreeFlags & 14680064, w |= P.flags & 14680064, P.return = l, P = P.sibling; else for (P = l.child; P !== null;)x |= P.lanes | P.childLanes, w |= P.subtreeFlags, w |= P.flags, P.return = l, P = P.sibling; return l.subtreeFlags |= w, l.childLanes = x, d } function wR(l, d, x) { var w = d.pendingProps; switch (Jx(d), d.tag) { case 2: case 16: case 15: case 0: case 11: case 7: case 8: case 12: case 9: case 14: return rs(d), null; case 1: return Cs(d.type) && jg(), rs(d), null; case 3: return w = d.stateNode, bc(), Or(Ss), Or(es), mp(), w.pendingContext && (w.context = w.pendingContext, w.pendingContext = null), (l === null || l.child === null) && (Eg(d) ? d.flags |= 4 : l === null || l.memoizedState.isDehydrated && (d.flags & 256) === 0 || (d.flags |= 1024, Pn !== null && (Bp(Pn), Pn = null))), Dp(l, d), rs(d), null; case 5: dp(d); var P = cl(ru.current); if (x = d.type, l !== null && d.stateNode != null) nS(l, d, x, w, P), l.ref !== d.ref && (d.flags |= 512, d.flags |= 2097152); else { if (!w) { if (d.stateNode === null) throw Error(a(166)); return rs(d), null } if (l = cl(Kn.current), Eg(d)) { w = d.stateNode, x = d.type; var O = d.memoizedProps; switch (w[Gn] = d, w[Xd] = O, l = (d.mode & 1) !== 0, x) { case "dialog": Dr("cancel", w), Dr("close", w); break; case "iframe": case "object": case "embed": Dr("load", w); break; case "video": case "audio": for (P = 0; P < Kd.length; P++)Dr(Kd[P], w); break; case "source": Dr("error", w); break; case "img": case "image": case "link": Dr("error", w), Dr("load", w); break; case "details": Dr("toggle", w); break; case "input": De(w, O), Dr("invalid", w); break; case "select": w._wrapperState = { wasMultiple: !!O.multiple }, Dr("invalid", w); break; case "textarea": jt(w, O), Dr("invalid", w) }Ge(x, O), P = null; for (var F in O) if (O.hasOwnProperty(F)) { var ae = O[F]; F === "children" ? typeof ae == "string" ? w.textContent !== ae && (O.suppressHydrationWarning !== !0 && vg(w.textContent, ae, l), P = ["children", ae]) : typeof ae == "number" && w.textContent !== "" + ae && (O.suppressHydrationWarning !== !0 && vg(w.textContent, ae, l), P = ["children", "" + ae]) : n.hasOwnProperty(F) && ae != null && F === "onScroll" && Dr("scroll", w) } switch (x) { case "input": Te(w), Bt(w, O, !0); break; case "textarea": Te(w), Le(w); break; case "select": case "option": break; default: typeof O.onClick == "function" && (w.onclick = bg) }w = P, d.updateQueue = w, w !== null && (d.flags |= 4) } else { F = P.nodeType === 9 ? P : P.ownerDocument, l === "http://www.w3.org/1999/xhtml" && (l = Ve(x)), l === "http://www.w3.org/1999/xhtml" ? x === "script" ? (l = F.createElement("div"), l.innerHTML = "<script><\/script>", l = l.removeChild(l.firstChild)) : typeof w.is == "string" ? l = F.createElement(x, { is: w.is }) : (l = F.createElement(x), x === "select" && (F = l, w.multiple ? F.multiple = !0 : w.size && (F.size = w.size))) : l = F.createElementNS(l, x), l[Gn] = d, l[Xd] = w, sS(l, d, !1, !1), d.stateNode = l; e: { switch (F = qe(x, w), x) { case "dialog": Dr("cancel", l), Dr("close", l), P = w; break; case "iframe": case "object": case "embed": Dr("load", l), P = w; break; case "video": case "audio": for (P = 0; P < Kd.length; P++)Dr(Kd[P], l); P = w; break; case "source": Dr("error", l), P = w; break; case "img": case "image": case "link": Dr("error", l), Dr("load", l), P = w; break; case "details": Dr("toggle", l), P = w; break; case "input": De(l, w), P = ne(l, w), Dr("invalid", l); break; case "option": P = w; break; case "select": l._wrapperState = { wasMultiple: !!w.multiple }, P = z({}, w, { value: void 0 }), Dr("invalid", l); break; case "textarea": jt(l, w), P = Xe(l, w), Dr("invalid", l); break; default: P = w }Ge(x, P), ae = P; for (O in ae) if (ae.hasOwnProperty(O)) { var oe = ae[O]; O === "style" ? he(l, oe) : O === "dangerouslySetInnerHTML" ? (oe = oe ? oe.__html : void 0, oe != null && Y(l, oe)) : O === "children" ? typeof oe == "string" ? (x !== "textarea" || oe !== "") && je(l, oe) : typeof oe == "number" && je(l, "" + oe) : O !== "suppressContentEditableWarning" && O !== "suppressHydrationWarning" && O !== "autoFocus" && (n.hasOwnProperty(O) ? oe != null && O === "onScroll" && Dr("scroll", l) : oe != null && E(l, O, oe, F)) } switch (x) { case "input": Te(l), Bt(l, w, !1); break; case "textarea": Te(l), Le(l); break; case "option": w.value != null && l.setAttribute("value", "" + te(w.value)); break; case "select": l.multiple = !!w.multiple, O = w.value, O != null ? ce(l, !!w.multiple, O, !1) : w.defaultValue != null && ce(l, !!w.multiple, w.defaultValue, !0); break; default: typeof P.onClick == "function" && (l.onclick = bg) }switch (x) { case "button": case "input": case "select": case "textarea": w = !!w.autoFocus; break e; case "img": w = !0; break e; default: w = !1 } } w && (d.flags |= 4) } d.ref !== null && (d.flags |= 512, d.flags |= 2097152) } return rs(d), null; case 6: if (l && d.stateNode != null) iS(l, d, l.memoizedProps, w); else { if (typeof w != "string" && d.stateNode === null) throw Error(a(166)); if (x = cl(ru.current), cl(Kn.current), Eg(d)) { if (w = d.stateNode, x = d.memoizedProps, w[Gn] = d, (O = w.nodeValue !== x) && (l = qs, l !== null)) switch (l.tag) { case 3: vg(w.nodeValue, x, (l.mode & 1) !== 0); break; case 5: l.memoizedProps.suppressHydrationWarning !== !0 && vg(w.nodeValue, x, (l.mode & 1) !== 0) }O && (d.flags |= 4) } else w = (x.nodeType === 9 ? x : x.ownerDocument).createTextNode(w), w[Gn] = d, d.stateNode = w } return rs(d), null; case 13: if (Or(Gr), w = d.memoizedState, l === null || l.memoizedState !== null && l.memoizedState.dehydrated !== null) { if ($r && Hs !== null && (d.mode & 1) !== 0 && (d.flags & 128) === 0) c1(), xc(), d.flags |= 98560, O = !1; else if (O = Eg(d), w !== null && w.dehydrated !== null) { if (l === null) { if (!O) throw Error(a(318)); if (O = d.memoizedState, O = O !== null ? O.dehydrated : null, !O) throw Error(a(317)); O[Gn] = d } else xc(), (d.flags & 128) === 0 && (d.memoizedState = null), d.flags |= 4; rs(d), O = !1 } else Pn !== null && (Bp(Pn), Pn = null), O = !0; if (!O) return d.flags & 65536 ? d : null } return (d.flags & 128) !== 0 ? (d.lanes = x, d) : (w = w !== null, w !== (l !== null && l.memoizedState !== null) && w && (d.child.flags |= 8192, (d.mode & 1) !== 0 && (l === null || (Gr.current & 1) !== 0 ? Na === 0 && (Na = 3) : Wp())), d.updateQueue !== null && (d.flags |= 4), rs(d), null); case 4: return bc(), Dp(l, d), l === null && Yd(d.stateNode.containerInfo), rs(d), null; case 10: return np(d.type._context), rs(d), null; case 17: return Cs(d.type) && jg(), rs(d), null; case 19: if (Or(Gr), O = d.memoizedState, O === null) return rs(d), null; if (w = (d.flags & 128) !== 0, F = O.rendering, F === null) if (w) ou(O, !1); else { if (Na !== 0 || l !== null && (l.flags & 128) !== 0) for (l = d.child; l !== null;) { if (F = Ig(l), F !== null) { for (d.flags |= 128, ou(O, !1), w = F.updateQueue, w !== null && (d.updateQueue = w, d.flags |= 4), d.subtreeFlags = 0, w = x, x = d.child; x !== null;)O = x, l = w, O.flags &= 14680066, F = O.alternate, F === null ? (O.childLanes = 0, O.lanes = l, O.child = null, O.subtreeFlags = 0, O.memoizedProps = null, O.memoizedState = null, O.updateQueue = null, O.dependencies = null, O.stateNode = null) : (O.childLanes = F.childLanes, O.lanes = F.lanes, O.child = F.child, O.subtreeFlags = 0, O.deletions = null, O.memoizedProps = F.memoizedProps, O.memoizedState = F.memoizedState, O.updateQueue = F.updateQueue, O.type = F.type, l = F.dependencies, O.dependencies = l === null ? null : { lanes: l.lanes, firstContext: l.firstContext }), x = x.sibling; return Er(Gr, Gr.current & 1 | 2), d.child } l = l.sibling } O.tail !== null && Ie() > kc && (d.flags |= 128, w = !0, ou(O, !1), d.lanes = 4194304) } else { if (!w) if (l = Ig(F), l !== null) { if (d.flags |= 128, w = !0, x = l.updateQueue, x !== null && (d.updateQueue = x, d.flags |= 4), ou(O, !0), O.tail === null && O.tailMode === "hidden" && !F.alternate && !$r) return rs(d), null } else 2 * Ie() - O.renderingStartTime > kc && x !== 1073741824 && (d.flags |= 128, w = !0, ou(O, !1), d.lanes = 4194304); O.isBackwards ? (F.sibling = d.child, d.child = F) : (x = O.last, x !== null ? x.sibling = F : d.child = F, O.last = F) } return O.tail !== null ? (d = O.tail, O.rendering = d, O.tail = d.sibling, O.renderingStartTime = Ie(), d.sibling = null, x = Gr.current, Er(Gr, w ? x & 1 | 2 : x & 1), d) : (rs(d), null); case 22: case 23: return Hp(), w = d.memoizedState !== null, l !== null && l.memoizedState !== null !== w && (d.flags |= 8192), w && (d.mode & 1) !== 0 ? (Ws & 1073741824) !== 0 && (rs(d), d.subtreeFlags & 6 && (d.flags |= 8192)) : rs(d), null; case 24: return null; case 25: return null }throw Error(a(156, d.tag)) } function jR(l, d) { switch (Jx(d), d.tag) { case 1: return Cs(d.type) && jg(), l = d.flags, l & 65536 ? (d.flags = l & -65537 | 128, d) : null; case 3: return bc(), Or(Ss), Or(es), mp(), l = d.flags, (l & 65536) !== 0 && (l & 128) === 0 ? (d.flags = l & -65537 | 128, d) : null; case 5: return dp(d), null; case 13: if (Or(Gr), l = d.memoizedState, l !== null && l.dehydrated !== null) { if (d.alternate === null) throw Error(a(340)); xc() } return l = d.flags, l & 65536 ? (d.flags = l & -65537 | 128, d) : null; case 19: return Or(Gr), null; case 4: return bc(), null; case 10: return np(d.type._context), null; case 22: case 23: return Hp(), null; case 24: return null; default: return null } } var Bg = !1, as = !1, NR = typeof WeakSet == "function" ? WeakSet : Set, it = null; function jc(l, d) { var x = l.ref; if (x !== null) if (typeof x == "function") try { x(null) } catch (w) { ea(l, d, w) } else x.current = null } function Op(l, d, x) { try { x() } catch (w) { ea(l, d, w) } } var oS = !1; function kR(l, d) { if (Hx = lg, l = Uk(), Mx(l)) { if ("selectionStart" in l) var x = { start: l.selectionStart, end: l.selectionEnd }; else e: { x = (x = l.ownerDocument) && x.defaultView || window; var w = x.getSelection && x.getSelection(); if (w && w.rangeCount !== 0) { x = w.anchorNode; var P = w.anchorOffset, O = w.focusNode; w = w.focusOffset; try { x.nodeType, O.nodeType } catch { x = null; break e } var F = 0, ae = -1, oe = -1, Se = 0, Me = 0, Ue = l, Re = null; t: for (; ;) { for (var tt; Ue !== x || P !== 0 && Ue.nodeType !== 3 || (ae = F + P), Ue !== O || w !== 0 && Ue.nodeType !== 3 || (oe = F + w), Ue.nodeType === 3 && (F += Ue.nodeValue.length), (tt = Ue.firstChild) !== null;)Re = Ue, Ue = tt; for (; ;) { if (Ue === l) break t; if (Re === x && ++Se === P && (ae = F), Re === O && ++Me === w && (oe = F), (tt = Ue.nextSibling) !== null) break; Ue = Re, Re = Ue.parentNode } Ue = tt } x = ae === -1 || oe === -1 ? null : { start: ae, end: oe } } else x = null } x = x || { start: 0, end: 0 } } else x = null; for (Wx = { focusedElem: l, selectionRange: x }, lg = !1, it = d; it !== null;)if (d = it, l = d.child, (d.subtreeFlags & 1028) !== 0 && l !== null) l.return = d, it = l; else for (; it !== null;) { d = it; try { var dt = d.alternate; if ((d.flags & 1024) !== 0) switch (d.tag) { case 0: case 11: case 15: break; case 1: if (dt !== null) { var gt = dt.memoizedProps, la = dt.memoizedState, ye = d.stateNode, me = ye.getSnapshotBeforeUpdate(d.elementType === d.type ? gt : Tn(d.type, gt), la); ye.__reactInternalSnapshotBeforeUpdate = me } break; case 3: var we = d.stateNode.containerInfo; we.nodeType === 1 ? we.textContent = "" : we.nodeType === 9 && we.documentElement && we.removeChild(we.documentElement); break; case 5: case 6: case 4: case 17: break; default: throw Error(a(163)) } } catch (ze) { ea(d, d.return, ze) } if (l = d.sibling, l !== null) { l.return = d.return, it = l; break } it = d.return } return dt = oS, oS = !1, dt } function lu(l, d, x) { var w = d.updateQueue; if (w = w !== null ? w.lastEffect : null, w !== null) { var P = w = w.next; do { if ((P.tag & l) === l) { var O = P.destroy; P.destroy = void 0, O !== void 0 && Op(d, x, O) } P = P.next } while (P !== w) } } function qg(l, d) { if (d = d.updateQueue, d = d !== null ? d.lastEffect : null, d !== null) { var x = d = d.next; do { if ((x.tag & l) === l) { var w = x.create; x.destroy = w() } x = x.next } while (x !== d) } } function Ip(l) { var d = l.ref; if (d !== null) { var x = l.stateNode; switch (l.tag) { case 5: l = x; break; default: l = x }typeof d == "function" ? d(l) : d.current = l } } function lS(l) { var d = l.alternate; d !== null && (l.alternate = null, lS(d)), l.child = null, l.deletions = null, l.sibling = null, l.tag === 5 && (d = l.stateNode, d !== null && (delete d[Gn], delete d[Xd], delete d[Yx], delete d[iR], delete d[oR])), l.stateNode = null, l.return = null, l.dependencies = null, l.memoizedProps = null, l.memoizedState = null, l.pendingProps = null, l.stateNode = null, l.updateQueue = null } function cS(l) { return l.tag === 5 || l.tag === 3 || l.tag === 4 } function dS(l) { e: for (; ;) { for (; l.sibling === null;) { if (l.return === null || cS(l.return)) return null; l = l.return } for (l.sibling.return = l.return, l = l.sibling; l.tag !== 5 && l.tag !== 6 && l.tag !== 18;) { if (l.flags & 2 || l.child === null || l.tag === 4) continue e; l.child.return = l, l = l.child } if (!(l.flags & 2)) return l.stateNode } } function Lp(l, d, x) { var w = l.tag; if (w === 5 || w === 6) l = l.stateNode, d ? x.nodeType === 8 ? x.parentNode.insertBefore(l, d) : x.insertBefore(l, d) : (x.nodeType === 8 ? (d = x.parentNode, d.insertBefore(l, x)) : (d = x, d.appendChild(l)), x = x._reactRootContainer, x != null || d.onclick !== null || (d.onclick = bg)); else if (w !== 4 && (l = l.child, l !== null)) for (Lp(l, d, x), l = l.sibling; l !== null;)Lp(l, d, x), l = l.sibling } function Rp(l, d, x) { var w = l.tag; if (w === 5 || w === 6) l = l.stateNode, d ? x.insertBefore(l, d) : x.appendChild(l); else if (w !== 4 && (l = l.child, l !== null)) for (Rp(l, d, x), l = l.sibling; l !== null;)Rp(l, d, x), l = l.sibling } var Va = null, Dn = !1; function jo(l, d, x) { for (x = x.child; x !== null;)uS(l, d, x), x = x.sibling } function uS(l, d, x) { if (Tt && typeof Tt.onCommitFiberUnmount == "function") try { Tt.onCommitFiberUnmount(Ke, x) } catch { } switch (x.tag) { case 5: as || jc(x, d); case 6: var w = Va, P = Dn; Va = null, jo(l, d, x), Va = w, Dn = P, Va !== null && (Dn ? (l = Va, x = x.stateNode, l.nodeType === 8 ? l.parentNode.removeChild(x) : l.removeChild(x)) : Va.removeChild(x.stateNode)); break; case 18: Va !== null && (Dn ? (l = Va, x = x.stateNode, l.nodeType === 8 ? Kx(l.parentNode, x) : l.nodeType === 1 && Kx(l, x), Fd(l)) : Kx(Va, x.stateNode)); break; case 4: w = Va, P = Dn, Va = x.stateNode.containerInfo, Dn = !0, jo(l, d, x), Va = w, Dn = P; break; case 0: case 11: case 14: case 15: if (!as && (w = x.updateQueue, w !== null && (w = w.lastEffect, w !== null))) { P = w = w.next; do { var O = P, F = O.destroy; O = O.tag, F !== void 0 && ((O & 2) !== 0 || (O & 4) !== 0) && Op(x, d, F), P = P.next } while (P !== w) } jo(l, d, x); break; case 1: if (!as && (jc(x, d), w = x.stateNode, typeof w.componentWillUnmount == "function")) try { w.props = x.memoizedProps, w.state = x.memoizedState, w.componentWillUnmount() } catch (ae) { ea(x, d, ae) } jo(l, d, x); break; case 21: jo(l, d, x); break; case 22: x.mode & 1 ? (as = (w = as) || x.memoizedState !== null, jo(l, d, x), as = w) : jo(l, d, x); break; default: jo(l, d, x) } } function mS(l) { var d = l.updateQueue; if (d !== null) { l.updateQueue = null; var x = l.stateNode; x === null && (x = l.stateNode = new NR), d.forEach(function (w) { var P = IR.bind(null, l, w); x.has(w) || (x.add(w), w.then(P, P)) }) } } function On(l, d) { var x = d.deletions; if (x !== null) for (var w = 0; w < x.length; w++) { var P = x[w]; try { var O = l, F = d, ae = F; e: for (; ae !== null;) { switch (ae.tag) { case 5: Va = ae.stateNode, Dn = !1; break e; case 3: Va = ae.stateNode.containerInfo, Dn = !0; break e; case 4: Va = ae.stateNode.containerInfo, Dn = !0; break e }ae = ae.return } if (Va === null) throw Error(a(160)); uS(O, F, P), Va = null, Dn = !1; var oe = P.alternate; oe !== null && (oe.return = null), P.return = null } catch (Se) { ea(P, d, Se) } } if (d.subtreeFlags & 12854) for (d = d.child; d !== null;)gS(d, l), d = d.sibling } function gS(l, d) { var x = l.alternate, w = l.flags; switch (l.tag) { case 0: case 11: case 14: case 15: if (On(d, l), Qn(l), w & 4) { try { lu(3, l, l.return), qg(3, l) } catch (gt) { ea(l, l.return, gt) } try { lu(5, l, l.return) } catch (gt) { ea(l, l.return, gt) } } break; case 1: On(d, l), Qn(l), w & 512 && x !== null && jc(x, x.return); break; case 5: if (On(d, l), Qn(l), w & 512 && x !== null && jc(x, x.return), l.flags & 32) { var P = l.stateNode; try { je(P, "") } catch (gt) { ea(l, l.return, gt) } } if (w & 4 && (P = l.stateNode, P != null)) { var O = l.memoizedProps, F = x !== null ? x.memoizedProps : O, ae = l.type, oe = l.updateQueue; if (l.updateQueue = null, oe !== null) try { ae === "input" && O.type === "radio" && O.name != null && $e(P, O), qe(ae, F); var Se = qe(ae, O); for (F = 0; F < oe.length; F += 2) { var Me = oe[F], Ue = oe[F + 1]; Me === "style" ? he(P, Ue) : Me === "dangerouslySetInnerHTML" ? Y(P, Ue) : Me === "children" ? je(P, Ue) : E(P, Me, Ue, Se) } switch (ae) { case "input": Et(P, O); break; case "textarea": Q(P, O); break; case "select": var Re = P._wrapperState.wasMultiple; P._wrapperState.wasMultiple = !!O.multiple; var tt = O.value; tt != null ? ce(P, !!O.multiple, tt, !1) : Re !== !!O.multiple && (O.defaultValue != null ? ce(P, !!O.multiple, O.defaultValue, !0) : ce(P, !!O.multiple, O.multiple ? [] : "", !1)) }P[Xd] = O } catch (gt) { ea(l, l.return, gt) } } break; case 6: if (On(d, l), Qn(l), w & 4) { if (l.stateNode === null) throw Error(a(162)); P = l.stateNode, O = l.memoizedProps; try { P.nodeValue = O } catch (gt) { ea(l, l.return, gt) } } break; case 3: if (On(d, l), Qn(l), w & 4 && x !== null && x.memoizedState.isDehydrated) try { Fd(d.containerInfo) } catch (gt) { ea(l, l.return, gt) } break; case 4: On(d, l), Qn(l); break; case 13: On(d, l), Qn(l), P = l.child, P.flags & 8192 && (O = P.memoizedState !== null, P.stateNode.isHidden = O, !O || P.alternate !== null && P.alternate.memoizedState !== null || ($p = Ie())), w & 4 && mS(l); break; case 22: if (Me = x !== null && x.memoizedState !== null, l.mode & 1 ? (as = (Se = as) || Me, On(d, l), as = Se) : On(d, l), Qn(l), w & 8192) { if (Se = l.memoizedState !== null, (l.stateNode.isHidden = Se) && !Me && (l.mode & 1) !== 0) for (it = l, Me = l.child; Me !== null;) { for (Ue = it = Me; it !== null;) { switch (Re = it, tt = Re.child, Re.tag) { case 0: case 11: case 14: case 15: lu(4, Re, Re.return); break; case 1: jc(Re, Re.return); var dt = Re.stateNode; if (typeof dt.componentWillUnmount == "function") { w = Re, x = Re.return; try { d = w, dt.props = d.memoizedProps, dt.state = d.memoizedState, dt.componentWillUnmount() } catch (gt) { ea(w, x, gt) } } break; case 5: jc(Re, Re.return); break; case 22: if (Re.memoizedState !== null) { xS(Ue); continue } }tt !== null ? (tt.return = Re, it = tt) : xS(Ue) } Me = Me.sibling } e: for (Me = null, Ue = l; ;) { if (Ue.tag === 5) { if (Me === null) { Me = Ue; try { P = Ue.stateNode, Se ? (O = P.style, typeof O.setProperty == "function" ? O.setProperty("display", "none", "important") : O.display = "none") : (ae = Ue.stateNode, oe = Ue.memoizedProps.style, F = oe != null && oe.hasOwnProperty("display") ? oe.display : null, ae.style.display = ke("display", F)) } catch (gt) { ea(l, l.return, gt) } } } else if (Ue.tag === 6) { if (Me === null) try { Ue.stateNode.nodeValue = Se ? "" : Ue.memoizedProps } catch (gt) { ea(l, l.return, gt) } } else if ((Ue.tag !== 22 && Ue.tag !== 23 || Ue.memoizedState === null || Ue === l) && Ue.child !== null) { Ue.child.return = Ue, Ue = Ue.child; continue } if (Ue === l) break e; for (; Ue.sibling === null;) { if (Ue.return === null || Ue.return === l) break e; Me === Ue && (Me = null), Ue = Ue.return } Me === Ue && (Me = null), Ue.sibling.return = Ue.return, Ue = Ue.sibling } } break; case 19: On(d, l), Qn(l), w & 4 && mS(l); break; case 21: break; default: On(d, l), Qn(l) } } function Qn(l) { var d = l.flags; if (d & 2) { try { e: { for (var x = l.return; x !== null;) { if (cS(x)) { var w = x; break e } x = x.return } throw Error(a(160)) } switch (w.tag) { case 5: var P = w.stateNode; w.flags & 32 && (je(P, ""), w.flags &= -33); var O = dS(l); Rp(l, O, P); break; case 3: case 4: var F = w.stateNode.containerInfo, ae = dS(l); Lp(l, ae, F); break; default: throw Error(a(161)) } } catch (oe) { ea(l, l.return, oe) } l.flags &= -3 } d & 4096 && (l.flags &= -4097) } function SR(l, d, x) { it = l, hS(l) } function hS(l, d, x) { for (var w = (l.mode & 1) !== 0; it !== null;) { var P = it, O = P.child; if (P.tag === 22 && w) { var F = P.memoizedState !== null || Bg; if (!F) { var ae = P.alternate, oe = ae !== null && ae.memoizedState !== null || as; ae = Bg; var Se = as; if (Bg = F, (as = oe) && !Se) for (it = P; it !== null;)F = it, oe = F.child, F.tag === 22 && F.memoizedState !== null ? pS(P) : oe !== null ? (oe.return = F, it = oe) : pS(P); for (; O !== null;)it = O, hS(O), O = O.sibling; it = P, Bg = ae, as = Se } fS(l) } else (P.subtreeFlags & 8772) !== 0 && O !== null ? (O.return = P, it = O) : fS(l) } } function fS(l) { for (; it !== null;) { var d = it; if ((d.flags & 8772) !== 0) { var x = d.alternate; try { if ((d.flags & 8772) !== 0) switch (d.tag) { case 0: case 11: case 15: as || qg(5, d); break; case 1: var w = d.stateNode; if (d.flags & 4 && !as) if (x === null) w.componentDidMount(); else { var P = d.elementType === d.type ? x.memoizedProps : Tn(d.type, x.memoizedProps); w.componentDidUpdate(P, x.memoizedState, w.__reactInternalSnapshotBeforeUpdate) } var O = d.updateQueue; O !== null && x1(d, O, w); break; case 3: var F = d.updateQueue; if (F !== null) { if (x = null, d.child !== null) switch (d.child.tag) { case 5: x = d.child.stateNode; break; case 1: x = d.child.stateNode }x1(d, F, x) } break; case 5: var ae = d.stateNode; if (x === null && d.flags & 4) { x = ae; var oe = d.memoizedProps; switch (d.type) { case "button": case "input": case "select": case "textarea": oe.autoFocus && x.focus(); break; case "img": oe.src && (x.src = oe.src) } } break; case 6: break; case 4: break; case 12: break; case 13: if (d.memoizedState === null) { var Se = d.alternate; if (Se !== null) { var Me = Se.memoizedState; if (Me !== null) { var Ue = Me.dehydrated; Ue !== null && Fd(Ue) } } } break; case 19: case 17: case 21: case 22: case 23: case 25: break; default: throw Error(a(163)) }as || d.flags & 512 && Ip(d) } catch (Re) { ea(d, d.return, Re) } } if (d === l) { it = null; break } if (x = d.sibling, x !== null) { x.return = d.return, it = x; break } it = d.return } } function xS(l) { for (; it !== null;) { var d = it; if (d === l) { it = null; break } var x = d.sibling; if (x !== null) { x.return = d.return, it = x; break } it = d.return } } function pS(l) { for (; it !== null;) { var d = it; try { switch (d.tag) { case 0: case 11: case 15: var x = d.return; try { qg(4, d) } catch (oe) { ea(d, x, oe) } break; case 1: var w = d.stateNode; if (typeof w.componentDidMount == "function") { var P = d.return; try { w.componentDidMount() } catch (oe) { ea(d, P, oe) } } var O = d.return; try { Ip(d) } catch (oe) { ea(d, O, oe) } break; case 5: var F = d.return; try { Ip(d) } catch (oe) { ea(d, F, oe) } } } catch (oe) { ea(d, d.return, oe) } if (d === l) { it = null; break } var ae = d.sibling; if (ae !== null) { ae.return = d.return, it = ae; break } it = d.return } } var CR = Math.ceil, Hg = C.ReactCurrentDispatcher, Mp = C.ReactCurrentOwner, on = C.ReactCurrentBatchConfig, Qt = 0, Ia = null, ya = null, Ga = 0, Ws = 0, Nc = po(0), Na = 0, cu = null, ul = 0, Wg = 0, _p = 0, du = null, As = null, $p = 0, kc = 1 / 0, Ci = null, Vg = !1, Up = null, No = null, Gg = !1, ko = null, Kg = 0, uu = 0, Fp = null, Yg = -1, Qg = 0; function ds() { return (Qt & 6) !== 0 ? Ie() : Yg !== -1 ? Yg : Yg = Ie() } function So(l) { return (l.mode & 1) === 0 ? 1 : (Qt & 2) !== 0 && Ga !== 0 ? Ga & -Ga : cR.transition !== null ? (Qg === 0 && (Qg = rl()), Qg) : (l = gr, l !== 0 || (l = window.event, l = l === void 0 ? 16 : vk(l.type)), l) } function In(l, d, x, w) { if (50 < uu) throw uu = 0, Fp = null, Error(a(185)); yi(l, x, w), ((Qt & 2) === 0 || l !== Ia) && (l === Ia && ((Qt & 2) === 0 && (Wg |= x), Na === 4 && Co(l, Ga)), Ps(l, w), x === 1 && Qt === 0 && (d.mode & 1) === 0 && (kc = Ie() + 500, kg && vo())) } function Ps(l, d) { var x = l.callbackNode; zs(l, d); var w = oa(l, l === Ia ? Ga : 0); if (w === 0) x !== null && Cr(x), l.callbackNode = null, l.callbackPriority = 0; else if (d = w & -w, l.callbackPriority !== d) { if (x != null && Cr(x), d === 1) l.tag === 0 ? lR(vS.bind(null, l)) : s1(vS.bind(null, l)), sR(function () { (Qt & 6) === 0 && vo() }), x = null; else { switch (uk(w)) { case 1: x = ht; break; case 4: x = re; break; case 16: x = Pe; break; case 536870912: x = bt; break; default: x = Pe }x = ES(x, yS.bind(null, l)) } l.callbackPriority = d, l.callbackNode = x } } function yS(l, d) { if (Yg = -1, Qg = 0, (Qt & 6) !== 0) throw Error(a(327)); var x = l.callbackNode; if (Sc() && l.callbackNode !== x) return null; var w = oa(l, l === Ia ? Ga : 0); if (w === 0) return null; if ((w & 30) !== 0 || (w & l.expiredLanes) !== 0 || d) d = Xg(l, w); else { d = w; var P = Qt; Qt |= 2; var O = wS(); (Ia !== l || Ga !== d) && (Ci = null, kc = Ie() + 500, gl(l, d)); do try { PR(); break } catch (ae) { bS(l, ae) } while (!0); sp(), Hg.current = O, Qt = P, ya !== null ? d = 0 : (Ia = null, Ga = 0, d = Na) } if (d !== 0) { if (d === 2 && (P = lo(l), P !== 0 && (w = P, d = zp(l, P))), d === 1) throw x = cu, gl(l, 0), Co(l, w), Ps(l, Ie()), x; if (d === 6) Co(l, w); else { if (P = l.current.alternate, (w & 30) === 0 && !ER(P) && (d = Xg(l, w), d === 2 && (O = lo(l), O !== 0 && (w = O, d = zp(l, O))), d === 1)) throw x = cu, gl(l, 0), Co(l, w), Ps(l, Ie()), x; switch (l.finishedWork = P, l.finishedLanes = w, d) { case 0: case 1: throw Error(a(345)); case 2: hl(l, As, Ci); break; case 3: if (Co(l, w), (w & 130023424) === w && (d = $p + 500 - Ie(), 10 < d)) { if (oa(l, 0) !== 0) break; if (P = l.suspendedLanes, (P & w) !== w) { ds(), l.pingedLanes |= l.suspendedLanes & P; break } l.timeoutHandle = Gx(hl.bind(null, l, As, Ci), d); break } hl(l, As, Ci); break; case 4: if (Co(l, w), (w & 4194240) === w) break; for (d = l.eventTimes, P = -1; 0 < w;) { var F = 31 - pa(w); O = 1 << F, F = d[F], F > P && (P = F), w &= ~O } if (w = P, w = Ie() - w, w = (120 > w ? 120 : 480 > w ? 480 : 1080 > w ? 1080 : 1920 > w ? 1920 : 3e3 > w ? 3e3 : 4320 > w ? 4320 : 1960 * CR(w / 1960)) - w, 10 < w) { l.timeoutHandle = Gx(hl.bind(null, l, As, Ci), w); break } hl(l, As, Ci); break; case 5: hl(l, As, Ci); break; default: throw Error(a(329)) } } } return Ps(l, Ie()), l.callbackNode === x ? yS.bind(null, l) : null } function zp(l, d) { var x = du; return l.current.memoizedState.isDehydrated && (gl(l, d).flags |= 256), l = Xg(l, d), l !== 2 && (d = As, As = x, d !== null && Bp(d)), l } function Bp(l) { As === null ? As = l : As.push.apply(As, l) } function ER(l) { for (var d = l; ;) { if (d.flags & 16384) { var x = d.updateQueue; if (x !== null && (x = x.stores, x !== null)) for (var w = 0; w < x.length; w++) { var P = x[w], O = P.getSnapshot; P = P.value; try { if (!An(O(), P)) return !1 } catch { return !1 } } } if (x = d.child, d.subtreeFlags & 16384 && x !== null) x.return = d, d = x; else { if (d === l) break; for (; d.sibling === null;) { if (d.return === null || d.return === l) return !0; d = d.return } d.sibling.return = d.return, d = d.sibling } } return !0 } function Co(l, d) { for (d &= ~_p, d &= ~Wg, l.suspendedLanes |= d, l.pingedLanes &= ~d, l = l.expirationTimes; 0 < d;) { var x = 31 - pa(d), w = 1 << x; l[x] = -1, d &= ~w } } function vS(l) { if ((Qt & 6) !== 0) throw Error(a(327)); Sc(); var d = oa(l, 0); if ((d & 1) === 0) return Ps(l, Ie()), null; var x = Xg(l, d); if (l.tag !== 0 && x === 2) { var w = lo(l); w !== 0 && (d = w, x = zp(l, w)) } if (x === 1) throw x = cu, gl(l, 0), Co(l, d), Ps(l, Ie()), x; if (x === 6) throw Error(a(345)); return l.finishedWork = l.current.alternate, l.finishedLanes = d, hl(l, As, Ci), Ps(l, Ie()), null } function qp(l, d) { var x = Qt; Qt |= 1; try { return l(d) } finally { Qt = x, Qt === 0 && (kc = Ie() + 500, kg && vo()) } } function ml(l) { ko !== null && ko.tag === 0 && (Qt & 6) === 0 && Sc(); var d = Qt; Qt |= 1; var x = on.transition, w = gr; try { if (on.transition = null, gr = 1, l) return l() } finally { gr = w, on.transition = x, Qt = d, (Qt & 6) === 0 && vo() } } function Hp() { Ws = Nc.current, Or(Nc) } function gl(l, d) { l.finishedWork = null, l.finishedLanes = 0; var x = l.timeoutHandle; if (x !== -1 && (l.timeoutHandle = -1, aR(x)), ya !== null) for (x = ya.return; x !== null;) { var w = x; switch (Jx(w), w.tag) { case 1: w = w.type.childContextTypes, w != null && jg(); break; case 3: bc(), Or(Ss), Or(es), mp(); break; case 5: dp(w); break; case 4: bc(); break; case 13: Or(Gr); break; case 19: Or(Gr); break; case 10: np(w.type._context); break; case 22: case 23: Hp() }x = x.return } if (Ia = l, ya = l = Eo(l.current, null), Ga = Ws = d, Na = 0, cu = null, _p = Wg = ul = 0, As = du = null, ll !== null) { for (d = 0; d < ll.length; d++)if (x = ll[d], w = x.interleaved, w !== null) { x.interleaved = null; var P = w.next, O = x.pending; if (O !== null) { var F = O.next; O.next = P, w.next = F } x.pending = w } ll = null } return l } function bS(l, d) { do { var x = ya; try { if (sp(), Lg.current = $g, Rg) { for (var w = Kr.memoizedState; w !== null;) { var P = w.queue; P !== null && (P.pending = null), w = w.next } Rg = !1 } if (dl = 0, Oa = ja = Kr = null, au = !1, su = 0, Mp.current = null, x === null || x.return === null) { Na = 1, cu = d, ya = null; break } e: { var O = l, F = x.return, ae = x, oe = d; if (d = Ga, ae.flags |= 32768, oe !== null && typeof oe == "object" && typeof oe.then == "function") { var Se = oe, Me = ae, Ue = Me.tag; if ((Me.mode & 1) === 0 && (Ue === 0 || Ue === 11 || Ue === 15)) { var Re = Me.alternate; Re ? (Me.updateQueue = Re.updateQueue, Me.memoizedState = Re.memoizedState, Me.lanes = Re.lanes) : (Me.updateQueue = null, Me.memoizedState = null) } var tt = W1(F); if (tt !== null) { tt.flags &= -257, V1(tt, F, ae, O, d), tt.mode & 1 && H1(O, Se, d), d = tt, oe = Se; var dt = d.updateQueue; if (dt === null) { var gt = new Set; gt.add(oe), d.updateQueue = gt } else dt.add(oe); break e } else { if ((d & 1) === 0) { H1(O, Se, d), Wp(); break e } oe = Error(a(426)) } } else if ($r && ae.mode & 1) { var la = W1(F); if (la !== null) { (la.flags & 65536) === 0 && (la.flags |= 256), V1(la, F, ae, O, d), rp(wc(oe, ae)); break e } } O = oe = wc(oe, ae), Na !== 4 && (Na = 2), du === null ? du = [O] : du.push(O), O = F; do { switch (O.tag) { case 3: O.flags |= 65536, d &= -d, O.lanes |= d; var ye = B1(O, oe, d); f1(O, ye); break e; case 1: ae = oe; var me = O.type, we = O.stateNode; if ((O.flags & 128) === 0 && (typeof me.getDerivedStateFromError == "function" || we !== null && typeof we.componentDidCatch == "function" && (No === null || !No.has(we)))) { O.flags |= 65536, d &= -d, O.lanes |= d; var ze = q1(O, ae, d); f1(O, ze); break e } }O = O.return } while (O !== null) } NS(x) } catch (ft) { d = ft, ya === x && x !== null && (ya = x = x.return); continue } break } while (!0) } function wS() { var l = Hg.current; return Hg.current = $g, l === null ? $g : l } function Wp() { (Na === 0 || Na === 3 || Na === 2) && (Na = 4), Ia === null || (ul & 268435455) === 0 && (Wg & 268435455) === 0 || Co(Ia, Ga) } function Xg(l, d) { var x = Qt; Qt |= 2; var w = wS(); (Ia !== l || Ga !== d) && (Ci = null, gl(l, d)); do try { AR(); break } catch (P) { bS(l, P) } while (!0); if (sp(), Qt = x, Hg.current = w, ya !== null) throw Error(a(261)); return Ia = null, Ga = 0, Na } function AR() { for (; ya !== null;)jS(ya) } function PR() { for (; ya !== null && !ve();)jS(ya) } function jS(l) { var d = CS(l.alternate, l, Ws); l.memoizedProps = l.pendingProps, d === null ? NS(l) : ya = d, Mp.current = null } function NS(l) { var d = l; do { var x = d.alternate; if (l = d.return, (d.flags & 32768) === 0) { if (x = wR(x, d, Ws), x !== null) { ya = x; return } } else { if (x = jR(x, d), x !== null) { x.flags &= 32767, ya = x; return } if (l !== null) l.flags |= 32768, l.subtreeFlags = 0, l.deletions = null; else { Na = 6, ya = null; return } } if (d = d.sibling, d !== null) { ya = d; return } ya = d = l } while (d !== null); Na === 0 && (Na = 5) } function hl(l, d, x) { var w = gr, P = on.transition; try { on.transition = null, gr = 1, TR(l, d, x, w) } finally { on.transition = P, gr = w } return null } function TR(l, d, x, w) { do Sc(); while (ko !== null); if ((Qt & 6) !== 0) throw Error(a(327)); x = l.finishedWork; var P = l.finishedLanes; if (x === null) return null; if (l.finishedWork = null, l.finishedLanes = 0, x === l.current) throw Error(a(177)); l.callbackNode = null, l.callbackPriority = 0; var O = x.lanes | x.childLanes; if (al(l, O), l === Ia && (ya = Ia = null, Ga = 0), (x.subtreeFlags & 2064) === 0 && (x.flags & 2064) === 0 || Gg || (Gg = !0, ES(Pe, function () { return Sc(), null })), O = (x.flags & 15990) !== 0, (x.subtreeFlags & 15990) !== 0 || O) { O = on.transition, on.transition = null; var F = gr; gr = 1; var ae = Qt; Qt |= 4, Mp.current = null, kR(l, x), gS(x, l), QL(Wx), lg = !!Hx, Wx = Hx = null, l.current = x, SR(x), Fe(), Qt = ae, gr = F, on.transition = O } else l.current = x; if (Gg && (Gg = !1, ko = l, Kg = P), O = l.pendingLanes, O === 0 && (No = null), Jr(x.stateNode), Ps(l, Ie()), d !== null) for (w = l.onRecoverableError, x = 0; x < d.length; x++)P = d[x], w(P.value, { componentStack: P.stack, digest: P.digest }); if (Vg) throw Vg = !1, l = Up, Up = null, l; return (Kg & 1) !== 0 && l.tag !== 0 && Sc(), O = l.pendingLanes, (O & 1) !== 0 ? l === Fp ? uu++ : (uu = 0, Fp = l) : uu = 0, vo(), null } function Sc() { if (ko !== null) { var l = uk(Kg), d = on.transition, x = gr; try { if (on.transition = null, gr = 16 > l ? 16 : l, ko === null) var w = !1; else { if (l = ko, ko = null, Kg = 0, (Qt & 6) !== 0) throw Error(a(331)); var P = Qt; for (Qt |= 4, it = l.current; it !== null;) { var O = it, F = O.child; if ((it.flags & 16) !== 0) { var ae = O.deletions; if (ae !== null) { for (var oe = 0; oe < ae.length; oe++) { var Se = ae[oe]; for (it = Se; it !== null;) { var Me = it; switch (Me.tag) { case 0: case 11: case 15: lu(8, Me, O) }var Ue = Me.child; if (Ue !== null) Ue.return = Me, it = Ue; else for (; it !== null;) { Me = it; var Re = Me.sibling, tt = Me.return; if (lS(Me), Me === Se) { it = null; break } if (Re !== null) { Re.return = tt, it = Re; break } it = tt } } } var dt = O.alternate; if (dt !== null) { var gt = dt.child; if (gt !== null) { dt.child = null; do { var la = gt.sibling; gt.sibling = null, gt = la } while (gt !== null) } } it = O } } if ((O.subtreeFlags & 2064) !== 0 && F !== null) F.return = O, it = F; else e: for (; it !== null;) { if (O = it, (O.flags & 2048) !== 0) switch (O.tag) { case 0: case 11: case 15: lu(9, O, O.return) }var ye = O.sibling; if (ye !== null) { ye.return = O.return, it = ye; break e } it = O.return } } var me = l.current; for (it = me; it !== null;) { F = it; var we = F.child; if ((F.subtreeFlags & 2064) !== 0 && we !== null) we.return = F, it = we; else e: for (F = me; it !== null;) { if (ae = it, (ae.flags & 2048) !== 0) try { switch (ae.tag) { case 0: case 11: case 15: qg(9, ae) } } catch (ft) { ea(ae, ae.return, ft) } if (ae === F) { it = null; break e } var ze = ae.sibling; if (ze !== null) { ze.return = ae.return, it = ze; break e } it = ae.return } } if (Qt = P, vo(), Tt && typeof Tt.onPostCommitFiberRoot == "function") try { Tt.onPostCommitFiberRoot(Ke, l) } catch { } w = !0 } return w } finally { gr = x, on.transition = d } } return !1 } function kS(l, d, x) { d = wc(x, d), d = B1(l, d, 1), l = wo(l, d, 1), d = ds(), l !== null && (yi(l, 1, d), Ps(l, d)) } function ea(l, d, x) { if (l.tag === 3) kS(l, l, x); else for (; d !== null;) { if (d.tag === 3) { kS(d, l, x); break } else if (d.tag === 1) { var w = d.stateNode; if (typeof d.type.getDerivedStateFromError == "function" || typeof w.componentDidCatch == "function" && (No === null || !No.has(w))) { l = wc(x, l), l = q1(d, l, 1), d = wo(d, l, 1), l = ds(), d !== null && (yi(d, 1, l), Ps(d, l)); break } } d = d.return } } function DR(l, d, x) { var w = l.pingCache; w !== null && w.delete(d), d = ds(), l.pingedLanes |= l.suspendedLanes & x, Ia === l && (Ga & x) === x && (Na === 4 || Na === 3 && (Ga & 130023424) === Ga && 500 > Ie() - $p ? gl(l, 0) : _p |= x), Ps(l, d) } function SS(l, d) { d === 0 && ((l.mode & 1) === 0 ? d = 1 : (d = Ja, Ja <<= 1, (Ja & 130023424) === 0 && (Ja = 4194304))); var x = ds(); l = Ni(l, d), l !== null && (yi(l, d, x), Ps(l, x)) } function OR(l) { var d = l.memoizedState, x = 0; d !== null && (x = d.retryLane), SS(l, x) } function IR(l, d) { var x = 0; switch (l.tag) { case 13: var w = l.stateNode, P = l.memoizedState; P !== null && (x = P.retryLane); break; case 19: w = l.stateNode; break; default: throw Error(a(314)) }w !== null && w.delete(d), SS(l, x) } var CS; CS = function (l, d, x) { if (l !== null) if (l.memoizedProps !== d.pendingProps || Ss.current) Es = !0; else { if ((l.lanes & x) === 0 && (d.flags & 128) === 0) return Es = !1, bR(l, d, x); Es = (l.flags & 131072) !== 0 } else Es = !1, $r && (d.flags & 1048576) !== 0 && n1(d, Cg, d.index); switch (d.lanes = 0, d.tag) { case 2: var w = d.type; zg(l, d), l = d.pendingProps; var P = gc(d, es.current); vc(d, x), P = fp(null, d, w, l, P, x); var O = xp(); return d.flags |= 1, typeof P == "object" && P !== null && typeof P.render == "function" && P.$$typeof === void 0 ? (d.tag = 1, d.memoizedState = null, d.updateQueue = null, Cs(w) ? (O = !0, Ng(d)) : O = !1, d.memoizedState = P.state !== null && P.state !== void 0 ? P.state : null, lp(d), P.updater = Ug, d.stateNode = P, P._reactInternals = d, jp(d, w, l, x), d = Cp(null, d, w, !0, O, x)) : (d.tag = 0, $r && O && Zx(d), cs(null, d, P, x), d = d.child), d; case 16: w = d.elementType; e: { switch (zg(l, d), l = d.pendingProps, P = w._init, w = P(w._payload), d.type = w, P = d.tag = RR(w), l = Tn(w, l), P) { case 0: d = Sp(null, d, w, l, x); break e; case 1: d = Z1(null, d, w, l, x); break e; case 11: d = G1(null, d, w, l, x); break e; case 14: d = K1(null, d, w, Tn(w.type, l), x); break e }throw Error(a(306, w, "")) } return d; case 0: return w = d.type, P = d.pendingProps, P = d.elementType === w ? P : Tn(w, P), Sp(l, d, w, P, x); case 1: return w = d.type, P = d.pendingProps, P = d.elementType === w ? P : Tn(w, P), Z1(l, d, w, P, x); case 3: e: { if (J1(d), l === null) throw Error(a(387)); w = d.pendingProps, O = d.memoizedState, P = O.element, h1(l, d), Og(d, w, null, x); var F = d.memoizedState; if (w = F.element, O.isDehydrated) if (O = { element: w, isDehydrated: !1, cache: F.cache, pendingSuspenseBoundaries: F.pendingSuspenseBoundaries, transitions: F.transitions }, d.updateQueue.baseState = O, d.memoizedState = O, d.flags & 256) { P = wc(Error(a(423)), d), d = eS(l, d, w, x, P); break e } else if (w !== P) { P = wc(Error(a(424)), d), d = eS(l, d, w, x, P); break e } else for (Hs = xo(d.stateNode.containerInfo.firstChild), qs = d, $r = !0, Pn = null, x = m1(d, null, w, x), d.child = x; x;)x.flags = x.flags & -3 | 4096, x = x.sibling; else { if (xc(), w === P) { d = Si(l, d, x); break e } cs(l, d, w, x) } d = d.child } return d; case 5: return p1(d), l === null && tp(d), w = d.type, P = d.pendingProps, O = l !== null ? l.memoizedProps : null, F = P.children, Vx(w, P) ? F = null : O !== null && Vx(w, O) && (d.flags |= 32), X1(l, d), cs(l, d, F, x), d.child; case 6: return l === null && tp(d), null; case 13: return tS(l, d, x); case 4: return cp(d, d.stateNode.containerInfo), w = d.pendingProps, l === null ? d.child = pc(d, null, w, x) : cs(l, d, w, x), d.child; case 11: return w = d.type, P = d.pendingProps, P = d.elementType === w ? P : Tn(w, P), G1(l, d, w, P, x); case 7: return cs(l, d, d.pendingProps, x), d.child; case 8: return cs(l, d, d.pendingProps.children, x), d.child; case 12: return cs(l, d, d.pendingProps.children, x), d.child; case 10: e: { if (w = d.type._context, P = d.pendingProps, O = d.memoizedProps, F = P.value, Er(Pg, w._currentValue), w._currentValue = F, O !== null) if (An(O.value, F)) { if (O.children === P.children && !Ss.current) { d = Si(l, d, x); break e } } else for (O = d.child, O !== null && (O.return = d); O !== null;) { var ae = O.dependencies; if (ae !== null) { F = O.child; for (var oe = ae.firstContext; oe !== null;) { if (oe.context === w) { if (O.tag === 1) { oe = ki(-1, x & -x), oe.tag = 2; var Se = O.updateQueue; if (Se !== null) { Se = Se.shared; var Me = Se.pending; Me === null ? oe.next = oe : (oe.next = Me.next, Me.next = oe), Se.pending = oe } } O.lanes |= x, oe = O.alternate, oe !== null && (oe.lanes |= x), ip(O.return, x, d), ae.lanes |= x; break } oe = oe.next } } else if (O.tag === 10) F = O.type === d.type ? null : O.child; else if (O.tag === 18) { if (F = O.return, F === null) throw Error(a(341)); F.lanes |= x, ae = F.alternate, ae !== null && (ae.lanes |= x), ip(F, x, d), F = O.sibling } else F = O.child; if (F !== null) F.return = O; else for (F = O; F !== null;) { if (F === d) { F = null; break } if (O = F.sibling, O !== null) { O.return = F.return, F = O; break } F = F.return } O = F } cs(l, d, P.children, x), d = d.child } return d; case 9: return P = d.type, w = d.pendingProps.children, vc(d, x), P = sn(P), w = w(P), d.flags |= 1, cs(l, d, w, x), d.child; case 14: return w = d.type, P = Tn(w, d.pendingProps), P = Tn(w.type, P), K1(l, d, w, P, x); case 15: return Y1(l, d, d.type, d.pendingProps, x); case 17: return w = d.type, P = d.pendingProps, P = d.elementType === w ? P : Tn(w, P), zg(l, d), d.tag = 1, Cs(w) ? (l = !0, Ng(d)) : l = !1, vc(d, x), F1(d, w, P), jp(d, w, P, x), Cp(null, d, w, !0, l, x); case 19: return aS(l, d, x); case 22: return Q1(l, d, x) }throw Error(a(156, d.tag)) }; function ES(l, d) { return Ns(l, d) } function LR(l, d, x, w) { this.tag = l, this.key = x, this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null, this.index = 0, this.ref = null, this.pendingProps = d, this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null, this.mode = w, this.subtreeFlags = this.flags = 0, this.deletions = null, this.childLanes = this.lanes = 0, this.alternate = null } function ln(l, d, x, w) { return new LR(l, d, x, w) } function Vp(l) { return l = l.prototype, !(!l || !l.isReactComponent) } function RR(l) { if (typeof l == "function") return Vp(l) ? 1 : 0; if (l != null) { if (l = l.$$typeof, l === M) return 11; if (l === X) return 14 } return 2 } function Eo(l, d) { var x = l.alternate; return x === null ? (x = ln(l.tag, d, l.key, l.mode), x.elementType = l.elementType, x.type = l.type, x.stateNode = l.stateNode, x.alternate = l, l.alternate = x) : (x.pendingProps = d, x.type = l.type, x.flags = 0, x.subtreeFlags = 0, x.deletions = null), x.flags = l.flags & 14680064, x.childLanes = l.childLanes, x.lanes = l.lanes, x.child = l.child, x.memoizedProps = l.memoizedProps, x.memoizedState = l.memoizedState, x.updateQueue = l.updateQueue, d = l.dependencies, x.dependencies = d === null ? null : { lanes: d.lanes, firstContext: d.firstContext }, x.sibling = l.sibling, x.index = l.index, x.ref = l.ref, x } function Zg(l, d, x, w, P, O) { var F = 2; if (w = l, typeof l == "function") Vp(l) && (F = 1); else if (typeof l == "string") F = 5; else e: switch (l) { case D: return fl(x.children, P, O, d); case I: F = 8, P |= 8; break; case $: return l = ln(12, x, d, P | 2), l.elementType = $, l.lanes = O, l; case q: return l = ln(13, x, d, P), l.elementType = q, l.lanes = O, l; case V: return l = ln(19, x, d, P), l.elementType = V, l.lanes = O, l; case le: return Jg(x, P, O, d); default: if (typeof l == "object" && l !== null) switch (l.$$typeof) { case B: F = 10; break e; case W: F = 9; break e; case M: F = 11; break e; case X: F = 14; break e; case se: F = 16, w = null; break e }throw Error(a(130, l == null ? l : typeof l, "")) }return d = ln(F, x, d, P), d.elementType = l, d.type = w, d.lanes = O, d } function fl(l, d, x, w) { return l = ln(7, l, w, d), l.lanes = x, l } function Jg(l, d, x, w) { return l = ln(22, l, w, d), l.elementType = le, l.lanes = x, l.stateNode = { isHidden: !1 }, l } function Gp(l, d, x) { return l = ln(6, l, null, d), l.lanes = x, l } function Kp(l, d, x) { return d = ln(4, l.children !== null ? l.children : [], l.key, d), d.lanes = x, d.stateNode = { containerInfo: l.containerInfo, pendingChildren: null, implementation: l.implementation }, d } function MR(l, d, x, w, P) { this.tag = d, this.containerInfo = l, this.finishedWork = this.pingCache = this.current = this.pendingChildren = null, this.timeoutHandle = -1, this.callbackNode = this.pendingContext = this.context = null, this.callbackPriority = 0, this.eventTimes = ac(0), this.expirationTimes = ac(-1), this.entangledLanes = this.finishedLanes = this.mutableReadLanes = this.expiredLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0, this.entanglements = ac(0), this.identifierPrefix = w, this.onRecoverableError = P, this.mutableSourceEagerHydrationData = null } function Yp(l, d, x, w, P, O, F, ae, oe) { return l = new MR(l, d, x, ae, oe), d === 1 ? (d = 1, O === !0 && (d |= 8)) : d = 0, O = ln(3, null, null, d), l.current = O, O.stateNode = l, O.memoizedState = { element: w, isDehydrated: x, cache: null, transitions: null, pendingSuspenseBoundaries: null }, lp(O), l } function _R(l, d, x) { var w = 3 < arguments.length && arguments[3] !== void 0 ? arguments[3] : null; return { $$typeof: A, key: w == null ? null : "" + w, children: l, containerInfo: d, implementation: x } } function AS(l) { if (!l) return yo; l = l._reactInternals; e: { if (Ct(l) !== l || l.tag !== 1) throw Error(a(170)); var d = l; do { switch (d.tag) { case 3: d = d.stateNode.context; break e; case 1: if (Cs(d.type)) { d = d.stateNode.__reactInternalMemoizedMergedChildContext; break e } }d = d.return } while (d !== null); throw Error(a(171)) } if (l.tag === 1) { var x = l.type; if (Cs(x)) return r1(l, x, d) } return d } function PS(l, d, x, w, P, O, F, ae, oe) { return l = Yp(x, w, !0, l, P, O, F, ae, oe), l.context = AS(null), x = l.current, w = ds(), P = So(x), O = ki(w, P), O.callback = d ?? null, wo(x, O, P), l.current.lanes = P, yi(l, P, w), Ps(l, w), l } function e0(l, d, x, w) { var P = d.current, O = ds(), F = So(P); return x = AS(x), d.context === null ? d.context = x : d.pendingContext = x, d = ki(O, F), d.payload = { element: l }, w = w === void 0 ? null : w, w !== null && (d.callback = w), l = wo(P, d, F), l !== null && (In(l, P, F, O), Dg(l, P, F)), F } function t0(l) { if (l = l.current, !l.child) return null; switch (l.child.tag) { case 5: return l.child.stateNode; default: return l.child.stateNode } } function TS(l, d) { if (l = l.memoizedState, l !== null && l.dehydrated !== null) { var x = l.retryLane; l.retryLane = x !== 0 && x < d ? x : d } } function Qp(l, d) { TS(l, d), (l = l.alternate) && TS(l, d) } function $R() { return null } var DS = typeof reportError == "function" ? reportError : function (l) { console.error(l) }; function Xp(l) { this._internalRoot = l } r0.prototype.render = Xp.prototype.render = function (l) { var d = this._internalRoot; if (d === null) throw Error(a(409)); e0(l, d, null, null) }, r0.prototype.unmount = Xp.prototype.unmount = function () { var l = this._internalRoot; if (l !== null) { this._internalRoot = null; var d = l.containerInfo; ml(function () { e0(null, l, null, null) }), d[vi] = null } }; function r0(l) { this._internalRoot = l } r0.prototype.unstable_scheduleHydration = function (l) { if (l) { var d = hk(); l = { blockedOn: null, target: l, priority: d }; for (var x = 0; x < go.length && d !== 0 && d < go[x].priority; x++); go.splice(x, 0, l), x === 0 && pk(l) } }; function Zp(l) { return !(!l || l.nodeType !== 1 && l.nodeType !== 9 && l.nodeType !== 11) } function a0(l) { return !(!l || l.nodeType !== 1 && l.nodeType !== 9 && l.nodeType !== 11 && (l.nodeType !== 8 || l.nodeValue !== " react-mount-point-unstable ")) } function OS() { } function UR(l, d, x, w, P) { if (P) { if (typeof w == "function") { var O = w; w = function () { var Se = t0(F); O.call(Se) } } var F = PS(d, w, l, 0, null, !1, !1, "", OS); return l._reactRootContainer = F, l[vi] = F.current, Yd(l.nodeType === 8 ? l.parentNode : l), ml(), F } for (; P = l.lastChild;)l.removeChild(P); if (typeof w == "function") { var ae = w; w = function () { var Se = t0(oe); ae.call(Se) } } var oe = Yp(l, 0, !1, null, null, !1, !1, "", OS); return l._reactRootContainer = oe, l[vi] = oe.current, Yd(l.nodeType === 8 ? l.parentNode : l), ml(function () { e0(d, oe, x, w) }), oe } function s0(l, d, x, w, P) { var O = x._reactRootContainer; if (O) { var F = O; if (typeof P == "function") { var ae = P; P = function () { var oe = t0(F); ae.call(oe) } } e0(d, F, l, P) } else F = UR(x, d, l, P, w); return t0(F) } mk = function (l) { switch (l.tag) { case 3: var d = l.stateNode; if (d.current.memoizedState.isDehydrated) { var x = tn(d.pendingLanes); x !== 0 && (Rd(d, x | 1), Ps(d, Ie()), (Qt & 6) === 0 && (kc = Ie() + 500, vo())) } break; case 13: ml(function () { var w = Ni(l, 1); if (w !== null) { var P = ds(); In(w, l, 1, P) } }), Qp(l, 1) } }, Nx = function (l) { if (l.tag === 13) { var d = Ni(l, 134217728); if (d !== null) { var x = ds(); In(d, l, 134217728, x) } Qp(l, 134217728) } }, gk = function (l) { if (l.tag === 13) { var d = So(l), x = Ni(l, d); if (x !== null) { var w = ds(); In(x, l, d, w) } Qp(l, d) } }, hk = function () { return gr }, fk = function (l, d) { var x = gr; try { return gr = l, d() } finally { gr = x } }, vr = function (l, d, x) { switch (d) { case "input": if (Et(l, x), d = x.name, x.type === "radio" && d != null) { for (x = l; x.parentNode;)x = x.parentNode; for (x = x.querySelectorAll("input[name=" + JSON.stringify("" + d) + '][type="radio"]'), d = 0; d < x.length; d++) { var w = x[d]; if (w !== l && w.form === l.form) { var P = wg(w); if (!P) throw Error(a(90)); pe(w), Et(w, P) } } } break; case "textarea": Q(l, x); break; case "select": d = x.value, d != null && ce(l, !!x.multiple, d, !1) } }, wr = qp, kr = ml; var FR = { usingClientEntryPoint: !1, Events: [Zd, uc, wg, sr, _r, qp] }, mu = { findFiberByHostInstance: sl, bundleType: 0, version: "18.3.1", rendererPackageName: "react-dom" }, zR = { bundleType: mu.bundleType, version: mu.version, rendererPackageName: mu.rendererPackageName, rendererConfig: mu.rendererConfig, overrideHookState: null, overrideHookStateDeletePath: null, overrideHookStateRenamePath: null, overrideProps: null, overridePropsDeletePath: null, overridePropsRenamePath: null, setErrorHandler: null, setSuspenseHandler: null, scheduleUpdate: null, currentDispatcherRef: C.ReactCurrentDispatcher, findHostInstanceByFiber: function (l) { return l = zt(l), l === null ? null : l.stateNode }, findFiberByHostInstance: mu.findFiberByHostInstance || $R, findHostInstancesForRefresh: null, scheduleRefresh: null, scheduleRoot: null, setRefreshHandler: null, getCurrentFiber: null, reconcilerVersion: "18.3.1-next-f1338f8080-20240426" }; if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u") { var n0 = __REACT_DEVTOOLS_GLOBAL_HOOK__; if (!n0.isDisabled && n0.supportsFiber) try { Ke = n0.inject(zR), Tt = n0 } catch { } } return Ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = FR, Ts.createPortal = function (l, d) { var x = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : null; if (!Zp(d)) throw Error(a(200)); return _R(l, d, null, x) }, Ts.createRoot = function (l, d) { if (!Zp(l)) throw Error(a(299)); var x = !1, w = "", P = DS; return d != null && (d.unstable_strictMode === !0 && (x = !0), d.identifierPrefix !== void 0 && (w = d.identifierPrefix), d.onRecoverableError !== void 0 && (P = d.onRecoverableError)), d = Yp(l, 1, !1, null, null, x, !1, w, P), l[vi] = d.current, Yd(l.nodeType === 8 ? l.parentNode : l), new Xp(d) }, Ts.findDOMNode = function (l) { if (l == null) return null; if (l.nodeType === 1) return l; var d = l._reactInternals; if (d === void 0) throw typeof l.render == "function" ? Error(a(188)) : (l = Object.keys(l).join(","), Error(a(268, l))); return l = zt(d), l = l === null ? null : l.stateNode, l }, Ts.flushSync = function (l) { return ml(l) }, Ts.hydrate = function (l, d, x) { if (!a0(d)) throw Error(a(200)); return s0(null, l, d, !0, x) }, Ts.hydrateRoot = function (l, d, x) { if (!Zp(l)) throw Error(a(405)); var w = x != null && x.hydratedSources || null, P = !1, O = "", F = DS; if (x != null && (x.unstable_strictMode === !0 && (P = !0), x.identifierPrefix !== void 0 && (O = x.identifierPrefix), x.onRecoverableError !== void 0 && (F = x.onRecoverableError)), d = PS(d, null, l, 1, x ?? null, P, !1, O, F), l[vi] = d.current, Yd(l), w) for (l = 0; l < w.length; l++)x = w[l], P = x._getVersion, P = P(x._source), d.mutableSourceEagerHydrationData == null ? d.mutableSourceEagerHydrationData = [x, P] : d.mutableSourceEagerHydrationData.push(x, P); return new r0(d) }, Ts.render = function (l, d, x) { if (!a0(d)) throw Error(a(200)); return s0(null, l, d, !1, x) }, Ts.unmountComponentAtNode = function (l) { if (!a0(l)) throw Error(a(40)); return l._reactRootContainer ? (ml(function () { s0(null, null, l, !1, function () { l._reactRootContainer = null, l[vi] = null }) }), !0) : !1 }, Ts.unstable_batchedUpdates = qp, Ts.unstable_renderSubtreeIntoContainer = function (l, d, x, w) { if (!a0(x)) throw Error(a(200)); if (l == null || l._reactInternals === void 0) throw Error(a(38)); return s0(l, d, x, !1, w) }, Ts.version = "18.3.1-next-f1338f8080-20240426", Ts
} var FS; function lT() { if (FS) return ty.exports; FS = 1; function e() { if (!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ > "u" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE != "function")) try { __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e) } catch (r) { console.error(r) } } return e(), ty.exports = YR(), ty.exports } var zS; function QR() { if (zS) return i0; zS = 1; var e = lT(); return i0.createRoot = e.createRoot, i0.hydrateRoot = e.hydrateRoot, i0 } var XR = QR(); const ZR = mi(XR); var Ro = lT(); function Gu() { return Gu = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) Object.prototype.hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Gu.apply(this, arguments) } var Mo; (function (e) { e.Pop = "POP", e.Push = "PUSH", e.Replace = "REPLACE" })(Mo || (Mo = {})); const BS = "popstate"; function JR(e) { e === void 0 && (e = {}); function r(s, n) { let { pathname: i, search: o, hash: c } = s.location; return ub("", { pathname: i, search: o, hash: c }, n.state && n.state.usr || null, n.state && n.state.key || "default") } function a(s, n) { return typeof n == "string" ? n : Q0(n) } return tM(r, a, null, e) } function ha(e, r) { if (e === !1 || e === null || typeof e > "u") throw new Error(r) } function Fw(e, r) { if (!e) { typeof console < "u" && console.warn(r); try { throw new Error(r) } catch { } } } function eM() { return Math.random().toString(36).substr(2, 8) } function qS(e, r) { return { usr: e.state, key: e.key, idx: r } } function ub(e, r, a, s) { return a === void 0 && (a = null), Gu({ pathname: typeof e == "string" ? e : e.pathname, search: "", hash: "" }, typeof r == "string" ? cd(r) : r, { state: a, key: r && r.key || s || eM() }) } function Q0(e) { let { pathname: r = "/", search: a = "", hash: s = "" } = e; return a && a !== "?" && (r += a.charAt(0) === "?" ? a : "?" + a), s && s !== "#" && (r += s.charAt(0) === "#" ? s : "#" + s), r } function cd(e) { let r = {}; if (e) { let a = e.indexOf("#"); a >= 0 && (r.hash = e.substr(a), e = e.substr(0, a)); let s = e.indexOf("?"); s >= 0 && (r.search = e.substr(s), e = e.substr(0, s)), e && (r.pathname = e) } return r } function tM(e, r, a, s) { s === void 0 && (s = {}); let { window: n = document.defaultView, v5Compat: i = !1 } = s, o = n.history, c = Mo.Pop, u = null, m = g(); m == null && (m = 0, o.replaceState(Gu({}, o.state, { idx: m }), "")); function g() { return (o.state || { idx: null }).idx } function f() { c = Mo.Pop; let v = g(), S = v == null ? null : v - m; m = v, u && u({ action: c, location: j.location, delta: S }) } function y(v, S) { c = Mo.Push; let k = ub(j.location, v, S); m = g() + 1; let E = qS(k, m), C = j.createHref(k); try { o.pushState(E, "", C) } catch (N) { if (N instanceof DOMException && N.name === "DataCloneError") throw N; n.location.assign(C) } i && u && u({ action: c, location: j.location, delta: 1 }) } function p(v, S) { c = Mo.Replace; let k = ub(j.location, v, S); m = g(); let E = qS(k, m), C = j.createHref(k); o.replaceState(E, "", C), i && u && u({ action: c, location: j.location, delta: 0 }) } function b(v) { let S = n.location.origin !== "null" ? n.location.origin : n.location.href, k = typeof v == "string" ? v : Q0(v); return k = k.replace(/ $/, "%20"), ha(S, "No window.location.(origin|href) available to create URL for href: " + k), new URL(k, S) } let j = { get action() { return c }, get location() { return e(n, o) }, listen(v) { if (u) throw new Error("A history only accepts one active listener"); return n.addEventListener(BS, f), u = v, () => { n.removeEventListener(BS, f), u = null } }, createHref(v) { return r(n, v) }, createURL: b, encodeLocation(v) { let S = b(v); return { pathname: S.pathname, search: S.search, hash: S.hash } }, push: y, replace: p, go(v) { return o.go(v) } }; return j } var HS; (function (e) { e.data = "data", e.deferred = "deferred", e.redirect = "redirect", e.error = "error" })(HS || (HS = {})); function rM(e, r, a) { return a === void 0 && (a = "/"), aM(e, r, a) } function aM(e, r, a, s) { let n = typeof r == "string" ? cd(r) : r, i = zw(n.pathname || "/", a); if (i == null) return null; let o = cT(e); sM(o); let c = null; for (let u = 0; c == null && u < o.length; ++u) { let m = xM(i); c = gM(o[u], m) } return c } function cT(e, r, a, s) { r === void 0 && (r = []), a === void 0 && (a = []), s === void 0 && (s = ""); let n = (i, o, c) => { let u = { relativePath: c === void 0 ? i.path || "" : c, caseSensitive: i.caseSensitive === !0, childrenIndex: o, route: i }; u.relativePath.startsWith("/") && (ha(u.relativePath.startsWith(s), 'Absolute route path "' + u.relativePath + '" nested under path ' + ('"' + s + '" is not valid. An absolute child route path ') + "must start with the combined path of all its parent routes."), u.relativePath = u.relativePath.slice(s.length)); let m = Fo([s, u.relativePath]), g = a.concat(u); i.children && i.children.length > 0 && (ha(i.index !== !0, "Index routes must not have child routes. Please remove " + ('all child routes from route path "' + m + '".')), cT(i.children, r, g, m)), !(i.path == null && !i.index) && r.push({ path: m, score: uM(m, i.index), routesMeta: g }) }; return e.forEach((i, o) => { var c; if (i.path === "" || !((c = i.path) != null && c.includes("?"))) n(i, o); else for (let u of dT(i.path)) n(i, o, u) }), r } function dT(e) { let r = e.split("/"); if (r.length === 0) return []; let [a, ...s] = r, n = a.endsWith("?"), i = a.replace(/\?$/, ""); if (s.length === 0) return n ? [i, ""] : [i]; let o = dT(s.join("/")), c = []; return c.push(...o.map(u => u === "" ? i : [i, u].join("/"))), n && c.push(...o), c.map(u => e.startsWith("/") && u === "" ? "/" : u) } function sM(e) { e.sort((r, a) => r.score !== a.score ? a.score - r.score : mM(r.routesMeta.map(s => s.childrenIndex), a.routesMeta.map(s => s.childrenIndex))) } const nM = /^:[\w-]+$/, iM = 3, oM = 2, lM = 1, cM = 10, dM = -2, WS = e => e === "*"; function uM(e, r) { let a = e.split("/"), s = a.length; return a.some(WS) && (s += dM), r && (s += oM), a.filter(n => !WS(n)).reduce((n, i) => n + (nM.test(i) ? iM : i === "" ? lM : cM), s) } function mM(e, r) { return e.length === r.length && e.slice(0, -1).every((s, n) => s === r[n]) ? e[e.length - 1] - r[r.length - 1] : 0 } function gM(e, r, a) { let { routesMeta: s } = e, n = {}, i = "/", o = []; for (let c = 0; c < s.length; ++c) { let u = s[c], m = c === s.length - 1, g = i === "/" ? r : r.slice(i.length) || "/", f = hM({ path: u.relativePath, caseSensitive: u.caseSensitive, end: m }, g), y = u.route; if (!f) return null; Object.assign(n, f.params), o.push({ params: n, pathname: Fo([i, f.pathname]), pathnameBase: wM(Fo([i, f.pathnameBase])), route: y }), f.pathnameBase !== "/" && (i = Fo([i, f.pathnameBase])) } return o } function hM(e, r) { typeof e == "string" && (e = { path: e, caseSensitive: !1, end: !0 }); let [a, s] = fM(e.path, e.caseSensitive, e.end), n = r.match(a); if (!n) return null; let i = n[0], o = i.replace(/(.)\/+$/, "$1"), c = n.slice(1); return { params: s.reduce((m, g, f) => { let { paramName: y, isOptional: p } = g; if (y === "*") { let j = c[f] || ""; o = i.slice(0, i.length - j.length).replace(/(.)\/+$/, "$1") } const b = c[f]; return p && !b ? m[y] = void 0 : m[y] = (b || "").replace(/%2F/g, "/"), m }, {}), pathname: i, pathnameBase: o, pattern: e } } function fM(e, r, a) { r === void 0 && (r = !1), a === void 0 && (a = !0), Fw(e === "*" || !e.endsWith("*") || e.endsWith("/*"), 'Route path "' + e + '" will be treated as if it were ' + ('"' + e.replace(/\*$/, "/*") + '" because the `*` character must ') + "always follow a `/` in the pattern. To get rid of this warning, " + ('please change the route path to "' + e.replace(/\*$/, "/*") + '".')); let s = [], n = "^" + e.replace(/\/*\*?$/, "").replace(/^\/*/, "/").replace(/[\\.*+^${}|()[\]]/g, "\\$&").replace(/\/:([\w-]+)(\?)?/g, (o, c, u) => (s.push({ paramName: c, isOptional: u != null }), u ? "/?([^\\/]+)?" : "/([^\\/]+)")); return e.endsWith("*") ? (s.push({ paramName: "*" }), n += e === "*" || e === "/*" ? "(.*)$" : "(?:\\/(.+)|\\/*)$") : a ? n += "\\/*$" : e !== "" && e !== "/" && (n += "(?:(?=\\/|$))"), [new RegExp(n, r ? void 0 : "i"), s] } function xM(e) { try { return e.split("/").map(r => decodeURIComponent(r).replace(/\//g, "%2F")).join("/") } catch (r) { return Fw(!1, 'The URL path "' + e + '" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent ' + ("encoding (" + r + ").")), e } } function zw(e, r) { if (r === "/") return e; if (!e.toLowerCase().startsWith(r.toLowerCase())) return null; let a = r.endsWith("/") ? r.length - 1 : r.length, s = e.charAt(a); return s && s !== "/" ? null : e.slice(a) || "/" } const pM = /^(?:[a-z][a-z0-9+.-]*:|\/\/)/i, yM = e => pM.test(e); function vM(e, r) { r === void 0 && (r = "/"); let { pathname: a, search: s = "", hash: n = "" } = typeof e == "string" ? cd(e) : e, i; if (a) if (yM(a)) i = a; else { if (a.includes("//")) { let o = a; a = a.replace(/\/\/+/g, "/"), Fw(!1, "Pathnames cannot have embedded double slashes - normalizing " + (o + " -> " + a)) } a.startsWith("/") ? i = VS(a.substring(1), "/") : i = VS(a, r) } else i = r; return { pathname: i, search: jM(s), hash: NM(n) } } function VS(e, r) { let a = r.replace(/\/+$/, "").split("/"); return e.split("/").forEach(n => { n === ".." ? a.length > 1 && a.pop() : n !== "." && a.push(n) }), a.length > 1 ? a.join("/") : "/" } function sy(e, r, a, s) { return "Cannot include a '" + e + "' character in a manually specified " + ("`to." + r + "` field [" + JSON.stringify(s) + "].  Please separate it out to the ") + ("`to." + a + "` field. Alternatively you may provide the full path as ") + 'a string in <Link to="..."> and the router will parse it for you.' } function bM(e) { return e.filter((r, a) => a === 0 || r.route.path && r.route.path.length > 0) } function Bw(e, r) { let a = bM(e); return r ? a.map((s, n) => n === a.length - 1 ? s.pathname : s.pathnameBase) : a.map(s => s.pathnameBase) } function qw(e, r, a, s) { s === void 0 && (s = !1); let n; typeof e == "string" ? n = cd(e) : (n = Gu({}, e), ha(!n.pathname || !n.pathname.includes("?"), sy("?", "pathname", "search", n)), ha(!n.pathname || !n.pathname.includes("#"), sy("#", "pathname", "hash", n)), ha(!n.search || !n.search.includes("#"), sy("#", "search", "hash", n))); let i = e === "" || n.pathname === "", o = i ? "/" : n.pathname, c; if (o == null) c = a; else { let f = r.length - 1; if (!s && o.startsWith("..")) { let y = o.split("/"); for (; y[0] === "..";)y.shift(), f -= 1; n.pathname = y.join("/") } c = f >= 0 ? r[f] : "/" } let u = vM(n, c), m = o && o !== "/" && o.endsWith("/"), g = (i || o === ".") && a.endsWith("/"); return !u.pathname.endsWith("/") && (m || g) && (u.pathname += "/"), u } const Fo = e => e.join("/").replace(/\/\/+/g, "/"), wM = e => e.replace(/\/+$/, "").replace(/^\/*/, "/"), jM = e => !e || e === "?" ? "" : e.startsWith("?") ? e : "?" + e, NM = e => !e || e === "#" ? "" : e.startsWith("#") ? e : "#" + e; function kM(e) { return e != null && typeof e.status == "number" && typeof e.statusText == "string" && typeof e.internal == "boolean" && "data" in e } const uT = ["post", "put", "patch", "delete"]; new Set(uT); const SM = ["get", ...uT]; new Set(SM); function Ku() { return Ku = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) Object.prototype.hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Ku.apply(this, arguments) } const Hw = h.createContext(null), CM = h.createContext(null), Ko = h.createContext(null), uf = h.createContext(null), Ji = h.createContext({ outlet: null, matches: [], isDataRoute: !1 }), mT = h.createContext(null); function EM(e, r) { let { relative: a } = r === void 0 ? {} : r; dd() || ha(!1); let { basename: s, navigator: n } = h.useContext(Ko), { hash: i, pathname: o, search: c } = hT(e, { relative: a }), u = o; return s !== "/" && (u = o === "/" ? s : Fo([s, o])), n.createHref({ pathname: u, search: c, hash: i }) } function dd() { return h.useContext(uf) != null } function Hn() { return dd() || ha(!1), h.useContext(uf).location } function gT(e) { h.useContext(Ko).static || h.useLayoutEffect(e) } function xt() { let { isDataRoute: e } = h.useContext(Ji); return e ? FM() : AM() } function AM() { dd() || ha(!1); let e = h.useContext(Hw), { basename: r, future: a, navigator: s } = h.useContext(Ko), { matches: n } = h.useContext(Ji), { pathname: i } = Hn(), o = JSON.stringify(Bw(n, a.v7_relativeSplatPath)), c = h.useRef(!1); return gT(() => { c.current = !0 }), h.useCallback(function (m, g) { if (g === void 0 && (g = {}), !c.current) return; if (typeof m == "number") { s.go(m); return } let f = qw(m, JSON.parse(o), i, g.relative === "path"); e == null && r !== "/" && (f.pathname = f.pathname === "/" ? r : Fo([r, f.pathname])), (g.replace ? s.replace : s.push)(f, g.state, g) }, [r, s, o, i, e]) } function gi() { let { matches: e } = h.useContext(Ji), r = e[e.length - 1]; return r ? r.params : {} } function hT(e, r) { let { relative: a } = r === void 0 ? {} : r, { future: s } = h.useContext(Ko), { matches: n } = h.useContext(Ji), { pathname: i } = Hn(), o = JSON.stringify(Bw(n, s.v7_relativeSplatPath)); return h.useMemo(() => qw(e, JSON.parse(o), i, a === "path"), [e, o, i, a]) } function PM(e, r) { return TM(e, r) } function TM(e, r, a, s) { dd() || ha(!1); let { navigator: n } = h.useContext(Ko), { matches: i } = h.useContext(Ji), o = i[i.length - 1], c = o ? o.params : {}; o && o.pathname; let u = o ? o.pathnameBase : "/"; o && o.route; let m = Hn(), g; if (r) { var f; let v = typeof r == "string" ? cd(r) : r; u === "/" || (f = v.pathname) != null && f.startsWith(u) || ha(!1), g = v } else g = m; let y = g.pathname || "/", p = y; if (u !== "/") { let v = u.replace(/^\//, "").split("/"); p = "/" + y.replace(/^\//, "").split("/").slice(v.length).join("/") } let b = rM(e, { pathname: p }), j = RM(b && b.map(v => Object.assign({}, v, { params: Object.assign({}, c, v.params), pathname: Fo([u, n.encodeLocation ? n.encodeLocation(v.pathname).pathname : v.pathname]), pathnameBase: v.pathnameBase === "/" ? u : Fo([u, n.encodeLocation ? n.encodeLocation(v.pathnameBase).pathname : v.pathnameBase]) })), i, a, s); return r && j ? h.createElement(uf.Provider, { value: { location: Ku({ pathname: "/", search: "", hash: "", state: null, key: "default" }, g), navigationType: Mo.Pop } }, j) : j } function DM() { let e = UM(), r = kM(e) ? e.status + " " + e.statusText : e instanceof Error ? e.message : JSON.stringify(e), a = e instanceof Error ? e.stack : null, n = { padding: "0.5rem", backgroundColor: "rgba(200,200,200, 0.5)" }; return h.createElement(h.Fragment, null, h.createElement("h2", null, "Unexpected Application Error!"), h.createElement("h3", { style: { fontStyle: "italic" } }, r), a ? h.createElement("pre", { style: n }, a) : null, null) } const OM = h.createElement(DM, null); class IM extends h.Component { constructor(r) { super(r), this.state = { location: r.location, revalidation: r.revalidation, error: r.error } } static getDerivedStateFromError(r) { return { error: r } } static getDerivedStateFromProps(r, a) { return a.location !== r.location || a.revalidation !== "idle" && r.revalidation === "idle" ? { error: r.error, location: r.location, revalidation: r.revalidation } : { error: r.error !== void 0 ? r.error : a.error, location: a.location, revalidation: r.revalidation || a.revalidation } } componentDidCatch(r, a) { console.error("React Router caught the following error during render", r, a) } render() { return this.state.error !== void 0 ? h.createElement(Ji.Provider, { value: this.props.routeContext }, h.createElement(mT.Provider, { value: this.state.error, children: this.props.component })) : this.props.children } } function LM(e) { let { routeContext: r, match: a, children: s } = e, n = h.useContext(Hw); return n && n.static && n.staticContext && (a.route.errorElement || a.route.ErrorBoundary) && (n.staticContext._deepestRenderedBoundaryId = a.route.id), h.createElement(Ji.Provider, { value: r }, s) } function RM(e, r, a, s) { var n; if (r === void 0 && (r = []), a === void 0 && (a = null), s === void 0 && (s = null), e == null) { var i; if (!a) return null; if (a.errors) e = a.matches; else if ((i = s) != null && i.v7_partialHydration && r.length === 0 && !a.initialized && a.matches.length > 0) e = a.matches; else return null } let o = e, c = (n = a) == null ? void 0 : n.errors; if (c != null) { let g = o.findIndex(f => f.route.id && c?.[f.route.id] !== void 0); g >= 0 || ha(!1), o = o.slice(0, Math.min(o.length, g + 1)) } let u = !1, m = -1; if (a && s && s.v7_partialHydration) for (let g = 0; g < o.length; g++) { let f = o[g]; if ((f.route.HydrateFallback || f.route.hydrateFallbackElement) && (m = g), f.route.id) { let { loaderData: y, errors: p } = a, b = f.route.loader && y[f.route.id] === void 0 && (!p || p[f.route.id] === void 0); if (f.route.lazy || b) { u = !0, m >= 0 ? o = o.slice(0, m + 1) : o = [o[0]]; break } } } return o.reduceRight((g, f, y) => { let p, b = !1, j = null, v = null; a && (p = c && f.route.id ? c[f.route.id] : void 0, j = f.route.errorElement || OM, u && (m < 0 && y === 0 ? (zM("route-fallback"), b = !0, v = null) : m === y && (b = !0, v = f.route.hydrateFallbackElement || null))); let S = r.concat(o.slice(0, y + 1)), k = () => { let E; return p ? E = j : b ? E = v : f.route.Component ? E = h.createElement(f.route.Component, null) : f.route.element ? E = f.route.element : E = g, h.createElement(LM, { match: f, routeContext: { outlet: g, matches: S, isDataRoute: a != null }, children: E }) }; return a && (f.route.ErrorBoundary || f.route.errorElement || y === 0) ? h.createElement(IM, { location: a.location, revalidation: a.revalidation, component: j, error: p, children: k(), routeContext: { outlet: null, matches: S, isDataRoute: !0 } }) : k() }, null) } var fT = (function (e) { return e.UseBlocker = "useBlocker", e.UseRevalidator = "useRevalidator", e.UseNavigateStable = "useNavigate", e })(fT || {}), xT = (function (e) { return e.UseBlocker = "useBlocker", e.UseLoaderData = "useLoaderData", e.UseActionData = "useActionData", e.UseRouteError = "useRouteError", e.UseNavigation = "useNavigation", e.UseRouteLoaderData = "useRouteLoaderData", e.UseMatches = "useMatches", e.UseRevalidator = "useRevalidator", e.UseNavigateStable = "useNavigate", e.UseRouteId = "useRouteId", e })(xT || {}); function MM(e) { let r = h.useContext(Hw); return r || ha(!1), r } function _M(e) { let r = h.useContext(CM); return r || ha(!1), r } function $M(e) { let r = h.useContext(Ji); return r || ha(!1), r } function pT(e) { let r = $M(), a = r.matches[r.matches.length - 1]; return a.route.id || ha(!1), a.route.id } function UM() { var e; let r = h.useContext(mT), a = _M(), s = pT(); return r !== void 0 ? r : (e = a.errors) == null ? void 0 : e[s] } function FM() { let { router: e } = MM(fT.UseNavigateStable), r = pT(xT.UseNavigateStable), a = h.useRef(!1); return gT(() => { a.current = !0 }), h.useCallback(function (n, i) { i === void 0 && (i = {}), a.current && (typeof n == "number" ? e.navigate(n) : e.navigate(n, Ku({ fromRouteId: r }, i))) }, [e, r]) } const GS = {}; function zM(e, r, a) { GS[e] || (GS[e] = !0) } function BM(e, r) { e?.v7_startTransition, e?.v7_relativeSplatPath } function R0(e) { let { to: r, replace: a, state: s, relative: n } = e; dd() || ha(!1); let { future: i, static: o } = h.useContext(Ko), { matches: c } = h.useContext(Ji), { pathname: u } = Hn(), m = xt(), g = qw(r, Bw(c, i.v7_relativeSplatPath), u, n === "path"), f = JSON.stringify(g); return h.useEffect(() => m(JSON.parse(f), { replace: a, state: s, relative: n }), [m, f, n, a, s]), null } function at(e) { ha(!1) } function qM(e) { let { basename: r = "/", children: a = null, location: s, navigationType: n = Mo.Pop, navigator: i, static: o = !1, future: c } = e; dd() && ha(!1); let u = r.replace(/^\/*/, "/"), m = h.useMemo(() => ({ basename: u, navigator: i, static: o, future: Ku({ v7_relativeSplatPath: !1 }, c) }), [u, c, i, o]); typeof s == "string" && (s = cd(s)); let { pathname: g = "/", search: f = "", hash: y = "", state: p = null, key: b = "default" } = s, j = h.useMemo(() => { let v = zw(g, u); return v == null ? null : { location: { pathname: v, search: f, hash: y, state: p, key: b }, navigationType: n } }, [u, g, f, y, p, b, n]); return j == null ? null : h.createElement(Ko.Provider, { value: m }, h.createElement(uf.Provider, { children: a, value: j })) } function HM(e) { let { children: r, location: a } = e; return PM(mb(r), a) } new Promise(() => { }); function mb(e, r) { r === void 0 && (r = []); let a = []; return h.Children.forEach(e, (s, n) => { if (!h.isValidElement(s)) return; let i = [...r, n]; if (s.type === h.Fragment) { a.push.apply(a, mb(s.props.children, i)); return } s.type !== at && ha(!1), !s.props.index || !s.props.children || ha(!1); let o = { id: s.props.id || i.join("-"), caseSensitive: s.props.caseSensitive, element: s.props.element, Component: s.props.Component, index: s.props.index, path: s.props.path, loader: s.props.loader, action: s.props.action, errorElement: s.props.errorElement, ErrorBoundary: s.props.ErrorBoundary, hasErrorBoundary: s.props.ErrorBoundary != null || s.props.errorElement != null, shouldRevalidate: s.props.shouldRevalidate, handle: s.props.handle, lazy: s.props.lazy }; s.props.children && (o.children = mb(s.props.children, i)), a.push(o) }), a } function gb() { return gb = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) Object.prototype.hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, gb.apply(this, arguments) } function WM(e, r) { if (e == null) return {}; var a = {}, s = Object.keys(e), n, i; for (i = 0; i < s.length; i++)n = s[i], !(r.indexOf(n) >= 0) && (a[n] = e[n]); return a } function VM(e) { return !!(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) } function GM(e, r) { return e.button === 0 && (!r || r === "_self") && !VM(e) } function hb(e) { return e === void 0 && (e = ""), new URLSearchParams(typeof e == "string" || Array.isArray(e) || e instanceof URLSearchParams ? e : Object.keys(e).reduce((r, a) => { let s = e[a]; return r.concat(Array.isArray(s) ? s.map(n => [a, n]) : [[a, s]]) }, [])) } function KM(e, r) { let a = hb(e); return r && r.forEach((s, n) => { a.has(n) || r.getAll(n).forEach(i => { a.append(n, i) }) }), a } const YM = ["onClick", "relative", "reloadDocument", "replace", "state", "target", "to", "preventScrollReset", "viewTransition"], QM = "6"; try { window.__reactRouterVersion = QM } catch { } const XM = "startTransition", KS = oT[XM]; function ZM(e) { let { basename: r, children: a, future: s, window: n } = e, i = h.useRef(); i.current == null && (i.current = JR({ window: n, v5Compat: !0 })); let o = i.current, [c, u] = h.useState({ action: o.action, location: o.location }), { v7_startTransition: m } = s || {}, g = h.useCallback(f => { m && KS ? KS(() => u(f)) : u(f) }, [u, m]); return h.useLayoutEffect(() => o.listen(g), [o, g]), h.useEffect(() => BM(s), [s]), h.createElement(qM, { basename: r, children: a, location: c.location, navigationType: c.action, navigator: o, future: s }) } const JM = typeof window < "u" && typeof window.document < "u" && typeof window.document.createElement < "u", e_ = /^(?:[a-z][a-z0-9+.-]*:|\/\/)/i, si = h.forwardRef(function (r, a) { let { onClick: s, relative: n, reloadDocument: i, replace: o, state: c, target: u, to: m, preventScrollReset: g, viewTransition: f } = r, y = WM(r, YM), { basename: p } = h.useContext(Ko), b, j = !1; if (typeof m == "string" && e_.test(m) && (b = m, JM)) try { let E = new URL(window.location.href), C = m.startsWith("//") ? new URL(E.protocol + m) : new URL(m), N = zw(C.pathname, p); C.origin === E.origin && N != null ? m = N + C.search + C.hash : j = !0 } catch { } let v = EM(m, { relative: n }), S = t_(m, { replace: o, state: c, target: u, preventScrollReset: g, relative: n, viewTransition: f }); function k(E) { s && s(E), E.defaultPrevented || S(E) } return h.createElement("a", gb({}, y, { href: b || v, onClick: j || i ? s : k, ref: a, target: u })) }); var YS; (function (e) { e.UseScrollRestoration = "useScrollRestoration", e.UseSubmit = "useSubmit", e.UseSubmitFetcher = "useSubmitFetcher", e.UseFetcher = "useFetcher", e.useViewTransitionState = "useViewTransitionState" })(YS || (YS = {})); var QS; (function (e) { e.UseFetcher = "useFetcher", e.UseFetchers = "useFetchers", e.UseScrollRestoration = "useScrollRestoration" })(QS || (QS = {})); function t_(e, r) { let { target: a, replace: s, state: n, preventScrollReset: i, relative: o, viewTransition: c } = r === void 0 ? {} : r, u = xt(), m = Hn(), g = hT(e, { relative: o }); return h.useCallback(f => { if (GM(f, a)) { f.preventDefault(); let y = s !== void 0 ? s : Q0(m) === Q0(g); u(e, { replace: y, state: n, preventScrollReset: i, relative: o, viewTransition: c }) } }, [m, u, g, s, n, a, e, i, o, c]) } function vm(e) { let r = h.useRef(hb(e)), a = h.useRef(!1), s = Hn(), n = h.useMemo(() => KM(s.search, a.current ? null : r.current), [s.search]), i = xt(), o = h.useCallback((c, u) => { const m = hb(typeof c == "function" ? c(n) : c); a.current = !0, i("?" + m, u) }, [i, n]); return [n, o] } function yT(e, r) { return function () { return e.apply(r, arguments) } } const { toString: r_ } = Object.prototype, { getPrototypeOf: Ww } = Object, { iterator: mf, toStringTag: vT } = Symbol, gf = (e => r => { const a = r_.call(r); return e[a] || (e[a] = a.slice(8, -1).toLowerCase()) })(Object.create(null)), Wn = e => (e = e.toLowerCase(), r => gf(r) === e), hf = e => r => typeof r === e, { isArray: ud } = Array, Yc = hf("undefined"); function bm(e) { return e !== null && !Yc(e) && e.constructor !== null && !Yc(e.constructor) && Ls(e.constructor.isBuffer) && e.constructor.isBuffer(e) } const bT = Wn("ArrayBuffer"); function a_(e) { let r; return typeof ArrayBuffer < "u" && ArrayBuffer.isView ? r = ArrayBuffer.isView(e) : r = e && e.buffer && bT(e.buffer), r } const s_ = hf("string"), Ls = hf("function"), wT = hf("number"), wm = e => e !== null && typeof e == "object", n_ = e => e === !0 || e === !1, M0 = e => { if (gf(e) !== "object") return !1; const r = Ww(e); return (r === null || r === Object.prototype || Object.getPrototypeOf(r) === null) && !(vT in e) && !(mf in e) }, i_ = e => { if (!wm(e) || bm(e)) return !1; try { return Object.keys(e).length === 0 && Object.getPrototypeOf(e) === Object.prototype } catch { return !1 } }, o_ = Wn("Date"), l_ = Wn("File"), c_ = Wn("Blob"), d_ = Wn("FileList"), u_ = e => wm(e) && Ls(e.pipe), m_ = e => { let r; return e && (typeof FormData == "function" && e instanceof FormData || Ls(e.append) && ((r = gf(e)) === "formdata" || r === "object" && Ls(e.toString) && e.toString() === "[object FormData]")) }, g_ = Wn("URLSearchParams"), [h_, f_, x_, p_] = ["ReadableStream", "Request", "Response", "Headers"].map(Wn), y_ = e => e.trim ? e.trim() : e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, ""); function jm(e, r, { allOwnKeys: a = !1 } = {}) { if (e === null || typeof e > "u") return; let s, n; if (typeof e != "object" && (e = [e]), ud(e)) for (s = 0, n = e.length; s < n; s++)r.call(null, e[s], s, e); else { if (bm(e)) return; const i = a ? Object.getOwnPropertyNames(e) : Object.keys(e), o = i.length; let c; for (s = 0; s < o; s++)c = i[s], r.call(null, e[c], c, e) } } function jT(e, r) { if (bm(e)) return null; r = r.toLowerCase(); const a = Object.keys(e); let s = a.length, n; for (; s-- > 0;)if (n = a[s], r === n.toLowerCase()) return n; return null } const Sl = typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : typeof window < "u" ? window : global, NT = e => !Yc(e) && e !== Sl; function fb() { const { caseless: e, skipUndefined: r } = NT(this) && this || {}, a = {}, s = (n, i) => { const o = e && jT(a, i) || i; M0(a[o]) && M0(n) ? a[o] = fb(a[o], n) : M0(n) ? a[o] = fb({}, n) : ud(n) ? a[o] = n.slice() : (!r || !Yc(n)) && (a[o] = n) }; for (let n = 0, i = arguments.length; n < i; n++)arguments[n] && jm(arguments[n], s); return a } const v_ = (e, r, a, { allOwnKeys: s } = {}) => (jm(r, (n, i) => { a && Ls(n) ? e[i] = yT(n, a) : e[i] = n }, { allOwnKeys: s }), e), b_ = e => (e.charCodeAt(0) === 65279 && (e = e.slice(1)), e), w_ = (e, r, a, s) => { e.prototype = Object.create(r.prototype, s), e.prototype.constructor = e, Object.defineProperty(e, "super", { value: r.prototype }), a && Object.assign(e.prototype, a) }, j_ = (e, r, a, s) => { let n, i, o; const c = {}; if (r = r || {}, e == null) return r; do { for (n = Object.getOwnPropertyNames(e), i = n.length; i-- > 0;)o = n[i], (!s || s(o, e, r)) && !c[o] && (r[o] = e[o], c[o] = !0); e = a !== !1 && Ww(e) } while (e && (!a || a(e, r)) && e !== Object.prototype); return r }, N_ = (e, r, a) => { e = String(e), (a === void 0 || a > e.length) && (a = e.length), a -= r.length; const s = e.indexOf(r, a); return s !== -1 && s === a }, k_ = e => { if (!e) return null; if (ud(e)) return e; let r = e.length; if (!wT(r)) return null; const a = new Array(r); for (; r-- > 0;)a[r] = e[r]; return a }, S_ = (e => r => e && r instanceof e)(typeof Uint8Array < "u" && Ww(Uint8Array)), C_ = (e, r) => { const s = (e && e[mf]).call(e); let n; for (; (n = s.next()) && !n.done;) { const i = n.value; r.call(e, i[0], i[1]) } }, E_ = (e, r) => { let a; const s = []; for (; (a = e.exec(r)) !== null;)s.push(a); return s }, A_ = Wn("HTMLFormElement"), P_ = e => e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g, function (a, s, n) { return s.toUpperCase() + n }), XS = (({ hasOwnProperty: e }) => (r, a) => e.call(r, a))(Object.prototype), T_ = Wn("RegExp"), kT = (e, r) => { const a = Object.getOwnPropertyDescriptors(e), s = {}; jm(a, (n, i) => { let o; (o = r(n, i, e)) !== !1 && (s[i] = o || n) }), Object.defineProperties(e, s) }, D_ = e => { kT(e, (r, a) => { if (Ls(e) && ["arguments", "caller", "callee"].indexOf(a) !== -1) return !1; const s = e[a]; if (Ls(s)) { if (r.enumerable = !1, "writable" in r) { r.writable = !1; return } r.set || (r.set = () => { throw Error("Can not rewrite read-only method '" + a + "'") }) } }) }, O_ = (e, r) => { const a = {}, s = n => { n.forEach(i => { a[i] = !0 }) }; return ud(e) ? s(e) : s(String(e).split(r)), a }, I_ = () => { }, L_ = (e, r) => e != null && Number.isFinite(e = +e) ? e : r; function R_(e) { return !!(e && Ls(e.append) && e[vT] === "FormData" && e[mf]) } const M_ = e => { const r = new Array(10), a = (s, n) => { if (wm(s)) { if (r.indexOf(s) >= 0) return; if (bm(s)) return s; if (!("toJSON" in s)) { r[n] = s; const i = ud(s) ? [] : {}; return jm(s, (o, c) => { const u = a(o, n + 1); !Yc(u) && (i[c] = u) }), r[n] = void 0, i } } return s }; return a(e, 0) }, __ = Wn("AsyncFunction"), $_ = e => e && (wm(e) || Ls(e)) && Ls(e.then) && Ls(e.catch), ST = ((e, r) => e ? setImmediate : r ? ((a, s) => (Sl.addEventListener("message", ({ source: n, data: i }) => { n === Sl && i === a && s.length && s.shift()() }, !1), n => { s.push(n), Sl.postMessage(a, "*") }))(`axios@${Math.random()}`, []) : a => setTimeout(a))(typeof setImmediate == "function", Ls(Sl.postMessage)), U_ = typeof queueMicrotask < "u" ? queueMicrotask.bind(Sl) : typeof process < "u" && process.nextTick || ST, F_ = e => e != null && Ls(e[mf]), Ce = { isArray: ud, isArrayBuffer: bT, isBuffer: bm, isFormData: m_, isArrayBufferView: a_, isString: s_, isNumber: wT, isBoolean: n_, isObject: wm, isPlainObject: M0, isEmptyObject: i_, isReadableStream: h_, isRequest: f_, isResponse: x_, isHeaders: p_, isUndefined: Yc, isDate: o_, isFile: l_, isBlob: c_, isRegExp: T_, isFunction: Ls, isStream: u_, isURLSearchParams: g_, isTypedArray: S_, isFileList: d_, forEach: jm, merge: fb, extend: v_, trim: y_, stripBOM: b_, inherits: w_, toFlatObject: j_, kindOf: gf, kindOfTest: Wn, endsWith: N_, toArray: k_, forEachEntry: C_, matchAll: E_, isHTMLForm: A_, hasOwnProperty: XS, hasOwnProp: XS, reduceDescriptors: kT, freezeMethods: D_, toObjectSet: O_, toCamelCase: P_, noop: I_, toFiniteNumber: L_, findKey: jT, global: Sl, isContextDefined: NT, isSpecCompliantForm: R_, toJSONObject: M_, isAsyncFn: __, isThenable: $_, setImmediate: ST, asap: U_, isIterable: F_ }; function _t(e, r, a, s, n) { Error.call(this), Error.captureStackTrace ? Error.captureStackTrace(this, this.constructor) : this.stack = new Error().stack, this.message = e, this.name = "AxiosError", r && (this.code = r), a && (this.config = a), s && (this.request = s), n && (this.response = n, this.status = n.status ? n.status : null) } Ce.inherits(_t, Error, { toJSON: function () { return { message: this.message, name: this.name, description: this.description, number: this.number, fileName: this.fileName, lineNumber: this.lineNumber, columnNumber: this.columnNumber, stack: this.stack, config: Ce.toJSONObject(this.config), code: this.code, status: this.status } } }); const CT = _t.prototype, ET = {};["ERR_BAD_OPTION_VALUE", "ERR_BAD_OPTION", "ECONNABORTED", "ETIMEDOUT", "ERR_NETWORK", "ERR_FR_TOO_MANY_REDIRECTS", "ERR_DEPRECATED", "ERR_BAD_RESPONSE", "ERR_BAD_REQUEST", "ERR_CANCELED", "ERR_NOT_SUPPORT", "ERR_INVALID_URL"].forEach(e => { ET[e] = { value: e } }); Object.defineProperties(_t, ET); Object.defineProperty(CT, "isAxiosError", { value: !0 }); _t.from = (e, r, a, s, n, i) => { const o = Object.create(CT); Ce.toFlatObject(e, o, function (g) { return g !== Error.prototype }, m => m !== "isAxiosError"); const c = e && e.message ? e.message : "Error", u = r == null && e ? e.code : r; return _t.call(o, c, u, a, s, n), e && o.cause == null && Object.defineProperty(o, "cause", { value: e, configurable: !0 }), o.name = e && e.name || "Error", i && Object.assign(o, i), o }; const z_ = null; function xb(e) { return Ce.isPlainObject(e) || Ce.isArray(e) } function AT(e) { return Ce.endsWith(e, "[]") ? e.slice(0, -2) : e } function ZS(e, r, a) { return e ? e.concat(r).map(function (n, i) { return n = AT(n), !a && i ? "[" + n + "]" : n }).join(a ? "." : "") : r } function B_(e) { return Ce.isArray(e) && !e.some(xb) } const q_ = Ce.toFlatObject(Ce, {}, null, function (r) { return /^is[A-Z]/.test(r) }); function ff(e, r, a) { if (!Ce.isObject(e)) throw new TypeError("target must be an object"); r = r || new FormData, a = Ce.toFlatObject(a, { metaTokens: !0, dots: !1, indexes: !1 }, !1, function (j, v) { return !Ce.isUndefined(v[j]) }); const s = a.metaTokens, n = a.visitor || g, i = a.dots, o = a.indexes, u = (a.Blob || typeof Blob < "u" && Blob) && Ce.isSpecCompliantForm(r); if (!Ce.isFunction(n)) throw new TypeError("visitor must be a function"); function m(b) { if (b === null) return ""; if (Ce.isDate(b)) return b.toISOString(); if (Ce.isBoolean(b)) return b.toString(); if (!u && Ce.isBlob(b)) throw new _t("Blob is not supported. Use a Buffer instead."); return Ce.isArrayBuffer(b) || Ce.isTypedArray(b) ? u && typeof Blob == "function" ? new Blob([b]) : Buffer.from(b) : b } function g(b, j, v) { let S = b; if (b && !v && typeof b == "object") { if (Ce.endsWith(j, "{}")) j = s ? j : j.slice(0, -2), b = JSON.stringify(b); else if (Ce.isArray(b) && B_(b) || (Ce.isFileList(b) || Ce.endsWith(j, "[]")) && (S = Ce.toArray(b))) return j = AT(j), S.forEach(function (E, C) { !(Ce.isUndefined(E) || E === null) && r.append(o === !0 ? ZS([j], C, i) : o === null ? j : j + "[]", m(E)) }), !1 } return xb(b) ? !0 : (r.append(ZS(v, j, i), m(b)), !1) } const f = [], y = Object.assign(q_, { defaultVisitor: g, convertValue: m, isVisitable: xb }); function p(b, j) { if (!Ce.isUndefined(b)) { if (f.indexOf(b) !== -1) throw Error("Circular reference detected in " + j.join(".")); f.push(b), Ce.forEach(b, function (S, k) { (!(Ce.isUndefined(S) || S === null) && n.call(r, S, Ce.isString(k) ? k.trim() : k, j, y)) === !0 && p(S, j ? j.concat(k) : [k]) }), f.pop() } } if (!Ce.isObject(e)) throw new TypeError("data must be an object"); return p(e), r } function JS(e) { const r = { "!": "%21", "'": "%27", "(": "%28", ")": "%29", "~": "%7E", "%20": "+", "%00": "\0" }; return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g, function (s) { return r[s] }) } function Vw(e, r) { this._pairs = [], e && ff(e, this, r) } const PT = Vw.prototype; PT.append = function (r, a) { this._pairs.push([r, a]) }; PT.toString = function (r) { const a = r ? function (s) { return r.call(this, s, JS) } : JS; return this._pairs.map(function (n) { return a(n[0]) + "=" + a(n[1]) }, "").join("&") }; function H_(e) { return encodeURIComponent(e).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+") } function TT(e, r, a) { if (!r) return e; const s = a && a.encode || H_; Ce.isFunction(a) && (a = { serialize: a }); const n = a && a.serialize; let i; if (n ? i = n(r, a) : i = Ce.isURLSearchParams(r) ? r.toString() : new Vw(r, a).toString(s), i) { const o = e.indexOf("#"); o !== -1 && (e = e.slice(0, o)), e += (e.indexOf("?") === -1 ? "?" : "&") + i } return e } class e2 { constructor() { this.handlers = [] } use(r, a, s) { return this.handlers.push({ fulfilled: r, rejected: a, synchronous: s ? s.synchronous : !1, runWhen: s ? s.runWhen : null }), this.handlers.length - 1 } eject(r) { this.handlers[r] && (this.handlers[r] = null) } clear() { this.handlers && (this.handlers = []) } forEach(r) { Ce.forEach(this.handlers, function (s) { s !== null && r(s) }) } } const DT = { silentJSONParsing: !0, forcedJSONParsing: !0, clarifyTimeoutError: !1 }, W_ = typeof URLSearchParams < "u" ? URLSearchParams : Vw, V_ = typeof FormData < "u" ? FormData : null, G_ = typeof Blob < "u" ? Blob : null, K_ = { isBrowser: !0, classes: { URLSearchParams: W_, FormData: V_, Blob: G_ }, protocols: ["http", "https", "file", "blob", "url", "data"] }, Gw = typeof window < "u" && typeof document < "u", pb = typeof navigator == "object" && navigator || void 0, Y_ = Gw && (!pb || ["ReactNative", "NativeScript", "NS"].indexOf(pb.product) < 0), Q_ = typeof WorkerGlobalScope < "u" && self instanceof WorkerGlobalScope && typeof self.importScripts == "function", X_ = Gw && window.location.href || "http://localhost", Z_ = Object.freeze(Object.defineProperty({ __proto__: null, hasBrowserEnv: Gw, hasStandardBrowserEnv: Y_, hasStandardBrowserWebWorkerEnv: Q_, navigator: pb, origin: X_ }, Symbol.toStringTag, { value: "Module" })), is = { ...Z_, ...K_ }; function J_(e, r) { return ff(e, new is.classes.URLSearchParams, { visitor: function (a, s, n, i) { return is.isNode && Ce.isBuffer(a) ? (this.append(s, a.toString("base64")), !1) : i.defaultVisitor.apply(this, arguments) }, ...r }) } function e$(e) { return Ce.matchAll(/\w+|\[(\w*)]/g, e).map(r => r[0] === "[]" ? "" : r[1] || r[0]) } function t$(e) { const r = {}, a = Object.keys(e); let s; const n = a.length; let i; for (s = 0; s < n; s++)i = a[s], r[i] = e[i]; return r } function OT(e) { function r(a, s, n, i) { let o = a[i++]; if (o === "__proto__") return !0; const c = Number.isFinite(+o), u = i >= a.length; return o = !o && Ce.isArray(n) ? n.length : o, u ? (Ce.hasOwnProp(n, o) ? n[o] = [n[o], s] : n[o] = s, !c) : ((!n[o] || !Ce.isObject(n[o])) && (n[o] = []), r(a, s, n[o], i) && Ce.isArray(n[o]) && (n[o] = t$(n[o])), !c) } if (Ce.isFormData(e) && Ce.isFunction(e.entries)) { const a = {}; return Ce.forEachEntry(e, (s, n) => { r(e$(s), n, a, 0) }), a } return null } function r$(e, r, a) { if (Ce.isString(e)) try { return (r || JSON.parse)(e), Ce.trim(e) } catch (s) { if (s.name !== "SyntaxError") throw s } return (a || JSON.stringify)(e) } const Nm = { transitional: DT, adapter: ["xhr", "http", "fetch"], transformRequest: [function (r, a) { const s = a.getContentType() || "", n = s.indexOf("application/json") > -1, i = Ce.isObject(r); if (i && Ce.isHTMLForm(r) && (r = new FormData(r)), Ce.isFormData(r)) return n ? JSON.stringify(OT(r)) : r; if (Ce.isArrayBuffer(r) || Ce.isBuffer(r) || Ce.isStream(r) || Ce.isFile(r) || Ce.isBlob(r) || Ce.isReadableStream(r)) return r; if (Ce.isArrayBufferView(r)) return r.buffer; if (Ce.isURLSearchParams(r)) return a.setContentType("application/x-www-form-urlencoded;charset=utf-8", !1), r.toString(); let c; if (i) { if (s.indexOf("application/x-www-form-urlencoded") > -1) return J_(r, this.formSerializer).toString(); if ((c = Ce.isFileList(r)) || s.indexOf("multipart/form-data") > -1) { const u = this.env && this.env.FormData; return ff(c ? { "files[]": r } : r, u && new u, this.formSerializer) } } return i || n ? (a.setContentType("application/json", !1), r$(r)) : r }], transformResponse: [function (r) { const a = this.transitional || Nm.transitional, s = a && a.forcedJSONParsing, n = this.responseType === "json"; if (Ce.isResponse(r) || Ce.isReadableStream(r)) return r; if (r && Ce.isString(r) && (s && !this.responseType || n)) { const o = !(a && a.silentJSONParsing) && n; try { return JSON.parse(r, this.parseReviver) } catch (c) { if (o) throw c.name === "SyntaxError" ? _t.from(c, _t.ERR_BAD_RESPONSE, this, null, this.response) : c } } return r }], timeout: 0, xsrfCookieName: "XSRF-TOKEN", xsrfHeaderName: "X-XSRF-TOKEN", maxContentLength: -1, maxBodyLength: -1, env: { FormData: is.classes.FormData, Blob: is.classes.Blob }, validateStatus: function (r) { return r >= 200 && r < 300 }, headers: { common: { Accept: "application/json, text/plain, */*", "Content-Type": void 0 } } }; Ce.forEach(["delete", "get", "head", "post", "put", "patch"], e => { Nm.headers[e] = {} }); const a$ = Ce.toObjectSet(["age", "authorization", "content-length", "content-type", "etag", "expires", "from", "host", "if-modified-since", "if-unmodified-since", "last-modified", "location", "max-forwards", "proxy-authorization", "referer", "retry-after", "user-agent"]), s$ = e => {
    const r = {}; let a, s, n; return e && e.split(`
`).forEach(function (o) { n = o.indexOf(":"), a = o.substring(0, n).trim().toLowerCase(), s = o.substring(n + 1).trim(), !(!a || r[a] && a$[a]) && (a === "set-cookie" ? r[a] ? r[a].push(s) : r[a] = [s] : r[a] = r[a] ? r[a] + ", " + s : s) }), r
}, t2 = Symbol("internals"); function hu(e) { return e && String(e).trim().toLowerCase() } function _0(e) { return e === !1 || e == null ? e : Ce.isArray(e) ? e.map(_0) : String(e) } function n$(e) { const r = Object.create(null), a = /([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g; let s; for (; s = a.exec(e);)r[s[1]] = s[2]; return r } const i$ = e => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()); function ny(e, r, a, s, n) { if (Ce.isFunction(s)) return s.call(this, r, a); if (n && (r = a), !!Ce.isString(r)) { if (Ce.isString(s)) return r.indexOf(s) !== -1; if (Ce.isRegExp(s)) return s.test(r) } } function o$(e) { return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g, (r, a, s) => a.toUpperCase() + s) } function l$(e, r) { const a = Ce.toCamelCase(" " + r);["get", "set", "has"].forEach(s => { Object.defineProperty(e, s + a, { value: function (n, i, o) { return this[s].call(this, r, n, i, o) }, configurable: !0 }) }) } let Rs = class {
    constructor(r) { r && this.set(r) } set(r, a, s) { const n = this; function i(c, u, m) { const g = hu(u); if (!g) throw new Error("header name must be a non-empty string"); const f = Ce.findKey(n, g); (!f || n[f] === void 0 || m === !0 || m === void 0 && n[f] !== !1) && (n[f || u] = _0(c)) } const o = (c, u) => Ce.forEach(c, (m, g) => i(m, g, u)); if (Ce.isPlainObject(r) || r instanceof this.constructor) o(r, a); else if (Ce.isString(r) && (r = r.trim()) && !i$(r)) o(s$(r), a); else if (Ce.isObject(r) && Ce.isIterable(r)) { let c = {}, u, m; for (const g of r) { if (!Ce.isArray(g)) throw TypeError("Object iterator must return a key-value pair"); c[m = g[0]] = (u = c[m]) ? Ce.isArray(u) ? [...u, g[1]] : [u, g[1]] : g[1] } o(c, a) } else r != null && i(a, r, s); return this } get(r, a) { if (r = hu(r), r) { const s = Ce.findKey(this, r); if (s) { const n = this[s]; if (!a) return n; if (a === !0) return n$(n); if (Ce.isFunction(a)) return a.call(this, n, s); if (Ce.isRegExp(a)) return a.exec(n); throw new TypeError("parser must be boolean|regexp|function") } } } has(r, a) { if (r = hu(r), r) { const s = Ce.findKey(this, r); return !!(s && this[s] !== void 0 && (!a || ny(this, this[s], s, a))) } return !1 } delete(r, a) { const s = this; let n = !1; function i(o) { if (o = hu(o), o) { const c = Ce.findKey(s, o); c && (!a || ny(s, s[c], c, a)) && (delete s[c], n = !0) } } return Ce.isArray(r) ? r.forEach(i) : i(r), n } clear(r) { const a = Object.keys(this); let s = a.length, n = !1; for (; s--;) { const i = a[s]; (!r || ny(this, this[i], i, r, !0)) && (delete this[i], n = !0) } return n } normalize(r) { const a = this, s = {}; return Ce.forEach(this, (n, i) => { const o = Ce.findKey(s, i); if (o) { a[o] = _0(n), delete a[i]; return } const c = r ? o$(i) : String(i).trim(); c !== i && delete a[i], a[c] = _0(n), s[c] = !0 }), this } concat(...r) { return this.constructor.concat(this, ...r) } toJSON(r) { const a = Object.create(null); return Ce.forEach(this, (s, n) => { s != null && s !== !1 && (a[n] = r && Ce.isArray(s) ? s.join(", ") : s) }), a } [Symbol.iterator]() { return Object.entries(this.toJSON())[Symbol.iterator]() } toString() {
        return Object.entries(this.toJSON()).map(([r, a]) => r + ": " + a).join(`
`)
    } getSetCookie() { return this.get("set-cookie") || [] } get [Symbol.toStringTag]() { return "AxiosHeaders" } static from(r) { return r instanceof this ? r : new this(r) } static concat(r, ...a) { const s = new this(r); return a.forEach(n => s.set(n)), s } static accessor(r) { const s = (this[t2] = this[t2] = { accessors: {} }).accessors, n = this.prototype; function i(o) { const c = hu(o); s[c] || (l$(n, o), s[c] = !0) } return Ce.isArray(r) ? r.forEach(i) : i(r), this }
}; Rs.accessor(["Content-Type", "Content-Length", "Accept", "Accept-Encoding", "User-Agent", "Authorization"]); Ce.reduceDescriptors(Rs.prototype, ({ value: e }, r) => { let a = r[0].toUpperCase() + r.slice(1); return { get: () => e, set(s) { this[a] = s } } }); Ce.freezeMethods(Rs); function iy(e, r) { const a = this || Nm, s = r || a, n = Rs.from(s.headers); let i = s.data; return Ce.forEach(e, function (c) { i = c.call(a, i, n.normalize(), r ? r.status : void 0) }), n.normalize(), i } function IT(e) { return !!(e && e.__CANCEL__) } function md(e, r, a) { _t.call(this, e ?? "canceled", _t.ERR_CANCELED, r, a), this.name = "CanceledError" } Ce.inherits(md, _t, { __CANCEL__: !0 }); function LT(e, r, a) { const s = a.config.validateStatus; !a.status || !s || s(a.status) ? e(a) : r(new _t("Request failed with status code " + a.status, [_t.ERR_BAD_REQUEST, _t.ERR_BAD_RESPONSE][Math.floor(a.status / 100) - 4], a.config, a.request, a)) } function c$(e) { const r = /^([-+\w]{1,25})(:?\/\/|:)/.exec(e); return r && r[1] || "" } function d$(e, r) { e = e || 10; const a = new Array(e), s = new Array(e); let n = 0, i = 0, o; return r = r !== void 0 ? r : 1e3, function (u) { const m = Date.now(), g = s[i]; o || (o = m), a[n] = u, s[n] = m; let f = i, y = 0; for (; f !== n;)y += a[f++], f = f % e; if (n = (n + 1) % e, n === i && (i = (i + 1) % e), m - o < r) return; const p = g && m - g; return p ? Math.round(y * 1e3 / p) : void 0 } } function u$(e, r) { let a = 0, s = 1e3 / r, n, i; const o = (m, g = Date.now()) => { a = g, n = null, i && (clearTimeout(i), i = null), e(...m) }; return [(...m) => { const g = Date.now(), f = g - a; f >= s ? o(m, g) : (n = m, i || (i = setTimeout(() => { i = null, o(n) }, s - f))) }, () => n && o(n)] } const X0 = (e, r, a = 3) => { let s = 0; const n = d$(50, 250); return u$(i => { const o = i.loaded, c = i.lengthComputable ? i.total : void 0, u = o - s, m = n(u), g = o <= c; s = o; const f = { loaded: o, total: c, progress: c ? o / c : void 0, bytes: u, rate: m || void 0, estimated: m && c && g ? (c - o) / m : void 0, event: i, lengthComputable: c != null, [r ? "download" : "upload"]: !0 }; e(f) }, a) }, r2 = (e, r) => { const a = e != null; return [s => r[0]({ lengthComputable: a, total: e, loaded: s }), r[1]] }, a2 = e => (...r) => Ce.asap(() => e(...r)), m$ = is.hasStandardBrowserEnv ? ((e, r) => a => (a = new URL(a, is.origin), e.protocol === a.protocol && e.host === a.host && (r || e.port === a.port)))(new URL(is.origin), is.navigator && /(msie|trident)/i.test(is.navigator.userAgent)) : () => !0, g$ = is.hasStandardBrowserEnv ? { write(e, r, a, s, n, i, o) { if (typeof document > "u") return; const c = [`${e}=${encodeURIComponent(r)}`]; Ce.isNumber(a) && c.push(`expires=${new Date(a).toUTCString()}`), Ce.isString(s) && c.push(`path=${s}`), Ce.isString(n) && c.push(`domain=${n}`), i === !0 && c.push("secure"), Ce.isString(o) && c.push(`SameSite=${o}`), document.cookie = c.join("; ") }, read(e) { if (typeof document > "u") return null; const r = document.cookie.match(new RegExp("(?:^|; )" + e + "=([^;]*)")); return r ? decodeURIComponent(r[1]) : null }, remove(e) { this.write(e, "", Date.now() - 864e5, "/") } } : { write() { }, read() { return null }, remove() { } }; function h$(e) { return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(e) } function f$(e, r) { return r ? e.replace(/\/?\/$/, "") + "/" + r.replace(/^\/+/, "") : e } function RT(e, r, a) { let s = !h$(r); return e && (s || a == !1) ? f$(e, r) : r } const s2 = e => e instanceof Rs ? { ...e } : e; function Fl(e, r) { r = r || {}; const a = {}; function s(m, g, f, y) { return Ce.isPlainObject(m) && Ce.isPlainObject(g) ? Ce.merge.call({ caseless: y }, m, g) : Ce.isPlainObject(g) ? Ce.merge({}, g) : Ce.isArray(g) ? g.slice() : g } function n(m, g, f, y) { if (Ce.isUndefined(g)) { if (!Ce.isUndefined(m)) return s(void 0, m, f, y) } else return s(m, g, f, y) } function i(m, g) { if (!Ce.isUndefined(g)) return s(void 0, g) } function o(m, g) { if (Ce.isUndefined(g)) { if (!Ce.isUndefined(m)) return s(void 0, m) } else return s(void 0, g) } function c(m, g, f) { if (f in r) return s(m, g); if (f in e) return s(void 0, m) } const u = { url: i, method: i, data: i, baseURL: o, transformRequest: o, transformResponse: o, paramsSerializer: o, timeout: o, timeoutMessage: o, withCredentials: o, withXSRFToken: o, adapter: o, responseType: o, xsrfCookieName: o, xsrfHeaderName: o, onUploadProgress: o, onDownloadProgress: o, decompress: o, maxContentLength: o, maxBodyLength: o, beforeRedirect: o, transport: o, httpAgent: o, httpsAgent: o, cancelToken: o, socketPath: o, responseEncoding: o, validateStatus: c, headers: (m, g, f) => n(s2(m), s2(g), f, !0) }; return Ce.forEach(Object.keys({ ...e, ...r }), function (g) { const f = u[g] || n, y = f(e[g], r[g], g); Ce.isUndefined(y) && f !== c || (a[g] = y) }), a } const MT = e => { const r = Fl({}, e); let { data: a, withXSRFToken: s, xsrfHeaderName: n, xsrfCookieName: i, headers: o, auth: c } = r; if (r.headers = o = Rs.from(o), r.url = TT(RT(r.baseURL, r.url, r.allowAbsoluteUrls), e.params, e.paramsSerializer), c && o.set("Authorization", "Basic " + btoa((c.username || "") + ":" + (c.password ? unescape(encodeURIComponent(c.password)) : ""))), Ce.isFormData(a)) { if (is.hasStandardBrowserEnv || is.hasStandardBrowserWebWorkerEnv) o.setContentType(void 0); else if (Ce.isFunction(a.getHeaders)) { const u = a.getHeaders(), m = ["content-type", "content-length"]; Object.entries(u).forEach(([g, f]) => { m.includes(g.toLowerCase()) && o.set(g, f) }) } } if (is.hasStandardBrowserEnv && (s && Ce.isFunction(s) && (s = s(r)), s || s !== !1 && m$(r.url))) { const u = n && i && g$.read(i); u && o.set(n, u) } return r }, x$ = typeof XMLHttpRequest < "u", p$ = x$ && function (e) { return new Promise(function (a, s) { const n = MT(e); let i = n.data; const o = Rs.from(n.headers).normalize(); let { responseType: c, onUploadProgress: u, onDownloadProgress: m } = n, g, f, y, p, b; function j() { p && p(), b && b(), n.cancelToken && n.cancelToken.unsubscribe(g), n.signal && n.signal.removeEventListener("abort", g) } let v = new XMLHttpRequest; v.open(n.method.toUpperCase(), n.url, !0), v.timeout = n.timeout; function S() { if (!v) return; const E = Rs.from("getAllResponseHeaders" in v && v.getAllResponseHeaders()), N = { data: !c || c === "text" || c === "json" ? v.responseText : v.response, status: v.status, statusText: v.statusText, headers: E, config: e, request: v }; LT(function (D) { a(D), j() }, function (D) { s(D), j() }, N), v = null } "onloadend" in v ? v.onloadend = S : v.onreadystatechange = function () { !v || v.readyState !== 4 || v.status === 0 && !(v.responseURL && v.responseURL.indexOf("file:") === 0) || setTimeout(S) }, v.onabort = function () { v && (s(new _t("Request aborted", _t.ECONNABORTED, e, v)), v = null) }, v.onerror = function (C) { const N = C && C.message ? C.message : "Network Error", A = new _t(N, _t.ERR_NETWORK, e, v); A.event = C || null, s(A), v = null }, v.ontimeout = function () { let C = n.timeout ? "timeout of " + n.timeout + "ms exceeded" : "timeout exceeded"; const N = n.transitional || DT; n.timeoutErrorMessage && (C = n.timeoutErrorMessage), s(new _t(C, N.clarifyTimeoutError ? _t.ETIMEDOUT : _t.ECONNABORTED, e, v)), v = null }, i === void 0 && o.setContentType(null), "setRequestHeader" in v && Ce.forEach(o.toJSON(), function (C, N) { v.setRequestHeader(N, C) }), Ce.isUndefined(n.withCredentials) || (v.withCredentials = !!n.withCredentials), c && c !== "json" && (v.responseType = n.responseType), m && ([y, b] = X0(m, !0), v.addEventListener("progress", y)), u && v.upload && ([f, p] = X0(u), v.upload.addEventListener("progress", f), v.upload.addEventListener("loadend", p)), (n.cancelToken || n.signal) && (g = E => { v && (s(!E || E.type ? new md(null, e, v) : E), v.abort(), v = null) }, n.cancelToken && n.cancelToken.subscribe(g), n.signal && (n.signal.aborted ? g() : n.signal.addEventListener("abort", g))); const k = c$(n.url); if (k && is.protocols.indexOf(k) === -1) { s(new _t("Unsupported protocol " + k + ":", _t.ERR_BAD_REQUEST, e)); return } v.send(i || null) }) }, y$ = (e, r) => { const { length: a } = e = e ? e.filter(Boolean) : []; if (r || a) { let s = new AbortController, n; const i = function (m) { if (!n) { n = !0, c(); const g = m instanceof Error ? m : this.reason; s.abort(g instanceof _t ? g : new md(g instanceof Error ? g.message : g)) } }; let o = r && setTimeout(() => { o = null, i(new _t(`timeout ${r} of ms exceeded`, _t.ETIMEDOUT)) }, r); const c = () => { e && (o && clearTimeout(o), o = null, e.forEach(m => { m.unsubscribe ? m.unsubscribe(i) : m.removeEventListener("abort", i) }), e = null) }; e.forEach(m => m.addEventListener("abort", i)); const { signal: u } = s; return u.unsubscribe = () => Ce.asap(c), u } }, v$ = function* (e, r) { let a = e.byteLength; if (a < r) { yield e; return } let s = 0, n; for (; s < a;)n = s + r, yield e.slice(s, n), s = n }, b$ = async function* (e, r) { for await (const a of w$(e)) yield* v$(a, r) }, w$ = async function* (e) { if (e[Symbol.asyncIterator]) { yield* e; return } const r = e.getReader(); try { for (; ;) { const { done: a, value: s } = await r.read(); if (a) break; yield s } } finally { await r.cancel() } }, n2 = (e, r, a, s) => { const n = b$(e, r); let i = 0, o, c = u => { o || (o = !0, s && s(u)) }; return new ReadableStream({ async pull(u) { try { const { done: m, value: g } = await n.next(); if (m) { c(), u.close(); return } let f = g.byteLength; if (a) { let y = i += f; a(y) } u.enqueue(new Uint8Array(g)) } catch (m) { throw c(m), m } }, cancel(u) { return c(u), n.return() } }, { highWaterMark: 2 }) }, i2 = 64 * 1024, { isFunction: o0 } = Ce, j$ = (({ Request: e, Response: r }) => ({ Request: e, Response: r }))(Ce.global), { ReadableStream: o2, TextEncoder: l2 } = Ce.global, c2 = (e, ...r) => { try { return !!e(...r) } catch { return !1 } }, N$ = e => { e = Ce.merge.call({ skipUndefined: !0 }, j$, e); const { fetch: r, Request: a, Response: s } = e, n = r ? o0(r) : typeof fetch == "function", i = o0(a), o = o0(s); if (!n) return !1; const c = n && o0(o2), u = n && (typeof l2 == "function" ? (b => j => b.encode(j))(new l2) : async b => new Uint8Array(await new a(b).arrayBuffer())), m = i && c && c2(() => { let b = !1; const j = new a(is.origin, { body: new o2, method: "POST", get duplex() { return b = !0, "half" } }).headers.has("Content-Type"); return b && !j }), g = o && c && c2(() => Ce.isReadableStream(new s("").body)), f = { stream: g && (b => b.body) }; n && ["text", "arrayBuffer", "blob", "formData", "stream"].forEach(b => { !f[b] && (f[b] = (j, v) => { let S = j && j[b]; if (S) return S.call(j); throw new _t(`Response type '${b}' is not supported`, _t.ERR_NOT_SUPPORT, v) }) }); const y = async b => { if (b == null) return 0; if (Ce.isBlob(b)) return b.size; if (Ce.isSpecCompliantForm(b)) return (await new a(is.origin, { method: "POST", body: b }).arrayBuffer()).byteLength; if (Ce.isArrayBufferView(b) || Ce.isArrayBuffer(b)) return b.byteLength; if (Ce.isURLSearchParams(b) && (b = b + ""), Ce.isString(b)) return (await u(b)).byteLength }, p = async (b, j) => { const v = Ce.toFiniteNumber(b.getContentLength()); return v ?? y(j) }; return async b => { let { url: j, method: v, data: S, signal: k, cancelToken: E, timeout: C, onDownloadProgress: N, onUploadProgress: A, responseType: D, headers: I, withCredentials: $ = "same-origin", fetchOptions: B } = MT(b), W = r || fetch; D = D ? (D + "").toLowerCase() : "text"; let M = y$([k, E && E.toAbortSignal()], C), q = null; const V = M && M.unsubscribe && (() => { M.unsubscribe() }); let X; try { if (A && m && v !== "get" && v !== "head" && (X = await p(I, S)) !== 0) { let T = new a(j, { method: "POST", body: S, duplex: "half" }), _; if (Ce.isFormData(S) && (_ = T.headers.get("content-type")) && I.setContentType(_), T.body) { const [H, U] = r2(X, X0(a2(A))); S = n2(T.body, i2, H, U) } } Ce.isString($) || ($ = $ ? "include" : "omit"); const se = i && "credentials" in a.prototype, le = { ...B, signal: M, method: v.toUpperCase(), headers: I.normalize().toJSON(), body: S, duplex: "half", credentials: se ? $ : void 0 }; q = i && new a(j, le); let ee = await (i ? W(q, B) : W(j, le)); const L = g && (D === "stream" || D === "response"); if (g && (N || L && V)) { const T = {};["status", "statusText", "headers"].forEach(K => { T[K] = ee[K] }); const _ = Ce.toFiniteNumber(ee.headers.get("content-length")), [H, U] = N && r2(_, X0(a2(N), !0)) || []; ee = new s(n2(ee.body, i2, H, () => { U && U(), V && V() }), T) } D = D || "text"; let z = await f[Ce.findKey(f, D) || "text"](ee, b); return !L && V && V(), await new Promise((T, _) => { LT(T, _, { data: z, headers: Rs.from(ee.headers), status: ee.status, statusText: ee.statusText, config: b, request: q }) }) } catch (se) { throw V && V(), se && se.name === "TypeError" && /Load failed|fetch/i.test(se.message) ? Object.assign(new _t("Network Error", _t.ERR_NETWORK, b, q), { cause: se.cause || se }) : _t.from(se, se && se.code, b, q) } } }, k$ = new Map, _T = e => { let r = e && e.env || {}; const { fetch: a, Request: s, Response: n } = r, i = [s, n, a]; let o = i.length, c = o, u, m, g = k$; for (; c--;)u = i[c], m = g.get(u), m === void 0 && g.set(u, m = c ? new Map : N$(r)), g = m; return m }; _T(); const Kw = { http: z_, xhr: p$, fetch: { get: _T } }; Ce.forEach(Kw, (e, r) => { if (e) { try { Object.defineProperty(e, "name", { value: r }) } catch { } Object.defineProperty(e, "adapterName", { value: r }) } }); const d2 = e => `- ${e}`, S$ = e => Ce.isFunction(e) || e === null || e === !1; function C$(e, r) {
    e = Ce.isArray(e) ? e : [e]; const { length: a } = e; let s, n; const i = {}; for (let o = 0; o < a; o++) { s = e[o]; let c; if (n = s, !S$(s) && (n = Kw[(c = String(s)).toLowerCase()], n === void 0)) throw new _t(`Unknown adapter '${c}'`); if (n && (Ce.isFunction(n) || (n = n.get(r)))) break; i[c || "#" + o] = n } if (!n) {
        const o = Object.entries(i).map(([u, m]) => `adapter ${u} ` + (m === !1 ? "is not supported by the environment" : "is not available in the build")); let c = a ? o.length > 1 ? `since :
`+ o.map(d2).join(`
`) : " " + d2(o[0]) : "as no adapter specified"; throw new _t("There is no suitable adapter to dispatch the request " + c, "ERR_NOT_SUPPORT")
    } return n
} const $T = { getAdapter: C$, adapters: Kw }; function oy(e) { if (e.cancelToken && e.cancelToken.throwIfRequested(), e.signal && e.signal.aborted) throw new md(null, e) } function u2(e) { return oy(e), e.headers = Rs.from(e.headers), e.data = iy.call(e, e.transformRequest), ["post", "put", "patch"].indexOf(e.method) !== -1 && e.headers.setContentType("application/x-www-form-urlencoded", !1), $T.getAdapter(e.adapter || Nm.adapter, e)(e).then(function (s) { return oy(e), s.data = iy.call(e, e.transformResponse, s), s.headers = Rs.from(s.headers), s }, function (s) { return IT(s) || (oy(e), s && s.response && (s.response.data = iy.call(e, e.transformResponse, s.response), s.response.headers = Rs.from(s.response.headers))), Promise.reject(s) }) } const UT = "1.13.2", xf = {};["object", "boolean", "number", "function", "string", "symbol"].forEach((e, r) => { xf[e] = function (s) { return typeof s === e || "a" + (r < 1 ? "n " : " ") + e } }); const m2 = {}; xf.transitional = function (r, a, s) { function n(i, o) { return "[Axios v" + UT + "] Transitional option '" + i + "'" + o + (s ? ". " + s : "") } return (i, o, c) => { if (r === !1) throw new _t(n(o, " has been removed" + (a ? " in " + a : "")), _t.ERR_DEPRECATED); return a && !m2[o] && (m2[o] = !0, console.warn(n(o, " has been deprecated since v" + a + " and will be removed in the near future"))), r ? r(i, o, c) : !0 } }; xf.spelling = function (r) { return (a, s) => (console.warn(`${s} is likely a misspelling of ${r}`), !0) }; function E$(e, r, a) { if (typeof e != "object") throw new _t("options must be an object", _t.ERR_BAD_OPTION_VALUE); const s = Object.keys(e); let n = s.length; for (; n-- > 0;) { const i = s[n], o = r[i]; if (o) { const c = e[i], u = c === void 0 || o(c, i, e); if (u !== !0) throw new _t("option " + i + " must be " + u, _t.ERR_BAD_OPTION_VALUE); continue } if (a !== !0) throw new _t("Unknown option " + i, _t.ERR_BAD_OPTION) } } const $0 = { assertOptions: E$, validators: xf }, Xn = $0.validators; let Tl = class {
    constructor(r) { this.defaults = r || {}, this.interceptors = { request: new e2, response: new e2 } } async request(r, a) {
        try { return await this._request(r, a) } catch (s) {
            if (s instanceof Error) {
                let n = {}; Error.captureStackTrace ? Error.captureStackTrace(n) : n = new Error; const i = n.stack ? n.stack.replace(/^.+\n/, "") : ""; try {
                    s.stack ? i && !String(s.stack).endsWith(i.replace(/^.+\n.+\n/, "")) && (s.stack += `
`+ i) : s.stack = i
                } catch { }
            } throw s
        }
    } _request(r, a) { typeof r == "string" ? (a = a || {}, a.url = r) : a = r || {}, a = Fl(this.defaults, a); const { transitional: s, paramsSerializer: n, headers: i } = a; s !== void 0 && $0.assertOptions(s, { silentJSONParsing: Xn.transitional(Xn.boolean), forcedJSONParsing: Xn.transitional(Xn.boolean), clarifyTimeoutError: Xn.transitional(Xn.boolean) }, !1), n != null && (Ce.isFunction(n) ? a.paramsSerializer = { serialize: n } : $0.assertOptions(n, { encode: Xn.function, serialize: Xn.function }, !0)), a.allowAbsoluteUrls !== void 0 || (this.defaults.allowAbsoluteUrls !== void 0 ? a.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls : a.allowAbsoluteUrls = !0), $0.assertOptions(a, { baseUrl: Xn.spelling("baseURL"), withXsrfToken: Xn.spelling("withXSRFToken") }, !0), a.method = (a.method || this.defaults.method || "get").toLowerCase(); let o = i && Ce.merge(i.common, i[a.method]); i && Ce.forEach(["delete", "get", "head", "post", "put", "patch", "common"], b => { delete i[b] }), a.headers = Rs.concat(o, i); const c = []; let u = !0; this.interceptors.request.forEach(function (j) { typeof j.runWhen == "function" && j.runWhen(a) === !1 || (u = u && j.synchronous, c.unshift(j.fulfilled, j.rejected)) }); const m = []; this.interceptors.response.forEach(function (j) { m.push(j.fulfilled, j.rejected) }); let g, f = 0, y; if (!u) { const b = [u2.bind(this), void 0]; for (b.unshift(...c), b.push(...m), y = b.length, g = Promise.resolve(a); f < y;)g = g.then(b[f++], b[f++]); return g } y = c.length; let p = a; for (; f < y;) { const b = c[f++], j = c[f++]; try { p = b(p) } catch (v) { j.call(this, v); break } } try { g = u2.call(this, p) } catch (b) { return Promise.reject(b) } for (f = 0, y = m.length; f < y;)g = g.then(m[f++], m[f++]); return g } getUri(r) { r = Fl(this.defaults, r); const a = RT(r.baseURL, r.url, r.allowAbsoluteUrls); return TT(a, r.params, r.paramsSerializer) }
}; Ce.forEach(["delete", "get", "head", "options"], function (r) { Tl.prototype[r] = function (a, s) { return this.request(Fl(s || {}, { method: r, url: a, data: (s || {}).data })) } }); Ce.forEach(["post", "put", "patch"], function (r) { function a(s) { return function (i, o, c) { return this.request(Fl(c || {}, { method: r, headers: s ? { "Content-Type": "multipart/form-data" } : {}, url: i, data: o })) } } Tl.prototype[r] = a(), Tl.prototype[r + "Form"] = a(!0) }); let A$ = class FT { constructor(r) { if (typeof r != "function") throw new TypeError("executor must be a function."); let a; this.promise = new Promise(function (i) { a = i }); const s = this; this.promise.then(n => { if (!s._listeners) return; let i = s._listeners.length; for (; i-- > 0;)s._listeners[i](n); s._listeners = null }), this.promise.then = n => { let i; const o = new Promise(c => { s.subscribe(c), i = c }).then(n); return o.cancel = function () { s.unsubscribe(i) }, o }, r(function (i, o, c) { s.reason || (s.reason = new md(i, o, c), a(s.reason)) }) } throwIfRequested() { if (this.reason) throw this.reason } subscribe(r) { if (this.reason) { r(this.reason); return } this._listeners ? this._listeners.push(r) : this._listeners = [r] } unsubscribe(r) { if (!this._listeners) return; const a = this._listeners.indexOf(r); a !== -1 && this._listeners.splice(a, 1) } toAbortSignal() { const r = new AbortController, a = s => { r.abort(s) }; return this.subscribe(a), r.signal.unsubscribe = () => this.unsubscribe(a), r.signal } static source() { let r; return { token: new FT(function (n) { r = n }), cancel: r } } }; function P$(e) { return function (a) { return e.apply(null, a) } } function T$(e) { return Ce.isObject(e) && e.isAxiosError === !0 } const yb = { Continue: 100, SwitchingProtocols: 101, Processing: 102, EarlyHints: 103, Ok: 200, Created: 201, Accepted: 202, NonAuthoritativeInformation: 203, NoContent: 204, ResetContent: 205, PartialContent: 206, MultiStatus: 207, AlreadyReported: 208, ImUsed: 226, MultipleChoices: 300, MovedPermanently: 301, Found: 302, SeeOther: 303, NotModified: 304, UseProxy: 305, Unused: 306, TemporaryRedirect: 307, PermanentRedirect: 308, BadRequest: 400, Unauthorized: 401, PaymentRequired: 402, Forbidden: 403, NotFound: 404, MethodNotAllowed: 405, NotAcceptable: 406, ProxyAuthenticationRequired: 407, RequestTimeout: 408, Conflict: 409, Gone: 410, LengthRequired: 411, PreconditionFailed: 412, PayloadTooLarge: 413, UriTooLong: 414, UnsupportedMediaType: 415, RangeNotSatisfiable: 416, ExpectationFailed: 417, ImATeapot: 418, MisdirectedRequest: 421, UnprocessableEntity: 422, Locked: 423, FailedDependency: 424, TooEarly: 425, UpgradeRequired: 426, PreconditionRequired: 428, TooManyRequests: 429, RequestHeaderFieldsTooLarge: 431, UnavailableForLegalReasons: 451, InternalServerError: 500, NotImplemented: 501, BadGateway: 502, ServiceUnavailable: 503, GatewayTimeout: 504, HttpVersionNotSupported: 505, VariantAlsoNegotiates: 506, InsufficientStorage: 507, LoopDetected: 508, NotExtended: 510, NetworkAuthenticationRequired: 511, WebServerIsDown: 521, ConnectionTimedOut: 522, OriginIsUnreachable: 523, TimeoutOccurred: 524, SslHandshakeFailed: 525, InvalidSslCertificate: 526 }; Object.entries(yb).forEach(([e, r]) => { yb[r] = e }); function zT(e) { const r = new Tl(e), a = yT(Tl.prototype.request, r); return Ce.extend(a, Tl.prototype, r, { allOwnKeys: !0 }), Ce.extend(a, r, null, { allOwnKeys: !0 }), a.create = function (n) { return zT(Fl(e, n)) }, a } const It = zT(Nm); It.Axios = Tl; It.CanceledError = md; It.CancelToken = A$; It.isCancel = IT; It.VERSION = UT; It.toFormData = ff; It.AxiosError = _t; It.Cancel = It.CanceledError; It.all = function (r) { return Promise.all(r) }; It.spread = P$; It.isAxiosError = T$; It.mergeConfig = Fl; It.AxiosHeaders = Rs; It.formToJSON = e => OT(Ce.isHTMLForm(e) ? new FormData(e) : e); It.getAdapter = $T.getAdapter; It.HttpStatusCode = yb; It.default = It; const { Axios: nue, AxiosError: iue, CanceledError: oue, isCancel: lue, CancelToken: cue, VERSION: due, all: uue, Cancel: mue, isAxiosError: gue, spread: hue, toFormData: fue, AxiosHeaders: xue, HttpStatusCode: pue, formToJSON: yue, getAdapter: vue, mergeConfig: bue } = It, l0 = { NAME: "WeConnect CRM" }, us = { AUTH: { LOGIN: "/api/auth/login", LOGOUT: "/api/auth/logout", REFRESH: "/api/auth/refresh-token", PROFILE: "/api/auth/profile" }, USERS: { BASE: "/api/users", STATS: "/api/users/stats", SEARCH: "/api/users/search" }, ROLES: { BASE: "/api/roles", SEARCH: "/api/roles/search" }, LEADS: { BASE: "/leads", STATS: "/leads/stats", SEARCH: "/leads/search" }, DEALS: { BASE: "/deals", STATS: "/deals/stats", SEARCH: "/deals/search" }, PERMISSIONS: { BASE: "/api/permissions" }, ACTIVITIES: { BASE: "/api/activities", RECENT: "/api/activities/recent", STATS: "/api/activities/stats" }, HEALTH: "/api/health" }, Ye = { USER: { CREATE: "user.create", READ: "user.read", UPDATE: "user.update", DELETE: "user.delete" }, TRASH: { READ: "deleted.read" }, ROLE: { CREATE: "role.create", READ: "role.read", UPDATE: "role.update", DELETE: "role.delete" }, LEAD: { CREATE: "lead.create", READ: "lead.read", UPDATE: "lead.update", DELETE: "lead.delete" }, PERMISSION: { CREATE: "permission.create", READ: "permission.read", UPDATE: "permission.update", DELETE: "permission.delete" }, ACTIVITY: { READ: "activity.read" }, DASHBOARD: { READ: "dashboard.read" }, BUSINESS_SETTINGS: { READ: "business_settings.read", UPDATE: "business_settings.update" }, DEAL: { CREATE: "deal.create", READ: "deal.read", UPDATE: "deal.update", DELETE: "deal.delete" }, QUOTATION: { CREATE: "quotation.create", READ: "quotation.read", UPDATE: "quotation.update", DELETE: "quotation.delete" }, INVOICE: { CREATE: "invoice.create", READ: "invoice.read", UPDATE: "invoice.update", DELETE: "invoice.delete" }, EXPENSE: { CREATE: "expense.create", READ: "expense.read", UPDATE: "expense.update", DELETE: "expense.delete", APPROVE: "expense.approve" }, AUTOMATION: { CREATE: "automation.create", READ: "automation.read", UPDATE: "automation.update", DELETE: "automation.delete" }, DASHBOARD_WIDGETS: { STATS_USERS: "dashboard.stats_users", STATS_ROLES: "dashboard.stats_roles", STATS_LEADS: "dashboard.stats_leads", SYSTEM_STATUS: "dashboard.system_status", SYSTEM_ACTIVITY: "dashboard.system_activity", ACTIVITY_CALENDAR: "dashboard.activity_calendar", PERFORMANCE: "dashboard.performance", REVENUE_METRICS: "dashboard.revenue_metrics", ACTIVITY_ENGAGEMENT: "dashboard.activity_engagement" }, CALL_LOG: { READ: "call_log.read" } }, Ot = { AUTH_TOKEN: "authToken", REFRESH_TOKEN: "refreshToken", USER_DATA: "userData", THEME: "theme", LANGUAGE: "language", REMEMBER_ME: "rememberMe", REMEMBERED_EMAIL: "rememberedEmail", DASHBOARD_TODOS: "dashboardActivityTodos" }, cn = { POSITION: "top-right", AUTO_CLOSE: 5e3, HIDE_PROGRESS_BAR: !1, CLOSE_ON_CLICK: !0, PAUSE_ON_HOVER: !0, DRAGGABLE: !0 }, c0 = { DEFAULT: "default", ELEVATED: "elevated", OUTLINED: "outlined", GRADIENT: "gradient" }, Pi = { CATEGORIES: { COMPANY: "company", CURRENCY_TAX: "currency_tax", LEAD_SOURCES: "lead_sources", LEAD_STATUSES: "lead_statuses", TEMPLATES: "templates", NOTIFICATIONS: "notifications", INTEGRATIONS: "integrations" }, CURRENCIES: { USD: "USD" }, TAX_TYPES: { GST: "GST" } }, xl = { company: { name: "Your Company", email: "contact@company.com", phone: "", address: "", website: "", gstNumber: "", timezone: "UTC" }, currency: { primary: Pi.CURRENCIES.USD, symbol: "$", decimalPlaces: 2 }, tax: { defaultRate: 18, type: Pi.TAX_TYPES.GST, inclusive: !1 }, leadSources: ["Website", "Social Media", "Email Campaign", "Referral", "Cold Call", "Trade Show"], leadStatuses: [{ name: "Lead", probability: 10, color: "#6B7280" }, { name: "Qualified", probability: 25, color: "#3B82F6" }, { name: "Proposal", probability: 50, color: "#F59E0B" }, { name: "Negotiation", probability: 75, color: "#8B5CF6" }, { name: "Closed Won", probability: 100, color: "#10B981" }, { name: "Closed Lost", probability: 0, color: "#EF4444" }] }, Yo = "http://147.93.27.62:3010/api", Ei = `${Yo}/auth`; class D$ { constructor() { } getAuthHeaders() { return { "Content-Type": "application/json" } } getAuthHeadersWithToken() { const r = localStorage.getItem(Ot.AUTH_TOKEN); return { ...this.getAuthHeaders(), Authorization: r ? `Bearer ${r}` : "" } } async login(r) { try { const a = await It.post(`${Ei}/login`, r, { headers: this.getAuthHeaders() }); if (a.data.success) { const { accessToken: s, refreshToken: n, user: i, tokenExpiry: o } = a.data.data; localStorage.setItem(Ot.AUTH_TOKEN, s), localStorage.setItem(Ot.REFRESH_TOKEN, n), localStorage.setItem(Ot.USER_DATA, JSON.stringify(i)), localStorage.setItem("tokenExpiry", o), localStorage.setItem("userId", i.id.toString()), It.defaults.headers.common.Authorization = `Bearer ${s}` } return a.data } catch (a) { throw console.error("Login error:", a), this.handleAuthError(a) } } async register(r) { try { return (await It.post(`${Ei}/register`, r, { headers: this.getAuthHeaders() })).data } catch (a) { throw console.error("Registration error:", a), this.handleAuthError(a) } } async forgotPassword(r) { try { return (await It.post(`${Ei}/forgot-password`, r, { headers: this.getAuthHeaders() })).data } catch (a) { throw console.error("Forgot password error:", a), this.handleAuthError(a) } } async resetPassword(r) { try { return (await It.post(`${Ei}/reset-password`, r, { headers: this.getAuthHeaders() })).data } catch (a) { throw console.error("Reset password error:", a), this.handleAuthError(a) } } async refreshToken() { try { const r = localStorage.getItem(Ot.REFRESH_TOKEN); if (!r) throw new Error("No refresh token available"); const a = await It.post(`${Ei}/refresh-token`, { refreshToken: r }, { headers: this.getAuthHeaders() }); if (a.data.success) { const { accessToken: s, tokenExpiry: n } = a.data.data; localStorage.setItem(Ot.AUTH_TOKEN, s), localStorage.setItem("tokenExpiry", n), It.defaults.headers.common.Authorization = `Bearer ${s}` } return a.data } catch (r) { throw console.error("Token refresh error:", r), this.clearTokens(), this.handleAuthError(r) } } async logout() { try { await It.post(`${Ei}/logout`, {}, { headers: this.getAuthHeadersWithToken() }) } catch (r) { console.error("Logout error:", r) } finally { this.clearTokens(), delete It.defaults.headers.common.Authorization } return { success: !0, message: "Logged out successfully" } } async getProfile() { try { return (await It.get(`${Ei}/profile`, { headers: this.getAuthHeadersWithToken() })).data } catch (r) { throw console.error("Get profile error:", r), this.handleAuthError(r) } } async verifyEmail(r) { try { return (await It.get(`${Ei}/verify-email/${r}`, { headers: this.getAuthHeaders() })).data } catch (a) { throw console.error("Email verification error:", a), this.handleAuthError(a) } } async getPermissionsForRole(r) { try { return (await It.get(`${Ei}/roles/${r}/permissions`, { headers: this.getAuthHeadersWithToken() })).data.data.permissions } catch (a) { throw console.error("Get permissions error:", a), this.handleAuthError(a) } } validatePassword(r, a) { const s = a || { minLength: 8, requireUppercase: !0, requireLowercase: !0, requireNumbers: !0, requireSymbols: !0 }, n = []; return r.length < s.minLength && n.push(`Password must be at least ${s.minLength} characters long`), s.requireUppercase && !/[A-Z]/.test(r) && n.push("Password must contain at least one uppercase letter"), s.requireLowercase && !/[a-z]/.test(r) && n.push("Password must contain at least one lowercase letter"), s.requireNumbers && !/\d/.test(r) && n.push("Password must contain at least one number"), s.requireSymbols && !/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(r) && n.push("Password must contain at least one special character"), { isValid: n.length === 0, errors: n } } calculatePasswordStrength(r) { let a = 0; const s = { length: r.length >= 8, lowercase: /[a-z]/.test(r), uppercase: /[A-Z]/.test(r), numbers: /\d/.test(r), symbols: /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(r), longPassword: r.length >= 12 }; return Object.values(s).forEach(n => { n && (a += 1) }), a <= 2 ? { score: a, message: "Weak", color: "red" } : a <= 4 ? { score: a, message: "Fair", color: "orange" } : a <= 5 ? { score: a, message: "Good", color: "yellow" } : { score: a, message: "Strong", color: "green" } } isTokenExpired() { const r = localStorage.getItem("tokenExpiry"); return r ? new Date(r) <= new Date : !0 } async ensureValidToken() { if (!localStorage.getItem(Ot.AUTH_TOKEN)) return !1; if (this.isTokenExpired()) try { return await this.refreshToken(), !0 } catch { return !1 } return !0 } clearTokens() { localStorage.removeItem(Ot.AUTH_TOKEN), localStorage.removeItem(Ot.REFRESH_TOKEN), localStorage.removeItem(Ot.USER_DATA), localStorage.removeItem("tokenExpiry"), localStorage.removeItem("userId") } getCurrentUser() { const r = localStorage.getItem(Ot.USER_DATA); if (!r) return null; try { return JSON.parse(r) } catch (a) { return console.error("Error parsing user data:", a), null } } isAuthenticated() { const r = localStorage.getItem(Ot.AUTH_TOKEN), a = this.getCurrentUser(); return !!(r && a && !this.isTokenExpired()) } handleAuthError(r) { const a = r.response?.data?.message || "Authentication error occurred", s = r.response?.status; return s === 403 ? new Error(a) : s === 423 ? new Error("Account is temporarily locked. Please try again later.") : s === 429 ? new Error("Too many attempts. Please wait before trying again.") : s === 401 && r.response?.data?.requiresEmailVerification ? new Error("Please verify your email address before logging in.") : new Error(a) } async autoLogin() { try { return !localStorage.getItem(Ot.AUTH_TOKEN) || this.isTokenExpired() && !await this.ensureValidToken() ? !1 : (It.defaults.headers.common.Authorization = `Bearer ${localStorage.getItem(Ot.AUTH_TOKEN)}`, await this.getProfile(), !0) } catch (r) { return console.error("Auto-login failed:", r), this.clearTokens(), !1 } } } const Vs = new D$, O$ = { user: null, accessToken: null, refreshToken: null, isAuthenticated: !1, isLoading: !1, isBootstrapping: !0, error: null, passwordRequirements: null }, I$ = (e, r) => { switch (r.type) { case "LOGIN_START": case "REGISTER_START": return { ...e, isLoading: !0, error: null }; case "LOGIN_SUCCESS": return { ...e, user: r.payload.user, accessToken: r.payload.accessToken, refreshToken: r.payload.refreshToken, isAuthenticated: !0, isLoading: !1, error: null }; case "REGISTER_SUCCESS": return { ...e, isLoading: !1, error: null }; case "TOKEN_EXPIRED": return { ...e, user: null, accessToken: null, refreshToken: null, isAuthenticated: !1, isLoading: !1, isBootstrapping: !1, error: "Session expired. Please login again." }; case "TOKEN_REFRESHED": return { ...e, accessToken: r.payload }; case "LOGIN_FAILURE": case "REGISTER_FAILURE": return { ...e, user: null, accessToken: null, refreshToken: null, isAuthenticated: !1, isLoading: !1, error: r.payload }; case "LOGOUT": return { ...e, user: null, accessToken: null, refreshToken: null, isAuthenticated: !1, isLoading: !1, error: null }; case "SET_LOADING": return { ...e, isLoading: r.payload }; case "CHECK_AUTH_SUCCESS": return { ...e, user: r.payload, isAuthenticated: !0, isLoading: !1, isBootstrapping: !1, error: null }; case "CHECK_AUTH_FAILURE": return { ...e, user: null, accessToken: null, refreshToken: null, isAuthenticated: !1, isLoading: !1, isBootstrapping: !1, error: null }; case "UPDATE_USER": return { ...e, user: r.payload }; case "SET_ERROR": return { ...e, error: r.payload, isLoading: !1 }; case "CLEAR_ERROR": return { ...e, error: null }; case "SET_PASSWORD_REQUIREMENTS": return { ...e, passwordRequirements: r.payload }; default: return e } }, BT = h.createContext(void 0), mr = () => { const e = h.useContext(BT); if (!e) throw new Error("useAuth must be used within an AuthProvider"); return e }, L$ = ({ children: e }) => { const [r, a] = h.useReducer(I$, O$); h.useEffect(() => { (async () => { a({ type: "SET_LOADING", payload: !0 }); try { if (await Vs.autoLogin()) { const C = await Vs.getProfile(); a({ type: "CHECK_AUTH_SUCCESS", payload: C.data.user }) } else a({ type: "CHECK_AUTH_FAILURE" }) } catch (E) { console.error("Auto-login failed:", E), a({ type: "CHECK_AUTH_FAILURE" }) } })() }, []), h.useEffect(() => { const k = E => { const N = E?.detail?.message || "Your account has been deactivated."; try { const { toast: A } = require("react-toastify"); A.info(N, { toastId: "account_deactivated" }) } catch (A) { console.error("Failed to show deactivation toast", A) } a({ type: "LOGOUT" }) }; return window.addEventListener("accountDeactivated", k), () => { window.removeEventListener("accountDeactivated", k) } }, []), h.useEffect(() => { const k = E => { const C = E, { userIds: N, roleName: A } = C?.detail || {}, D = r.user?.id; if (N && D && N.includes(D)) { try { const { toast: I } = require("react-toastify"); I.error(`Your role "${A}" has been deactivated. You are being logged out for security.`, { toastId: "role_deactivated", autoClose: 5e3 }) } catch (I) { console.error("Failed to show role deactivation toast", I) } a({ type: "LOGOUT" }) } }; return window.addEventListener("roleDeactivated", k), () => { window.removeEventListener("roleDeactivated", k) } }, [r.user?.id]); const s = async k => { try { a({ type: "LOGIN_START" }); const E = await Vs.login(k); if (!E.success) { const C = E.message || "Invalid credentials"; throw a({ type: "LOGIN_FAILURE", payload: C }), new Error(C) } if (E.data) { const { accessToken: C, refreshToken: N, tokenExpiry: A, user: D } = E.data; localStorage.setItem("token", C), localStorage.setItem("refreshToken", N), localStorage.setItem("tokenExpiry", A), localStorage.setItem("userId", D.id.toString()), a({ type: "LOGIN_SUCCESS", payload: { user: D, accessToken: C, refreshToken: N, tokenExpiry: A } }) } return E } catch (E) { const C = E.message || E.response?.data?.message || "Login failed"; throw console.error("Login error:", E), a({ type: "LOGIN_FAILURE", payload: C }), E } }, n = async k => { try { a({ type: "REGISTER_START" }); const E = await Vs.register(k); return a({ type: "REGISTER_SUCCESS" }), E } catch (E) { const C = E.message || "Registration failed"; throw a({ type: "REGISTER_FAILURE", payload: C }), E } }, i = async () => { try { await Vs.logout() } catch (k) { console.error("Logout error:", k) } finally { a({ type: "LOGOUT" }) } }, o = async k => { try { return await Vs.forgotPassword(k) } catch (E) { throw E } }, c = async k => { try { return await Vs.resetPassword(k) } catch (E) { throw E } }, u = async k => { try { return await Vs.verifyEmail(k) } catch (E) { throw E } }, m = async () => { try { const k = await Vs.getProfile(); a({ type: "CHECK_AUTH_SUCCESS", payload: k.data.user }) } catch { a({ type: "CHECK_AUTH_FAILURE" }) } }, g = k => { a({ type: "UPDATE_USER", payload: k }) }, f = k => !r.user || !r.user.roles ? !1 : r.user.roles.some(C => { const N = (C.name || "").toLowerCase(); return N === "admin" || N === "super_admin" || N === "super admin" }) ? !0 : r.user.roles.some(C => C.permissions.some(N => N.key === k)), y = k => !r.user || !r.user.roles ? !1 : r.user.roles.some(E => E.name === k), p = k => Vs.validatePassword(k, r.passwordRequirements || void 0), b = k => Vs.calculatePasswordStrength(k), j = async () => Vs.autoLogin(), v = () => { a({ type: "CLEAR_ERROR" }) }; h.useEffect(() => { if (!r.isAuthenticated || !r.accessToken) return; const k = localStorage.getItem("tokenExpiry"); if (!k) return; const E = new Date(k), C = new Date, N = E.getTime() - C.getTime(), A = N - 300 * 1e3, D = N - 120 * 1e3, I = []; if (A > 0) { const $ = window.setTimeout(async () => { try { const B = await Vs.refreshToken(); a({ type: "TOKEN_REFRESHED", payload: B.data.accessToken }) } catch (B) { console.error("Token refresh failed:", B), a({ type: "TOKEN_EXPIRED" }) } }, A); I.push($) } if (D > 0) { const $ = window.setTimeout(() => { window.dispatchEvent(new CustomEvent("tokenExpired", { detail: { title: "Session expiring soon", message: "Your session will expire in about 2 minutes. Please save your work." } })) }, D); I.push($) } else N > 0 && N <= 120 * 1e3 ? window.dispatchEvent(new CustomEvent("tokenExpired", { detail: { title: "Session expiring soon", message: "Your session will expire in about 2 minutes. Please save your work." } })) : N <= 0 && a({ type: "TOKEN_EXPIRED" }); return () => { I.forEach($ => window.clearTimeout($)) } }, [r.accessToken, r.isAuthenticated]); const S = { ...r, login: s, register: n, logout: i, forgotPassword: o, resetPassword: c, verifyEmail: u, checkAuth: m, updateUser: g, hasPermission: f, hasRole: y, validatePassword: p, calculatePasswordStrength: b, autoLogin: j, clearError: v }; return t.jsx(BT.Provider, { value: S, children: e }) }, qT = h.createContext(void 0), HT = () => { const e = h.useContext(qT); if (e === void 0) throw new Error("useTheme must be used within a ThemeProvider"); return e }, R$ = ({ children: e }) => { const [r, a] = h.useState(() => { const n = localStorage.getItem("theme"); return n ? n === "dark" : window.matchMedia("(prefers-color-scheme: dark)").matches }); h.useEffect(() => { const n = window.document.documentElement; r ? (n.classList.add("dark"), localStorage.setItem("theme", "dark")) : (n.classList.remove("dark"), localStorage.setItem("theme", "light")) }, [r]); const s = () => { const n = window.document.documentElement; n.classList.add("disable-transitions"), a(!r), window.setTimeout(() => { n.classList.remove("disable-transitions") }, 100) }; return t.jsx(qT.Provider, { value: { isDark: r, toggleTheme: s }, children: e }) }, M$ = (e, r, a, s) => { const n = [a, { code: r, ...s || {} }]; if (e?.services?.logger?.forward) return e.services.logger.forward(n, "warn", "react-i18next::", !0); Dl(n[0]) && (n[0] = `react-i18next:: ${n[0]}`), e?.services?.logger?.warn ? e.services.logger.warn(...n) : console?.warn && console.warn(...n) }, g2 = {}, vb = (e, r, a, s) => { Dl(a) && g2[a] || (Dl(a) && (g2[a] = new Date), M$(e, r, a, s)) }, WT = (e, r) => () => { if (e.isInitialized) r(); else { const a = () => { setTimeout(() => { e.off("initialized", a) }, 0), r() }; e.on("initialized", a) } }, bb = (e, r, a) => { e.loadNamespaces(r, WT(e, a)) }, h2 = (e, r, a, s) => { if (Dl(a) && (a = [a]), e.options.preload && e.options.preload.indexOf(r) > -1) return bb(e, a, s); a.forEach(n => { e.options.ns.indexOf(n) < 0 && e.options.ns.push(n) }), e.loadLanguages(r, WT(e, s)) }, _$ = (e, r, a = {}) => !r.languages || !r.languages.length ? (vb(r, "NO_LANGUAGES", "i18n.languages were undefined or empty", { languages: r.languages }), !0) : r.hasLoadedNamespace(e, { lng: a.lng, precheck: (s, n) => { if (a.bindI18n && a.bindI18n.indexOf("languageChanging") > -1 && s.services.backendConnector.backend && s.isLanguageChangingTo && !n(s.isLanguageChangingTo, e)) return !1 } }), Dl = e => typeof e == "string", $$ = e => typeof e == "object" && e !== null, U$ = /&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g, F$ = { "&amp;": "&", "&#38;": "&", "&lt;": "<", "&#60;": "<", "&gt;": ">", "&#62;": ">", "&apos;": "'", "&#39;": "'", "&quot;": '"', "&#34;": '"', "&nbsp;": " ", "&#160;": " ", "&copy;": "", "&#169;": "", "&reg;": "", "&#174;": "", "&hellip;": "", "&#8230;": "", "&#x2F;": "/", "&#47;": "/" }, z$ = e => F$[e], B$ = e => e.replace(U$, z$); let wb = { bindI18n: "languageChanged", bindI18nStore: "", transEmptyNodeValue: "", transSupportBasicHtmlNodes: !0, transWrapTextNodes: "", transKeepBasicHtmlNodesFor: ["br", "strong", "i", "p"], useSuspense: !0, unescape: B$ }; const q$ = (e = {}) => { wb = { ...wb, ...e } }, H$ = () => wb; let VT; const W$ = e => { VT = e }, V$ = () => VT, G$ = { type: "3rdParty", init(e) { q$(e.options.react), W$(e) } }, K$ = h.createContext(); class Y$ { constructor() { this.usedNamespaces = {} } addUsedNamespaces(r) { r.forEach(a => { this.usedNamespaces[a] || (this.usedNamespaces[a] = !0) }) } getUsedNamespaces() { return Object.keys(this.usedNamespaces) } } const Q$ = (e, r) => { const a = h.useRef(); return h.useEffect(() => { a.current = e }, [e, r]), a.current }, GT = (e, r, a, s) => e.getFixedT(r, a, s), X$ = (e, r, a, s) => h.useCallback(GT(e, r, a, s), [e, r, a, s]), kn = (e, r = {}) => { const { i18n: a } = r, { i18n: s, defaultNS: n } = h.useContext(K$) || {}, i = a || s || V$(); if (i && !i.reportNamespaces && (i.reportNamespaces = new Y$), !i) { vb(i, "NO_I18NEXT_INSTANCE", "useTranslation: You will need to pass in an i18next instance by using initReactI18next"); const C = (A, D) => Dl(D) ? D : $$(D) && Dl(D.defaultValue) ? D.defaultValue : Array.isArray(A) ? A[A.length - 1] : A, N = [C, {}, !1]; return N.t = C, N.i18n = {}, N.ready = !1, N } i.options.react?.wait && vb(i, "DEPRECATED_OPTION", "useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour."); const o = { ...H$(), ...i.options.react, ...r }, { useSuspense: c, keyPrefix: u } = o; let m = n || i.options?.defaultNS; m = Dl(m) ? [m] : m || ["translation"], i.reportNamespaces.addUsedNamespaces?.(m); const g = (i.isInitialized || i.initializedStoreOnce) && m.every(C => _$(C, i, o)), f = X$(i, r.lng || null, o.nsMode === "fallback" ? m : m[0], u), y = () => f, p = () => GT(i, r.lng || null, o.nsMode === "fallback" ? m : m[0], u), [b, j] = h.useState(y); let v = m.join(); r.lng && (v = `${r.lng}${v}`); const S = Q$(v), k = h.useRef(!0); h.useEffect(() => { const { bindI18n: C, bindI18nStore: N } = o; k.current = !0, !g && !c && (r.lng ? h2(i, r.lng, m, () => { k.current && j(p) }) : bb(i, m, () => { k.current && j(p) })), g && S && S !== v && k.current && j(p); const A = () => { k.current && j(p) }; return C && i?.on(C, A), N && i?.store.on(N, A), () => { k.current = !1, i && C && C?.split(" ").forEach(D => i.off(D, A)), N && i && N.split(" ").forEach(D => i.store.off(D, A)) } }, [i, v]), h.useEffect(() => { k.current && g && j(y) }, [i, u, g]); const E = [b, i, g]; if (E.t = b, E.i18n = i, E.ready = g, g || !g && !c) return E; throw new Promise(C => { r.lng ? h2(i, r.lng, m, () => C()) : bb(i, m, () => C()) }) }, KT = h.createContext(void 0), Z$ = () => { const e = h.useContext(KT); if (!e) throw new Error("useLanguage must be used within a LanguageProvider"); return e }, J$ = ({ children: e }) => { const { i18n: r } = kn(), [a, s] = h.useState(r.language || "en"), n = [{ code: "en", name: "English", nativeName: "English" }, { code: "hi", name: "Hindi", nativeName: "" }, { code: "es", name: "Spanish", nativeName: "Espaol" }, { code: "fr", name: "French", nativeName: "Franais" }, { code: "de", name: "German", nativeName: "Deutsch" }, { code: "ar", name: "Arabic", nativeName: "" }, { code: "zh", name: "Chinese", nativeName: "" }, { code: "ja", name: "Japanese", nativeName: "" }, { code: "ko", name: "Korean", nativeName: "" }, { code: "pt", name: "Portuguese", nativeName: "Portugus" }], i = c => { r.changeLanguage(c), s(c), localStorage.setItem("i18nextLng", c) }; h.useEffect(() => { const c = localStorage.getItem("i18nextLng"); c && n.some(u => u.code === c) && i(c) }, []), h.useEffect(() => { s(r.language) }, [r.language]), h.useEffect(() => { const u = ["ar", "he", "fa", "ur"].includes(a); typeof document < "u" && (document.documentElement.setAttribute("dir", u ? "rtl" : "ltr"), document.documentElement.setAttribute("lang", a)) }, [a]); const o = { currentLanguage: a, changeLanguage: i, availableLanguages: n }; return t.jsx(KT.Provider, { value: o, children: e }) }; var YT = { color: void 0, size: void 0, className: void 0, style: void 0, attr: void 0 }, f2 = Je.createContext && Je.createContext(YT), e9 = ["attr", "size", "title"]; function t9(e, r) { if (e == null) return {}; var a = r9(e, r), s, n; if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (n = 0; n < i.length; n++)s = i[n], !(r.indexOf(s) >= 0) && Object.prototype.propertyIsEnumerable.call(e, s) && (a[s] = e[s]) } return a } function r9(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if (Object.prototype.hasOwnProperty.call(e, s)) { if (r.indexOf(s) >= 0) continue; a[s] = e[s] } return a } function Z0() { return Z0 = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) Object.prototype.hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Z0.apply(this, arguments) } function x2(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function J0(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? x2(Object(a), !0).forEach(function (s) { a9(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : x2(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function a9(e, r, a) { return r = s9(r), r in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function s9(e) { var r = n9(e, "string"); return typeof r == "symbol" ? r : r + "" } function n9(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function QT(e) { return e && e.map((r, a) => Je.createElement(r.tag, J0({ key: a }, r.attr), QT(r.child))) } function or(e) { return r => Je.createElement(i9, Z0({ attr: J0({}, e.attr) }, r), QT(e.child)) } function i9(e) { var r = a => { var { attr: s, size: n, title: i } = e, o = t9(e, e9), c = n || a.size || "1em", u; return a.className && (u = a.className), e.className && (u = (u ? u + " " : "") + e.className), Je.createElement("svg", Z0({ stroke: "currentColor", fill: "currentColor", strokeWidth: "0" }, a.attr, s, o, { className: u, style: J0(J0({ color: e.color || a.color }, a.style), e.style), height: c, width: c, xmlns: "http://www.w3.org/2000/svg" }), i && Je.createElement("title", null, i), e.children) }; return f2 !== void 0 ? Je.createElement(f2.Consumer, null, a => r(a)) : r(YT) } function fu(e) { return or({ attr: { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, child: [{ tag: "polyline", attr: { points: "22 12 18 12 15 21 9 3 6 12 2 12" }, child: [] }] })(e) } function ly(e) { return or({ attr: { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, child: [{ tag: "circle", attr: { cx: "12", cy: "12", r: "10" }, child: [] }, { tag: "line", attr: { x1: "12", y1: "8", x2: "12", y2: "12" }, child: [] }, { tag: "line", attr: { x1: "12", y1: "16", x2: "12.01", y2: "16" }, child: [] }] })(e) } function p2(e) { return or({ attr: { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, child: [{ tag: "path", attr: { d: "M22 11.08V12a10 10 0 1 1-5.93-9.14" }, child: [] }, { tag: "polyline", attr: { points: "22 4 12 14.01 9 11.01" }, child: [] }] })(e) } function y2(e) { return or({ attr: { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, child: [{ tag: "polyline", attr: { points: "9 11 12 14 22 4" }, child: [] }, { tag: "path", attr: { d: "M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" }, child: [] }] })(e) } function XT(e) { return or({ attr: { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, child: [{ tag: "circle", attr: { cx: "12", cy: "12", r: "10" }, child: [] }, { tag: "polyline", attr: { points: "12 6 12 12 16 14" }, child: [] }] })(e) } function v2(e) { return or({ attr: { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, child: [{ tag: "ellipse", attr: { cx: "12", cy: "5", rx: "9", ry: "3" }, child: [] }, { tag: "path", attr: { d: "M21 12c0 1.66-4 3-9 3s-9-1.34-9-3" }, child: [] }, { tag: "path", attr: { d: "M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5" }, child: [] }] })(e) } function Po(e) { return or({ attr: { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, child: [{ tag: "path", attr: { d: "M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" }, child: [] }, { tag: "path", attr: { d: "M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" }, child: [] }] })(e) } function o9(e) { return or({ attr: { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, child: [{ tag: "path", attr: { d: "M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" }, child: [] }, { tag: "polyline", attr: { points: "10 17 15 12 10 7" }, child: [] }, { tag: "line", attr: { x1: "15", y1: "12", x2: "3", y2: "12" }, child: [] }] })(e) } function l9(e) { return or({ attr: { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, child: [{ tag: "path", attr: { d: "M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" }, child: [] }, { tag: "polyline", attr: { points: "16 17 21 12 16 7" }, child: [] }, { tag: "line", attr: { x1: "21", y1: "12", x2: "9", y2: "12" }, child: [] }] })(e) } function pl(e) { return or({ attr: { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, child: [{ tag: "line", attr: { x1: "12", y1: "5", x2: "12", y2: "19" }, child: [] }, { tag: "line", attr: { x1: "5", y1: "12", x2: "19", y2: "12" }, child: [] }] })(e) } function c9(e) { return or({ attr: { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, child: [{ tag: "rect", attr: { x: "2", y: "2", width: "20", height: "8", rx: "2", ry: "2" }, child: [] }, { tag: "rect", attr: { x: "2", y: "14", width: "20", height: "8", rx: "2", ry: "2" }, child: [] }, { tag: "line", attr: { x1: "6", y1: "6", x2: "6.01", y2: "6" }, child: [] }, { tag: "line", attr: { x1: "6", y1: "18", x2: "6.01", y2: "18" }, child: [] }] })(e) } function d9(e) { return or({ attr: { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, child: [{ tag: "path", attr: { d: "M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" }, child: [] }] })(e) } function b2(e) { return or({ attr: { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, child: [{ tag: "polyline", attr: { points: "3 6 5 6 21 6" }, child: [] }, { tag: "path", attr: { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" }, child: [] }, { tag: "line", attr: { x1: "10", y1: "11", x2: "10", y2: "17" }, child: [] }, { tag: "line", attr: { x1: "14", y1: "11", x2: "14", y2: "17" }, child: [] }] })(e) } function u9(e) { return or({ attr: { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, child: [{ tag: "polyline", attr: { points: "23 6 13.5 15.5 8.5 10.5 1 18" }, child: [] }, { tag: "polyline", attr: { points: "17 6 23 6 23 12" }, child: [] }] })(e) } function cy(e) { return or({ attr: { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, child: [{ tag: "path", attr: { d: "M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" }, child: [] }, { tag: "circle", attr: { cx: "12", cy: "7", r: "4" }, child: [] }] })(e) } const m9 = e => ({ USER_REGISTRATION: cy, USER_LOGIN: o9, USER_LOGOUT: l9, ROLE_UPDATE: Po, PERMISSION_UPDATE: d9, LEAD_CREATED: pl, LEAD_UPDATED: Po, LEAD_DELETED: b2, LEAD_STATUS_CHANGED: Po, LEAD_ASSIGNED: cy, LEAD_CONVERTED: p2, LEAD_FOLLOW_UP_CREATED: XT, LEAD_FOLLOW_UP_COMPLETED: y2, TASK_CREATED: pl, TASK_UPDATED: Po, TASK_COMPLETED: y2, COMMUNICATION_LOGGED: fu, CONTACT_CREATED: cy, DEAL_CREATED: pl, DEAL_UPDATED: Po, DEAL_WON: p2, DEAL_LOST: ly, FILE_UPLOADED: pl, FILE_DELETED: b2, QUOTATION_CREATED: pl, QUOTATION_UPDATED: Po, QUOTATION_SENT: fu, INVOICE_CREATED: pl, INVOICE_UPDATED: Po, INVOICE_SENT: fu, NOTE_ADDED: pl, NOTE_UPDATED: Po, SYSTEM_BACKUP: v2, SYSTEM_MAINTENANCE: c9, SECURITY_ALERT: ly, DATABASE_MIGRATION: v2, API_CALL: fu, ERROR_LOG: ly })[e] || fu, g9 = e => ({ USER_REGISTRATION: "text-blue-600", USER_LOGIN: "text-green-600", USER_LOGOUT: "text-gray-600", ROLE_UPDATE: "text-orange-600", PERMISSION_UPDATE: "text-purple-600", LEAD_CREATED: "text-green-600", LEAD_UPDATED: "text-blue-600", LEAD_DELETED: "text-red-600", SYSTEM_BACKUP: "text-green-600", SYSTEM_MAINTENANCE: "text-yellow-600", SECURITY_ALERT: "text-red-600", DATABASE_MIGRATION: "text-purple-600", API_CALL: "text-blue-600", ERROR_LOG: "text-red-600" })[e] || "text-gray-600", h9 = e => { const r = new Date(e), s = Math.floor((new Date().getTime() - r.getTime()) / 1e3); if (s < 60) return `${s} sec ago`; if (s < 3600) return `${Math.floor(s / 60)} min ago`; if (s < 86400) { const n = Math.floor(s / 3600); return `${n} hour${n > 1 ? "s" : ""} ago` } else { const n = Math.floor(s / 86400); return `${n} day${n > 1 ? "s" : ""} ago` } }, Yw = e => ({ id: e.id, title: e.title, description: e.description, time: h9(e.createdAt), icon: m9(e.type), iconColor: e.iconColor || g9(e.type), tags: e.tags || [], user: e.user, type: e.type, createdAt: e.createdAt }); function ZT(e) { if (!e) return null; try { const r = e.split(".")[1]; if (!r) return null; const a = r.replace(/-/g, "+").replace(/_/g, "/"), s = decodeURIComponent(atob(a).split("").map(n => "%" + ("00" + n.charCodeAt(0).toString(16)).slice(-2)).join("")); return JSON.parse(s) } catch { return null } } const JT = h.createContext(void 0); let Qw = null; const w2 = e => { Qw = e }, f9 = () => { Qw?.start() }, x9 = () => { Qw?.stop() }, p9 = ({ children: e }) => { const [r, a] = h.useState(0), s = h.useCallback(() => { a(o => o + 1) }, []), n = h.useCallback(() => { a(o => Math.max(0, o - 1)) }, []); h.useEffect(() => (w2({ start: s, stop: n }), () => w2(null)), [s, n]); const i = h.useMemo(() => ({ isGlobalLoading: r > 0, activeRequests: r, showLoader: s, hideLoader: n }), [r, s, n]); return t.jsx(JT.Provider, { value: i, children: e }) }, y9 = () => { const e = h.useContext(JT); if (!e) throw new Error("useLoader must be used within a LoaderProvider"); return e }, ie = It.create({ baseURL: Yo, headers: { "Content-Type": "application/json" }, timeout: 3e4 }), v9 = e => { const r = e?.headers?.["X-Skip-Global-Loader"]; return r === !0 || r === "true" || e?.skipGlobalLoader === !0 }, b9 = e => (v9(e) || (f9(), e.__globalLoaderActive = !0), e), jb = e => { e && e.__globalLoaderActive && (x9(), e.__globalLoaderActive = !1) }; ie.interceptors.request.use(e => { b9(e); const r = localStorage.getItem(Ot.AUTH_TOKEN) || localStorage.getItem("token"), s = [us.AUTH.LOGIN, us.AUTH.REFRESH, us.HEALTH, "/api/auth/refresh-token"].some(n => e.url?.includes(n.replace("/api", ""))); if (r && !s) try { ZT(r), e.headers = { ...e.headers, Authorization: `Bearer ${r}` } } catch (n) { console.error("Error parsing JWT token:", n), localStorage.removeItem(Ot.AUTH_TOKEN), localStorage.removeItem("token"), localStorage.removeItem("tokenExpiry") } return e }, e => (console.error("Request interceptor error:", e), jb(e.config), Promise.reject(e))); ie.interceptors.response.use(e => (jb(e.config), e), e => { if (jb(e.config), console.error("API Error:", { status: e.response?.status, message: e.response?.data?.message, url: e.config?.url, method: e.config?.method, data: e.response?.data }), e.response?.status === 401 && (localStorage.removeItem(Ot.AUTH_TOKEN), localStorage.removeItem("tokenExpiry"), (e.response?.data?.tokenExpired || e.response?.data?.code === "TOKEN_EXPIRED") && window.dispatchEvent(new CustomEvent("tokenExpired"))), e.response?.status === 403) { const r = e.response?.data?.code, a = (e.response?.data?.message || "").toString(); if (r === "ACCOUNT_BLOCKED" || /blocked|deactivated|account is inactive|account is disabled/i.test(a)) { localStorage.removeItem(Ot.AUTH_TOKEN), localStorage.removeItem(Ot.REFRESH_TOKEN), localStorage.removeItem("tokenExpiry"), localStorage.removeItem(Ot.USER_DATA); try { window.dispatchEvent(new CustomEvent("accountDeactivated", { detail: { message: a, code: r } })) } catch { } } } return e.response || (console.error("Network error or server not responding"), e.message = "Network error. Please check your connection."), Promise.reject(e) }); const Ze = { get: async (e, r) => { try { return (await ie.get(e, r)).data } catch (a) { throw a } }, post: async (e, r, a) => { try { return (await ie.post(e, r, a)).data } catch (s) { throw s } }, put: async (e, r, a) => { try { return (await ie.put(e, r, a)).data } catch (s) { throw s } }, patch: async (e, r, a) => { try { return (await ie.patch(e, r, a)).data } catch (s) { throw s } }, delete: async (e, r) => { try { return (await ie.delete(e, r)).data } catch (a) { throw a } } }, Ln = async (e, r = 3, a = 1e3) => { for (let s = 0; s < r; s++)try { return await e() } catch (n) { if (n.response?.status === 429 && s < r - 1) { const i = a * Math.pow(2, s); console.log(`Rate limited, retrying in ${i}ms...`), await new Promise(o => setTimeout(o, i)); continue } throw n } }, ur = { getUsers: async e => { const r = new URLSearchParams; e?.search && r.append("search", e.search), e?.status && r.append("status", e.status), e?.roleId && r.append("roleId", e.roleId), e?.page && r.append("page", e.page.toString()), e?.limit && r.append("limit", e.limit.toString()); const a = r.toString(), s = a ? `/users?${a}` : "/users"; return (await ie.get(s)).data }, createUser: async e => Ln(async () => (await ie.post("/users", e)).data), updateUser: async (e, r) => Ln(async () => (await ie.put(`/users/${e}`, r)).data), deleteUser: async e => Ln(async () => (await ie.delete(`/users/${e}`)).data), updateProfile: async e => Ln(async () => (await ie.put("/users/profile", e)).data), uploadProfilePicture: async e => { const r = new FormData; return r.append("file", e), (await ie.post("/users/profile/avatar", r, { headers: { "Content-Type": "multipart/form-data" } })).data }, getProfile: async () => Ln(async () => (await ie.get("/users/profile")).data), changePassword: async e => Ln(async () => (await ie.put("/users/password", e)).data), changePasswordForNewUser: async e => Ln(async () => (await ie.put("/users/password/new-user", { newPassword: e })).data), getUserStats: async () => Ln(async () => (await ie.get("/users/stats")).data), getUserRoles: async e => Ln(async () => (await ie.get(`/users/${e}/roles`)).data), getDeletedUsers: async (e = 1, r = 10) => { const a = new URLSearchParams; return a.append("isDeleted", "true"), a.append("page", e.toString()), a.append("limit", r.toString()), (await ie.get(`/users?${a.toString()}`)).data }, restoreUser: async e => Ln(async () => { try { return (await ie.put(`/users/${e}/restore`)).data } catch (r) { throw console.error("User restore error:", { id: e, status: r.response?.status, message: r.response?.data?.message }), r } }), deleteUserPermanently: async e => Ln(async () => { try { return (await ie.delete(`/users/${e}/permanent`)).data } catch (r) { throw console.error("User permanent delete error:", { id: e, status: r.response?.status, message: r.response?.data?.message }), r } }) }, w9 = Object.freeze(Object.defineProperty({ __proto__: null, userService: ur }, Symbol.toStringTag, { value: "Module" })), dn = async (e, r = 3, a = 1e3) => { for (let s = 0; s < r; s++)try { return await e() } catch (n) { if (n.response?.status === 429 && s < r - 1) { const i = a * Math.pow(2, s); console.log(`Rate limited, retrying in ${i}ms...`), await new Promise(o => setTimeout(o, i)); continue } throw n } }, Yt = { getLeads: async (e = {}) => { const r = new URLSearchParams; return e.page && r.append("page", e.page.toString()), e.limit && r.append("limit", e.limit.toString()), e.status && r.append("status", e.status), e.email && r.append("email", e.email), typeof e.assignedTo == "number" && r.append("assignedTo", String(e.assignedTo)), e.search && e.search.toString().trim() !== "" && r.append("search", e.search.toString().trim()), (await ie.get(`${us.LEADS.BASE}?${r.toString()}`)).data }, getLeadById: async e => (await ie.get(`${us.LEADS.BASE}/${e}`)).data, createLead: async e => dn(async () => (await ie.post("/leads", e)).data), updateLead: async (e, r) => dn(async () => { try { return (await ie.put(`/leads/${e}`, r)).data } catch (a) { throw console.error("Lead update error:", { id: e, data: r, status: a.response?.status, message: a.response?.data?.message, errors: a.response?.data?.errors }), a } }), assignLead: async (e, r) => dn(async () => { try { return (await ie.put(`/leads/${e}`, { assignedTo: r ?? null })).data } catch (a) { throw console.error("Lead assign error:", { id: e, userId: r, status: a.response?.status, message: a.response?.data?.message }), a } }), transferLead: async (e, r, a) => dn(async () => { try { return (await ie.put(`/leads/${e}/transfer`, { newUserId: r ?? null, notes: a || "" })).data } catch (s) { throw console.error("Lead transfer error:", { id: e, newUserId: r, status: s.response?.status, message: s.response?.data?.message }), s } }), bulkAssignLeads: async (e, r) => dn(async () => { try { return (await ie.put("/leads/bulk/assign", { leadIds: e, newUserId: r ?? null })).data } catch (a) { throw console.error("Bulk assign leads error:", { leadIds: e, newUserId: r, status: a.response?.status, message: a.response?.data?.message }), a } }), updateLeadStatus: async (e, r) => dn(async () => { try { return (await ie.put(`/leads/${e}`, { status: r })).data } catch (a) { throw console.error("Lead status update error:", { id: e, status: r, httpStatus: a.response?.status, message: a.response?.data?.message }), a } }), deleteLead: async e => dn(async () => (await ie.delete(`/leads/${e}`)).data), getLeadStats: async () => (await ie.get("/leads/stats")).data, getDashboardKPIs: async (e, r, a, s = "all") => { const n = new URLSearchParams; return e && n.append("startDate", e), r && n.append("endDate", r), typeof a == "number" && n.append("userId", String(a)), n.append("scope", s), (await ie.get(`/analytics/dashboard/kpis?${n.toString()}`)).data }, convertLead: async (e, r) => dn(async () => { try { return (await ie.post(`/leads/${e}/convert`, r)).data } catch (a) { throw console.error("Lead conversion error:", { id: e, data: r, status: a.response?.status, message: a.response?.data?.message, errors: a.response?.data?.errors }), a } }), convertLeadForce: async (e, r) => dn(async () => { try { return (await ie.post(`/leads/${e}/convert?force=true`, r)).data } catch (a) { throw console.error("Lead conversion (force) error:", { id: e, data: r, status: a.response?.status, message: a.response?.data?.message, errors: a.response?.data?.errors }), a } }), undoConversion: async e => dn(async () => { try { return (await ie.post(`/leads/${e}/undo-conversion`)).data } catch (r) { throw console.error("Undo conversion error:", { leadId: e, status: r.response?.status, message: r.response?.data?.message }), r } }), getDeletedLeads: async (e = 1, r = 10) => { const a = new URLSearchParams; return a.append("isDeleted", "true"), a.append("page", e.toString()), a.append("limit", r.toString()), (await ie.get(`${us.LEADS.BASE}?${a.toString()}`)).data }, restoreLead: async e => dn(async () => { try { return (await ie.put(`/leads/${e}/restore`)).data } catch (r) { throw console.error("Lead restore error:", { id: e, status: r.response?.status, message: r.response?.data?.message }), r } }), deleteLeadPermanently: async e => dn(async () => { try { return (await ie.delete(`/leads/${e}/permanent`)).data } catch (r) { throw console.error("Lead permanent delete error:", { id: e, status: r.response?.status, message: r.response?.data?.message }), r } }) }; class j9 { async getDeals(r = 1, a = 10, s) { try { const n = new URLSearchParams({ page: r.toString(), limit: a.toString(), ...s && { search: s } }); return (await ie.get(`${us.DEALS.BASE}?${n}`)).data } catch (n) { throw console.error("Error fetching deals:", n), n } } async getDealById(r) { try { const s = (await ie.get(`${us.DEALS.BASE}/${r}`)).data, n = s?.data?.deal || s?.data || s; return { success: s?.success ?? !0, data: n, message: s?.message } } catch (a) { throw console.error("Error fetching deal:", a), a } } async createDeal(r) { try { return (await ie.post(us.DEALS.BASE, r)).data } catch (a) { throw console.error("Error creating deal:", a), a } } async updateDeal(r, a) { try { return (await ie.put(`${us.DEALS.BASE}/${r}`, a)).data } catch (s) { throw console.error("Error updating deal:", s), s } } async deleteDeal(r) { try { return (await ie.delete(`${us.DEALS.BASE}/${r}`)).data } catch (a) { throw console.error("Error deleting deal:", a), a } } async getDeal(r) { return this.getDealById(r) } async getDealStats() { try { return (await ie.get(us.DEALS.STATS)).data } catch (r) { throw console.error("Error fetching deal stats:", r), r } } async bulkExportDeals(r) { try { const a = new URLSearchParams; return r && a.append("search", r), (await ie.get(`${us.DEALS.BASE}/bulk/export?${a.toString()}`, { responseType: "blob" })).data } catch (a) { throw console.error("Error exporting deals:", a), a } } async bulkImportDeals(r) { try { const a = new FormData; return a.append("csvFile", r), (await ie.post(`${us.DEALS.BASE}/bulk/import`, a, { headers: { "Content-Type": "multipart/form-data" } })).data } catch (a) { throw console.error("Error importing deals:", a), a } } async bulkAssignDeals(r, a) { try { return (await ie.put(`${us.DEALS.BASE}/bulk/assign`, { dealIds: r, userId: a })).data } catch (s) { throw console.error("Error bulk assigning deals:", s), s } } } const ua = new j9, j2 = async (e, r = 3, a = 1e3) => { for (let s = 0; s < r; s++)try { return await e() } catch (n) { if (n.response?.status === 429 && s < r - 1) { const i = a * Math.pow(2, s); console.log(`Rate limited, retrying in ${i}ms...`), await new Promise(o => setTimeout(o, i)); continue } throw n } }, Xa = { getRoles: async (e = {}) => { const r = new URLSearchParams; e.search && r.append("search", e.search), e.status && r.append("status", e.status), e.page && r.append("page", e.page.toString()), e.limit && r.append("limit", e.limit.toString()); const a = r.toString(), s = a ? `/roles?${a}` : "/roles"; return (await ie.get(s)).data }, createRole: async e => { const r = { name: e.name, description: e.description ?? "", accessScope: e.accessScope, isActive: typeof e.isActive == "boolean" ? e.isActive : !0, permissionIds: Array.isArray(e.permissionIds) ? e.permissionIds : [] }; return (await ie.post("/roles", r)).data }, updateRole: async (e, r) => { const a = { name: r.name, description: r.description ?? "", accessScope: r.accessScope, isActive: typeof r.isActive == "boolean" ? r.isActive : void 0, permissionIds: Array.isArray(r.permissionIds) ? r.permissionIds : [] }; return (await ie.put(`/roles/${e}`, a)).data }, deleteRole: async e => (await ie.delete(`/roles/${e}`)).data, getUsersByRole: async e => { try { return (await ie.get(`/roles/${e}/users`)).data } catch (r) { return console.error("Error fetching users by role:", r), { success: !1, data: [] } } }, getPermissions: async () => (await ie.get("/permissions")).data, assignRoleToUser: async (e, r) => (await ie.put(`/users/${e}/role`, { roleIds: r })).data, getDeletedRoles: async (e = 1, r = 10) => { const a = new URLSearchParams; return a.append("isDeleted", "true"), a.append("page", e.toString()), a.append("limit", r.toString()), (await ie.get(`/roles?${a.toString()}`)).data }, restoreRole: async e => j2(async () => { try { return (await ie.put(`/roles/${e}/restore`)).data } catch (r) { throw console.error("Role restore error:", { id: e, status: r.response?.status, message: r.response?.data?.message }), r } }), deleteRolePermanently: async e => j2(async () => { try { return (await ie.delete(`/roles/${e}/permanent`)).data } catch (r) { throw console.error("Role permanent delete error:", { id: e, status: r.response?.status, message: r.response?.data?.message }), r } }) }, Bi = { getActivities: async (e = 1, r = 10, a) => { try { return (await ie.get("/activities", { params: { page: e, limit: r, ...a } })).data } catch (s) { throw console.error("Error fetching activities:", s), s } }, getRecentActivities: async (e = 5, r) => { try { const a = { limit: e }; return r && (a.userId = r), (await ie.get("/activities/recent", { params: a })).data } catch (a) { throw console.error("Error fetching recent activities:", a), a } }, getActivityStats: async () => { try { return (await ie.get("/activities/stats")).data } catch (e) { throw console.error("Error fetching activity stats:", e), e } }, createActivity: async e => { try { return (await ie.post("/activities", e)).data } catch (r) { throw console.error("Error creating activity:", r), r } }, getDeletedData: async (e = 1, r = 10, a) => { try { return (await ie.get("/activities/deleted-data", { params: { page: e, limit: r }, ...a?.skipLoader ? { headers: { "X-Skip-Global-Loader": "true" }, skipGlobalLoader: !0 } : {} })).data } catch (s) { throw console.error("Error fetching deleted data:", s), s } }, getActivitiesByLeadId: async (e, r = 1, a = 50) => { try { return (await ie.get(`/activities/lead/${e}`, { params: { page: r, limit: a } })).data } catch (s) { throw console.error("Error fetching lead activities:", s), s } } }, eD = h.createContext(void 0), N9 = { counts: { users: 0, leads: 0, deals: 0, roles: 0, trashUsers: 0, trashLeads: 0, trashRoles: 0 }, refreshCounts: async () => { }, refreshUsersCount: async () => { }, refreshLeadsCount: async () => { }, refreshDealsCount: async () => { }, refreshRolesCount: async () => { }, refreshTrashCounts: async () => { } }; let N2 = !1; const k9 = ({ children: e }) => { const [r, a] = h.useState({ users: 0, leads: 0, deals: 0, roles: 0, trashUsers: 0, trashLeads: 0, trashRoles: 0 }), { isAuthenticated: s, hasPermission: n } = mr(), i = async () => { if (s) try { const f = n("user.read"), y = n("lead.read"), p = n("deal.read"), b = n("role.read"), j = n("deleted.read"), [v, S, k, E, C] = await Promise.all([f ? ur.getUsers().catch(() => ({ data: { users: [] } })) : Promise.resolve({ data: { users: [] } }), y ? Yt.getLeads().catch(() => ({ data: { leads: [] } })) : Promise.resolve({ data: { leads: [] } }), p ? ua.getDeals().catch(N => (console.log("Deals API not available yet:", N.response?.status), { data: { deals: [] } })) : Promise.resolve({ data: { deals: [] } }), b ? Xa.getRoles().catch(() => ({ data: { roles: [] } })) : Promise.resolve({ data: { roles: [] } }), j ? Bi.getDeletedData(1, 1).catch(() => ({ data: { users: { total: 0 }, leads: { total: 0 }, roles: { total: 0 } } })) : Promise.resolve({ data: { users: { total: 0 }, leads: { total: 0 }, roles: { total: 0 } } })]); a({ users: v.data.users?.length || 0, leads: S.data.leads?.length || 0, deals: k.data.deals?.length || 0, roles: E.data.roles?.length || 0, trashUsers: C?.data?.users?.total ?? 0, trashLeads: C?.data?.leads?.total ?? 0, trashRoles: C?.data?.roles?.total ?? 0 }) } catch (f) { console.error("Error fetching counts:", f) } }, o = async () => { try { if (!s || !n("user.read")) return; const f = await ur.getUsers(); a(y => ({ ...y, users: f.data.users?.length || 0 })) } catch (f) { console.error("Error fetching users count:", f) } }, c = async () => { try { if (!s || !n("lead.read")) return; const f = await Yt.getLeads(); a(y => ({ ...y, leads: f.data.leads?.length || 0 })) } catch (f) { console.error("Error fetching leads count:", f) } }, u = async () => { try { if (!s || !n("deal.read")) return; const f = await ua.getDeals(); a(y => ({ ...y, deals: f.data.deals?.length || 0 })) } catch (f) { f.response?.status !== 404 && console.error("Error fetching deals count:", f) } }, m = async () => { try { if (!s || !n("role.read")) return; const f = await Xa.getRoles(); a(y => ({ ...y, roles: f.data.roles?.length || 0 })) } catch (f) { console.error("Error fetching roles count:", f) } }, g = async () => { try { if (!s || !n("deleted.read")) return; const f = await Bi.getDeletedData(1, 1, { skipLoader: !0 }); a(y => ({ ...y, trashUsers: f?.data?.users?.total ?? 0, trashLeads: f?.data?.leads?.total ?? 0, trashRoles: f?.data?.roles?.total ?? 0 })) } catch (f) { console.error("Error fetching trash counts:", f) } }; return h.useEffect(() => { s && i() }, [s]), t.jsx(eD.Provider, { value: { counts: r, refreshCounts: i, refreshUsersCount: o, refreshLeadsCount: c, refreshDealsCount: u, refreshRolesCount: m, refreshTrashCounts: g }, children: e }) }, Sn = () => { const e = h.useContext(eD); return e === void 0 ? (N2 || (console.error("useCounts called outside of CountsProvider. Returning default counters."), N2 = !0), N9) : e }; let S9 = class { baseUrl = "/business-settings"; async getCompanySettings() { return Ze.get(`${this.baseUrl}/company`) } async updateCompanySettings(r) { return Ze.put(`${this.baseUrl}/company`, r) } async uploadCompanyLogo(r) { const a = new FormData; return a.append("logo", r), Ze.post(`${this.baseUrl}/company/logo`, a, { headers: { "Content-Type": "multipart/form-data" } }) } async getCurrencySettings() { return Ze.get(`${this.baseUrl}/currency`) } async updateCurrencySettings(r) { return Ze.put(`${this.baseUrl}/currency`, r) } async getTaxSettings() { return Ze.get(`${this.baseUrl}/tax`) } async updateTaxSettings(r) { return Ze.put(`${this.baseUrl}/tax`, r) } async getExchangeRates() { return Ze.get(`${this.baseUrl}/currency/exchange-rates`) } async refreshExchangeRates() { return Ze.post(`${this.baseUrl}/currency/refresh-rates`) } async getLeadSources() { return Ze.get("/lead-sources") } async createLeadSource(r) { return Ze.post("/lead-sources", r) } async updateLeadSource(r, a) { return Ze.put(`/lead-sources/${r}`, a) } async deleteLeadSource(r) { return Ze.delete(`/lead-sources/${r}`) } async reorderLeadSources(r) { return Ze.put("/lead-sources/reorder", { sourceIds: r }) } async getLeadStatuses() { return Ze.get(`${this.baseUrl}/lead-statuses`) } async getDealStatuses() { return Ze.get(`${this.baseUrl}/deal-statuses`) } async createDealStatus(r) { return Ze.post(`${this.baseUrl}/deal-statuses`, r) } async updateDealStatus(r, a) { return Ze.put(`${this.baseUrl}/deal-statuses/${r}`, a) } async deleteDealStatus(r) { return Ze.delete(`${this.baseUrl}/deal-statuses/${r}`) } async getProductCategories() { return Ze.get(`${this.baseUrl}/product-categories`) } async createProductCategory(r) { return Ze.post(`${this.baseUrl}/product-categories`, r) } async updateProductCategory(r, a) { return Ze.put(`${this.baseUrl}/product-categories/${r}`, a) } async deleteProductCategory(r) { return Ze.delete(`${this.baseUrl}/product-categories/${r}`) } async getPriceLists() { return Ze.get(`${this.baseUrl}/price-lists`) } async createPriceList(r) { return Ze.post(`${this.baseUrl}/price-lists`, r) } async updatePriceList(r, a) { return Ze.put(`${this.baseUrl}/price-lists/${r}`, a) } async deletePriceList(r) { return Ze.delete(`${this.baseUrl}/price-lists/${r}`) } async getEmailTemplates() { return Ze.get(`${this.baseUrl}/email-templates`) } async getEmailTemplate(r) { return Ze.get(`${this.baseUrl}/email-templates/${r}`) } async createEmailTemplate(r) { return Ze.post(`${this.baseUrl}/email-templates`, r) } async updateEmailTemplate(r, a) { return Ze.put(`${this.baseUrl}/email-templates/${r}`, a) } async deleteEmailTemplate(r) { return Ze.delete(`${this.baseUrl}/email-templates/${r}`) } async duplicateEmailTemplate(r) { return Ze.post(`${this.baseUrl}/email-templates/${r}/duplicate`) } async previewEmailTemplate(r, a) { return Ze.post(`${this.baseUrl}/email-templates/${r}/preview`, a) } async getQuotationTemplates() { return Ze.get(`${this.baseUrl}/quotation-templates`) } async createQuotationTemplate(r) { return Ze.post(`${this.baseUrl}/quotation-templates`, r) } async updateQuotationTemplate(r, a) { return Ze.put(`${this.baseUrl}/quotation-templates/${r}`, a) } async deleteQuotationTemplate(r) { return Ze.delete(`${this.baseUrl}/quotation-templates/${r}`) } async setDefaultQuotationTemplate(r) { return Ze.put(`${this.baseUrl}/quotation-templates/${r}/set-default`) } async getInvoiceTemplates() { return Ze.get(`${this.baseUrl}/invoice-templates`) } async createInvoiceTemplate(r) { return Ze.post(`${this.baseUrl}/invoice-templates`, r) } async updateInvoiceTemplate(r, a) { return Ze.put(`${this.baseUrl}/invoice-templates/${r}`, a) } async deleteInvoiceTemplate(r) { return Ze.delete(`${this.baseUrl}/invoice-templates/${r}`) } async setDefaultInvoiceTemplate(r) { return Ze.put(`${this.baseUrl}/invoice-templates/${r}/set-default`) } async getNotificationSettings() { return Ze.get(`${this.baseUrl}/notifications`) } async updateNotificationSettings(r) { return Ze.put(`${this.baseUrl}/notifications`, r) } async testNotification(r, a) { return Ze.post(`${this.baseUrl}/notifications/test`, { channel: r, recipient: a }) } async getAutomationRules() { return Ze.get(`${this.baseUrl}/automation-rules`) } async getAutomationRule(r) { return Ze.get(`${this.baseUrl}/automation-rules/${r}`) } async createAutomationRule(r) { return Ze.post(`${this.baseUrl}/automation-rules`, r) } async updateAutomationRule(r, a) { return Ze.put(`${this.baseUrl}/automation-rules/${r}`, a) } async deleteAutomationRule(r) { return Ze.delete(`${this.baseUrl}/automation-rules/${r}`) } async toggleAutomationRule(r) { return Ze.put(`${this.baseUrl}/automation-rules/${r}/toggle`) } async testAutomationRule(r, a) { return Ze.post(`${this.baseUrl}/automation-rules/${r}/test`, a) } async getIntegrationSettings() { return Ze.get(`${this.baseUrl}/integrations`) } async updateIntegrationSettings(r) { return Ze.put(`${this.baseUrl}/integrations`, r) } async testIntegration(r) { return Ze.post(`${this.baseUrl}/integrations/${r}/test`) } async syncIntegrationData(r) { return Ze.post(`${this.baseUrl}/integrations/${r}/sync`) } async getPaymentGatewaySettings() { return Ze.get(`${this.baseUrl}/payment-gateways`) } async updatePaymentGatewaySettings(r) { return Ze.put(`${this.baseUrl}/payment-gateways`, r) } async testPaymentGateway(r) { return Ze.post(`${this.baseUrl}/payment-gateways/${r}/test`) } async exportSettings(r) { return Ze.post(`${this.baseUrl}/export`, { categories: r }) } async importSettings(r) { const a = new FormData; return a.append("settings", r), Ze.post(`${this.baseUrl}/import`, a, { headers: { "Content-Type": "multipart/form-data" } }) } async resetSettings(r) { return Ze.post(`${this.baseUrl}/reset`, { categories: r }) } async getSettingsHealth() { return Ze.get(`${this.baseUrl}/health`) } async getAllBusinessSettings() { return Ze.get(`${this.baseUrl}/all`) } }; const Ka = new S9; function tD(e) { var r, a, s = ""; if (typeof e == "string" || typeof e == "number") s += e; else if (typeof e == "object") if (Array.isArray(e)) for (r = 0; r < e.length; r++)e[r] && (a = tD(e[r])) && (s && (s += " "), s += a); else for (r in e) e[r] && (s && (s += " "), s += r); return s } function _o() { for (var e, r, a = 0, s = ""; a < arguments.length;)(e = arguments[a++]) && (r = tD(e)) && (s && (s += " "), s += r); return s } const _u = e => typeof e == "number" && !isNaN(e), zl = e => typeof e == "string", Os = e => typeof e == "function", U0 = e => zl(e) || Os(e) ? e : null, dy = e => h.isValidElement(e) || zl(e) || Os(e) || _u(e); function C9(e, r, a) { a === void 0 && (a = 300); const { scrollHeight: s, style: n } = e; requestAnimationFrame(() => { n.minHeight = "initial", n.height = s + "px", n.transition = `all ${a}ms`, requestAnimationFrame(() => { n.height = "0", n.padding = "0", n.margin = "0", setTimeout(r, a) }) }) } function pf(e) { let { enter: r, exit: a, appendPosition: s = !1, collapse: n = !0, collapseDuration: i = 300 } = e; return function (o) { let { children: c, position: u, preventExitTransition: m, done: g, nodeRef: f, isIn: y } = o; const p = s ? `${r}--${u}` : r, b = s ? `${a}--${u}` : a, j = h.useRef(0); return h.useLayoutEffect(() => { const v = f.current, S = p.split(" "), k = E => { E.target === f.current && (v.dispatchEvent(new Event("d")), v.removeEventListener("animationend", k), v.removeEventListener("animationcancel", k), j.current === 0 && E.type !== "animationcancel" && v.classList.remove(...S)) }; v.classList.add(...S), v.addEventListener("animationend", k), v.addEventListener("animationcancel", k) }, []), h.useEffect(() => { const v = f.current, S = () => { v.removeEventListener("animationend", S), n ? C9(v, g, i) : g() }; y || (m ? S() : (j.current = 1, v.className += ` ${b}`, v.addEventListener("animationend", S))) }, [y]), Je.createElement(Je.Fragment, null, c) } } function k2(e, r) { return e != null ? { content: e.content, containerId: e.props.containerId, id: e.props.toastId, theme: e.props.theme, type: e.props.type, data: e.props.data || {}, isLoading: e.props.isLoading, icon: e.props.icon, status: r } : {} } const pn = { list: new Map, emitQueue: new Map, on(e, r) { return this.list.has(e) || this.list.set(e, []), this.list.get(e).push(r), this }, off(e, r) { if (r) { const a = this.list.get(e).filter(s => s !== r); return this.list.set(e, a), this } return this.list.delete(e), this }, cancelEmit(e) { const r = this.emitQueue.get(e); return r && (r.forEach(clearTimeout), this.emitQueue.delete(e)), this }, emit(e) { this.list.has(e) && this.list.get(e).forEach(r => { const a = setTimeout(() => { r(...[].slice.call(arguments, 1)) }, 0); this.emitQueue.has(e) || this.emitQueue.set(e, []), this.emitQueue.get(e).push(a) }) } }, d0 = e => { let { theme: r, type: a, ...s } = e; return Je.createElement("svg", { viewBox: "0 0 24 24", width: "100%", height: "100%", fill: r === "colored" ? "currentColor" : `var(--toastify-icon-color-${a})`, ...s }) }, uy = { info: function (e) { return Je.createElement(d0, { ...e }, Je.createElement("path", { d: "M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z" })) }, warning: function (e) { return Je.createElement(d0, { ...e }, Je.createElement("path", { d: "M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z" })) }, success: function (e) { return Je.createElement(d0, { ...e }, Je.createElement("path", { d: "M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z" })) }, error: function (e) { return Je.createElement(d0, { ...e }, Je.createElement("path", { d: "M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z" })) }, spinner: function () { return Je.createElement("div", { className: "Toastify__spinner" }) } }; function E9(e) { const [, r] = h.useReducer(p => p + 1, 0), [a, s] = h.useState([]), n = h.useRef(null), i = h.useRef(new Map).current, o = p => a.indexOf(p) !== -1, c = h.useRef({ toastKey: 1, displayedToast: 0, count: 0, queue: [], props: e, containerId: null, isToastActive: o, getToast: p => i.get(p) }).current; function u(p) { let { containerId: b } = p; const { limit: j } = c.props; !j || b && c.containerId !== b || (c.count -= c.queue.length, c.queue = []) } function m(p) { s(b => p == null ? [] : b.filter(j => j !== p)) } function g() { const { toastContent: p, toastProps: b, staleId: j } = c.queue.shift(); y(p, b, j) } function f(p, b) { let { delay: j, staleId: v, ...S } = b; if (!dy(p) || (function (M) { return !n.current || c.props.enableMultiContainer && M.containerId !== c.props.containerId || i.has(M.toastId) && M.updateId == null })(S)) return; const { toastId: k, updateId: E, data: C } = S, { props: N } = c, A = () => m(k), D = E == null; D && c.count++; const I = { ...N, style: N.toastStyle, key: c.toastKey++, ...Object.fromEntries(Object.entries(S).filter(M => { let [q, V] = M; return V != null })), toastId: k, updateId: E, data: C, closeToast: A, isIn: !1, className: U0(S.className || N.toastClassName), bodyClassName: U0(S.bodyClassName || N.bodyClassName), progressClassName: U0(S.progressClassName || N.progressClassName), autoClose: !S.isLoading && ($ = S.autoClose, B = N.autoClose, $ === !1 || _u($) && $ > 0 ? $ : B), deleteToast() { const M = k2(i.get(k), "removed"); i.delete(k), pn.emit(4, M); const q = c.queue.length; if (c.count = k == null ? c.count - c.displayedToast : c.count - 1, c.count < 0 && (c.count = 0), q > 0) { const V = k == null ? c.props.limit : 1; if (q === 1 || V === 1) c.displayedToast++, g(); else { const X = V > q ? q : V; c.displayedToast = X; for (let se = 0; se < X; se++)g() } } else r() } }; var $, B; I.iconOut = (function (M) { let { theme: q, type: V, isLoading: X, icon: se } = M, le = null; const ee = { theme: q, type: V }; return se === !1 || (Os(se) ? le = se(ee) : h.isValidElement(se) ? le = h.cloneElement(se, ee) : zl(se) || _u(se) ? le = se : X ? le = uy.spinner() : (L => L in uy)(V) && (le = uy[V](ee))), le })(I), Os(S.onOpen) && (I.onOpen = S.onOpen), Os(S.onClose) && (I.onClose = S.onClose), I.closeButton = N.closeButton, S.closeButton === !1 || dy(S.closeButton) ? I.closeButton = S.closeButton : S.closeButton === !0 && (I.closeButton = !dy(N.closeButton) || N.closeButton); let W = p; h.isValidElement(p) && !zl(p.type) ? W = h.cloneElement(p, { closeToast: A, toastProps: I, data: C }) : Os(p) && (W = p({ closeToast: A, toastProps: I, data: C })), N.limit && N.limit > 0 && c.count > N.limit && D ? c.queue.push({ toastContent: W, toastProps: I, staleId: v }) : _u(j) ? setTimeout(() => { y(W, I, v) }, j) : y(W, I, v) } function y(p, b, j) { const { toastId: v } = b; j && i.delete(j); const S = { content: p, props: b }; i.set(v, S), s(k => [...k, v].filter(E => E !== j)), pn.emit(4, k2(S, S.props.updateId == null ? "added" : "updated")) } return h.useEffect(() => (c.containerId = e.containerId, pn.cancelEmit(3).on(0, f).on(1, p => n.current && m(p)).on(5, u).emit(2, c), () => { i.clear(), pn.emit(3, c) }), []), h.useEffect(() => { c.props = e, c.isToastActive = o, c.displayedToast = a.length }), { getToastToRender: function (p) { const b = new Map, j = Array.from(i.values()); return e.newestOnTop && j.reverse(), j.forEach(v => { const { position: S } = v.props; b.has(S) || b.set(S, []), b.get(S).push(v) }), Array.from(b, v => p(v[0], v[1])) }, containerRef: n, isToastActive: o } } function S2(e) { return e.targetTouches && e.targetTouches.length >= 1 ? e.targetTouches[0].clientX : e.clientX } function C2(e) { return e.targetTouches && e.targetTouches.length >= 1 ? e.targetTouches[0].clientY : e.clientY } function A9(e) { const [r, a] = h.useState(!1), [s, n] = h.useState(!1), i = h.useRef(null), o = h.useRef({ start: 0, x: 0, y: 0, delta: 0, removalDistance: 0, canCloseOnClick: !0, canDrag: !1, boundingRect: null, didMove: !1 }).current, c = h.useRef(e), { autoClose: u, pauseOnHover: m, closeToast: g, onClick: f, closeOnClick: y } = e; function p(C) { if (e.draggable) { C.nativeEvent.type === "touchstart" && C.nativeEvent.preventDefault(), o.didMove = !1, document.addEventListener("mousemove", S), document.addEventListener("mouseup", k), document.addEventListener("touchmove", S), document.addEventListener("touchend", k); const N = i.current; o.canCloseOnClick = !0, o.canDrag = !0, o.boundingRect = N.getBoundingClientRect(), N.style.transition = "", o.x = S2(C.nativeEvent), o.y = C2(C.nativeEvent), e.draggableDirection === "x" ? (o.start = o.x, o.removalDistance = N.offsetWidth * (e.draggablePercent / 100)) : (o.start = o.y, o.removalDistance = N.offsetHeight * (e.draggablePercent === 80 ? 1.5 * e.draggablePercent : e.draggablePercent / 100)) } } function b(C) { if (o.boundingRect) { const { top: N, bottom: A, left: D, right: I } = o.boundingRect; C.nativeEvent.type !== "touchend" && e.pauseOnHover && o.x >= D && o.x <= I && o.y >= N && o.y <= A ? v() : j() } } function j() { a(!0) } function v() { a(!1) } function S(C) { const N = i.current; o.canDrag && N && (o.didMove = !0, r && v(), o.x = S2(C), o.y = C2(C), o.delta = e.draggableDirection === "x" ? o.x - o.start : o.y - o.start, o.start !== o.x && (o.canCloseOnClick = !1), N.style.transform = `translate${e.draggableDirection}(${o.delta}px)`, N.style.opacity = "" + (1 - Math.abs(o.delta / o.removalDistance))) } function k() { document.removeEventListener("mousemove", S), document.removeEventListener("mouseup", k), document.removeEventListener("touchmove", S), document.removeEventListener("touchend", k); const C = i.current; if (o.canDrag && o.didMove && C) { if (o.canDrag = !1, Math.abs(o.delta) > o.removalDistance) return n(!0), void e.closeToast(); C.style.transition = "transform 0.2s, opacity 0.2s", C.style.transform = `translate${e.draggableDirection}(0)`, C.style.opacity = "1" } } h.useEffect(() => { c.current = e }), h.useEffect(() => (i.current && i.current.addEventListener("d", j, { once: !0 }), Os(e.onOpen) && e.onOpen(h.isValidElement(e.children) && e.children.props), () => { const C = c.current; Os(C.onClose) && C.onClose(h.isValidElement(C.children) && C.children.props) }), []), h.useEffect(() => (e.pauseOnFocusLoss && (document.hasFocus() || v(), window.addEventListener("focus", j), window.addEventListener("blur", v)), () => { e.pauseOnFocusLoss && (window.removeEventListener("focus", j), window.removeEventListener("blur", v)) }), [e.pauseOnFocusLoss]); const E = { onMouseDown: p, onTouchStart: p, onMouseUp: b, onTouchEnd: b }; return u && m && (E.onMouseEnter = v, E.onMouseLeave = j), y && (E.onClick = C => { f && f(C), o.canCloseOnClick && g() }), { playToast: j, pauseToast: v, isRunning: r, preventExitTransition: s, toastRef: i, eventHandlers: E } } function rD(e) { let { closeToast: r, theme: a, ariaLabel: s = "close" } = e; return Je.createElement("button", { className: `Toastify__close-button Toastify__close-button--${a}`, type: "button", onClick: n => { n.stopPropagation(), r(n) }, "aria-label": s }, Je.createElement("svg", { "aria-hidden": "true", viewBox: "0 0 14 16" }, Je.createElement("path", { fillRule: "evenodd", d: "M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z" }))) } function P9(e) { let { delay: r, isRunning: a, closeToast: s, type: n = "default", hide: i, className: o, style: c, controlledProgress: u, progress: m, rtl: g, isIn: f, theme: y } = e; const p = i || u && m === 0, b = { ...c, animationDuration: `${r}ms`, animationPlayState: a ? "running" : "paused", opacity: p ? 0 : 1 }; u && (b.transform = `scaleX(${m})`); const j = _o("Toastify__progress-bar", u ? "Toastify__progress-bar--controlled" : "Toastify__progress-bar--animated", `Toastify__progress-bar-theme--${y}`, `Toastify__progress-bar--${n}`, { "Toastify__progress-bar--rtl": g }), v = Os(o) ? o({ rtl: g, type: n, defaultClassName: j }) : _o(j, o); return Je.createElement("div", { role: "progressbar", "aria-hidden": p ? "true" : "false", "aria-label": "notification timer", className: v, style: b, [u && m >= 1 ? "onTransitionEnd" : "onAnimationEnd"]: u && m < 1 ? null : () => { f && s() } }) } const T9 = e => { const { isRunning: r, preventExitTransition: a, toastRef: s, eventHandlers: n } = A9(e), { closeButton: i, children: o, autoClose: c, onClick: u, type: m, hideProgressBar: g, closeToast: f, transition: y, position: p, className: b, style: j, bodyClassName: v, bodyStyle: S, progressClassName: k, progressStyle: E, updateId: C, role: N, progress: A, rtl: D, toastId: I, deleteToast: $, isIn: B, isLoading: W, iconOut: M, closeOnClick: q, theme: V } = e, X = _o("Toastify__toast", `Toastify__toast-theme--${V}`, `Toastify__toast--${m}`, { "Toastify__toast--rtl": D }, { "Toastify__toast--close-on-click": q }), se = Os(b) ? b({ rtl: D, position: p, type: m, defaultClassName: X }) : _o(X, b), le = !!A || !c, ee = { closeToast: f, type: m, theme: V }; let L = null; return i === !1 || (L = Os(i) ? i(ee) : h.isValidElement(i) ? h.cloneElement(i, ee) : rD(ee)), Je.createElement(y, { isIn: B, done: $, position: p, preventExitTransition: a, nodeRef: s }, Je.createElement("div", { id: I, onClick: u, className: se, ...n, style: j, ref: s }, Je.createElement("div", { ...B && { role: N }, className: Os(v) ? v({ type: m }) : _o("Toastify__toast-body", v), style: S }, M != null && Je.createElement("div", { className: _o("Toastify__toast-icon", { "Toastify--animate-icon Toastify__zoom-enter": !W }) }, M), Je.createElement("div", null, o)), L, Je.createElement(P9, { ...C && !le ? { key: `pb-${C}` } : {}, rtl: D, theme: V, delay: c, isRunning: r, isIn: B, closeToast: f, hide: g, type: m, style: E, className: k, controlledProgress: le, progress: A || 0 }))) }, yf = function (e, r) { return r === void 0 && (r = !1), { enter: `Toastify--animate Toastify__${e}-enter`, exit: `Toastify--animate Toastify__${e}-exit`, appendPosition: r } }, D9 = pf(yf("bounce", !0)); pf(yf("slide", !0)); pf(yf("zoom")); pf(yf("flip")); const eh = h.forwardRef((e, r) => { const { getToastToRender: a, containerRef: s, isToastActive: n } = E9(e), { className: i, style: o, rtl: c, containerId: u } = e; function m(g) { const f = _o("Toastify__toast-container", `Toastify__toast-container--${g}`, { "Toastify__toast-container--rtl": c }); return Os(i) ? i({ position: g, rtl: c, defaultClassName: f }) : _o(f, U0(i)) } return h.useEffect(() => { r && (r.current = s.current) }, []), Je.createElement("div", { ref: s, className: "Toastify", id: u }, a((g, f) => { const y = f.length ? { ...o } : { ...o, pointerEvents: "none" }; return Je.createElement("div", { className: m(g), style: y, key: `container-${g}` }, f.map((p, b) => { let { content: j, props: v } = p; return Je.createElement(T9, { ...v, isIn: n(v.toastId), style: { ...v.style, "--nth": b + 1, "--len": f.length }, key: `toast-${v.key}` }, j) })) })) }); eh.displayName = "ToastContainer", eh.defaultProps = { position: "top-right", transition: D9, autoClose: 5e3, closeButton: rD, pauseOnHover: !0, pauseOnFocusLoss: !0, closeOnClick: !0, draggable: !0, draggablePercent: 80, draggableDirection: "x", role: "alert", theme: "light" }; let my, vl = new Map, Ou = [], O9 = 1; function aD() { return "" + O9++ } function I9(e) { return e && (zl(e.toastId) || _u(e.toastId)) ? e.toastId : aD() } function $u(e, r) { return vl.size > 0 ? pn.emit(0, e, r) : Ou.push({ content: e, options: r }), r.toastId } function th(e, r) { return { ...r, type: r && r.type || e, toastId: I9(r) } } function u0(e) { return (r, a) => $u(r, th(e, a)) } function R(e, r) { return $u(e, th("default", r)) } R.loading = (e, r) => $u(e, th("default", { isLoading: !0, autoClose: !1, closeOnClick: !1, closeButton: !1, draggable: !1, ...r })), R.promise = function (e, r, a) { let s, { pending: n, error: i, success: o } = r; n && (s = zl(n) ? R.loading(n, a) : R.loading(n.render, { ...a, ...n })); const c = { isLoading: null, autoClose: null, closeOnClick: null, closeButton: null, draggable: null }, u = (g, f, y) => { if (f == null) return void R.dismiss(s); const p = { type: g, ...c, ...a, data: y }, b = zl(f) ? { render: f } : f; return s ? R.update(s, { ...p, ...b }) : R(b.render, { ...p, ...b }), y }, m = Os(e) ? e() : e; return m.then(g => u("success", o, g)).catch(g => u("error", i, g)), m }, R.success = u0("success"), R.info = u0("info"), R.error = u0("error"), R.warning = u0("warning"), R.warn = R.warning, R.dark = (e, r) => $u(e, th("default", { theme: "dark", ...r })), R.dismiss = e => { vl.size > 0 ? pn.emit(1, e) : Ou = Ou.filter(r => e != null && r.options.toastId !== e) }, R.clearWaitingQueue = function (e) { return e === void 0 && (e = {}), pn.emit(5, e) }, R.isActive = e => { let r = !1; return vl.forEach(a => { a.isToastActive && a.isToastActive(e) && (r = !0) }), r }, R.update = function (e, r) { r === void 0 && (r = {}), setTimeout(() => { const a = (function (s, n) { let { containerId: i } = n; const o = vl.get(i || my); return o && o.getToast(s) })(e, r); if (a) { const { props: s, content: n } = a, i = { delay: 100, ...s, ...r, toastId: r.toastId || e, updateId: aD() }; i.toastId !== e && (i.staleId = e); const o = i.render || n; delete i.render, $u(o, i) } }, 0) }, R.done = e => { R.update(e, { progress: 1 }) }, R.onChange = e => (pn.on(4, e), () => { pn.off(4, e) }), R.POSITION = { TOP_LEFT: "top-left", TOP_RIGHT: "top-right", TOP_CENTER: "top-center", BOTTOM_LEFT: "bottom-left", BOTTOM_RIGHT: "bottom-right", BOTTOM_CENTER: "bottom-center" }, R.TYPE = { INFO: "info", SUCCESS: "success", WARNING: "warning", ERROR: "error", DEFAULT: "default" }, pn.on(2, e => { my = e.containerId || e, vl.set(my, e), Ou.forEach(r => { pn.emit(0, r.content, r.options) }), Ou = [] }).on(3, e => { vl.delete(e.containerId || e), vl.size === 0 && pn.off(0).off(1).off(5) }); const sD = h.createContext(void 0), L9 = ({ children: e }) => { const [r, a] = h.useState(null), [s, n] = h.useState(null), [i, o] = h.useState(null), [c, u] = h.useState(null), [m, g] = h.useState([]), [f, y] = h.useState([]), [p, b] = h.useState([]), [j, v] = h.useState(!0), [S, k] = h.useState(!1), { isAuthenticated: E } = mr(), C = async () => { try { v(!0); try { const J = (await Ka.getAllBusinessSettings()).data; J && (a(J), n(J.company || xl.company), o(J.currency || xl.currency), u(J.tax || xl.tax), g(J.leadSources || []), y(J.leadStatuses || []), b(J.dealStatuses || [])) } catch (Z) { console.error("Failed to load all settings, falling back to individual calls", Z), await N() } k(!0) } catch (Z) { console.error("Failed to initialize business settings:", Z), n(xl.company), o(xl.currency), u(xl.tax), g(xl.leadSources.map((J, te) => ({ id: `default-${te}`, name: J, description: "", color: "#6B7280", isActive: !0, sortOrder: te }))), y([]), b([]) } finally { v(!1) } }, N = async () => { const Z = [Ka.getCompanySettings().then(J => n(J.data)), Ka.getCurrencySettings().then(J => o(J.data)), Ka.getTaxSettings().then(J => u(J.data)), Ka.getLeadSources().then(J => g(J.data)), Ka.getLeadStatuses().then(J => y(J.data)), Ka.getDealStatuses().then(J => b(J.data))]; await Promise.allSettled(Z) }; h.useEffect(() => { E && C() }, [E]); const K = { businessSettings: r, companySettings: s, currencySettings: i, taxSettings: c, leadSources: m, leadStatuses: f, dealStatuses: p, isLoading: j, isInitialized: S, refreshBusinessSettings: async () => { await C() }, updateCompanySettings: async Z => { try { const J = await Ka.updateCompanySettings(Z); n(J.data), R.success("Company settings updated successfully") } catch (J) { throw console.error("Failed to update company settings:", J), R.error("Failed to update company settings"), J } }, updateCurrencySettings: async Z => { try { const J = await Ka.updateCurrencySettings(Z); o(J.data), R.success("Currency settings updated successfully") } catch (J) { throw console.error("Failed to update currency settings:", J), R.error("Failed to update currency settings"), J } }, updateTaxSettings: async Z => { try { const J = await Ka.updateTaxSettings(Z); u(J.data), R.success("Tax settings updated successfully") } catch (J) { throw console.error("Failed to update tax settings:", J), R.error("Failed to update tax settings"), J } }, addLeadSource: async Z => { try { const J = await Ka.createLeadSource(Z), te = J.data || J; g(G => [...G, te]), R.success("Lead source added successfully") } catch (J) { throw console.error("Failed to add lead source:", J), R.error("Failed to add lead source"), J } }, updateLeadSource: async (Z, J) => { try { const te = await Ka.updateLeadSource(Z, J), G = te.data || te; g(de => de.map(Te => Te.id === Z ? G : Te)), R.success("Lead source updated successfully") } catch (te) { throw console.error("Failed to update lead source:", te), R.error("Failed to update lead source"), te } }, deleteLeadSource: async Z => { try { await Ka.deleteLeadSource(Z), g(J => J.filter(te => te.id !== Z)), R.success("Lead source deleted successfully") } catch (J) { throw console.error("Failed to delete lead source:", J), R.error("Failed to delete lead source"), J } }, reorderLeadSources: async Z => { try { const J = await Ka.reorderLeadSources(Z); g(J.data), R.success("Lead sources reordered successfully") } catch (J) { throw console.error("Failed to reorder lead sources:", J), R.error("Failed to reorder lead sources"), J } }, getLeadStatuses: () => f, getDealStages: () => p, addDealStatus: async Z => { try { const J = await Ka.createDealStatus(Z); b(te => [...te, J.data]), R.success("Deal status added successfully") } catch (J) { throw console.error("Failed to add deal status:", J), R.error("Failed to add deal status"), J } }, updateDealStatus: async (Z, J) => { try { const te = await Ka.updateDealStatus(Z, J); b(G => G.map(de => de.id === Z ? te.data : de)), R.success("Deal status updated successfully") } catch (te) { throw console.error("Failed to update deal status:", te), R.error("Failed to update deal status"), te } }, deleteDealStatus: async Z => { try { await Ka.deleteDealStatus(Z), b(J => J.filter(te => te.id !== Z)), R.success("Deal status deleted successfully") } catch (J) { throw console.error("Failed to delete deal status:", J), R.error("Failed to delete deal status"), J } }, formatCurrency: (Z, J) => { let te = Number(Z); if (isFinite(te) || (te = 0), !i) return String(te); const G = J || i.primary, de = i.decimalPlaces || 2; try { return new Intl.NumberFormat(void 0, { style: "currency", currency: G, minimumFractionDigits: de, maximumFractionDigits: de }).format(te) } catch { const pe = i.symbol || "$"; return i.position === "before" ? `${pe}${te.toFixed(de)}` : `${te.toFixed(de)}${pe}` } }, calculateTax: (Z, J) => c ? Z * (J || c.defaultRate) / 100 : 0, getCurrency: () => i?.primary || "USD", getLeadSourceById: Z => m.find(J => J.id === Z) || null, getLeadStatusById: Z => f.find(J => J.id === Z) || null, getDealStatusById: Z => p.find(J => J.id === Z) || null }; return t.jsx(sD.Provider, { value: K, children: e }) }, Br = () => { const e = h.useContext(sD); if (e === void 0) throw new Error("useBusinessSettings must be used within a BusinessSettingsProvider"); return e }, nD = h.createContext(void 0), yl = ["dashboard", "leads", "deals", "quotations", "invoices", "task-management", "expense-management", "products", "automation-management", "trash", "business-settings"], m0 = 4, R9 = ({ children: e }) => { const [r, a] = h.useState(yl); h.useEffect(() => { try { const i = localStorage.getItem("menuOrder"), o = Number(localStorage.getItem("menuOrderVersion") || "0"), c = i ? JSON.parse(i) : []; let u; Array.isArray(c) ? (u = c.filter(m => yl.includes(m)), yl.forEach(m => { u.includes(m) || u.push(m) })) : u = [...yl], o !== m0 && (localStorage.setItem("menuOrderVersion", String(m0)), localStorage.setItem("menuOrder", JSON.stringify(u))), a(u) } catch (i) { console.error("Failed to parse saved menu order:", i), a(yl) } }, []); const s = i => { a(i), localStorage.setItem("menuOrder", JSON.stringify(i)), localStorage.setItem("menuOrderVersion", String(m0)) }, n = () => { a(yl), localStorage.setItem("menuOrder", JSON.stringify(yl)), localStorage.setItem("menuOrderVersion", String(m0)) }; return t.jsx(nD.Provider, { value: { menuOrder: r, setMenuOrder: s, resetMenuOrder: n }, children: e }) }, iD = () => { const e = h.useContext(nD); if (e === void 0) throw new Error("useMenu must be used within a MenuProvider"); return e }, ot = ({ children: e, requiredPermission: r, requiredRole: a }) => { const { isAuthenticated: s, hasPermission: n, hasRole: i, isLoading: o, user: c, logout: u } = mr(); return h.useEffect(() => { c && typeof c.isActive < "u" && c.isActive === !1 && (R.info("Your account has been deactivated. You will be logged out."), u()) }, [c, u]), o ? t.jsx("div", { className: "min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900", children: t.jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600" }) }) : s ? c && typeof c.isActive < "u" && c.isActive === !1 ? t.jsx(R0, { to: "/login", replace: !0 }) : c?.mustChangePassword && window.location.pathname !== "/profile" ? t.jsx(R0, { to: "/profile", replace: !0 }) : r && !n(r) ? t.jsx("div", { className: "min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900", children: t.jsxs("div", { className: "text-center", children: [t.jsx("h2", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-2", children: "Access Denied" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "You don't have permission to access this page." })] }) }) : a && !i(a) ? t.jsx("div", { className: "min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900", children: t.jsxs("div", { className: "text-center", children: [t.jsx("h2", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-2", children: "Access Denied" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "You don't have the required role to access this page." })] }) }) : t.jsx(t.Fragment, { children: e }) : t.jsx(R0, { to: "/login", replace: !0 }) }; var M9 = { xmlns: "http://www.w3.org/2000/svg", width: 24, height: 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round", strokeLinejoin: "round" }; const _9 = e => e.replace(/([a-z0-9])([A-Z])/g, "$1-$2").toLowerCase().trim(), Oe = (e, r) => { const a = h.forwardRef(({ color: s = "currentColor", size: n = 24, strokeWidth: i = 2, absoluteStrokeWidth: o, className: c = "", children: u, ...m }, g) => h.createElement("svg", { ref: g, ...M9, width: n, height: n, stroke: s, strokeWidth: o ? Number(i) * 24 / Number(n) : i, className: ["lucide", `lucide-${_9(e)}`, c].join(" "), ...m }, [...r.map(([f, y]) => h.createElement(f, y)), ...Array.isArray(u) ? u : [u]])); return a.displayName = `${e}`, a }; const Qc = Oe("Activity", [["path", { d: "M22 12h-4l-3 9L9 3l-3 9H2", key: "d5dnw9" }]]); const dr = Oe("AlertCircle", [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }], ["line", { x1: "12", x2: "12", y1: "8", y2: "12", key: "1pkeuh" }], ["line", { x1: "12", x2: "12.01", y1: "16", y2: "16", key: "4dfq90" }]]); const Ol = Oe("AlertTriangle", [["path", { d: "m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z", key: "c3ski4" }], ["path", { d: "M12 9v4", key: "juzpu7" }], ["path", { d: "M12 17h.01", key: "p32p05" }]]); const $9 = Oe("ArrowDownLeft", [["path", { d: "M17 7 7 17", key: "15tmo1" }], ["path", { d: "M17 17H7V7", key: "1org7z" }]]); const U9 = Oe("ArrowDown", [["path", { d: "M12 5v14", key: "s699le" }], ["path", { d: "m19 12-7 7-7-7", key: "1idqje" }]]); const pr = Oe("ArrowLeft", [["path", { d: "m12 19-7-7 7-7", key: "1l729n" }], ["path", { d: "M19 12H5", key: "x3x0zl" }]]); const E2 = Oe("ArrowRightLeft", [["path", { d: "m16 3 4 4-4 4", key: "1x1c3m" }], ["path", { d: "M20 7H4", key: "zbl0bi" }], ["path", { d: "m8 21-4-4 4-4", key: "h9nckh" }], ["path", { d: "M4 17h16", key: "g4d7ey" }]]); const gd = Oe("ArrowRight", [["path", { d: "M5 12h14", key: "1ays0h" }], ["path", { d: "m12 5 7 7-7 7", key: "xquz4c" }]]); const F9 = Oe("ArrowUpRight", [["path", { d: "M7 7h10v10", key: "1tivn9" }], ["path", { d: "M7 17 17 7", key: "1vkiza" }]]); const z9 = Oe("ArrowUp", [["path", { d: "m5 12 7-7 7 7", key: "hav0vg" }], ["path", { d: "M12 19V5", key: "x0mq9r" }]]); const A2 = Oe("Award", [["circle", { cx: "12", cy: "8", r: "6", key: "1vp47v" }], ["path", { d: "M15.477 12.89 17 22l-5-3-5 3 1.523-9.11", key: "em7aur" }]]); const B9 = Oe("Banknote", [["rect", { width: "20", height: "12", x: "2", y: "6", rx: "2", key: "9lu3g6" }], ["circle", { cx: "12", cy: "12", r: "2", key: "1c9p78" }], ["path", { d: "M6 12h.01M18 12h.01", key: "113zkx" }]]); const Qa = Oe("BarChart3", [["path", { d: "M3 3v18h18", key: "1s2lah" }], ["path", { d: "M18 17V9", key: "2bz60n" }], ["path", { d: "M13 17V5", key: "1frdt8" }], ["path", { d: "M8 17v-3", key: "17ska0" }]]); const Bl = Oe("Bell", [["path", { d: "M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9", key: "1qo2s2" }], ["path", { d: "M10.3 21a1.94 1.94 0 0 0 3.4 0", key: "qgo35s" }]]); const Yu = Oe("Briefcase", [["rect", { width: "20", height: "14", x: "2", y: "7", rx: "2", ry: "2", key: "eto64e" }], ["path", { d: "M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16", key: "zwj3tp" }]]); const Il = Oe("Building2", [["path", { d: "M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z", key: "1b4qmf" }], ["path", { d: "M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2", key: "i71pzd" }], ["path", { d: "M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2", key: "10jefs" }], ["path", { d: "M10 6h4", key: "1itunk" }], ["path", { d: "M10 10h4", key: "tcdvrf" }], ["path", { d: "M10 14h4", key: "kelpxr" }], ["path", { d: "M10 18h4", key: "1ulq68" }]]); const qi = Oe("Building", [["rect", { width: "16", height: "20", x: "4", y: "2", rx: "2", ry: "2", key: "76otgf" }], ["path", { d: "M9 22v-4h6v4", key: "r93iot" }], ["path", { d: "M8 6h.01", key: "1dz90k" }], ["path", { d: "M16 6h.01", key: "1x0f13" }], ["path", { d: "M12 6h.01", key: "1vi96p" }], ["path", { d: "M12 10h.01", key: "1nrarc" }], ["path", { d: "M12 14h.01", key: "1etili" }], ["path", { d: "M16 10h.01", key: "1m94wz" }], ["path", { d: "M16 14h.01", key: "1gbofw" }], ["path", { d: "M8 10h.01", key: "19clt8" }], ["path", { d: "M8 14h.01", key: "6423bh" }]]); const rh = Oe("CalendarDays", [["path", { d: "M8 2v4", key: "1cmpym" }], ["path", { d: "M16 2v4", key: "4m81vk" }], ["rect", { width: "18", height: "18", x: "3", y: "4", rx: "2", key: "1hopcy" }], ["path", { d: "M3 10h18", key: "8toen8" }], ["path", { d: "M8 14h.01", key: "6423bh" }], ["path", { d: "M12 14h.01", key: "1etili" }], ["path", { d: "M16 14h.01", key: "1gbofw" }], ["path", { d: "M8 18h.01", key: "lrp35t" }], ["path", { d: "M12 18h.01", key: "mhygvu" }], ["path", { d: "M16 18h.01", key: "kzsmim" }]]); const Zt = Oe("Calendar", [["path", { d: "M8 2v4", key: "1cmpym" }], ["path", { d: "M16 2v4", key: "4m81vk" }], ["rect", { width: "18", height: "18", x: "3", y: "4", rx: "2", key: "1hopcy" }], ["path", { d: "M3 10h18", key: "8toen8" }]]); const Nb = Oe("CheckCircle2", [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }], ["path", { d: "m9 12 2 2 4-4", key: "dzmm74" }]]); const ut = Oe("CheckCircle", [["path", { d: "M22 11.08V12a10 10 0 1 1-5.93-9.14", key: "g774vq" }], ["path", { d: "m9 11 3 3L22 4", key: "1pflzl" }]]); const Uu = Oe("CheckSquare", [["path", { d: "m9 11 3 3L22 4", key: "1pflzl" }], ["path", { d: "M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11", key: "1jnkn4" }]]); const vf = Oe("Check", [["path", { d: "M20 6 9 17l-5-5", key: "1gmf2c" }]]); const _s = Oe("ChevronDown", [["path", { d: "m6 9 6 6 6-6", key: "qrunsl" }]]); const Xw = Oe("ChevronLeft", [["path", { d: "m15 18-6-6 6-6", key: "1wnfg3" }]]); const Xc = Oe("ChevronRight", [["path", { d: "m9 18 6-6-6-6", key: "mthhwq" }]]); const oD = Oe("ChevronUp", [["path", { d: "m18 15-6-6-6 6", key: "153udz" }]]); const q9 = Oe("ChevronsLeft", [["path", { d: "m11 17-5-5 5-5", key: "13zhaf" }], ["path", { d: "m18 17-5-5 5-5", key: "h8a8et" }]]); const H9 = Oe("ChevronsRight", [["path", { d: "m6 17 5-5-5-5", key: "xnjwq" }], ["path", { d: "m13 17 5-5-5-5", key: "17xmmf" }]]); const P2 = Oe("Circle", [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }]]); const W9 = Oe("ClipboardList", [["rect", { width: "8", height: "4", x: "8", y: "2", rx: "1", ry: "1", key: "tgr4d6" }], ["path", { d: "M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2", key: "116196" }], ["path", { d: "M12 11h4", key: "1jrz19" }], ["path", { d: "M12 16h4", key: "n85exb" }], ["path", { d: "M8 11h.01", key: "1dfujw" }], ["path", { d: "M8 16h.01", key: "18s6g9" }]]); const Kt = Oe("Clock", [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }], ["polyline", { points: "12 6 12 12 16 14", key: "68esgv" }]]); const T2 = Oe("Coins", [["circle", { cx: "8", cy: "8", r: "6", key: "3yglwk" }], ["path", { d: "M18.09 10.37A6 6 0 1 1 10.34 18", key: "t5s6rm" }], ["path", { d: "M7 6h1v4", key: "1obek4" }], ["path", { d: "m16.71 13.88.7.71-2.82 2.82", key: "1rbuyh" }]]); const xn = Oe("CreditCard", [["rect", { width: "20", height: "14", x: "2", y: "5", rx: "2", key: "ynyp8z" }], ["line", { x1: "2", x2: "22", y1: "10", y2: "10", key: "1b3vmo" }]]); const V9 = Oe("Database", [["ellipse", { cx: "12", cy: "5", rx: "9", ry: "3", key: "msslwz" }], ["path", { d: "M3 5V19A9 3 0 0 0 21 19V5", key: "1wlel7" }], ["path", { d: "M3 12A9 3 0 0 0 21 12", key: "mv7ke4" }]]); const Qr = Oe("DollarSign", [["line", { x1: "12", x2: "12", y1: "2", y2: "22", key: "7eqyqh" }], ["path", { d: "M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6", key: "1b0p4s" }]]); const ys = Oe("Download", [["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }], ["polyline", { points: "7 10 12 15 17 10", key: "2ggqvy" }], ["line", { x1: "12", x2: "12", y1: "15", y2: "3", key: "1vk2je" }]]); const bn = Oe("EyeOff", [["path", { d: "M9.88 9.88a3 3 0 1 0 4.24 4.24", key: "1jxqfv" }], ["path", { d: "M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68", key: "9wicm4" }], ["path", { d: "M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61", key: "1jreej" }], ["line", { x1: "2", x2: "22", y1: "2", y2: "22", key: "a6p6uj" }]]); const Ht = Oe("Eye", [["path", { d: "M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z", key: "rwhkz3" }], ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]]); const Ti = Oe("FileCheck", [["path", { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z", key: "1rqfz7" }], ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }], ["path", { d: "m9 15 2 2 4-4", key: "1grp1n" }]]); const Bo = Oe("FileDown", [["path", { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z", key: "1rqfz7" }], ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }], ["path", { d: "M12 18v-6", key: "17g6i2" }], ["path", { d: "m9 15 3 3 3-3", key: "1npd3o" }]]); const G9 = Oe("FileSearch", [["path", { d: "M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3", key: "1vg67v" }], ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }], ["circle", { cx: "5", cy: "14", r: "3", key: "ufru5t" }], ["path", { d: "m9 18-1.5-1.5", key: "1j6qii" }]]); const ah = Oe("FileSpreadsheet", [["path", { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z", key: "1rqfz7" }], ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }], ["path", { d: "M8 13h2", key: "yr2amv" }], ["path", { d: "M14 13h2", key: "un5t4a" }], ["path", { d: "M8 17h2", key: "2yhykz" }], ["path", { d: "M14 17h2", key: "10kma7" }]]); const Mt = Oe("FileText", [["path", { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z", key: "1rqfz7" }], ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }], ["path", { d: "M10 9H8", key: "b1mrlr" }], ["path", { d: "M16 13H8", key: "t4e002" }], ["path", { d: "M16 17H8", key: "z1uh3a" }]]); const Zc = Oe("Filter", [["polygon", { points: "22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3", key: "1yg77f" }]]); const sh = Oe("Flag", [["path", { d: "M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z", key: "i9b6wo" }], ["line", { x1: "4", x2: "4", y1: "22", y2: "15", key: "1cm3nv" }]]); const bf = Oe("Globe", [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }], ["path", { d: "M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20", key: "13o1zl" }], ["path", { d: "M2 12h20", key: "9i4pu4" }]]); const kb = Oe("GripVertical", [["circle", { cx: "9", cy: "12", r: "1", key: "1vctgf" }], ["circle", { cx: "9", cy: "5", r: "1", key: "hp0tcf" }], ["circle", { cx: "9", cy: "19", r: "1", key: "fkjjf6" }], ["circle", { cx: "15", cy: "12", r: "1", key: "1tmaij" }], ["circle", { cx: "15", cy: "5", r: "1", key: "19l28e" }], ["circle", { cx: "15", cy: "19", r: "1", key: "f4zoj3" }]]); const lD = Oe("Hash", [["line", { x1: "4", x2: "20", y1: "9", y2: "9", key: "4lhtct" }], ["line", { x1: "4", x2: "20", y1: "15", y2: "15", key: "vyu0kd" }], ["line", { x1: "10", x2: "8", y1: "3", y2: "21", key: "1ggp8o" }], ["line", { x1: "16", x2: "14", y1: "3", y2: "21", key: "weycgp" }]]); const Fu = Oe("History", [["path", { d: "M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8", key: "1357e3" }], ["path", { d: "M3 3v5h5", key: "1xhq8a" }], ["path", { d: "M12 7v5l4 2", key: "1fdv2h" }]]); const K9 = Oe("Home", [["path", { d: "m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z", key: "y5dka4" }], ["polyline", { points: "9 22 9 12 15 12 15 22", key: "e2us08" }]]); const D2 = Oe("Info", [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }], ["path", { d: "M12 16v-4", key: "1dtifu" }], ["path", { d: "M12 8h.01", key: "e9boi3" }]]); const Y9 = Oe("Key", [["circle", { cx: "7.5", cy: "15.5", r: "5.5", key: "yqb3hr" }], ["path", { d: "m21 2-9.6 9.6", key: "1j0ho8" }], ["path", { d: "m15.5 7.5 3 3L22 7l-3-3", key: "1rn1fs" }]]); const hi = Oe("LayoutGrid", [["rect", { width: "7", height: "7", x: "3", y: "3", rx: "1", key: "1g98yp" }], ["rect", { width: "7", height: "7", x: "14", y: "3", rx: "1", key: "6d4xhi" }], ["rect", { width: "7", height: "7", x: "14", y: "14", rx: "1", key: "nxv5o0" }], ["rect", { width: "7", height: "7", x: "3", y: "14", rx: "1", key: "1bb6yr" }]]); const fi = Oe("LayoutList", [["rect", { width: "7", height: "7", x: "3", y: "3", rx: "1", key: "1g98yp" }], ["rect", { width: "7", height: "7", x: "3", y: "14", rx: "1", key: "1bb6yr" }], ["path", { d: "M14 4h7", key: "3xa0d5" }], ["path", { d: "M14 9h7", key: "1icrd9" }], ["path", { d: "M14 15h7", key: "1mj8o2" }], ["path", { d: "M14 20h7", key: "11slyb" }]]); const Sb = Oe("Link", [["path", { d: "M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71", key: "1cjeqo" }], ["path", { d: "M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71", key: "19qd67" }]]); const O2 = Oe("Linkedin", [["path", { d: "M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z", key: "c2jq9f" }], ["rect", { width: "4", height: "12", x: "2", y: "9", key: "mk3on5" }], ["circle", { cx: "4", cy: "4", r: "2", key: "bt5ra8" }]]); const I2 = Oe("ListFilter", [["path", { d: "M3 6h18", key: "d0wm0j" }], ["path", { d: "M7 12h10", key: "b7w52i" }], ["path", { d: "M10 18h4", key: "1ulq68" }]]); const _i = Oe("Loader2", [["path", { d: "M21 12a9 9 0 1 1-6.219-8.56", key: "13zald" }]]); const km = Oe("Lock", [["rect", { width: "18", height: "11", x: "3", y: "11", rx: "2", ry: "2", key: "1w4ew1" }], ["path", { d: "M7 11V7a5 5 0 0 1 10 0v4", key: "fwvmzm" }]]); const cD = Oe("LogIn", [["path", { d: "M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4", key: "u53s6r" }], ["polyline", { points: "10 17 15 12 10 7", key: "1ail0h" }], ["line", { x1: "15", x2: "3", y1: "12", y2: "12", key: "v6grx8" }]]); const Q9 = Oe("LogOut", [["path", { d: "M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4", key: "1uf3rs" }], ["polyline", { points: "16 17 21 12 16 7", key: "1gabdz" }], ["line", { x1: "21", x2: "9", y1: "12", y2: "12", key: "1uyos4" }]]); const ir = Oe("Mail", [["rect", { width: "20", height: "16", x: "2", y: "4", rx: "2", key: "18n3k1" }], ["path", { d: "m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7", key: "1ocrg3" }]]); const $o = Oe("MapPin", [["path", { d: "M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z", key: "2oe9fu" }], ["circle", { cx: "12", cy: "10", r: "3", key: "ilqhr7" }]]); const X9 = Oe("Menu", [["line", { x1: "4", x2: "20", y1: "12", y2: "12", key: "1e0a9i" }], ["line", { x1: "4", x2: "20", y1: "6", y2: "6", key: "1owob3" }], ["line", { x1: "4", x2: "20", y1: "18", y2: "18", key: "yk5zj1" }]]); const Z9 = Oe("MessageCircle", [["path", { d: "M7.9 20A9 9 0 1 0 4 16.1L2 22Z", key: "vv11sd" }]]); const Fr = Oe("MessageSquare", [["path", { d: "M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z", key: "1lielz" }]]); const J9 = Oe("Moon", [["path", { d: "M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z", key: "a7tn18" }]]); const dD = Oe("MoreHorizontal", [["circle", { cx: "12", cy: "12", r: "1", key: "41hilf" }], ["circle", { cx: "19", cy: "12", r: "1", key: "1wjl8i" }], ["circle", { cx: "5", cy: "12", r: "1", key: "1pcz8c" }]]); const Cb = Oe("MoreVertical", [["circle", { cx: "12", cy: "12", r: "1", key: "41hilf" }], ["circle", { cx: "12", cy: "5", r: "1", key: "gxeob9" }], ["circle", { cx: "12", cy: "19", r: "1", key: "lyex9k" }]]); const Fn = Oe("Package", [["path", { d: "m7.5 4.27 9 5.15", key: "1c824w" }], ["path", { d: "M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z", key: "hh9hay" }], ["path", { d: "m3.3 7 8.7 5 8.7-5", key: "g66t2b" }], ["path", { d: "M12 22V12", key: "d0xqtd" }]]); const eU = Oe("PanelsTopLeft", [["rect", { width: "18", height: "18", x: "3", y: "3", rx: "2", key: "afitv7" }], ["path", { d: "M3 9h18", key: "1pudct" }], ["path", { d: "M9 21V9", key: "1oto5p" }]]); const tU = Oe("Paperclip", [["path", { d: "m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48", key: "1u3ebp" }]]); const rU = Oe("Pause", [["rect", { width: "4", height: "16", x: "6", y: "4", key: "iffhe4" }], ["rect", { width: "4", height: "16", x: "14", y: "4", key: "sjin7j" }]]); const Qo = Oe("PenLine", [["path", { d: "M12 20h9", key: "t2du7b" }], ["path", { d: "M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z", key: "ymcmye" }]]); const uD = Oe("Pen", [["path", { d: "M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z", key: "5qss01" }]]); const Eb = Oe("Percent", [["line", { x1: "19", x2: "5", y1: "5", y2: "19", key: "1x9vlm" }], ["circle", { cx: "6.5", cy: "6.5", r: "2.5", key: "4mh3h7" }], ["circle", { cx: "17.5", cy: "17.5", r: "2.5", key: "1mdrzq" }]]); const F0 = Oe("PhoneCall", [["path", { d: "M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z", key: "foiqr5" }], ["path", { d: "M14.05 2a9 9 0 0 1 8 7.94", key: "vmijpz" }], ["path", { d: "M14.05 6A5 5 0 0 1 18 10", key: "13nbpp" }]]); const ma = Oe("Phone", [["path", { d: "M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z", key: "foiqr5" }]]); const nh = Oe("PieChart", [["path", { d: "M21.21 15.89A10 10 0 1 1 8 2.83", key: "k2fpak" }], ["path", { d: "M22 12A10 10 0 0 0 12 2v10z", key: "1rfc4y" }]]); const Ab = Oe("Play", [["polygon", { points: "5 3 19 12 5 21 5 3", key: "191637" }]]); const $t = Oe("Plus", [["path", { d: "M5 12h14", key: "1ays0h" }], ["path", { d: "M12 5v14", key: "s699le" }]]); const aU = Oe("Printer", [["polyline", { points: "6 9 6 2 18 2 18 9", key: "1306q4" }], ["path", { d: "M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2", key: "143wyd" }], ["rect", { width: "12", height: "8", x: "6", y: "14", key: "5ipwut" }]]); const $i = Oe("Receipt", [["path", { d: "M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z", key: "q3az6g" }], ["path", { d: "M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8", key: "1h4pet" }], ["path", { d: "M12 17.5v-11", key: "1jc1ny" }]]); const Uo = Oe("RefreshCw", [["path", { d: "M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8", key: "v9h5vc" }], ["path", { d: "M21 3v5h-5", key: "1q7to0" }], ["path", { d: "M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16", key: "3uifl3" }], ["path", { d: "M8 16H3v5", key: "1cv678" }]]); const Sm = Oe("RotateCcw", [["path", { d: "M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8", key: "1357e3" }], ["path", { d: "M3 3v5h5", key: "1xhq8a" }]]); const L2 = Oe("Ruler", [["path", { d: "M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z", key: "icamh8" }], ["path", { d: "m14.5 12.5 2-2", key: "inckbg" }], ["path", { d: "m11.5 9.5 2-2", key: "fmmyf7" }], ["path", { d: "m8.5 6.5 2-2", key: "vc6u1g" }], ["path", { d: "m17.5 15.5 2-2", key: "wo5hmg" }]]); const Za = Oe("Save", [["path", { d: "M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z", key: "1owoqh" }], ["polyline", { points: "17 21 17 13 7 13 7 21", key: "1md35c" }], ["polyline", { points: "7 3 7 8 15 8", key: "8nz8an" }]]); const Xr = Oe("Search", [["circle", { cx: "11", cy: "11", r: "8", key: "4ej97u" }], ["path", { d: "m21 21-4.3-4.3", key: "1qie3q" }]]); const Ll = Oe("Send", [["path", { d: "m22 2-7 20-4-9-9-4Z", key: "1q3vgg" }], ["path", { d: "M22 2 11 13", key: "nzbqef" }]]); const Hi = Oe("Settings", [["path", { d: "M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z", key: "1qme2f" }], ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]]); const Xs = Oe("Shield", [["path", { d: "M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z", key: "oel41y" }]]); const sU = Oe("Smartphone", [["rect", { width: "14", height: "20", x: "5", y: "2", rx: "2", ry: "2", key: "1yt0o3" }], ["path", { d: "M12 18h.01", key: "mhygvu" }]]); const Jt = Oe("SquarePen", [["path", { d: "M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7", key: "1m0v6g" }], ["path", { d: "M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z", key: "1lpok0" }]]); const gy = Oe("Square", [["rect", { width: "18", height: "18", x: "3", y: "3", rx: "2", key: "afitv7" }]]); const Qu = Oe("Star", [["polygon", { points: "12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2", key: "8f66p6" }]]); const nU = Oe("Sun", [["circle", { cx: "12", cy: "12", r: "4", key: "4exip2" }], ["path", { d: "M12 2v2", key: "tus03m" }], ["path", { d: "M12 20v2", key: "1lh1kg" }], ["path", { d: "m4.93 4.93 1.41 1.41", key: "149t6j" }], ["path", { d: "m17.66 17.66 1.41 1.41", key: "ptbguv" }], ["path", { d: "M2 12h2", key: "1t8f8n" }], ["path", { d: "M20 12h2", key: "1q8mjw" }], ["path", { d: "m6.34 17.66-1.41 1.41", key: "1m8zz5" }], ["path", { d: "m19.07 4.93-1.41 1.41", key: "1shlcs" }]]); const qo = Oe("Tag", [["path", { d: "M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z", key: "vktsd0" }], ["circle", { cx: "7.5", cy: "7.5", r: ".5", fill: "currentColor", key: "kqv944" }]]); const iU = Oe("Tags", [["path", { d: "m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19", key: "1cbfv1" }], ["path", { d: "M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z", key: "135mg7" }], ["circle", { cx: "6.5", cy: "9.5", r: ".5", fill: "currentColor", key: "5pm5xn" }]]); const Zw = Oe("Target", [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }], ["circle", { cx: "12", cy: "12", r: "6", key: "1vlfrh" }], ["circle", { cx: "12", cy: "12", r: "2", key: "1c9p78" }]]); const R2 = Oe("ToggleLeft", [["rect", { width: "20", height: "12", x: "2", y: "6", rx: "6", ry: "6", key: "f2vt7d" }], ["circle", { cx: "8", cy: "12", r: "2", key: "1nvbw3" }]]); const M2 = Oe("ToggleRight", [["rect", { width: "20", height: "12", x: "2", y: "6", rx: "6", ry: "6", key: "f2vt7d" }], ["circle", { cx: "16", cy: "12", r: "2", key: "4ma0v8" }]]); const yt = Oe("Trash2", [["path", { d: "M3 6h18", key: "d0wm0j" }], ["path", { d: "M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6", key: "4alrt4" }], ["path", { d: "M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2", key: "v07s0e" }], ["line", { x1: "10", x2: "10", y1: "11", y2: "17", key: "1uufr5" }], ["line", { x1: "14", x2: "14", y1: "11", y2: "17", key: "xtxkd" }]]); const Ea = Oe("TrendingUp", [["polyline", { points: "22 7 13.5 15.5 8.5 10.5 2 17", key: "126l90" }], ["polyline", { points: "16 7 22 7 22 13", key: "kwv8wd" }]]); const Ui = Oe("Upload", [["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }], ["polyline", { points: "17 8 12 3 7 8", key: "t8dd8p" }], ["line", { x1: "12", x2: "12", y1: "3", y2: "15", key: "widbto" }]]); const oU = Oe("UserCheck", [["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }], ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }], ["polyline", { points: "16 11 18 13 22 9", key: "1pwet4" }]]); const lU = Oe("UserPlus", [["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }], ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }], ["line", { x1: "19", x2: "19", y1: "8", y2: "14", key: "1bvyxn" }], ["line", { x1: "22", x2: "16", y1: "11", y2: "11", key: "1shjgl" }]]); const wt = Oe("User", [["path", { d: "M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2", key: "975kel" }], ["circle", { cx: "12", cy: "7", r: "4", key: "17ys0d" }]]); const $s = Oe("Users", [["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }], ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }], ["path", { d: "M22 21v-2a4 4 0 0 0-3-3.87", key: "kshegd" }], ["path", { d: "M16 3.13a4 4 0 0 1 0 7.75", key: "1da9ce" }]]); const cU = Oe("Volume2", [["polygon", { points: "11 5 6 9 2 9 2 15 6 15 11 19 11 5", key: "16drj5" }], ["path", { d: "M15.54 8.46a5 5 0 0 1 0 7.07", key: "ltjumu" }], ["path", { d: "M19.07 4.93a10 10 0 0 1 0 14.14", key: "1kegas" }]]); const dU = Oe("VolumeX", [["polygon", { points: "11 5 6 9 2 9 2 15 6 15 11 19 11 5", key: "16drj5" }], ["line", { x1: "22", x2: "16", y1: "9", y2: "15", key: "1ewh16" }], ["line", { x1: "16", x2: "22", y1: "9", y2: "15", key: "5ykzw1" }]]); const mD = Oe("Workflow", [["rect", { width: "8", height: "8", x: "3", y: "3", rx: "2", key: "by2w9f" }], ["path", { d: "M7 11v4a2 2 0 0 0 2 2h4", key: "xkn7yn" }], ["rect", { width: "8", height: "8", x: "13", y: "13", rx: "2", key: "1cgmvn" }]]); const uU = Oe("Wrench", [["path", { d: "M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z", key: "cbrjhi" }]]); const Ca = Oe("XCircle", [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }], ["path", { d: "m15 9-6 6", key: "1uzhvr" }], ["path", { d: "m9 9 6 6", key: "z0biqf" }]]); const fa = Oe("X", [["path", { d: "M18 6 6 18", key: "1bl5f8" }], ["path", { d: "m6 6 12 12", key: "d8bk6v" }]]); const Rl = Oe("Zap", [["polygon", { points: "13 2 3 14 12 14 11 22 21 10 12 10 13 2", key: "45s27k" }]]), Cm = ({ open: e, title: r = "Confirm Action", description: a, confirmText: s = "Confirm", cancelText: n = "Cancel", loading: i = !1, onConfirm: o, onClose: c }) => e ? t.jsx("div", { className: "fixed inset-0 bg-gray-600 bg-opacity-50 dark:bg-black dark:bg-opacity-60 overflow-y-auto w-full z-50 flex items-center justify-center -top-10 ", children: t.jsxs("div", { className: "relative mx-auto p-6 border w-full max-w-md shadow-xl rounded-2xl bg-white dark:bg-gray-800 border-gray-100 dark:border-gray-700", children: [t.jsxs("div", { className: "flex items-center justify-between mb-6", children: [t.jsx("h3", { className: "text-xl font-semibold text-gray-900 dark:text-white", children: r }), t.jsx("button", { onClick: c, className: "text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors", "aria-label": "Close", children: t.jsx(fa, { className: "h-6 w-6" }) })] }), a && t.jsx("div", { className: "mb-6 text-gray-700 dark:text-gray-300 text-sm", children: a }), t.jsxs("div", { className: "flex justify-end space-x-3", children: [t.jsx("button", { onClick: c, disabled: i, className: "px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50", children: n }), t.jsx("button", { onClick: o, disabled: i, className: "px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center", children: i ? t.jsxs(t.Fragment, { children: [t.jsx("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2" }), "Processing..."] }) : s })] })] }) }) : null, mU = () => { const [e, r] = h.useState(!1), { currentLanguage: a, changeLanguage: s, availableLanguages: n } = Z$(), { t: i } = kn(), o = h.useRef(null); h.useEffect(() => { const g = f => { o.current && !o.current.contains(f.target) && r(!1) }; return document.addEventListener("mousedown", g), () => document.removeEventListener("mousedown", g) }, []); const c = g => { s(g), r(!1) }; n.find(g => g.code === a); const u = ["ar", "he", "fa", "ur"], m = u.includes(a); return t.jsxs("div", { className: "relative", ref: o, children: [t.jsx("button", { onClick: () => r(!e), className: "p-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors hover:scale-105", title: i("common.language"), children: t.jsx(bf, { className: "h-5 w-5" }) }), e && t.jsx("div", { className: `absolute ${m ? "left-0" : "right-0"} mt-2 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50 max-h-80 overflow-y-auto`, children: t.jsx("div", { className: "py-1", children: n.map(g => t.jsxs("button", { onClick: () => c(g.code), className: `w-full flex items-center justify-between px-4 py-3 text-sm text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${a === g.code ? "bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400" : "text-gray-700 dark:text-gray-300"}`, dir: u.includes(g.code) ? "rtl" : "ltr", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("span", { className: "font-medium", children: g.nativeName }), t.jsxs("span", { className: "text-xs text-gray-500 dark:text-gray-400", children: ["(", g.name, ")"] })] }), a === g.code && t.jsx(vf, { className: "h-4 w-4 text-blue-600 dark:text-blue-400" })] }, g.code)) }) })] }) }; function gU() { for (var e = arguments.length, r = new Array(e), a = 0; a < e; a++)r[a] = arguments[a]; return h.useMemo(() => s => { r.forEach(n => n(s)) }, r) } const wf = typeof window < "u" && typeof window.document < "u" && typeof window.document.createElement < "u"; function hd(e) { const r = Object.prototype.toString.call(e); return r === "[object Window]" || r === "[object global]" } function Jw(e) { return "nodeType" in e } function Us(e) { var r, a; return e ? hd(e) ? e : Jw(e) && (r = (a = e.ownerDocument) == null ? void 0 : a.defaultView) != null ? r : window : window } function ej(e) { const { Document: r } = Us(e); return e instanceof r } function Em(e) { return hd(e) ? !1 : e instanceof Us(e).HTMLElement } function gD(e) { return e instanceof Us(e).SVGElement } function fd(e) { return e ? hd(e) ? e.document : Jw(e) ? ej(e) ? e : Em(e) || gD(e) ? e.ownerDocument : document : document : document } const ii = wf ? h.useLayoutEffect : h.useEffect; function tj(e) { const r = h.useRef(e); return ii(() => { r.current = e }), h.useCallback(function () { for (var a = arguments.length, s = new Array(a), n = 0; n < a; n++)s[n] = arguments[n]; return r.current == null ? void 0 : r.current(...s) }, []) } function hU() { const e = h.useRef(null), r = h.useCallback((s, n) => { e.current = setInterval(s, n) }, []), a = h.useCallback(() => { e.current !== null && (clearInterval(e.current), e.current = null) }, []); return [r, a] } function Xu(e, r) { r === void 0 && (r = [e]); const a = h.useRef(e); return ii(() => { a.current !== e && (a.current = e) }, r), a } function Am(e, r) { const a = h.useRef(); return h.useMemo(() => { const s = e(a.current); return a.current = s, s }, [...r]) } function ih(e) { const r = tj(e), a = h.useRef(null), s = h.useCallback(n => { n !== a.current && r?.(n, a.current), a.current = n }, []); return [a, s] } function Pb(e) { const r = h.useRef(); return h.useEffect(() => { r.current = e }, [e]), r.current } let hy = {}; function Pm(e, r) { return h.useMemo(() => { if (r) return r; const a = hy[e] == null ? 0 : hy[e] + 1; return hy[e] = a, e + "-" + a }, [e, r]) } function hD(e) { return function (r) { for (var a = arguments.length, s = new Array(a > 1 ? a - 1 : 0), n = 1; n < a; n++)s[n - 1] = arguments[n]; return s.reduce((i, o) => { const c = Object.entries(o); for (const [u, m] of c) { const g = i[u]; g != null && (i[u] = g + e * m) } return i }, { ...r }) } } const qc = hD(1), Zu = hD(-1); function fU(e) { return "clientX" in e && "clientY" in e } function rj(e) { if (!e) return !1; const { KeyboardEvent: r } = Us(e.target); return r && e instanceof r } function xU(e) { if (!e) return !1; const { TouchEvent: r } = Us(e.target); return r && e instanceof r } function Tb(e) { if (xU(e)) { if (e.touches && e.touches.length) { const { clientX: r, clientY: a } = e.touches[0]; return { x: r, y: a } } else if (e.changedTouches && e.changedTouches.length) { const { clientX: r, clientY: a } = e.changedTouches[0]; return { x: r, y: a } } } return fU(e) ? { x: e.clientX, y: e.clientY } : null } const Ju = Object.freeze({ Translate: { toString(e) { if (!e) return; const { x: r, y: a } = e; return "translate3d(" + (r ? Math.round(r) : 0) + "px, " + (a ? Math.round(a) : 0) + "px, 0)" } }, Scale: { toString(e) { if (!e) return; const { scaleX: r, scaleY: a } = e; return "scaleX(" + r + ") scaleY(" + a + ")" } }, Transform: { toString(e) { if (e) return [Ju.Translate.toString(e), Ju.Scale.toString(e)].join(" ") } }, Transition: { toString(e) { let { property: r, duration: a, easing: s } = e; return r + " " + a + "ms " + s } } }), _2 = "a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]"; function pU(e) { return e.matches(_2) ? e : e.querySelector(_2) } const yU = { display: "none" }; function vU(e) { let { id: r, value: a } = e; return Je.createElement("div", { id: r, style: yU }, a) } function bU(e) { let { id: r, announcement: a, ariaLiveType: s = "assertive" } = e; const n = { position: "fixed", top: 0, left: 0, width: 1, height: 1, margin: -1, border: 0, padding: 0, overflow: "hidden", clip: "rect(0 0 0 0)", clipPath: "inset(100%)", whiteSpace: "nowrap" }; return Je.createElement("div", { id: r, style: n, role: "status", "aria-live": s, "aria-atomic": !0 }, a) } function wU() { const [e, r] = h.useState(""); return { announce: h.useCallback(s => { s != null && r(s) }, []), announcement: e } } const fD = h.createContext(null); function jU(e) { const r = h.useContext(fD); h.useEffect(() => { if (!r) throw new Error("useDndMonitor must be used within a children of <DndContext>"); return r(e) }, [e, r]) } function NU() { const [e] = h.useState(() => new Set), r = h.useCallback(s => (e.add(s), () => e.delete(s)), [e]); return [h.useCallback(s => { let { type: n, event: i } = s; e.forEach(o => { var c; return (c = o[n]) == null ? void 0 : c.call(o, i) }) }, [e]), r] } const kU = {
    draggable: `
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `}, SU = { onDragStart(e) { let { active: r } = e; return "Picked up draggable item " + r.id + "." }, onDragOver(e) { let { active: r, over: a } = e; return a ? "Draggable item " + r.id + " was moved over droppable area " + a.id + "." : "Draggable item " + r.id + " is no longer over a droppable area." }, onDragEnd(e) { let { active: r, over: a } = e; return a ? "Draggable item " + r.id + " was dropped over droppable area " + a.id : "Draggable item " + r.id + " was dropped." }, onDragCancel(e) { let { active: r } = e; return "Dragging was cancelled. Draggable item " + r.id + " was dropped." } }; function CU(e) { let { announcements: r = SU, container: a, hiddenTextDescribedById: s, screenReaderInstructions: n = kU } = e; const { announce: i, announcement: o } = wU(), c = Pm("DndLiveRegion"), [u, m] = h.useState(!1); if (h.useEffect(() => { m(!0) }, []), jU(h.useMemo(() => ({ onDragStart(f) { let { active: y } = f; i(r.onDragStart({ active: y })) }, onDragMove(f) { let { active: y, over: p } = f; r.onDragMove && i(r.onDragMove({ active: y, over: p })) }, onDragOver(f) { let { active: y, over: p } = f; i(r.onDragOver({ active: y, over: p })) }, onDragEnd(f) { let { active: y, over: p } = f; i(r.onDragEnd({ active: y, over: p })) }, onDragCancel(f) { let { active: y, over: p } = f; i(r.onDragCancel({ active: y, over: p })) } }), [i, r])), !u) return null; const g = Je.createElement(Je.Fragment, null, Je.createElement(vU, { id: s, value: n.draggable }), Je.createElement(bU, { id: c, announcement: o })); return a ? Ro.createPortal(g, a) : g } var Sa; (function (e) { e.DragStart = "dragStart", e.DragMove = "dragMove", e.DragEnd = "dragEnd", e.DragCancel = "dragCancel", e.DragOver = "dragOver", e.RegisterDroppable = "registerDroppable", e.SetDroppableDisabled = "setDroppableDisabled", e.UnregisterDroppable = "unregisterDroppable" })(Sa || (Sa = {})); function oh() { } function $2(e, r) { return h.useMemo(() => ({ sensor: e, options: r ?? {} }), [e, r]) } function EU() { for (var e = arguments.length, r = new Array(e), a = 0; a < e; a++)r[a] = arguments[a]; return h.useMemo(() => [...r].filter(s => s != null), [...r]) } const zn = Object.freeze({ x: 0, y: 0 }); function xD(e, r) { return Math.sqrt(Math.pow(e.x - r.x, 2) + Math.pow(e.y - r.y, 2)) } function pD(e, r) { let { data: { value: a } } = e, { data: { value: s } } = r; return a - s } function AU(e, r) { let { data: { value: a } } = e, { data: { value: s } } = r; return s - a } function U2(e) { let { left: r, top: a, height: s, width: n } = e; return [{ x: r, y: a }, { x: r + n, y: a }, { x: r, y: a + s }, { x: r + n, y: a + s }] } function yD(e, r) { if (!e || e.length === 0) return null; const [a] = e; return a[r] } function F2(e, r, a) { return r === void 0 && (r = e.left), a === void 0 && (a = e.top), { x: r + e.width * .5, y: a + e.height * .5 } } const PU = e => { let { collisionRect: r, droppableRects: a, droppableContainers: s } = e; const n = F2(r, r.left, r.top), i = []; for (const o of s) { const { id: c } = o, u = a.get(c); if (u) { const m = xD(F2(u), n); i.push({ id: c, data: { droppableContainer: o, value: m } }) } } return i.sort(pD) }, TU = e => { let { collisionRect: r, droppableRects: a, droppableContainers: s } = e; const n = U2(r), i = []; for (const o of s) { const { id: c } = o, u = a.get(c); if (u) { const m = U2(u), g = n.reduce((y, p, b) => y + xD(m[b], p), 0), f = Number((g / 4).toFixed(4)); i.push({ id: c, data: { droppableContainer: o, value: f } }) } } return i.sort(pD) }; function DU(e, r) { const a = Math.max(r.top, e.top), s = Math.max(r.left, e.left), n = Math.min(r.left + r.width, e.left + e.width), i = Math.min(r.top + r.height, e.top + e.height), o = n - s, c = i - a; if (s < n && a < i) { const u = r.width * r.height, m = e.width * e.height, g = o * c, f = g / (u + m - g); return Number(f.toFixed(4)) } return 0 } const OU = e => { let { collisionRect: r, droppableRects: a, droppableContainers: s } = e; const n = []; for (const i of s) { const { id: o } = i, c = a.get(o); if (c) { const u = DU(c, r); u > 0 && n.push({ id: o, data: { droppableContainer: i, value: u } }) } } return n.sort(AU) }; function IU(e, r, a) { return { ...e, scaleX: r && a ? r.width / a.width : 1, scaleY: r && a ? r.height / a.height : 1 } } function vD(e, r) { return e && r ? { x: e.left - r.left, y: e.top - r.top } : zn } function LU(e) { return function (a) { for (var s = arguments.length, n = new Array(s > 1 ? s - 1 : 0), i = 1; i < s; i++)n[i - 1] = arguments[i]; return n.reduce((o, c) => ({ ...o, top: o.top + e * c.y, bottom: o.bottom + e * c.y, left: o.left + e * c.x, right: o.right + e * c.x }), { ...a }) } } const RU = LU(1); function MU(e) { if (e.startsWith("matrix3d(")) { const r = e.slice(9, -1).split(/, /); return { x: +r[12], y: +r[13], scaleX: +r[0], scaleY: +r[5] } } else if (e.startsWith("matrix(")) { const r = e.slice(7, -1).split(/, /); return { x: +r[4], y: +r[5], scaleX: +r[0], scaleY: +r[3] } } return null } function _U(e, r, a) { const s = MU(r); if (!s) return e; const { scaleX: n, scaleY: i, x: o, y: c } = s, u = e.left - o - (1 - n) * parseFloat(a), m = e.top - c - (1 - i) * parseFloat(a.slice(a.indexOf(" ") + 1)), g = n ? e.width / n : e.width, f = i ? e.height / i : e.height; return { width: g, height: f, top: m, right: u + g, bottom: m + f, left: u } } const $U = { ignoreTransform: !1 }; function xd(e, r) { r === void 0 && (r = $U); let a = e.getBoundingClientRect(); if (r.ignoreTransform) { const { transform: m, transformOrigin: g } = Us(e).getComputedStyle(e); m && (a = _U(a, m, g)) } const { top: s, left: n, width: i, height: o, bottom: c, right: u } = a; return { top: s, left: n, width: i, height: o, bottom: c, right: u } } function z2(e) { return xd(e, { ignoreTransform: !0 }) } function UU(e) { const r = e.innerWidth, a = e.innerHeight; return { top: 0, left: 0, right: r, bottom: a, width: r, height: a } } function FU(e, r) { return r === void 0 && (r = Us(e).getComputedStyle(e)), r.position === "fixed" } function zU(e, r) { r === void 0 && (r = Us(e).getComputedStyle(e)); const a = /(auto|scroll|overlay)/; return ["overflow", "overflowX", "overflowY"].some(n => { const i = r[n]; return typeof i == "string" ? a.test(i) : !1 }) } function jf(e, r) { const a = []; function s(n) { if (r != null && a.length >= r || !n) return a; if (ej(n) && n.scrollingElement != null && !a.includes(n.scrollingElement)) return a.push(n.scrollingElement), a; if (!Em(n) || gD(n) || a.includes(n)) return a; const i = Us(e).getComputedStyle(n); return n !== e && zU(n, i) && a.push(n), FU(n, i) ? a : s(n.parentNode) } return e ? s(e) : a } function bD(e) { const [r] = jf(e, 1); return r ?? null } function fy(e) { return !wf || !e ? null : hd(e) ? e : Jw(e) ? ej(e) || e === fd(e).scrollingElement ? window : Em(e) ? e : null : null } function wD(e) { return hd(e) ? e.scrollX : e.scrollLeft } function jD(e) { return hd(e) ? e.scrollY : e.scrollTop } function Db(e) { return { x: wD(e), y: jD(e) } } var $a; (function (e) { e[e.Forward = 1] = "Forward", e[e.Backward = -1] = "Backward" })($a || ($a = {})); function ND(e) { return !wf || !e ? !1 : e === document.scrollingElement } function kD(e) { const r = { x: 0, y: 0 }, a = ND(e) ? { height: window.innerHeight, width: window.innerWidth } : { height: e.clientHeight, width: e.clientWidth }, s = { x: e.scrollWidth - a.width, y: e.scrollHeight - a.height }, n = e.scrollTop <= r.y, i = e.scrollLeft <= r.x, o = e.scrollTop >= s.y, c = e.scrollLeft >= s.x; return { isTop: n, isLeft: i, isBottom: o, isRight: c, maxScroll: s, minScroll: r } } const BU = { x: .2, y: .2 }; function qU(e, r, a, s, n) { let { top: i, left: o, right: c, bottom: u } = a; s === void 0 && (s = 10), n === void 0 && (n = BU); const { isTop: m, isBottom: g, isLeft: f, isRight: y } = kD(e), p = { x: 0, y: 0 }, b = { x: 0, y: 0 }, j = { height: r.height * n.y, width: r.width * n.x }; return !m && i <= r.top + j.height ? (p.y = $a.Backward, b.y = s * Math.abs((r.top + j.height - i) / j.height)) : !g && u >= r.bottom - j.height && (p.y = $a.Forward, b.y = s * Math.abs((r.bottom - j.height - u) / j.height)), !y && c >= r.right - j.width ? (p.x = $a.Forward, b.x = s * Math.abs((r.right - j.width - c) / j.width)) : !f && o <= r.left + j.width && (p.x = $a.Backward, b.x = s * Math.abs((r.left + j.width - o) / j.width)), { direction: p, speed: b } } function HU(e) { if (e === document.scrollingElement) { const { innerWidth: i, innerHeight: o } = window; return { top: 0, left: 0, right: i, bottom: o, width: i, height: o } } const { top: r, left: a, right: s, bottom: n } = e.getBoundingClientRect(); return { top: r, left: a, right: s, bottom: n, width: e.clientWidth, height: e.clientHeight } } function SD(e) { return e.reduce((r, a) => qc(r, Db(a)), zn) } function WU(e) { return e.reduce((r, a) => r + wD(a), 0) } function VU(e) { return e.reduce((r, a) => r + jD(a), 0) } function GU(e, r) { if (r === void 0 && (r = xd), !e) return; const { top: a, left: s, bottom: n, right: i } = r(e); bD(e) && (n <= 0 || i <= 0 || a >= window.innerHeight || s >= window.innerWidth) && e.scrollIntoView({ block: "center", inline: "center" }) } const KU = [["x", ["left", "right"], WU], ["y", ["top", "bottom"], VU]]; class aj { constructor(r, a) { this.rect = void 0, this.width = void 0, this.height = void 0, this.top = void 0, this.bottom = void 0, this.right = void 0, this.left = void 0; const s = jf(a), n = SD(s); this.rect = { ...r }, this.width = r.width, this.height = r.height; for (const [i, o, c] of KU) for (const u of o) Object.defineProperty(this, u, { get: () => { const m = c(s), g = n[i] - m; return this.rect[u] + g }, enumerable: !0 }); Object.defineProperty(this, "rect", { enumerable: !1 }) } } class zu { constructor(r) { this.target = void 0, this.listeners = [], this.removeAll = () => { this.listeners.forEach(a => { var s; return (s = this.target) == null ? void 0 : s.removeEventListener(...a) }) }, this.target = r } add(r, a, s) { var n; (n = this.target) == null || n.addEventListener(r, a, s), this.listeners.push([r, a, s]) } } function YU(e) { const { EventTarget: r } = Us(e); return e instanceof r ? e : fd(e) } function xy(e, r) { const a = Math.abs(e.x), s = Math.abs(e.y); return typeof r == "number" ? Math.sqrt(a ** 2 + s ** 2) > r : "x" in r && "y" in r ? a > r.x && s > r.y : "x" in r ? a > r.x : "y" in r ? s > r.y : !1 } var yn; (function (e) { e.Click = "click", e.DragStart = "dragstart", e.Keydown = "keydown", e.ContextMenu = "contextmenu", e.Resize = "resize", e.SelectionChange = "selectionchange", e.VisibilityChange = "visibilitychange" })(yn || (yn = {})); function B2(e) { e.preventDefault() } function QU(e) { e.stopPropagation() } var Gt; (function (e) { e.Space = "Space", e.Down = "ArrowDown", e.Right = "ArrowRight", e.Left = "ArrowLeft", e.Up = "ArrowUp", e.Esc = "Escape", e.Enter = "Enter", e.Tab = "Tab" })(Gt || (Gt = {})); const CD = { start: [Gt.Space, Gt.Enter], cancel: [Gt.Esc], end: [Gt.Space, Gt.Enter, Gt.Tab] }, XU = (e, r) => { let { currentCoordinates: a } = r; switch (e.code) { case Gt.Right: return { ...a, x: a.x + 25 }; case Gt.Left: return { ...a, x: a.x - 25 }; case Gt.Down: return { ...a, y: a.y + 25 }; case Gt.Up: return { ...a, y: a.y - 25 } } }; class sj { constructor(r) { this.props = void 0, this.autoScrollEnabled = !1, this.referenceCoordinates = void 0, this.listeners = void 0, this.windowListeners = void 0, this.props = r; const { event: { target: a } } = r; this.props = r, this.listeners = new zu(fd(a)), this.windowListeners = new zu(Us(a)), this.handleKeyDown = this.handleKeyDown.bind(this), this.handleCancel = this.handleCancel.bind(this), this.attach() } attach() { this.handleStart(), this.windowListeners.add(yn.Resize, this.handleCancel), this.windowListeners.add(yn.VisibilityChange, this.handleCancel), setTimeout(() => this.listeners.add(yn.Keydown, this.handleKeyDown)) } handleStart() { const { activeNode: r, onStart: a } = this.props, s = r.node.current; s && GU(s), a(zn) } handleKeyDown(r) { if (rj(r)) { const { active: a, context: s, options: n } = this.props, { keyboardCodes: i = CD, coordinateGetter: o = XU, scrollBehavior: c = "smooth" } = n, { code: u } = r; if (i.end.includes(u)) { this.handleEnd(r); return } if (i.cancel.includes(u)) { this.handleCancel(r); return } const { collisionRect: m } = s.current, g = m ? { x: m.left, y: m.top } : zn; this.referenceCoordinates || (this.referenceCoordinates = g); const f = o(r, { active: a, context: s.current, currentCoordinates: g }); if (f) { const y = Zu(f, g), p = { x: 0, y: 0 }, { scrollableAncestors: b } = s.current; for (const j of b) { const v = r.code, { isTop: S, isRight: k, isLeft: E, isBottom: C, maxScroll: N, minScroll: A } = kD(j), D = HU(j), I = { x: Math.min(v === Gt.Right ? D.right - D.width / 2 : D.right, Math.max(v === Gt.Right ? D.left : D.left + D.width / 2, f.x)), y: Math.min(v === Gt.Down ? D.bottom - D.height / 2 : D.bottom, Math.max(v === Gt.Down ? D.top : D.top + D.height / 2, f.y)) }, $ = v === Gt.Right && !k || v === Gt.Left && !E, B = v === Gt.Down && !C || v === Gt.Up && !S; if ($ && I.x !== f.x) { const W = j.scrollLeft + y.x, M = v === Gt.Right && W <= N.x || v === Gt.Left && W >= A.x; if (M && !y.y) { j.scrollTo({ left: W, behavior: c }); return } M ? p.x = j.scrollLeft - W : p.x = v === Gt.Right ? j.scrollLeft - N.x : j.scrollLeft - A.x, p.x && j.scrollBy({ left: -p.x, behavior: c }); break } else if (B && I.y !== f.y) { const W = j.scrollTop + y.y, M = v === Gt.Down && W <= N.y || v === Gt.Up && W >= A.y; if (M && !y.x) { j.scrollTo({ top: W, behavior: c }); return } M ? p.y = j.scrollTop - W : p.y = v === Gt.Down ? j.scrollTop - N.y : j.scrollTop - A.y, p.y && j.scrollBy({ top: -p.y, behavior: c }); break } } this.handleMove(r, qc(Zu(f, this.referenceCoordinates), p)) } } } handleMove(r, a) { const { onMove: s } = this.props; r.preventDefault(), s(a) } handleEnd(r) { const { onEnd: a } = this.props; r.preventDefault(), this.detach(), a() } handleCancel(r) { const { onCancel: a } = this.props; r.preventDefault(), this.detach(), a() } detach() { this.listeners.removeAll(), this.windowListeners.removeAll() } } sj.activators = [{ eventName: "onKeyDown", handler: (e, r, a) => { let { keyboardCodes: s = CD, onActivation: n } = r, { active: i } = a; const { code: o } = e.nativeEvent; if (s.start.includes(o)) { const c = i.activatorNode.current; return c && e.target !== c ? !1 : (e.preventDefault(), n?.({ event: e.nativeEvent }), !0) } return !1 } }]; function q2(e) { return !!(e && "distance" in e) } function H2(e) { return !!(e && "delay" in e) } class nj { constructor(r, a, s) { var n; s === void 0 && (s = YU(r.event.target)), this.props = void 0, this.events = void 0, this.autoScrollEnabled = !0, this.document = void 0, this.activated = !1, this.initialCoordinates = void 0, this.timeoutId = null, this.listeners = void 0, this.documentListeners = void 0, this.windowListeners = void 0, this.props = r, this.events = a; const { event: i } = r, { target: o } = i; this.props = r, this.events = a, this.document = fd(o), this.documentListeners = new zu(this.document), this.listeners = new zu(s), this.windowListeners = new zu(Us(o)), this.initialCoordinates = (n = Tb(i)) != null ? n : zn, this.handleStart = this.handleStart.bind(this), this.handleMove = this.handleMove.bind(this), this.handleEnd = this.handleEnd.bind(this), this.handleCancel = this.handleCancel.bind(this), this.handleKeydown = this.handleKeydown.bind(this), this.removeTextSelection = this.removeTextSelection.bind(this), this.attach() } attach() { const { events: r, props: { options: { activationConstraint: a, bypassActivationConstraint: s } } } = this; if (this.listeners.add(r.move.name, this.handleMove, { passive: !1 }), this.listeners.add(r.end.name, this.handleEnd), r.cancel && this.listeners.add(r.cancel.name, this.handleCancel), this.windowListeners.add(yn.Resize, this.handleCancel), this.windowListeners.add(yn.DragStart, B2), this.windowListeners.add(yn.VisibilityChange, this.handleCancel), this.windowListeners.add(yn.ContextMenu, B2), this.documentListeners.add(yn.Keydown, this.handleKeydown), a) { if (s != null && s({ event: this.props.event, activeNode: this.props.activeNode, options: this.props.options })) return this.handleStart(); if (H2(a)) { this.timeoutId = setTimeout(this.handleStart, a.delay), this.handlePending(a); return } if (q2(a)) { this.handlePending(a); return } } this.handleStart() } detach() { this.listeners.removeAll(), this.windowListeners.removeAll(), setTimeout(this.documentListeners.removeAll, 50), this.timeoutId !== null && (clearTimeout(this.timeoutId), this.timeoutId = null) } handlePending(r, a) { const { active: s, onPending: n } = this.props; n(s, r, this.initialCoordinates, a) } handleStart() { const { initialCoordinates: r } = this, { onStart: a } = this.props; r && (this.activated = !0, this.documentListeners.add(yn.Click, QU, { capture: !0 }), this.removeTextSelection(), this.documentListeners.add(yn.SelectionChange, this.removeTextSelection), a(r)) } handleMove(r) { var a; const { activated: s, initialCoordinates: n, props: i } = this, { onMove: o, options: { activationConstraint: c } } = i; if (!n) return; const u = (a = Tb(r)) != null ? a : zn, m = Zu(n, u); if (!s && c) { if (q2(c)) { if (c.tolerance != null && xy(m, c.tolerance)) return this.handleCancel(); if (xy(m, c.distance)) return this.handleStart() } if (H2(c) && xy(m, c.tolerance)) return this.handleCancel(); this.handlePending(c, m); return } r.cancelable && r.preventDefault(), o(u) } handleEnd() { const { onAbort: r, onEnd: a } = this.props; this.detach(), this.activated || r(this.props.active), a() } handleCancel() { const { onAbort: r, onCancel: a } = this.props; this.detach(), this.activated || r(this.props.active), a() } handleKeydown(r) { r.code === Gt.Esc && this.handleCancel() } removeTextSelection() { var r; (r = this.document.getSelection()) == null || r.removeAllRanges() } } const ZU = { cancel: { name: "pointercancel" }, move: { name: "pointermove" }, end: { name: "pointerup" } }; class ij extends nj { constructor(r) { const { event: a } = r, s = fd(a.target); super(r, ZU, s) } } ij.activators = [{ eventName: "onPointerDown", handler: (e, r) => { let { nativeEvent: a } = e, { onActivation: s } = r; return !a.isPrimary || a.button !== 0 ? !1 : (s?.({ event: a }), !0) } }]; const JU = { move: { name: "mousemove" }, end: { name: "mouseup" } }; var Ob; (function (e) { e[e.RightClick = 2] = "RightClick" })(Ob || (Ob = {})); class e7 extends nj { constructor(r) { super(r, JU, fd(r.event.target)) } } e7.activators = [{ eventName: "onMouseDown", handler: (e, r) => { let { nativeEvent: a } = e, { onActivation: s } = r; return a.button === Ob.RightClick ? !1 : (s?.({ event: a }), !0) } }]; const py = { cancel: { name: "touchcancel" }, move: { name: "touchmove" }, end: { name: "touchend" } }; class t7 extends nj { constructor(r) { super(r, py) } static setup() { return window.addEventListener(py.move.name, r, { capture: !1, passive: !1 }), function () { window.removeEventListener(py.move.name, r) }; function r() { } } } t7.activators = [{ eventName: "onTouchStart", handler: (e, r) => { let { nativeEvent: a } = e, { onActivation: s } = r; const { touches: n } = a; return n.length > 1 ? !1 : (s?.({ event: a }), !0) } }]; var Bu; (function (e) { e[e.Pointer = 0] = "Pointer", e[e.DraggableRect = 1] = "DraggableRect" })(Bu || (Bu = {})); var lh; (function (e) { e[e.TreeOrder = 0] = "TreeOrder", e[e.ReversedTreeOrder = 1] = "ReversedTreeOrder" })(lh || (lh = {})); function r7(e) { let { acceleration: r, activator: a = Bu.Pointer, canScroll: s, draggingRect: n, enabled: i, interval: o = 5, order: c = lh.TreeOrder, pointerCoordinates: u, scrollableAncestors: m, scrollableAncestorRects: g, delta: f, threshold: y } = e; const p = s7({ delta: f, disabled: !i }), [b, j] = hU(), v = h.useRef({ x: 0, y: 0 }), S = h.useRef({ x: 0, y: 0 }), k = h.useMemo(() => { switch (a) { case Bu.Pointer: return u ? { top: u.y, bottom: u.y, left: u.x, right: u.x } : null; case Bu.DraggableRect: return n } }, [a, n, u]), E = h.useRef(null), C = h.useCallback(() => { const A = E.current; if (!A) return; const D = v.current.x * S.current.x, I = v.current.y * S.current.y; A.scrollBy(D, I) }, []), N = h.useMemo(() => c === lh.TreeOrder ? [...m].reverse() : m, [c, m]); h.useEffect(() => { if (!i || !m.length || !k) { j(); return } for (const A of N) { if (s?.(A) === !1) continue; const D = m.indexOf(A), I = g[D]; if (!I) continue; const { direction: $, speed: B } = qU(A, I, k, r, y); for (const W of ["x", "y"]) p[W][$[W]] || (B[W] = 0, $[W] = 0); if (B.x > 0 || B.y > 0) { j(), E.current = A, b(C, o), v.current = B, S.current = $; return } } v.current = { x: 0, y: 0 }, S.current = { x: 0, y: 0 }, j() }, [r, C, s, j, i, o, JSON.stringify(k), JSON.stringify(p), b, m, N, g, JSON.stringify(y)]) } const a7 = { x: { [$a.Backward]: !1, [$a.Forward]: !1 }, y: { [$a.Backward]: !1, [$a.Forward]: !1 } }; function s7(e) { let { delta: r, disabled: a } = e; const s = Pb(r); return Am(n => { if (a || !s || !n) return a7; const i = { x: Math.sign(r.x - s.x), y: Math.sign(r.y - s.y) }; return { x: { [$a.Backward]: n.x[$a.Backward] || i.x === -1, [$a.Forward]: n.x[$a.Forward] || i.x === 1 }, y: { [$a.Backward]: n.y[$a.Backward] || i.y === -1, [$a.Forward]: n.y[$a.Forward] || i.y === 1 } } }, [a, r, s]) } function n7(e, r) { const a = r != null ? e.get(r) : void 0, s = a ? a.node.current : null; return Am(n => { var i; return r == null ? null : (i = s ?? n) != null ? i : null }, [s, r]) } function i7(e, r) { return h.useMemo(() => e.reduce((a, s) => { const { sensor: n } = s, i = n.activators.map(o => ({ eventName: o.eventName, handler: r(o.handler, s) })); return [...a, ...i] }, []), [e, r]) } var em; (function (e) { e[e.Always = 0] = "Always", e[e.BeforeDragging = 1] = "BeforeDragging", e[e.WhileDragging = 2] = "WhileDragging" })(em || (em = {})); var Ib; (function (e) { e.Optimized = "optimized" })(Ib || (Ib = {})); const W2 = new Map; function o7(e, r) { let { dragging: a, dependencies: s, config: n } = r; const [i, o] = h.useState(null), { frequency: c, measure: u, strategy: m } = n, g = h.useRef(e), f = v(), y = Xu(f), p = h.useCallback(function (S) { S === void 0 && (S = []), !y.current && o(k => k === null ? S : k.concat(S.filter(E => !k.includes(E)))) }, [y]), b = h.useRef(null), j = Am(S => { if (f && !a) return W2; if (!S || S === W2 || g.current !== e || i != null) { const k = new Map; for (let E of e) { if (!E) continue; if (i && i.length > 0 && !i.includes(E.id) && E.rect.current) { k.set(E.id, E.rect.current); continue } const C = E.node.current, N = C ? new aj(u(C), C) : null; E.rect.current = N, N && k.set(E.id, N) } return k } return S }, [e, i, a, f, u]); return h.useEffect(() => { g.current = e }, [e]), h.useEffect(() => { f || p() }, [a, f]), h.useEffect(() => { i && i.length > 0 && o(null) }, [JSON.stringify(i)]), h.useEffect(() => { f || typeof c != "number" || b.current !== null || (b.current = setTimeout(() => { p(), b.current = null }, c)) }, [c, f, p, ...s]), { droppableRects: j, measureDroppableContainers: p, measuringScheduled: i != null }; function v() { switch (m) { case em.Always: return !1; case em.BeforeDragging: return a; default: return !a } } } function ED(e, r) { return Am(a => e ? a || (typeof r == "function" ? r(e) : e) : null, [r, e]) } function l7(e, r) { return ED(e, r) } function c7(e) { let { callback: r, disabled: a } = e; const s = tj(r), n = h.useMemo(() => { if (a || typeof window > "u" || typeof window.MutationObserver > "u") return; const { MutationObserver: i } = window; return new i(s) }, [s, a]); return h.useEffect(() => () => n?.disconnect(), [n]), n } function Nf(e) { let { callback: r, disabled: a } = e; const s = tj(r), n = h.useMemo(() => { if (a || typeof window > "u" || typeof window.ResizeObserver > "u") return; const { ResizeObserver: i } = window; return new i(s) }, [a]); return h.useEffect(() => () => n?.disconnect(), [n]), n } function d7(e) { return new aj(xd(e), e) } function V2(e, r, a) { r === void 0 && (r = d7); const [s, n] = h.useState(null); function i() { n(u => { if (!e) return null; if (e.isConnected === !1) { var m; return (m = u ?? a) != null ? m : null } const g = r(e); return JSON.stringify(u) === JSON.stringify(g) ? u : g }) } const o = c7({ callback(u) { if (e) for (const m of u) { const { type: g, target: f } = m; if (g === "childList" && f instanceof HTMLElement && f.contains(e)) { i(); break } } } }), c = Nf({ callback: i }); return ii(() => { i(), e ? (c?.observe(e), o?.observe(document.body, { childList: !0, subtree: !0 })) : (c?.disconnect(), o?.disconnect()) }, [e]), s } function u7(e) { const r = ED(e); return vD(e, r) } const G2 = []; function m7(e) { const r = h.useRef(e), a = Am(s => e ? s && s !== G2 && e && r.current && e.parentNode === r.current.parentNode ? s : jf(e) : G2, [e]); return h.useEffect(() => { r.current = e }, [e]), a } function g7(e) { const [r, a] = h.useState(null), s = h.useRef(e), n = h.useCallback(i => { const o = fy(i.target); o && a(c => c ? (c.set(o, Db(o)), new Map(c)) : null) }, []); return h.useEffect(() => { const i = s.current; if (e !== i) { o(i); const c = e.map(u => { const m = fy(u); return m ? (m.addEventListener("scroll", n, { passive: !0 }), [m, Db(m)]) : null }).filter(u => u != null); a(c.length ? new Map(c) : null), s.current = e } return () => { o(e), o(i) }; function o(c) { c.forEach(u => { const m = fy(u); m?.removeEventListener("scroll", n) }) } }, [n, e]), h.useMemo(() => e.length ? r ? Array.from(r.values()).reduce((i, o) => qc(i, o), zn) : SD(e) : zn, [e, r]) } function K2(e, r) { r === void 0 && (r = []); const a = h.useRef(null); return h.useEffect(() => { a.current = null }, r), h.useEffect(() => { const s = e !== zn; s && !a.current && (a.current = e), !s && a.current && (a.current = null) }, [e]), a.current ? Zu(e, a.current) : zn } function h7(e) { h.useEffect(() => { if (!wf) return; const r = e.map(a => { let { sensor: s } = a; return s.setup == null ? void 0 : s.setup() }); return () => { for (const a of r) a?.() } }, e.map(r => { let { sensor: a } = r; return a })) } function f7(e, r) { return h.useMemo(() => e.reduce((a, s) => { let { eventName: n, handler: i } = s; return a[n] = o => { i(o, r) }, a }, {}), [e, r]) } function AD(e) { return h.useMemo(() => e ? UU(e) : null, [e]) } const Y2 = []; function x7(e, r) { r === void 0 && (r = xd); const [a] = e, s = AD(a ? Us(a) : null), [n, i] = h.useState(Y2); function o() { i(() => e.length ? e.map(u => ND(u) ? s : new aj(r(u), u)) : Y2) } const c = Nf({ callback: o }); return ii(() => { c?.disconnect(), o(), e.forEach(u => c?.observe(u)) }, [e]), n } function p7(e) { if (!e) return null; if (e.children.length > 1) return e; const r = e.children[0]; return Em(r) ? r : e } function y7(e) { let { measure: r } = e; const [a, s] = h.useState(null), n = h.useCallback(m => { for (const { target: g } of m) if (Em(g)) { s(f => { const y = r(g); return f ? { ...f, width: y.width, height: y.height } : y }); break } }, [r]), i = Nf({ callback: n }), o = h.useCallback(m => { const g = p7(m); i?.disconnect(), g && i?.observe(g), s(g ? r(g) : null) }, [r, i]), [c, u] = ih(o); return h.useMemo(() => ({ nodeRef: c, rect: a, setRef: u }), [a, c, u]) } const v7 = [{ sensor: ij, options: {} }, { sensor: sj, options: {} }], b7 = { current: {} }, z0 = { draggable: { measure: z2 }, droppable: { measure: z2, strategy: em.WhileDragging, frequency: Ib.Optimized }, dragOverlay: { measure: xd } }; class qu extends Map { get(r) { var a; return r != null && (a = super.get(r)) != null ? a : void 0 } toArray() { return Array.from(this.values()) } getEnabled() { return this.toArray().filter(r => { let { disabled: a } = r; return !a }) } getNodeFor(r) { var a, s; return (a = (s = this.get(r)) == null ? void 0 : s.node.current) != null ? a : void 0 } } const w7 = { activatorEvent: null, active: null, activeNode: null, activeNodeRect: null, collisions: null, containerNodeRect: null, draggableNodes: new Map, droppableRects: new Map, droppableContainers: new qu, over: null, dragOverlay: { nodeRef: { current: null }, rect: null, setRef: oh }, scrollableAncestors: [], scrollableAncestorRects: [], measuringConfiguration: z0, measureDroppableContainers: oh, windowRect: null, measuringScheduled: !1 }, j7 = { activatorEvent: null, activators: [], active: null, activeNodeRect: null, ariaDescribedById: { draggable: "" }, dispatch: oh, draggableNodes: new Map, over: null, measureDroppableContainers: oh }, kf = h.createContext(j7), PD = h.createContext(w7); function N7() { return { draggable: { active: null, initialCoordinates: { x: 0, y: 0 }, nodes: new Map, translate: { x: 0, y: 0 } }, droppable: { containers: new qu } } } function k7(e, r) { switch (r.type) { case Sa.DragStart: return { ...e, draggable: { ...e.draggable, initialCoordinates: r.initialCoordinates, active: r.active } }; case Sa.DragMove: return e.draggable.active == null ? e : { ...e, draggable: { ...e.draggable, translate: { x: r.coordinates.x - e.draggable.initialCoordinates.x, y: r.coordinates.y - e.draggable.initialCoordinates.y } } }; case Sa.DragEnd: case Sa.DragCancel: return { ...e, draggable: { ...e.draggable, active: null, initialCoordinates: { x: 0, y: 0 }, translate: { x: 0, y: 0 } } }; case Sa.RegisterDroppable: { const { element: a } = r, { id: s } = a, n = new qu(e.droppable.containers); return n.set(s, a), { ...e, droppable: { ...e.droppable, containers: n } } } case Sa.SetDroppableDisabled: { const { id: a, key: s, disabled: n } = r, i = e.droppable.containers.get(a); if (!i || s !== i.key) return e; const o = new qu(e.droppable.containers); return o.set(a, { ...i, disabled: n }), { ...e, droppable: { ...e.droppable, containers: o } } } case Sa.UnregisterDroppable: { const { id: a, key: s } = r, n = e.droppable.containers.get(a); if (!n || s !== n.key) return e; const i = new qu(e.droppable.containers); return i.delete(a), { ...e, droppable: { ...e.droppable, containers: i } } } default: return e } } function S7(e) { let { disabled: r } = e; const { active: a, activatorEvent: s, draggableNodes: n } = h.useContext(kf), i = Pb(s), o = Pb(a?.id); return h.useEffect(() => { if (!r && !s && i && o != null) { if (!rj(i) || document.activeElement === i.target) return; const c = n.get(o); if (!c) return; const { activatorNode: u, node: m } = c; if (!u.current && !m.current) return; requestAnimationFrame(() => { for (const g of [u.current, m.current]) { if (!g) continue; const f = pU(g); if (f) { f.focus(); break } } }) } }, [s, r, n, o, i]), null } function C7(e, r) { let { transform: a, ...s } = r; return e != null && e.length ? e.reduce((n, i) => i({ transform: n, ...s }), a) : a } function E7(e) { return h.useMemo(() => ({ draggable: { ...z0.draggable, ...e?.draggable }, droppable: { ...z0.droppable, ...e?.droppable }, dragOverlay: { ...z0.dragOverlay, ...e?.dragOverlay } }), [e?.draggable, e?.droppable, e?.dragOverlay]) } function A7(e) { let { activeNode: r, measure: a, initialRect: s, config: n = !0 } = e; const i = h.useRef(!1), { x: o, y: c } = typeof n == "boolean" ? { x: n, y: n } : n; ii(() => { if (!o && !c || !r) { i.current = !1; return } if (i.current || !s) return; const m = r?.node.current; if (!m || m.isConnected === !1) return; const g = a(m), f = vD(g, s); if (o || (f.x = 0), c || (f.y = 0), i.current = !0, Math.abs(f.x) > 0 || Math.abs(f.y) > 0) { const y = bD(m); y && y.scrollBy({ top: f.y, left: f.x }) } }, [r, o, c, s, a]) } const TD = h.createContext({ ...zn, scaleX: 1, scaleY: 1 }); var Do; (function (e) { e[e.Uninitialized = 0] = "Uninitialized", e[e.Initializing = 1] = "Initializing", e[e.Initialized = 2] = "Initialized" })(Do || (Do = {})); const P7 = h.memo(function (r) { var a, s, n, i; let { id: o, accessibility: c, autoScroll: u = !0, children: m, sensors: g = v7, collisionDetection: f = OU, measuring: y, modifiers: p, ...b } = r; const j = h.useReducer(k7, void 0, N7), [v, S] = j, [k, E] = NU(), [C, N] = h.useState(Do.Uninitialized), A = C === Do.Initialized, { draggable: { active: D, nodes: I, translate: $ }, droppable: { containers: B } } = v, W = D != null ? I.get(D) : null, M = h.useRef({ initial: null, translated: null }), q = h.useMemo(() => { var Nt; return D != null ? { id: D, data: (Nt = W?.data) != null ? Nt : b7, rect: M } : null }, [D, W]), V = h.useRef(null), [X, se] = h.useState(null), [le, ee] = h.useState(null), L = Xu(b, Object.values(b)), z = Pm("DndDescribedBy", o), T = h.useMemo(() => B.getEnabled(), [B]), _ = E7(y), { droppableRects: H, measureDroppableContainers: U, measuringScheduled: K } = o7(T, { dragging: A, dependencies: [$.x, $.y], config: _.droppable }), Z = n7(I, D), J = h.useMemo(() => le ? Tb(le) : null, [le]), te = tr(), G = l7(Z, _.draggable.measure); A7({ activeNode: D != null ? I.get(D) : null, config: te.layoutShiftCompensation, initialRect: G, measure: _.draggable.measure }); const de = V2(Z, _.draggable.measure, G), Te = V2(Z ? Z.parentElement : null), pe = h.useRef({ activatorEvent: null, active: null, activeNode: Z, collisionRect: null, collisions: null, droppableRects: H, draggableNodes: I, draggingNode: null, draggingNodeRect: null, droppableContainers: B, over: null, scrollableAncestors: [], scrollAdjustedTranslate: null }), He = B.getNodeFor((a = pe.current.over) == null ? void 0 : a.id), ne = y7({ measure: _.dragOverlay.measure }), De = (s = ne.nodeRef.current) != null ? s : Z, $e = A ? (n = ne.rect) != null ? n : de : null, Et = !!(ne.nodeRef.current && ne.rect), Bt = u7(Et ? null : de), Ft = AD(De ? Us(De) : null), mt = m7(A ? He ?? Z : null), ce = x7(mt), Xe = C7(p, { transform: { x: $.x - Bt.x, y: $.y - Bt.y, scaleX: 1, scaleY: 1 }, activatorEvent: le, active: q, activeNodeRect: de, containerNodeRect: Te, draggingNodeRect: $e, over: pe.current.over, overlayNodeRect: ne.rect, scrollableAncestors: mt, scrollableAncestorRects: ce, windowRect: Ft }), jt = J ? qc(J, $) : null, Q = g7(mt), Le = K2(Q), Ve = K2(Q, [de]), et = qc(Xe, Le), pt = $e ? RU($e, Xe) : null, Y = q && pt ? f({ active: q, collisionRect: pt, droppableRects: H, droppableContainers: T, pointerCoordinates: jt }) : null, je = yD(Y, "id"), [Ne, fe] = h.useState(null), ke = Et ? Xe : qc(Xe, Ve), he = IU(ke, (i = Ne?.rect) != null ? i : null, de), Ee = h.useRef(null), Ge = h.useCallback((Nt, Ut) => { let { sensor: sr, options: _r } = Ut; if (V.current == null) return; const wr = I.get(V.current); if (!wr) return; const kr = Nt.nativeEvent, Sr = new sr({ active: V.current, activeNode: wr, event: kr, options: _r, context: pe, onAbort(nr) { if (!I.get(nr)) return; const { onDragAbort: lr } = L.current, ia = { id: nr }; lr?.(ia), k({ type: "onDragAbort", event: ia }) }, onPending(nr, na, lr, ia) { if (!I.get(nr)) return; const { onDragPending: Wr } = L.current, Vr = { id: nr, constraint: na, initialCoordinates: lr, offset: ia }; Wr?.(Vr), k({ type: "onDragPending", event: Vr }) }, onStart(nr) { const na = V.current; if (na == null) return; const lr = I.get(na); if (!lr) return; const { onDragStart: ia } = L.current, xa = { activatorEvent: kr, active: { id: na, data: lr.data, rect: M } }; Ro.unstable_batchedUpdates(() => { ia?.(xa), N(Do.Initializing), S({ type: Sa.DragStart, initialCoordinates: nr, active: na }), k({ type: "onDragStart", event: xa }), se(Ee.current), ee(kr) }) }, onMove(nr) { S({ type: Sa.DragMove, coordinates: nr }) }, onEnd: Hr(Sa.DragEnd), onCancel: Hr(Sa.DragCancel) }); Ee.current = Sr; function Hr(nr) { return async function () { const { active: lr, collisions: ia, over: xa, scrollAdjustedTranslate: Wr } = pe.current; let Vr = null; if (lr && Wr) { const { cancelDrop: jr } = L.current; Vr = { activatorEvent: kr, active: lr, collisions: ia, delta: Wr, over: xa }, nr === Sa.DragEnd && typeof jr == "function" && await Promise.resolve(jr(Vr)) && (nr = Sa.DragCancel) } V.current = null, Ro.unstable_batchedUpdates(() => { S({ type: nr }), N(Do.Uninitialized), fe(null), se(null), ee(null), Ee.current = null; const jr = nr === Sa.DragEnd ? "onDragEnd" : "onDragCancel"; if (Vr) { const ge = L.current[jr]; ge?.(Vr), k({ type: jr, event: Vr }) } }) } } }, [I]), qe = h.useCallback((Nt, Ut) => (sr, _r) => { const wr = sr.nativeEvent, kr = I.get(_r); if (V.current !== null || !kr || wr.dndKit || wr.defaultPrevented) return; const Sr = { active: kr }; Nt(sr, Ut.options, Sr) === !0 && (wr.dndKit = { capturedBy: Ut.sensor }, V.current = _r, Ge(sr, Ut)) }, [I, Ge]), vt = i7(g, qe); h7(g), ii(() => { de && C === Do.Initializing && N(Do.Initialized) }, [de, C]), h.useEffect(() => { const { onDragMove: Nt } = L.current, { active: Ut, activatorEvent: sr, collisions: _r, over: wr } = pe.current; if (!Ut || !sr) return; const kr = { active: Ut, activatorEvent: sr, collisions: _r, delta: { x: et.x, y: et.y }, over: wr }; Ro.unstable_batchedUpdates(() => { Nt?.(kr), k({ type: "onDragMove", event: kr }) }) }, [et.x, et.y]), h.useEffect(() => { const { active: Nt, activatorEvent: Ut, collisions: sr, droppableContainers: _r, scrollAdjustedTranslate: wr } = pe.current; if (!Nt || V.current == null || !Ut || !wr) return; const { onDragOver: kr } = L.current, Sr = _r.get(je), Hr = Sr && Sr.rect.current ? { id: Sr.id, rect: Sr.rect.current, data: Sr.data, disabled: Sr.disabled } : null, nr = { active: Nt, activatorEvent: Ut, collisions: sr, delta: { x: wr.x, y: wr.y }, over: Hr }; Ro.unstable_batchedUpdates(() => { fe(Hr), kr?.(nr), k({ type: "onDragOver", event: nr }) }) }, [je]), ii(() => { pe.current = { activatorEvent: le, active: q, activeNode: Z, collisionRect: pt, collisions: Y, droppableRects: H, draggableNodes: I, draggingNode: De, draggingNodeRect: $e, droppableContainers: B, over: Ne, scrollableAncestors: mt, scrollAdjustedTranslate: et }, M.current = { initial: $e, translated: pt } }, [q, Z, Y, pt, I, De, $e, H, B, Ne, mt, et]), r7({ ...te, delta: $, draggingRect: pt, pointerCoordinates: jt, scrollableAncestors: mt, scrollableAncestorRects: ce }); const yr = h.useMemo(() => ({ active: q, activeNode: Z, activeNodeRect: de, activatorEvent: le, collisions: Y, containerNodeRect: Te, dragOverlay: ne, draggableNodes: I, droppableContainers: B, droppableRects: H, over: Ne, measureDroppableContainers: U, scrollableAncestors: mt, scrollableAncestorRects: ce, measuringConfiguration: _, measuringScheduled: K, windowRect: Ft }), [q, Z, de, le, Y, Te, ne, I, B, H, Ne, U, mt, ce, _, K, Ft]), vr = h.useMemo(() => ({ activatorEvent: le, activators: vt, active: q, activeNodeRect: de, ariaDescribedById: { draggable: z }, dispatch: S, draggableNodes: I, over: Ne, measureDroppableContainers: U }), [le, vt, q, de, S, z, I, Ne, U]); return Je.createElement(fD.Provider, { value: E }, Je.createElement(kf.Provider, { value: vr }, Je.createElement(PD.Provider, { value: yr }, Je.createElement(TD.Provider, { value: he }, m)), Je.createElement(S7, { disabled: c?.restoreFocus === !1 })), Je.createElement(CU, { ...c, hiddenTextDescribedById: z })); function tr() { const Nt = X?.autoScrollEnabled === !1, Ut = typeof u == "object" ? u.enabled === !1 : u === !1, sr = A && !Nt && !Ut; return typeof u == "object" ? { ...u, enabled: sr } : { enabled: sr } } }), T7 = h.createContext(null), Q2 = "button", D7 = "Draggable"; function O7(e) { let { id: r, data: a, disabled: s = !1, attributes: n } = e; const i = Pm(D7), { activators: o, activatorEvent: c, active: u, activeNodeRect: m, ariaDescribedById: g, draggableNodes: f, over: y } = h.useContext(kf), { role: p = Q2, roleDescription: b = "draggable", tabIndex: j = 0 } = n ?? {}, v = u?.id === r, S = h.useContext(v ? TD : T7), [k, E] = ih(), [C, N] = ih(), A = f7(o, r), D = Xu(a); ii(() => (f.set(r, { id: r, key: i, node: k, activatorNode: C, data: D }), () => { const $ = f.get(r); $ && $.key === i && f.delete(r) }), [f, r]); const I = h.useMemo(() => ({ role: p, tabIndex: j, "aria-disabled": s, "aria-pressed": v && p === Q2 ? !0 : void 0, "aria-roledescription": b, "aria-describedby": g.draggable }), [s, p, j, v, b, g.draggable]); return { active: u, activatorEvent: c, activeNodeRect: m, attributes: I, isDragging: v, listeners: s ? void 0 : A, node: k, over: y, setNodeRef: E, setActivatorNodeRef: N, transform: S } } function I7() { return h.useContext(PD) } const L7 = "Droppable", R7 = { timeout: 25 }; function M7(e) { let { data: r, disabled: a = !1, id: s, resizeObserverConfig: n } = e; const i = Pm(L7), { active: o, dispatch: c, over: u, measureDroppableContainers: m } = h.useContext(kf), g = h.useRef({ disabled: a }), f = h.useRef(!1), y = h.useRef(null), p = h.useRef(null), { disabled: b, updateMeasurementsFor: j, timeout: v } = { ...R7, ...n }, S = Xu(j ?? s), k = h.useCallback(() => { if (!f.current) { f.current = !0; return } p.current != null && clearTimeout(p.current), p.current = setTimeout(() => { m(Array.isArray(S.current) ? S.current : [S.current]), p.current = null }, v) }, [v]), E = Nf({ callback: k, disabled: b || !o }), C = h.useCallback((I, $) => { E && ($ && (E.unobserve($), f.current = !1), I && E.observe(I)) }, [E]), [N, A] = ih(C), D = Xu(r); return h.useEffect(() => { !E || !N.current || (E.disconnect(), f.current = !1, E.observe(N.current)) }, [N, E]), h.useEffect(() => (c({ type: Sa.RegisterDroppable, element: { id: s, key: i, disabled: a, node: N, rect: y, data: D } }), () => c({ type: Sa.UnregisterDroppable, key: i, id: s })), [s]), h.useEffect(() => { a !== g.current.disabled && (c({ type: Sa.SetDroppableDisabled, id: s, key: i, disabled: a }), g.current.disabled = a) }, [s, i, a, c]), { active: o, rect: y, isOver: u?.id === s, node: N, over: u, setNodeRef: A } } function oj(e, r, a) { const s = e.slice(); return s.splice(a < 0 ? s.length + a : a, 0, s.splice(r, 1)[0]), s } function _7(e, r) { return e.reduce((a, s, n) => { const i = r.get(s); return i && (a[n] = i), a }, Array(e.length)) } function g0(e) { return e !== null && e >= 0 } function $7(e, r) { if (e === r) return !0; if (e.length !== r.length) return !1; for (let a = 0; a < e.length; a++)if (e[a] !== r[a]) return !1; return !0 } function U7(e) { return typeof e == "boolean" ? { draggable: e, droppable: e } : e } const DD = e => { let { rects: r, activeIndex: a, overIndex: s, index: n } = e; const i = oj(r, s, a), o = r[n], c = i[n]; return !c || !o ? null : { x: c.left - o.left, y: c.top - o.top, scaleX: c.width / o.width, scaleY: c.height / o.height } }, h0 = { scaleX: 1, scaleY: 1 }, F7 = e => { var r; let { activeIndex: a, activeNodeRect: s, index: n, rects: i, overIndex: o } = e; const c = (r = i[a]) != null ? r : s; if (!c) return null; if (n === a) { const m = i[o]; return m ? { x: 0, y: a < o ? m.top + m.height - (c.top + c.height) : m.top - c.top, ...h0 } : null } const u = z7(i, n, a); return n > a && n <= o ? { x: 0, y: -c.height - u, ...h0 } : n < a && n >= o ? { x: 0, y: c.height + u, ...h0 } : { x: 0, y: 0, ...h0 } }; function z7(e, r, a) { const s = e[r], n = e[r - 1], i = e[r + 1]; return s ? a < r ? n ? s.top - (n.top + n.height) : i ? i.top - (s.top + s.height) : 0 : i ? i.top - (s.top + s.height) : n ? s.top - (n.top + n.height) : 0 : 0 } const OD = "Sortable", ID = Je.createContext({ activeIndex: -1, containerId: OD, disableTransforms: !1, items: [], overIndex: -1, useDragOverlay: !1, sortedRects: [], strategy: DD, disabled: { draggable: !1, droppable: !1 } }); function B7(e) { let { children: r, id: a, items: s, strategy: n = DD, disabled: i = !1 } = e; const { active: o, dragOverlay: c, droppableRects: u, over: m, measureDroppableContainers: g } = I7(), f = Pm(OD, a), y = c.rect !== null, p = h.useMemo(() => s.map(A => typeof A == "object" && "id" in A ? A.id : A), [s]), b = o != null, j = o ? p.indexOf(o.id) : -1, v = m ? p.indexOf(m.id) : -1, S = h.useRef(p), k = !$7(p, S.current), E = v !== -1 && j === -1 || k, C = U7(i); ii(() => { k && b && g(p) }, [k, p, b, g]), h.useEffect(() => { S.current = p }, [p]); const N = h.useMemo(() => ({ activeIndex: j, containerId: f, disabled: C, disableTransforms: E, items: p, overIndex: v, useDragOverlay: y, sortedRects: _7(p, u), strategy: n }), [j, f, C.draggable, C.droppable, E, p, v, u, y, n]); return Je.createElement(ID.Provider, { value: N }, r) } const q7 = e => { let { id: r, items: a, activeIndex: s, overIndex: n } = e; return oj(a, s, n).indexOf(r) }, H7 = e => { let { containerId: r, isSorting: a, wasDragging: s, index: n, items: i, newIndex: o, previousItems: c, previousContainerId: u, transition: m } = e; return !m || !s || c !== i && n === o ? !1 : a ? !0 : o !== n && r === u }, W7 = { duration: 200, easing: "ease" }, LD = "transform", V7 = Ju.Transition.toString({ property: LD, duration: 0, easing: "linear" }), G7 = { roleDescription: "sortable" }; function K7(e) { let { disabled: r, index: a, node: s, rect: n } = e; const [i, o] = h.useState(null), c = h.useRef(a); return ii(() => { if (!r && a !== c.current && s.current) { const u = n.current; if (u) { const m = xd(s.current, { ignoreTransform: !0 }), g = { x: u.left - m.left, y: u.top - m.top, scaleX: u.width / m.width, scaleY: u.height / m.height }; (g.x || g.y) && o(g) } } a !== c.current && (c.current = a) }, [r, a, s, n]), h.useEffect(() => { i && o(null) }, [i]), i } function Y7(e) { let { animateLayoutChanges: r = H7, attributes: a, disabled: s, data: n, getNewIndex: i = q7, id: o, strategy: c, resizeObserverConfig: u, transition: m = W7 } = e; const { items: g, containerId: f, activeIndex: y, disabled: p, disableTransforms: b, sortedRects: j, overIndex: v, useDragOverlay: S, strategy: k } = h.useContext(ID), E = Q7(s, p), C = g.indexOf(o), N = h.useMemo(() => ({ sortable: { containerId: f, index: C, items: g }, ...n }), [f, n, C, g]), A = h.useMemo(() => g.slice(g.indexOf(o)), [g, o]), { rect: D, node: I, isOver: $, setNodeRef: B } = M7({ id: o, data: N, disabled: E.droppable, resizeObserverConfig: { updateMeasurementsFor: A, ...u } }), { active: W, activatorEvent: M, activeNodeRect: q, attributes: V, setNodeRef: X, listeners: se, isDragging: le, over: ee, setActivatorNodeRef: L, transform: z } = O7({ id: o, data: N, attributes: { ...G7, ...a }, disabled: E.draggable }), T = gU(B, X), _ = !!W, H = _ && !b && g0(y) && g0(v), U = !S && le, K = U && H ? z : null, J = H ? K ?? (c ?? k)({ rects: j, activeNodeRect: q, activeIndex: y, overIndex: v, index: C }) : null, te = g0(y) && g0(v) ? i({ id: o, items: g, activeIndex: y, overIndex: v }) : C, G = W?.id, de = h.useRef({ activeId: G, items: g, newIndex: te, containerId: f }), Te = g !== de.current.items, pe = r({ active: W, containerId: f, isDragging: le, isSorting: _, id: o, index: C, items: g, newIndex: de.current.newIndex, previousItems: de.current.items, previousContainerId: de.current.containerId, transition: m, wasDragging: de.current.activeId != null }), He = K7({ disabled: !pe, index: C, node: I, rect: D }); return h.useEffect(() => { _ && de.current.newIndex !== te && (de.current.newIndex = te), f !== de.current.containerId && (de.current.containerId = f), g !== de.current.items && (de.current.items = g) }, [_, te, f, g]), h.useEffect(() => { if (G === de.current.activeId) return; if (G != null && de.current.activeId == null) { de.current.activeId = G; return } const De = setTimeout(() => { de.current.activeId = G }, 50); return () => clearTimeout(De) }, [G]), { active: W, activeIndex: y, attributes: V, data: N, rect: D, index: C, newIndex: te, items: g, isOver: $, isSorting: _, isDragging: le, listeners: se, node: I, overIndex: v, over: ee, setNodeRef: T, setActivatorNodeRef: L, setDroppableNodeRef: B, setDraggableNodeRef: X, transform: He ?? J, transition: ne() }; function ne() { if (He || Te && de.current.newIndex === C) return V7; if (!(U && !rj(M) || !m) && (_ || pe)) return Ju.Transition.toString({ ...m, property: LD }) } } function Q7(e, r) { var a, s; return typeof e == "boolean" ? { draggable: e, droppable: !1 } : { draggable: (a = e?.draggable) != null ? a : r.draggable, droppable: (s = e?.droppable) != null ? s : r.droppable } } function ch(e) { if (!e) return !1; const r = e.data.current; return !!(r && "sortable" in r && typeof r.sortable == "object" && "containerId" in r.sortable && "items" in r.sortable && "index" in r.sortable) } const X7 = [Gt.Down, Gt.Right, Gt.Up, Gt.Left], Z7 = (e, r) => { let { context: { active: a, collisionRect: s, droppableRects: n, droppableContainers: i, over: o, scrollableAncestors: c } } = r; if (X7.includes(e.code)) { if (e.preventDefault(), !a || !s) return; const u = []; i.getEnabled().forEach(f => { if (!f || f != null && f.disabled) return; const y = n.get(f.id); if (y) switch (e.code) { case Gt.Down: s.top < y.top && u.push(f); break; case Gt.Up: s.top > y.top && u.push(f); break; case Gt.Left: s.left > y.left && u.push(f); break; case Gt.Right: s.left < y.left && u.push(f); break } }); const m = TU({ collisionRect: s, droppableRects: n, droppableContainers: u }); let g = yD(m, "id"); if (g === o?.id && m.length > 1 && (g = m[1].id), g != null) { const f = i.get(a.id), y = i.get(g), p = y ? n.get(y.id) : null, b = y?.node.current; if (b && p && f && y) { const v = jf(b).some((A, D) => c[D] !== A), S = RD(f, y), k = J7(f, y), E = v || !S ? { x: 0, y: 0 } : { x: k ? s.width - p.width : 0, y: k ? s.height - p.height : 0 }, C = { x: p.left, y: p.top }; return E.x && E.y ? C : Zu(C, E) } } } }; function RD(e, r) { return !ch(e) || !ch(r) ? !1 : e.data.current.sortable.containerId === r.data.current.sortable.containerId } function J7(e, r) { return !ch(e) || !ch(r) || !RD(e, r) ? !1 : e.data.current.sortable.index < r.data.current.sortable.index } const e8 = ({ id: e, item: r, isActive: a, sidebarCollapsed: s, hoveredItem: n, onHover: i, onNavigate: o, activeHref: c }) => { const [u, m] = Je.useState(!1), { attributes: g, listeners: f, setNodeRef: y, transform: p, transition: b, isDragging: j } = Y7({ id: e }), v = r.children && r.children.length > 0, S = v && r.children?.some(A => c === A.href); Je.useEffect(() => { S && m(!0) }, [S]); const k = { transform: Ju.Transform.toString(p), transition: b, opacity: j ? .5 : 1 }, E = r.icon, C = n === r.name, N = A => { j || (r.children && r.children.length > 0 && !s ? (A.preventDefault(), m(!u)) : o(r.href)) }; return s ? t.jsx("div", { ref: y, style: k, ...g, ...f, className: "relative", children: t.jsx("div", { className: `flex items-center justify-center h-11 md:h-10 px-3 md:px-2 rounded-lg text-sm font-medium cursor-pointer transition-colors group ${a || S ? "bg-weconnect-red text-white shadow-md" : "text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800"} ${j ? "shadow-lg ring-2 ring-blue-400 dark:ring-blue-600" : ""}`, onMouseEnter: () => i(r.name), onMouseLeave: () => i(null), onClick: A => N(A), children: t.jsx(E, { size: 20, className: "md:w-[18px] md:h-[18px]" }) }) }) : t.jsxs("div", { ref: y, style: k, className: "relative", children: [t.jsxs("div", { className: `flex items-center h-12 md:h-11 rounded-lg text-sm font-medium transition-colors group justify-between ${a || S ? "bg-weconnect-red text-white shadow-md" : "text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800"} ${j ? "shadow-lg ring-2 ring-blue-400 dark:ring-blue-600" : ""}`, onMouseEnter: () => i(r.name), onMouseLeave: () => i(null), children: [t.jsx("div", { ...g, ...f, className: "flex items-center justify-center w-6 h-12 md:h-11 cursor-grab active:cursor-grabbing px-1", title: "Drag to reorder", children: t.jsx(kb, { size: 14, className: "text-gray-400 dark:text-gray-500 opacity-0 group-hover:opacity-60 transition-opacity" }) }), t.jsxs("div", { className: "flex items-center cursor-pointer flex-1 justify-between h-12 md:h-11 px-3 md:px-2", onClick: A => N(A), children: [t.jsxs("div", { className: "flex items-center gap-3 md:gap-2.5", children: [t.jsx(E, { size: 20, className: "md:w-[18px] md:h-[18px]" }), t.jsx("span", { className: "font-medium text-base md:text-sm leading-none", children: r.name })] }), t.jsxs("div", { className: "flex items-center gap-2 h-12 md:h-11", children: [r.badge && r.badge !== "0" && t.jsx("span", { className: `min-w-[20px] h-5 px-1.5 inline-flex items-center justify-center text-[11px] font-semibold rounded-full text-white leading-none ${r.badgeColor}`, children: r.badge }), v && t.jsx("div", { className: "text-gray-400 dark:text-gray-500 group-hover:text-current transition-colors", children: u ? t.jsx(_s, { size: 16 }) : t.jsx(Xc, { size: 16 }) })] })] })] }), v && u && !s && t.jsx("div", { className: "mt-1 ml-6 space-y-1", children: r.children?.map(A => t.jsx("div", { onClick: () => o(A.href), className: `flex items-center h-10 px-3 md:px-2 rounded-lg text-sm font-medium transition-colors cursor-pointer ${c === A.href ? "bg-weconnect-red/10 text-weconnect-red font-bold" : "text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-800 hover:text-gray-900 dark:hover:text-white"}`, children: t.jsx("span", { className: "truncate", children: A.name }) }, A.id)) }), s && C && t.jsxs("div", { className: "absolute left-full ml-3 px-3 py-2 bg-slate-900 dark:bg-slate-800 text-white text-sm rounded-lg shadow-lg z-50 whitespace-nowrap", children: [t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("span", { className: "font-medium", children: r.name }), r.badge && r.badge !== "0" && t.jsx("span", { className: `min-w-[20px] h-5 px-1.5 inline-flex items-center justify-center text-[11px] font-semibold rounded-full text-white leading-none ${r.badgeColor}`, children: r.badge })] }), t.jsx("div", { className: "absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1", children: t.jsx("div", { className: "w-2 h-2 bg-slate-900 dark:bg-slate-800 rotate-45" }) })] })] }) }, t8 = ({ navigationItems: e, activeHref: r, sidebarCollapsed: a, hoveredItem: s, onHover: n, onNavigate: i, setSidebarOpen: o }) => { const { menuOrder: c, setMenuOrder: u } = iD(), m = EU($2(ij, { activationConstraint: { distance: 8 } }), $2(sj, { coordinateGetter: Z7 })), g = Je.useMemo(() => { const p = new Map(e.map(j => [j.id, j])), b = []; return c.forEach(j => { const v = p.get(j); v && (b.push(v), p.delete(j)) }), p.forEach(j => { b.push(j) }), b }, [e, c]); function f(p) { const { active: b, over: j } = p; if (b.id !== j?.id) { const v = g.findIndex(E => E.id === b.id), S = g.findIndex(E => E.id === j?.id), k = oj(g, v, S).map(E => E.id); u(k) } } const y = p => { i(p), o(!1) }; return t.jsx(P7, { sensors: m, collisionDetection: PU, onDragEnd: f, children: t.jsx(B7, { items: g.map(p => p.id), strategy: F7, children: t.jsx("div", { className: "space-y-2 md:space-y-1", children: g.map(p => t.jsx(e8, { id: p.id, item: p, isActive: r === p.href, sidebarCollapsed: a, hoveredItem: s, onHover: n, onNavigate: y, activeHref: r }, p.id)) }) }) }) }, r8 = (e, r) => { const [a, s] = h.useState(e); return h.useEffect(() => { const n = setTimeout(() => { s(e) }, r); return () => { clearTimeout(n) } }, [e, r]), a }, ql = (e = "", r = 300) => { const [a, s] = h.useState(e), [n, i] = h.useState(e), [o, c] = h.useState(!1); return h.useEffect(() => { if (a === "") { i(""), c(!1); return } c(!0); const g = setTimeout(() => { i(a), c(!1) }, r); return () => { clearTimeout(g) } }, [a, r]), { searchValue: a, debouncedSearchValue: n, setSearch: g => { s(g) }, clearSearch: () => { s("") }, isSearching: o } }, a8 = () => { const [e, r] = h.useState(""), [a, s] = h.useState(!1), [n, i] = h.useState(!1), [o, c] = h.useState([]), u = r8(e, 300), m = h.useRef(null), g = h.useRef(null), f = xt(); h.useEffect(() => { const p = b => { g.current && (g.current.contains(b.target) || s(!1)) }; return document.addEventListener("mousedown", p), () => document.removeEventListener("mousedown", p) }, []), h.useEffect(() => { let p = !0; return (async () => { const j = u.trim(); if (j.length < 2) { c([]), i(!1); return } i(!0); try { const [v, S] = await Promise.all([Yt.getLeads({ page: 1, limit: 5, search: j }).catch(() => ({ data: { leads: [] } })), ua.getDeals(1, 5, j).catch(() => ({ data: { deals: [] } }))]); if (!p) return; const k = (v?.data?.leads ?? []).map(C => ({ id: C.id, type: "lead", title: [C.firstName, C.lastName].filter(Boolean).join(" ") || C.email || `Lead #${C.id}`, subtitle: C.email || C.phone || "", path: `/leads/${C.id}`, icon: t.jsx(wt, { className: "w-4 h-4" }) })), E = (S?.data?.deals ?? []).map(C => ({ id: C.id, type: "deal", title: C.title || `Deal #${C.id}`, subtitle: C.value != null && C.currency ? `${C.value} ${C.currency}` : C.status, path: `/deals/${C.id}`, icon: t.jsx(Qr, { className: "w-4 h-4" }) })); c([...k, ...E]) } finally { p && i(!1) } })(), () => { p = !1 } }, [u]); const y = () => { const p = e.trim(); p && (f(`/search?q=${encodeURIComponent(p)}`), s(!1)) }; return t.jsxs("div", { ref: g, className: "relative", children: [t.jsx("input", { ref: m, "data-topsearch-input": !0, type: "text", value: e, onFocus: () => s(!0), onChange: p => r(p.target.value), onKeyDown: p => { p.key === "Enter" && y() }, placeholder: "Search leads, contacts, deals...", className: "w-full h-11 pl-11 pr-4 border border-gray-200 dark:border-slate-700 rounded-full focus:outline-none focus:ring-2 focus:ring-brand-blue focus:border-transparent bg-white dark:bg-slate-800 placeholder-gray-500 dark:placeholder-gray-400", style: { color: "#111827" }, autoComplete: "off", spellCheck: !1 }), t.jsx(Xr, { className: "pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500" }), a && u.trim().length >= 2 && t.jsxs("div", { className: "absolute z-50 mt-2 w-full max-w-xl bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl shadow-2xl overflow-hidden", children: [t.jsx("div", { className: "max-h-80 overflow-y-auto", children: n ? t.jsx("div", { className: "px-4 py-6 text-sm text-gray-500 dark:text-gray-400", children: "Searching..." }) : o.length === 0 ? t.jsx("div", { className: "px-4 py-6 text-sm text-gray-500 dark:text-gray-400", children: "No results" }) : t.jsx("ul", { className: "p-1", children: o.map(p => t.jsx("li", { children: t.jsxs("button", { className: "w-full flex items-center gap-3 px-3 py-2.5 text-left rounded-lg hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors", onClick: () => f(p.path), children: [t.jsx("div", { className: "text-gray-500 dark:text-gray-400", children: p.icon }), t.jsxs("div", { className: "flex-1 min-w-0", children: [t.jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-white truncate", children: p.title }), p.subtitle && t.jsx("div", { className: "text-xs text-gray-500 dark:text-gray-400 truncate", children: p.subtitle })] }), t.jsx("div", { className: "text-[10px] px-2 py-0.5 rounded-full bg-gray-100 dark:bg-slate-800 text-gray-600 dark:text-gray-300 capitalize", children: p.type })] }) }, `${p.type}-${p.id}`)) }) }), t.jsx("div", { className: "px-3 py-2 text-[11px] text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-slate-800", children: "Press Enter to view full results" })] })] }) }, ue = Je.forwardRef(({ className: e = "", variant: r = "PRIMARY", size: a = "MD", loading: s = !1, loadingText: n, icon: i, iconPosition: o = "left", fullWidth: c = !1, disabled: u, children: m, ...g }, f) => { const y = "inline-flex items-center justify-center font-semibold rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed", p = { PRIMARY: "bg-weconnect-red text-white hover:bg-red-500 focus:ring-red-400 shadow-md ", SECONDARY: "bg-white dark:bg-slate-800 text-gray-900 dark:text-white hover:bg-gray-50 dark:hover:bg-slate-700 focus:ring-gray-300 shadow border border-gray-200 dark:border-slate-600", OUTLINE: "border border-weconnect-red text-weconnect-red hover:bg-weconnect-red hover:text-white focus:ring-red-400 shadow-sm", GHOST: "text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800 focus:ring-gray-300", DESTRUCTIVE: "bg-gradient-to-r from-red-500 to-red-600 text-white hover:from-red-600 hover:to-red-700 focus:ring-red-400 shadow-lg hover:shadow-xl" }, b = { SM: "text-xs px-3 h-9", MD: "text-sm px-5 h-11", LG: "text-base px-6 h-12", XL: "text-lg px-8 h-14" }, j = { SM: "w-3 h-3", MD: "w-4 h-4", LG: "w-5 h-5", XL: "w-6 h-6" }, v = [y, p[r], b[a], c && "w-full", e].filter(Boolean).join(" "), S = u || s, k = s ? t.jsx(_i, { className: `${j[a]} animate-spin` }) : i, E = s && n ? n : m; return t.jsxs("button", { ref: f, className: `${v} gap-2`, disabled: S, style: { display: "inline-flex", alignItems: "center", justifyContent: "center", verticalAlign: "middle" }, ...g, children: [k && o === "left" && t.jsx("span", { className: "inline-flex items-center justify-center shrink-0", style: { lineHeight: 1, display: "inline-flex", alignItems: "center", verticalAlign: "middle" }, children: k }), E && t.jsx("span", { className: "inline-flex items-center", style: { lineHeight: 1, display: "inline-flex", alignItems: "center", verticalAlign: "middle" }, children: E }), k && o === "right" && t.jsx("span", { className: "inline-flex items-center justify-center shrink-0", style: { lineHeight: 1, display: "inline-flex", alignItems: "center", verticalAlign: "middle" }, children: k })] }) }); ue.displayName = "Button"; const Ae = Je.forwardRef(({ className: e = "", variant: r = "DEFAULT", padding: a = "md", children: s, ...n }, i) => { const o = "rounded-xl border transition-shadow duration-200", c = { [c0.DEFAULT]: "bg-white dark:bg-slate-800 border-gray-100 dark:border-slate-700 shadow-sm hover:shadow-md", [c0.ELEVATED]: "bg-white dark:bg-slate-800 border-gray-100 dark:border-slate-700 shadow-md hover:shadow-lg", [c0.OUTLINED]: "bg-white/60 dark:bg-slate-800/60 backdrop-blur-sm border border-gray-200 dark:border-slate-600", [c0.GRADIENT]: "bg-gradient-to-br from-white via-gray-50 to-gray-100 dark:from-slate-800 dark:via-slate-900 dark:to-slate-900 border-gray-200 dark:border-slate-700 shadow-sm hover:shadow-md" }, u = { none: "", sm: "p-4", md: "p-6", lg: "p-8", xl: "p-12" }, m = [o, c[r], u[a], e].filter(Boolean).join(" "); return t.jsx("div", { ref: i, className: m, ...n, children: s }) }); Ae.displayName = "Card"; const Pt = Je.forwardRef(({ className: e = "", children: r, ...a }, s) => t.jsx("div", { ref: s, className: `pb-6 border-b border-gray-100 dark:border-slate-700 ${e}`, ...a, children: r })); Pt.displayName = "CardHeader"; const st = Je.forwardRef(({ className: e = "", children: r, ...a }, s) => t.jsx("div", { ref: s, className: `py-6 ${e}`, ...a, children: r })); st.displayName = "CardContent"; const s8 = Je.forwardRef(({ className: e = "", children: r, ...a }, s) => t.jsx("div", { ref: s, className: `pt-6 border-t border-gray-100 dark:border-slate-700 ${e}`, ...a, children: r })); s8.displayName = "CardFooter"; const $c = Je.forwardRef(({ className: e = "", label: r, error: a, success: s, helperText: n, leftIcon: i, rightIcon: o, showPasswordToggle: c = !1, fullWidth: u = !0, variant: m = "outlined", divided: g = !1, type: f = "text", disabled: y, ...p }, b) => { const [j, v] = Je.useState(!1), [S, k] = Je.useState(f), [E, C] = Je.useState(!1), [N, A] = Je.useState(!1); Je.useEffect(() => { c && f === "password" && k(j ? "text" : "password") }, [j, c, f]); const D = "transition-all duration-200 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed font-medium", I = { default: "border-0 border-b-2 bg-transparent rounded-none px-0 py-3", outlined: "border-2 rounded-xl px-4 py-3 bg-white dark:bg-gray-800", filled: "border-0 rounded-xl px-4 py-3 bg-gray-50 dark:bg-gray-700" }, $ = () => a ? "border-weconnect-red focus:border-weconnect-red text-weconnect-red" : s ? "border-brand-green focus:border-brand-green text-brand-green" : y ? "border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed" : E ? "border-brand-blue shadow-sm" : N ? "border-gray-400" : "border-gray-300", B = [D, I[m], $(), u && "w-full", i && !g && "pl-12", i && g && "pl-16", (o || c || a || s) && "pr-12", "text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400", e].filter(Boolean).join(" "), W = () => { v(!j) }, q = c && f === "password" ? t.jsx("button", { type: "button", className: "text-gray-400 hover:text-gray-600 transition-colors", onClick: W, tabIndex: -1, children: j ? t.jsx(bn, { className: "h-5 w-5" }) : t.jsx(Ht, { className: "h-5 w-5" }) }) : a ? t.jsx(dr, { className: "h-5 w-5 text-weconnect-red" }) : s ? t.jsx(ut, { className: "h-5 w-5 text-brand-green" }) : o; return t.jsxs("div", { className: u ? "w-full" : "", children: [r && t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: r }), t.jsxs("div", { className: "relative", onMouseEnter: () => A(!0), onMouseLeave: () => A(!1), children: [i && t.jsx("div", { className: `absolute inset-y-0 left-0 flex items-center pointer-events-none ${g ? "pl-4 border-r border-gray-300 w-12 justify-center" : "pl-4"}`, children: t.jsx("div", { className: "text-gray-400", children: i }) }), t.jsx("input", { ref: b, type: S, className: B, disabled: y, onFocus: () => C(!0), onBlur: () => C(!1), ...p }), q && t.jsx("div", { className: "absolute inset-y-0 right-0 pr-4 flex items-center", children: q })] }), (a || s || n) && t.jsxs("div", { className: "mt-2 text-sm", children: [a && t.jsxs("div", { className: "flex items-center text-weconnect-red", children: [t.jsx(dr, { className: "h-4 w-4 mr-1" }), a] }), s && !a && t.jsxs("div", { className: "flex items-center text-brand-green", children: [t.jsx(ut, { className: "h-4 w-4 mr-1" }), s] }), n && !a && !s && t.jsx("div", { className: "text-gray-500 dark:text-gray-400", children: n })] })] }) }); $c.displayName = "Input"; const X2 = ({ children: e, className: r = "", size: a = "full", centered: s = !0 }) => { const n = { sm: "max-w-screen-sm", md: "max-w-screen-md", lg: "max-w-screen-lg", xl: "max-w-screen-xl", full: "max-w-full" }; return t.jsx("div", { className: `${n[a]} ${s ? "mx-auto" : ""} px-4 ${r}`, children: e }) }, n8 = ({ size: e = "md", className: r = "", variant: a = "spinner" }) => { const s = { sm: "h-4 w-4", md: "h-6 w-6", lg: "h-8 w-8", xl: "h-12 w-12" }; return a === "dots" ? t.jsxs("div", { className: `flex space-x-2 ${r}`, children: [t.jsx("div", { className: "w-2 h-2 bg-weconnect-red rounded-full animate-bounce", style: { animationDelay: "0ms" } }), t.jsx("div", { className: "w-2 h-2 bg-weconnect-red rounded-full animate-bounce", style: { animationDelay: "150ms" } }), t.jsx("div", { className: "w-2 h-2 bg-weconnect-red rounded-full animate-bounce", style: { animationDelay: "300ms" } })] }) : a === "pulse" ? t.jsx("div", { className: `rounded-full bg-weconnect-red animate-pulse ${s[e]} ${r}` }) : t.jsx("div", { className: `animate-spin rounded-full border-2 border-gray-300 dark:border-gray-600 border-t-weconnect-red ${s[e]} ${r}` }) }, Cn = ({ message: e = "Loading..." }) => t.jsxs("div", { className: "flex flex-col items-center justify-center min-h-screen bg-gray-50 dark:bg-slate-950", children: [t.jsx(n8, { size: "xl", className: "mb-4" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 text-sm", children: e })] }), Zn = { async getNotifications(e) { return (await ie.get("/notifications", { params: e })).data.data }, async getUnreadCount() { return (await ie.get("/notifications/unread-count")).data.data }, async markAsRead(e) { return (await ie.patch(`/notifications/${e}/read`)).data }, async markAllAsRead() { return (await ie.patch("/notifications/mark-all-read")).data }, async deleteNotification(e) { return (await ie.delete(`/notifications/${e}`)).data }, async getPreferences() { return (await ie.get("/notifications/preferences")).data.data }, async updatePreferences(e) { const r = { inAppEnabled: e.inAppEnabled, emailEnabled: e.emailEnabled, soundEnabled: e.soundEnabled, preferences: e.preferences, doNotDisturbStart: e.doNotDisturbStart, doNotDisturbEnd: e.doNotDisturbEnd }; return (await ie.patch("/notifications/preferences", r)).data }, connectToStream(e, r) { const a = localStorage.getItem(Ot.AUTH_TOKEN) || localStorage.getItem("token"); if (!a) return console.error("No token found for SSE connection"), null; const s = Yo; let n; s.startsWith("http") ? n = `${s.replace(/\/$/, "")}/notifications/stream?token=${encodeURIComponent(a)}` : n = `${window.location.origin + s.replace(/\/$/, "")}/notifications/stream?token=${encodeURIComponent(a)}`; const i = new EventSource(n, { withCredentials: !0 }); return i.onmessage = o => { try { const c = JSON.parse(o.data); c.type === "connected" || c.type === "notification" && e(c.notification) } catch (c) { console.error("Error parsing notification:", c) } }, i.onerror = o => { console.error("SSE connection error:", o), r && r(o) }, i }, playNotificationSound() { try { const e = new Audio("/notification-sound.mp3"); e.volume = .5, e.play().catch(r => { console.error("Failed to play notification sound:", r) }) } catch (e) { console.error("Error creating audio:", e) } } }; function dh(e) { "@babel/helpers - typeof"; return dh = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function (r) { return typeof r } : function (r) { return r && typeof Symbol == "function" && r.constructor === Symbol && r !== Symbol.prototype ? "symbol" : typeof r }, dh(e) } function Hl(e) { if (e === null || e === !0 || e === !1) return NaN; var r = Number(e); return isNaN(r) ? r : r < 0 ? Math.ceil(r) : Math.floor(r) } function Mr(e, r) { if (r.length < e) throw new TypeError(e + " argument" + (e > 1 ? "s" : "") + " required, but only " + r.length + " present") } function Pr(e) { Mr(1, arguments); var r = Object.prototype.toString.call(e); return e instanceof Date || dh(e) === "object" && r === "[object Date]" ? new Date(e.getTime()) : typeof e == "number" || r === "[object Number]" ? new Date(e) : ((typeof e == "string" || r === "[object String]") && typeof console < "u" && (console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"), console.warn(new Error().stack)), new Date(NaN)) } function i8(e, r) { Mr(2, arguments); var a = Pr(e).getTime(), s = Hl(r); return new Date(a + s) } var o8 = {}; function Tm() { return o8 } function Lb(e) { var r = new Date(Date.UTC(e.getFullYear(), e.getMonth(), e.getDate(), e.getHours(), e.getMinutes(), e.getSeconds(), e.getMilliseconds())); return r.setUTCFullYear(e.getFullYear()), e.getTime() - r.getTime() } function B0(e, r) { Mr(2, arguments); var a = Pr(e), s = Pr(r), n = a.getTime() - s.getTime(); return n < 0 ? -1 : n > 0 ? 1 : n } function l8(e) { return Mr(1, arguments), e instanceof Date || dh(e) === "object" && Object.prototype.toString.call(e) === "[object Date]" } function c8(e) { if (Mr(1, arguments), !l8(e) && typeof e != "number") return !1; var r = Pr(e); return !isNaN(Number(r)) } function d8(e, r) { Mr(2, arguments); var a = Pr(e), s = Pr(r), n = a.getFullYear() - s.getFullYear(), i = a.getMonth() - s.getMonth(); return n * 12 + i } function u8(e, r) { return Mr(2, arguments), Pr(e).getTime() - Pr(r).getTime() } var m8 = { ceil: Math.ceil, round: Math.round, floor: Math.floor, trunc: function (r) { return r < 0 ? Math.ceil(r) : Math.floor(r) } }, g8 = "trunc"; function h8(e) { return m8[g8] } function f8(e) { Mr(1, arguments); var r = Pr(e); return r.setHours(23, 59, 59, 999), r } function x8(e) { Mr(1, arguments); var r = Pr(e), a = r.getMonth(); return r.setFullYear(r.getFullYear(), a + 1, 0), r.setHours(23, 59, 59, 999), r } function p8(e) { Mr(1, arguments); var r = Pr(e); return f8(r).getTime() === x8(r).getTime() } function y8(e, r) { Mr(2, arguments); var a = Pr(e), s = Pr(r), n = B0(a, s), i = Math.abs(d8(a, s)), o; if (i < 1) o = 0; else { a.getMonth() === 1 && a.getDate() > 27 && a.setDate(30), a.setMonth(a.getMonth() - n * i); var c = B0(a, s) === -n; p8(Pr(e)) && i === 1 && B0(e, s) === 1 && (c = !1), o = n * (i - Number(c)) } return o === 0 ? 0 : o } function v8(e, r, a) { Mr(2, arguments); var s = u8(e, r) / 1e3; return h8()(s) } function b8(e, r) { Mr(2, arguments); var a = Hl(r); return i8(e, -a) } var w8 = 864e5; function j8(e) { Mr(1, arguments); var r = Pr(e), a = r.getTime(); r.setUTCMonth(0, 1), r.setUTCHours(0, 0, 0, 0); var s = r.getTime(), n = a - s; return Math.floor(n / w8) + 1 } function uh(e) { Mr(1, arguments); var r = 1, a = Pr(e), s = a.getUTCDay(), n = (s < r ? 7 : 0) + s - r; return a.setUTCDate(a.getUTCDate() - n), a.setUTCHours(0, 0, 0, 0), a } function MD(e) { Mr(1, arguments); var r = Pr(e), a = r.getUTCFullYear(), s = new Date(0); s.setUTCFullYear(a + 1, 0, 4), s.setUTCHours(0, 0, 0, 0); var n = uh(s), i = new Date(0); i.setUTCFullYear(a, 0, 4), i.setUTCHours(0, 0, 0, 0); var o = uh(i); return r.getTime() >= n.getTime() ? a + 1 : r.getTime() >= o.getTime() ? a : a - 1 } function N8(e) { Mr(1, arguments); var r = MD(e), a = new Date(0); a.setUTCFullYear(r, 0, 4), a.setUTCHours(0, 0, 0, 0); var s = uh(a); return s } var k8 = 6048e5; function S8(e) { Mr(1, arguments); var r = Pr(e), a = uh(r).getTime() - N8(r).getTime(); return Math.round(a / k8) + 1 } function mh(e, r) { var a, s, n, i, o, c, u, m; Mr(1, arguments); var g = Tm(), f = Hl((a = (s = (n = (i = r?.weekStartsOn) !== null && i !== void 0 ? i : r == null || (o = r.locale) === null || o === void 0 || (c = o.options) === null || c === void 0 ? void 0 : c.weekStartsOn) !== null && n !== void 0 ? n : g.weekStartsOn) !== null && s !== void 0 ? s : (u = g.locale) === null || u === void 0 || (m = u.options) === null || m === void 0 ? void 0 : m.weekStartsOn) !== null && a !== void 0 ? a : 0); if (!(f >= 0 && f <= 6)) throw new RangeError("weekStartsOn must be between 0 and 6 inclusively"); var y = Pr(e), p = y.getUTCDay(), b = (p < f ? 7 : 0) + p - f; return y.setUTCDate(y.getUTCDate() - b), y.setUTCHours(0, 0, 0, 0), y } function _D(e, r) { var a, s, n, i, o, c, u, m; Mr(1, arguments); var g = Pr(e), f = g.getUTCFullYear(), y = Tm(), p = Hl((a = (s = (n = (i = r?.firstWeekContainsDate) !== null && i !== void 0 ? i : r == null || (o = r.locale) === null || o === void 0 || (c = o.options) === null || c === void 0 ? void 0 : c.firstWeekContainsDate) !== null && n !== void 0 ? n : y.firstWeekContainsDate) !== null && s !== void 0 ? s : (u = y.locale) === null || u === void 0 || (m = u.options) === null || m === void 0 ? void 0 : m.firstWeekContainsDate) !== null && a !== void 0 ? a : 1); if (!(p >= 1 && p <= 7)) throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively"); var b = new Date(0); b.setUTCFullYear(f + 1, 0, p), b.setUTCHours(0, 0, 0, 0); var j = mh(b, r), v = new Date(0); v.setUTCFullYear(f, 0, p), v.setUTCHours(0, 0, 0, 0); var S = mh(v, r); return g.getTime() >= j.getTime() ? f + 1 : g.getTime() >= S.getTime() ? f : f - 1 } function C8(e, r) { var a, s, n, i, o, c, u, m; Mr(1, arguments); var g = Tm(), f = Hl((a = (s = (n = (i = r?.firstWeekContainsDate) !== null && i !== void 0 ? i : r == null || (o = r.locale) === null || o === void 0 || (c = o.options) === null || c === void 0 ? void 0 : c.firstWeekContainsDate) !== null && n !== void 0 ? n : g.firstWeekContainsDate) !== null && s !== void 0 ? s : (u = g.locale) === null || u === void 0 || (m = u.options) === null || m === void 0 ? void 0 : m.firstWeekContainsDate) !== null && a !== void 0 ? a : 1), y = _D(e, r), p = new Date(0); p.setUTCFullYear(y, 0, f), p.setUTCHours(0, 0, 0, 0); var b = mh(p, r); return b } var E8 = 6048e5; function A8(e, r) { Mr(1, arguments); var a = Pr(e), s = mh(a, r).getTime() - C8(a, r).getTime(); return Math.round(s / E8) + 1 } function hr(e, r) { for (var a = e < 0 ? "-" : "", s = Math.abs(e).toString(); s.length < r;)s = "0" + s; return a + s } var To = { y: function (r, a) { var s = r.getUTCFullYear(), n = s > 0 ? s : 1 - s; return hr(a === "yy" ? n % 100 : n, a.length) }, M: function (r, a) { var s = r.getUTCMonth(); return a === "M" ? String(s + 1) : hr(s + 1, 2) }, d: function (r, a) { return hr(r.getUTCDate(), a.length) }, a: function (r, a) { var s = r.getUTCHours() / 12 >= 1 ? "pm" : "am"; switch (a) { case "a": case "aa": return s.toUpperCase(); case "aaa": return s; case "aaaaa": return s[0]; case "aaaa": default: return s === "am" ? "a.m." : "p.m." } }, h: function (r, a) { return hr(r.getUTCHours() % 12 || 12, a.length) }, H: function (r, a) { return hr(r.getUTCHours(), a.length) }, m: function (r, a) { return hr(r.getUTCMinutes(), a.length) }, s: function (r, a) { return hr(r.getUTCSeconds(), a.length) }, S: function (r, a) { var s = a.length, n = r.getUTCMilliseconds(), i = Math.floor(n * Math.pow(10, s - 3)); return hr(i, a.length) } }, Cc = { midnight: "midnight", noon: "noon", morning: "morning", afternoon: "afternoon", evening: "evening", night: "night" }, P8 = { G: function (r, a, s) { var n = r.getUTCFullYear() > 0 ? 1 : 0; switch (a) { case "G": case "GG": case "GGG": return s.era(n, { width: "abbreviated" }); case "GGGGG": return s.era(n, { width: "narrow" }); case "GGGG": default: return s.era(n, { width: "wide" }) } }, y: function (r, a, s) { if (a === "yo") { var n = r.getUTCFullYear(), i = n > 0 ? n : 1 - n; return s.ordinalNumber(i, { unit: "year" }) } return To.y(r, a) }, Y: function (r, a, s, n) { var i = _D(r, n), o = i > 0 ? i : 1 - i; if (a === "YY") { var c = o % 100; return hr(c, 2) } return a === "Yo" ? s.ordinalNumber(o, { unit: "year" }) : hr(o, a.length) }, R: function (r, a) { var s = MD(r); return hr(s, a.length) }, u: function (r, a) { var s = r.getUTCFullYear(); return hr(s, a.length) }, Q: function (r, a, s) { var n = Math.ceil((r.getUTCMonth() + 1) / 3); switch (a) { case "Q": return String(n); case "QQ": return hr(n, 2); case "Qo": return s.ordinalNumber(n, { unit: "quarter" }); case "QQQ": return s.quarter(n, { width: "abbreviated", context: "formatting" }); case "QQQQQ": return s.quarter(n, { width: "narrow", context: "formatting" }); case "QQQQ": default: return s.quarter(n, { width: "wide", context: "formatting" }) } }, q: function (r, a, s) { var n = Math.ceil((r.getUTCMonth() + 1) / 3); switch (a) { case "q": return String(n); case "qq": return hr(n, 2); case "qo": return s.ordinalNumber(n, { unit: "quarter" }); case "qqq": return s.quarter(n, { width: "abbreviated", context: "standalone" }); case "qqqqq": return s.quarter(n, { width: "narrow", context: "standalone" }); case "qqqq": default: return s.quarter(n, { width: "wide", context: "standalone" }) } }, M: function (r, a, s) { var n = r.getUTCMonth(); switch (a) { case "M": case "MM": return To.M(r, a); case "Mo": return s.ordinalNumber(n + 1, { unit: "month" }); case "MMM": return s.month(n, { width: "abbreviated", context: "formatting" }); case "MMMMM": return s.month(n, { width: "narrow", context: "formatting" }); case "MMMM": default: return s.month(n, { width: "wide", context: "formatting" }) } }, L: function (r, a, s) { var n = r.getUTCMonth(); switch (a) { case "L": return String(n + 1); case "LL": return hr(n + 1, 2); case "Lo": return s.ordinalNumber(n + 1, { unit: "month" }); case "LLL": return s.month(n, { width: "abbreviated", context: "standalone" }); case "LLLLL": return s.month(n, { width: "narrow", context: "standalone" }); case "LLLL": default: return s.month(n, { width: "wide", context: "standalone" }) } }, w: function (r, a, s, n) { var i = A8(r, n); return a === "wo" ? s.ordinalNumber(i, { unit: "week" }) : hr(i, a.length) }, I: function (r, a, s) { var n = S8(r); return a === "Io" ? s.ordinalNumber(n, { unit: "week" }) : hr(n, a.length) }, d: function (r, a, s) { return a === "do" ? s.ordinalNumber(r.getUTCDate(), { unit: "date" }) : To.d(r, a) }, D: function (r, a, s) { var n = j8(r); return a === "Do" ? s.ordinalNumber(n, { unit: "dayOfYear" }) : hr(n, a.length) }, E: function (r, a, s) { var n = r.getUTCDay(); switch (a) { case "E": case "EE": case "EEE": return s.day(n, { width: "abbreviated", context: "formatting" }); case "EEEEE": return s.day(n, { width: "narrow", context: "formatting" }); case "EEEEEE": return s.day(n, { width: "short", context: "formatting" }); case "EEEE": default: return s.day(n, { width: "wide", context: "formatting" }) } }, e: function (r, a, s, n) { var i = r.getUTCDay(), o = (i - n.weekStartsOn + 8) % 7 || 7; switch (a) { case "e": return String(o); case "ee": return hr(o, 2); case "eo": return s.ordinalNumber(o, { unit: "day" }); case "eee": return s.day(i, { width: "abbreviated", context: "formatting" }); case "eeeee": return s.day(i, { width: "narrow", context: "formatting" }); case "eeeeee": return s.day(i, { width: "short", context: "formatting" }); case "eeee": default: return s.day(i, { width: "wide", context: "formatting" }) } }, c: function (r, a, s, n) { var i = r.getUTCDay(), o = (i - n.weekStartsOn + 8) % 7 || 7; switch (a) { case "c": return String(o); case "cc": return hr(o, a.length); case "co": return s.ordinalNumber(o, { unit: "day" }); case "ccc": return s.day(i, { width: "abbreviated", context: "standalone" }); case "ccccc": return s.day(i, { width: "narrow", context: "standalone" }); case "cccccc": return s.day(i, { width: "short", context: "standalone" }); case "cccc": default: return s.day(i, { width: "wide", context: "standalone" }) } }, i: function (r, a, s) { var n = r.getUTCDay(), i = n === 0 ? 7 : n; switch (a) { case "i": return String(i); case "ii": return hr(i, a.length); case "io": return s.ordinalNumber(i, { unit: "day" }); case "iii": return s.day(n, { width: "abbreviated", context: "formatting" }); case "iiiii": return s.day(n, { width: "narrow", context: "formatting" }); case "iiiiii": return s.day(n, { width: "short", context: "formatting" }); case "iiii": default: return s.day(n, { width: "wide", context: "formatting" }) } }, a: function (r, a, s) { var n = r.getUTCHours(), i = n / 12 >= 1 ? "pm" : "am"; switch (a) { case "a": case "aa": return s.dayPeriod(i, { width: "abbreviated", context: "formatting" }); case "aaa": return s.dayPeriod(i, { width: "abbreviated", context: "formatting" }).toLowerCase(); case "aaaaa": return s.dayPeriod(i, { width: "narrow", context: "formatting" }); case "aaaa": default: return s.dayPeriod(i, { width: "wide", context: "formatting" }) } }, b: function (r, a, s) { var n = r.getUTCHours(), i; switch (n === 12 ? i = Cc.noon : n === 0 ? i = Cc.midnight : i = n / 12 >= 1 ? "pm" : "am", a) { case "b": case "bb": return s.dayPeriod(i, { width: "abbreviated", context: "formatting" }); case "bbb": return s.dayPeriod(i, { width: "abbreviated", context: "formatting" }).toLowerCase(); case "bbbbb": return s.dayPeriod(i, { width: "narrow", context: "formatting" }); case "bbbb": default: return s.dayPeriod(i, { width: "wide", context: "formatting" }) } }, B: function (r, a, s) { var n = r.getUTCHours(), i; switch (n >= 17 ? i = Cc.evening : n >= 12 ? i = Cc.afternoon : n >= 4 ? i = Cc.morning : i = Cc.night, a) { case "B": case "BB": case "BBB": return s.dayPeriod(i, { width: "abbreviated", context: "formatting" }); case "BBBBB": return s.dayPeriod(i, { width: "narrow", context: "formatting" }); case "BBBB": default: return s.dayPeriod(i, { width: "wide", context: "formatting" }) } }, h: function (r, a, s) { if (a === "ho") { var n = r.getUTCHours() % 12; return n === 0 && (n = 12), s.ordinalNumber(n, { unit: "hour" }) } return To.h(r, a) }, H: function (r, a, s) { return a === "Ho" ? s.ordinalNumber(r.getUTCHours(), { unit: "hour" }) : To.H(r, a) }, K: function (r, a, s) { var n = r.getUTCHours() % 12; return a === "Ko" ? s.ordinalNumber(n, { unit: "hour" }) : hr(n, a.length) }, k: function (r, a, s) { var n = r.getUTCHours(); return n === 0 && (n = 24), a === "ko" ? s.ordinalNumber(n, { unit: "hour" }) : hr(n, a.length) }, m: function (r, a, s) { return a === "mo" ? s.ordinalNumber(r.getUTCMinutes(), { unit: "minute" }) : To.m(r, a) }, s: function (r, a, s) { return a === "so" ? s.ordinalNumber(r.getUTCSeconds(), { unit: "second" }) : To.s(r, a) }, S: function (r, a) { return To.S(r, a) }, X: function (r, a, s, n) { var i = n._originalDate || r, o = i.getTimezoneOffset(); if (o === 0) return "Z"; switch (a) { case "X": return J2(o); case "XXXX": case "XX": return bl(o); case "XXXXX": case "XXX": default: return bl(o, ":") } }, x: function (r, a, s, n) { var i = n._originalDate || r, o = i.getTimezoneOffset(); switch (a) { case "x": return J2(o); case "xxxx": case "xx": return bl(o); case "xxxxx": case "xxx": default: return bl(o, ":") } }, O: function (r, a, s, n) { var i = n._originalDate || r, o = i.getTimezoneOffset(); switch (a) { case "O": case "OO": case "OOO": return "GMT" + Z2(o, ":"); case "OOOO": default: return "GMT" + bl(o, ":") } }, z: function (r, a, s, n) { var i = n._originalDate || r, o = i.getTimezoneOffset(); switch (a) { case "z": case "zz": case "zzz": return "GMT" + Z2(o, ":"); case "zzzz": default: return "GMT" + bl(o, ":") } }, t: function (r, a, s, n) { var i = n._originalDate || r, o = Math.floor(i.getTime() / 1e3); return hr(o, a.length) }, T: function (r, a, s, n) { var i = n._originalDate || r, o = i.getTime(); return hr(o, a.length) } }; function Z2(e, r) { var a = e > 0 ? "-" : "+", s = Math.abs(e), n = Math.floor(s / 60), i = s % 60; if (i === 0) return a + String(n); var o = r; return a + String(n) + o + hr(i, 2) } function J2(e, r) { if (e % 60 === 0) { var a = e > 0 ? "-" : "+"; return a + hr(Math.abs(e) / 60, 2) } return bl(e, r) } function bl(e, r) { var a = r || "", s = e > 0 ? "-" : "+", n = Math.abs(e), i = hr(Math.floor(n / 60), 2), o = hr(n % 60, 2); return s + i + a + o } var eC = function (r, a) { switch (r) { case "P": return a.date({ width: "short" }); case "PP": return a.date({ width: "medium" }); case "PPP": return a.date({ width: "long" }); case "PPPP": default: return a.date({ width: "full" }) } }, $D = function (r, a) { switch (r) { case "p": return a.time({ width: "short" }); case "pp": return a.time({ width: "medium" }); case "ppp": return a.time({ width: "long" }); case "pppp": default: return a.time({ width: "full" }) } }, T8 = function (r, a) { var s = r.match(/(P+)(p+)?/) || [], n = s[1], i = s[2]; if (!i) return eC(r, a); var o; switch (n) { case "P": o = a.dateTime({ width: "short" }); break; case "PP": o = a.dateTime({ width: "medium" }); break; case "PPP": o = a.dateTime({ width: "long" }); break; case "PPPP": default: o = a.dateTime({ width: "full" }); break }return o.replace("{{date}}", eC(n, a)).replace("{{time}}", $D(i, a)) }, D8 = { p: $D, P: T8 }, O8 = ["D", "DD"], I8 = ["YY", "YYYY"]; function L8(e) { return O8.indexOf(e) !== -1 } function R8(e) { return I8.indexOf(e) !== -1 } function tC(e, r, a) { if (e === "YYYY") throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(r, "`) for formatting years to the input `").concat(a, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")); if (e === "YY") throw new RangeError("Use `yy` instead of `YY` (in `".concat(r, "`) for formatting years to the input `").concat(a, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")); if (e === "D") throw new RangeError("Use `d` instead of `D` (in `".concat(r, "`) for formatting days of the month to the input `").concat(a, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")); if (e === "DD") throw new RangeError("Use `dd` instead of `DD` (in `".concat(r, "`) for formatting days of the month to the input `").concat(a, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")) } var M8 = { lessThanXSeconds: { one: "less than a second", other: "less than {{count}} seconds" }, xSeconds: { one: "1 second", other: "{{count}} seconds" }, halfAMinute: "half a minute", lessThanXMinutes: { one: "less than a minute", other: "less than {{count}} minutes" }, xMinutes: { one: "1 minute", other: "{{count}} minutes" }, aboutXHours: { one: "about 1 hour", other: "about {{count}} hours" }, xHours: { one: "1 hour", other: "{{count}} hours" }, xDays: { one: "1 day", other: "{{count}} days" }, aboutXWeeks: { one: "about 1 week", other: "about {{count}} weeks" }, xWeeks: { one: "1 week", other: "{{count}} weeks" }, aboutXMonths: { one: "about 1 month", other: "about {{count}} months" }, xMonths: { one: "1 month", other: "{{count}} months" }, aboutXYears: { one: "about 1 year", other: "about {{count}} years" }, xYears: { one: "1 year", other: "{{count}} years" }, overXYears: { one: "over 1 year", other: "over {{count}} years" }, almostXYears: { one: "almost 1 year", other: "almost {{count}} years" } }, _8 = function (r, a, s) { var n, i = M8[r]; return typeof i == "string" ? n = i : a === 1 ? n = i.one : n = i.other.replace("{{count}}", a.toString()), s != null && s.addSuffix ? s.comparison && s.comparison > 0 ? "in " + n : n + " ago" : n }; function yy(e) { return function () { var r = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, a = r.width ? String(r.width) : e.defaultWidth, s = e.formats[a] || e.formats[e.defaultWidth]; return s } } var $8 = { full: "EEEE, MMMM do, y", long: "MMMM do, y", medium: "MMM d, y", short: "MM/dd/yyyy" }, U8 = { full: "h:mm:ss a zzzz", long: "h:mm:ss a z", medium: "h:mm:ss a", short: "h:mm a" }, F8 = { full: "{{date}} 'at' {{time}}", long: "{{date}} 'at' {{time}}", medium: "{{date}}, {{time}}", short: "{{date}}, {{time}}" }, z8 = { date: yy({ formats: $8, defaultWidth: "full" }), time: yy({ formats: U8, defaultWidth: "full" }), dateTime: yy({ formats: F8, defaultWidth: "full" }) }, B8 = { lastWeek: "'last' eeee 'at' p", yesterday: "'yesterday at' p", today: "'today at' p", tomorrow: "'tomorrow at' p", nextWeek: "eeee 'at' p", other: "P" }, q8 = function (r, a, s, n) { return B8[r] }; function xu(e) { return function (r, a) { var s = a != null && a.context ? String(a.context) : "standalone", n; if (s === "formatting" && e.formattingValues) { var i = e.defaultFormattingWidth || e.defaultWidth, o = a != null && a.width ? String(a.width) : i; n = e.formattingValues[o] || e.formattingValues[i] } else { var c = e.defaultWidth, u = a != null && a.width ? String(a.width) : e.defaultWidth; n = e.values[u] || e.values[c] } var m = e.argumentCallback ? e.argumentCallback(r) : r; return n[m] } } var H8 = { narrow: ["B", "A"], abbreviated: ["BC", "AD"], wide: ["Before Christ", "Anno Domini"] }, W8 = { narrow: ["1", "2", "3", "4"], abbreviated: ["Q1", "Q2", "Q3", "Q4"], wide: ["1st quarter", "2nd quarter", "3rd quarter", "4th quarter"] }, V8 = { narrow: ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"], abbreviated: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], wide: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"] }, G8 = { narrow: ["S", "M", "T", "W", "T", "F", "S"], short: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], abbreviated: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], wide: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"] }, K8 = { narrow: { am: "a", pm: "p", midnight: "mi", noon: "n", morning: "morning", afternoon: "afternoon", evening: "evening", night: "night" }, abbreviated: { am: "AM", pm: "PM", midnight: "midnight", noon: "noon", morning: "morning", afternoon: "afternoon", evening: "evening", night: "night" }, wide: { am: "a.m.", pm: "p.m.", midnight: "midnight", noon: "noon", morning: "morning", afternoon: "afternoon", evening: "evening", night: "night" } }, Y8 = { narrow: { am: "a", pm: "p", midnight: "mi", noon: "n", morning: "in the morning", afternoon: "in the afternoon", evening: "in the evening", night: "at night" }, abbreviated: { am: "AM", pm: "PM", midnight: "midnight", noon: "noon", morning: "in the morning", afternoon: "in the afternoon", evening: "in the evening", night: "at night" }, wide: { am: "a.m.", pm: "p.m.", midnight: "midnight", noon: "noon", morning: "in the morning", afternoon: "in the afternoon", evening: "in the evening", night: "at night" } }, Q8 = function (r, a) { var s = Number(r), n = s % 100; if (n > 20 || n < 10) switch (n % 10) { case 1: return s + "st"; case 2: return s + "nd"; case 3: return s + "rd" }return s + "th" }, X8 = { ordinalNumber: Q8, era: xu({ values: H8, defaultWidth: "wide" }), quarter: xu({ values: W8, defaultWidth: "wide", argumentCallback: function (r) { return r - 1 } }), month: xu({ values: V8, defaultWidth: "wide" }), day: xu({ values: G8, defaultWidth: "wide" }), dayPeriod: xu({ values: K8, defaultWidth: "wide", formattingValues: Y8, defaultFormattingWidth: "wide" }) }; function pu(e) { return function (r) { var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, s = a.width, n = s && e.matchPatterns[s] || e.matchPatterns[e.defaultMatchWidth], i = r.match(n); if (!i) return null; var o = i[0], c = s && e.parsePatterns[s] || e.parsePatterns[e.defaultParseWidth], u = Array.isArray(c) ? J8(c, function (f) { return f.test(o) }) : Z8(c, function (f) { return f.test(o) }), m; m = e.valueCallback ? e.valueCallback(u) : u, m = a.valueCallback ? a.valueCallback(m) : m; var g = r.slice(o.length); return { value: m, rest: g } } } function Z8(e, r) { for (var a in e) if (e.hasOwnProperty(a) && r(e[a])) return a } function J8(e, r) { for (var a = 0; a < e.length; a++)if (r(e[a])) return a } function eF(e) { return function (r) { var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, s = r.match(e.matchPattern); if (!s) return null; var n = s[0], i = r.match(e.parsePattern); if (!i) return null; var o = e.valueCallback ? e.valueCallback(i[0]) : i[0]; o = a.valueCallback ? a.valueCallback(o) : o; var c = r.slice(n.length); return { value: o, rest: c } } } var tF = /^(\d+)(th|st|nd|rd)?/i, rF = /\d+/i, aF = { narrow: /^(b|a)/i, abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i, wide: /^(before christ|before common era|anno domini|common era)/i }, sF = { any: [/^b/i, /^(a|c)/i] }, nF = { narrow: /^[1234]/i, abbreviated: /^q[1234]/i, wide: /^[1234](th|st|nd|rd)? quarter/i }, iF = { any: [/1/i, /2/i, /3/i, /4/i] }, oF = { narrow: /^[jfmasond]/i, abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i, wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i }, lF = { narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i], any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i] }, cF = { narrow: /^[smtwf]/i, short: /^(su|mo|tu|we|th|fr|sa)/i, abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i, wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i }, dF = { narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i], any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i] }, uF = { narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i, any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i }, mF = { any: { am: /^a/i, pm: /^p/i, midnight: /^mi/i, noon: /^no/i, morning: /morning/i, afternoon: /afternoon/i, evening: /evening/i, night: /night/i } }, gF = { ordinalNumber: eF({ matchPattern: tF, parsePattern: rF, valueCallback: function (r) { return parseInt(r, 10) } }), era: pu({ matchPatterns: aF, defaultMatchWidth: "wide", parsePatterns: sF, defaultParseWidth: "any" }), quarter: pu({ matchPatterns: nF, defaultMatchWidth: "wide", parsePatterns: iF, defaultParseWidth: "any", valueCallback: function (r) { return r + 1 } }), month: pu({ matchPatterns: oF, defaultMatchWidth: "wide", parsePatterns: lF, defaultParseWidth: "any" }), day: pu({ matchPatterns: cF, defaultMatchWidth: "wide", parsePatterns: dF, defaultParseWidth: "any" }), dayPeriod: pu({ matchPatterns: uF, defaultMatchWidth: "any", parsePatterns: mF, defaultParseWidth: "any" }) }, UD = { code: "en-US", formatDistance: _8, formatLong: z8, formatRelative: q8, localize: X8, match: gF, options: { weekStartsOn: 0, firstWeekContainsDate: 1 } }, hF = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g, fF = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g, xF = /^'([^]*?)'?$/, pF = /''/g, yF = /[a-zA-Z]/; function Hc(e, r, a) { var s, n, i, o, c, u, m, g, f, y, p, b, j, v; Mr(2, arguments); var S = String(r), k = Tm(), E = (s = (n = void 0) !== null && n !== void 0 ? n : k.locale) !== null && s !== void 0 ? s : UD, C = Hl((i = (o = (c = (u = void 0) !== null && u !== void 0 ? u : void 0) !== null && c !== void 0 ? c : k.firstWeekContainsDate) !== null && o !== void 0 ? o : (m = k.locale) === null || m === void 0 || (g = m.options) === null || g === void 0 ? void 0 : g.firstWeekContainsDate) !== null && i !== void 0 ? i : 1); if (!(C >= 1 && C <= 7)) throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively"); var N = Hl((f = (y = (p = (b = void 0) !== null && b !== void 0 ? b : void 0) !== null && p !== void 0 ? p : k.weekStartsOn) !== null && y !== void 0 ? y : (j = k.locale) === null || j === void 0 || (v = j.options) === null || v === void 0 ? void 0 : v.weekStartsOn) !== null && f !== void 0 ? f : 0); if (!(N >= 0 && N <= 6)) throw new RangeError("weekStartsOn must be between 0 and 6 inclusively"); if (!E.localize) throw new RangeError("locale must contain localize property"); if (!E.formatLong) throw new RangeError("locale must contain formatLong property"); var A = Pr(e); if (!c8(A)) throw new RangeError("Invalid time value"); var D = Lb(A), I = b8(A, D), $ = { firstWeekContainsDate: C, weekStartsOn: N, locale: E, _originalDate: A }, B = S.match(fF).map(function (W) { var M = W[0]; if (M === "p" || M === "P") { var q = D8[M]; return q(W, E.formatLong) } return W }).join("").match(hF).map(function (W) { if (W === "''") return "'"; var M = W[0]; if (M === "'") return vF(W); var q = P8[M]; if (q) return R8(W) && tC(W, r, String(e)), L8(W) && tC(W, r, String(e)), q(I, W, E.localize, $); if (M.match(yF)) throw new RangeError("Format string contains an unescaped latin alphabet character `" + M + "`"); return W }).join(""); return B } function vF(e) { var r = e.match(xF); return r ? r[1].replace(pF, "'") : e } function FD(e, r) { if (e == null) throw new TypeError("assign requires that input parameter not be null or undefined"); for (var a in r) Object.prototype.hasOwnProperty.call(r, a) && (e[a] = r[a]); return e } function bF(e) { return FD({}, e) } var rC = 1440, wF = 2520, vy = 43200, jF = 86400; function NF(e, r, a) { var s, n; Mr(2, arguments); var i = Tm(), o = (s = (n = a?.locale) !== null && n !== void 0 ? n : i.locale) !== null && s !== void 0 ? s : UD; if (!o.formatDistance) throw new RangeError("locale must contain formatDistance property"); var c = B0(e, r); if (isNaN(c)) throw new RangeError("Invalid time value"); var u = FD(bF(a), { addSuffix: !!a?.addSuffix, comparison: c }), m, g; c > 0 ? (m = Pr(r), g = Pr(e)) : (m = Pr(e), g = Pr(r)); var f = v8(g, m), y = (Lb(g) - Lb(m)) / 1e3, p = Math.round((f - y) / 60), b; if (p < 2) return a != null && a.includeSeconds ? f < 5 ? o.formatDistance("lessThanXSeconds", 5, u) : f < 10 ? o.formatDistance("lessThanXSeconds", 10, u) : f < 20 ? o.formatDistance("lessThanXSeconds", 20, u) : f < 40 ? o.formatDistance("halfAMinute", 0, u) : f < 60 ? o.formatDistance("lessThanXMinutes", 1, u) : o.formatDistance("xMinutes", 1, u) : p === 0 ? o.formatDistance("lessThanXMinutes", 1, u) : o.formatDistance("xMinutes", p, u); if (p < 45) return o.formatDistance("xMinutes", p, u); if (p < 90) return o.formatDistance("aboutXHours", 1, u); if (p < rC) { var j = Math.round(p / 60); return o.formatDistance("aboutXHours", j, u) } else { if (p < wF) return o.formatDistance("xDays", 1, u); if (p < vy) { var v = Math.round(p / rC); return o.formatDistance("xDays", v, u) } else if (p < jF) return b = Math.round(p / vy), o.formatDistance("aboutXMonths", b, u) } if (b = y8(g, m), b < 12) { var S = Math.round(p / vy); return o.formatDistance("xMonths", S, u) } else { var k = b % 12, E = Math.floor(b / 12); return k < 3 ? o.formatDistance("aboutXYears", E, u) : k < 9 ? o.formatDistance("overXYears", E, u) : o.formatDistance("almostXYears", E + 1, u) } } function zD(e, r) { return Mr(1, arguments), NF(e, Date.now(), r) } const BD = () => { const [e, r] = h.useState([]), [a, s] = h.useState(0), [n, i] = h.useState(!1), [o, c] = h.useState(!1), [u, m] = h.useState(null), g = h.useRef(null), f = xt(); h.useEffect(() => { y(), p(), b() }, []), h.useEffect(() => { const C = Zn.connectToStream(N => { r(A => [N, ...A]), s(A => A + 1), R.info(N.title || "New notification", { body: N.message, toastId: `notification_${N.id}` }), u?.soundEnabled !== !1 && Zn.playNotificationSound() }, N => { console.error("Notification stream error:", N) }); return g.current = C, () => { C?.close() } }, [u]); const y = async () => { c(!0); try { const { notifications: C } = await Zn.getNotifications({ limit: 20 }); r(C) } catch (C) { console.error("Failed to load notifications:", C) } finally { c(!1) } }, p = async () => { try { const { unreadCount: C } = await Zn.getUnreadCount(); s(C) } catch (C) { console.error("Failed to load unread count:", C) } }, b = async () => { try { const C = await Zn.getPreferences(); m(C) } catch (C) { console.error("Failed to load preferences:", C) } }, j = async C => { try { await Zn.markAsRead(C), r(N => N.map(A => A.id === C ? { ...A, read: !0 } : A)), s(N => Math.max(0, N - 1)) } catch (N) { console.error("Failed to mark as read:", N) } }, v = async () => { try { await Zn.markAllAsRead(), r(C => C.map(N => ({ ...N, read: !0 }))), s(0) } catch (C) { console.error("Failed to mark all as read:", C) } }, S = async C => { try { await Zn.deleteNotification(C), r(A => A.filter(D => D.id !== C)); const N = e.find(A => A.id === C); N && !N.read && s(A => Math.max(0, A - 1)) } catch (N) { console.error("Failed to delete notification:", N) } }, k = C => { const N = C.metadata || {}; return N.taskId ? `/tasks/${N.taskId}` : C.link ? C.link : N.leadId ? `/leads/${N.leadId}` : N.dealId ? `/deals/${N.dealId}` : null }, E = C => { C.read || j(C.id); const N = k(C); N && (f(N), i(!1)) }; return t.jsxs("div", { className: "relative", children: [t.jsxs("button", { onClick: () => i(!n), className: "p-2.5 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-lg transition-colors text-gray-600 dark:text-gray-400 relative", title: "Notifications", children: [t.jsx(Bl, { className: "w-5 h-5" }), a > 0 && t.jsx("span", { className: "absolute -top-0.5 -right-0.5 min-w-[20px] h-5 px-1.5 bg-weconnect-red text-white text-[10px] rounded-full flex items-center justify-center font-semibold leading-none", children: a > 99 ? "99+" : a })] }), n && t.jsxs(t.Fragment, { children: [t.jsx("div", { className: "fixed inset-0 z-10", onClick: () => i(!1) }), t.jsxs("div", { className: "absolute right-0 top-full mt-2 w-96 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 z-20 overflow-hidden max-h-[600px] flex flex-col", children: [t.jsxs("div", { className: "flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-slate-800", children: [t.jsx("h3", { className: "text-sm font-semibold text-gray-900 dark:text-white", children: "Notifications" }), t.jsxs("div", { className: "flex items-center gap-2", children: [a > 0 && t.jsx("button", { onClick: v, className: "text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors duration-200", children: "Mark all as read" }), t.jsx("button", { onClick: () => i(!1), className: "p-1 hover:bg-gray-100 dark:hover:bg-slate-800 rounded", children: t.jsx(fa, { className: "h-5 w-5" }) })] })] }), t.jsx("div", { className: "flex-1 overflow-y-auto", children: o ? t.jsx("div", { className: "p-8 text-center", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto" }) }) : e.length === 0 ? t.jsxs("div", { className: "p-8 text-center text-gray-500 dark:text-gray-400", children: [t.jsx(Bl, { className: "h-12 w-12 mx-auto mb-2 opacity-30" }), t.jsx("p", { className: "text-sm", children: "No notifications yet" })] }) : e.map(C => t.jsx("div", { className: `px-4 py-3 hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors text-left border-b border-gray-100 dark:border-slate-800 last:border-0 cursor-pointer ${C.read ? "" : "bg-blue-50/50 dark:bg-blue-900/10"}`, onClick: () => E(C), children: t.jsxs("div", { className: "flex items-start gap-2", children: [t.jsxs("div", { className: "flex-1 min-w-0", children: [t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("h4", { className: "text-sm font-semibold text-gray-900 dark:text-white", children: C.title }), !C.read && t.jsx("span", { className: "w-2 h-2 bg-blue-600 rounded-full flex-shrink-0" })] }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mt-0.5", children: C.message }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-500 mt-1", children: zD(new Date(C.createdAt), { addSuffix: !0 }) })] }), t.jsxs("div", { className: "flex items-center gap-1 flex-shrink-0", children: [!C.read && t.jsx("button", { onClick: N => { N.stopPropagation(), j(C.id) }, className: "p-1 hover:bg-gray-200 dark:hover:bg-slate-700 rounded", title: "Mark as read", children: t.jsx(vf, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: N => { N.stopPropagation(), S(C.id) }, className: "p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded", title: "Delete", children: t.jsx(yt, { className: "h-4 w-4 text-red-600" }) })] })] }) }, C.id)) }), t.jsx("div", { className: "px-4 py-3 border-t border-gray-200 dark:border-slate-800 bg-gray-50 dark:bg-slate-800/50 text-center", children: t.jsx("button", { onClick: () => { f("/business-settings/notifications"), i(!1) }, className: "text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors duration-200", children: "Notification Settings" }) })] })] })] }) }, kF = () => { const e = xt(), { user: r, hasPermission: a } = mr(), { t: s } = kn(); return Je.useEffect(() => { const n = i => { (i.metaKey || i.ctrlKey) && i.key.toLowerCase() === "k" && (i.preventDefault(), document.querySelector("input[data-topsearch-input]")?.focus()) }; return window.addEventListener("keydown", n), () => window.removeEventListener("keydown", n) }, []), t.jsx(t.Fragment, { children: t.jsxs("div", { className: "hidden md:flex items-center justify-between px-6 h-14 bg-white dark:bg-slate-900 border-b border-gray-200 dark:border-slate-800 sticky top-0 z-30 shadow-sm top-header", children: [t.jsx("div", { className: "flex-1 max-w-sm", children: t.jsx("div", { className: "relative", children: t.jsx(a8, {}) }) }), t.jsxs("div", { className: "flex items-center gap-2 ml-4", children: [a(Ye.LEAD.CREATE) && t.jsxs(t.Fragment, { children: [t.jsx("span", { className: "sr-only", children: "Create new lead" }), t.jsx(ue, { onClick: () => e("/leads/new"), variant: "PRIMARY", size: "SM", icon: t.jsx($t, { className: "w-4 h-4" }), "aria-label": "Create new lead", className: "shadow-sm", children: t.jsx("span", { className: "hidden lg:inline", children: s("header.new", "New") }) })] }), t.jsx(BD, {})] })] }) }) }, SF = ({ open: e }) => { const r = xt(); if (!e) return null; const a = () => { r("/profile", { state: { focusPassword: !0 } }) }; return t.jsx("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm", children: t.jsx("div", { className: "w-full max-w-md bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-800 p-6 m-4 animate-in fade-in zoom-in duration-200", children: t.jsxs("div", { className: "flex flex-col items-center text-center gap-4", children: [t.jsx("div", { className: "p-3 bg-amber-100 dark:bg-amber-900/30 rounded-full", children: t.jsx(km, { className: "w-8 h-8 text-amber-600 dark:text-amber-500" }) }), t.jsxs("div", { className: "space-y-2", children: [t.jsx("h2", { className: "text-xl font-bold text-gray-900 dark:text-white", children: "Password Change Required" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "For security reasons, you must change your temporary password before continuing." })] }), t.jsx("div", { className: "w-full p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-100 dark:border-blue-800 text-left", children: t.jsxs("div", { className: "flex gap-3", children: [t.jsx(Ol, { className: "w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0" }), t.jsxs("div", { className: "space-y-1", children: [t.jsx("p", { className: "text-sm font-medium text-blue-900 dark:text-blue-300", children: "Action Required" }), t.jsx("p", { className: "text-xs text-blue-700 dark:text-blue-400", children: "Please update your password in your profile settings to secure your account." })] })] }) }), t.jsx("button", { onClick: a, className: "w-full py-2.5 px-4 bg-weconnect-red hover:bg-red-700 text-white font-medium rounded-lg transition-colors focus:ring-4 focus:ring-red-500/20", children: "Go to Change Password" })] }) }) }) }, CF = [{ id: "task-management", name: "Task Management", href: "/task-management", icon: Uu, permission: Ye.ACTIVITY.READ }, { id: "expense-management", name: "Expense", href: "/expense-management", icon: Qr, permission: Ye.EXPENSE.READ }, { id: "reports", name: "Reports", href: "/reports", icon: Qa, permission: Ye.DASHBOARD.READ, children: [{ id: "report-tasks", name: "Task Report", href: "/reports/tasks", icon: Qa, permission: Ye.DASHBOARD.READ }, { id: "report-leads", name: "Lead Report", href: "/reports/leads", icon: Qa, permission: Ye.DASHBOARD.READ }, { id: "report-deals", name: "Deal Report", href: "/reports/deals", icon: Qa, permission: Ye.DASHBOARD.READ }, { id: "report-expenses", name: "Expense Report", href: "/reports/expenses", icon: Qa, permission: Ye.DASHBOARD.READ }, { id: "report-invoices", name: "Invoice Report", href: "/reports/invoices", icon: Qa, permission: Ye.DASHBOARD.READ }, { id: "report-quotations", name: "Quotation Report", href: "/reports/quotations", icon: Qa, permission: Ye.DASHBOARD.READ }] }, { id: "products", name: "Products", href: "/products", icon: Fn, permission: "product.read" }, { id: "automation-management", name: "Automation", href: "/automation-management", icon: Rl, permission: Ye.AUTOMATION.READ }, { id: "logs", name: "Logs", href: "/logs", icon: Fu, permission: Ye.ACTIVITY.READ, adminOnly: !0 }], EF = "/assets/WeConnect_Logo_C2C-rC8fzL2F.svg", lt = ({ children: e }) => { const [r, a] = h.useState(!1), [s, n] = h.useState(!1), [i, o] = h.useState(null), [c, u] = h.useState(!1), [m, g] = h.useState(!1), { user: f, logout: y, hasPermission: p } = mr(), { isDark: b, toggleTheme: j } = HT(), { counts: v } = Sn(), { companySettings: S } = Br(), { resetMenuOrder: k } = iD(), { t: E } = kn(), C = Hn(), N = xt(), A = h.useRef(null), { isGlobalLoading: D } = y9(); h.useEffect(() => { const se = le => { A.current && !A.current.contains(le.target) && u(!1) }; return document.addEventListener("mousedown", se), () => { document.removeEventListener("mousedown", se) } }, []), h.useEffect(() => { const se = document.documentElement; return r ? se.classList.add("overflow-hidden") : se.classList.remove("overflow-hidden"), () => se.classList.remove("overflow-hidden") }, [r]); const I = Yo.replace(/\/api\/?$/, "") || window.location.origin, $ = [{ id: "dashboard", name: E("navigation.dashboard") || "Dashboard", href: "/", icon: K9, permission: Ye.DASHBOARD.READ }, { id: "leads", name: E("navigation.leads") || "Leads", href: "/leads", icon: Mt, permission: Ye.LEAD.READ, badge: v.leads.toString(), badgeColor: "bg-green-500" }, { id: "deals", name: "Deals", href: "/deals", icon: Qr, permission: Ye.DEAL.READ, badge: v.deals.toString(), badgeColor: "bg-purple-500" }, { id: "quotations", name: "Quotations", href: "/quotations", icon: Ti, permission: Ye.QUOTATION.READ, badge: "", badgeColor: "bg-indigo-500" }, { id: "invoices", name: "Invoices", href: "/invoices", icon: $i, permission: Ye.INVOICE.READ, badge: "", badgeColor: "bg-emerald-500" }], B = se => { const le = f?.roles?.some(ee => { const L = (ee.name || "").toLowerCase(); return L === "admin" || L === "super_admin" || L === "super admin" }); return se.filter(ee => { const L = ee.permission ? p(ee.permission) : !0, z = ee.adminOnly ? le : !0; return L && z }).map(ee => ({ ...ee, children: ee.children ? B(ee.children) : void 0 })) }; let W = B([...$, ...CF, { id: "trash", name: "Trash", href: "/trash", icon: yt, permission: Ye.TRASH.READ }, { id: "business-settings", name: "Business Settings", href: "/business-settings", icon: Hi, permission: Ye.BUSINESS_SETTINGS.READ }]); const M = W.findIndex(se => se.id === "trash"); if (M !== -1) { const se = W.splice(M, 1)[0]; W.splice(W.length - 1, 0, se) } const q = () => { y(), N("/login") }, V = () => { g(!0), u(!1) }, X = () => { g(!1), q() }; return t.jsxs("div", { className: "flex h-screen bg-gray-50 dark:bg-slate-950", children: [r && t.jsx("div", { className: "fixed inset-0 bg-black/50 z-40 md:hidden transition-opacity duration-300", onClick: () => a(!1) }), t.jsxs("div", { className: `${r ? "translate-x-0" : "-translate-x-full"} fixed md:relative md:translate-x-0 inset-y-0 left-0 z-50 flex flex-col ${s ? "md:w-16" : "w-72 md:w-64"} bg-white dark:bg-slate-900 border-r border-gray-200 dark:border-slate-800 shadow-lg transition-all duration-300`, children: [t.jsxs("div", { className: `flex items-center ${s ? "justify-center px-2" : "justify-between px-6 md:px-4"} h-16 md:h-14 border-b border-gray-200 dark:border-slate-800`, children: [!s && t.jsx(si, { to: "/", className: "flex items-center", children: S?.logo ? t.jsx("img", { src: S.logo, alt: S.name || l0.NAME, className: "h-8 w-auto max-w-[120px] object-contain" }) : S?.name ? t.jsx("span", { className: "text-lg font-bold text-gray-900 dark:text-white", children: S.name }) : t.jsx("img", { src: EF, alt: l0.NAME, className: "h-8 w-auto" }) }), s && t.jsx(si, { to: "/", className: "flex items-center justify-center", children: S?.logo ? t.jsx("img", { src: S.logo, alt: S.name || l0.NAME, className: "h-7 w-7 object-contain rounded" }) : t.jsx("div", { className: "w-7 h-7 bg-weconnect-red rounded-lg flex items-center justify-center", children: t.jsx("span", { className: "text-white font-bold text-xs", children: S?.name?.charAt(0) || "W" }) }) }), t.jsxs("div", { className: "flex items-center gap-1", children: [t.jsx("button", { className: "hidden md:flex items-center justify-center p-1.5 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors", onClick: () => n(!s), children: t.jsx(Xw, { size: 16, className: `transform transition-transform duration-200 ${s ? "rotate-180" : ""}` }) }), t.jsx("button", { className: "md:hidden p-1.5 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors", onClick: () => a(!1), children: t.jsx(fa, { size: 16 }) })] })] }), t.jsx("nav", { className: "flex-1 px-4 md:px-3 py-5 md:py-4 space-y-2 md:space-y-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 scrollbar-track-transparent", children: t.jsx(t8, { navigationItems: W, activeHref: C.pathname, sidebarCollapsed: s, hoveredItem: i, onHover: o, onNavigate: N, setSidebarOpen: a }) }), !s && t.jsx("div", { className: "px-4 py-2 border-t border-gray-200 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-800/30", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("span", { className: "text-[10px] text-gray-500 dark:text-gray-400 font-medium lowercase", children: E("menu.dragToReorder", "Drag menu items to reorder") }), t.jsx("button", { onClick: k, className: "text-[10px] text-weconnect-red dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors font-bold uppercase tracking-wider", children: E("menu.reset", "Reset") })] }) }), t.jsx("div", { className: "border-t border-gray-200 dark:border-slate-800 p-4 md:p-3", children: t.jsxs("div", { className: "relative", ref: A, children: [t.jsxs("button", { className: `w-full flex items-center ${s ? "justify-center" : "justify-between"} px-2 py-2 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors`, onClick: () => u(!c), children: [t.jsxs("div", { className: `flex items-center gap-3 md:gap-2 min-w-0 ${s ? "justify-center" : "flex-1"}`, children: [t.jsxs("div", { className: "relative flex-shrink-0", children: [f?.profilePicture ? t.jsx("img", { src: `${I}/uploads/${f.profilePicture}`, alt: "Profile", className: "w-10 h-10 md:w-8 md:h-8 rounded-lg object-cover" }) : t.jsx("div", { className: "w-10 h-10 md:w-8 md:h-8 bg-weconnect-red rounded-lg flex items-center justify-center", children: t.jsx(wt, { size: 18, className: "md:w-4 md:h-4 text-white" }) }), t.jsx("div", { className: "absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-400 rounded-full border border-white dark:border-slate-900" })] }), !s && t.jsxs("div", { className: "text-left min-w-0 flex-1", children: [t.jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-white break-words leading-tight", children: f?.fullName || f?.firstName || "User" }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 break-all leading-tight", children: f?.email })] })] }), !s && t.jsx(_s, { size: 14, className: `transition-transform duration-200 flex-shrink-0 ${c ? "rotate-180" : ""}` })] }), c && !s && t.jsx("div", { className: "absolute bottom-full left-0 right-0 mb-2 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700", children: t.jsxs("div", { className: "py-1", children: [t.jsxs("button", { onClick: () => { N("/profile"), u(!1) }, className: "w-full px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center justify-center gap-2 transition-colors text-center", children: [t.jsx(wt, { size: 14 }), t.jsx("span", { children: E("user.profile", "Profile") })] }), t.jsx("div", { className: "border-t border-gray-200 dark:border-slate-700 my-1" }), t.jsxs("button", { onClick: j, className: "w-full px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center justify-center gap-2 transition-colors text-center", children: [b ? t.jsx(nU, { size: 14 }) : t.jsx(J9, { size: 14 }), t.jsx("span", { children: b ? "Light Mode" : "Dark Mode" })] }), t.jsx("div", { className: "px-3 py-1.5 flex justify-center", children: t.jsx(mU, {}) }), t.jsx("div", { className: "border-t border-gray-200 dark:border-slate-700 my-1" }), t.jsxs("button", { onClick: V, className: "w-full px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center justify-center gap-2 transition-colors text-center", children: [t.jsx(Q9, { size: 14 }), t.jsx("span", { children: "Logout" })] })] }) })] }) })] }), t.jsxs("div", { className: "flex-1 flex flex-col overflow-hidden", children: [t.jsx(kF, {}), t.jsxs("div", { className: "bg-white dark:bg-slate-900 border-b border-gray-200 dark:border-slate-800 px-4 py-4 flex items-center justify-between md:hidden sticky top-0 z-30", children: [t.jsx("button", { onClick: () => a(!0), className: "p-2 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors", children: t.jsx(X9, { size: 18 }) }), t.jsx("h1", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: S?.name || l0.NAME }), t.jsx("div", { className: "flex items-center gap-2", children: t.jsx(BD, {}) })] }), t.jsx("main", { className: "flex-1 overflow-y-auto bg-gray-50 dark:bg-slate-950", children: t.jsxs("div", { className: "relative h-full", children: [D && t.jsx("div", { className: "absolute inset-0 z-20 flex flex-col items-center justify-center gap-4 bg-white/70 dark:bg-slate-950/70 backdrop-blur-sm transition-opacity", children: t.jsxs("div", { className: "flex flex-col items-center gap-3", children: [t.jsx("div", { className: "h-12 w-12 rounded-full border-4 border-weconnect-red/30 border-t-weconnect-red animate-spin" }), t.jsx("p", { className: "text-sm font-medium text-gray-700 dark:text-gray-200", children: "Loading" })] }) }), t.jsx("div", { className: D ? "pointer-events-none opacity-50 transition-opacity duration-200" : "transition-opacity duration-200", children: e })] }) })] }), t.jsx(Cm, { open: m, title: "Confirm Logout", description: "Are you sure you want to logout? You will need to sign in again to access your account.", confirmText: "Logout", cancelText: "Cancel", loading: !1, onConfirm: X, onClose: () => g(!1) }), t.jsx(SF, { open: !!f?.mustChangePassword && C.pathname !== "/profile" })] }) }, AF = "/assets/logo-CYMF_Y8v.png", PF = ({ isOpen: e, onClose: r, onNavigateToProfile: a }) => { const { user: s, updateUser: n } = mr(), [i, o] = h.useState(""), [c, u] = h.useState(""), [m, g] = h.useState(!1), [f, y] = h.useState(!1), [p, b] = h.useState(!1), [j, v] = h.useState(null), [S, k] = h.useState({ length: !1, lowercase: !1, uppercase: !1, number: !1, special: !1 }), E = N => { o(N), v(null); const A = /[a-z]/.test(N), D = /[A-Z]/.test(N), I = /[0-9]/.test(N), $ = /[^A-Za-z0-9]/.test(N), B = N.length >= 8; k({ length: B, lowercase: A, uppercase: D, number: I, special: $ }) }, C = async N => { if (N.preventDefault(), v(null), !i || !c) { v("Please fill in all fields"); return } if (i !== c) { v("New password and confirm password do not match"); return } const A = i, D = /[a-z]/.test(A), I = /[A-Z]/.test(A), $ = /[0-9]/.test(A), B = /[^A-Za-z0-9]/.test(A); if (!(A.length >= 8 && D && I && $ && B)) { v("Password must be 8+ characters with uppercase, lowercase, number, and special symbol"); return } try { b(!0); const q = await ur.changePasswordForNewUser(i), V = q?.data?.user || q?.user || q; V ? n({ ...s, ...V, mustChangePassword: !1 }) : s?.mustChangePassword && n({ ...s, mustChangePassword: !1 }), R.success("Password updated successfully! You can now access all features.", { toastId: "password_change_success" }), r(), a() } catch (q) { const V = q?.response?.data?.message || q?.message || "Failed to update password"; v(V) } finally { b(!1) } }; return e ? t.jsx("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full p-6", children: [t.jsxs("div", { className: "text-center mb-6", children: [t.jsx("div", { className: "mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 mb-4", children: t.jsx(km, { className: "h-6 w-6 text-red-600 dark:text-red-400" }) }), t.jsx("h2", { className: "text-xl font-semibold text-gray-900 dark:text-white mb-2", children: "Change Your Password" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "For security reasons, you must change your temporary password before accessing the system." })] }), t.jsxs("form", { onSubmit: C, className: "space-y-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "New Password" }), t.jsxs("div", { className: "relative", children: [t.jsx("input", { type: m ? "text" : "password", value: i, onChange: N => E(N.target.value), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white pr-10", placeholder: "Enter new password", required: !0 }), t.jsx("button", { type: "button", onClick: () => g(!m), className: "absolute inset-y-0 right-0 pr-3 flex items-center", children: m ? t.jsx(bn, { className: "h-4 w-4 text-gray-400" }) : t.jsx(Ht, { className: "h-4 w-4 text-gray-400" }) })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Confirm New Password" }), t.jsxs("div", { className: "relative", children: [t.jsx("input", { type: f ? "text" : "password", value: c, onChange: N => u(N.target.value), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white pr-10", placeholder: "Confirm new password", required: !0 }), t.jsx("button", { type: "button", onClick: () => y(!f), className: "absolute inset-y-0 right-0 pr-3 flex items-center", children: f ? t.jsx(bn, { className: "h-4 w-4 text-gray-400" }) : t.jsx(Ht, { className: "h-4 w-4 text-gray-400" }) })] })] }), t.jsxs("div", { className: "text-xs text-gray-700 dark:text-gray-300 space-y-1", children: [t.jsx("div", { className: "font-medium", children: "Password must include:" }), t.jsxs("div", { className: "grid grid-cols-1 gap-1", children: [t.jsxs("div", { className: "flex items-center", children: [S.length ? t.jsx(ut, { className: "h-4 w-4 text-green-600 mr-1" }) : t.jsx(dr, { className: "h-4 w-4 text-gray-400 mr-1" }), t.jsx("span", { children: "At least 8 characters" })] }), t.jsxs("div", { className: "flex items-center", children: [S.lowercase ? t.jsx(ut, { className: "h-4 w-4 text-green-600 mr-1" }) : t.jsx(dr, { className: "h-4 w-4 text-gray-400 mr-1" }), t.jsx("span", { children: "Lowercase letter (a-z)" })] }), t.jsxs("div", { className: "flex items-center", children: [S.uppercase ? t.jsx(ut, { className: "h-4 w-4 text-green-600 mr-1" }) : t.jsx(dr, { className: "h-4 w-4 text-gray-400 mr-1" }), t.jsx("span", { children: "Uppercase letter (A-Z)" })] }), t.jsxs("div", { className: "flex items-center", children: [S.number ? t.jsx(ut, { className: "h-4 w-4 text-green-600 mr-1" }) : t.jsx(dr, { className: "h-4 w-4 text-gray-400 mr-1" }), t.jsx("span", { children: "Number (0-9)" })] }), t.jsxs("div", { className: "flex items-center", children: [S.special ? t.jsx(ut, { className: "h-4 w-4 text-green-600 mr-1" }) : t.jsx(dr, { className: "h-4 w-4 text-gray-400 mr-1" }), t.jsx("span", { children: "Special symbol (!@#$%^&*...)" })] })] })] }), j && t.jsx("p", { className: "text-xs text-red-500", children: j }), t.jsx("button", { type: "submit", disabled: p, className: "w-full bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center", children: p ? t.jsxs(t.Fragment, { children: [t.jsx("div", { className: "h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2" }), "Updating Password..."] }) : "Change Password" })] })] }) }) : null }, TF = 8, DF = 64, OF = () => { const [e, r] = h.useState({ email: "", password: "" }), [a, s] = h.useState(!1), [n, i] = h.useState({}), [o, c] = h.useState(() => localStorage.getItem("rememberMe") === "true"), [u, m] = h.useState(null), [g, f] = h.useState(!1), { login: y, isLoading: p, error: b, clearError: j, user: v } = mr(), { companySettings: S } = Br(), k = xt(); h.useEffect(() => { v?.mustChangePassword && f(!0) }, [v?.mustChangePassword]), h.useEffect(() => { if (o) { const D = localStorage.getItem("rememberedEmail") || ""; D && r(I => ({ ...I, email: D })) } }, [o]), h.useEffect(() => { b && m(b) }, [b]); const E = () => { const D = {}, I = e.email.trim(), $ = e.password.trim(); return I ? /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I) || (D.email = "Enter a valid email address") : D.email = "Email is required", $ || (D.password = "Password is required"), i(D), !(Object.keys(D).length > 0) }, C = async D => { if (D.preventDefault(), p) return; const I = { email: e.email.trim(), password: e.password.trim() }; if ((I.email !== e.email || I.password !== e.password) && r(I), !!E()) try { m(null), await y(I), localStorage.setItem("rememberMe", String(o)), o ? localStorage.setItem("rememberedEmail", e.email) : localStorage.removeItem("rememberedEmail") } catch ($) { const B = $, W = B?.response?.data?.message || B?.message || "Invalid credentials"; m(W) } }; h.useEffect(() => { v && !v.mustChangePassword && k("/", { replace: !0 }) }, [v?.mustChangePassword, v, k]); const N = D => { const { name: I, value: $ } = D.target; r(B => ({ ...B, [I]: $ })), n[I] && i(B => ({ ...B, [I]: "" })), u && m(null), b && j() }, A = D => { const { name: I, value: $ } = D.target, B = $.trim(); B !== $ && r(W => ({ ...W, [I]: B })) }; return t.jsxs("div", { className: "relative min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-gray-900 to-black py-12 px-4 sm:px-6 lg:px-8 overflow-hidden", children: [t.jsxs("div", { className: "pointer-events-none absolute inset-0", children: [t.jsx("div", { className: "absolute -top-40 -left-40 h-80 w-80 rounded-full bg-weconnect-red opacity-20 blur-3xl animate-pulse" }), t.jsx("div", { className: "absolute -bottom-40 -right-40 h-96 w-96 rounded-full bg-blue-500 opacity-10 blur-3xl" }), t.jsx("div", { className: "absolute top-1/2 -right-20 h-60 w-60 rounded-full bg-purple-500 opacity-15 blur-2xl" }), t.jsx("div", { className: "absolute top-1/4 -left-20 h-40 w-40 rounded-full bg-cyan-400 opacity-20 blur-2xl" })] }), t.jsx("div", { className: "relative max-w-md w-full", children: t.jsxs("div", { className: "relative rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl shadow-2xl p-8", children: [t.jsx("div", { className: "absolute inset-0 rounded-2xl bg-gradient-to-br from-white/10 via-transparent to-transparent" }), t.jsxs("div", { className: "relative text-center mb-6", children: [t.jsx("div", { className: "mb-6", children: S?.logo ? t.jsx("img", { src: S.logo, alt: S.name || "CRM", className: "mx-auto max-w-[200px] max-h-[80px] w-auto h-auto object-contain" }) : t.jsx("img", { src: AF, alt: "WeConnect", className: "mx-auto w-48 h-auto" }) }), t.jsx("h1", { className: "text-3xl font-bold text-white tracking-tight mb-2", children: "Welcome back" }), t.jsxs("p", { className: "text-base text-white/60", children: ["Sign in to ", S?.name ? `${S.name} CRM` : "your CRM dashboard"] })] }), (u || b) && t.jsx("div", { className: "mb-4 rounded-lg border border-red-500/40 bg-red-500/10 text-red-200 px-4 py-3", children: t.jsx("p", { className: "text-sm", children: u || b }) }), t.jsxs("form", { className: "relative space-y-6", onSubmit: C, noValidate: !0, children: [t.jsxs("div", { children: [t.jsx("label", { htmlFor: "email", className: "block text-sm font-semibold text-white/90 mb-3", children: "Email Address" }), t.jsxs("div", { className: "relative group", children: [t.jsx("div", { className: "absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none", children: t.jsx(ir, { className: "h-5 w-5 text-white/60 group-focus-within:text-weconnect-red transition-colors" }) }), t.jsx("input", { id: "email", name: "email", type: "email", inputMode: "email", autoComplete: "email", required: !0, value: e.email, onChange: N, onBlur: A, className: `block w-full pl-12 pr-4 py-4 rounded-xl border-2 bg-white/5 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-weconnect-red/50 focus:border-weconnect-red backdrop-blur-sm transition-all duration-200 ${n.email ? "border-red-400/60 ring-red-400/20" : "border-white/10 hover:border-white/20 hover:bg-white/10"}`, placeholder: "Enter your email address" })] }), n.email && t.jsx("p", { className: "mt-2 text-sm text-red-400", children: n.email })] }), t.jsxs("div", { children: [t.jsx("label", { htmlFor: "password", className: "block text-sm font-semibold text-white/90 mb-3", children: "Password" }), t.jsxs("div", { className: "relative group", children: [t.jsx("div", { className: "absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none", children: t.jsx(km, { className: "h-5 w-5 text-white/60 group-focus-within:text-weconnect-red transition-colors" }) }), t.jsx("input", { id: "password", name: "password", type: a ? "text" : "password", autoComplete: "current-password", required: !0, minLength: TF, maxLength: DF, value: e.password, onChange: N, onBlur: A, className: `block w-full pl-12 pr-12 py-4 rounded-xl border-2 bg-white/5 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-weconnect-red/50 focus:border-weconnect-red backdrop-blur-sm transition-all duration-200 ${n.password ? "border-red-400/60 ring-red-400/20" : "border-white/10 hover:border-white/20 hover:bg-white/10"}`, placeholder: "Enter your password" }), t.jsx("button", { type: "button", className: "absolute inset-y-0 right-0 pr-4 flex items-center hover:text-weconnect-red transition-colors", onClick: () => s(!a), children: a ? t.jsx(bn, { className: "h-5 w-5 text-white/60" }) : t.jsx(Ht, { className: "h-5 w-5 text-white/60" }) })] })] }), t.jsxs("div", { className: "flex items-center justify-between pt-2", children: [t.jsxs("label", { className: "flex items-center space-x-3 text-sm text-white/70 select-none cursor-pointer hover:text-white/90 transition-colors", children: [t.jsx("input", { type: "checkbox", className: "h-4 w-4 rounded border-white/20 bg-white/5 text-weconnect-red focus:ring-weconnect-red focus:ring-offset-0 focus:ring-2 transition-all", checked: o, onChange: D => { const I = D.target.checked; c(I), localStorage.setItem("rememberMe", String(I)), I || localStorage.removeItem("rememberedEmail") } }), t.jsx("span", { children: "Remember me" })] }), t.jsx("button", { type: "button", className: "text-sm font-medium text-weconnect-red hover:text-red-400 transition-colors", onClick: () => { const D = e.email || localStorage.getItem("rememberedEmail") || "", I = `mailto:support@example.com?subject=Password%20reset%20request&body=My%20login%20email:%20${encodeURIComponent(D)}`; window.location.href = I }, children: "Forgot password?" })] }), t.jsx("button", { type: "submit", disabled: p, "aria-disabled": p, "aria-busy": p, className: "w-full flex justify-center items-center py-4 px-6 mt-8 rounded-xl text-base font-semibold text-white bg-weconnect-red hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-weconnect-red/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl", children: p ? t.jsxs("div", { className: "flex items-center space-x-3", children: [t.jsx("div", { className: "animate-spin rounded-full h-5 w-5 border-b-2 border-white" }), t.jsx("span", { children: "Signing in..." })] }) : "Sign In" })] })] }) }), t.jsx(PF, { isOpen: g, onClose: () => f(!1), onNavigateToProfile: () => k("/", { replace: !0 }) })] }) }; function IF(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3" }, child: [] }] })(e) } function LF(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18" }, child: [] }] })(e) } function by(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z" }, child: [] }] })(e) } function aC(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "m4.5 12.75 6 6 9-13.5" }, child: [] }] })(e) } function RF(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "M15.75 19.5 8.25 12l7.5-7.5" }, child: [] }] })(e) } function MF(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "m8.25 4.5 7.5 7.5-7.5 7.5" }, child: [] }] })(e) } function sC(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" }, child: [] }] })(e) } function _F(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" }, child: [] }] })(e) } function nC(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" }, child: [] }] })(e) } function $F(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "M5 12h14" }, child: [] }] })(e) } function iC(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z" }, child: [] }] })(e) } function UF(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "M12 4.5v15m7.5-7.5h-15" }, child: [] }] })(e) } function FF(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0" }, child: [] }] })(e) } function zF(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z" }, child: [] }] })(e) } function BF(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z" }, child: [] }] })(e) } function qF(e) { return or({ attr: { fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { strokeLinecap: "round", strokeLinejoin: "round", d: "M6 18 18 6M6 6l12 12" }, child: [] }] })(e) } function wy({ icon: e, title: r, value: a, subtitle: s, trend: n, color: i = "blue", isLoading: o = !1, className: c = "" }) { const m = { blue: { bg: "bg-white/10 dark:bg-black/10", iconBg: "bg-blue-200 dark:bg-blue-950", iconColor: "text-blue-600 dark:text-blue-400", trendColor: "text-blue-600 dark:text-blue-400" }, green: { bg: "bg-white/10 dark:bg-black/10", iconBg: "bg-green-200 dark:bg-green-950", iconColor: "text-green-600 dark:text-green-400", trendColor: "text-green-600 dark:text-green-400" }, purple: { bg: "bg-white/10 dark:bg-black/10", iconBg: "bg-purple-200 dark:bg-purple-950", iconColor: "text-purple-600 dark:text-purple-400", trendColor: "text-purple-600 dark:text-purple-400" }, orange: { bg: "bg-white/10 dark:bg-black/10", iconBg: "bg-orange-200 dark:bg-orange-950", iconColor: "text-orange-600 dark:text-orange-400", trendColor: "text-orange-600 dark:text-orange-400" }, red: { bg: "bg-white/10 dark:bg-black/10", iconBg: "bg-red-200 dark:bg-red-950", iconColor: "text-red-600 dark:text-red-400", trendColor: "text-red-600 dark:text-red-400" }, indigo: { bg: "bg-white/10 dark:bg-black/10", iconBg: "bg-indigo-200 dark:bg-indigo-950", iconColor: "text-indigo-600 dark:text-indigo-400", trendColor: "text-indigo-600 dark:text-indigo-400" } }[i], g = () => n ? n.value > 0 ? t.jsx(LF, { className: "w-4 h-4" }) : n.value < 0 ? t.jsx(IF, { className: "w-4 h-4" }) : t.jsx($F, { className: "w-4 h-4" }) : null, f = () => n ? n.isPositive !== void 0 ? n.isPositive ? "text-green-600" : "text-red-600" : n.value > 0 ? "text-green-600" : n.value < 0 ? "text-red-600" : "text-gray-500" : "text-gray-500"; return t.jsx("div", { className: `${m.bg} rounded-xl p-4 shadow-sm  hover:shadow-md transition-all duration-200 ${c}`, children: t.jsx("div", { className: "flex items-start justify-between", children: t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center space-x-3 mb-2", children: [t.jsx("div", { className: `w-12 h-12 ${m.iconBg} rounded-xl flex items-center justify-center`, children: t.jsx("div", { className: `${m.iconColor}`, children: e }) }), t.jsxs("div", { className: "flex-1", children: [t.jsx("h3", { className: "text-sm font-medium text-white/70 dark:text-gray-300 mb-1", children: r }), t.jsx("div", { className: "text-2xl font-bold text-white/70 dark:text-white", children: o ? t.jsx("div", { className: "flex items-center space-x-2", children: t.jsx("div", { className: "animate-pulse bg-white/20 dark:bg-gray-600 h-8 w-16 rounded" }) }) : typeof a == "number" ? a.toLocaleString() : a })] })] }), s && t.jsx("p", { className: "text-xs text-white/70 dark:text-gray-400 mb-2", children: s }), n && t.jsxs("div", { className: `flex items-center space-x-1 ${f()}`, children: [g(), t.jsxs("span", { className: "text-sm font-medium", children: [Math.abs(n.value), "%"] }), t.jsx("span", { className: "text-xs text-white/70 dark:text-gray-400", children: n.label })] })] }) }) }) } class HF { async getLeadStatusDistribution(r, a = "all") { const s = new URLSearchParams; return r && s.append("userId", r.toString()), s.append("scope", a), (await ie.get(`/analytics/charts/lead-status-distribution?${s}`)).data } async getRevenueTrends(r = 12, a, s = "all") { const n = new URLSearchParams; return n.append("months", r.toString()), a && n.append("userId", a.toString()), n.append("scope", s), (await ie.get(`/analytics/charts/revenue-trends?${n}`)).data } async getActivityTrends(r = 12, a, s = "all") { const n = new URLSearchParams; return n.append("months", r.toString()), a && n.append("userId", a.toString()), n.append("scope", s), (await ie.get(`/analytics/charts/activity-trends?${n}`)).data } async getUserGrowth(r = 12) { return (await ie.get(`/analytics/charts/user-growth?months=${r}`)).data } async getLeadConversionFunnel(r, a = "all") { const s = new URLSearchParams; return r && s.append("userId", r.toString()), s.append("scope", a), (await ie.get(`/analytics/charts/lead-conversion-funnel?${s}`)).data } async getSalesPipelineFlow(r = 6, a, s = "all") { const n = new URLSearchParams; return n.append("months", r.toString()), a && n.append("userId", a.toString()), n.append("scope", s), (await ie.get(`/analytics/charts/sales-pipeline-flow?${n}`)).data } async getTopPerformers(r = 5, a, s = "all") { const n = new URLSearchParams; return n.append("limit", r.toString()), a && n.append("userId", a.toString()), n.append("scope", s), (await ie.get(`/analytics/charts/top-performers?${n}`)).data } async getDealVelocity(r = 6, a, s = "all") { const n = new URLSearchParams; return n.append("months", r.toString()), a && n.append("userId", a.toString()), n.append("scope", s), (await ie.get(`/analytics/charts/deal-velocity?${n}`)).data } async getKPIs(r, a, s, n = "all") { const i = new URLSearchParams; return r && i.append("startDate", r), a && i.append("endDate", a), s && i.append("userId", s.toString()), i.append("scope", n), (await ie.get(`/analytics/dashboard/kpis?${i}`)).data } async getLeadSourceDistribution(r, a = "all") { const s = new URLSearchParams; return r && s.append("userId", r.toString()), s.append("scope", a), (await ie.get(`/analytics/charts/lead-source-distribution?${s}`)).data } async getTaskReport(r = 6, a, s = "all", n = 1, i = 10, o) { const c = new URLSearchParams; return c.append("months", r.toString()), a && c.append("userId", a.toString()), c.append("scope", s), c.append("page", n.toString()), c.append("limit", i.toString()), o && c.append("filters", JSON.stringify(o)), (await ie.get(`/analytics/reports/task?${c}`)).data } async getLeadReport(r = 6, a, s = "all", n = 1, i = 10, o) { const c = new URLSearchParams; return c.append("months", r.toString()), a && c.append("userId", a.toString()), c.append("scope", s), c.append("page", n.toString()), c.append("limit", i.toString()), o && c.append("filters", JSON.stringify(o)), (await ie.get(`/analytics/reports/lead?${c}`)).data } async getDealReport(r = 6, a, s = "all", n = 1, i = 10, o) { const c = new URLSearchParams; return c.append("months", r.toString()), a && c.append("userId", a.toString()), c.append("scope", s), c.append("page", n.toString()), c.append("limit", i.toString()), o && c.append("filters", JSON.stringify(o)), (await ie.get(`/analytics/reports/deal?${c}`)).data } async getExpenseReport(r = 6, a, s = "all", n = 1, i = 10, o) { const c = new URLSearchParams; return c.append("months", r.toString()), a && c.append("userId", a.toString()), c.append("scope", s), c.append("page", n.toString()), c.append("limit", i.toString()), o && c.append("filters", JSON.stringify(o)), (await ie.get(`/analytics/reports/expense?${c}`)).data } async getInvoiceReport(r = 6, a, s = "all", n = 1, i = 10, o) { const c = new URLSearchParams; return c.append("months", r.toString()), a && c.append("userId", a.toString()), c.append("scope", s), c.append("page", n.toString()), c.append("limit", i.toString()), o && c.append("filters", JSON.stringify(o)), (await ie.get(`/analytics/reports/invoice?${c}`)).data } async getQuotationReport(r = 6, a, s = "all", n = 1, i = 10, o) { const c = new URLSearchParams; return c.append("months", r.toString()), a && c.append("userId", a.toString()), c.append("scope", s), c.append("page", n.toString()), c.append("limit", i.toString()), o && c.append("filters", JSON.stringify(o)), (await ie.get(`/analytics/reports/quotation?${c}`)).data } } const ti = new HF; function qD(e) { var r, a, s = ""; if (typeof e == "string" || typeof e == "number") s += e; else if (typeof e == "object") if (Array.isArray(e)) { var n = e.length; for (r = 0; r < n; r++)e[r] && (a = qD(e[r])) && (s && (s += " "), s += a) } else for (a in e) e[a] && (s && (s += " "), s += a); return s } function er() { for (var e, r, a = 0, s = "", n = arguments.length; a < n; a++)(e = arguments[a]) && (r = qD(e)) && (s && (s += " "), s += r); return s } var WF = ["dangerouslySetInnerHTML", "onCopy", "onCopyCapture", "onCut", "onCutCapture", "onPaste", "onPasteCapture", "onCompositionEnd", "onCompositionEndCapture", "onCompositionStart", "onCompositionStartCapture", "onCompositionUpdate", "onCompositionUpdateCapture", "onFocus", "onFocusCapture", "onBlur", "onBlurCapture", "onChange", "onChangeCapture", "onBeforeInput", "onBeforeInputCapture", "onInput", "onInputCapture", "onReset", "onResetCapture", "onSubmit", "onSubmitCapture", "onInvalid", "onInvalidCapture", "onLoad", "onLoadCapture", "onError", "onErrorCapture", "onKeyDown", "onKeyDownCapture", "onKeyPress", "onKeyPressCapture", "onKeyUp", "onKeyUpCapture", "onAbort", "onAbortCapture", "onCanPlay", "onCanPlayCapture", "onCanPlayThrough", "onCanPlayThroughCapture", "onDurationChange", "onDurationChangeCapture", "onEmptied", "onEmptiedCapture", "onEncrypted", "onEncryptedCapture", "onEnded", "onEndedCapture", "onLoadedData", "onLoadedDataCapture", "onLoadedMetadata", "onLoadedMetadataCapture", "onLoadStart", "onLoadStartCapture", "onPause", "onPauseCapture", "onPlay", "onPlayCapture", "onPlaying", "onPlayingCapture", "onProgress", "onProgressCapture", "onRateChange", "onRateChangeCapture", "onSeeked", "onSeekedCapture", "onSeeking", "onSeekingCapture", "onStalled", "onStalledCapture", "onSuspend", "onSuspendCapture", "onTimeUpdate", "onTimeUpdateCapture", "onVolumeChange", "onVolumeChangeCapture", "onWaiting", "onWaitingCapture", "onAuxClick", "onAuxClickCapture", "onClick", "onClickCapture", "onContextMenu", "onContextMenuCapture", "onDoubleClick", "onDoubleClickCapture", "onDrag", "onDragCapture", "onDragEnd", "onDragEndCapture", "onDragEnter", "onDragEnterCapture", "onDragExit", "onDragExitCapture", "onDragLeave", "onDragLeaveCapture", "onDragOver", "onDragOverCapture", "onDragStart", "onDragStartCapture", "onDrop", "onDropCapture", "onMouseDown", "onMouseDownCapture", "onMouseEnter", "onMouseLeave", "onMouseMove", "onMouseMoveCapture", "onMouseOut", "onMouseOutCapture", "onMouseOver", "onMouseOverCapture", "onMouseUp", "onMouseUpCapture", "onSelect", "onSelectCapture", "onTouchCancel", "onTouchCancelCapture", "onTouchEnd", "onTouchEndCapture", "onTouchMove", "onTouchMoveCapture", "onTouchStart", "onTouchStartCapture", "onPointerDown", "onPointerDownCapture", "onPointerMove", "onPointerMoveCapture", "onPointerUp", "onPointerUpCapture", "onPointerCancel", "onPointerCancelCapture", "onPointerEnter", "onPointerEnterCapture", "onPointerLeave", "onPointerLeaveCapture", "onPointerOver", "onPointerOverCapture", "onPointerOut", "onPointerOutCapture", "onGotPointerCapture", "onGotPointerCaptureCapture", "onLostPointerCapture", "onLostPointerCaptureCapture", "onScroll", "onScrollCapture", "onWheel", "onWheelCapture", "onAnimationStart", "onAnimationStartCapture", "onAnimationEnd", "onAnimationEndCapture", "onAnimationIteration", "onAnimationIterationCapture", "onTransitionEnd", "onTransitionEndCapture"]; function lj(e) { if (typeof e != "string") return !1; var r = WF; return r.includes(e) } var VF = ["aria-activedescendant", "aria-atomic", "aria-autocomplete", "aria-busy", "aria-checked", "aria-colcount", "aria-colindex", "aria-colspan", "aria-controls", "aria-current", "aria-describedby", "aria-details", "aria-disabled", "aria-errormessage", "aria-expanded", "aria-flowto", "aria-haspopup", "aria-hidden", "aria-invalid", "aria-keyshortcuts", "aria-label", "aria-labelledby", "aria-level", "aria-live", "aria-modal", "aria-multiline", "aria-multiselectable", "aria-orientation", "aria-owns", "aria-placeholder", "aria-posinset", "aria-pressed", "aria-readonly", "aria-relevant", "aria-required", "aria-roledescription", "aria-rowcount", "aria-rowindex", "aria-rowspan", "aria-selected", "aria-setsize", "aria-sort", "aria-valuemax", "aria-valuemin", "aria-valuenow", "aria-valuetext", "className", "color", "height", "id", "lang", "max", "media", "method", "min", "name", "style", "target", "width", "role", "tabIndex", "accentHeight", "accumulate", "additive", "alignmentBaseline", "allowReorder", "alphabetic", "amplitude", "arabicForm", "ascent", "attributeName", "attributeType", "autoReverse", "azimuth", "baseFrequency", "baselineShift", "baseProfile", "bbox", "begin", "bias", "by", "calcMode", "capHeight", "clip", "clipPath", "clipPathUnits", "clipRule", "colorInterpolation", "colorInterpolationFilters", "colorProfile", "colorRendering", "contentScriptType", "contentStyleType", "cursor", "cx", "cy", "d", "decelerate", "descent", "diffuseConstant", "direction", "display", "divisor", "dominantBaseline", "dur", "dx", "dy", "edgeMode", "elevation", "enableBackground", "end", "exponent", "externalResourcesRequired", "fill", "fillOpacity", "fillRule", "filter", "filterRes", "filterUnits", "floodColor", "floodOpacity", "focusable", "fontFamily", "fontSize", "fontSizeAdjust", "fontStretch", "fontStyle", "fontVariant", "fontWeight", "format", "from", "fx", "fy", "g1", "g2", "glyphName", "glyphOrientationHorizontal", "glyphOrientationVertical", "glyphRef", "gradientTransform", "gradientUnits", "hanging", "horizAdvX", "horizOriginX", "href", "ideographic", "imageRendering", "in2", "in", "intercept", "k1", "k2", "k3", "k4", "k", "kernelMatrix", "kernelUnitLength", "kerning", "keyPoints", "keySplines", "keyTimes", "lengthAdjust", "letterSpacing", "lightingColor", "limitingConeAngle", "local", "markerEnd", "markerHeight", "markerMid", "markerStart", "markerUnits", "markerWidth", "mask", "maskContentUnits", "maskUnits", "mathematical", "mode", "numOctaves", "offset", "opacity", "operator", "order", "orient", "orientation", "origin", "overflow", "overlinePosition", "overlineThickness", "paintOrder", "panose1", "pathLength", "patternContentUnits", "patternTransform", "patternUnits", "pointerEvents", "pointsAtX", "pointsAtY", "pointsAtZ", "preserveAlpha", "preserveAspectRatio", "primitiveUnits", "r", "radius", "refX", "refY", "renderingIntent", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "result", "rotate", "rx", "ry", "seed", "shapeRendering", "slope", "spacing", "specularConstant", "specularExponent", "speed", "spreadMethod", "startOffset", "stdDeviation", "stemh", "stemv", "stitchTiles", "stopColor", "stopOpacity", "strikethroughPosition", "strikethroughThickness", "string", "stroke", "strokeDasharray", "strokeDashoffset", "strokeLinecap", "strokeLinejoin", "strokeMiterlimit", "strokeOpacity", "strokeWidth", "surfaceScale", "systemLanguage", "tableValues", "targetX", "targetY", "textAnchor", "textDecoration", "textLength", "textRendering", "to", "transform", "u1", "u2", "underlinePosition", "underlineThickness", "unicode", "unicodeBidi", "unicodeRange", "unitsPerEm", "vAlphabetic", "values", "vectorEffect", "version", "vertAdvY", "vertOriginX", "vertOriginY", "vHanging", "vIdeographic", "viewTarget", "visibility", "vMathematical", "widths", "wordSpacing", "writingMode", "x1", "x2", "x", "xChannelSelector", "xHeight", "xlinkActuate", "xlinkArcrole", "xlinkHref", "xlinkRole", "xlinkShow", "xlinkTitle", "xlinkType", "xmlBase", "xmlLang", "xmlns", "xmlnsXlink", "xmlSpace", "y1", "y2", "y", "yChannelSelector", "z", "zoomAndPan", "ref", "key", "angle"], GF = new Set(VF); function HD(e) { return typeof e != "string" ? !1 : GF.has(e) } function WD(e) { return typeof e == "string" && e.startsWith("data-") } function vs(e) { if (typeof e != "object" || e === null) return {}; var r = {}; for (var a in e) Object.prototype.hasOwnProperty.call(e, a) && (HD(a) || WD(a)) && (r[a] = e[a]); return r } function Wl(e) { if (e == null) return null; if (h.isValidElement(e) && typeof e.props == "object" && e.props !== null) { var r = e.props; return vs(r) } return typeof e == "object" && !Array.isArray(e) ? vs(e) : null } function ls(e) { var r = {}; for (var a in e) Object.prototype.hasOwnProperty.call(e, a) && (HD(a) || WD(a) || lj(a)) && (r[a] = e[a]); return r } function KF(e) { return e == null ? null : h.isValidElement(e) ? ls(e.props) : typeof e == "object" && !Array.isArray(e) ? ls(e) : null } var YF = ["children", "width", "height", "viewBox", "className", "style", "title", "desc"]; function Rb() { return Rb = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Rb.apply(null, arguments) } function QF(e, r) { if (e == null) return {}; var a, s, n = XF(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function XF(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } var cj = h.forwardRef((e, r) => { var { children: a, width: s, height: n, viewBox: i, className: o, style: c, title: u, desc: m } = e, g = QF(e, YF), f = i || { width: s, height: n, x: 0, y: 0 }, y = er("recharts-surface", o); return h.createElement("svg", Rb({}, ls(g), { className: y, width: s, height: n, style: c, viewBox: "".concat(f.x, " ").concat(f.y, " ").concat(f.width, " ").concat(f.height), ref: r }), h.createElement("title", null, u), h.createElement("desc", null, m), a) }), ZF = ["children", "className"]; function Mb() { return Mb = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Mb.apply(null, arguments) } function JF(e, r) { if (e == null) return {}; var a, s, n = ez(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function ez(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } var aa = h.forwardRef((e, r) => { var { children: a, className: s } = e, n = JF(e, ZF), i = er("recharts-layer", s); return h.createElement("g", Mb({ className: i }, ls(n), { ref: r }), a) }), VD = h.createContext(null), tz = () => h.useContext(VD); function Ar(e) { return function () { return e } } const GD = Math.cos, gh = Math.sin, Vn = Math.sqrt, hh = Math.PI, Sf = 2 * hh, _b = Math.PI, $b = 2 * _b, wl = 1e-6, rz = $b - wl; function KD(e) { this._ += e[0]; for (let r = 1, a = e.length; r < a; ++r)this._ += arguments[r] + e[r] } function az(e) { let r = Math.floor(e); if (!(r >= 0)) throw new Error(`invalid digits: ${e}`); if (r > 15) return KD; const a = 10 ** r; return function (s) { this._ += s[0]; for (let n = 1, i = s.length; n < i; ++n)this._ += Math.round(arguments[n] * a) / a + s[n] } } class sz { constructor(r) { this._x0 = this._y0 = this._x1 = this._y1 = null, this._ = "", this._append = r == null ? KD : az(r) } moveTo(r, a) { this._append`M${this._x0 = this._x1 = +r},${this._y0 = this._y1 = +a}` } closePath() { this._x1 !== null && (this._x1 = this._x0, this._y1 = this._y0, this._append`Z`) } lineTo(r, a) { this._append`L${this._x1 = +r},${this._y1 = +a}` } quadraticCurveTo(r, a, s, n) { this._append`Q${+r},${+a},${this._x1 = +s},${this._y1 = +n}` } bezierCurveTo(r, a, s, n, i, o) { this._append`C${+r},${+a},${+s},${+n},${this._x1 = +i},${this._y1 = +o}` } arcTo(r, a, s, n, i) { if (r = +r, a = +a, s = +s, n = +n, i = +i, i < 0) throw new Error(`negative radius: ${i}`); let o = this._x1, c = this._y1, u = s - r, m = n - a, g = o - r, f = c - a, y = g * g + f * f; if (this._x1 === null) this._append`M${this._x1 = r},${this._y1 = a}`; else if (y > wl) if (!(Math.abs(f * u - m * g) > wl) || !i) this._append`L${this._x1 = r},${this._y1 = a}`; else { let p = s - o, b = n - c, j = u * u + m * m, v = p * p + b * b, S = Math.sqrt(j), k = Math.sqrt(y), E = i * Math.tan((_b - Math.acos((j + y - v) / (2 * S * k))) / 2), C = E / k, N = E / S; Math.abs(C - 1) > wl && this._append`L${r + C * g},${a + C * f}`, this._append`A${i},${i},0,0,${+(f * p > g * b)},${this._x1 = r + N * u},${this._y1 = a + N * m}` } } arc(r, a, s, n, i, o) { if (r = +r, a = +a, s = +s, o = !!o, s < 0) throw new Error(`negative radius: ${s}`); let c = s * Math.cos(n), u = s * Math.sin(n), m = r + c, g = a + u, f = 1 ^ o, y = o ? n - i : i - n; this._x1 === null ? this._append`M${m},${g}` : (Math.abs(this._x1 - m) > wl || Math.abs(this._y1 - g) > wl) && this._append`L${m},${g}`, s && (y < 0 && (y = y % $b + $b), y > rz ? this._append`A${s},${s},0,1,${f},${r - c},${a - u}A${s},${s},0,1,${f},${this._x1 = m},${this._y1 = g}` : y > wl && this._append`A${s},${s},0,${+(y >= _b)},${f},${this._x1 = r + s * Math.cos(i)},${this._y1 = a + s * Math.sin(i)}`) } rect(r, a, s, n) { this._append`M${this._x0 = this._x1 = +r},${this._y0 = this._y1 = +a}h${s = +s}v${+n}h${-s}Z` } toString() { return this._ } } function dj(e) { let r = 3; return e.digits = function (a) { if (!arguments.length) return r; if (a == null) r = null; else { const s = Math.floor(a); if (!(s >= 0)) throw new RangeError(`invalid digits: ${a}`); r = s } return e }, () => new sz(r) } function uj(e) { return typeof e == "object" && "length" in e ? e : Array.from(e) } function YD(e) { this._context = e } YD.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._point = 0 }, lineEnd: function () { (this._line || this._line !== 0 && this._point === 1) && this._context.closePath(), this._line = 1 - this._line }, point: function (e, r) { switch (e = +e, r = +r, this._point) { case 0: this._point = 1, this._line ? this._context.lineTo(e, r) : this._context.moveTo(e, r); break; case 1: this._point = 2; default: this._context.lineTo(e, r); break } } }; function Cf(e) { return new YD(e) } function QD(e) { return e[0] } function XD(e) { return e[1] } function ZD(e, r) { var a = Ar(!0), s = null, n = Cf, i = null, o = dj(c); e = typeof e == "function" ? e : e === void 0 ? QD : Ar(e), r = typeof r == "function" ? r : r === void 0 ? XD : Ar(r); function c(u) { var m, g = (u = uj(u)).length, f, y = !1, p; for (s == null && (i = n(p = o())), m = 0; m <= g; ++m)!(m < g && a(f = u[m], m, u)) === y && ((y = !y) ? i.lineStart() : i.lineEnd()), y && i.point(+e(f, m, u), +r(f, m, u)); if (p) return i = null, p + "" || null } return c.x = function (u) { return arguments.length ? (e = typeof u == "function" ? u : Ar(+u), c) : e }, c.y = function (u) { return arguments.length ? (r = typeof u == "function" ? u : Ar(+u), c) : r }, c.defined = function (u) { return arguments.length ? (a = typeof u == "function" ? u : Ar(!!u), c) : a }, c.curve = function (u) { return arguments.length ? (n = u, s != null && (i = n(s)), c) : n }, c.context = function (u) { return arguments.length ? (u == null ? s = i = null : i = n(s = u), c) : s }, c } function f0(e, r, a) { var s = null, n = Ar(!0), i = null, o = Cf, c = null, u = dj(m); e = typeof e == "function" ? e : e === void 0 ? QD : Ar(+e), r = typeof r == "function" ? r : Ar(r === void 0 ? 0 : +r), a = typeof a == "function" ? a : a === void 0 ? XD : Ar(+a); function m(f) { var y, p, b, j = (f = uj(f)).length, v, S = !1, k, E = new Array(j), C = new Array(j); for (i == null && (c = o(k = u())), y = 0; y <= j; ++y) { if (!(y < j && n(v = f[y], y, f)) === S) if (S = !S) p = y, c.areaStart(), c.lineStart(); else { for (c.lineEnd(), c.lineStart(), b = y - 1; b >= p; --b)c.point(E[b], C[b]); c.lineEnd(), c.areaEnd() } S && (E[y] = +e(v, y, f), C[y] = +r(v, y, f), c.point(s ? +s(v, y, f) : E[y], a ? +a(v, y, f) : C[y])) } if (k) return c = null, k + "" || null } function g() { return ZD().defined(n).curve(o).context(i) } return m.x = function (f) { return arguments.length ? (e = typeof f == "function" ? f : Ar(+f), s = null, m) : e }, m.x0 = function (f) { return arguments.length ? (e = typeof f == "function" ? f : Ar(+f), m) : e }, m.x1 = function (f) { return arguments.length ? (s = f == null ? null : typeof f == "function" ? f : Ar(+f), m) : s }, m.y = function (f) { return arguments.length ? (r = typeof f == "function" ? f : Ar(+f), a = null, m) : r }, m.y0 = function (f) { return arguments.length ? (r = typeof f == "function" ? f : Ar(+f), m) : r }, m.y1 = function (f) { return arguments.length ? (a = f == null ? null : typeof f == "function" ? f : Ar(+f), m) : a }, m.lineX0 = m.lineY0 = function () { return g().x(e).y(r) }, m.lineY1 = function () { return g().x(e).y(a) }, m.lineX1 = function () { return g().x(s).y(r) }, m.defined = function (f) { return arguments.length ? (n = typeof f == "function" ? f : Ar(!!f), m) : n }, m.curve = function (f) { return arguments.length ? (o = f, i != null && (c = o(i)), m) : o }, m.context = function (f) { return arguments.length ? (f == null ? i = c = null : c = o(i = f), m) : i }, m } class JD { constructor(r, a) { this._context = r, this._x = a } areaStart() { this._line = 0 } areaEnd() { this._line = NaN } lineStart() { this._point = 0 } lineEnd() { (this._line || this._line !== 0 && this._point === 1) && this._context.closePath(), this._line = 1 - this._line } point(r, a) { switch (r = +r, a = +a, this._point) { case 0: { this._point = 1, this._line ? this._context.lineTo(r, a) : this._context.moveTo(r, a); break } case 1: this._point = 2; default: { this._x ? this._context.bezierCurveTo(this._x0 = (this._x0 + r) / 2, this._y0, this._x0, a, r, a) : this._context.bezierCurveTo(this._x0, this._y0 = (this._y0 + a) / 2, r, this._y0, r, a); break } }this._x0 = r, this._y0 = a } } function nz(e) { return new JD(e, !0) } function iz(e) { return new JD(e, !1) } const mj = { draw(e, r) { const a = Vn(r / hh); e.moveTo(a, 0), e.arc(0, 0, a, 0, Sf) } }, oz = { draw(e, r) { const a = Vn(r / 5) / 2; e.moveTo(-3 * a, -a), e.lineTo(-a, -a), e.lineTo(-a, -3 * a), e.lineTo(a, -3 * a), e.lineTo(a, -a), e.lineTo(3 * a, -a), e.lineTo(3 * a, a), e.lineTo(a, a), e.lineTo(a, 3 * a), e.lineTo(-a, 3 * a), e.lineTo(-a, a), e.lineTo(-3 * a, a), e.closePath() } }, e3 = Vn(1 / 3), lz = e3 * 2, cz = { draw(e, r) { const a = Vn(r / lz), s = a * e3; e.moveTo(0, -a), e.lineTo(s, 0), e.lineTo(0, a), e.lineTo(-s, 0), e.closePath() } }, dz = { draw(e, r) { const a = Vn(r), s = -a / 2; e.rect(s, s, a, a) } }, uz = .8908130915292852, t3 = gh(hh / 10) / gh(7 * hh / 10), mz = gh(Sf / 10) * t3, gz = -GD(Sf / 10) * t3, hz = { draw(e, r) { const a = Vn(r * uz), s = mz * a, n = gz * a; e.moveTo(0, -a), e.lineTo(s, n); for (let i = 1; i < 5; ++i) { const o = Sf * i / 5, c = GD(o), u = gh(o); e.lineTo(u * a, -c * a), e.lineTo(c * s - u * n, u * s + c * n) } e.closePath() } }, jy = Vn(3), fz = { draw(e, r) { const a = -Vn(r / (jy * 3)); e.moveTo(0, a * 2), e.lineTo(-jy * a, -a), e.lineTo(jy * a, -a), e.closePath() } }, un = -.5, mn = Vn(3) / 2, Ub = 1 / Vn(12), xz = (Ub / 2 + 1) * 3, pz = { draw(e, r) { const a = Vn(r / xz), s = a / 2, n = a * Ub, i = s, o = a * Ub + a, c = -i, u = o; e.moveTo(s, n), e.lineTo(i, o), e.lineTo(c, u), e.lineTo(un * s - mn * n, mn * s + un * n), e.lineTo(un * i - mn * o, mn * i + un * o), e.lineTo(un * c - mn * u, mn * c + un * u), e.lineTo(un * s + mn * n, un * n - mn * s), e.lineTo(un * i + mn * o, un * o - mn * i), e.lineTo(un * c + mn * u, un * u - mn * c), e.closePath() } }; function yz(e, r) { let a = null, s = dj(n); e = typeof e == "function" ? e : Ar(e || mj), r = typeof r == "function" ? r : Ar(r === void 0 ? 64 : +r); function n() { let i; if (a || (a = i = s()), e.apply(this, arguments).draw(a, +r.apply(this, arguments)), i) return a = null, i + "" || null } return n.type = function (i) { return arguments.length ? (e = typeof i == "function" ? i : Ar(i), n) : e }, n.size = function (i) { return arguments.length ? (r = typeof i == "function" ? i : Ar(+i), n) : r }, n.context = function (i) { return arguments.length ? (a = i ?? null, n) : a }, n } function fh() { } function xh(e, r, a) { e._context.bezierCurveTo((2 * e._x0 + e._x1) / 3, (2 * e._y0 + e._y1) / 3, (e._x0 + 2 * e._x1) / 3, (e._y0 + 2 * e._y1) / 3, (e._x0 + 4 * e._x1 + r) / 6, (e._y0 + 4 * e._y1 + a) / 6) } function r3(e) { this._context = e } r3.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._x0 = this._x1 = this._y0 = this._y1 = NaN, this._point = 0 }, lineEnd: function () { switch (this._point) { case 3: xh(this, this._x1, this._y1); case 2: this._context.lineTo(this._x1, this._y1); break }(this._line || this._line !== 0 && this._point === 1) && this._context.closePath(), this._line = 1 - this._line }, point: function (e, r) { switch (e = +e, r = +r, this._point) { case 0: this._point = 1, this._line ? this._context.lineTo(e, r) : this._context.moveTo(e, r); break; case 1: this._point = 2; break; case 2: this._point = 3, this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); default: xh(this, e, r); break }this._x0 = this._x1, this._x1 = e, this._y0 = this._y1, this._y1 = r } }; function vz(e) { return new r3(e) } function a3(e) { this._context = e } a3.prototype = { areaStart: fh, areaEnd: fh, lineStart: function () { this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN, this._point = 0 }, lineEnd: function () { switch (this._point) { case 1: { this._context.moveTo(this._x2, this._y2), this._context.closePath(); break } case 2: { this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3), this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3), this._context.closePath(); break } case 3: { this.point(this._x2, this._y2), this.point(this._x3, this._y3), this.point(this._x4, this._y4); break } } }, point: function (e, r) { switch (e = +e, r = +r, this._point) { case 0: this._point = 1, this._x2 = e, this._y2 = r; break; case 1: this._point = 2, this._x3 = e, this._y3 = r; break; case 2: this._point = 3, this._x4 = e, this._y4 = r, this._context.moveTo((this._x0 + 4 * this._x1 + e) / 6, (this._y0 + 4 * this._y1 + r) / 6); break; default: xh(this, e, r); break }this._x0 = this._x1, this._x1 = e, this._y0 = this._y1, this._y1 = r } }; function bz(e) { return new a3(e) } function s3(e) { this._context = e } s3.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._x0 = this._x1 = this._y0 = this._y1 = NaN, this._point = 0 }, lineEnd: function () { (this._line || this._line !== 0 && this._point === 3) && this._context.closePath(), this._line = 1 - this._line }, point: function (e, r) { switch (e = +e, r = +r, this._point) { case 0: this._point = 1; break; case 1: this._point = 2; break; case 2: this._point = 3; var a = (this._x0 + 4 * this._x1 + e) / 6, s = (this._y0 + 4 * this._y1 + r) / 6; this._line ? this._context.lineTo(a, s) : this._context.moveTo(a, s); break; case 3: this._point = 4; default: xh(this, e, r); break }this._x0 = this._x1, this._x1 = e, this._y0 = this._y1, this._y1 = r } }; function wz(e) { return new s3(e) } function n3(e) { this._context = e } n3.prototype = { areaStart: fh, areaEnd: fh, lineStart: function () { this._point = 0 }, lineEnd: function () { this._point && this._context.closePath() }, point: function (e, r) { e = +e, r = +r, this._point ? this._context.lineTo(e, r) : (this._point = 1, this._context.moveTo(e, r)) } }; function jz(e) { return new n3(e) } function oC(e) { return e < 0 ? -1 : 1 } function lC(e, r, a) { var s = e._x1 - e._x0, n = r - e._x1, i = (e._y1 - e._y0) / (s || n < 0 && -0), o = (a - e._y1) / (n || s < 0 && -0), c = (i * n + o * s) / (s + n); return (oC(i) + oC(o)) * Math.min(Math.abs(i), Math.abs(o), .5 * Math.abs(c)) || 0 } function cC(e, r) { var a = e._x1 - e._x0; return a ? (3 * (e._y1 - e._y0) / a - r) / 2 : r } function Ny(e, r, a) { var s = e._x0, n = e._y0, i = e._x1, o = e._y1, c = (i - s) / 3; e._context.bezierCurveTo(s + c, n + c * r, i - c, o - c * a, i, o) } function ph(e) { this._context = e } ph.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._x0 = this._x1 = this._y0 = this._y1 = this._t0 = NaN, this._point = 0 }, lineEnd: function () { switch (this._point) { case 2: this._context.lineTo(this._x1, this._y1); break; case 3: Ny(this, this._t0, cC(this, this._t0)); break }(this._line || this._line !== 0 && this._point === 1) && this._context.closePath(), this._line = 1 - this._line }, point: function (e, r) { var a = NaN; if (e = +e, r = +r, !(e === this._x1 && r === this._y1)) { switch (this._point) { case 0: this._point = 1, this._line ? this._context.lineTo(e, r) : this._context.moveTo(e, r); break; case 1: this._point = 2; break; case 2: this._point = 3, Ny(this, cC(this, a = lC(this, e, r)), a); break; default: Ny(this, this._t0, a = lC(this, e, r)); break }this._x0 = this._x1, this._x1 = e, this._y0 = this._y1, this._y1 = r, this._t0 = a } } }; function i3(e) { this._context = new o3(e) } (i3.prototype = Object.create(ph.prototype)).point = function (e, r) { ph.prototype.point.call(this, r, e) }; function o3(e) { this._context = e } o3.prototype = { moveTo: function (e, r) { this._context.moveTo(r, e) }, closePath: function () { this._context.closePath() }, lineTo: function (e, r) { this._context.lineTo(r, e) }, bezierCurveTo: function (e, r, a, s, n, i) { this._context.bezierCurveTo(r, e, s, a, i, n) } }; function Nz(e) { return new ph(e) } function kz(e) { return new i3(e) } function l3(e) { this._context = e } l3.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._x = [], this._y = [] }, lineEnd: function () { var e = this._x, r = this._y, a = e.length; if (a) if (this._line ? this._context.lineTo(e[0], r[0]) : this._context.moveTo(e[0], r[0]), a === 2) this._context.lineTo(e[1], r[1]); else for (var s = dC(e), n = dC(r), i = 0, o = 1; o < a; ++i, ++o)this._context.bezierCurveTo(s[0][i], n[0][i], s[1][i], n[1][i], e[o], r[o]); (this._line || this._line !== 0 && a === 1) && this._context.closePath(), this._line = 1 - this._line, this._x = this._y = null }, point: function (e, r) { this._x.push(+e), this._y.push(+r) } }; function dC(e) { var r, a = e.length - 1, s, n = new Array(a), i = new Array(a), o = new Array(a); for (n[0] = 0, i[0] = 2, o[0] = e[0] + 2 * e[1], r = 1; r < a - 1; ++r)n[r] = 1, i[r] = 4, o[r] = 4 * e[r] + 2 * e[r + 1]; for (n[a - 1] = 2, i[a - 1] = 7, o[a - 1] = 8 * e[a - 1] + e[a], r = 1; r < a; ++r)s = n[r] / i[r - 1], i[r] -= s, o[r] -= s * o[r - 1]; for (n[a - 1] = o[a - 1] / i[a - 1], r = a - 2; r >= 0; --r)n[r] = (o[r] - n[r + 1]) / i[r]; for (i[a - 1] = (e[a] + n[a - 1]) / 2, r = 0; r < a - 1; ++r)i[r] = 2 * e[r + 1] - n[r + 1]; return [n, i] } function Sz(e) { return new l3(e) } function Ef(e, r) { this._context = e, this._t = r } Ef.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._x = this._y = NaN, this._point = 0 }, lineEnd: function () { 0 < this._t && this._t < 1 && this._point === 2 && this._context.lineTo(this._x, this._y), (this._line || this._line !== 0 && this._point === 1) && this._context.closePath(), this._line >= 0 && (this._t = 1 - this._t, this._line = 1 - this._line) }, point: function (e, r) { switch (e = +e, r = +r, this._point) { case 0: this._point = 1, this._line ? this._context.lineTo(e, r) : this._context.moveTo(e, r); break; case 1: this._point = 2; default: { if (this._t <= 0) this._context.lineTo(this._x, r), this._context.lineTo(e, r); else { var a = this._x * (1 - this._t) + e * this._t; this._context.lineTo(a, this._y), this._context.lineTo(a, r) } break } }this._x = e, this._y = r } }; function Cz(e) { return new Ef(e, .5) } function Ez(e) { return new Ef(e, 0) } function Az(e) { return new Ef(e, 1) } function Jc(e, r) { if ((o = e.length) > 1) for (var a = 1, s, n, i = e[r[0]], o, c = i.length; a < o; ++a)for (n = i, i = e[r[a]], s = 0; s < c; ++s)i[s][1] += i[s][0] = isNaN(n[s][1]) ? n[s][0] : n[s][1] } function Fb(e) { for (var r = e.length, a = new Array(r); --r >= 0;)a[r] = r; return a } function Pz(e, r) { return e[r] } function Tz(e) { const r = []; return r.key = e, r } function Dz() { var e = Ar([]), r = Fb, a = Jc, s = Pz; function n(i) { var o = Array.from(e.apply(this, arguments), Tz), c, u = o.length, m = -1, g; for (const f of i) for (c = 0, ++m; c < u; ++c)(o[c][m] = [0, +s(f, o[c].key, m, i)]).data = f; for (c = 0, g = uj(r(o)); c < u; ++c)o[g[c]].index = c; return a(o, g), o } return n.keys = function (i) { return arguments.length ? (e = typeof i == "function" ? i : Ar(Array.from(i)), n) : e }, n.value = function (i) { return arguments.length ? (s = typeof i == "function" ? i : Ar(+i), n) : s }, n.order = function (i) { return arguments.length ? (r = i == null ? Fb : typeof i == "function" ? i : Ar(Array.from(i)), n) : r }, n.offset = function (i) { return arguments.length ? (a = i ?? Jc, n) : a }, n } function Oz(e, r) { if ((s = e.length) > 0) { for (var a, s, n = 0, i = e[0].length, o; n < i; ++n) { for (o = a = 0; a < s; ++a)o += e[a][n][1] || 0; if (o) for (a = 0; a < s; ++a)e[a][n][1] /= o } Jc(e, r) } } function Iz(e, r) { if ((n = e.length) > 0) { for (var a = 0, s = e[r[0]], n, i = s.length; a < i; ++a) { for (var o = 0, c = 0; o < n; ++o)c += e[o][a][1] || 0; s[a][1] += s[a][0] = -c / 2 } Jc(e, r) } } function Lz(e, r) { if (!(!((o = e.length) > 0) || !((i = (n = e[r[0]]).length) > 0))) { for (var a = 0, s = 1, n, i, o; s < i; ++s) { for (var c = 0, u = 0, m = 0; c < o; ++c) { for (var g = e[r[c]], f = g[s][1] || 0, y = g[s - 1][1] || 0, p = (f - y) / 2, b = 0; b < c; ++b) { var j = e[r[b]], v = j[s][1] || 0, S = j[s - 1][1] || 0; p += v - S } u += f, m += p * f } n[s - 1][1] += n[s - 1][0] = a, u && (a -= m / u) } n[s - 1][1] += n[s - 1][0] = a, Jc(e, r) } } var ky = {}, Sy = {}, uC; function Rz() { return uC || (uC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { return a === "__proto__" } e.isUnsafeProperty = r })(Sy)), Sy } var Cy = {}, mC; function c3() { return mC || (mC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { switch (typeof a) { case "number": case "symbol": return !1; case "string": return a.includes(".") || a.includes("[") || a.includes("]") } } e.isDeepKey = r })(Cy)), Cy } var Ey = {}, gC; function gj() { return gC || (gC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { return typeof a == "string" || typeof a == "symbol" ? a : Object.is(a?.valueOf?.(), -0) ? "-0" : String(a) } e.toKey = r })(Ey)), Ey } var Ay = {}, Py = {}, hC; function Mz() { return hC || (hC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { if (a == null) return ""; if (typeof a == "string") return a; if (Array.isArray(a)) return a.map(r).join(","); const s = String(a); return s === "0" && Object.is(Number(a), -0) ? "-0" : s } e.toString = r })(Py)), Py } var fC; function hj() { return fC || (fC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = Mz(), a = gj(); function s(n) { if (Array.isArray(n)) return n.map(a.toKey); if (typeof n == "symbol") return [n]; n = r.toString(n); const i = [], o = n.length; if (o === 0) return i; let c = 0, u = "", m = "", g = !1; for (n.charCodeAt(0) === 46 && (i.push(""), c++); c < o;) { const f = n[c]; m ? f === "\\" && c + 1 < o ? (c++, u += n[c]) : f === m ? m = "" : u += f : g ? f === '"' || f === "'" ? m = f : f === "]" ? (g = !1, i.push(u), u = "") : u += f : f === "[" ? (g = !0, u && (i.push(u), u = "")) : f === "." ? u && (i.push(u), u = "") : u += f, c++ } return u && i.push(u), i } e.toPath = s })(Ay)), Ay } var xC; function fj() { return xC || (xC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = Rz(), a = c3(), s = gj(), n = hj(); function i(c, u, m) { if (c == null) return m; switch (typeof u) { case "string": { if (r.isUnsafeProperty(u)) return m; const g = c[u]; return g === void 0 ? a.isDeepKey(u) ? i(c, n.toPath(u), m) : m : g } case "number": case "symbol": { typeof u == "number" && (u = s.toKey(u)); const g = c[u]; return g === void 0 ? m : g } default: { if (Array.isArray(u)) return o(c, u, m); if (Object.is(u?.valueOf(), -0) ? u = "-0" : u = String(u), r.isUnsafeProperty(u)) return m; const g = c[u]; return g === void 0 ? m : g } } } function o(c, u, m) { if (u.length === 0) return m; let g = c; for (let f = 0; f < u.length; f++) { if (g == null || r.isUnsafeProperty(u[f])) return m; g = g[u[f]] } return g === void 0 ? m : g } e.get = i })(ky)), ky } var Ty, pC; function _z() { return pC || (pC = 1, Ty = fj().get), Ty } var $z = _z(); const Vl = mi($z); var Fa = e => e === 0 ? 0 : e > 0 ? 1 : -1, wn = e => typeof e == "number" && e != +e, Wi = e => typeof e == "string" && e.indexOf("%") === e.length - 1, rt = e => (typeof e == "number" || e instanceof Number) && !wn(e), oi = e => rt(e) || typeof e == "string", Uz = 0, tm = e => { var r = ++Uz; return "".concat(e || "").concat(r) }, os = function (r, a) { var s = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0, n = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1; if (!rt(r) && typeof r != "string") return s; var i; if (Wi(r)) { if (a == null) return s; var o = r.indexOf("%"); i = a * parseFloat(r.slice(0, o)) / 100 } else i = +r; return wn(i) && (i = s), n && a != null && i > a && (i = a), i }, d3 = e => { if (!Array.isArray(e)) return !1; for (var r = e.length, a = {}, s = 0; s < r; s++)if (!a[e[s]]) a[e[s]] = !0; else return !0; return !1 }; function cr(e, r, a) { return rt(e) && rt(r) ? e + a * (r - e) : r } function u3(e, r, a) { if (!(!e || !e.length)) return e.find(s => s && (typeof r == "function" ? r(s) : Vl(s, r)) === a) } var Lr = e => e === null || typeof e > "u", Dm = e => Lr(e) ? e : "".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)); function Fz(e) { return e != null } function Om() { } var zz = ["type", "size", "sizeType"]; function zb() { return zb = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, zb.apply(null, arguments) } function yC(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function vC(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? yC(Object(a), !0).forEach(function (s) { Bz(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : yC(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function Bz(e, r, a) { return (r = qz(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function qz(e) { var r = Hz(e, "string"); return typeof r == "symbol" ? r : r + "" } function Hz(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function Wz(e, r) { if (e == null) return {}; var a, s, n = Vz(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function Vz(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } var m3 = { symbolCircle: mj, symbolCross: oz, symbolDiamond: cz, symbolSquare: dz, symbolStar: hz, symbolTriangle: fz, symbolWye: pz }, Gz = Math.PI / 180, Kz = e => { var r = "symbol".concat(Dm(e)); return m3[r] || mj }, Yz = (e, r, a) => { if (r === "area") return e; switch (a) { case "cross": return 5 * e * e / 9; case "diamond": return .5 * e * e / Math.sqrt(3); case "square": return e * e; case "star": { var s = 18 * Gz; return 1.25 * e * e * (Math.tan(s) - Math.tan(s * 2) * Math.tan(s) ** 2) } case "triangle": return Math.sqrt(3) * e * e / 4; case "wye": return (21 - 10 * Math.sqrt(3)) * e * e / 8; default: return Math.PI * e * e / 4 } }, Qz = (e, r) => { m3["symbol".concat(Dm(e))] = r }, xj = e => { var { type: r = "circle", size: a = 64, sizeType: s = "area" } = e, n = Wz(e, zz), i = vC(vC({}, n), {}, { type: r, size: a, sizeType: s }), o = "circle"; typeof r == "string" && (o = r); var c = () => { var y = Kz(o), p = yz().type(y).size(Yz(a, s, o)), b = p(); if (b !== null) return b }, { className: u, cx: m, cy: g } = i, f = ls(i); return rt(m) && rt(g) && rt(a) ? h.createElement("path", zb({}, f, { className: er("recharts-symbols", u), transform: "translate(".concat(m, ", ").concat(g, ")"), d: c() })) : null }; xj.registerSymbol = Qz; var g3 = e => "radius" in e && "startAngle" in e && "endAngle" in e, pj = (e, r) => { if (!e || typeof e == "function" || typeof e == "boolean") return null; var a = e; if (h.isValidElement(e) && (a = e.props), typeof a != "object" && typeof a != "function") return null; var s = {}; return Object.keys(a).forEach(n => { lj(n) && (s[n] = (i => a[n](a, i))) }), s }, Xz = (e, r, a) => s => (e(r, a, s), null), Im = (e, r, a) => { if (e === null || typeof e != "object" && typeof e != "function") return null; var s = null; return Object.keys(e).forEach(n => { var i = e[n]; lj(n) && typeof i == "function" && (s || (s = {}), s[n] = Xz(i, r, a)) }), s }; function bC(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function Zz(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? bC(Object(a), !0).forEach(function (s) { Jz(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : bC(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function Jz(e, r, a) { return (r = eB(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function eB(e) { var r = tB(e, "string"); return typeof r == "symbol" ? r : r + "" } function tB(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function sa(e, r) { var a = Zz({}, e), s = r, n = Object.keys(r), i = n.reduce((o, c) => (o[c] === void 0 && s[c] !== void 0 && (o[c] = s[c]), o), a); return i } function yh() { return yh = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, yh.apply(null, arguments) } function wC(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function rB(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? wC(Object(a), !0).forEach(function (s) { aB(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : wC(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function aB(e, r, a) { return (r = sB(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function sB(e) { var r = nB(e, "string"); return typeof r == "symbol" ? r : r + "" } function nB(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var fn = 32, iB = { align: "center", iconSize: 14, inactiveColor: "#ccc", layout: "horizontal", verticalAlign: "middle" }; function oB(e) {
    var { data: r, iconType: a, inactiveColor: s } = e, n = fn / 2, i = fn / 6, o = fn / 3, c = r.inactive ? s : r.color, u = a ?? r.type; if (u === "none") return null; if (u === "plainline") { var m; return h.createElement("line", { strokeWidth: 4, fill: "none", stroke: c, strokeDasharray: (m = r.payload) === null || m === void 0 ? void 0 : m.strokeDasharray, x1: 0, y1: n, x2: fn, y2: n, className: "recharts-legend-icon" }) } if (u === "line") return h.createElement("path", {
        strokeWidth: 4, fill: "none", stroke: c, d: "M0,".concat(n, "h").concat(o, `
            A`).concat(i, ",").concat(i, ",0,1,1,").concat(2 * o, ",").concat(n, `
            H`).concat(fn, "M").concat(2 * o, ",").concat(n, `
            A`).concat(i, ",").concat(i, ",0,1,1,").concat(o, ",").concat(n), className: "recharts-legend-icon"
    }); if (u === "rect") return h.createElement("path", { stroke: "none", fill: c, d: "M0,".concat(fn / 8, "h").concat(fn, "v").concat(fn * 3 / 4, "h").concat(-fn, "z"), className: "recharts-legend-icon" }); if (h.isValidElement(r.legendIcon)) { var g = rB({}, r); return delete g.legendIcon, h.cloneElement(r.legendIcon, g) } return h.createElement(xj, { fill: c, cx: n, cy: n, size: fn, sizeType: "diameter", type: u })
} function lB(e) { var { payload: r, iconSize: a, layout: s, formatter: n, inactiveColor: i, iconType: o } = e, c = { x: 0, y: 0, width: fn, height: fn }, u = { display: s === "horizontal" ? "inline-block" : "block", marginRight: 10 }, m = { display: "inline-block", verticalAlign: "middle", marginRight: 4 }; return r.map((g, f) => { var y = g.formatter || n, p = er({ "recharts-legend-item": !0, ["legend-item-".concat(f)]: !0, inactive: g.inactive }); if (g.type === "none") return null; var b = g.inactive ? i : g.color, j = y ? y(g.value, g, f) : g.value; return h.createElement("li", yh({ className: p, style: u, key: "legend-item-".concat(f) }, Im(e, g, f)), h.createElement(cj, { width: a, height: a, viewBox: c, style: m, "aria-label": "".concat(j, " legend icon") }, h.createElement(oB, { data: g, iconType: o, inactiveColor: i })), h.createElement("span", { className: "recharts-legend-item-text", style: { color: b } }, j)) }) } var cB = e => { var r = sa(e, iB), { payload: a, layout: s, align: n } = r; if (!a || !a.length) return null; var i = { padding: 0, margin: 0, textAlign: s === "horizontal" ? n : "left" }; return h.createElement("ul", { className: "recharts-default-legend", style: i }, h.createElement(lB, yh({}, r, { payload: a }))) }, Dy = {}, Oy = {}, jC; function dB() { return jC || (jC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a, s) { const n = new Map; for (let i = 0; i < a.length; i++) { const o = a[i], c = s(o); n.has(c) || n.set(c, o) } return Array.from(n.values()) } e.uniqBy = r })(Oy)), Oy } var Iy = {}, NC; function h3() { return NC || (NC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { return a } e.identity = r })(Iy)), Iy } var Ly = {}, Ry = {}, My = {}, kC; function uB() { return kC || (kC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { return Number.isSafeInteger(a) && a >= 0 } e.isLength = r })(My)), My } var SC; function yj() { return SC || (SC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = uB(); function a(s) { return s != null && typeof s != "function" && r.isLength(s.length) } e.isArrayLike = a })(Ry)), Ry } var _y = {}, CC; function mB() { return CC || (CC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { return typeof a == "object" && a !== null } e.isObjectLike = r })(_y)), _y } var EC; function gB() { return EC || (EC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = yj(), a = mB(); function s(n) { return a.isObjectLike(n) && r.isArrayLike(n) } e.isArrayLikeObject = s })(Ly)), Ly } var $y = {}, Uy = {}, AC; function hB() { return AC || (AC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = fj(); function a(s) { return function (n) { return r.get(n, s) } } e.property = a })(Uy)), Uy } var Fy = {}, zy = {}, By = {}, qy = {}, PC; function f3() { return PC || (PC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { return a !== null && (typeof a == "object" || typeof a == "function") } e.isObject = r })(qy)), qy } var Hy = {}, TC; function x3() { return TC || (TC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { return a == null || typeof a != "object" && typeof a != "function" } e.isPrimitive = r })(Hy)), Hy } var Wy = {}, DC; function p3() { return DC || (DC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a, s) { return a === s || Number.isNaN(a) && Number.isNaN(s) } e.eq = r })(Wy)), Wy } var OC; function fB() { return OC || (OC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = f3(), a = x3(), s = p3(); function n(g, f, y) { return typeof y != "function" ? n(g, f, () => { }) : i(g, f, function p(b, j, v, S, k, E) { const C = y(b, j, v, S, k, E); return C !== void 0 ? !!C : i(b, j, p, E) }, new Map) } function i(g, f, y, p) { if (f === g) return !0; switch (typeof f) { case "object": return o(g, f, y, p); case "function": return Object.keys(f).length > 0 ? i(g, { ...f }, y, p) : s.eq(g, f); default: return r.isObject(g) ? typeof f == "string" ? f === "" : !0 : s.eq(g, f) } } function o(g, f, y, p) { if (f == null) return !0; if (Array.isArray(f)) return u(g, f, y, p); if (f instanceof Map) return c(g, f, y, p); if (f instanceof Set) return m(g, f, y, p); const b = Object.keys(f); if (g == null) return b.length === 0; if (b.length === 0) return !0; if (p?.has(f)) return p.get(f) === g; p?.set(f, g); try { for (let j = 0; j < b.length; j++) { const v = b[j]; if (!a.isPrimitive(g) && !(v in g) || f[v] === void 0 && g[v] !== void 0 || f[v] === null && g[v] !== null || !y(g[v], f[v], v, g, f, p)) return !1 } return !0 } finally { p?.delete(f) } } function c(g, f, y, p) { if (f.size === 0) return !0; if (!(g instanceof Map)) return !1; for (const [b, j] of f.entries()) { const v = g.get(b); if (y(v, j, b, g, f, p) === !1) return !1 } return !0 } function u(g, f, y, p) { if (f.length === 0) return !0; if (!Array.isArray(g)) return !1; const b = new Set; for (let j = 0; j < f.length; j++) { const v = f[j]; let S = !1; for (let k = 0; k < g.length; k++) { if (b.has(k)) continue; const E = g[k]; let C = !1; if (y(E, v, j, g, f, p) && (C = !0), C) { b.add(k), S = !0; break } } if (!S) return !1 } return !0 } function m(g, f, y, p) { return f.size === 0 ? !0 : g instanceof Set ? u([...g], [...f], y, p) : !1 } e.isMatchWith = n, e.isSetMatch = m })(By)), By } var IC; function y3() { return IC || (IC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = fB(); function a(s, n) { return r.isMatchWith(s, n, () => { }) } e.isMatch = a })(zy)), zy } var Vy = {}, Gy = {}, Ky = {}, LC; function xB() { return LC || (LC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { return Object.getOwnPropertySymbols(a).filter(s => Object.prototype.propertyIsEnumerable.call(a, s)) } e.getSymbols = r })(Ky)), Ky } var Yy = {}, RC; function v3() { return RC || (RC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { return a == null ? a === void 0 ? "[object Undefined]" : "[object Null]" : Object.prototype.toString.call(a) } e.getTag = r })(Yy)), Yy } var Qy = {}, MC; function b3() { return MC || (MC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = "[object RegExp]", a = "[object String]", s = "[object Number]", n = "[object Boolean]", i = "[object Arguments]", o = "[object Symbol]", c = "[object Date]", u = "[object Map]", m = "[object Set]", g = "[object Array]", f = "[object Function]", y = "[object ArrayBuffer]", p = "[object Object]", b = "[object Error]", j = "[object DataView]", v = "[object Uint8Array]", S = "[object Uint8ClampedArray]", k = "[object Uint16Array]", E = "[object Uint32Array]", C = "[object BigUint64Array]", N = "[object Int8Array]", A = "[object Int16Array]", D = "[object Int32Array]", I = "[object BigInt64Array]", $ = "[object Float32Array]", B = "[object Float64Array]"; e.argumentsTag = i, e.arrayBufferTag = y, e.arrayTag = g, e.bigInt64ArrayTag = I, e.bigUint64ArrayTag = C, e.booleanTag = n, e.dataViewTag = j, e.dateTag = c, e.errorTag = b, e.float32ArrayTag = $, e.float64ArrayTag = B, e.functionTag = f, e.int16ArrayTag = A, e.int32ArrayTag = D, e.int8ArrayTag = N, e.mapTag = u, e.numberTag = s, e.objectTag = p, e.regexpTag = r, e.setTag = m, e.stringTag = a, e.symbolTag = o, e.uint16ArrayTag = k, e.uint32ArrayTag = E, e.uint8ArrayTag = v, e.uint8ClampedArrayTag = S })(Qy)), Qy } var Xy = {}, _C; function pB() { return _C || (_C = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { return ArrayBuffer.isView(a) && !(a instanceof DataView) } e.isTypedArray = r })(Xy)), Xy } var $C; function w3() { return $C || ($C = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = xB(), a = v3(), s = b3(), n = x3(), i = pB(); function o(g, f) { return c(g, void 0, g, new Map, f) } function c(g, f, y, p = new Map, b = void 0) { const j = b?.(g, f, y, p); if (j !== void 0) return j; if (n.isPrimitive(g)) return g; if (p.has(g)) return p.get(g); if (Array.isArray(g)) { const v = new Array(g.length); p.set(g, v); for (let S = 0; S < g.length; S++)v[S] = c(g[S], S, y, p, b); return Object.hasOwn(g, "index") && (v.index = g.index), Object.hasOwn(g, "input") && (v.input = g.input), v } if (g instanceof Date) return new Date(g.getTime()); if (g instanceof RegExp) { const v = new RegExp(g.source, g.flags); return v.lastIndex = g.lastIndex, v } if (g instanceof Map) { const v = new Map; p.set(g, v); for (const [S, k] of g) v.set(S, c(k, S, y, p, b)); return v } if (g instanceof Set) { const v = new Set; p.set(g, v); for (const S of g) v.add(c(S, void 0, y, p, b)); return v } if (typeof Buffer < "u" && Buffer.isBuffer(g)) return g.subarray(); if (i.isTypedArray(g)) { const v = new (Object.getPrototypeOf(g)).constructor(g.length); p.set(g, v); for (let S = 0; S < g.length; S++)v[S] = c(g[S], S, y, p, b); return v } if (g instanceof ArrayBuffer || typeof SharedArrayBuffer < "u" && g instanceof SharedArrayBuffer) return g.slice(0); if (g instanceof DataView) { const v = new DataView(g.buffer.slice(0), g.byteOffset, g.byteLength); return p.set(g, v), u(v, g, y, p, b), v } if (typeof File < "u" && g instanceof File) { const v = new File([g], g.name, { type: g.type }); return p.set(g, v), u(v, g, y, p, b), v } if (typeof Blob < "u" && g instanceof Blob) { const v = new Blob([g], { type: g.type }); return p.set(g, v), u(v, g, y, p, b), v } if (g instanceof Error) { const v = new g.constructor; return p.set(g, v), v.message = g.message, v.name = g.name, v.stack = g.stack, v.cause = g.cause, u(v, g, y, p, b), v } if (g instanceof Boolean) { const v = new Boolean(g.valueOf()); return p.set(g, v), u(v, g, y, p, b), v } if (g instanceof Number) { const v = new Number(g.valueOf()); return p.set(g, v), u(v, g, y, p, b), v } if (g instanceof String) { const v = new String(g.valueOf()); return p.set(g, v), u(v, g, y, p, b), v } if (typeof g == "object" && m(g)) { const v = Object.create(Object.getPrototypeOf(g)); return p.set(g, v), u(v, g, y, p, b), v } return g } function u(g, f, y = g, p, b) { const j = [...Object.keys(f), ...r.getSymbols(f)]; for (let v = 0; v < j.length; v++) { const S = j[v], k = Object.getOwnPropertyDescriptor(g, S); (k == null || k.writable) && (g[S] = c(f[S], S, y, p, b)) } } function m(g) { switch (a.getTag(g)) { case s.argumentsTag: case s.arrayTag: case s.arrayBufferTag: case s.dataViewTag: case s.booleanTag: case s.dateTag: case s.float32ArrayTag: case s.float64ArrayTag: case s.int8ArrayTag: case s.int16ArrayTag: case s.int32ArrayTag: case s.mapTag: case s.numberTag: case s.objectTag: case s.regexpTag: case s.setTag: case s.stringTag: case s.symbolTag: case s.uint8ArrayTag: case s.uint8ClampedArrayTag: case s.uint16ArrayTag: case s.uint32ArrayTag: return !0; default: return !1 } } e.cloneDeepWith = o, e.cloneDeepWithImpl = c, e.copyProperties = u })(Gy)), Gy } var UC; function yB() { return UC || (UC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = w3(); function a(s) { return r.cloneDeepWithImpl(s, void 0, s, new Map, void 0) } e.cloneDeep = a })(Vy)), Vy } var FC; function vB() { return FC || (FC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = y3(), a = yB(); function s(n) { return n = a.cloneDeep(n), i => r.isMatch(i, n) } e.matches = s })(Fy)), Fy } var Zy = {}, Jy = {}, ev = {}, zC; function bB() { return zC || (zC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = w3(), a = b3(); function s(n, i) { return r.cloneDeepWith(n, (o, c, u, m) => { const g = i?.(o, c, u, m); if (g !== void 0) return g; if (typeof n == "object") switch (Object.prototype.toString.call(n)) { case a.numberTag: case a.stringTag: case a.booleanTag: { const f = new n.constructor(n?.valueOf()); return r.copyProperties(f, n), f } case a.argumentsTag: { const f = {}; return r.copyProperties(f, n), f.length = n.length, f[Symbol.iterator] = n[Symbol.iterator], f } default: return } }) } e.cloneDeepWith = s })(ev)), ev } var BC; function wB() { return BC || (BC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = bB(); function a(s) { return r.cloneDeepWith(s) } e.cloneDeep = a })(Jy)), Jy } var tv = {}, rv = {}, qC; function j3() { return qC || (qC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = /^(?:0|[1-9]\d*)$/; function a(s, n = Number.MAX_SAFE_INTEGER) { switch (typeof s) { case "number": return Number.isInteger(s) && s >= 0 && s < n; case "symbol": return !1; case "string": return r.test(s) } } e.isIndex = a })(rv)), rv } var av = {}, HC; function jB() { return HC || (HC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = v3(); function a(s) { return s !== null && typeof s == "object" && r.getTag(s) === "[object Arguments]" } e.isArguments = a })(av)), av } var WC; function NB() { return WC || (WC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = c3(), a = j3(), s = jB(), n = hj(); function i(o, c) { let u; if (Array.isArray(c) ? u = c : typeof c == "string" && r.isDeepKey(c) && o?.[c] == null ? u = n.toPath(c) : u = [c], u.length === 0) return !1; let m = o; for (let g = 0; g < u.length; g++) { const f = u[g]; if ((m == null || !Object.hasOwn(m, f)) && !((Array.isArray(m) || s.isArguments(m)) && a.isIndex(f) && f < m.length)) return !1; m = m[f] } return !0 } e.has = i })(tv)), tv } var VC; function kB() { return VC || (VC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = y3(), a = gj(), s = wB(), n = fj(), i = NB(); function o(c, u) { switch (typeof c) { case "object": { Object.is(c?.valueOf(), -0) && (c = "-0"); break } case "number": { c = a.toKey(c); break } }return u = s.cloneDeep(u), function (m) { const g = n.get(m, c); return g === void 0 ? i.has(m, c) : u === void 0 ? g === void 0 : r.isMatch(g, u) } } e.matchesProperty = o })(Zy)), Zy } var GC; function SB() { return GC || (GC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = h3(), a = hB(), s = vB(), n = kB(); function i(o) { if (o == null) return r.identity; switch (typeof o) { case "function": return o; case "object": return Array.isArray(o) && o.length === 2 ? n.matchesProperty(o[0], o[1]) : s.matches(o); case "string": case "symbol": case "number": return a.property(o) } } e.iteratee = i })($y)), $y } var KC; function CB() { return KC || (KC = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = dB(), a = h3(), s = gB(), n = SB(); function i(o, c = a.identity) { return s.isArrayLikeObject(o) ? r.uniqBy(Array.from(o), n.iteratee(c)) : [] } e.uniqBy = i })(Dy)), Dy } var sv, YC; function EB() { return YC || (YC = 1, sv = CB().uniqBy), sv } var AB = EB(); const QC = mi(AB); function N3(e, r, a) { return r === !0 ? QC(e, a) : typeof r == "function" ? QC(e, r) : e } var nv = { exports: {} }, iv = {}, ov = { exports: {} }, lv = {}; var XC; function PB() { if (XC) return lv; XC = 1; var e = ld(); function r(f, y) { return f === y && (f !== 0 || 1 / f === 1 / y) || f !== f && y !== y } var a = typeof Object.is == "function" ? Object.is : r, s = e.useState, n = e.useEffect, i = e.useLayoutEffect, o = e.useDebugValue; function c(f, y) { var p = y(), b = s({ inst: { value: p, getSnapshot: y } }), j = b[0].inst, v = b[1]; return i(function () { j.value = p, j.getSnapshot = y, u(j) && v({ inst: j }) }, [f, p, y]), n(function () { return u(j) && v({ inst: j }), f(function () { u(j) && v({ inst: j }) }) }, [f]), o(p), p } function u(f) { var y = f.getSnapshot; f = f.value; try { var p = y(); return !a(f, p) } catch { return !0 } } function m(f, y) { return y() } var g = typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u" ? m : c; return lv.useSyncExternalStore = e.useSyncExternalStore !== void 0 ? e.useSyncExternalStore : g, lv } var ZC; function TB() { return ZC || (ZC = 1, ov.exports = PB()), ov.exports } var JC; function DB() { if (JC) return iv; JC = 1; var e = ld(), r = TB(); function a(m, g) { return m === g && (m !== 0 || 1 / m === 1 / g) || m !== m && g !== g } var s = typeof Object.is == "function" ? Object.is : a, n = r.useSyncExternalStore, i = e.useRef, o = e.useEffect, c = e.useMemo, u = e.useDebugValue; return iv.useSyncExternalStoreWithSelector = function (m, g, f, y, p) { var b = i(null); if (b.current === null) { var j = { hasValue: !1, value: null }; b.current = j } else j = b.current; b = c(function () { function S(A) { if (!k) { if (k = !0, E = A, A = y(A), p !== void 0 && j.hasValue) { var D = j.value; if (p(D, A)) return C = D } return C = A } if (D = C, s(E, A)) return D; var I = y(A); return p !== void 0 && p(D, I) ? (E = A, D) : (E = A, C = I) } var k = !1, E, C, N = f === void 0 ? null : f; return [function () { return S(g()) }, N === null ? void 0 : function () { return S(N()) }] }, [g, f, y, p]); var v = n(m, b[0], b[1]); return o(function () { j.hasValue = !0, j.value = v }, [v]), u(v), v }, iv } var e4; function OB() { return e4 || (e4 = 1, nv.exports = DB()), nv.exports } var IB = OB(), vj = h.createContext(null), LB = e => e, Tr = () => { var e = h.useContext(vj); return e ? e.store.dispatch : LB }, q0 = () => { }, RB = () => q0, MB = (e, r) => e === r; function nt(e) { var r = h.useContext(vj); return IB.useSyncExternalStoreWithSelector(r ? r.subscription.addNestedSub : RB, r ? r.store.getState : q0, r ? r.store.getState : q0, r ? e : q0, MB) } function _B(e, r = `expected a function, instead received ${typeof e}`) { if (typeof e != "function") throw new TypeError(r) } function $B(e, r = `expected an object, instead received ${typeof e}`) { if (typeof e != "object") throw new TypeError(r) } function UB(e, r = "expected all items to be functions, instead received the following types: ") { if (!e.every(a => typeof a == "function")) { const a = e.map(s => typeof s == "function" ? `function ${s.name || "unnamed"}()` : typeof s).join(", "); throw new TypeError(`${r}[${a}]`) } } var t4 = e => Array.isArray(e) ? e : [e]; function FB(e) { const r = Array.isArray(e[0]) ? e[0] : e; return UB(r, "createSelector expects all input-selectors to be functions, but received the following types: "), r } function zB(e, r) { const a = [], { length: s } = e; for (let n = 0; n < s; n++)a.push(e[n].apply(null, r)); return a } var BB = class { constructor(e) { this.value = e } deref() { return this.value } }, qB = typeof WeakRef < "u" ? WeakRef : BB, HB = 0, r4 = 1; function x0() { return { s: HB, v: void 0, o: null, p: null } } function k3(e, r = {}) { let a = x0(); const { resultEqualityCheck: s } = r; let n, i = 0; function o() { let c = a; const { length: u } = arguments; for (let f = 0, y = u; f < y; f++) { const p = arguments[f]; if (typeof p == "function" || typeof p == "object" && p !== null) { let b = c.o; b === null && (c.o = b = new WeakMap); const j = b.get(p); j === void 0 ? (c = x0(), b.set(p, c)) : c = j } else { let b = c.p; b === null && (c.p = b = new Map); const j = b.get(p); j === void 0 ? (c = x0(), b.set(p, c)) : c = j } } const m = c; let g; if (c.s === r4) g = c.v; else if (g = e.apply(null, arguments), i++, s) { const f = n?.deref?.() ?? n; f != null && s(f, g) && (g = f, i !== 0 && i--), n = typeof g == "object" && g !== null || typeof g == "function" ? new qB(g) : g } return m.s = r4, m.v = g, g } return o.clearCache = () => { a = x0(), o.resetResultsCount() }, o.resultsCount = () => i, o.resetResultsCount = () => { i = 0 }, o } function WB(e, ...r) { const a = typeof e == "function" ? { memoize: e, memoizeOptions: r } : e, s = (...n) => { let i = 0, o = 0, c, u = {}, m = n.pop(); typeof m == "object" && (u = m, m = n.pop()), _B(m, `createSelector expects an output function after the inputs, but received: [${typeof m}]`); const g = { ...a, ...u }, { memoize: f, memoizeOptions: y = [], argsMemoize: p = k3, argsMemoizeOptions: b = [] } = g, j = t4(y), v = t4(b), S = FB(n), k = f(function () { return i++, m.apply(null, arguments) }, ...j), E = p(function () { o++; const N = zB(S, arguments); return c = k.apply(null, N), c }, ...v); return Object.assign(E, { resultFunc: m, memoizedResultFunc: k, dependencies: S, dependencyRecomputations: () => o, resetDependencyRecomputations: () => { o = 0 }, lastResult: () => c, recomputations: () => i, resetRecomputations: () => { i = 0 }, memoize: f, argsMemoize: p }) }; return Object.assign(s, { withTypes: () => s }), s } var be = WB(k3), VB = Object.assign((e, r = be) => { $B(e, `createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`); const a = Object.keys(e), s = a.map(i => e[i]); return r(s, (...i) => i.reduce((o, c, u) => (o[a[u]] = c, o), {})) }, { withTypes: () => VB }), cv = {}, dv = {}, uv = {}, a4; function GB() { return a4 || (a4 = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(s) { return typeof s == "symbol" ? 1 : s === null ? 2 : s === void 0 ? 3 : s !== s ? 4 : 0 } const a = (s, n, i) => { if (s !== n) { const o = r(s), c = r(n); if (o === c && o === 0) { if (s < n) return i === "desc" ? 1 : -1; if (s > n) return i === "desc" ? -1 : 1 } return i === "desc" ? c - o : o - c } return 0 }; e.compareValues = a })(uv)), uv } var mv = {}, gv = {}, s4; function S3() { return s4 || (s4 = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { return typeof a == "symbol" || a instanceof Symbol } e.isSymbol = r })(gv)), gv } var n4; function KB() { return n4 || (n4 = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = S3(), a = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, s = /^\w*$/; function n(i, o) { return Array.isArray(i) ? !1 : typeof i == "number" || typeof i == "boolean" || i == null || r.isSymbol(i) ? !0 : typeof i == "string" && (s.test(i) || !a.test(i)) || o != null && Object.hasOwn(o, i) } e.isKey = n })(mv)), mv } var i4; function YB() { return i4 || (i4 = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = GB(), a = KB(), s = hj(); function n(i, o, c, u) { if (i == null) return []; c = u ? void 0 : c, Array.isArray(i) || (i = Object.values(i)), Array.isArray(o) || (o = o == null ? [null] : [o]), o.length === 0 && (o = [null]), Array.isArray(c) || (c = c == null ? [] : [c]), c = c.map(p => String(p)); const m = (p, b) => { let j = p; for (let v = 0; v < b.length && j != null; ++v)j = j[b[v]]; return j }, g = (p, b) => b == null || p == null ? b : typeof p == "object" && "key" in p ? Object.hasOwn(b, p.key) ? b[p.key] : m(b, p.path) : typeof p == "function" ? p(b) : Array.isArray(p) ? m(b, p) : typeof b == "object" ? b[p] : b, f = o.map(p => (Array.isArray(p) && p.length === 1 && (p = p[0]), p == null || typeof p == "function" || Array.isArray(p) || a.isKey(p) ? p : { key: p, path: s.toPath(p) })); return i.map(p => ({ original: p, criteria: f.map(b => g(b, p)) })).slice().sort((p, b) => { for (let j = 0; j < f.length; j++) { const v = r.compareValues(p.criteria[j], b.criteria[j], c[j]); if (v !== 0) return v } return 0 }).map(p => p.original) } e.orderBy = n })(dv)), dv } var hv = {}, o4; function QB() { return o4 || (o4 = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a, s = 1) { const n = [], i = Math.floor(s), o = (c, u) => { for (let m = 0; m < c.length; m++) { const g = c[m]; Array.isArray(g) && u < i ? o(g, u + 1) : n.push(g) } }; return o(a, 0), n } e.flatten = r })(hv)), hv } var fv = {}, l4; function C3() { return l4 || (l4 = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = j3(), a = yj(), s = f3(), n = p3(); function i(o, c, u) { return s.isObject(u) && (typeof c == "number" && a.isArrayLike(u) && r.isIndex(c) && c < u.length || typeof c == "string" && c in u) ? n.eq(u[c], o) : !1 } e.isIterateeCall = i })(fv)), fv } var c4; function XB() { return c4 || (c4 = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = YB(), a = QB(), s = C3(); function n(i, ...o) { const c = o.length; return c > 1 && s.isIterateeCall(i, o[0], o[1]) ? o = [] : c > 2 && s.isIterateeCall(o[0], o[1], o[2]) && (o = [o[0]]), r.orderBy(i, a.flatten(o), ["asc"]) } e.sortBy = n })(cv)), cv } var xv, d4; function ZB() { return d4 || (d4 = 1, xv = XB().sortBy), xv } var JB = ZB(); const Af = mi(JB); var E3 = e => e.legend.settings, eq = e => e.legend.size, tq = e => e.legend.payload, rq = be([tq, E3], (e, r) => { var { itemSorter: a } = r, s = e.flat(1); return a ? Af(s, a) : s }); function aq() { return nt(rq) } var p0 = 1; function A3() { var e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [], [r, a] = h.useState({ height: 0, left: 0, top: 0, width: 0 }), s = h.useCallback(n => { if (n != null) { var i = n.getBoundingClientRect(), o = { height: i.height, left: i.left, top: i.top, width: i.width }; (Math.abs(o.height - r.height) > p0 || Math.abs(o.left - r.left) > p0 || Math.abs(o.top - r.top) > p0 || Math.abs(o.width - r.width) > p0) && a({ height: o.height, left: o.left, top: o.top, width: o.width }) } }, [r.width, r.height, r.top, r.left, ...e]); return [r, s] } function Ya(e) { return `Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. ` } var sq = typeof Symbol == "function" && Symbol.observable || "@@observable", u4 = sq, pv = () => Math.random().toString(36).substring(7).split("").join("."), nq = { INIT: `@@redux/INIT${pv()}`, REPLACE: `@@redux/REPLACE${pv()}`, PROBE_UNKNOWN_ACTION: () => `@@redux/PROBE_UNKNOWN_ACTION${pv()}` }, vh = nq; function bj(e) { if (typeof e != "object" || e === null) return !1; let r = e; for (; Object.getPrototypeOf(r) !== null;)r = Object.getPrototypeOf(r); return Object.getPrototypeOf(e) === r || Object.getPrototypeOf(e) === null } function P3(e, r, a) { if (typeof e != "function") throw new Error(Ya(2)); if (typeof r == "function" && typeof a == "function" || typeof a == "function" && typeof arguments[3] == "function") throw new Error(Ya(0)); if (typeof r == "function" && typeof a > "u" && (a = r, r = void 0), typeof a < "u") { if (typeof a != "function") throw new Error(Ya(1)); return a(P3)(e, r) } let s = e, n = r, i = new Map, o = i, c = 0, u = !1; function m() { o === i && (o = new Map, i.forEach((v, S) => { o.set(S, v) })) } function g() { if (u) throw new Error(Ya(3)); return n } function f(v) { if (typeof v != "function") throw new Error(Ya(4)); if (u) throw new Error(Ya(5)); let S = !0; m(); const k = c++; return o.set(k, v), function () { if (S) { if (u) throw new Error(Ya(6)); S = !1, m(), o.delete(k), i = null } } } function y(v) { if (!bj(v)) throw new Error(Ya(7)); if (typeof v.type > "u") throw new Error(Ya(8)); if (typeof v.type != "string") throw new Error(Ya(17)); if (u) throw new Error(Ya(9)); try { u = !0, n = s(n, v) } finally { u = !1 } return (i = o).forEach(k => { k() }), v } function p(v) { if (typeof v != "function") throw new Error(Ya(10)); s = v, y({ type: vh.REPLACE }) } function b() { const v = f; return { subscribe(S) { if (typeof S != "object" || S === null) throw new Error(Ya(11)); function k() { const C = S; C.next && C.next(g()) } return k(), { unsubscribe: v(k) } }, [u4]() { return this } } } return y({ type: vh.INIT }), { dispatch: y, subscribe: f, getState: g, replaceReducer: p, [u4]: b } } function iq(e) { Object.keys(e).forEach(r => { const a = e[r]; if (typeof a(void 0, { type: vh.INIT }) > "u") throw new Error(Ya(12)); if (typeof a(void 0, { type: vh.PROBE_UNKNOWN_ACTION() }) > "u") throw new Error(Ya(13)) }) } function T3(e) { const r = Object.keys(e), a = {}; for (let i = 0; i < r.length; i++) { const o = r[i]; typeof e[o] == "function" && (a[o] = e[o]) } const s = Object.keys(a); let n; try { iq(a) } catch (i) { n = i } return function (o = {}, c) { if (n) throw n; let u = !1; const m = {}; for (let g = 0; g < s.length; g++) { const f = s[g], y = a[f], p = o[f], b = y(p, c); if (typeof b > "u") throw c && c.type, new Error(Ya(14)); m[f] = b, u = u || b !== p } return u = u || s.length !== Object.keys(o).length, u ? m : o } } function bh(...e) { return e.length === 0 ? r => r : e.length === 1 ? e[0] : e.reduce((r, a) => (...s) => r(a(...s))) } function oq(...e) { return r => (a, s) => { const n = r(a, s); let i = () => { throw new Error(Ya(15)) }; const o = { getState: n.getState, dispatch: (u, ...m) => i(u, ...m) }, c = e.map(u => u(o)); return i = bh(...c)(n.dispatch), { ...n, dispatch: i } } } function D3(e) { return bj(e) && "type" in e && typeof e.type == "string" } var O3 = Symbol.for("immer-nothing"), m4 = Symbol.for("immer-draftable"), bs = Symbol.for("immer-state"); function Mn(e, ...r) { throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`) } var Qs = Object, ed = Qs.getPrototypeOf, wh = "constructor", Pf = "prototype", Bb = "configurable", jh = "enumerable", H0 = "writable", rm = "value", Vi = e => !!e && !!e[bs]; function Bn(e) { return e ? I3(e) || Tf(e) || !!e[m4] || !!e[wh]?.[m4] || Df(e) || Of(e) : !1 } var lq = Qs[Pf][wh].toString(), g4 = new WeakMap; function I3(e) { if (!e || !wj(e)) return !1; const r = ed(e); if (r === null || r === Qs[Pf]) return !0; const a = Qs.hasOwnProperty.call(r, wh) && r[wh]; if (a === Object) return !0; if (!Lc(a)) return !1; let s = g4.get(a); return s === void 0 && (s = Function.toString.call(a), g4.set(a, s)), s === lq } function Lm(e, r, a = !0) { Rm(e) === 0 ? (a ? Reflect.ownKeys(e) : Qs.keys(e)).forEach(n => { r(n, e[n], e) }) : e.forEach((s, n) => r(n, s, e)) } function Rm(e) { const r = e[bs]; return r ? r.type_ : Tf(e) ? 1 : Df(e) ? 2 : Of(e) ? 3 : 0 } var h4 = (e, r, a = Rm(e)) => a === 2 ? e.has(r) : Qs[Pf].hasOwnProperty.call(e, r), qb = (e, r, a = Rm(e)) => a === 2 ? e.get(r) : e[r], Nh = (e, r, a, s = Rm(e)) => { s === 2 ? e.set(r, a) : s === 3 ? e.add(a) : e[r] = a }; function cq(e, r) { return e === r ? e !== 0 || 1 / e === 1 / r : e !== e && r !== r } var Tf = Array.isArray, Df = e => e instanceof Map, Of = e => e instanceof Set, wj = e => typeof e == "object", Lc = e => typeof e == "function", yv = e => typeof e == "boolean", Di = e => e.copy_ || e.base_, jj = e => e.modified_ ? e.copy_ : e.base_; function Hb(e, r) { if (Df(e)) return new Map(e); if (Of(e)) return new Set(e); if (Tf(e)) return Array[Pf].slice.call(e); const a = I3(e); if (r === !0 || r === "class_only" && !a) { const s = Qs.getOwnPropertyDescriptors(e); delete s[bs]; let n = Reflect.ownKeys(s); for (let i = 0; i < n.length; i++) { const o = n[i], c = s[o]; c[H0] === !1 && (c[H0] = !0, c[Bb] = !0), (c.get || c.set) && (s[o] = { [Bb]: !0, [H0]: !0, [jh]: c[jh], [rm]: e[o] }) } return Qs.create(ed(e), s) } else { const s = ed(e); if (s !== null && a) return { ...e }; const n = Qs.create(s); return Qs.assign(n, e) } } function Nj(e, r = !1) { return If(e) || Vi(e) || !Bn(e) || (Rm(e) > 1 && Qs.defineProperties(e, { set: y0, add: y0, clear: y0, delete: y0 }), Qs.freeze(e), r && Lm(e, (a, s) => { Nj(s, !0) }, !1)), e } function dq() { Mn(2) } var y0 = { [rm]: dq }; function If(e) { return e === null || !wj(e) ? !0 : Qs.isFrozen(e) } var kh = "MapSet", Wb = "Patches", L3 = {}; function td(e) { const r = L3[e]; return r || Mn(0, e), r } var uq = e => !!L3[e], am, R3 = () => am, mq = (e, r) => ({ drafts_: [], parent_: e, immer_: r, canAutoFreeze_: !0, unfinalizedDrafts_: 0, handledSet_: new Set, processedForPatches_: new Set, mapSetPlugin_: uq(kh) ? td(kh) : void 0 }); function f4(e, r) { r && (e.patchPlugin_ = td(Wb), e.patches_ = [], e.inversePatches_ = [], e.patchListener_ = r) } function Vb(e) { Gb(e), e.drafts_.forEach(gq), e.drafts_ = null } function Gb(e) { e === am && (am = e.parent_) } var x4 = e => am = mq(am, e); function gq(e) { const r = e[bs]; r.type_ === 0 || r.type_ === 1 ? r.revoke_() : r.revoked_ = !0 } function p4(e, r) { r.unfinalizedDrafts_ = r.drafts_.length; const a = r.drafts_[0]; if (e !== void 0 && e !== a) { a[bs].modified_ && (Vb(r), Mn(4)), Bn(e) && (e = y4(r, e)); const { patchPlugin_: n } = r; n && n.generateReplacementPatches_(a[bs].base_, e, r) } else e = y4(r, a); return hq(r, e, !0), Vb(r), r.patches_ && r.patchListener_(r.patches_, r.inversePatches_), e !== O3 ? e : void 0 } function y4(e, r) { if (If(r)) return r; const a = r[bs]; if (!a) return kj(r, e.handledSet_, e); if (!Lf(a, e)) return r; if (!a.modified_) return a.base_; if (!a.finalized_) { const { callbacks_: s } = a; if (s) for (; s.length > 0;)s.pop()(e); $3(a, e) } return a.copy_ } function hq(e, r, a = !1) { !e.parent_ && e.immer_.autoFreeze_ && e.canAutoFreeze_ && Nj(r, a) } function M3(e) { e.finalized_ = !0, e.scope_.unfinalizedDrafts_-- } var Lf = (e, r) => e.scope_ === r, fq = []; function _3(e, r, a, s) { const n = Di(e), i = e.type_; if (s !== void 0 && qb(n, s, i) === r) { Nh(n, s, a, i); return } if (!e.draftLocations_) { const c = e.draftLocations_ = new Map; Lm(n, (u, m) => { if (Vi(m)) { const g = c.get(m) || []; g.push(u), c.set(m, g) } }) } const o = e.draftLocations_.get(r) ?? fq; for (const c of o) Nh(n, c, a, i) } function xq(e, r, a) { e.callbacks_.push(function (n) { const i = r; if (!i || !Lf(i, n)) return; n.mapSetPlugin_?.fixSetContents(i); const o = jj(i); _3(e, i.draft_ ?? i, o, a), $3(i, n) }) } function $3(e, r) { if (e.modified_ && !e.finalized_ && (e.type_ === 3 || (e.assigned_?.size ?? 0) > 0)) { const { patchPlugin_: s } = r; if (s) { const n = s.getPath(e); n && s.generatePatches_(e, n, r) } M3(e) } } function pq(e, r, a) { const { scope_: s } = e; if (Vi(a)) { const n = a[bs]; Lf(n, s) && n.callbacks_.push(function () { W0(e); const o = jj(n); _3(e, a, o, r) }) } else Bn(a) && e.callbacks_.push(function () { const i = Di(e); qb(i, r, e.type_) === a && s.drafts_.length > 1 && (e.assigned_.get(r) ?? !1) === !0 && e.copy_ && kj(qb(e.copy_, r, e.type_), s.handledSet_, s) }) } function kj(e, r, a) { return !a.immer_.autoFreeze_ && a.unfinalizedDrafts_ < 1 || Vi(e) || r.has(e) || !Bn(e) || If(e) || (r.add(e), Lm(e, (s, n) => { if (Vi(n)) { const i = n[bs]; if (Lf(i, a)) { const o = jj(i); Nh(e, s, o, e.type_), M3(i) } } else Bn(n) && kj(n, r, a) })), e } function yq(e, r) { const a = Tf(e), s = { type_: a ? 1 : 0, scope_: r ? r.scope_ : R3(), modified_: !1, finalized_: !1, assigned_: void 0, parent_: r, base_: e, draft_: null, copy_: null, revoke_: null, isManual_: !1, callbacks_: void 0 }; let n = s, i = Sj; a && (n = [s], i = sm); const { revoke: o, proxy: c } = Proxy.revocable(n, i); return s.draft_ = c, s.revoke_ = o, [c, s] } var Sj = { get(e, r) { if (r === bs) return e; const a = Di(e); if (!h4(a, r, e.type_)) return vq(e, a, r); const s = a[r]; if (e.finalized_ || !Bn(s)) return s; if (s === vv(e.base_, r)) { W0(e); const n = e.type_ === 1 ? +r : r, i = Yb(e.scope_, s, e, n); return e.copy_[n] = i } return s }, has(e, r) { return r in Di(e) }, ownKeys(e) { return Reflect.ownKeys(Di(e)) }, set(e, r, a) { const s = U3(Di(e), r); if (s?.set) return s.set.call(e.draft_, a), !0; if (!e.modified_) { const n = vv(Di(e), r), i = n?.[bs]; if (i && i.base_ === a) return e.copy_[r] = a, e.assigned_.set(r, !1), !0; if (cq(a, n) && (a !== void 0 || h4(e.base_, r, e.type_))) return !0; W0(e), Kb(e) } return e.copy_[r] === a && (a !== void 0 || r in e.copy_) || Number.isNaN(a) && Number.isNaN(e.copy_[r]) || (e.copy_[r] = a, e.assigned_.set(r, !0), pq(e, r, a)), !0 }, deleteProperty(e, r) { return W0(e), vv(e.base_, r) !== void 0 || r in e.base_ ? (e.assigned_.set(r, !1), Kb(e)) : e.assigned_.delete(r), e.copy_ && delete e.copy_[r], !0 }, getOwnPropertyDescriptor(e, r) { const a = Di(e), s = Reflect.getOwnPropertyDescriptor(a, r); return s && { [H0]: !0, [Bb]: e.type_ !== 1 || r !== "length", [jh]: s[jh], [rm]: a[r] } }, defineProperty() { Mn(11) }, getPrototypeOf(e) { return ed(e.base_) }, setPrototypeOf() { Mn(12) } }, sm = {}; Lm(Sj, (e, r) => { sm[e] = function () { const a = arguments; return a[0] = a[0][0], r.apply(this, a) } }); sm.deleteProperty = function (e, r) { return sm.set.call(this, e, r, void 0) }; sm.set = function (e, r, a) { return Sj.set.call(this, e[0], r, a, e[0]) }; function vv(e, r) { const a = e[bs]; return (a ? Di(a) : e)[r] } function vq(e, r, a) { const s = U3(r, a); return s ? rm in s ? s[rm] : s.get?.call(e.draft_) : void 0 } function U3(e, r) { if (!(r in e)) return; let a = ed(e); for (; a;) { const s = Object.getOwnPropertyDescriptor(a, r); if (s) return s; a = ed(a) } } function Kb(e) { e.modified_ || (e.modified_ = !0, e.parent_ && Kb(e.parent_)) } function W0(e) { e.copy_ || (e.assigned_ = new Map, e.copy_ = Hb(e.base_, e.scope_.immer_.useStrictShallowCopy_)) } var bq = class { constructor(r) { this.autoFreeze_ = !0, this.useStrictShallowCopy_ = !1, this.useStrictIteration_ = !1, this.produce = (a, s, n) => { if (Lc(a) && !Lc(s)) { const o = s; s = a; const c = this; return function (m = o, ...g) { return c.produce(m, f => s.call(this, f, ...g)) } } Lc(s) || Mn(6), n !== void 0 && !Lc(n) && Mn(7); let i; if (Bn(a)) { const o = x4(this), c = Yb(o, a, void 0); let u = !0; try { i = s(c), u = !1 } finally { u ? Vb(o) : Gb(o) } return f4(o, n), p4(i, o) } else if (!a || !wj(a)) { if (i = s(a), i === void 0 && (i = a), i === O3 && (i = void 0), this.autoFreeze_ && Nj(i, !0), n) { const o = [], c = []; td(Wb).generateReplacementPatches_(a, i, { patches_: o, inversePatches_: c }), n(o, c) } return i } else Mn(1, a) }, this.produceWithPatches = (a, s) => { if (Lc(a)) return (c, ...u) => this.produceWithPatches(c, m => a(m, ...u)); let n, i; return [this.produce(a, s, (c, u) => { n = c, i = u }), n, i] }, yv(r?.autoFreeze) && this.setAutoFreeze(r.autoFreeze), yv(r?.useStrictShallowCopy) && this.setUseStrictShallowCopy(r.useStrictShallowCopy), yv(r?.useStrictIteration) && this.setUseStrictIteration(r.useStrictIteration) } createDraft(r) { Bn(r) || Mn(8), Vi(r) && (r = Un(r)); const a = x4(this), s = Yb(a, r, void 0); return s[bs].isManual_ = !0, Gb(a), s } finishDraft(r, a) { const s = r && r[bs]; (!s || !s.isManual_) && Mn(9); const { scope_: n } = s; return f4(n, a), p4(void 0, n) } setAutoFreeze(r) { this.autoFreeze_ = r } setUseStrictShallowCopy(r) { this.useStrictShallowCopy_ = r } setUseStrictIteration(r) { this.useStrictIteration_ = r } shouldUseStrictIteration() { return this.useStrictIteration_ } applyPatches(r, a) { let s; for (s = a.length - 1; s >= 0; s--) { const i = a[s]; if (i.path.length === 0 && i.op === "replace") { r = i.value; break } } s > -1 && (a = a.slice(s + 1)); const n = td(Wb).applyPatches_; return Vi(r) ? n(r, a) : this.produce(r, i => n(i, a)) } }; function Yb(e, r, a, s) { const [n, i] = Df(r) ? td(kh).proxyMap_(r, a) : Of(r) ? td(kh).proxySet_(r, a) : yq(r, a); return (a?.scope_ ?? R3()).drafts_.push(n), i.callbacks_ = a?.callbacks_ ?? [], i.key_ = s, a && s !== void 0 ? xq(a, i, s) : i.callbacks_.push(function (u) { u.mapSetPlugin_?.fixSetContents(i); const { patchPlugin_: m } = u; i.modified_ && m && m.generatePatches_(i, [], u) }), n } function Un(e) { return Vi(e) || Mn(10, e), F3(e) } function F3(e) { if (!Bn(e) || If(e)) return e; const r = e[bs]; let a, s = !0; if (r) { if (!r.modified_) return r.base_; r.finalized_ = !0, a = Hb(e, r.scope_.immer_.useStrictShallowCopy_), s = r.scope_.immer_.shouldUseStrictIteration() } else a = Hb(e, !0); return Lm(a, (n, i) => { Nh(a, n, F3(i)) }, s), r && (r.finalized_ = !1), a } var wq = new bq, z3 = wq.produce; function B3(e) { return ({ dispatch: a, getState: s }) => n => i => typeof i == "function" ? i(a, s, e) : n(i) } var jq = B3(), Nq = B3, kq = typeof window < "u" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ : function () { if (arguments.length !== 0) return typeof arguments[0] == "object" ? bh : bh.apply(null, arguments) }; function jn(e, r) { function a(...s) { if (r) { let n = r(...s); if (!n) throw new Error(Zs(0)); return { type: e, payload: n.payload, ..."meta" in n && { meta: n.meta }, ..."error" in n && { error: n.error } } } return { type: e, payload: s[0] } } return a.toString = () => `${e}`, a.type = e, a.match = s => D3(s) && s.type === e, a } var q3 = class Iu extends Array { constructor(...r) { super(...r), Object.setPrototypeOf(this, Iu.prototype) } static get [Symbol.species]() { return Iu } concat(...r) { return super.concat.apply(this, r) } prepend(...r) { return r.length === 1 && Array.isArray(r[0]) ? new Iu(...r[0].concat(this)) : new Iu(...r.concat(this)) } }; function v4(e) { return Bn(e) ? z3(e, () => { }) : e } function v0(e, r, a) { return e.has(r) ? e.get(r) : e.set(r, a(r)).get(r) } function Sq(e) { return typeof e == "boolean" } var Cq = () => function (r) { const { thunk: a = !0, immutableCheck: s = !0, serializableCheck: n = !0, actionCreatorCheck: i = !0 } = r ?? {}; let o = new q3; return a && (Sq(a) ? o.push(jq) : o.push(Nq(a.extraArgument))), o }, H3 = "RTK_autoBatch", Ur = () => e => ({ payload: e, meta: { [H3]: !0 } }), b4 = e => r => { setTimeout(r, e) }, W3 = (e = { type: "raf" }) => r => (...a) => { const s = r(...a); let n = !0, i = !1, o = !1; const c = new Set, u = e.type === "tick" ? queueMicrotask : e.type === "raf" ? typeof window < "u" && window.requestAnimationFrame ? window.requestAnimationFrame : b4(10) : e.type === "callback" ? e.queueNotification : b4(e.timeout), m = () => { o = !1, i && (i = !1, c.forEach(g => g())) }; return Object.assign({}, s, { subscribe(g) { const f = () => n && g(), y = s.subscribe(f); return c.add(g), () => { y(), c.delete(g) } }, dispatch(g) { try { return n = !g?.meta?.[H3], i = !n, i && (o || (o = !0, u(m))), s.dispatch(g) } finally { n = !0 } } }) }, Eq = e => function (a) { const { autoBatch: s = !0 } = a ?? {}; let n = new q3(e); return s && n.push(W3(typeof s == "object" ? s : void 0)), n }; function Aq(e) { const r = Cq(), { reducer: a = void 0, middleware: s, devTools: n = !0, preloadedState: i = void 0, enhancers: o = void 0 } = e || {}; let c; if (typeof a == "function") c = a; else if (bj(a)) c = T3(a); else throw new Error(Zs(1)); let u; typeof s == "function" ? u = s(r) : u = r(); let m = bh; n && (m = kq({ trace: !1, ...typeof n == "object" && n })); const g = oq(...u), f = Eq(g); let y = typeof o == "function" ? o(f) : f(); const p = m(...y); return P3(c, i, p) } function V3(e) { const r = {}, a = []; let s; const n = { addCase(i, o) { const c = typeof i == "string" ? i : i.type; if (!c) throw new Error(Zs(28)); if (c in r) throw new Error(Zs(29)); return r[c] = o, n }, addAsyncThunk(i, o) { return o.pending && (r[i.pending.type] = o.pending), o.rejected && (r[i.rejected.type] = o.rejected), o.fulfilled && (r[i.fulfilled.type] = o.fulfilled), o.settled && a.push({ matcher: i.settled, reducer: o.settled }), n }, addMatcher(i, o) { return a.push({ matcher: i, reducer: o }), n }, addDefaultCase(i) { return s = i, n } }; return e(n), [r, a, s] } function Pq(e) { return typeof e == "function" } function Tq(e, r) { let [a, s, n] = V3(r), i; if (Pq(e)) i = () => v4(e()); else { const c = v4(e); i = () => c } function o(c = i(), u) { let m = [a[u.type], ...s.filter(({ matcher: g }) => g(u)).map(({ reducer: g }) => g)]; return m.filter(g => !!g).length === 0 && (m = [n]), m.reduce((g, f) => { if (f) if (Vi(g)) { const p = f(g, u); return p === void 0 ? g : p } else { if (Bn(g)) return z3(g, y => f(y, u)); { const y = f(g, u); if (y === void 0) { if (g === null) return g; throw Error("A case reducer on a non-draftable value must not return undefined") } return y } } return g }, c) } return o.getInitialState = i, o } var Dq = "ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW", Oq = (e = 21) => { let r = "", a = e; for (; a--;)r += Dq[Math.random() * 64 | 0]; return r }, Iq = Symbol.for("rtk-slice-createasyncthunk"); function Lq(e, r) { return `${e}/${r}` } function Rq({ creators: e } = {}) { const r = e?.asyncThunk?.[Iq]; return function (s) { const { name: n, reducerPath: i = n } = s; if (!n) throw new Error(Zs(11)); const o = (typeof s.reducers == "function" ? s.reducers(_q()) : s.reducers) || {}, c = Object.keys(o), u = { sliceCaseReducersByName: {}, sliceCaseReducersByType: {}, actionCreators: {}, sliceMatchers: [] }, m = { addCase(E, C) { const N = typeof E == "string" ? E : E.type; if (!N) throw new Error(Zs(12)); if (N in u.sliceCaseReducersByType) throw new Error(Zs(13)); return u.sliceCaseReducersByType[N] = C, m }, addMatcher(E, C) { return u.sliceMatchers.push({ matcher: E, reducer: C }), m }, exposeAction(E, C) { return u.actionCreators[E] = C, m }, exposeCaseReducer(E, C) { return u.sliceCaseReducersByName[E] = C, m } }; c.forEach(E => { const C = o[E], N = { reducerName: E, type: Lq(n, E), createNotation: typeof s.reducers == "function" }; Uq(C) ? zq(N, C, m, r) : $q(N, C, m) }); function g() { const [E = {}, C = [], N = void 0] = typeof s.extraReducers == "function" ? V3(s.extraReducers) : [s.extraReducers], A = { ...E, ...u.sliceCaseReducersByType }; return Tq(s.initialState, D => { for (let I in A) D.addCase(I, A[I]); for (let I of u.sliceMatchers) D.addMatcher(I.matcher, I.reducer); for (let I of C) D.addMatcher(I.matcher, I.reducer); N && D.addDefaultCase(N) }) } const f = E => E, y = new Map, p = new WeakMap; let b; function j(E, C) { return b || (b = g()), b(E, C) } function v() { return b || (b = g()), b.getInitialState() } function S(E, C = !1) { function N(D) { let I = D[E]; return typeof I > "u" && C && (I = v0(p, N, v)), I } function A(D = f) { const I = v0(y, C, () => new WeakMap); return v0(I, D, () => { const $ = {}; for (const [B, W] of Object.entries(s.selectors ?? {})) $[B] = Mq(W, D, () => v0(p, D, v), C); return $ }) } return { reducerPath: E, getSelectors: A, get selectors() { return A(N) }, selectSlice: N } } const k = { name: n, reducer: j, actions: u.actionCreators, caseReducers: u.sliceCaseReducersByName, getInitialState: v, ...S(i), injectInto(E, { reducerPath: C, ...N } = {}) { const A = C ?? i; return E.inject({ reducerPath: A, reducer: j }, N), { ...k, ...S(A, !0) } } }; return k } } function Mq(e, r, a, s) { function n(i, ...o) { let c = r(i); return typeof c > "u" && s && (c = a()), e(c, ...o) } return n.unwrapped = e, n } var Fs = Rq(); function _q() { function e(r, a) { return { _reducerDefinitionType: "asyncThunk", payloadCreator: r, ...a } } return e.withTypes = () => e, { reducer(r) { return Object.assign({ [r.name](...a) { return r(...a) } }[r.name], { _reducerDefinitionType: "reducer" }) }, preparedReducer(r, a) { return { _reducerDefinitionType: "reducerWithPrepare", prepare: r, reducer: a } }, asyncThunk: e } } function $q({ type: e, reducerName: r, createNotation: a }, s, n) { let i, o; if ("reducer" in s) { if (a && !Fq(s)) throw new Error(Zs(17)); i = s.reducer, o = s.prepare } else i = s; n.addCase(e, i).exposeCaseReducer(r, i).exposeAction(r, o ? jn(e, o) : jn(e)) } function Uq(e) { return e._reducerDefinitionType === "asyncThunk" } function Fq(e) { return e._reducerDefinitionType === "reducerWithPrepare" } function zq({ type: e, reducerName: r }, a, s, n) { if (!n) throw new Error(Zs(18)); const { payloadCreator: i, fulfilled: o, pending: c, rejected: u, settled: m, options: g } = a, f = n(e, i, g); s.exposeAction(r, f), o && s.addCase(f.fulfilled, o), c && s.addCase(f.pending, c), u && s.addCase(f.rejected, u), m && s.addMatcher(f.settled, m), s.exposeCaseReducer(r, { fulfilled: o || b0, pending: c || b0, rejected: u || b0, settled: m || b0 }) } function b0() { } var Bq = "task", G3 = "listener", K3 = "completed", Cj = "cancelled", qq = `task-${Cj}`, Hq = `task-${K3}`, Qb = `${G3}-${Cj}`, Wq = `${G3}-${K3}`, Rf = class { constructor(e) { this.code = e, this.message = `${Bq} ${Cj} (reason: ${e})` } name = "TaskAbortError"; message }, Ej = (e, r) => { if (typeof e != "function") throw new TypeError(Zs(32)) }, Sh = () => { }, Y3 = (e, r = Sh) => (e.catch(r), e), Q3 = (e, r) => (e.addEventListener("abort", r, { once: !0 }), () => e.removeEventListener("abort", r)), Ml = e => { if (e.aborted) throw new Rf(e.reason) }; function X3(e, r) { let a = Sh; return new Promise((s, n) => { const i = () => n(new Rf(e.reason)); if (e.aborted) { i(); return } a = Q3(e, i), r.finally(() => a()).then(s, n) }).finally(() => { a = Sh }) } var Vq = async (e, r) => { try { return await Promise.resolve(), { status: "ok", value: await e() } } catch (a) { return { status: a instanceof Rf ? "cancelled" : "rejected", error: a } } finally { r?.() } }, Ch = e => r => Y3(X3(e, r).then(a => (Ml(e), a))), Z3 = e => { const r = Ch(e); return a => r(new Promise(s => setTimeout(s, a))) }, { assign: Wc } = Object, w4 = {}, Mf = "listenerMiddleware", Gq = (e, r) => { const a = s => Q3(e, () => s.abort(e.reason)); return (s, n) => { Ej(s); const i = new AbortController; a(i); const o = Vq(async () => { Ml(e), Ml(i.signal); const c = await s({ pause: Ch(i.signal), delay: Z3(i.signal), signal: i.signal }); return Ml(i.signal), c }, () => i.abort(Hq)); return n?.autoJoin && r.push(o.catch(Sh)), { result: Ch(e)(o), cancel() { i.abort(qq) } } } }, Kq = (e, r) => { const a = async (s, n) => { Ml(r); let i = () => { }; const c = [new Promise((u, m) => { let g = e({ predicate: s, effect: (f, y) => { y.unsubscribe(), u([f, y.getState(), y.getOriginalState()]) } }); i = () => { g(), m() } })]; n != null && c.push(new Promise(u => setTimeout(u, n, null))); try { const u = await X3(r, Promise.race(c)); return Ml(r), u } finally { i() } }; return (s, n) => Y3(a(s, n)) }, J3 = e => { let { type: r, actionCreator: a, matcher: s, predicate: n, effect: i } = e; if (r) n = jn(r).match; else if (a) r = a.type, n = a.match; else if (s) n = s; else if (!n) throw new Error(Zs(21)); return Ej(i), { predicate: n, type: r, effect: i } }, e5 = Wc(e => { const { type: r, predicate: a, effect: s } = J3(e); return { id: Oq(), effect: s, type: r, predicate: a, pending: new Set, unsubscribe: () => { throw new Error(Zs(22)) } } }, { withTypes: () => e5 }), j4 = (e, r) => { const { type: a, effect: s, predicate: n } = J3(r); return Array.from(e.values()).find(i => (typeof a == "string" ? i.type === a : i.predicate === n) && i.effect === s) }, Xb = e => { e.pending.forEach(r => { r.abort(Qb) }) }, Yq = (e, r) => () => { for (const a of r.keys()) Xb(a); e.clear() }, N4 = (e, r, a) => { try { e(r, a) } catch (s) { setTimeout(() => { throw s }, 0) } }, t5 = Wc(jn(`${Mf}/add`), { withTypes: () => t5 }), Qq = jn(`${Mf}/removeAll`), r5 = Wc(jn(`${Mf}/remove`), { withTypes: () => r5 }), Xq = (...e) => { console.error(`${Mf}/error`, ...e) }, Mm = (e = {}) => { const r = new Map, a = new Map, s = p => { const b = a.get(p) ?? 0; a.set(p, b + 1) }, n = p => { const b = a.get(p) ?? 1; b === 1 ? a.delete(p) : a.set(p, b - 1) }, { extra: i, onError: o = Xq } = e; Ej(o); const c = p => (p.unsubscribe = () => r.delete(p.id), r.set(p.id, p), b => { p.unsubscribe(), b?.cancelActive && Xb(p) }), u = p => { const b = j4(r, p) ?? e5(p); return c(b) }; Wc(u, { withTypes: () => u }); const m = p => { const b = j4(r, p); return b && (b.unsubscribe(), p.cancelActive && Xb(b)), !!b }; Wc(m, { withTypes: () => m }); const g = async (p, b, j, v) => { const S = new AbortController, k = Kq(u, S.signal), E = []; try { p.pending.add(S), s(p), await Promise.resolve(p.effect(b, Wc({}, j, { getOriginalState: v, condition: (C, N) => k(C, N).then(Boolean), take: k, delay: Z3(S.signal), pause: Ch(S.signal), extra: i, signal: S.signal, fork: Gq(S.signal, E), unsubscribe: p.unsubscribe, subscribe: () => { r.set(p.id, p) }, cancelActiveListeners: () => { p.pending.forEach((C, N, A) => { C !== S && (C.abort(Qb), A.delete(C)) }) }, cancel: () => { S.abort(Qb), p.pending.delete(S) }, throwIfCancelled: () => { Ml(S.signal) } }))) } catch (C) { C instanceof Rf || N4(o, C, { raisedBy: "effect" }) } finally { await Promise.all(E), S.abort(Wq), n(p), p.pending.delete(S) } }, f = Yq(r, a); return { middleware: p => b => j => { if (!D3(j)) return b(j); if (t5.match(j)) return u(j.payload); if (Qq.match(j)) { f(); return } if (r5.match(j)) return m(j.payload); let v = p.getState(); const S = () => { if (v === w4) throw new Error(Zs(23)); return v }; let k; try { if (k = b(j), r.size > 0) { const E = p.getState(), C = Array.from(r.values()); for (const N of C) { let A = !1; try { A = N.predicate(j, E, v) } catch (D) { A = !1, N4(o, D, { raisedBy: "predicate" }) } A && g(N, j, p, S) } } } finally { v = w4 } return k }, startListening: u, stopListening: m, clearListeners: f } }; function Zs(e) { return `Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. ` } var Zq = { layoutType: "horizontal", width: 0, height: 0, margin: { top: 5, right: 5, bottom: 5, left: 5 }, scale: 1 }, a5 = Fs({ name: "chartLayout", initialState: Zq, reducers: { setLayout(e, r) { e.layoutType = r.payload }, setChartSize(e, r) { e.width = r.payload.width, e.height = r.payload.height }, setMargin(e, r) { var a, s, n, i; e.margin.top = (a = r.payload.top) !== null && a !== void 0 ? a : 0, e.margin.right = (s = r.payload.right) !== null && s !== void 0 ? s : 0, e.margin.bottom = (n = r.payload.bottom) !== null && n !== void 0 ? n : 0, e.margin.left = (i = r.payload.left) !== null && i !== void 0 ? i : 0 }, setScale(e, r) { e.scale = r.payload } } }), { setMargin: Jq, setLayout: eH, setChartSize: tH, setScale: rH } = a5.actions, aH = a5.reducer; function s5(e, r, a) { return Array.isArray(e) && e && r + a !== 0 ? e.slice(r, a + 1) : e } function k4(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function Uc(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? k4(Object(a), !0).forEach(function (s) { sH(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : k4(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function sH(e, r, a) { return (r = nH(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function nH(e) { var r = iH(e, "string"); return typeof r == "symbol" ? r : r + "" } function iH(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function xr(e, r, a) { return Lr(e) || Lr(r) ? a : oi(r) ? Vl(e, r, a) : typeof r == "function" ? r(e) : a } var oH = (e, r, a) => { if (r && a) { var { width: s, height: n } = a, { align: i, verticalAlign: o, layout: c } = r; if ((c === "vertical" || c === "horizontal" && o === "middle") && i !== "center" && rt(e[i])) return Uc(Uc({}, e), {}, { [i]: e[i] + (s || 0) }); if ((c === "horizontal" || c === "vertical" && i === "center") && o !== "middle" && rt(e[o])) return Uc(Uc({}, e), {}, { [o]: e[o] + (n || 0) }) } return e }, xi = (e, r) => e === "horizontal" && r === "xAxis" || e === "vertical" && r === "yAxis" || e === "centric" && r === "angleAxis" || e === "radial" && r === "radiusAxis", n5 = (e, r, a, s) => { if (s) return e.map(c => c.coordinate); var n, i, o = e.map(c => (c.coordinate === r && (n = !0), c.coordinate === a && (i = !0), c.coordinate)); return n || o.push(r), i || o.push(a), o }, i5 = (e, r, a) => { if (!e) return null; var { duplicateDomain: s, type: n, range: i, scale: o, realScaleType: c, isCategorical: u, categoricalDomain: m, tickCount: g, ticks: f, niceTicks: y, axisType: p } = e; if (!o) return null; var b = c === "scaleBand" && o.bandwidth ? o.bandwidth() / 2 : 2, j = n === "category" && o.bandwidth ? o.bandwidth() / b : 0; if (j = p === "angleAxis" && i && i.length >= 2 ? Fa(i[0] - i[1]) * 2 * j : j, f || y) { var v = (f || y || []).map((S, k) => { var E = s ? s.indexOf(S) : S; return { coordinate: o(E) + j, value: S, offset: j, index: k } }); return v.filter(S => !wn(S.coordinate)) } return u && m ? m.map((S, k) => ({ coordinate: o(S) + j, value: S, index: k, offset: j })) : o.ticks && g != null ? o.ticks(g).map((S, k) => ({ coordinate: o(S) + j, value: S, offset: j, index: k })) : o.domain().map((S, k) => ({ coordinate: o(S) + j, value: s ? s[S] : S, index: k, offset: j })) }, S4 = 1e-4, lH = e => { var r = e.domain(); if (!(!r || r.length <= 2)) { var a = r.length, s = e.range(), n = Math.min(s[0], s[1]) - S4, i = Math.max(s[0], s[1]) + S4, o = e(r[0]), c = e(r[a - 1]); (o < n || o > i || c < n || c > i) && e.domain([r[0], r[a - 1]]) } }, cH = (e, r) => { if (!r || r.length !== 2 || !rt(r[0]) || !rt(r[1])) return e; var a = Math.min(r[0], r[1]), s = Math.max(r[0], r[1]), n = [e[0], e[1]]; return (!rt(e[0]) || e[0] < a) && (n[0] = a), (!rt(e[1]) || e[1] > s) && (n[1] = s), n[0] > s && (n[0] = s), n[1] < a && (n[1] = a), n }, dH = e => { var r = e.length; if (!(r <= 0)) for (var a = 0, s = e[0].length; a < s; ++a)for (var n = 0, i = 0, o = 0; o < r; ++o) { var c = wn(e[o][a][1]) ? e[o][a][0] : e[o][a][1]; c >= 0 ? (e[o][a][0] = n, e[o][a][1] = n + c, n = e[o][a][1]) : (e[o][a][0] = i, e[o][a][1] = i + c, i = e[o][a][1]) } }, uH = e => { var r = e.length; if (!(r <= 0)) for (var a = 0, s = e[0].length; a < s; ++a)for (var n = 0, i = 0; i < r; ++i) { var o = wn(e[i][a][1]) ? e[i][a][0] : e[i][a][1]; o >= 0 ? (e[i][a][0] = n, e[i][a][1] = n + o, n = e[i][a][1]) : (e[i][a][0] = 0, e[i][a][1] = 0) } }, mH = { sign: dH, expand: Oz, none: Jc, silhouette: Iz, wiggle: Lz, positive: uH }, gH = (e, r, a) => { var s = mH[a], n = Dz().keys(r).value((i, o) => Number(xr(i, o, 0))).order(Fb).offset(s); return n(e) }; function o5(e) { return e == null ? void 0 : String(e) } function Eh(e) { var { axis: r, ticks: a, bandSize: s, entry: n, index: i, dataKey: o } = e; if (r.type === "category") { if (!r.allowDuplicatedCategory && r.dataKey && !Lr(n[r.dataKey])) { var c = u3(a, "value", n[r.dataKey]); if (c) return c.coordinate + s / 2 } return a[i] ? a[i].coordinate + s / 2 : null } var u = xr(n, Lr(o) ? r.dataKey : o); return Lr(u) ? null : r.scale(u) } var C4 = e => { var { axis: r, ticks: a, offset: s, bandSize: n, entry: i, index: o } = e; if (r.type === "category") return a[o] ? a[o].coordinate + s : null; var c = xr(i, r.dataKey, r.scale.domain()[o]); return Lr(c) ? null : r.scale(c) - n / 2 + s }, hH = e => { var { numericAxis: r } = e, a = r.scale.domain(); if (r.type === "number") { var s = Math.min(a[0], a[1]), n = Math.max(a[0], a[1]); return s <= 0 && n >= 0 ? 0 : n < 0 ? n : s } return a[0] }, fH = e => { var r = e.flat(2).filter(rt); return [Math.min(...r), Math.max(...r)] }, xH = e => [e[0] === 1 / 0 ? 0 : e[0], e[1] === -1 / 0 ? 0 : e[1]], pH = (e, r, a) => { if (e != null) return xH(Object.keys(e).reduce((s, n) => { var i = e[n], { stackedData: o } = i, c = o.reduce((u, m) => { var g = s5(m, r, a), f = fH(g); return [Math.min(u[0], f[0]), Math.max(u[1], f[1])] }, [1 / 0, -1 / 0]); return [Math.min(c[0], s[0]), Math.max(c[1], s[1])] }, [1 / 0, -1 / 0])) }, E4 = /^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/, A4 = /^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/, Ho = (e, r, a) => { if (e && e.scale && e.scale.bandwidth) { var s = e.scale.bandwidth(); if (!a || s > 0) return s } if (e && r && r.length >= 2) { for (var n = Af(r, g => g.coordinate), i = 1 / 0, o = 1, c = n.length; o < c; o++) { var u = n[o], m = n[o - 1]; i = Math.min((u.coordinate || 0) - (m.coordinate || 0), i) } return i === 1 / 0 ? 0 : i } return a ? void 0 : 0 }; function P4(e) { var { tooltipEntrySettings: r, dataKey: a, payload: s, value: n, name: i } = e; return Uc(Uc({}, r), {}, { dataKey: a, payload: s, value: n, name: i }) } function Xo(e, r) { if (e) return String(e); if (typeof r == "string") return r } var yH = (e, r) => { if (r === "horizontal") return e.chartX; if (r === "vertical") return e.chartY }, vH = (e, r) => r === "centric" ? e.angle : e.radius, eo = e => e.layout.width, to = e => e.layout.height, bH = e => e.layout.scale, l5 = e => e.layout.margin, _f = be(e => e.cartesianAxis.xAxis, e => Object.values(e)), $f = be(e => e.cartesianAxis.yAxis, e => Object.values(e)), c5 = "data-recharts-item-index", d5 = "data-recharts-item-data-key", _m = 60; function T4(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function w0(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? T4(Object(a), !0).forEach(function (s) { wH(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : T4(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function wH(e, r, a) { return (r = jH(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function jH(e) { var r = NH(e, "string"); return typeof r == "symbol" ? r : r + "" } function NH(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var kH = e => e.brush.height; function SH(e) { var r = $f(e); return r.reduce((a, s) => { if (s.orientation === "left" && !s.mirror && !s.hide) { var n = typeof s.width == "number" ? s.width : _m; return a + n } return a }, 0) } function CH(e) { var r = $f(e); return r.reduce((a, s) => { if (s.orientation === "right" && !s.mirror && !s.hide) { var n = typeof s.width == "number" ? s.width : _m; return a + n } return a }, 0) } function EH(e) { var r = _f(e); return r.reduce((a, s) => s.orientation === "top" && !s.mirror && !s.hide ? a + s.height : a, 0) } function AH(e) { var r = _f(e); return r.reduce((a, s) => s.orientation === "bottom" && !s.mirror && !s.hide ? a + s.height : a, 0) } var Aa = be([eo, to, l5, kH, SH, CH, EH, AH, E3, eq], (e, r, a, s, n, i, o, c, u, m) => { var g = { left: (a.left || 0) + n, right: (a.right || 0) + i }, f = { top: (a.top || 0) + o, bottom: (a.bottom || 0) + c }, y = w0(w0({}, f), g), p = y.bottom; y.bottom += s, y = oH(y, u, m); var b = e - y.left - y.right, j = r - y.top - y.bottom; return w0(w0({ brushBottom: p }, y), {}, { width: Math.max(b, 0), height: Math.max(j, 0) }) }), PH = be(Aa, e => ({ x: e.left, y: e.top, width: e.width, height: e.height })), Aj = be(eo, to, (e, r) => ({ x: 0, y: 0, width: e, height: r })), TH = h.createContext(null), Ha = () => h.useContext(TH) != null, Uf = e => e.brush, Ff = be([Uf, Aa, l5], (e, r, a) => ({ height: e.height, x: rt(e.x) ? e.x : r.left, y: rt(e.y) ? e.y : r.top + r.height + r.brushBottom - (a?.bottom || 0), width: rt(e.width) ? e.width : r.width })), bv = {}, wv = {}, jv = {}, D4; function DH() { return D4 || (D4 = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a, s, { signal: n, edges: i } = {}) { let o, c = null; const u = i != null && i.includes("leading"), m = i == null || i.includes("trailing"), g = () => { c !== null && (a.apply(o, c), o = void 0, c = null) }, f = () => { m && g(), j() }; let y = null; const p = () => { y != null && clearTimeout(y), y = setTimeout(() => { y = null, f() }, s) }, b = () => { y !== null && (clearTimeout(y), y = null) }, j = () => { b(), o = void 0, c = null }, v = () => { g() }, S = function (...k) { if (n?.aborted) return; o = this, c = k; const E = y == null; p(), u && E && g() }; return S.schedule = p, S.cancel = j, S.flush = v, n?.addEventListener("abort", j, { once: !0 }), S } e.debounce = r })(jv)), jv } var O4; function OH() { return O4 || (O4 = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = DH(); function a(s, n = 0, i = {}) { typeof i != "object" && (i = {}); const { leading: o = !1, trailing: c = !0, maxWait: u } = i, m = Array(2); o && (m[0] = "leading"), c && (m[1] = "trailing"); let g, f = null; const y = r.debounce(function (...j) { g = s.apply(this, j), f = null }, n, { edges: m }), p = function (...j) { return u != null && (f === null && (f = Date.now()), Date.now() - f >= u) ? (g = s.apply(this, j), f = Date.now(), y.cancel(), y.schedule(), g) : (y.apply(this, j), g) }, b = () => (y.flush(), g); return p.cancel = y.cancel, p.flush = b, p } e.debounce = a })(wv)), wv } var I4; function IH() { return I4 || (I4 = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = OH(); function a(s, n = 0, i = {}) { const { leading: o = !0, trailing: c = !0 } = i; return r.debounce(s, n, { leading: o, maxWait: n, trailing: c }) } e.throttle = a })(bv)), bv } var Nv, L4; function LH() { return L4 || (L4 = 1, Nv = IH().throttle), Nv } var RH = LH(); const MH = mi(RH); var Ah = function (r, a) { for (var s = arguments.length, n = new Array(s > 2 ? s - 2 : 0), i = 2; i < s; i++)n[i - 2] = arguments[i]; if (typeof console < "u" && console.warn && (a === void 0 && console.warn("LogUtils requires an error message argument"), !r)) if (a === void 0) console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings."); else { var o = 0; console.warn(a.replace(/%s/g, () => n[o++])) } }, u5 = (e, r, a) => { var { width: s = "100%", height: n = "100%", aspect: i, maxHeight: o } = a, c = Wi(s) ? e : Number(s), u = Wi(n) ? r : Number(n); return i && i > 0 && (c ? u = c / i : u && (c = u * i), o && u != null && u > o && (u = o)), { calculatedWidth: c, calculatedHeight: u } }, _H = { width: 0, height: 0, overflow: "visible" }, $H = { width: 0, overflowX: "visible" }, UH = { height: 0, overflowY: "visible" }, FH = {}, zH = e => { var { width: r, height: a } = e, s = Wi(r), n = Wi(a); return s && n ? _H : s ? $H : n ? UH : FH }; function BH(e) { var { width: r, height: a, aspect: s } = e, n = r, i = a; return n === void 0 && i === void 0 ? (n = "100%", i = "100%") : n === void 0 ? n = s && s > 0 ? void 0 : "100%" : i === void 0 && (i = s && s > 0 ? void 0 : "100%"), { width: n, height: i } } function Rr(e) { return Number.isFinite(e) } function li(e) { return typeof e == "number" && e > 0 && Number.isFinite(e) } function Zb() { return Zb = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Zb.apply(null, arguments) } function R4(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function M4(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? R4(Object(a), !0).forEach(function (s) { qH(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : R4(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function qH(e, r, a) { return (r = HH(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function HH(e) { var r = WH(e, "string"); return typeof r == "symbol" ? r : r + "" } function WH(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var m5 = h.createContext({ width: -1, height: -1 }); function VH(e) { return li(e.width) && li(e.height) } function g5(e) { var { children: r, width: a, height: s } = e, n = h.useMemo(() => ({ width: a, height: s }), [a, s]); return VH(n) ? h.createElement(m5.Provider, { value: n }, r) : null } var Pj = () => h.useContext(m5), GH = h.forwardRef((e, r) => {
    var { aspect: a, initialDimension: s = { width: -1, height: -1 }, width: n, height: i, minWidth: o = 0, minHeight: c, maxHeight: u, children: m, debounce: g = 0, id: f, className: y, onResize: p, style: b = {} } = e, j = h.useRef(null), v = h.useRef(); v.current = p, h.useImperativeHandle(r, () => j.current); var [S, k] = h.useState({ containerWidth: s.width, containerHeight: s.height }), E = h.useCallback((I, $) => { k(B => { var W = Math.round(I), M = Math.round($); return B.containerWidth === W && B.containerHeight === M ? B : { containerWidth: W, containerHeight: M } }) }, []); h.useEffect(() => { if (j.current == null || typeof ResizeObserver > "u") return Om; var I = M => { var q, { width: V, height: X } = M[0].contentRect; E(V, X), (q = v.current) === null || q === void 0 || q.call(v, V, X) }; g > 0 && (I = MH(I, g, { trailing: !0, leading: !1 })); var $ = new ResizeObserver(I), { width: B, height: W } = j.current.getBoundingClientRect(); return E(B, W), $.observe(j.current), () => { $.disconnect() } }, [E, g]); var { containerWidth: C, containerHeight: N } = S; Ah(!a || a > 0, "The aspect(%s) must be greater than zero.", a); var { calculatedWidth: A, calculatedHeight: D } = u5(C, N, { width: n, height: i, aspect: a, maxHeight: u }); return Ah(A != null && A > 0 || D != null && D > 0, `The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`, A, D, n, i, o, c, a), h.createElement("div", { id: f ? "".concat(f) : void 0, className: er("recharts-responsive-container", y), style: M4(M4({}, b), {}, { width: n, height: i, minWidth: o, minHeight: c, maxHeight: u }), ref: j }, h.createElement("div", { style: zH({ width: n, height: i }) }, h.createElement(g5, { width: A, height: D }, m)))
}), Ms = h.forwardRef((e, r) => { var a = Pj(); if (li(a.width) && li(a.height)) return e.children; var { width: s, height: n } = BH({ width: e.width, height: e.height, aspect: e.aspect }), { calculatedWidth: i, calculatedHeight: o } = u5(void 0, void 0, { width: s, height: n, aspect: e.aspect, maxHeight: e.maxHeight }); return rt(i) && rt(o) ? h.createElement(g5, { width: i, height: o }, e.children) : h.createElement(GH, Zb({}, e, { width: s, height: n, ref: r })) }); function h5(e) { if (e) return { x: e.x, y: e.y, upperWidth: "upperWidth" in e ? e.upperWidth : e.width, lowerWidth: "lowerWidth" in e ? e.lowerWidth : e.width, width: e.width, height: e.height } } var zf = () => { var e, r = Ha(), a = nt(PH), s = nt(Ff), n = (e = nt(Uf)) === null || e === void 0 ? void 0 : e.padding; return !r || !s || !n ? a : { width: s.width - n.left - n.right, height: s.height - n.top - n.bottom, x: n.left, y: n.top } }, KH = { top: 0, bottom: 0, left: 0, right: 0, width: 0, height: 0, brushBottom: 0 }, f5 = () => { var e; return (e = nt(Aa)) !== null && e !== void 0 ? e : KH }, Tj = () => nt(eo), Dj = () => nt(to), YH = () => nt(e => e.layout.margin), Wt = e => e.layout.layoutType, ec = () => nt(Wt), QH = () => { var e = ec(); if (e === "horizontal" || e === "vertical") return e }, XH = () => { var e = ec(); return e !== void 0 }, Bf = e => { var r = Tr(), a = Ha(), { width: s, height: n } = e, i = Pj(), o = s, c = n; return i && (o = i.width > 0 ? i.width : s, c = i.height > 0 ? i.height : n), h.useEffect(() => { !a && li(o) && li(c) && r(tH({ width: o, height: c })) }, [r, a, o, c]), null }, x5 = Symbol.for("immer-nothing"), _4 = Symbol.for("immer-draftable"), Js = Symbol.for("immer-state"); function _n(e, ...r) { throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`) } var nm = Object.getPrototypeOf; function rd(e) { return !!e && !!e[Js] } function Gl(e) { return e ? p5(e) || Array.isArray(e) || !!e[_4] || !!e.constructor?.[_4] || $m(e) || Hf(e) : !1 } var ZH = Object.prototype.constructor.toString(), $4 = new WeakMap; function p5(e) { if (!e || typeof e != "object") return !1; const r = Object.getPrototypeOf(e); if (r === null || r === Object.prototype) return !0; const a = Object.hasOwnProperty.call(r, "constructor") && r.constructor; if (a === Object) return !0; if (typeof a != "function") return !1; let s = $4.get(a); return s === void 0 && (s = Function.toString.call(a), $4.set(a, s)), s === ZH } function Ph(e, r, a = !0) { qf(e) === 0 ? (a ? Reflect.ownKeys(e) : Object.keys(e)).forEach(n => { r(n, e[n], e) }) : e.forEach((s, n) => r(n, s, e)) } function qf(e) { const r = e[Js]; return r ? r.type_ : Array.isArray(e) ? 1 : $m(e) ? 2 : Hf(e) ? 3 : 0 } function Jb(e, r) { return qf(e) === 2 ? e.has(r) : Object.prototype.hasOwnProperty.call(e, r) } function y5(e, r, a) { const s = qf(e); s === 2 ? e.set(r, a) : s === 3 ? e.add(a) : e[r] = a } function JH(e, r) { return e === r ? e !== 0 || 1 / e === 1 / r : e !== e && r !== r } function $m(e) { return e instanceof Map } function Hf(e) { return e instanceof Set } function jl(e) { return e.copy_ || e.base_ } function ew(e, r) { if ($m(e)) return new Map(e); if (Hf(e)) return new Set(e); if (Array.isArray(e)) return Array.prototype.slice.call(e); const a = p5(e); if (r === !0 || r === "class_only" && !a) { const s = Object.getOwnPropertyDescriptors(e); delete s[Js]; let n = Reflect.ownKeys(s); for (let i = 0; i < n.length; i++) { const o = n[i], c = s[o]; c.writable === !1 && (c.writable = !0, c.configurable = !0), (c.get || c.set) && (s[o] = { configurable: !0, writable: !0, enumerable: c.enumerable, value: e[o] }) } return Object.create(nm(e), s) } else { const s = nm(e); if (s !== null && a) return { ...e }; const n = Object.create(s); return Object.assign(n, e) } } function Oj(e, r = !1) { return Wf(e) || rd(e) || !Gl(e) || (qf(e) > 1 && Object.defineProperties(e, { set: j0, add: j0, clear: j0, delete: j0 }), Object.freeze(e), r && Object.values(e).forEach(a => Oj(a, !0))), e } function eW() { _n(2) } var j0 = { value: eW }; function Wf(e) { return e === null || typeof e != "object" ? !0 : Object.isFrozen(e) } var tW = {}; function Kl(e) { const r = tW[e]; return r || _n(0, e), r } var im; function v5() { return im } function rW(e, r) { return { drafts_: [], parent_: e, immer_: r, canAutoFreeze_: !0, unfinalizedDrafts_: 0 } } function U4(e, r) { r && (Kl("Patches"), e.patches_ = [], e.inversePatches_ = [], e.patchListener_ = r) } function tw(e) { rw(e), e.drafts_.forEach(aW), e.drafts_ = null } function rw(e) { e === im && (im = e.parent_) } function F4(e) { return im = rW(im, e) } function aW(e) { const r = e[Js]; r.type_ === 0 || r.type_ === 1 ? r.revoke_() : r.revoked_ = !0 } function z4(e, r) { r.unfinalizedDrafts_ = r.drafts_.length; const a = r.drafts_[0]; return e !== void 0 && e !== a ? (a[Js].modified_ && (tw(r), _n(4)), Gl(e) && (e = Th(r, e), r.parent_ || Dh(r, e)), r.patches_ && Kl("Patches").generateReplacementPatches_(a[Js].base_, e, r.patches_, r.inversePatches_)) : e = Th(r, a, []), tw(r), r.patches_ && r.patchListener_(r.patches_, r.inversePatches_), e !== x5 ? e : void 0 } function Th(e, r, a) { if (Wf(r)) return r; const s = e.immer_.shouldUseStrictIteration(), n = r[Js]; if (!n) return Ph(r, (i, o) => B4(e, n, r, i, o, a), s), r; if (n.scope_ !== e) return r; if (!n.modified_) return Dh(e, n.base_, !0), n.base_; if (!n.finalized_) { n.finalized_ = !0, n.scope_.unfinalizedDrafts_--; const i = n.copy_; let o = i, c = !1; n.type_ === 3 && (o = new Set(i), i.clear(), c = !0), Ph(o, (u, m) => B4(e, n, i, u, m, a, c), s), Dh(e, i, !1), a && e.patches_ && Kl("Patches").generatePatches_(n, a, e.patches_, e.inversePatches_) } return n.copy_ } function B4(e, r, a, s, n, i, o) { if (n == null || typeof n != "object" && !o) return; const c = Wf(n); if (!(c && !o)) { if (rd(n)) { const u = i && r && r.type_ !== 3 && !Jb(r.assigned_, s) ? i.concat(s) : void 0, m = Th(e, n, u); if (y5(a, s, m), rd(m)) e.canAutoFreeze_ = !1; else return } else o && a.add(n); if (Gl(n) && !c) { if (!e.immer_.autoFreeze_ && e.unfinalizedDrafts_ < 1 || r && r.base_ && r.base_[s] === n && c) return; Th(e, n), (!r || !r.scope_.parent_) && typeof s != "symbol" && ($m(a) ? a.has(s) : Object.prototype.propertyIsEnumerable.call(a, s)) && Dh(e, n) } } } function Dh(e, r, a = !1) { !e.parent_ && e.immer_.autoFreeze_ && e.canAutoFreeze_ && Oj(r, a) } function sW(e, r) { const a = Array.isArray(e), s = { type_: a ? 1 : 0, scope_: r ? r.scope_ : v5(), modified_: !1, finalized_: !1, assigned_: {}, parent_: r, base_: e, draft_: null, copy_: null, revoke_: null, isManual_: !1 }; let n = s, i = Ij; a && (n = [s], i = om); const { revoke: o, proxy: c } = Proxy.revocable(n, i); return s.draft_ = c, s.revoke_ = o, c } var Ij = { get(e, r) { if (r === Js) return e; const a = jl(e); if (!Jb(a, r)) return nW(e, a, r); const s = a[r]; return e.finalized_ || !Gl(s) ? s : s === kv(e.base_, r) ? (Sv(e), e.copy_[r] = sw(s, e)) : s }, has(e, r) { return r in jl(e) }, ownKeys(e) { return Reflect.ownKeys(jl(e)) }, set(e, r, a) { const s = b5(jl(e), r); if (s?.set) return s.set.call(e.draft_, a), !0; if (!e.modified_) { const n = kv(jl(e), r), i = n?.[Js]; if (i && i.base_ === a) return e.copy_[r] = a, e.assigned_[r] = !1, !0; if (JH(a, n) && (a !== void 0 || Jb(e.base_, r))) return !0; Sv(e), aw(e) } return e.copy_[r] === a && (a !== void 0 || r in e.copy_) || Number.isNaN(a) && Number.isNaN(e.copy_[r]) || (e.copy_[r] = a, e.assigned_[r] = !0), !0 }, deleteProperty(e, r) { return kv(e.base_, r) !== void 0 || r in e.base_ ? (e.assigned_[r] = !1, Sv(e), aw(e)) : delete e.assigned_[r], e.copy_ && delete e.copy_[r], !0 }, getOwnPropertyDescriptor(e, r) { const a = jl(e), s = Reflect.getOwnPropertyDescriptor(a, r); return s && { writable: !0, configurable: e.type_ !== 1 || r !== "length", enumerable: s.enumerable, value: a[r] } }, defineProperty() { _n(11) }, getPrototypeOf(e) { return nm(e.base_) }, setPrototypeOf() { _n(12) } }, om = {}; Ph(Ij, (e, r) => { om[e] = function () { return arguments[0] = arguments[0][0], r.apply(this, arguments) } }); om.deleteProperty = function (e, r) { return om.set.call(this, e, r, void 0) }; om.set = function (e, r, a) { return Ij.set.call(this, e[0], r, a, e[0]) }; function kv(e, r) { const a = e[Js]; return (a ? jl(a) : e)[r] } function nW(e, r, a) { const s = b5(r, a); return s ? "value" in s ? s.value : s.get?.call(e.draft_) : void 0 } function b5(e, r) { if (!(r in e)) return; let a = nm(e); for (; a;) { const s = Object.getOwnPropertyDescriptor(a, r); if (s) return s; a = nm(a) } } function aw(e) { e.modified_ || (e.modified_ = !0, e.parent_ && aw(e.parent_)) } function Sv(e) { e.copy_ || (e.copy_ = ew(e.base_, e.scope_.immer_.useStrictShallowCopy_)) } var iW = class { constructor(e) { this.autoFreeze_ = !0, this.useStrictShallowCopy_ = !1, this.useStrictIteration_ = !0, this.produce = (r, a, s) => { if (typeof r == "function" && typeof a != "function") { const i = a; a = r; const o = this; return function (u = i, ...m) { return o.produce(u, g => a.call(this, g, ...m)) } } typeof a != "function" && _n(6), s !== void 0 && typeof s != "function" && _n(7); let n; if (Gl(r)) { const i = F4(this), o = sw(r, void 0); let c = !0; try { n = a(o), c = !1 } finally { c ? tw(i) : rw(i) } return U4(i, s), z4(n, i) } else if (!r || typeof r != "object") { if (n = a(r), n === void 0 && (n = r), n === x5 && (n = void 0), this.autoFreeze_ && Oj(n, !0), s) { const i = [], o = []; Kl("Patches").generateReplacementPatches_(r, n, i, o), s(i, o) } return n } else _n(1, r) }, this.produceWithPatches = (r, a) => { if (typeof r == "function") return (o, ...c) => this.produceWithPatches(o, u => r(u, ...c)); let s, n; return [this.produce(r, a, (o, c) => { s = o, n = c }), s, n] }, typeof e?.autoFreeze == "boolean" && this.setAutoFreeze(e.autoFreeze), typeof e?.useStrictShallowCopy == "boolean" && this.setUseStrictShallowCopy(e.useStrictShallowCopy), typeof e?.useStrictIteration == "boolean" && this.setUseStrictIteration(e.useStrictIteration) } createDraft(e) { Gl(e) || _n(8), rd(e) && (e = oW(e)); const r = F4(this), a = sw(e, void 0); return a[Js].isManual_ = !0, rw(r), a } finishDraft(e, r) { const a = e && e[Js]; (!a || !a.isManual_) && _n(9); const { scope_: s } = a; return U4(s, r), z4(void 0, s) } setAutoFreeze(e) { this.autoFreeze_ = e } setUseStrictShallowCopy(e) { this.useStrictShallowCopy_ = e } setUseStrictIteration(e) { this.useStrictIteration_ = e } shouldUseStrictIteration() { return this.useStrictIteration_ } applyPatches(e, r) { let a; for (a = r.length - 1; a >= 0; a--) { const n = r[a]; if (n.path.length === 0 && n.op === "replace") { e = n.value; break } } a > -1 && (r = r.slice(a + 1)); const s = Kl("Patches").applyPatches_; return rd(e) ? s(e, r) : this.produce(e, n => s(n, r)) } }; function sw(e, r) { const a = $m(e) ? Kl("MapSet").proxyMap_(e, r) : Hf(e) ? Kl("MapSet").proxySet_(e, r) : sW(e, r); return (r ? r.scope_ : v5()).drafts_.push(a), a } function oW(e) { return rd(e) || _n(10, e), w5(e) } function w5(e) { if (!Gl(e) || Wf(e)) return e; const r = e[Js]; let a, s = !0; if (r) { if (!r.modified_) return r.base_; r.finalized_ = !0, a = ew(e, r.scope_.immer_.useStrictShallowCopy_), s = r.scope_.immer_.shouldUseStrictIteration() } else a = ew(e, !0); return Ph(a, (n, i) => { y5(a, n, w5(i)) }, s), r && (r.finalized_ = !1), a } var lW = new iW; lW.produce; var cW = { settings: { layout: "horizontal", align: "center", verticalAlign: "middle", itemSorter: "value" }, size: { width: 0, height: 0 }, payload: [] }, j5 = Fs({ name: "legend", initialState: cW, reducers: { setLegendSize(e, r) { e.size.width = r.payload.width, e.size.height = r.payload.height }, setLegendSettings(e, r) { e.settings.align = r.payload.align, e.settings.layout = r.payload.layout, e.settings.verticalAlign = r.payload.verticalAlign, e.settings.itemSorter = r.payload.itemSorter }, addLegendPayload: { reducer(e, r) { e.payload.push(r.payload) }, prepare: Ur() }, replaceLegendPayload: { reducer(e, r) { var { prev: a, next: s } = r.payload, n = Un(e).payload.indexOf(a); n > -1 && (e.payload[n] = s) }, prepare: Ur() }, removeLegendPayload: { reducer(e, r) { var a = Un(e).payload.indexOf(r.payload); a > -1 && e.payload.splice(a, 1) }, prepare: Ur() } } }), { setLegendSize: q4, setLegendSettings: dW, addLegendPayload: N5, replaceLegendPayload: k5, removeLegendPayload: S5 } = j5.actions, uW = j5.reducer, mW = ["contextPayload"]; function nw() { return nw = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, nw.apply(null, arguments) } function H4(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function ad(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? H4(Object(a), !0).forEach(function (s) { gW(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : H4(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function gW(e, r, a) { return (r = hW(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function hW(e) { var r = fW(e, "string"); return typeof r == "symbol" ? r : r + "" } function fW(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function xW(e, r) { if (e == null) return {}; var a, s, n = pW(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function pW(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } function yW(e) { return e.value } function vW(e) { var { contextPayload: r } = e, a = xW(e, mW), s = N3(r, e.payloadUniqBy, yW), n = ad(ad({}, a), {}, { payload: s }); return h.isValidElement(e.content) ? h.cloneElement(e.content, n) : typeof e.content == "function" ? h.createElement(e.content, n) : h.createElement(cB, n) } function bW(e, r, a, s, n, i) { var { layout: o, align: c, verticalAlign: u } = r, m, g; return (!e || (e.left === void 0 || e.left === null) && (e.right === void 0 || e.right === null)) && (c === "center" && o === "vertical" ? m = { left: ((s || 0) - i.width) / 2 } : m = c === "right" ? { right: a && a.right || 0 } : { left: a && a.left || 0 }), (!e || (e.top === void 0 || e.top === null) && (e.bottom === void 0 || e.bottom === null)) && (u === "middle" ? g = { top: ((n || 0) - i.height) / 2 } : g = u === "bottom" ? { bottom: a && a.bottom || 0 } : { top: a && a.top || 0 }), ad(ad({}, m), g) } function wW(e) { var r = Tr(); return h.useEffect(() => { r(dW(e)) }, [r, e]), null } function jW(e) { var r = Tr(); return h.useEffect(() => (r(q4(e)), () => { r(q4({ width: 0, height: 0 })) }), [r, e]), null } function NW(e, r, a, s) { return e === "vertical" && rt(r) ? { height: r } : e === "horizontal" ? { width: a || s } : null } var kW = { align: "center", iconSize: 14, itemSorter: "value", layout: "horizontal", verticalAlign: "bottom" }; function za(e) { var r = sa(e, kW), a = aq(), s = tz(), n = YH(), { width: i, height: o, wrapperStyle: c, portal: u } = r, [m, g] = A3([a]), f = Tj(), y = Dj(); if (f == null || y == null) return null; var p = f - (n?.left || 0) - (n?.right || 0), b = NW(r.layout, o, i, p), j = u ? c : ad(ad({ position: "absolute", width: b?.width || i || "auto", height: b?.height || o || "auto" }, bW(c, r, n, f, y, m)), c), v = u ?? s; if (v == null || a == null) return null; var S = h.createElement("div", { className: "recharts-legend-wrapper", style: j, ref: g }, h.createElement(wW, { layout: r.layout, align: r.align, verticalAlign: r.verticalAlign, itemSorter: r.itemSorter }), !u && h.createElement(jW, { width: m.width, height: m.height }), h.createElement(vW, nw({}, r, b, { margin: n, chartWidth: f, chartHeight: y, contextPayload: a }))); return Ro.createPortal(S, v) } za.displayName = "Legend"; function iw() { return iw = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, iw.apply(null, arguments) } function W4(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function Cv(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? W4(Object(a), !0).forEach(function (s) { SW(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : W4(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function SW(e, r, a) { return (r = CW(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function CW(e) { var r = EW(e, "string"); return typeof r == "symbol" ? r : r + "" } function EW(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function AW(e) { return Array.isArray(e) && oi(e[0]) && oi(e[1]) ? e.join(" ~ ") : e } var PW = e => { var { separator: r = " : ", contentStyle: a = {}, itemStyle: s = {}, labelStyle: n = {}, payload: i, formatter: o, itemSorter: c, wrapperClassName: u, labelClassName: m, label: g, labelFormatter: f, accessibilityLayer: y = !1 } = e, p = () => { if (i && i.length) { var N = { padding: 0, margin: 0 }, A = (c ? Af(i, c) : i).map((D, I) => { if (D.type === "none") return null; var $ = D.formatter || o || AW, { value: B, name: W } = D, M = B, q = W; if ($) { var V = $(B, W, D, I, i); if (Array.isArray(V)) [M, q] = V; else if (V != null) M = V; else return null } var X = Cv({ display: "block", paddingTop: 4, paddingBottom: 4, color: D.color || "#000" }, s); return h.createElement("li", { className: "recharts-tooltip-item", key: "tooltip-item-".concat(I), style: X }, oi(q) ? h.createElement("span", { className: "recharts-tooltip-item-name" }, q) : null, oi(q) ? h.createElement("span", { className: "recharts-tooltip-item-separator" }, r) : null, h.createElement("span", { className: "recharts-tooltip-item-value" }, M), h.createElement("span", { className: "recharts-tooltip-item-unit" }, D.unit || "")) }); return h.createElement("ul", { className: "recharts-tooltip-item-list", style: N }, A) } return null }, b = Cv({ margin: 0, padding: 10, backgroundColor: "#fff", border: "1px solid #ccc", whiteSpace: "nowrap" }, a), j = Cv({ margin: 0 }, n), v = !Lr(g), S = v ? g : "", k = er("recharts-default-tooltip", u), E = er("recharts-tooltip-label", m); v && f && i !== void 0 && i !== null && (S = f(g, i)); var C = y ? { role: "status", "aria-live": "assertive" } : {}; return h.createElement("div", iw({ className: k, style: b }, C), h.createElement("p", { className: E, style: j }, h.isValidElement(S) ? S : "".concat(S)), p()) }, yu = "recharts-tooltip-wrapper", TW = { visibility: "hidden" }; function DW(e) { var { coordinate: r, translateX: a, translateY: s } = e; return er(yu, { ["".concat(yu, "-right")]: rt(a) && r && rt(r.x) && a >= r.x, ["".concat(yu, "-left")]: rt(a) && r && rt(r.x) && a < r.x, ["".concat(yu, "-bottom")]: rt(s) && r && rt(r.y) && s >= r.y, ["".concat(yu, "-top")]: rt(s) && r && rt(r.y) && s < r.y }) } function V4(e) { var { allowEscapeViewBox: r, coordinate: a, key: s, offsetTopLeft: n, position: i, reverseDirection: o, tooltipDimension: c, viewBox: u, viewBoxDimension: m } = e; if (i && rt(i[s])) return i[s]; var g = a[s] - c - (n > 0 ? n : 0), f = a[s] + n; if (r[s]) return o[s] ? g : f; var y = u[s]; if (y == null) return 0; if (o[s]) { var p = g, b = y; return p < b ? Math.max(f, y) : Math.max(g, y) } if (m == null) return 0; var j = f + c, v = y + m; return j > v ? Math.max(g, y) : Math.max(f, y) } function OW(e) { var { translateX: r, translateY: a, useTranslate3d: s } = e; return { transform: s ? "translate3d(".concat(r, "px, ").concat(a, "px, 0)") : "translate(".concat(r, "px, ").concat(a, "px)") } } function IW(e) { var { allowEscapeViewBox: r, coordinate: a, offsetTopLeft: s, position: n, reverseDirection: i, tooltipBox: o, useTranslate3d: c, viewBox: u } = e, m, g, f; return o.height > 0 && o.width > 0 && a ? (g = V4({ allowEscapeViewBox: r, coordinate: a, key: "x", offsetTopLeft: s, position: n, reverseDirection: i, tooltipDimension: o.width, viewBox: u, viewBoxDimension: u.width }), f = V4({ allowEscapeViewBox: r, coordinate: a, key: "y", offsetTopLeft: s, position: n, reverseDirection: i, tooltipDimension: o.height, viewBox: u, viewBoxDimension: u.height }), m = OW({ translateX: g, translateY: f, useTranslate3d: c })) : m = TW, { cssProperties: m, cssClasses: DW({ translateX: g, translateY: f, coordinate: a }) } } function G4(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function N0(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? G4(Object(a), !0).forEach(function (s) { ow(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : G4(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function ow(e, r, a) { return (r = LW(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function LW(e) { var r = RW(e, "string"); return typeof r == "symbol" ? r : r + "" } function RW(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } class MW extends h.PureComponent { constructor() { super(...arguments), ow(this, "state", { dismissed: !1, dismissedAtCoordinate: { x: 0, y: 0 } }), ow(this, "handleKeyDown", r => { if (r.key === "Escape") { var a, s, n, i; this.setState({ dismissed: !0, dismissedAtCoordinate: { x: (a = (s = this.props.coordinate) === null || s === void 0 ? void 0 : s.x) !== null && a !== void 0 ? a : 0, y: (n = (i = this.props.coordinate) === null || i === void 0 ? void 0 : i.y) !== null && n !== void 0 ? n : 0 } }) } }) } componentDidMount() { document.addEventListener("keydown", this.handleKeyDown) } componentWillUnmount() { document.removeEventListener("keydown", this.handleKeyDown) } componentDidUpdate() { var r, a; this.state.dismissed && (((r = this.props.coordinate) === null || r === void 0 ? void 0 : r.x) !== this.state.dismissedAtCoordinate.x || ((a = this.props.coordinate) === null || a === void 0 ? void 0 : a.y) !== this.state.dismissedAtCoordinate.y) && (this.state.dismissed = !1) } render() { var { active: r, allowEscapeViewBox: a, animationDuration: s, animationEasing: n, children: i, coordinate: o, hasPayload: c, isAnimationActive: u, offset: m, position: g, reverseDirection: f, useTranslate3d: y, viewBox: p, wrapperStyle: b, lastBoundingBox: j, innerRef: v, hasPortalFromProps: S } = this.props, { cssClasses: k, cssProperties: E } = IW({ allowEscapeViewBox: a, coordinate: o, offsetTopLeft: m, position: g, reverseDirection: f, tooltipBox: { height: j.height, width: j.width }, useTranslate3d: y, viewBox: p }), C = S ? {} : N0(N0({ transition: u && r ? "transform ".concat(s, "ms ").concat(n) : void 0 }, E), {}, { pointerEvents: "none", visibility: !this.state.dismissed && r && c ? "visible" : "hidden", position: "absolute", top: 0, left: 0 }), N = N0(N0({}, C), {}, { visibility: !this.state.dismissed && r && c ? "visible" : "hidden" }, b); return h.createElement("div", { xmlns: "http://www.w3.org/1999/xhtml", tabIndex: -1, className: k, style: N, ref: v }, i) } } var C5 = () => { var e; return (e = nt(r => r.rootProps.accessibilityLayer)) !== null && e !== void 0 ? e : !0 }; function lw() { return lw = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, lw.apply(null, arguments) } function K4(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function Y4(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? K4(Object(a), !0).forEach(function (s) { _W(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : K4(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function _W(e, r, a) { return (r = $W(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function $W(e) { var r = UW(e, "string"); return typeof r == "symbol" ? r : r + "" } function UW(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var Q4 = { curveBasisClosed: bz, curveBasisOpen: wz, curveBasis: vz, curveBumpX: nz, curveBumpY: iz, curveLinearClosed: jz, curveLinear: Cf, curveMonotoneX: Nz, curveMonotoneY: kz, curveNatural: Sz, curveStep: Cz, curveStepAfter: Az, curveStepBefore: Ez }, Oh = e => Rr(e.x) && Rr(e.y), X4 = e => e.base != null && Oh(e.base) && Oh(e), vu = e => e.x, bu = e => e.y, FW = (e, r) => { if (typeof e == "function") return e; var a = "curve".concat(Dm(e)); return (a === "curveMonotone" || a === "curveBump") && r ? Q4["".concat(a).concat(r === "vertical" ? "Y" : "X")] : Q4[a] || Cf }, zW = e => { var { type: r = "linear", points: a = [], baseLine: s, layout: n, connectNulls: i = !1 } = e, o = FW(r, n), c = i ? a.filter(Oh) : a, u; if (Array.isArray(s)) { var m = a.map((p, b) => Y4(Y4({}, p), {}, { base: s[b] })); n === "vertical" ? u = f0().y(bu).x1(vu).x0(p => p.base.x) : u = f0().x(vu).y1(bu).y0(p => p.base.y); var g = u.defined(X4).curve(o), f = i ? m.filter(X4) : m; return g(f) } n === "vertical" && rt(s) ? u = f0().y(bu).x1(vu).x0(s) : rt(s) ? u = f0().x(vu).y1(bu).y0(s) : u = ZD().x(vu).y(bu); var y = u.defined(Oh).curve(o); return y(c) }, Vc = e => { var { className: r, points: a, path: s, pathRef: n } = e; if ((!a || !a.length) && !s) return null; var i = a && a.length ? zW(e) : s; return h.createElement("path", lw({}, vs(e), pj(e), { className: er("recharts-curve", r), d: i === null ? void 0 : i, ref: n })) }, BW = ["x", "y", "top", "left", "width", "height", "className"]; function cw() { return cw = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, cw.apply(null, arguments) } function Z4(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function qW(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? Z4(Object(a), !0).forEach(function (s) { HW(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : Z4(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function HW(e, r, a) { return (r = WW(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function WW(e) { var r = VW(e, "string"); return typeof r == "symbol" ? r : r + "" } function VW(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function GW(e, r) { if (e == null) return {}; var a, s, n = KW(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function KW(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } var YW = (e, r, a, s, n, i) => "M".concat(e, ",").concat(n, "v").concat(s, "M").concat(i, ",").concat(r, "h").concat(a), QW = e => { var { x: r = 0, y: a = 0, top: s = 0, left: n = 0, width: i = 0, height: o = 0, className: c } = e, u = GW(e, BW), m = qW({ x: r, y: a, top: s, left: n, width: i, height: o }, u); return !rt(r) || !rt(a) || !rt(i) || !rt(o) || !rt(s) || !rt(n) ? null : h.createElement("path", cw({}, ls(m), { className: er("recharts-cross", c), d: YW(r, a, i, o, s, n) })) }; function XW(e, r, a, s) { var n = s / 2; return { stroke: "none", fill: "#ccc", x: e === "horizontal" ? r.x - n : a.left + .5, y: e === "horizontal" ? a.top + .5 : r.y - n, width: e === "horizontal" ? s : a.width - 1, height: e === "horizontal" ? a.height - 1 : s } } function J4(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function eE(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? J4(Object(a), !0).forEach(function (s) { ZW(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : J4(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function ZW(e, r, a) { return (r = JW(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function JW(e) { var r = eV(e, "string"); return typeof r == "symbol" ? r : r + "" } function eV(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var tV = e => e.replace(/([A-Z])/g, r => "-".concat(r.toLowerCase())), E5 = (e, r, a) => e.map(s => "".concat(tV(s), " ").concat(r, "ms ").concat(a)).join(","), rV = (e, r) => [Object.keys(e), Object.keys(r)].reduce((a, s) => a.filter(n => s.includes(n))), lm = (e, r) => Object.keys(r).reduce((a, s) => eE(eE({}, a), {}, { [s]: e(s, r[s]) }), {}); function tE(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function ka(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? tE(Object(a), !0).forEach(function (s) { aV(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : tE(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function aV(e, r, a) { return (r = sV(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function sV(e) { var r = nV(e, "string"); return typeof r == "symbol" ? r : r + "" } function nV(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var Ih = (e, r, a) => e + (r - e) * a, dw = e => { var { from: r, to: a } = e; return r !== a }, A5 = (e, r, a) => { var s = lm((n, i) => { if (dw(i)) { var [o, c] = e(i.from, i.to, i.velocity); return ka(ka({}, i), {}, { from: o, velocity: c }) } return i }, r); return a < 1 ? lm((n, i) => dw(i) ? ka(ka({}, i), {}, { velocity: Ih(i.velocity, s[n].velocity, a), from: Ih(i.from, s[n].from, a) }) : i, r) : A5(e, s, a - 1) }; function iV(e, r, a, s, n, i) { var o, c = s.reduce((y, p) => ka(ka({}, y), {}, { [p]: { from: e[p], velocity: 0, to: r[p] } }), {}), u = () => lm((y, p) => p.from, c), m = () => !Object.values(c).filter(dw).length, g = null, f = y => { o || (o = y); var p = y - o, b = p / a.dt; c = A5(a, c, b), n(ka(ka(ka({}, e), r), u())), o = y, m() || (g = i.setTimeout(f)) }; return () => (g = i.setTimeout(f), () => { var y; (y = g) === null || y === void 0 || y() }) } function oV(e, r, a, s, n, i, o) { var c = null, u = n.reduce((f, y) => ka(ka({}, f), {}, { [y]: [e[y], r[y]] }), {}), m, g = f => { m || (m = f); var y = (f - m) / s, p = lm((j, v) => Ih(...v, a(y)), u); if (i(ka(ka(ka({}, e), r), p)), y < 1) c = o.setTimeout(g); else { var b = lm((j, v) => Ih(...v, a(1)), u); i(ka(ka(ka({}, e), r), b)) } }; return () => (c = o.setTimeout(g), () => { var f; (f = c) === null || f === void 0 || f() }) } const lV = (e, r, a, s, n, i) => { var o = rV(e, r); return a == null ? () => (n(ka(ka({}, e), r)), () => { }) : a.isStepper === !0 ? iV(e, r, a, o, n, i) : oV(e, r, a, s, o, n, i) }; var Lh = 1e-4, P5 = (e, r) => [0, 3 * e, 3 * r - 6 * e, 3 * e - 3 * r + 1], T5 = (e, r) => e.map((a, s) => a * r ** s).reduce((a, s) => a + s), rE = (e, r) => a => { var s = P5(e, r); return T5(s, a) }, cV = (e, r) => a => { var s = P5(e, r), n = [...s.map((i, o) => i * o).slice(1), 0]; return T5(n, a) }, dV = function () { for (var r = arguments.length, a = new Array(r), s = 0; s < r; s++)a[s] = arguments[s]; if (a.length === 1) switch (a[0]) { case "linear": return [0, 0, 1, 1]; case "ease": return [.25, .1, .25, 1]; case "ease-in": return [.42, 0, 1, 1]; case "ease-out": return [.42, 0, .58, 1]; case "ease-in-out": return [0, 0, .58, 1]; default: { var n, i = a[0].split("("); if (i[0] === "cubic-bezier" && ((n = i[1]) === null || n === void 0 ? void 0 : n.split(")")[0].split(",").length) === 4) { var o = i[1].split(")")[0].split(",").map(c => parseFloat(c)); return [o[0], o[1], o[2], o[3]] } } }return a.length === 4 ? a : [0, 0, 1, 1] }, uV = (e, r, a, s) => { var n = rE(e, a), i = rE(r, s), o = cV(e, a), c = m => m > 1 ? 1 : m < 0 ? 0 : m, u = m => { for (var g = m > 1 ? 1 : m, f = g, y = 0; y < 8; ++y) { var p = n(f) - g, b = o(f); if (Math.abs(p - g) < Lh || b < Lh) return i(f); f = c(f - p / b) } return i(f) }; return u.isStepper = !1, u }, aE = function () { return uV(...dV(...arguments)) }, mV = function () { var r = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, { stiff: a = 100, damping: s = 8, dt: n = 17 } = r, i = (o, c, u) => { var m = -(o - c) * a, g = u * s, f = u + (m - g) * n / 1e3, y = u * n / 1e3 + o; return Math.abs(y - c) < Lh && Math.abs(f) < Lh ? [c, 0] : [y, f] }; return i.isStepper = !0, i.dt = n, i }, gV = e => { if (typeof e == "string") switch (e) { case "ease": case "ease-in-out": case "ease-out": case "ease-in": case "linear": return aE(e); case "spring": return mV(); default: if (e.split("(")[0] === "cubic-bezier") return aE(e) }return typeof e == "function" ? e : null }; function hV(e) { var r, a = () => null, s = !1, n = null, i = o => { if (!s) { if (Array.isArray(o)) { if (!o.length) return; var c = o, [u, ...m] = c; if (typeof u == "number") { n = e.setTimeout(i.bind(null, m), u); return } i(u), n = e.setTimeout(i.bind(null, m)); return } typeof o == "string" && (r = o, a(r)), typeof o == "object" && (r = o, a(r)), typeof o == "function" && o() } }; return { stop: () => { s = !0 }, start: o => { s = !1, n && (n(), n = null), i(o) }, subscribe: o => (a = o, () => { a = () => null }), getTimeoutController: () => e } } class fV { setTimeout(r) { var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0, s = performance.now(), n = null, i = o => { o - s >= a ? r(o) : typeof requestAnimationFrame == "function" && (n = requestAnimationFrame(i)) }; return n = requestAnimationFrame(i), () => { n != null && cancelAnimationFrame(n) } } } function xV() { return hV(new fV) } var pV = h.createContext(xV); function yV(e, r) { var a = h.useContext(pV); return h.useMemo(() => r ?? a(e), [e, r, a]) } var vV = () => !(typeof window < "u" && window.document && window.document.createElement && window.setTimeout), pd = { devToolsEnabled: !1, isSsr: vV() }, bV = { begin: 0, duration: 1e3, easing: "ease", isActive: !0, canBegin: !0, onAnimationEnd: () => { }, onAnimationStart: () => { } }, sE = { t: 0 }, Ev = { t: 1 }; function yd(e) { var r = sa(e, bV), { isActive: a, canBegin: s, duration: n, easing: i, begin: o, onAnimationEnd: c, onAnimationStart: u, children: m } = r, g = a === "auto" ? !pd.isSsr : a, f = yV(r.animationId, r.animationManager), [y, p] = h.useState(g ? sE : Ev), b = h.useRef(null); return h.useEffect(() => { g || p(Ev) }, [g]), h.useEffect(() => { if (!g || !s) return Om; var j = lV(sE, Ev, gV(i), n, p, f.getTimeoutController()), v = () => { b.current = j() }; return f.start([u, o, v, n, c]), () => { f.stop(), b.current && b.current(), c() } }, [g, s, n, i, o, u, c, f]), m(y.t) } function vd(e) { var r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "animation-", a = h.useRef(tm(r)), s = h.useRef(e); return s.current !== e && (a.current = tm(r), s.current = e), a.current } var wV = ["radius"], jV = ["radius"]; function nE(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function iE(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? nE(Object(a), !0).forEach(function (s) { NV(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : nE(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function NV(e, r, a) { return (r = kV(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function kV(e) { var r = SV(e, "string"); return typeof r == "symbol" ? r : r + "" } function SV(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function Rh() { return Rh = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Rh.apply(null, arguments) } function oE(e, r) { if (e == null) return {}; var a, s, n = CV(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function CV(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } var lE = (e, r, a, s, n) => {
    var i = Math.min(Math.abs(a) / 2, Math.abs(s) / 2), o = s >= 0 ? 1 : -1, c = a >= 0 ? 1 : -1, u = s >= 0 && a >= 0 || s < 0 && a < 0 ? 1 : 0, m; if (i > 0 && n instanceof Array) {
        for (var g = [0, 0, 0, 0], f = 0, y = 4; f < y; f++)g[f] = n[f] > i ? i : n[f]; m = "M".concat(e, ",").concat(r + o * g[0]), g[0] > 0 && (m += "A ".concat(g[0], ",").concat(g[0], ",0,0,").concat(u, ",").concat(e + c * g[0], ",").concat(r)), m += "L ".concat(e + a - c * g[1], ",").concat(r), g[1] > 0 && (m += "A ".concat(g[1], ",").concat(g[1], ",0,0,").concat(u, `,
        `).concat(e + a, ",").concat(r + o * g[1])), m += "L ".concat(e + a, ",").concat(r + s - o * g[2]), g[2] > 0 && (m += "A ".concat(g[2], ",").concat(g[2], ",0,0,").concat(u, `,
        `).concat(e + a - c * g[2], ",").concat(r + s)), m += "L ".concat(e + c * g[3], ",").concat(r + s), g[3] > 0 && (m += "A ".concat(g[3], ",").concat(g[3], ",0,0,").concat(u, `,
        `).concat(e, ",").concat(r + s - o * g[3])), m += "Z"
    } else if (i > 0 && n === +n && n > 0) {
        var p = Math.min(i, n); m = "M ".concat(e, ",").concat(r + o * p, `
            A `).concat(p, ",").concat(p, ",0,0,").concat(u, ",").concat(e + c * p, ",").concat(r, `
            L `).concat(e + a - c * p, ",").concat(r, `
            A `).concat(p, ",").concat(p, ",0,0,").concat(u, ",").concat(e + a, ",").concat(r + o * p, `
            L `).concat(e + a, ",").concat(r + s - o * p, `
            A `).concat(p, ",").concat(p, ",0,0,").concat(u, ",").concat(e + a - c * p, ",").concat(r + s, `
            L `).concat(e + c * p, ",").concat(r + s, `
            A `).concat(p, ",").concat(p, ",0,0,").concat(u, ",").concat(e, ",").concat(r + s - o * p, " Z")
    } else m = "M ".concat(e, ",").concat(r, " h ").concat(a, " v ").concat(s, " h ").concat(-a, " Z"); return m
}, cE = { x: 0, y: 0, width: 0, height: 0, radius: 0, isAnimationActive: !1, isUpdateAnimationActive: !1, animationBegin: 0, animationDuration: 1500, animationEasing: "ease" }, D5 = e => { var r = sa(e, cE), a = h.useRef(null), [s, n] = h.useState(-1); h.useEffect(() => { if (a.current && a.current.getTotalLength) try { var le = a.current.getTotalLength(); le && n(le) } catch { } }, []); var { x: i, y: o, width: c, height: u, radius: m, className: g } = r, { animationEasing: f, animationDuration: y, animationBegin: p, isAnimationActive: b, isUpdateAnimationActive: j } = r, v = h.useRef(c), S = h.useRef(u), k = h.useRef(i), E = h.useRef(o), C = h.useMemo(() => ({ x: i, y: o, width: c, height: u, radius: m }), [i, o, c, u, m]), N = vd(C, "rectangle-"); if (i !== +i || o !== +o || c !== +c || u !== +u || c === 0 || u === 0) return null; var A = er("recharts-rectangle", g); if (!j) { var D = ls(r), { radius: I } = D, $ = oE(D, wV); return h.createElement("path", Rh({}, $, { radius: typeof m == "number" ? m : void 0, className: A, d: lE(i, o, c, u, m) })) } var B = v.current, W = S.current, M = k.current, q = E.current, V = "0px ".concat(s === -1 ? 1 : s, "px"), X = "".concat(s, "px 0px"), se = E5(["strokeDasharray"], y, typeof f == "string" ? f : cE.animationEasing); return h.createElement(yd, { animationId: N, key: N, canBegin: s > 0, duration: y, easing: f, isActive: j, begin: p }, le => { var ee = cr(B, c, le), L = cr(W, u, le), z = cr(M, i, le), T = cr(q, o, le); a.current && (v.current = ee, S.current = L, k.current = z, E.current = T); var _; b ? le > 0 ? _ = { transition: se, strokeDasharray: X } : _ = { strokeDasharray: V } : _ = { strokeDasharray: X }; var H = ls(r), { radius: U } = H, K = oE(H, jV); return h.createElement("path", Rh({}, K, { radius: typeof m == "number" ? m : void 0, className: A, d: lE(z, T, ee, L, m), ref: a, style: iE(iE({}, _), r.style) })) }) }; function dE(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function uE(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? dE(Object(a), !0).forEach(function (s) { EV(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : dE(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function EV(e, r, a) { return (r = AV(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function AV(e) { var r = PV(e, "string"); return typeof r == "symbol" ? r : r + "" } function PV(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var Mh = Math.PI / 180, TV = e => e * 180 / Math.PI, ba = (e, r, a, s) => ({ x: e + Math.cos(-Mh * s) * a, y: r + Math.sin(-Mh * s) * a }), O5 = function (r, a) { var s = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : { top: 0, right: 0, bottom: 0, left: 0 }; return Math.min(Math.abs(r - (s.left || 0) - (s.right || 0)), Math.abs(a - (s.top || 0) - (s.bottom || 0))) / 2 }, DV = (e, r) => { var { x: a, y: s } = e, { x: n, y: i } = r; return Math.sqrt((a - n) ** 2 + (s - i) ** 2) }, OV = (e, r) => { var { x: a, y: s } = e, { cx: n, cy: i } = r, o = DV({ x: a, y: s }, { x: n, y: i }); if (o <= 0) return { radius: o, angle: 0 }; var c = (a - n) / o, u = Math.acos(c); return s > i && (u = 2 * Math.PI - u), { radius: o, angle: TV(u), angleInRadian: u } }, IV = e => { var { startAngle: r, endAngle: a } = e, s = Math.floor(r / 360), n = Math.floor(a / 360), i = Math.min(s, n); return { startAngle: r - i * 360, endAngle: a - i * 360 } }, LV = (e, r) => { var { startAngle: a, endAngle: s } = r, n = Math.floor(a / 360), i = Math.floor(s / 360), o = Math.min(n, i); return e + o * 360 }, RV = (e, r) => { var { chartX: a, chartY: s } = e, { radius: n, angle: i } = OV({ x: a, y: s }, r), { innerRadius: o, outerRadius: c } = r; if (n < o || n > c || n === 0) return null; var { startAngle: u, endAngle: m } = IV(r), g = i, f; if (u <= m) { for (; g > m;)g -= 360; for (; g < u;)g += 360; f = g >= u && g <= m } else { for (; g > u;)g -= 360; for (; g < m;)g += 360; f = g >= m && g <= u } return f ? uE(uE({}, r), {}, { radius: n, angle: LV(g, r) }) : null }; function I5(e) { var { cx: r, cy: a, radius: s, startAngle: n, endAngle: i } = e, o = ba(r, a, s, n), c = ba(r, a, s, i); return { points: [o, c], cx: r, cy: a, radius: s, startAngle: n, endAngle: i } } function uw() { return uw = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, uw.apply(null, arguments) } var MV = (e, r) => { var a = Fa(r - e), s = Math.min(Math.abs(r - e), 359.999); return a * s }, k0 = e => { var { cx: r, cy: a, radius: s, angle: n, sign: i, isExternal: o, cornerRadius: c, cornerIsExternal: u } = e, m = c * (o ? 1 : -1) + s, g = Math.asin(c / m) / Mh, f = u ? n : n + i * g, y = ba(r, a, m, f), p = ba(r, a, s, f), b = u ? n - i * g : n, j = ba(r, a, m * Math.cos(g * Mh), b); return { center: y, circleTangency: p, lineTangency: j, theta: g } }, L5 = e => {
    var { cx: r, cy: a, innerRadius: s, outerRadius: n, startAngle: i, endAngle: o } = e, c = MV(i, o), u = i + c, m = ba(r, a, n, i), g = ba(r, a, n, u), f = "M ".concat(m.x, ",").concat(m.y, `
    A `).concat(n, ",").concat(n, `,0,
    `).concat(+(Math.abs(c) > 180), ",").concat(+(i > u), `,
    `).concat(g.x, ",").concat(g.y, `
  `); if (s > 0) {
        var y = ba(r, a, s, i), p = ba(r, a, s, u); f += "L ".concat(p.x, ",").concat(p.y, `
            A `).concat(s, ",").concat(s, `,0,
            `).concat(+(Math.abs(c) > 180), ",").concat(+(i <= u), `,
            `).concat(y.x, ",").concat(y.y, " Z")
    } else f += "L ".concat(r, ",").concat(a, " Z"); return f
}, _V = e => {
    var { cx: r, cy: a, innerRadius: s, outerRadius: n, cornerRadius: i, forceCornerRadius: o, cornerIsExternal: c, startAngle: u, endAngle: m } = e, g = Fa(m - u), { circleTangency: f, lineTangency: y, theta: p } = k0({ cx: r, cy: a, radius: n, angle: u, sign: g, cornerRadius: i, cornerIsExternal: c }), { circleTangency: b, lineTangency: j, theta: v } = k0({ cx: r, cy: a, radius: n, angle: m, sign: -g, cornerRadius: i, cornerIsExternal: c }), S = c ? Math.abs(u - m) : Math.abs(u - m) - p - v; if (S < 0) return o ? "M ".concat(y.x, ",").concat(y.y, `
        a`).concat(i, ",").concat(i, ",0,0,1,").concat(i * 2, `,0
        a`).concat(i, ",").concat(i, ",0,0,1,").concat(-i * 2, `,0
      `) : L5({ cx: r, cy: a, innerRadius: s, outerRadius: n, startAngle: u, endAngle: m }); var k = "M ".concat(y.x, ",").concat(y.y, `
    A`).concat(i, ",").concat(i, ",0,0,").concat(+(g < 0), ",").concat(f.x, ",").concat(f.y, `
    A`).concat(n, ",").concat(n, ",0,").concat(+(S > 180), ",").concat(+(g < 0), ",").concat(b.x, ",").concat(b.y, `
    A`).concat(i, ",").concat(i, ",0,0,").concat(+(g < 0), ",").concat(j.x, ",").concat(j.y, `
  `); if (s > 0) {
        var { circleTangency: E, lineTangency: C, theta: N } = k0({ cx: r, cy: a, radius: s, angle: u, sign: g, isExternal: !0, cornerRadius: i, cornerIsExternal: c }), { circleTangency: A, lineTangency: D, theta: I } = k0({ cx: r, cy: a, radius: s, angle: m, sign: -g, isExternal: !0, cornerRadius: i, cornerIsExternal: c }), $ = c ? Math.abs(u - m) : Math.abs(u - m) - N - I; if ($ < 0 && i === 0) return "".concat(k, "L").concat(r, ",").concat(a, "Z"); k += "L".concat(D.x, ",").concat(D.y, `
      A`).concat(i, ",").concat(i, ",0,0,").concat(+(g < 0), ",").concat(A.x, ",").concat(A.y, `
      A`).concat(s, ",").concat(s, ",0,").concat(+($ > 180), ",").concat(+(g > 0), ",").concat(E.x, ",").concat(E.y, `
      A`).concat(i, ",").concat(i, ",0,0,").concat(+(g < 0), ",").concat(C.x, ",").concat(C.y, "Z")
    } else k += "L".concat(r, ",").concat(a, "Z"); return k
}, $V = { cx: 0, cy: 0, innerRadius: 0, outerRadius: 0, startAngle: 0, endAngle: 0, cornerRadius: 0, forceCornerRadius: !1, cornerIsExternal: !1 }, R5 = e => { var r = sa(e, $V), { cx: a, cy: s, innerRadius: n, outerRadius: i, cornerRadius: o, forceCornerRadius: c, cornerIsExternal: u, startAngle: m, endAngle: g, className: f } = r; if (i < n || m === g) return null; var y = er("recharts-sector", f), p = i - n, b = os(o, p, 0, !0), j; return b > 0 && Math.abs(m - g) < 360 ? j = _V({ cx: a, cy: s, innerRadius: n, outerRadius: i, cornerRadius: Math.min(b, p / 2), forceCornerRadius: c, cornerIsExternal: u, startAngle: m, endAngle: g }) : j = L5({ cx: a, cy: s, innerRadius: n, outerRadius: i, startAngle: m, endAngle: g }), h.createElement("path", uw({}, ls(r), { className: y, d: j })) }; function UV(e, r, a) { if (e === "horizontal") return [{ x: r.x, y: a.top }, { x: r.x, y: a.top + a.height }]; if (e === "vertical") return [{ x: a.left, y: r.y }, { x: a.left + a.width, y: r.y }]; if (g3(r)) { if (e === "centric") { var { cx: s, cy: n, innerRadius: i, outerRadius: o, angle: c } = r, u = ba(s, n, i, c), m = ba(s, n, o, c); return [{ x: u.x, y: u.y }, { x: m.x, y: m.y }] } return I5(r) } } var Av = {}, Pv = {}, Tv = {}, mE; function FV() { return mE || (mE = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = S3(); function a(s) { return r.isSymbol(s) ? NaN : Number(s) } e.toNumber = a })(Tv)), Tv } var gE; function zV() { return gE || (gE = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = FV(); function a(s) { return s ? (s = r.toNumber(s), s === 1 / 0 || s === -1 / 0 ? (s < 0 ? -1 : 1) * Number.MAX_VALUE : s === s ? s : 0) : s === 0 ? s : 0 } e.toFinite = a })(Pv)), Pv } var hE; function BV() { return hE || (hE = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = C3(), a = zV(); function s(n, i, o) { o && typeof o != "number" && r.isIterateeCall(n, i, o) && (i = o = void 0), n = a.toFinite(n), i === void 0 ? (i = n, n = 0) : i = a.toFinite(i), o = o === void 0 ? n < i ? 1 : -1 : a.toFinite(o); const c = Math.max(Math.ceil((i - n) / (o || 1)), 0), u = new Array(c); for (let m = 0; m < c; m++)u[m] = n, n += o; return u } e.range = s })(Av)), Av } var Dv, fE; function qV() { return fE || (fE = 1, Dv = BV().range), Dv } var HV = qV(); const M5 = mi(HV); function zo(e, r) { return e == null || r == null ? NaN : e < r ? -1 : e > r ? 1 : e >= r ? 0 : NaN } function WV(e, r) { return e == null || r == null ? NaN : r < e ? -1 : r > e ? 1 : r >= e ? 0 : NaN } function Lj(e) { let r, a, s; e.length !== 2 ? (r = zo, a = (c, u) => zo(e(c), u), s = (c, u) => e(c) - u) : (r = e === zo || e === WV ? e : VV, a = e, s = e); function n(c, u, m = 0, g = c.length) { if (m < g) { if (r(u, u) !== 0) return g; do { const f = m + g >>> 1; a(c[f], u) < 0 ? m = f + 1 : g = f } while (m < g) } return m } function i(c, u, m = 0, g = c.length) { if (m < g) { if (r(u, u) !== 0) return g; do { const f = m + g >>> 1; a(c[f], u) <= 0 ? m = f + 1 : g = f } while (m < g) } return m } function o(c, u, m = 0, g = c.length) { const f = n(c, u, m, g - 1); return f > m && s(c[f - 1], u) > -s(c[f], u) ? f - 1 : f } return { left: n, center: o, right: i } } function VV() { return 0 } function _5(e) { return e === null ? NaN : +e } function* GV(e, r) { for (let a of e) a != null && (a = +a) >= a && (yield a) } const KV = Lj(zo), Um = KV.right; Lj(_5).center; class xE extends Map { constructor(r, a = XV) { if (super(), Object.defineProperties(this, { _intern: { value: new Map }, _key: { value: a } }), r != null) for (const [s, n] of r) this.set(s, n) } get(r) { return super.get(pE(this, r)) } has(r) { return super.has(pE(this, r)) } set(r, a) { return super.set(YV(this, r), a) } delete(r) { return super.delete(QV(this, r)) } } function pE({ _intern: e, _key: r }, a) { const s = r(a); return e.has(s) ? e.get(s) : a } function YV({ _intern: e, _key: r }, a) { const s = r(a); return e.has(s) ? e.get(s) : (e.set(s, a), a) } function QV({ _intern: e, _key: r }, a) { const s = r(a); return e.has(s) && (a = e.get(s), e.delete(s)), a } function XV(e) { return e !== null && typeof e == "object" ? e.valueOf() : e } function ZV(e = zo) { if (e === zo) return $5; if (typeof e != "function") throw new TypeError("compare is not a function"); return (r, a) => { const s = e(r, a); return s || s === 0 ? s : (e(a, a) === 0) - (e(r, r) === 0) } } function $5(e, r) { return (e == null || !(e >= e)) - (r == null || !(r >= r)) || (e < r ? -1 : e > r ? 1 : 0) } const JV = Math.sqrt(50), eG = Math.sqrt(10), tG = Math.sqrt(2); function _h(e, r, a) { const s = (r - e) / Math.max(0, a), n = Math.floor(Math.log10(s)), i = s / Math.pow(10, n), o = i >= JV ? 10 : i >= eG ? 5 : i >= tG ? 2 : 1; let c, u, m; return n < 0 ? (m = Math.pow(10, -n) / o, c = Math.round(e * m), u = Math.round(r * m), c / m < e && ++c, u / m > r && --u, m = -m) : (m = Math.pow(10, n) * o, c = Math.round(e / m), u = Math.round(r / m), c * m < e && ++c, u * m > r && --u), u < c && .5 <= a && a < 2 ? _h(e, r, a * 2) : [c, u, m] } function mw(e, r, a) { if (r = +r, e = +e, a = +a, !(a > 0)) return []; if (e === r) return [e]; const s = r < e, [n, i, o] = s ? _h(r, e, a) : _h(e, r, a); if (!(i >= n)) return []; const c = i - n + 1, u = new Array(c); if (s) if (o < 0) for (let m = 0; m < c; ++m)u[m] = (i - m) / -o; else for (let m = 0; m < c; ++m)u[m] = (i - m) * o; else if (o < 0) for (let m = 0; m < c; ++m)u[m] = (n + m) / -o; else for (let m = 0; m < c; ++m)u[m] = (n + m) * o; return u } function gw(e, r, a) { return r = +r, e = +e, a = +a, _h(e, r, a)[2] } function hw(e, r, a) { r = +r, e = +e, a = +a; const s = r < e, n = s ? gw(r, e, a) : gw(e, r, a); return (s ? -1 : 1) * (n < 0 ? 1 / -n : n) } function yE(e, r) { let a; for (const s of e) s != null && (a < s || a === void 0 && s >= s) && (a = s); return a } function vE(e, r) { let a; for (const s of e) s != null && (a > s || a === void 0 && s >= s) && (a = s); return a } function U5(e, r, a = 0, s = 1 / 0, n) { if (r = Math.floor(r), a = Math.floor(Math.max(0, a)), s = Math.floor(Math.min(e.length - 1, s)), !(a <= r && r <= s)) return e; for (n = n === void 0 ? $5 : ZV(n); s > a;) { if (s - a > 600) { const u = s - a + 1, m = r - a + 1, g = Math.log(u), f = .5 * Math.exp(2 * g / 3), y = .5 * Math.sqrt(g * f * (u - f) / u) * (m - u / 2 < 0 ? -1 : 1), p = Math.max(a, Math.floor(r - m * f / u + y)), b = Math.min(s, Math.floor(r + (u - m) * f / u + y)); U5(e, r, p, b, n) } const i = e[r]; let o = a, c = s; for (wu(e, a, r), n(e[s], i) > 0 && wu(e, a, s); o < c;) { for (wu(e, o, c), ++o, --c; n(e[o], i) < 0;)++o; for (; n(e[c], i) > 0;)--c } n(e[a], i) === 0 ? wu(e, a, c) : (++c, wu(e, c, s)), c <= r && (a = c + 1), r <= c && (s = c - 1) } return e } function wu(e, r, a) { const s = e[r]; e[r] = e[a], e[a] = s } function rG(e, r, a) { if (e = Float64Array.from(GV(e)), !(!(s = e.length) || isNaN(r = +r))) { if (r <= 0 || s < 2) return vE(e); if (r >= 1) return yE(e); var s, n = (s - 1) * r, i = Math.floor(n), o = yE(U5(e, i).subarray(0, i + 1)), c = vE(e.subarray(i + 1)); return o + (c - o) * (n - i) } } function aG(e, r, a = _5) { if (!(!(s = e.length) || isNaN(r = +r))) { if (r <= 0 || s < 2) return +a(e[0], 0, e); if (r >= 1) return +a(e[s - 1], s - 1, e); var s, n = (s - 1) * r, i = Math.floor(n), o = +a(e[i], i, e), c = +a(e[i + 1], i + 1, e); return o + (c - o) * (n - i) } } function sG(e, r, a) { e = +e, r = +r, a = (n = arguments.length) < 2 ? (r = e, e = 0, 1) : n < 3 ? 1 : +a; for (var s = -1, n = Math.max(0, Math.ceil((r - e) / a)) | 0, i = new Array(n); ++s < n;)i[s] = e + s * a; return i } function En(e, r) { switch (arguments.length) { case 0: break; case 1: this.range(e); break; default: this.range(r).domain(e); break }return this } function ro(e, r) { switch (arguments.length) { case 0: break; case 1: { typeof e == "function" ? this.interpolator(e) : this.range(e); break } default: { this.domain(e), typeof r == "function" ? this.interpolator(r) : this.range(r); break } }return this } const fw = Symbol("implicit"); function Rj() { var e = new xE, r = [], a = [], s = fw; function n(i) { let o = e.get(i); if (o === void 0) { if (s !== fw) return s; e.set(i, o = r.push(i) - 1) } return a[o % a.length] } return n.domain = function (i) { if (!arguments.length) return r.slice(); r = [], e = new xE; for (const o of i) e.has(o) || e.set(o, r.push(o) - 1); return n }, n.range = function (i) { return arguments.length ? (a = Array.from(i), n) : a.slice() }, n.unknown = function (i) { return arguments.length ? (s = i, n) : s }, n.copy = function () { return Rj(r, a).unknown(s) }, En.apply(n, arguments), n } function Mj() { var e = Rj().unknown(void 0), r = e.domain, a = e.range, s = 0, n = 1, i, o, c = !1, u = 0, m = 0, g = .5; delete e.unknown; function f() { var y = r().length, p = n < s, b = p ? n : s, j = p ? s : n; i = (j - b) / Math.max(1, y - u + m * 2), c && (i = Math.floor(i)), b += (j - b - i * (y - u)) * g, o = i * (1 - u), c && (b = Math.round(b), o = Math.round(o)); var v = sG(y).map(function (S) { return b + i * S }); return a(p ? v.reverse() : v) } return e.domain = function (y) { return arguments.length ? (r(y), f()) : r() }, e.range = function (y) { return arguments.length ? ([s, n] = y, s = +s, n = +n, f()) : [s, n] }, e.rangeRound = function (y) { return [s, n] = y, s = +s, n = +n, c = !0, f() }, e.bandwidth = function () { return o }, e.step = function () { return i }, e.round = function (y) { return arguments.length ? (c = !!y, f()) : c }, e.padding = function (y) { return arguments.length ? (u = Math.min(1, m = +y), f()) : u }, e.paddingInner = function (y) { return arguments.length ? (u = Math.min(1, y), f()) : u }, e.paddingOuter = function (y) { return arguments.length ? (m = +y, f()) : m }, e.align = function (y) { return arguments.length ? (g = Math.max(0, Math.min(1, y)), f()) : g }, e.copy = function () { return Mj(r(), [s, n]).round(c).paddingInner(u).paddingOuter(m).align(g) }, En.apply(f(), arguments) } function F5(e) { var r = e.copy; return e.padding = e.paddingOuter, delete e.paddingInner, delete e.paddingOuter, e.copy = function () { return F5(r()) }, e } function nG() { return F5(Mj.apply(null, arguments).paddingInner(1)) } function _j(e, r, a) { e.prototype = r.prototype = a, a.constructor = e } function z5(e, r) { var a = Object.create(e.prototype); for (var s in r) a[s] = r[s]; return a } function Fm() { } var cm = .7, $h = 1 / cm, Gc = "\\s*([+-]?\\d+)\\s*", dm = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*", ni = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*", iG = /^#([0-9a-f]{3,8})$/, oG = new RegExp(`^rgb\\(${Gc},${Gc},${Gc}\\)$`), lG = new RegExp(`^rgb\\(${ni},${ni},${ni}\\)$`), cG = new RegExp(`^rgba\\(${Gc},${Gc},${Gc},${dm}\\)$`), dG = new RegExp(`^rgba\\(${ni},${ni},${ni},${dm}\\)$`), uG = new RegExp(`^hsl\\(${dm},${ni},${ni}\\)$`), mG = new RegExp(`^hsla\\(${dm},${ni},${ni},${dm}\\)$`), bE = { aliceblue: 15792383, antiquewhite: 16444375, aqua: 65535, aquamarine: 8388564, azure: 15794175, beige: 16119260, bisque: 16770244, black: 0, blanchedalmond: 16772045, blue: 255, blueviolet: 9055202, brown: 10824234, burlywood: 14596231, cadetblue: 6266528, chartreuse: 8388352, chocolate: 13789470, coral: 16744272, cornflowerblue: 6591981, cornsilk: 16775388, crimson: 14423100, cyan: 65535, darkblue: 139, darkcyan: 35723, darkgoldenrod: 12092939, darkgray: 11119017, darkgreen: 25600, darkgrey: 11119017, darkkhaki: 12433259, darkmagenta: 9109643, darkolivegreen: 5597999, darkorange: 16747520, darkorchid: 10040012, darkred: 9109504, darksalmon: 15308410, darkseagreen: 9419919, darkslateblue: 4734347, darkslategray: 3100495, darkslategrey: 3100495, darkturquoise: 52945, darkviolet: 9699539, deeppink: 16716947, deepskyblue: 49151, dimgray: 6908265, dimgrey: 6908265, dodgerblue: 2003199, firebrick: 11674146, floralwhite: 16775920, forestgreen: 2263842, fuchsia: 16711935, gainsboro: 14474460, ghostwhite: 16316671, gold: 16766720, goldenrod: 14329120, gray: 8421504, green: 32768, greenyellow: 11403055, grey: 8421504, honeydew: 15794160, hotpink: 16738740, indianred: 13458524, indigo: 4915330, ivory: 16777200, khaki: 15787660, lavender: 15132410, lavenderblush: 16773365, lawngreen: 8190976, lemonchiffon: 16775885, lightblue: 11393254, lightcoral: 15761536, lightcyan: 14745599, lightgoldenrodyellow: 16448210, lightgray: 13882323, lightgreen: 9498256, lightgrey: 13882323, lightpink: 16758465, lightsalmon: 16752762, lightseagreen: 2142890, lightskyblue: 8900346, lightslategray: 7833753, lightslategrey: 7833753, lightsteelblue: 11584734, lightyellow: 16777184, lime: 65280, limegreen: 3329330, linen: 16445670, magenta: 16711935, maroon: 8388608, mediumaquamarine: 6737322, mediumblue: 205, mediumorchid: 12211667, mediumpurple: 9662683, mediumseagreen: 3978097, mediumslateblue: 8087790, mediumspringgreen: 64154, mediumturquoise: 4772300, mediumvioletred: 13047173, midnightblue: 1644912, mintcream: 16121850, mistyrose: 16770273, moccasin: 16770229, navajowhite: 16768685, navy: 128, oldlace: 16643558, olive: 8421376, olivedrab: 7048739, orange: 16753920, orangered: 16729344, orchid: 14315734, palegoldenrod: 15657130, palegreen: 10025880, paleturquoise: 11529966, palevioletred: 14381203, papayawhip: 16773077, peachpuff: 16767673, peru: 13468991, pink: 16761035, plum: 14524637, powderblue: 11591910, purple: 8388736, rebeccapurple: 6697881, red: 16711680, rosybrown: 12357519, royalblue: 4286945, saddlebrown: 9127187, salmon: 16416882, sandybrown: 16032864, seagreen: 3050327, seashell: 16774638, sienna: 10506797, silver: 12632256, skyblue: 8900331, slateblue: 6970061, slategray: 7372944, slategrey: 7372944, snow: 16775930, springgreen: 65407, steelblue: 4620980, tan: 13808780, teal: 32896, thistle: 14204888, tomato: 16737095, turquoise: 4251856, violet: 15631086, wheat: 16113331, white: 16777215, whitesmoke: 16119285, yellow: 16776960, yellowgreen: 10145074 }; _j(Fm, um, { copy(e) { return Object.assign(new this.constructor, this, e) }, displayable() { return this.rgb().displayable() }, hex: wE, formatHex: wE, formatHex8: gG, formatHsl: hG, formatRgb: jE, toString: jE }); function wE() { return this.rgb().formatHex() } function gG() { return this.rgb().formatHex8() } function hG() { return B5(this).formatHsl() } function jE() { return this.rgb().formatRgb() } function um(e) { var r, a; return e = (e + "").trim().toLowerCase(), (r = iG.exec(e)) ? (a = r[1].length, r = parseInt(r[1], 16), a === 6 ? NE(r) : a === 3 ? new Is(r >> 8 & 15 | r >> 4 & 240, r >> 4 & 15 | r & 240, (r & 15) << 4 | r & 15, 1) : a === 8 ? S0(r >> 24 & 255, r >> 16 & 255, r >> 8 & 255, (r & 255) / 255) : a === 4 ? S0(r >> 12 & 15 | r >> 8 & 240, r >> 8 & 15 | r >> 4 & 240, r >> 4 & 15 | r & 240, ((r & 15) << 4 | r & 15) / 255) : null) : (r = oG.exec(e)) ? new Is(r[1], r[2], r[3], 1) : (r = lG.exec(e)) ? new Is(r[1] * 255 / 100, r[2] * 255 / 100, r[3] * 255 / 100, 1) : (r = cG.exec(e)) ? S0(r[1], r[2], r[3], r[4]) : (r = dG.exec(e)) ? S0(r[1] * 255 / 100, r[2] * 255 / 100, r[3] * 255 / 100, r[4]) : (r = uG.exec(e)) ? CE(r[1], r[2] / 100, r[3] / 100, 1) : (r = mG.exec(e)) ? CE(r[1], r[2] / 100, r[3] / 100, r[4]) : bE.hasOwnProperty(e) ? NE(bE[e]) : e === "transparent" ? new Is(NaN, NaN, NaN, 0) : null } function NE(e) { return new Is(e >> 16 & 255, e >> 8 & 255, e & 255, 1) } function S0(e, r, a, s) { return s <= 0 && (e = r = a = NaN), new Is(e, r, a, s) } function fG(e) { return e instanceof Fm || (e = um(e)), e ? (e = e.rgb(), new Is(e.r, e.g, e.b, e.opacity)) : new Is } function xw(e, r, a, s) { return arguments.length === 1 ? fG(e) : new Is(e, r, a, s ?? 1) } function Is(e, r, a, s) { this.r = +e, this.g = +r, this.b = +a, this.opacity = +s } _j(Is, xw, z5(Fm, { brighter(e) { return e = e == null ? $h : Math.pow($h, e), new Is(this.r * e, this.g * e, this.b * e, this.opacity) }, darker(e) { return e = e == null ? cm : Math.pow(cm, e), new Is(this.r * e, this.g * e, this.b * e, this.opacity) }, rgb() { return this }, clamp() { return new Is(_l(this.r), _l(this.g), _l(this.b), Uh(this.opacity)) }, displayable() { return -.5 <= this.r && this.r < 255.5 && -.5 <= this.g && this.g < 255.5 && -.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1 }, hex: kE, formatHex: kE, formatHex8: xG, formatRgb: SE, toString: SE })); function kE() { return `#${Cl(this.r)}${Cl(this.g)}${Cl(this.b)}` } function xG() { return `#${Cl(this.r)}${Cl(this.g)}${Cl(this.b)}${Cl((isNaN(this.opacity) ? 1 : this.opacity) * 255)}` } function SE() { const e = Uh(this.opacity); return `${e === 1 ? "rgb(" : "rgba("}${_l(this.r)}, ${_l(this.g)}, ${_l(this.b)}${e === 1 ? ")" : `, ${e})`}` } function Uh(e) { return isNaN(e) ? 1 : Math.max(0, Math.min(1, e)) } function _l(e) { return Math.max(0, Math.min(255, Math.round(e) || 0)) } function Cl(e) { return e = _l(e), (e < 16 ? "0" : "") + e.toString(16) } function CE(e, r, a, s) { return s <= 0 ? e = r = a = NaN : a <= 0 || a >= 1 ? e = r = NaN : r <= 0 && (e = NaN), new $n(e, r, a, s) } function B5(e) { if (e instanceof $n) return new $n(e.h, e.s, e.l, e.opacity); if (e instanceof Fm || (e = um(e)), !e) return new $n; if (e instanceof $n) return e; e = e.rgb(); var r = e.r / 255, a = e.g / 255, s = e.b / 255, n = Math.min(r, a, s), i = Math.max(r, a, s), o = NaN, c = i - n, u = (i + n) / 2; return c ? (r === i ? o = (a - s) / c + (a < s) * 6 : a === i ? o = (s - r) / c + 2 : o = (r - a) / c + 4, c /= u < .5 ? i + n : 2 - i - n, o *= 60) : c = u > 0 && u < 1 ? 0 : o, new $n(o, c, u, e.opacity) } function pG(e, r, a, s) { return arguments.length === 1 ? B5(e) : new $n(e, r, a, s ?? 1) } function $n(e, r, a, s) { this.h = +e, this.s = +r, this.l = +a, this.opacity = +s } _j($n, pG, z5(Fm, { brighter(e) { return e = e == null ? $h : Math.pow($h, e), new $n(this.h, this.s, this.l * e, this.opacity) }, darker(e) { return e = e == null ? cm : Math.pow(cm, e), new $n(this.h, this.s, this.l * e, this.opacity) }, rgb() { var e = this.h % 360 + (this.h < 0) * 360, r = isNaN(e) || isNaN(this.s) ? 0 : this.s, a = this.l, s = a + (a < .5 ? a : 1 - a) * r, n = 2 * a - s; return new Is(Ov(e >= 240 ? e - 240 : e + 120, n, s), Ov(e, n, s), Ov(e < 120 ? e + 240 : e - 120, n, s), this.opacity) }, clamp() { return new $n(EE(this.h), C0(this.s), C0(this.l), Uh(this.opacity)) }, displayable() { return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1 }, formatHsl() { const e = Uh(this.opacity); return `${e === 1 ? "hsl(" : "hsla("}${EE(this.h)}, ${C0(this.s) * 100}%, ${C0(this.l) * 100}%${e === 1 ? ")" : `, ${e})`}` } })); function EE(e) { return e = (e || 0) % 360, e < 0 ? e + 360 : e } function C0(e) { return Math.max(0, Math.min(1, e || 0)) } function Ov(e, r, a) { return (e < 60 ? r + (a - r) * e / 60 : e < 180 ? a : e < 240 ? r + (a - r) * (240 - e) / 60 : r) * 255 } const $j = e => () => e; function yG(e, r) { return function (a) { return e + a * r } } function vG(e, r, a) { return e = Math.pow(e, a), r = Math.pow(r, a) - e, a = 1 / a, function (s) { return Math.pow(e + s * r, a) } } function bG(e) { return (e = +e) == 1 ? q5 : function (r, a) { return a - r ? vG(r, a, e) : $j(isNaN(r) ? a : r) } } function q5(e, r) { var a = r - e; return a ? yG(e, a) : $j(isNaN(e) ? r : e) } const AE = (function e(r) { var a = bG(r); function s(n, i) { var o = a((n = xw(n)).r, (i = xw(i)).r), c = a(n.g, i.g), u = a(n.b, i.b), m = q5(n.opacity, i.opacity); return function (g) { return n.r = o(g), n.g = c(g), n.b = u(g), n.opacity = m(g), n + "" } } return s.gamma = e, s })(1); function wG(e, r) { r || (r = []); var a = e ? Math.min(r.length, e.length) : 0, s = r.slice(), n; return function (i) { for (n = 0; n < a; ++n)s[n] = e[n] * (1 - i) + r[n] * i; return s } } function jG(e) { return ArrayBuffer.isView(e) && !(e instanceof DataView) } function NG(e, r) { var a = r ? r.length : 0, s = e ? Math.min(a, e.length) : 0, n = new Array(s), i = new Array(a), o; for (o = 0; o < s; ++o)n[o] = bd(e[o], r[o]); for (; o < a; ++o)i[o] = r[o]; return function (c) { for (o = 0; o < s; ++o)i[o] = n[o](c); return i } } function kG(e, r) { var a = new Date; return e = +e, r = +r, function (s) { return a.setTime(e * (1 - s) + r * s), a } } function Fh(e, r) { return e = +e, r = +r, function (a) { return e * (1 - a) + r * a } } function SG(e, r) { var a = {}, s = {}, n; (e === null || typeof e != "object") && (e = {}), (r === null || typeof r != "object") && (r = {}); for (n in r) n in e ? a[n] = bd(e[n], r[n]) : s[n] = r[n]; return function (i) { for (n in a) s[n] = a[n](i); return s } } var pw = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, Iv = new RegExp(pw.source, "g"); function CG(e) { return function () { return e } } function EG(e) { return function (r) { return e(r) + "" } } function AG(e, r) { var a = pw.lastIndex = Iv.lastIndex = 0, s, n, i, o = -1, c = [], u = []; for (e = e + "", r = r + ""; (s = pw.exec(e)) && (n = Iv.exec(r));)(i = n.index) > a && (i = r.slice(a, i), c[o] ? c[o] += i : c[++o] = i), (s = s[0]) === (n = n[0]) ? c[o] ? c[o] += n : c[++o] = n : (c[++o] = null, u.push({ i: o, x: Fh(s, n) })), a = Iv.lastIndex; return a < r.length && (i = r.slice(a), c[o] ? c[o] += i : c[++o] = i), c.length < 2 ? u[0] ? EG(u[0].x) : CG(r) : (r = u.length, function (m) { for (var g = 0, f; g < r; ++g)c[(f = u[g]).i] = f.x(m); return c.join("") }) } function bd(e, r) { var a = typeof r, s; return r == null || a === "boolean" ? $j(r) : (a === "number" ? Fh : a === "string" ? (s = um(r)) ? (r = s, AE) : AG : r instanceof um ? AE : r instanceof Date ? kG : jG(r) ? wG : Array.isArray(r) ? NG : typeof r.valueOf != "function" && typeof r.toString != "function" || isNaN(r) ? SG : Fh)(e, r) } function Uj(e, r) { return e = +e, r = +r, function (a) { return Math.round(e * (1 - a) + r * a) } } function PG(e, r) { r === void 0 && (r = e, e = bd); for (var a = 0, s = r.length - 1, n = r[0], i = new Array(s < 0 ? 0 : s); a < s;)i[a] = e(n, n = r[++a]); return function (o) { var c = Math.max(0, Math.min(s - 1, Math.floor(o *= s))); return i[c](o - c) } } function TG(e) { return function () { return e } } function zh(e) { return +e } var PE = [0, 1]; function hs(e) { return e } function yw(e, r) { return (r -= e = +e) ? function (a) { return (a - e) / r } : TG(isNaN(r) ? NaN : .5) } function DG(e, r) { var a; return e > r && (a = e, e = r, r = a), function (s) { return Math.max(e, Math.min(r, s)) } } function OG(e, r, a) { var s = e[0], n = e[1], i = r[0], o = r[1]; return n < s ? (s = yw(n, s), i = a(o, i)) : (s = yw(s, n), i = a(i, o)), function (c) { return i(s(c)) } } function IG(e, r, a) { var s = Math.min(e.length, r.length) - 1, n = new Array(s), i = new Array(s), o = -1; for (e[s] < e[0] && (e = e.slice().reverse(), r = r.slice().reverse()); ++o < s;)n[o] = yw(e[o], e[o + 1]), i[o] = a(r[o], r[o + 1]); return function (c) { var u = Um(e, c, 1, s) - 1; return i[u](n[u](c)) } } function zm(e, r) { return r.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown()) } function Vf() { var e = PE, r = PE, a = bd, s, n, i, o = hs, c, u, m; function g() { var y = Math.min(e.length, r.length); return o !== hs && (o = DG(e[0], e[y - 1])), c = y > 2 ? IG : OG, u = m = null, f } function f(y) { return y == null || isNaN(y = +y) ? i : (u || (u = c(e.map(s), r, a)))(s(o(y))) } return f.invert = function (y) { return o(n((m || (m = c(r, e.map(s), Fh)))(y))) }, f.domain = function (y) { return arguments.length ? (e = Array.from(y, zh), g()) : e.slice() }, f.range = function (y) { return arguments.length ? (r = Array.from(y), g()) : r.slice() }, f.rangeRound = function (y) { return r = Array.from(y), a = Uj, g() }, f.clamp = function (y) { return arguments.length ? (o = y ? !0 : hs, g()) : o !== hs }, f.interpolate = function (y) { return arguments.length ? (a = y, g()) : a }, f.unknown = function (y) { return arguments.length ? (i = y, f) : i }, function (y, p) { return s = y, n = p, g() } } function Fj() { return Vf()(hs, hs) } function LG(e) { return Math.abs(e = Math.round(e)) >= 1e21 ? e.toLocaleString("en").replace(/,/g, "") : e.toString(10) } function Bh(e, r) { if ((a = (e = r ? e.toExponential(r - 1) : e.toExponential()).indexOf("e")) < 0) return null; var a, s = e.slice(0, a); return [s.length > 1 ? s[0] + s.slice(2) : s, +e.slice(a + 1)] } function sd(e) { return e = Bh(Math.abs(e)), e ? e[1] : NaN } function RG(e, r) { return function (a, s) { for (var n = a.length, i = [], o = 0, c = e[0], u = 0; n > 0 && c > 0 && (u + c + 1 > s && (c = Math.max(1, s - u)), i.push(a.substring(n -= c, n + c)), !((u += c + 1) > s));)c = e[o = (o + 1) % e.length]; return i.reverse().join(r) } } function MG(e) { return function (r) { return r.replace(/[0-9]/g, function (a) { return e[+a] }) } } var _G = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i; function mm(e) { if (!(r = _G.exec(e))) throw new Error("invalid format: " + e); var r; return new zj({ fill: r[1], align: r[2], sign: r[3], symbol: r[4], zero: r[5], width: r[6], comma: r[7], precision: r[8] && r[8].slice(1), trim: r[9], type: r[10] }) } mm.prototype = zj.prototype; function zj(e) { this.fill = e.fill === void 0 ? " " : e.fill + "", this.align = e.align === void 0 ? ">" : e.align + "", this.sign = e.sign === void 0 ? "-" : e.sign + "", this.symbol = e.symbol === void 0 ? "" : e.symbol + "", this.zero = !!e.zero, this.width = e.width === void 0 ? void 0 : +e.width, this.comma = !!e.comma, this.precision = e.precision === void 0 ? void 0 : +e.precision, this.trim = !!e.trim, this.type = e.type === void 0 ? "" : e.type + "" } zj.prototype.toString = function () { return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (this.width === void 0 ? "" : Math.max(1, this.width | 0)) + (this.comma ? "," : "") + (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) + (this.trim ? "~" : "") + this.type }; function $G(e) { e: for (var r = e.length, a = 1, s = -1, n; a < r; ++a)switch (e[a]) { case ".": s = n = a; break; case "0": s === 0 && (s = a), n = a; break; default: if (!+e[a]) break e; s > 0 && (s = 0); break }return s > 0 ? e.slice(0, s) + e.slice(n + 1) : e } var H5; function UG(e, r) { var a = Bh(e, r); if (!a) return e + ""; var s = a[0], n = a[1], i = n - (H5 = Math.max(-8, Math.min(8, Math.floor(n / 3))) * 3) + 1, o = s.length; return i === o ? s : i > o ? s + new Array(i - o + 1).join("0") : i > 0 ? s.slice(0, i) + "." + s.slice(i) : "0." + new Array(1 - i).join("0") + Bh(e, Math.max(0, r + i - 1))[0] } function TE(e, r) { var a = Bh(e, r); if (!a) return e + ""; var s = a[0], n = a[1]; return n < 0 ? "0." + new Array(-n).join("0") + s : s.length > n + 1 ? s.slice(0, n + 1) + "." + s.slice(n + 1) : s + new Array(n - s.length + 2).join("0") } const DE = { "%": (e, r) => (e * 100).toFixed(r), b: e => Math.round(e).toString(2), c: e => e + "", d: LG, e: (e, r) => e.toExponential(r), f: (e, r) => e.toFixed(r), g: (e, r) => e.toPrecision(r), o: e => Math.round(e).toString(8), p: (e, r) => TE(e * 100, r), r: TE, s: UG, X: e => Math.round(e).toString(16).toUpperCase(), x: e => Math.round(e).toString(16) }; function OE(e) { return e } var IE = Array.prototype.map, LE = ["y", "z", "a", "f", "p", "n", "", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"]; function FG(e) { var r = e.grouping === void 0 || e.thousands === void 0 ? OE : RG(IE.call(e.grouping, Number), e.thousands + ""), a = e.currency === void 0 ? "" : e.currency[0] + "", s = e.currency === void 0 ? "" : e.currency[1] + "", n = e.decimal === void 0 ? "." : e.decimal + "", i = e.numerals === void 0 ? OE : MG(IE.call(e.numerals, String)), o = e.percent === void 0 ? "%" : e.percent + "", c = e.minus === void 0 ? "" : e.minus + "", u = e.nan === void 0 ? "NaN" : e.nan + ""; function m(f) { f = mm(f); var y = f.fill, p = f.align, b = f.sign, j = f.symbol, v = f.zero, S = f.width, k = f.comma, E = f.precision, C = f.trim, N = f.type; N === "n" ? (k = !0, N = "g") : DE[N] || (E === void 0 && (E = 12), C = !0, N = "g"), (v || y === "0" && p === "=") && (v = !0, y = "0", p = "="); var A = j === "$" ? a : j === "#" && /[boxX]/.test(N) ? "0" + N.toLowerCase() : "", D = j === "$" ? s : /[%p]/.test(N) ? o : "", I = DE[N], $ = /[defgprs%]/.test(N); E = E === void 0 ? 6 : /[gprs]/.test(N) ? Math.max(1, Math.min(21, E)) : Math.max(0, Math.min(20, E)); function B(W) { var M = A, q = D, V, X, se; if (N === "c") q = I(W) + q, W = ""; else { W = +W; var le = W < 0 || 1 / W < 0; if (W = isNaN(W) ? u : I(Math.abs(W), E), C && (W = $G(W)), le && +W == 0 && b !== "+" && (le = !1), M = (le ? b === "(" ? b : c : b === "-" || b === "(" ? "" : b) + M, q = (N === "s" ? LE[8 + H5 / 3] : "") + q + (le && b === "(" ? ")" : ""), $) { for (V = -1, X = W.length; ++V < X;)if (se = W.charCodeAt(V), 48 > se || se > 57) { q = (se === 46 ? n + W.slice(V + 1) : W.slice(V)) + q, W = W.slice(0, V); break } } } k && !v && (W = r(W, 1 / 0)); var ee = M.length + W.length + q.length, L = ee < S ? new Array(S - ee + 1).join(y) : ""; switch (k && v && (W = r(L + W, L.length ? S - q.length : 1 / 0), L = ""), p) { case "<": W = M + W + q + L; break; case "=": W = M + L + W + q; break; case "^": W = L.slice(0, ee = L.length >> 1) + M + W + q + L.slice(ee); break; default: W = L + M + W + q; break }return i(W) } return B.toString = function () { return f + "" }, B } function g(f, y) { var p = m((f = mm(f), f.type = "f", f)), b = Math.max(-8, Math.min(8, Math.floor(sd(y) / 3))) * 3, j = Math.pow(10, -b), v = LE[8 + b / 3]; return function (S) { return p(j * S) + v } } return { format: m, formatPrefix: g } } var E0, Bj, W5; zG({ thousands: ",", grouping: [3], currency: ["$", ""] }); function zG(e) { return E0 = FG(e), Bj = E0.format, W5 = E0.formatPrefix, E0 } function BG(e) { return Math.max(0, -sd(Math.abs(e))) } function qG(e, r) { return Math.max(0, Math.max(-8, Math.min(8, Math.floor(sd(r) / 3))) * 3 - sd(Math.abs(e))) } function HG(e, r) { return e = Math.abs(e), r = Math.abs(r) - e, Math.max(0, sd(r) - sd(e)) + 1 } function V5(e, r, a, s) { var n = hw(e, r, a), i; switch (s = mm(s ?? ",f"), s.type) { case "s": { var o = Math.max(Math.abs(e), Math.abs(r)); return s.precision == null && !isNaN(i = qG(n, o)) && (s.precision = i), W5(s, o) } case "": case "e": case "g": case "p": case "r": { s.precision == null && !isNaN(i = HG(n, Math.max(Math.abs(e), Math.abs(r)))) && (s.precision = i - (s.type === "e")); break } case "f": case "%": { s.precision == null && !isNaN(i = BG(n)) && (s.precision = i - (s.type === "%") * 2); break } }return Bj(s) } function Zo(e) { var r = e.domain; return e.ticks = function (a) { var s = r(); return mw(s[0], s[s.length - 1], a ?? 10) }, e.tickFormat = function (a, s) { var n = r(); return V5(n[0], n[n.length - 1], a ?? 10, s) }, e.nice = function (a) { a == null && (a = 10); var s = r(), n = 0, i = s.length - 1, o = s[n], c = s[i], u, m, g = 10; for (c < o && (m = o, o = c, c = m, m = n, n = i, i = m); g-- > 0;) { if (m = gw(o, c, a), m === u) return s[n] = o, s[i] = c, r(s); if (m > 0) o = Math.floor(o / m) * m, c = Math.ceil(c / m) * m; else if (m < 0) o = Math.ceil(o * m) / m, c = Math.floor(c * m) / m; else break; u = m } return e }, e } function G5() { var e = Fj(); return e.copy = function () { return zm(e, G5()) }, En.apply(e, arguments), Zo(e) } function K5(e) { var r; function a(s) { return s == null || isNaN(s = +s) ? r : s } return a.invert = a, a.domain = a.range = function (s) { return arguments.length ? (e = Array.from(s, zh), a) : e.slice() }, a.unknown = function (s) { return arguments.length ? (r = s, a) : r }, a.copy = function () { return K5(e).unknown(r) }, e = arguments.length ? Array.from(e, zh) : [0, 1], Zo(a) } function Y5(e, r) { e = e.slice(); var a = 0, s = e.length - 1, n = e[a], i = e[s], o; return i < n && (o = a, a = s, s = o, o = n, n = i, i = o), e[a] = r.floor(n), e[s] = r.ceil(i), e } function RE(e) { return Math.log(e) } function ME(e) { return Math.exp(e) } function WG(e) { return -Math.log(-e) } function VG(e) { return -Math.exp(-e) } function GG(e) { return isFinite(e) ? +("1e" + e) : e < 0 ? 0 : e } function KG(e) { return e === 10 ? GG : e === Math.E ? Math.exp : r => Math.pow(e, r) } function YG(e) { return e === Math.E ? Math.log : e === 10 && Math.log10 || e === 2 && Math.log2 || (e = Math.log(e), r => Math.log(r) / e) } function _E(e) { return (r, a) => -e(-r, a) } function qj(e) { const r = e(RE, ME), a = r.domain; let s = 10, n, i; function o() { return n = YG(s), i = KG(s), a()[0] < 0 ? (n = _E(n), i = _E(i), e(WG, VG)) : e(RE, ME), r } return r.base = function (c) { return arguments.length ? (s = +c, o()) : s }, r.domain = function (c) { return arguments.length ? (a(c), o()) : a() }, r.ticks = c => { const u = a(); let m = u[0], g = u[u.length - 1]; const f = g < m; f && ([m, g] = [g, m]); let y = n(m), p = n(g), b, j; const v = c == null ? 10 : +c; let S = []; if (!(s % 1) && p - y < v) { if (y = Math.floor(y), p = Math.ceil(p), m > 0) { for (; y <= p; ++y)for (b = 1; b < s; ++b)if (j = y < 0 ? b / i(-y) : b * i(y), !(j < m)) { if (j > g) break; S.push(j) } } else for (; y <= p; ++y)for (b = s - 1; b >= 1; --b)if (j = y > 0 ? b / i(-y) : b * i(y), !(j < m)) { if (j > g) break; S.push(j) } S.length * 2 < v && (S = mw(m, g, v)) } else S = mw(y, p, Math.min(p - y, v)).map(i); return f ? S.reverse() : S }, r.tickFormat = (c, u) => { if (c == null && (c = 10), u == null && (u = s === 10 ? "s" : ","), typeof u != "function" && (!(s % 1) && (u = mm(u)).precision == null && (u.trim = !0), u = Bj(u)), c === 1 / 0) return u; const m = Math.max(1, s * c / r.ticks().length); return g => { let f = g / i(Math.round(n(g))); return f * s < s - .5 && (f *= s), f <= m ? u(g) : "" } }, r.nice = () => a(Y5(a(), { floor: c => i(Math.floor(n(c))), ceil: c => i(Math.ceil(n(c))) })), r } function Q5() { const e = qj(Vf()).domain([1, 10]); return e.copy = () => zm(e, Q5()).base(e.base()), En.apply(e, arguments), e } function $E(e) { return function (r) { return Math.sign(r) * Math.log1p(Math.abs(r / e)) } } function UE(e) { return function (r) { return Math.sign(r) * Math.expm1(Math.abs(r)) * e } } function Hj(e) { var r = 1, a = e($E(r), UE(r)); return a.constant = function (s) { return arguments.length ? e($E(r = +s), UE(r)) : r }, Zo(a) } function X5() { var e = Hj(Vf()); return e.copy = function () { return zm(e, X5()).constant(e.constant()) }, En.apply(e, arguments) } function FE(e) { return function (r) { return r < 0 ? -Math.pow(-r, e) : Math.pow(r, e) } } function QG(e) { return e < 0 ? -Math.sqrt(-e) : Math.sqrt(e) } function XG(e) { return e < 0 ? -e * e : e * e } function Wj(e) { var r = e(hs, hs), a = 1; function s() { return a === 1 ? e(hs, hs) : a === .5 ? e(QG, XG) : e(FE(a), FE(1 / a)) } return r.exponent = function (n) { return arguments.length ? (a = +n, s()) : a }, Zo(r) } function Vj() { var e = Wj(Vf()); return e.copy = function () { return zm(e, Vj()).exponent(e.exponent()) }, En.apply(e, arguments), e } function ZG() { return Vj.apply(null, arguments).exponent(.5) } function zE(e) { return Math.sign(e) * e * e } function JG(e) { return Math.sign(e) * Math.sqrt(Math.abs(e)) } function Z5() { var e = Fj(), r = [0, 1], a = !1, s; function n(i) { var o = JG(e(i)); return isNaN(o) ? s : a ? Math.round(o) : o } return n.invert = function (i) { return e.invert(zE(i)) }, n.domain = function (i) { return arguments.length ? (e.domain(i), n) : e.domain() }, n.range = function (i) { return arguments.length ? (e.range((r = Array.from(i, zh)).map(zE)), n) : r.slice() }, n.rangeRound = function (i) { return n.range(i).round(!0) }, n.round = function (i) { return arguments.length ? (a = !!i, n) : a }, n.clamp = function (i) { return arguments.length ? (e.clamp(i), n) : e.clamp() }, n.unknown = function (i) { return arguments.length ? (s = i, n) : s }, n.copy = function () { return Z5(e.domain(), r).round(a).clamp(e.clamp()).unknown(s) }, En.apply(n, arguments), Zo(n) } function J5() { var e = [], r = [], a = [], s; function n() { var o = 0, c = Math.max(1, r.length); for (a = new Array(c - 1); ++o < c;)a[o - 1] = aG(e, o / c); return i } function i(o) { return o == null || isNaN(o = +o) ? s : r[Um(a, o)] } return i.invertExtent = function (o) { var c = r.indexOf(o); return c < 0 ? [NaN, NaN] : [c > 0 ? a[c - 1] : e[0], c < a.length ? a[c] : e[e.length - 1]] }, i.domain = function (o) { if (!arguments.length) return e.slice(); e = []; for (let c of o) c != null && !isNaN(c = +c) && e.push(c); return e.sort(zo), n() }, i.range = function (o) { return arguments.length ? (r = Array.from(o), n()) : r.slice() }, i.unknown = function (o) { return arguments.length ? (s = o, i) : s }, i.quantiles = function () { return a.slice() }, i.copy = function () { return J5().domain(e).range(r).unknown(s) }, En.apply(i, arguments) } function eO() { var e = 0, r = 1, a = 1, s = [.5], n = [0, 1], i; function o(u) { return u != null && u <= u ? n[Um(s, u, 0, a)] : i } function c() { var u = -1; for (s = new Array(a); ++u < a;)s[u] = ((u + 1) * r - (u - a) * e) / (a + 1); return o } return o.domain = function (u) { return arguments.length ? ([e, r] = u, e = +e, r = +r, c()) : [e, r] }, o.range = function (u) { return arguments.length ? (a = (n = Array.from(u)).length - 1, c()) : n.slice() }, o.invertExtent = function (u) { var m = n.indexOf(u); return m < 0 ? [NaN, NaN] : m < 1 ? [e, s[0]] : m >= a ? [s[a - 1], r] : [s[m - 1], s[m]] }, o.unknown = function (u) { return arguments.length && (i = u), o }, o.thresholds = function () { return s.slice() }, o.copy = function () { return eO().domain([e, r]).range(n).unknown(i) }, En.apply(Zo(o), arguments) } function tO() { var e = [.5], r = [0, 1], a, s = 1; function n(i) { return i != null && i <= i ? r[Um(e, i, 0, s)] : a } return n.domain = function (i) { return arguments.length ? (e = Array.from(i), s = Math.min(e.length, r.length - 1), n) : e.slice() }, n.range = function (i) { return arguments.length ? (r = Array.from(i), s = Math.min(e.length, r.length - 1), n) : r.slice() }, n.invertExtent = function (i) { var o = r.indexOf(i); return [e[o - 1], e[o]] }, n.unknown = function (i) { return arguments.length ? (a = i, n) : a }, n.copy = function () { return tO().domain(e).range(r).unknown(a) }, En.apply(n, arguments) } const Lv = new Date, Rv = new Date; function Pa(e, r, a, s) { function n(i) { return e(i = arguments.length === 0 ? new Date : new Date(+i)), i } return n.floor = i => (e(i = new Date(+i)), i), n.ceil = i => (e(i = new Date(i - 1)), r(i, 1), e(i), i), n.round = i => { const o = n(i), c = n.ceil(i); return i - o < c - i ? o : c }, n.offset = (i, o) => (r(i = new Date(+i), o == null ? 1 : Math.floor(o)), i), n.range = (i, o, c) => { const u = []; if (i = n.ceil(i), c = c == null ? 1 : Math.floor(c), !(i < o) || !(c > 0)) return u; let m; do u.push(m = new Date(+i)), r(i, c), e(i); while (m < i && i < o); return u }, n.filter = i => Pa(o => { if (o >= o) for (; e(o), !i(o);)o.setTime(o - 1) }, (o, c) => { if (o >= o) if (c < 0) for (; ++c <= 0;)for (; r(o, -1), !i(o);); else for (; --c >= 0;)for (; r(o, 1), !i(o);); }), a && (n.count = (i, o) => (Lv.setTime(+i), Rv.setTime(+o), e(Lv), e(Rv), Math.floor(a(Lv, Rv))), n.every = i => (i = Math.floor(i), !isFinite(i) || !(i > 0) ? null : i > 1 ? n.filter(s ? o => s(o) % i === 0 : o => n.count(0, o) % i === 0) : n)), n } const qh = Pa(() => { }, (e, r) => { e.setTime(+e + r) }, (e, r) => r - e); qh.every = e => (e = Math.floor(e), !isFinite(e) || !(e > 0) ? null : e > 1 ? Pa(r => { r.setTime(Math.floor(r / e) * e) }, (r, a) => { r.setTime(+r + a * e) }, (r, a) => (a - r) / e) : qh); qh.range; const Ri = 1e3, vn = Ri * 60, Mi = vn * 60, Gi = Mi * 24, Gj = Gi * 7, BE = Gi * 30, Mv = Gi * 365, El = Pa(e => { e.setTime(e - e.getMilliseconds()) }, (e, r) => { e.setTime(+e + r * Ri) }, (e, r) => (r - e) / Ri, e => e.getUTCSeconds()); El.range; const Kj = Pa(e => { e.setTime(e - e.getMilliseconds() - e.getSeconds() * Ri) }, (e, r) => { e.setTime(+e + r * vn) }, (e, r) => (r - e) / vn, e => e.getMinutes()); Kj.range; const Yj = Pa(e => { e.setUTCSeconds(0, 0) }, (e, r) => { e.setTime(+e + r * vn) }, (e, r) => (r - e) / vn, e => e.getUTCMinutes()); Yj.range; const Qj = Pa(e => { e.setTime(e - e.getMilliseconds() - e.getSeconds() * Ri - e.getMinutes() * vn) }, (e, r) => { e.setTime(+e + r * Mi) }, (e, r) => (r - e) / Mi, e => e.getHours()); Qj.range; const Xj = Pa(e => { e.setUTCMinutes(0, 0, 0) }, (e, r) => { e.setTime(+e + r * Mi) }, (e, r) => (r - e) / Mi, e => e.getUTCHours()); Xj.range; const Bm = Pa(e => e.setHours(0, 0, 0, 0), (e, r) => e.setDate(e.getDate() + r), (e, r) => (r - e - (r.getTimezoneOffset() - e.getTimezoneOffset()) * vn) / Gi, e => e.getDate() - 1); Bm.range; const Gf = Pa(e => { e.setUTCHours(0, 0, 0, 0) }, (e, r) => { e.setUTCDate(e.getUTCDate() + r) }, (e, r) => (r - e) / Gi, e => e.getUTCDate() - 1); Gf.range; const rO = Pa(e => { e.setUTCHours(0, 0, 0, 0) }, (e, r) => { e.setUTCDate(e.getUTCDate() + r) }, (e, r) => (r - e) / Gi, e => Math.floor(e / Gi)); rO.range; function tc(e) { return Pa(r => { r.setDate(r.getDate() - (r.getDay() + 7 - e) % 7), r.setHours(0, 0, 0, 0) }, (r, a) => { r.setDate(r.getDate() + a * 7) }, (r, a) => (a - r - (a.getTimezoneOffset() - r.getTimezoneOffset()) * vn) / Gj) } const Kf = tc(0), Hh = tc(1), eK = tc(2), tK = tc(3), nd = tc(4), rK = tc(5), aK = tc(6); Kf.range; Hh.range; eK.range; tK.range; nd.range; rK.range; aK.range; function rc(e) { return Pa(r => { r.setUTCDate(r.getUTCDate() - (r.getUTCDay() + 7 - e) % 7), r.setUTCHours(0, 0, 0, 0) }, (r, a) => { r.setUTCDate(r.getUTCDate() + a * 7) }, (r, a) => (a - r) / Gj) } const Yf = rc(0), Wh = rc(1), sK = rc(2), nK = rc(3), id = rc(4), iK = rc(5), oK = rc(6); Yf.range; Wh.range; sK.range; nK.range; id.range; iK.range; oK.range; const Zj = Pa(e => { e.setDate(1), e.setHours(0, 0, 0, 0) }, (e, r) => { e.setMonth(e.getMonth() + r) }, (e, r) => r.getMonth() - e.getMonth() + (r.getFullYear() - e.getFullYear()) * 12, e => e.getMonth()); Zj.range; const Jj = Pa(e => { e.setUTCDate(1), e.setUTCHours(0, 0, 0, 0) }, (e, r) => { e.setUTCMonth(e.getUTCMonth() + r) }, (e, r) => r.getUTCMonth() - e.getUTCMonth() + (r.getUTCFullYear() - e.getUTCFullYear()) * 12, e => e.getUTCMonth()); Jj.range; const Ki = Pa(e => { e.setMonth(0, 1), e.setHours(0, 0, 0, 0) }, (e, r) => { e.setFullYear(e.getFullYear() + r) }, (e, r) => r.getFullYear() - e.getFullYear(), e => e.getFullYear()); Ki.every = e => !isFinite(e = Math.floor(e)) || !(e > 0) ? null : Pa(r => { r.setFullYear(Math.floor(r.getFullYear() / e) * e), r.setMonth(0, 1), r.setHours(0, 0, 0, 0) }, (r, a) => { r.setFullYear(r.getFullYear() + a * e) }); Ki.range; const Yi = Pa(e => { e.setUTCMonth(0, 1), e.setUTCHours(0, 0, 0, 0) }, (e, r) => { e.setUTCFullYear(e.getUTCFullYear() + r) }, (e, r) => r.getUTCFullYear() - e.getUTCFullYear(), e => e.getUTCFullYear()); Yi.every = e => !isFinite(e = Math.floor(e)) || !(e > 0) ? null : Pa(r => { r.setUTCFullYear(Math.floor(r.getUTCFullYear() / e) * e), r.setUTCMonth(0, 1), r.setUTCHours(0, 0, 0, 0) }, (r, a) => { r.setUTCFullYear(r.getUTCFullYear() + a * e) }); Yi.range; function aO(e, r, a, s, n, i) { const o = [[El, 1, Ri], [El, 5, 5 * Ri], [El, 15, 15 * Ri], [El, 30, 30 * Ri], [i, 1, vn], [i, 5, 5 * vn], [i, 15, 15 * vn], [i, 30, 30 * vn], [n, 1, Mi], [n, 3, 3 * Mi], [n, 6, 6 * Mi], [n, 12, 12 * Mi], [s, 1, Gi], [s, 2, 2 * Gi], [a, 1, Gj], [r, 1, BE], [r, 3, 3 * BE], [e, 1, Mv]]; function c(m, g, f) { const y = g < m; y && ([m, g] = [g, m]); const p = f && typeof f.range == "function" ? f : u(m, g, f), b = p ? p.range(m, +g + 1) : []; return y ? b.reverse() : b } function u(m, g, f) { const y = Math.abs(g - m) / f, p = Lj(([, , v]) => v).right(o, y); if (p === o.length) return e.every(hw(m / Mv, g / Mv, f)); if (p === 0) return qh.every(Math.max(hw(m, g, f), 1)); const [b, j] = o[y / o[p - 1][2] < o[p][2] / y ? p - 1 : p]; return b.every(j) } return [c, u] } const [lK, cK] = aO(Yi, Jj, Yf, rO, Xj, Yj), [dK, uK] = aO(Ki, Zj, Kf, Bm, Qj, Kj); function _v(e) { if (0 <= e.y && e.y < 100) { var r = new Date(-1, e.m, e.d, e.H, e.M, e.S, e.L); return r.setFullYear(e.y), r } return new Date(e.y, e.m, e.d, e.H, e.M, e.S, e.L) } function $v(e) { if (0 <= e.y && e.y < 100) { var r = new Date(Date.UTC(-1, e.m, e.d, e.H, e.M, e.S, e.L)); return r.setUTCFullYear(e.y), r } return new Date(Date.UTC(e.y, e.m, e.d, e.H, e.M, e.S, e.L)) } function ju(e, r, a) { return { y: e, m: r, d: a, H: 0, M: 0, S: 0, L: 0 } } function mK(e) { var r = e.dateTime, a = e.date, s = e.time, n = e.periods, i = e.days, o = e.shortDays, c = e.months, u = e.shortMonths, m = Nu(n), g = ku(n), f = Nu(i), y = ku(i), p = Nu(o), b = ku(o), j = Nu(c), v = ku(c), S = Nu(u), k = ku(u), E = { a: le, A: ee, b: L, B: z, c: null, d: KE, e: KE, f: RK, g: WK, G: GK, H: OK, I: IK, j: LK, L: sO, m: MK, M: _K, p: T, q: _, Q: XE, s: ZE, S: $K, u: UK, U: FK, V: zK, w: BK, W: qK, x: null, X: null, y: HK, Y: VK, Z: KK, "%": QE }, C = { a: H, A: U, b: K, B: Z, c: null, d: YE, e: YE, f: ZK, g: lY, G: dY, H: YK, I: QK, j: XK, L: iO, m: JK, M: eY, p: J, q: te, Q: XE, s: ZE, S: tY, u: rY, U: aY, V: sY, w: nY, W: iY, x: null, X: null, y: oY, Y: cY, Z: uY, "%": QE }, N = { a: B, A: W, b: M, B: q, c: V, d: VE, e: VE, f: AK, g: WE, G: HE, H: GE, I: GE, j: kK, L: EK, m: NK, M: SK, p: $, q: jK, Q: TK, s: DK, S: CK, u: pK, U: yK, V: vK, w: xK, W: bK, x: X, X: se, y: WE, Y: HE, Z: wK, "%": PK }; E.x = A(a, E), E.X = A(s, E), E.c = A(r, E), C.x = A(a, C), C.X = A(s, C), C.c = A(r, C); function A(G, de) { return function (Te) { var pe = [], He = -1, ne = 0, De = G.length, $e, Et, Bt; for (Te instanceof Date || (Te = new Date(+Te)); ++He < De;)G.charCodeAt(He) === 37 && (pe.push(G.slice(ne, He)), (Et = qE[$e = G.charAt(++He)]) != null ? $e = G.charAt(++He) : Et = $e === "e" ? " " : "0", (Bt = de[$e]) && ($e = Bt(Te, Et)), pe.push($e), ne = He + 1); return pe.push(G.slice(ne, He)), pe.join("") } } function D(G, de) { return function (Te) { var pe = ju(1900, void 0, 1), He = I(pe, G, Te += "", 0), ne, De; if (He != Te.length) return null; if ("Q" in pe) return new Date(pe.Q); if ("s" in pe) return new Date(pe.s * 1e3 + ("L" in pe ? pe.L : 0)); if (de && !("Z" in pe) && (pe.Z = 0), "p" in pe && (pe.H = pe.H % 12 + pe.p * 12), pe.m === void 0 && (pe.m = "q" in pe ? pe.q : 0), "V" in pe) { if (pe.V < 1 || pe.V > 53) return null; "w" in pe || (pe.w = 1), "Z" in pe ? (ne = $v(ju(pe.y, 0, 1)), De = ne.getUTCDay(), ne = De > 4 || De === 0 ? Wh.ceil(ne) : Wh(ne), ne = Gf.offset(ne, (pe.V - 1) * 7), pe.y = ne.getUTCFullYear(), pe.m = ne.getUTCMonth(), pe.d = ne.getUTCDate() + (pe.w + 6) % 7) : (ne = _v(ju(pe.y, 0, 1)), De = ne.getDay(), ne = De > 4 || De === 0 ? Hh.ceil(ne) : Hh(ne), ne = Bm.offset(ne, (pe.V - 1) * 7), pe.y = ne.getFullYear(), pe.m = ne.getMonth(), pe.d = ne.getDate() + (pe.w + 6) % 7) } else ("W" in pe || "U" in pe) && ("w" in pe || (pe.w = "u" in pe ? pe.u % 7 : "W" in pe ? 1 : 0), De = "Z" in pe ? $v(ju(pe.y, 0, 1)).getUTCDay() : _v(ju(pe.y, 0, 1)).getDay(), pe.m = 0, pe.d = "W" in pe ? (pe.w + 6) % 7 + pe.W * 7 - (De + 5) % 7 : pe.w + pe.U * 7 - (De + 6) % 7); return "Z" in pe ? (pe.H += pe.Z / 100 | 0, pe.M += pe.Z % 100, $v(pe)) : _v(pe) } } function I(G, de, Te, pe) { for (var He = 0, ne = de.length, De = Te.length, $e, Et; He < ne;) { if (pe >= De) return -1; if ($e = de.charCodeAt(He++), $e === 37) { if ($e = de.charAt(He++), Et = N[$e in qE ? de.charAt(He++) : $e], !Et || (pe = Et(G, Te, pe)) < 0) return -1 } else if ($e != Te.charCodeAt(pe++)) return -1 } return pe } function $(G, de, Te) { var pe = m.exec(de.slice(Te)); return pe ? (G.p = g.get(pe[0].toLowerCase()), Te + pe[0].length) : -1 } function B(G, de, Te) { var pe = p.exec(de.slice(Te)); return pe ? (G.w = b.get(pe[0].toLowerCase()), Te + pe[0].length) : -1 } function W(G, de, Te) { var pe = f.exec(de.slice(Te)); return pe ? (G.w = y.get(pe[0].toLowerCase()), Te + pe[0].length) : -1 } function M(G, de, Te) { var pe = S.exec(de.slice(Te)); return pe ? (G.m = k.get(pe[0].toLowerCase()), Te + pe[0].length) : -1 } function q(G, de, Te) { var pe = j.exec(de.slice(Te)); return pe ? (G.m = v.get(pe[0].toLowerCase()), Te + pe[0].length) : -1 } function V(G, de, Te) { return I(G, r, de, Te) } function X(G, de, Te) { return I(G, a, de, Te) } function se(G, de, Te) { return I(G, s, de, Te) } function le(G) { return o[G.getDay()] } function ee(G) { return i[G.getDay()] } function L(G) { return u[G.getMonth()] } function z(G) { return c[G.getMonth()] } function T(G) { return n[+(G.getHours() >= 12)] } function _(G) { return 1 + ~~(G.getMonth() / 3) } function H(G) { return o[G.getUTCDay()] } function U(G) { return i[G.getUTCDay()] } function K(G) { return u[G.getUTCMonth()] } function Z(G) { return c[G.getUTCMonth()] } function J(G) { return n[+(G.getUTCHours() >= 12)] } function te(G) { return 1 + ~~(G.getUTCMonth() / 3) } return { format: function (G) { var de = A(G += "", E); return de.toString = function () { return G }, de }, parse: function (G) { var de = D(G += "", !1); return de.toString = function () { return G }, de }, utcFormat: function (G) { var de = A(G += "", C); return de.toString = function () { return G }, de }, utcParse: function (G) { var de = D(G += "", !0); return de.toString = function () { return G }, de } } } var qE = { "-": "", _: " ", 0: "0" }, Wa = /^\s*\d+/, gK = /^%/, hK = /[\\^$*+?|[\]().{}]/g; function ar(e, r, a) { var s = e < 0 ? "-" : "", n = (s ? -e : e) + "", i = n.length; return s + (i < a ? new Array(a - i + 1).join(r) + n : n) } function fK(e) { return e.replace(hK, "\\$&") } function Nu(e) { return new RegExp("^(?:" + e.map(fK).join("|") + ")", "i") } function ku(e) { return new Map(e.map((r, a) => [r.toLowerCase(), a])) } function xK(e, r, a) { var s = Wa.exec(r.slice(a, a + 1)); return s ? (e.w = +s[0], a + s[0].length) : -1 } function pK(e, r, a) { var s = Wa.exec(r.slice(a, a + 1)); return s ? (e.u = +s[0], a + s[0].length) : -1 } function yK(e, r, a) { var s = Wa.exec(r.slice(a, a + 2)); return s ? (e.U = +s[0], a + s[0].length) : -1 } function vK(e, r, a) { var s = Wa.exec(r.slice(a, a + 2)); return s ? (e.V = +s[0], a + s[0].length) : -1 } function bK(e, r, a) { var s = Wa.exec(r.slice(a, a + 2)); return s ? (e.W = +s[0], a + s[0].length) : -1 } function HE(e, r, a) { var s = Wa.exec(r.slice(a, a + 4)); return s ? (e.y = +s[0], a + s[0].length) : -1 } function WE(e, r, a) { var s = Wa.exec(r.slice(a, a + 2)); return s ? (e.y = +s[0] + (+s[0] > 68 ? 1900 : 2e3), a + s[0].length) : -1 } function wK(e, r, a) { var s = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(a, a + 6)); return s ? (e.Z = s[1] ? 0 : -(s[2] + (s[3] || "00")), a + s[0].length) : -1 } function jK(e, r, a) { var s = Wa.exec(r.slice(a, a + 1)); return s ? (e.q = s[0] * 3 - 3, a + s[0].length) : -1 } function NK(e, r, a) { var s = Wa.exec(r.slice(a, a + 2)); return s ? (e.m = s[0] - 1, a + s[0].length) : -1 } function VE(e, r, a) { var s = Wa.exec(r.slice(a, a + 2)); return s ? (e.d = +s[0], a + s[0].length) : -1 } function kK(e, r, a) { var s = Wa.exec(r.slice(a, a + 3)); return s ? (e.m = 0, e.d = +s[0], a + s[0].length) : -1 } function GE(e, r, a) { var s = Wa.exec(r.slice(a, a + 2)); return s ? (e.H = +s[0], a + s[0].length) : -1 } function SK(e, r, a) { var s = Wa.exec(r.slice(a, a + 2)); return s ? (e.M = +s[0], a + s[0].length) : -1 } function CK(e, r, a) { var s = Wa.exec(r.slice(a, a + 2)); return s ? (e.S = +s[0], a + s[0].length) : -1 } function EK(e, r, a) { var s = Wa.exec(r.slice(a, a + 3)); return s ? (e.L = +s[0], a + s[0].length) : -1 } function AK(e, r, a) { var s = Wa.exec(r.slice(a, a + 6)); return s ? (e.L = Math.floor(s[0] / 1e3), a + s[0].length) : -1 } function PK(e, r, a) { var s = gK.exec(r.slice(a, a + 1)); return s ? a + s[0].length : -1 } function TK(e, r, a) { var s = Wa.exec(r.slice(a)); return s ? (e.Q = +s[0], a + s[0].length) : -1 } function DK(e, r, a) { var s = Wa.exec(r.slice(a)); return s ? (e.s = +s[0], a + s[0].length) : -1 } function KE(e, r) { return ar(e.getDate(), r, 2) } function OK(e, r) { return ar(e.getHours(), r, 2) } function IK(e, r) { return ar(e.getHours() % 12 || 12, r, 2) } function LK(e, r) { return ar(1 + Bm.count(Ki(e), e), r, 3) } function sO(e, r) { return ar(e.getMilliseconds(), r, 3) } function RK(e, r) { return sO(e, r) + "000" } function MK(e, r) { return ar(e.getMonth() + 1, r, 2) } function _K(e, r) { return ar(e.getMinutes(), r, 2) } function $K(e, r) { return ar(e.getSeconds(), r, 2) } function UK(e) { var r = e.getDay(); return r === 0 ? 7 : r } function FK(e, r) { return ar(Kf.count(Ki(e) - 1, e), r, 2) } function nO(e) { var r = e.getDay(); return r >= 4 || r === 0 ? nd(e) : nd.ceil(e) } function zK(e, r) { return e = nO(e), ar(nd.count(Ki(e), e) + (Ki(e).getDay() === 4), r, 2) } function BK(e) { return e.getDay() } function qK(e, r) { return ar(Hh.count(Ki(e) - 1, e), r, 2) } function HK(e, r) { return ar(e.getFullYear() % 100, r, 2) } function WK(e, r) { return e = nO(e), ar(e.getFullYear() % 100, r, 2) } function VK(e, r) { return ar(e.getFullYear() % 1e4, r, 4) } function GK(e, r) { var a = e.getDay(); return e = a >= 4 || a === 0 ? nd(e) : nd.ceil(e), ar(e.getFullYear() % 1e4, r, 4) } function KK(e) { var r = e.getTimezoneOffset(); return (r > 0 ? "-" : (r *= -1, "+")) + ar(r / 60 | 0, "0", 2) + ar(r % 60, "0", 2) } function YE(e, r) { return ar(e.getUTCDate(), r, 2) } function YK(e, r) { return ar(e.getUTCHours(), r, 2) } function QK(e, r) { return ar(e.getUTCHours() % 12 || 12, r, 2) } function XK(e, r) { return ar(1 + Gf.count(Yi(e), e), r, 3) } function iO(e, r) { return ar(e.getUTCMilliseconds(), r, 3) } function ZK(e, r) { return iO(e, r) + "000" } function JK(e, r) { return ar(e.getUTCMonth() + 1, r, 2) } function eY(e, r) { return ar(e.getUTCMinutes(), r, 2) } function tY(e, r) { return ar(e.getUTCSeconds(), r, 2) } function rY(e) { var r = e.getUTCDay(); return r === 0 ? 7 : r } function aY(e, r) { return ar(Yf.count(Yi(e) - 1, e), r, 2) } function oO(e) { var r = e.getUTCDay(); return r >= 4 || r === 0 ? id(e) : id.ceil(e) } function sY(e, r) { return e = oO(e), ar(id.count(Yi(e), e) + (Yi(e).getUTCDay() === 4), r, 2) } function nY(e) { return e.getUTCDay() } function iY(e, r) { return ar(Wh.count(Yi(e) - 1, e), r, 2) } function oY(e, r) { return ar(e.getUTCFullYear() % 100, r, 2) } function lY(e, r) { return e = oO(e), ar(e.getUTCFullYear() % 100, r, 2) } function cY(e, r) { return ar(e.getUTCFullYear() % 1e4, r, 4) } function dY(e, r) { var a = e.getUTCDay(); return e = a >= 4 || a === 0 ? id(e) : id.ceil(e), ar(e.getUTCFullYear() % 1e4, r, 4) } function uY() { return "+0000" } function QE() { return "%" } function XE(e) { return +e } function ZE(e) { return Math.floor(+e / 1e3) } var Ec, lO, cO; mY({ dateTime: "%x, %X", date: "%-m/%-d/%Y", time: "%-I:%M:%S %p", periods: ["AM", "PM"], days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"] }); function mY(e) { return Ec = mK(e), lO = Ec.format, Ec.parse, cO = Ec.utcFormat, Ec.utcParse, Ec } function gY(e) { return new Date(e) } function hY(e) { return e instanceof Date ? +e : +new Date(+e) } function eN(e, r, a, s, n, i, o, c, u, m) { var g = Fj(), f = g.invert, y = g.domain, p = m(".%L"), b = m(":%S"), j = m("%I:%M"), v = m("%I %p"), S = m("%a %d"), k = m("%b %d"), E = m("%B"), C = m("%Y"); function N(A) { return (u(A) < A ? p : c(A) < A ? b : o(A) < A ? j : i(A) < A ? v : s(A) < A ? n(A) < A ? S : k : a(A) < A ? E : C)(A) } return g.invert = function (A) { return new Date(f(A)) }, g.domain = function (A) { return arguments.length ? y(Array.from(A, hY)) : y().map(gY) }, g.ticks = function (A) { var D = y(); return e(D[0], D[D.length - 1], A ?? 10) }, g.tickFormat = function (A, D) { return D == null ? N : m(D) }, g.nice = function (A) { var D = y(); return (!A || typeof A.range != "function") && (A = r(D[0], D[D.length - 1], A ?? 10)), A ? y(Y5(D, A)) : g }, g.copy = function () { return zm(g, eN(e, r, a, s, n, i, o, c, u, m)) }, g } function fY() { return En.apply(eN(dK, uK, Ki, Zj, Kf, Bm, Qj, Kj, El, lO).domain([new Date(2e3, 0, 1), new Date(2e3, 0, 2)]), arguments) } function xY() { return En.apply(eN(lK, cK, Yi, Jj, Yf, Gf, Xj, Yj, El, cO).domain([Date.UTC(2e3, 0, 1), Date.UTC(2e3, 0, 2)]), arguments) } function Qf() { var e = 0, r = 1, a, s, n, i, o = hs, c = !1, u; function m(f) { return f == null || isNaN(f = +f) ? u : o(n === 0 ? .5 : (f = (i(f) - a) * n, c ? Math.max(0, Math.min(1, f)) : f)) } m.domain = function (f) { return arguments.length ? ([e, r] = f, a = i(e = +e), s = i(r = +r), n = a === s ? 0 : 1 / (s - a), m) : [e, r] }, m.clamp = function (f) { return arguments.length ? (c = !!f, m) : c }, m.interpolator = function (f) { return arguments.length ? (o = f, m) : o }; function g(f) { return function (y) { var p, b; return arguments.length ? ([p, b] = y, o = f(p, b), m) : [o(0), o(1)] } } return m.range = g(bd), m.rangeRound = g(Uj), m.unknown = function (f) { return arguments.length ? (u = f, m) : u }, function (f) { return i = f, a = f(e), s = f(r), n = a === s ? 0 : 1 / (s - a), m } } function Jo(e, r) { return r.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown()) } function dO() { var e = Zo(Qf()(hs)); return e.copy = function () { return Jo(e, dO()) }, ro.apply(e, arguments) } function uO() { var e = qj(Qf()).domain([1, 10]); return e.copy = function () { return Jo(e, uO()).base(e.base()) }, ro.apply(e, arguments) } function mO() { var e = Hj(Qf()); return e.copy = function () { return Jo(e, mO()).constant(e.constant()) }, ro.apply(e, arguments) } function tN() { var e = Wj(Qf()); return e.copy = function () { return Jo(e, tN()).exponent(e.exponent()) }, ro.apply(e, arguments) } function pY() { return tN.apply(null, arguments).exponent(.5) } function gO() { var e = [], r = hs; function a(s) { if (s != null && !isNaN(s = +s)) return r((Um(e, s, 1) - 1) / (e.length - 1)) } return a.domain = function (s) { if (!arguments.length) return e.slice(); e = []; for (let n of s) n != null && !isNaN(n = +n) && e.push(n); return e.sort(zo), a }, a.interpolator = function (s) { return arguments.length ? (r = s, a) : r }, a.range = function () { return e.map((s, n) => r(n / (e.length - 1))) }, a.quantiles = function (s) { return Array.from({ length: s + 1 }, (n, i) => rG(e, i / s)) }, a.copy = function () { return gO(r).domain(e) }, ro.apply(a, arguments) } function Xf() { var e = 0, r = .5, a = 1, s = 1, n, i, o, c, u, m = hs, g, f = !1, y; function p(j) { return isNaN(j = +j) ? y : (j = .5 + ((j = +g(j)) - i) * (s * j < s * i ? c : u), m(f ? Math.max(0, Math.min(1, j)) : j)) } p.domain = function (j) { return arguments.length ? ([e, r, a] = j, n = g(e = +e), i = g(r = +r), o = g(a = +a), c = n === i ? 0 : .5 / (i - n), u = i === o ? 0 : .5 / (o - i), s = i < n ? -1 : 1, p) : [e, r, a] }, p.clamp = function (j) { return arguments.length ? (f = !!j, p) : f }, p.interpolator = function (j) { return arguments.length ? (m = j, p) : m }; function b(j) { return function (v) { var S, k, E; return arguments.length ? ([S, k, E] = v, m = PG(j, [S, k, E]), p) : [m(0), m(.5), m(1)] } } return p.range = b(bd), p.rangeRound = b(Uj), p.unknown = function (j) { return arguments.length ? (y = j, p) : y }, function (j) { return g = j, n = j(e), i = j(r), o = j(a), c = n === i ? 0 : .5 / (i - n), u = i === o ? 0 : .5 / (o - i), s = i < n ? -1 : 1, p } } function hO() { var e = Zo(Xf()(hs)); return e.copy = function () { return Jo(e, hO()) }, ro.apply(e, arguments) } function fO() { var e = qj(Xf()).domain([.1, 1, 10]); return e.copy = function () { return Jo(e, fO()).base(e.base()) }, ro.apply(e, arguments) } function xO() { var e = Hj(Xf()); return e.copy = function () { return Jo(e, xO()).constant(e.constant()) }, ro.apply(e, arguments) } function rN() { var e = Wj(Xf()); return e.copy = function () { return Jo(e, rN()).exponent(e.exponent()) }, ro.apply(e, arguments) } function yY() { return rN.apply(null, arguments).exponent(.5) } const Lu = Object.freeze(Object.defineProperty({ __proto__: null, scaleBand: Mj, scaleDiverging: hO, scaleDivergingLog: fO, scaleDivergingPow: rN, scaleDivergingSqrt: yY, scaleDivergingSymlog: xO, scaleIdentity: K5, scaleImplicit: fw, scaleLinear: G5, scaleLog: Q5, scaleOrdinal: Rj, scalePoint: nG, scalePow: Vj, scaleQuantile: J5, scaleQuantize: eO, scaleRadial: Z5, scaleSequential: dO, scaleSequentialLog: uO, scaleSequentialPow: tN, scaleSequentialQuantile: gO, scaleSequentialSqrt: pY, scaleSequentialSymlog: mO, scaleSqrt: ZG, scaleSymlog: X5, scaleThreshold: tO, scaleTime: fY, scaleUtc: xY, tickFormat: V5 }, Symbol.toStringTag, { value: "Module" })); var el = e => e.chartData, aN = be([el], e => { var r = e.chartData != null ? e.chartData.length - 1 : 0; return { chartData: e.chartData, computedData: e.computedData, dataEndIndex: r, dataStartIndex: 0 } }), qm = (e, r, a, s) => s ? aN(e) : el(e); function Wo(e) { if (Array.isArray(e) && e.length === 2) { var [r, a] = e; if (Rr(r) && Rr(a)) return !0 } return !1 } function JE(e, r, a) { return a ? e : [Math.min(e[0], r[0]), Math.max(e[1], r[1])] } function pO(e, r) { if (r && typeof e != "function" && Array.isArray(e) && e.length === 2) { var [a, s] = e, n, i; if (Rr(a)) n = a; else if (typeof a == "function") return; if (Rr(s)) i = s; else if (typeof s == "function") return; var o = [n, i]; if (Wo(o)) return o } } function vY(e, r, a) { if (!(!a && r == null)) { if (typeof e == "function" && r != null) try { var s = e(r, a); if (Wo(s)) return JE(s, r, a) } catch { } if (Array.isArray(e) && e.length === 2) { var [n, i] = e, o, c; if (n === "auto") r != null && (o = Math.min(...r)); else if (rt(n)) o = n; else if (typeof n == "function") try { r != null && (o = n(r?.[0])) } catch { } else if (typeof n == "string" && E4.test(n)) { var u = E4.exec(n); if (u == null || r == null) o = void 0; else { var m = +u[1]; o = r[0] - m } } else o = r?.[0]; if (i === "auto") r != null && (c = Math.max(...r)); else if (rt(i)) c = i; else if (typeof i == "function") try { r != null && (c = i(r?.[1])) } catch { } else if (typeof i == "string" && A4.test(i)) { var g = A4.exec(i); if (g == null || r == null) c = void 0; else { var f = +g[1]; c = r[1] + f } } else c = r?.[1]; var y = [o, c]; if (Wo(y)) return r == null ? y : JE(y, r, a) } } } var wd = 1e9, bY = { precision: 20, rounding: 4, toExpNeg: -7, toExpPos: 21, LN10: "2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286" }, nN, zr = !0, Nn = "[DecimalError] ", $l = Nn + "Invalid argument: ", sN = Nn + "Exponent out of range: ", jd = Math.floor, Nl = Math.pow, wY = /^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i, Ys, _a = 1e7, Ir = 7, yO = 9007199254740991, Vh = jd(yO / Ir), ct = {}; ct.absoluteValue = ct.abs = function () { var e = new this.constructor(this); return e.s && (e.s = 1), e }; ct.comparedTo = ct.cmp = function (e) { var r, a, s, n, i = this; if (e = new i.constructor(e), i.s !== e.s) return i.s || -e.s; if (i.e !== e.e) return i.e > e.e ^ i.s < 0 ? 1 : -1; for (s = i.d.length, n = e.d.length, r = 0, a = s < n ? s : n; r < a; ++r)if (i.d[r] !== e.d[r]) return i.d[r] > e.d[r] ^ i.s < 0 ? 1 : -1; return s === n ? 0 : s > n ^ i.s < 0 ? 1 : -1 }; ct.decimalPlaces = ct.dp = function () { var e = this, r = e.d.length - 1, a = (r - e.e) * Ir; if (r = e.d[r], r) for (; r % 10 == 0; r /= 10)a--; return a < 0 ? 0 : a }; ct.dividedBy = ct.div = function (e) { return Fi(this, new this.constructor(e)) }; ct.dividedToIntegerBy = ct.idiv = function (e) { var r = this, a = r.constructor; return Nr(Fi(r, new a(e), 0, 1), a.precision) }; ct.equals = ct.eq = function (e) { return !this.cmp(e) }; ct.exponent = function () { return wa(this) }; ct.greaterThan = ct.gt = function (e) { return this.cmp(e) > 0 }; ct.greaterThanOrEqualTo = ct.gte = function (e) { return this.cmp(e) >= 0 }; ct.isInteger = ct.isint = function () { return this.e > this.d.length - 2 }; ct.isNegative = ct.isneg = function () { return this.s < 0 }; ct.isPositive = ct.ispos = function () { return this.s > 0 }; ct.isZero = function () { return this.s === 0 }; ct.lessThan = ct.lt = function (e) { return this.cmp(e) < 0 }; ct.lessThanOrEqualTo = ct.lte = function (e) { return this.cmp(e) < 1 }; ct.logarithm = ct.log = function (e) { var r, a = this, s = a.constructor, n = s.precision, i = n + 5; if (e === void 0) e = new s(10); else if (e = new s(e), e.s < 1 || e.eq(Ys)) throw Error(Nn + "NaN"); if (a.s < 1) throw Error(Nn + (a.s ? "NaN" : "-Infinity")); return a.eq(Ys) ? new s(0) : (zr = !1, r = Fi(gm(a, i), gm(e, i), i), zr = !0, Nr(r, n)) }; ct.minus = ct.sub = function (e) { var r = this; return e = new r.constructor(e), r.s == e.s ? wO(r, e) : vO(r, (e.s = -e.s, e)) }; ct.modulo = ct.mod = function (e) { var r, a = this, s = a.constructor, n = s.precision; if (e = new s(e), !e.s) throw Error(Nn + "NaN"); return a.s ? (zr = !1, r = Fi(a, e, 0, 1).times(e), zr = !0, a.minus(r)) : Nr(new s(a), n) }; ct.naturalExponential = ct.exp = function () { return bO(this) }; ct.naturalLogarithm = ct.ln = function () { return gm(this) }; ct.negated = ct.neg = function () { var e = new this.constructor(this); return e.s = -e.s || 0, e }; ct.plus = ct.add = function (e) { var r = this; return e = new r.constructor(e), r.s == e.s ? vO(r, e) : wO(r, (e.s = -e.s, e)) }; ct.precision = ct.sd = function (e) { var r, a, s, n = this; if (e !== void 0 && e !== !!e && e !== 1 && e !== 0) throw Error($l + e); if (r = wa(n) + 1, s = n.d.length - 1, a = s * Ir + 1, s = n.d[s], s) { for (; s % 10 == 0; s /= 10)a--; for (s = n.d[0]; s >= 10; s /= 10)a++ } return e && r > a ? r : a }; ct.squareRoot = ct.sqrt = function () { var e, r, a, s, n, i, o, c = this, u = c.constructor; if (c.s < 1) { if (!c.s) return new u(0); throw Error(Nn + "NaN") } for (e = wa(c), zr = !1, n = Math.sqrt(+c), n == 0 || n == 1 / 0 ? (r = ri(c.d), (r.length + e) % 2 == 0 && (r += "0"), n = Math.sqrt(r), e = jd((e + 1) / 2) - (e < 0 || e % 2), n == 1 / 0 ? r = "5e" + e : (r = n.toExponential(), r = r.slice(0, r.indexOf("e") + 1) + e), s = new u(r)) : s = new u(n.toString()), a = u.precision, n = o = a + 3; ;)if (i = s, s = i.plus(Fi(c, i, o + 2)).times(.5), ri(i.d).slice(0, o) === (r = ri(s.d)).slice(0, o)) { if (r = r.slice(o - 3, o + 1), n == o && r == "4999") { if (Nr(i, a + 1, 0), i.times(i).eq(c)) { s = i; break } } else if (r != "9999") break; o += 4 } return zr = !0, Nr(s, a) }; ct.times = ct.mul = function (e) { var r, a, s, n, i, o, c, u, m, g = this, f = g.constructor, y = g.d, p = (e = new f(e)).d; if (!g.s || !e.s) return new f(0); for (e.s *= g.s, a = g.e + e.e, u = y.length, m = p.length, u < m && (i = y, y = p, p = i, o = u, u = m, m = o), i = [], o = u + m, s = o; s--;)i.push(0); for (s = m; --s >= 0;) { for (r = 0, n = u + s; n > s;)c = i[n] + p[s] * y[n - s - 1] + r, i[n--] = c % _a | 0, r = c / _a | 0; i[n] = (i[n] + r) % _a | 0 } for (; !i[--o];)i.pop(); return r ? ++a : i.shift(), e.d = i, e.e = a, zr ? Nr(e, f.precision) : e }; ct.toDecimalPlaces = ct.todp = function (e, r) { var a = this, s = a.constructor; return a = new s(a), e === void 0 ? a : (ci(e, 0, wd), r === void 0 ? r = s.rounding : ci(r, 0, 8), Nr(a, e + wa(a) + 1, r)) }; ct.toExponential = function (e, r) { var a, s = this, n = s.constructor; return e === void 0 ? a = Yl(s, !0) : (ci(e, 0, wd), r === void 0 ? r = n.rounding : ci(r, 0, 8), s = Nr(new n(s), e + 1, r), a = Yl(s, !0, e + 1)), a }; ct.toFixed = function (e, r) { var a, s, n = this, i = n.constructor; return e === void 0 ? Yl(n) : (ci(e, 0, wd), r === void 0 ? r = i.rounding : ci(r, 0, 8), s = Nr(new i(n), e + wa(n) + 1, r), a = Yl(s.abs(), !1, e + wa(s) + 1), n.isneg() && !n.isZero() ? "-" + a : a) }; ct.toInteger = ct.toint = function () { var e = this, r = e.constructor; return Nr(new r(e), wa(e) + 1, r.rounding) }; ct.toNumber = function () { return +this }; ct.toPower = ct.pow = function (e) { var r, a, s, n, i, o, c = this, u = c.constructor, m = 12, g = +(e = new u(e)); if (!e.s) return new u(Ys); if (c = new u(c), !c.s) { if (e.s < 1) throw Error(Nn + "Infinity"); return c } if (c.eq(Ys)) return c; if (s = u.precision, e.eq(Ys)) return Nr(c, s); if (r = e.e, a = e.d.length - 1, o = r >= a, i = c.s, o) { if ((a = g < 0 ? -g : g) <= yO) { for (n = new u(Ys), r = Math.ceil(s / Ir + 4), zr = !1; a % 2 && (n = n.times(c), tA(n.d, r)), a = jd(a / 2), a !== 0;)c = c.times(c), tA(c.d, r); return zr = !0, e.s < 0 ? new u(Ys).div(n) : Nr(n, s) } } else if (i < 0) throw Error(Nn + "NaN"); return i = i < 0 && e.d[Math.max(r, a)] & 1 ? -1 : 1, c.s = 1, zr = !1, n = e.times(gm(c, s + m)), zr = !0, n = bO(n), n.s = i, n }; ct.toPrecision = function (e, r) { var a, s, n = this, i = n.constructor; return e === void 0 ? (a = wa(n), s = Yl(n, a <= i.toExpNeg || a >= i.toExpPos)) : (ci(e, 1, wd), r === void 0 ? r = i.rounding : ci(r, 0, 8), n = Nr(new i(n), e, r), a = wa(n), s = Yl(n, e <= a || a <= i.toExpNeg, e)), s }; ct.toSignificantDigits = ct.tosd = function (e, r) { var a = this, s = a.constructor; return e === void 0 ? (e = s.precision, r = s.rounding) : (ci(e, 1, wd), r === void 0 ? r = s.rounding : ci(r, 0, 8)), Nr(new s(a), e, r) }; ct.toString = ct.valueOf = ct.val = ct.toJSON = ct[Symbol.for("nodejs.util.inspect.custom")] = function () { var e = this, r = wa(e), a = e.constructor; return Yl(e, r <= a.toExpNeg || r >= a.toExpPos) }; function vO(e, r) { var a, s, n, i, o, c, u, m, g = e.constructor, f = g.precision; if (!e.s || !r.s) return r.s || (r = new g(e)), zr ? Nr(r, f) : r; if (u = e.d, m = r.d, o = e.e, n = r.e, u = u.slice(), i = o - n, i) { for (i < 0 ? (s = u, i = -i, c = m.length) : (s = m, n = o, c = u.length), o = Math.ceil(f / Ir), c = o > c ? o + 1 : c + 1, i > c && (i = c, s.length = 1), s.reverse(); i--;)s.push(0); s.reverse() } for (c = u.length, i = m.length, c - i < 0 && (i = c, s = m, m = u, u = s), a = 0; i;)a = (u[--i] = u[i] + m[i] + a) / _a | 0, u[i] %= _a; for (a && (u.unshift(a), ++n), c = u.length; u[--c] == 0;)u.pop(); return r.d = u, r.e = n, zr ? Nr(r, f) : r } function ci(e, r, a) { if (e !== ~~e || e < r || e > a) throw Error($l + e) } function ri(e) { var r, a, s, n = e.length - 1, i = "", o = e[0]; if (n > 0) { for (i += o, r = 1; r < n; r++)s = e[r] + "", a = Ir - s.length, a && (i += Oo(a)), i += s; o = e[r], s = o + "", a = Ir - s.length, a && (i += Oo(a)) } else if (o === 0) return "0"; for (; o % 10 === 0;)o /= 10; return i + o } var Fi = (function () { function e(s, n) { var i, o = 0, c = s.length; for (s = s.slice(); c--;)i = s[c] * n + o, s[c] = i % _a | 0, o = i / _a | 0; return o && s.unshift(o), s } function r(s, n, i, o) { var c, u; if (i != o) u = i > o ? 1 : -1; else for (c = u = 0; c < i; c++)if (s[c] != n[c]) { u = s[c] > n[c] ? 1 : -1; break } return u } function a(s, n, i) { for (var o = 0; i--;)s[i] -= o, o = s[i] < n[i] ? 1 : 0, s[i] = o * _a + s[i] - n[i]; for (; !s[0] && s.length > 1;)s.shift() } return function (s, n, i, o) { var c, u, m, g, f, y, p, b, j, v, S, k, E, C, N, A, D, I, $ = s.constructor, B = s.s == n.s ? 1 : -1, W = s.d, M = n.d; if (!s.s) return new $(s); if (!n.s) throw Error(Nn + "Division by zero"); for (u = s.e - n.e, D = M.length, N = W.length, p = new $(B), b = p.d = [], m = 0; M[m] == (W[m] || 0);)++m; if (M[m] > (W[m] || 0) && --u, i == null ? k = i = $.precision : o ? k = i + (wa(s) - wa(n)) + 1 : k = i, k < 0) return new $(0); if (k = k / Ir + 2 | 0, m = 0, D == 1) for (g = 0, M = M[0], k++; (m < N || g) && k--; m++)E = g * _a + (W[m] || 0), b[m] = E / M | 0, g = E % M | 0; else { for (g = _a / (M[0] + 1) | 0, g > 1 && (M = e(M, g), W = e(W, g), D = M.length, N = W.length), C = D, j = W.slice(0, D), v = j.length; v < D;)j[v++] = 0; I = M.slice(), I.unshift(0), A = M[0], M[1] >= _a / 2 && ++A; do g = 0, c = r(M, j, D, v), c < 0 ? (S = j[0], D != v && (S = S * _a + (j[1] || 0)), g = S / A | 0, g > 1 ? (g >= _a && (g = _a - 1), f = e(M, g), y = f.length, v = j.length, c = r(f, j, y, v), c == 1 && (g--, a(f, D < y ? I : M, y))) : (g == 0 && (c = g = 1), f = M.slice()), y = f.length, y < v && f.unshift(0), a(j, f, v), c == -1 && (v = j.length, c = r(M, j, D, v), c < 1 && (g++, a(j, D < v ? I : M, v))), v = j.length) : c === 0 && (g++, j = [0]), b[m++] = g, c && j[0] ? j[v++] = W[C] || 0 : (j = [W[C]], v = 1); while ((C++ < N || j[0] !== void 0) && k--) } return b[0] || b.shift(), p.e = u, Nr(p, o ? i + wa(p) + 1 : i) } })(); function bO(e, r) { var a, s, n, i, o, c, u = 0, m = 0, g = e.constructor, f = g.precision; if (wa(e) > 16) throw Error(sN + wa(e)); if (!e.s) return new g(Ys); for (zr = !1, c = f, o = new g(.03125); e.abs().gte(.1);)e = e.times(o), m += 5; for (s = Math.log(Nl(2, m)) / Math.LN10 * 2 + 5 | 0, c += s, a = n = i = new g(Ys), g.precision = c; ;) { if (n = Nr(n.times(e), c), a = a.times(++u), o = i.plus(Fi(n, a, c)), ri(o.d).slice(0, c) === ri(i.d).slice(0, c)) { for (; m--;)i = Nr(i.times(i), c); return g.precision = f, r == null ? (zr = !0, Nr(i, f)) : i } i = o } } function wa(e) { for (var r = e.e * Ir, a = e.d[0]; a >= 10; a /= 10)r++; return r } function Uv(e, r, a) { if (r > e.LN10.sd()) throw zr = !0, a && (e.precision = a), Error(Nn + "LN10 precision limit exceeded"); return Nr(new e(e.LN10), r) } function Oo(e) { for (var r = ""; e--;)r += "0"; return r } function gm(e, r) { var a, s, n, i, o, c, u, m, g, f = 1, y = 10, p = e, b = p.d, j = p.constructor, v = j.precision; if (p.s < 1) throw Error(Nn + (p.s ? "NaN" : "-Infinity")); if (p.eq(Ys)) return new j(0); if (r == null ? (zr = !1, m = v) : m = r, p.eq(10)) return r == null && (zr = !0), Uv(j, m); if (m += y, j.precision = m, a = ri(b), s = a.charAt(0), i = wa(p), Math.abs(i) < 15e14) { for (; s < 7 && s != 1 || s == 1 && a.charAt(1) > 3;)p = p.times(e), a = ri(p.d), s = a.charAt(0), f++; i = wa(p), s > 1 ? (p = new j("0." + a), i++) : p = new j(s + "." + a.slice(1)) } else return u = Uv(j, m + 2, v).times(i + ""), p = gm(new j(s + "." + a.slice(1)), m - y).plus(u), j.precision = v, r == null ? (zr = !0, Nr(p, v)) : p; for (c = o = p = Fi(p.minus(Ys), p.plus(Ys), m), g = Nr(p.times(p), m), n = 3; ;) { if (o = Nr(o.times(g), m), u = c.plus(Fi(o, new j(n), m)), ri(u.d).slice(0, m) === ri(c.d).slice(0, m)) return c = c.times(2), i !== 0 && (c = c.plus(Uv(j, m + 2, v).times(i + ""))), c = Fi(c, new j(f), m), j.precision = v, r == null ? (zr = !0, Nr(c, v)) : c; c = u, n += 2 } } function eA(e, r) { var a, s, n; for ((a = r.indexOf(".")) > -1 && (r = r.replace(".", "")), (s = r.search(/e/i)) > 0 ? (a < 0 && (a = s), a += +r.slice(s + 1), r = r.substring(0, s)) : a < 0 && (a = r.length), s = 0; r.charCodeAt(s) === 48;)++s; for (n = r.length; r.charCodeAt(n - 1) === 48;)--n; if (r = r.slice(s, n), r) { if (n -= s, a = a - s - 1, e.e = jd(a / Ir), e.d = [], s = (a + 1) % Ir, a < 0 && (s += Ir), s < n) { for (s && e.d.push(+r.slice(0, s)), n -= Ir; s < n;)e.d.push(+r.slice(s, s += Ir)); r = r.slice(s), s = Ir - r.length } else s -= n; for (; s--;)r += "0"; if (e.d.push(+r), zr && (e.e > Vh || e.e < -Vh)) throw Error(sN + a) } else e.s = 0, e.e = 0, e.d = [0]; return e } function Nr(e, r, a) { var s, n, i, o, c, u, m, g, f = e.d; for (o = 1, i = f[0]; i >= 10; i /= 10)o++; if (s = r - o, s < 0) s += Ir, n = r, m = f[g = 0]; else { if (g = Math.ceil((s + 1) / Ir), i = f.length, g >= i) return e; for (m = i = f[g], o = 1; i >= 10; i /= 10)o++; s %= Ir, n = s - Ir + o } if (a !== void 0 && (i = Nl(10, o - n - 1), c = m / i % 10 | 0, u = r < 0 || f[g + 1] !== void 0 || m % i, u = a < 4 ? (c || u) && (a == 0 || a == (e.s < 0 ? 3 : 2)) : c > 5 || c == 5 && (a == 4 || u || a == 6 && (s > 0 ? n > 0 ? m / Nl(10, o - n) : 0 : f[g - 1]) % 10 & 1 || a == (e.s < 0 ? 8 : 7))), r < 1 || !f[0]) return u ? (i = wa(e), f.length = 1, r = r - i - 1, f[0] = Nl(10, (Ir - r % Ir) % Ir), e.e = jd(-r / Ir) || 0) : (f.length = 1, f[0] = e.e = e.s = 0), e; if (s == 0 ? (f.length = g, i = 1, g--) : (f.length = g + 1, i = Nl(10, Ir - s), f[g] = n > 0 ? (m / Nl(10, o - n) % Nl(10, n) | 0) * i : 0), u) for (; ;)if (g == 0) { (f[0] += i) == _a && (f[0] = 1, ++e.e); break } else { if (f[g] += i, f[g] != _a) break; f[g--] = 0, i = 1 } for (s = f.length; f[--s] === 0;)f.pop(); if (zr && (e.e > Vh || e.e < -Vh)) throw Error(sN + wa(e)); return e } function wO(e, r) { var a, s, n, i, o, c, u, m, g, f, y = e.constructor, p = y.precision; if (!e.s || !r.s) return r.s ? r.s = -r.s : r = new y(e), zr ? Nr(r, p) : r; if (u = e.d, f = r.d, s = r.e, m = e.e, u = u.slice(), o = m - s, o) { for (g = o < 0, g ? (a = u, o = -o, c = f.length) : (a = f, s = m, c = u.length), n = Math.max(Math.ceil(p / Ir), c) + 2, o > n && (o = n, a.length = 1), a.reverse(), n = o; n--;)a.push(0); a.reverse() } else { for (n = u.length, c = f.length, g = n < c, g && (c = n), n = 0; n < c; n++)if (u[n] != f[n]) { g = u[n] < f[n]; break } o = 0 } for (g && (a = u, u = f, f = a, r.s = -r.s), c = u.length, n = f.length - c; n > 0; --n)u[c++] = 0; for (n = f.length; n > o;) { if (u[--n] < f[n]) { for (i = n; i && u[--i] === 0;)u[i] = _a - 1; --u[i], u[n] += _a } u[n] -= f[n] } for (; u[--c] === 0;)u.pop(); for (; u[0] === 0; u.shift())--s; return u[0] ? (r.d = u, r.e = s, zr ? Nr(r, p) : r) : new y(0) } function Yl(e, r, a) { var s, n = wa(e), i = ri(e.d), o = i.length; return r ? (a && (s = a - o) > 0 ? i = i.charAt(0) + "." + i.slice(1) + Oo(s) : o > 1 && (i = i.charAt(0) + "." + i.slice(1)), i = i + (n < 0 ? "e" : "e+") + n) : n < 0 ? (i = "0." + Oo(-n - 1) + i, a && (s = a - o) > 0 && (i += Oo(s))) : n >= o ? (i += Oo(n + 1 - o), a && (s = a - n - 1) > 0 && (i = i + "." + Oo(s))) : ((s = n + 1) < o && (i = i.slice(0, s) + "." + i.slice(s)), a && (s = a - o) > 0 && (n + 1 === o && (i += "."), i += Oo(s))), e.s < 0 ? "-" + i : i } function tA(e, r) { if (e.length > r) return e.length = r, !0 } function jO(e) { var r, a, s; function n(i) { var o = this; if (!(o instanceof n)) return new n(i); if (o.constructor = n, i instanceof n) { o.s = i.s, o.e = i.e, o.d = (i = i.d) ? i.slice() : i; return } if (typeof i == "number") { if (i * 0 !== 0) throw Error($l + i); if (i > 0) o.s = 1; else if (i < 0) i = -i, o.s = -1; else { o.s = 0, o.e = 0, o.d = [0]; return } if (i === ~~i && i < 1e7) { o.e = 0, o.d = [i]; return } return eA(o, i.toString()) } else if (typeof i != "string") throw Error($l + i); if (i.charCodeAt(0) === 45 ? (i = i.slice(1), o.s = -1) : o.s = 1, wY.test(i)) eA(o, i); else throw Error($l + i) } if (n.prototype = ct, n.ROUND_UP = 0, n.ROUND_DOWN = 1, n.ROUND_CEIL = 2, n.ROUND_FLOOR = 3, n.ROUND_HALF_UP = 4, n.ROUND_HALF_DOWN = 5, n.ROUND_HALF_EVEN = 6, n.ROUND_HALF_CEIL = 7, n.ROUND_HALF_FLOOR = 8, n.clone = jO, n.config = n.set = jY, e === void 0 && (e = {}), e) for (s = ["precision", "rounding", "toExpNeg", "toExpPos", "LN10"], r = 0; r < s.length;)e.hasOwnProperty(a = s[r++]) || (e[a] = this[a]); return n.config(e), n } function jY(e) { if (!e || typeof e != "object") throw Error(Nn + "Object expected"); var r, a, s, n = ["precision", 1, wd, "rounding", 0, 8, "toExpNeg", -1 / 0, 0, "toExpPos", 0, 1 / 0]; for (r = 0; r < n.length; r += 3)if ((s = e[a = n[r]]) !== void 0) if (jd(s) === s && s >= n[r + 1] && s <= n[r + 2]) this[a] = s; else throw Error($l + a + ": " + s); if ((s = e[a = "LN10"]) !== void 0) if (s == Math.LN10) this[a] = new this(s); else throw Error($l + a + ": " + s); return this } var nN = jO(bY); Ys = new nN(1); const fr = nN; var NY = e => e, NO = {}, kO = e => e === NO, rA = e => function r() { return arguments.length === 0 || arguments.length === 1 && kO(arguments.length <= 0 ? void 0 : arguments[0]) ? r : e(...arguments) }, SO = (e, r) => e === 1 ? r : rA(function () { for (var a = arguments.length, s = new Array(a), n = 0; n < a; n++)s[n] = arguments[n]; var i = s.filter(o => o !== NO).length; return i >= e ? r(...s) : SO(e - i, rA(function () { for (var o = arguments.length, c = new Array(o), u = 0; u < o; u++)c[u] = arguments[u]; var m = s.map(g => kO(g) ? c.shift() : g); return r(...m, ...c) })) }), kY = e => SO(e.length, e), vw = (e, r) => { for (var a = [], s = e; s < r; ++s)a[s - e] = s; return a }, SY = kY((e, r) => Array.isArray(r) ? r.map(e) : Object.keys(r).map(a => r[a]).map(e)), CY = function () { for (var r = arguments.length, a = new Array(r), s = 0; s < r; s++)a[s] = arguments[s]; if (!a.length) return NY; var n = a.reverse(), i = n[0], o = n.slice(1); return function () { return o.reduce((c, u) => u(c), i(...arguments)) } }, bw = e => Array.isArray(e) ? e.reverse() : e.split("").reverse().join(""); function CO(e) { var r; return e === 0 ? r = 1 : r = Math.floor(new fr(e).abs().log(10).toNumber()) + 1, r } function EO(e, r, a) { for (var s = new fr(e), n = 0, i = []; s.lt(r) && n < 1e5;)i.push(s.toNumber()), s = s.add(a), n++; return i } var AO = e => { var [r, a] = e, [s, n] = [r, a]; return r > a && ([s, n] = [a, r]), [s, n] }, PO = (e, r, a) => { if (e.lte(0)) return new fr(0); var s = CO(e.toNumber()), n = new fr(10).pow(s), i = e.div(n), o = s !== 1 ? .05 : .1, c = new fr(Math.ceil(i.div(o).toNumber())).add(a).mul(o), u = c.mul(n); return r ? new fr(u.toNumber()) : new fr(Math.ceil(u.toNumber())) }, EY = (e, r, a) => { var s = new fr(1), n = new fr(e); if (!n.isint() && a) { var i = Math.abs(e); i < 1 ? (s = new fr(10).pow(CO(e) - 1), n = new fr(Math.floor(n.div(s).toNumber())).mul(s)) : i > 1 && (n = new fr(Math.floor(e))) } else e === 0 ? n = new fr(Math.floor((r - 1) / 2)) : a || (n = new fr(Math.floor(e))); var o = Math.floor((r - 1) / 2), c = CY(SY(u => n.add(new fr(u - o).mul(s)).toNumber()), vw); return c(0, r) }, TO = function (r, a, s, n) { var i = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : 0; if (!Number.isFinite((a - r) / (s - 1))) return { step: new fr(0), tickMin: new fr(0), tickMax: new fr(0) }; var o = PO(new fr(a).sub(r).div(s - 1), n, i), c; r <= 0 && a >= 0 ? c = new fr(0) : (c = new fr(r).add(a).div(2), c = c.sub(new fr(c).mod(o))); var u = Math.ceil(c.sub(r).div(o).toNumber()), m = Math.ceil(new fr(a).sub(c).div(o).toNumber()), g = u + m + 1; return g > s ? TO(r, a, s, n, i + 1) : (g < s && (m = a > 0 ? m + (s - g) : m, u = a > 0 ? u : u + (s - g)), { step: o, tickMin: c.sub(new fr(u).mul(o)), tickMax: c.add(new fr(m).mul(o)) }) }, AY = function (r) { var [a, s] = r, n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 6, i = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !0, o = Math.max(n, 2), [c, u] = AO([a, s]); if (c === -1 / 0 || u === 1 / 0) { var m = u === 1 / 0 ? [c, ...vw(0, n - 1).map(() => 1 / 0)] : [...vw(0, n - 1).map(() => -1 / 0), u]; return a > s ? bw(m) : m } if (c === u) return EY(c, n, i); var { step: g, tickMin: f, tickMax: y } = TO(c, u, o, i, 0), p = EO(f, y.add(new fr(.1).mul(g)), g); return a > s ? bw(p) : p }, PY = function (r, a) { var [s, n] = r, i = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !0, [o, c] = AO([s, n]); if (o === -1 / 0 || c === 1 / 0) return [s, n]; if (o === c) return [o]; var u = Math.max(a, 2), m = PO(new fr(c).sub(o).div(u - 1), i, 0), g = [...EO(new fr(o), new fr(c), m), c]; return i === !1 && (g = g.map(f => Math.round(f))), s > n ? bw(g) : g }, DO = e => e.rootProps.maxBarSize, TY = e => e.rootProps.barGap, OO = e => e.rootProps.barCategoryGap, DY = e => e.rootProps.barSize, Hm = e => e.rootProps.stackOffset, IO = e => e.rootProps.reverseStackOrder, iN = e => e.options.chartName, oN = e => e.rootProps.syncId, LO = e => e.rootProps.syncMethod, lN = e => e.options.eventEmitter, OY = e => e.rootProps.baseValue, ga = { grid: -100, barBackground: -50, area: 100, cursorRectangle: 200, bar: 300, line: 400, axis: 500, scatter: 600, activeBar: 1e3, cursorLine: 1100, activeDot: 1200, label: 2e3 }, Ii = { allowDuplicatedCategory: !0, angleAxisId: 0, reversed: !1, scale: "auto", tick: !0, type: "category" }, Ks = { allowDataOverflow: !1, allowDuplicatedCategory: !0, radiusAxisId: 0, scale: "auto", tick: !0, tickCount: 5, type: "number" }, Zf = (e, r) => { if (!(!e || !r)) return e != null && e.reversed ? [r[1], r[0]] : r }, IY = { allowDataOverflow: !1, allowDecimals: !1, allowDuplicatedCategory: !1, dataKey: void 0, domain: void 0, id: Ii.angleAxisId, includeHidden: !1, name: void 0, reversed: Ii.reversed, scale: Ii.scale, tick: Ii.tick, tickCount: void 0, ticks: void 0, type: Ii.type, unit: void 0 }, LY = { allowDataOverflow: Ks.allowDataOverflow, allowDecimals: !1, allowDuplicatedCategory: Ks.allowDuplicatedCategory, dataKey: void 0, domain: void 0, id: Ks.radiusAxisId, includeHidden: !1, name: void 0, reversed: !1, scale: Ks.scale, tick: Ks.tick, tickCount: Ks.tickCount, ticks: void 0, type: Ks.type, unit: void 0 }, RY = { allowDataOverflow: !1, allowDecimals: !1, allowDuplicatedCategory: Ii.allowDuplicatedCategory, dataKey: void 0, domain: void 0, id: Ii.angleAxisId, includeHidden: !1, name: void 0, reversed: !1, scale: Ii.scale, tick: Ii.tick, tickCount: void 0, ticks: void 0, type: "number", unit: void 0 }, MY = { allowDataOverflow: Ks.allowDataOverflow, allowDecimals: !1, allowDuplicatedCategory: Ks.allowDuplicatedCategory, dataKey: void 0, domain: void 0, id: Ks.radiusAxisId, includeHidden: !1, name: void 0, reversed: !1, scale: Ks.scale, tick: Ks.tick, tickCount: Ks.tickCount, ticks: void 0, type: "category", unit: void 0 }, cN = (e, r) => e.polarAxis.angleAxis[r] != null ? e.polarAxis.angleAxis[r] : e.layout.layoutType === "radial" ? RY : IY, dN = (e, r) => e.polarAxis.radiusAxis[r] != null ? e.polarAxis.radiusAxis[r] : e.layout.layoutType === "radial" ? MY : LY, Jf = e => e.polarOptions, uN = be([eo, to, Aa], O5), RO = be([Jf, uN], (e, r) => { if (e != null) return os(e.innerRadius, r, 0) }), MO = be([Jf, uN], (e, r) => { if (e != null) return os(e.outerRadius, r, r * .8) }), _Y = e => { if (e == null) return [0, 0]; var { startAngle: r, endAngle: a } = e; return [r, a] }, _O = be([Jf], _Y); be([cN, _O], Zf); var $O = be([uN, RO, MO], (e, r, a) => { if (!(e == null || r == null || a == null)) return [r, a] }); be([dN, $O], Zf); var UO = be([Wt, Jf, RO, MO, eo, to], (e, r, a, s, n, i) => { if (!(e !== "centric" && e !== "radial" || r == null || a == null || s == null)) { var { cx: o, cy: c, startAngle: u, endAngle: m } = r; return { cx: os(o, n, n / 2), cy: os(c, i, i / 2), innerRadius: a, outerRadius: s, startAngle: u, endAngle: m, clockWise: !1 } } }), qr = (e, r) => r, Wm = (e, r, a) => a; function ex(e) { return e?.id } function FO(e, r, a) { var { chartData: s = [] } = r, { allowDuplicatedCategory: n, dataKey: i } = a, o = new Map; return e.forEach(c => { var u, m = (u = c.data) !== null && u !== void 0 ? u : s; if (!(m == null || m.length === 0)) { var g = ex(c); m.forEach((f, y) => { var p = i == null || n ? y : String(xr(f, i, null)), b = xr(f, c.dataKey, 0), j; o.has(p) ? j = o.get(p) : j = {}, Object.assign(j, { [g]: b }), o.set(p, j) }) } }), Array.from(o.values()) } function tx(e) { return e.stackId != null && e.dataKey != null } var rx = (e, r) => e === r ? !0 : e == null || r == null ? !1 : e[0] === r[0] && e[1] === r[1]; function ax(e, r) { return Array.isArray(e) && Array.isArray(r) && e.length === 0 && r.length === 0 ? !0 : e === r } function $Y(e, r) { if (e.length === r.length) { for (var a = 0; a < e.length; a++)if (e[a] !== r[a]) return !1; return !0 } return !1 } var Ta = e => { var r = Wt(e); return r === "horizontal" ? "xAxis" : r === "vertical" ? "yAxis" : r === "centric" ? "angleAxis" : "radiusAxis" }, Nd = e => e.tooltip.settings.axisId; function aA(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function Gh(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? aA(Object(a), !0).forEach(function (s) { UY(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : aA(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function UY(e, r, a) { return (r = FY(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function FY(e) { var r = zY(e, "string"); return typeof r == "symbol" ? r : r + "" } function zY(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var ww = [0, "auto"], Ra = { allowDataOverflow: !1, allowDecimals: !0, allowDuplicatedCategory: !0, angle: 0, dataKey: void 0, domain: void 0, height: 30, hide: !0, id: 0, includeHidden: !1, interval: "preserveEnd", minTickGap: 5, mirror: !1, name: void 0, orientation: "bottom", padding: { left: 0, right: 0 }, reversed: !1, scale: "auto", tick: !0, tickCount: 5, tickFormatter: void 0, ticks: void 0, type: "category", unit: void 0 }, zO = (e, r) => e.cartesianAxis.xAxis[r], ao = (e, r) => { var a = zO(e, r); return a ?? Ra }, Ma = { allowDataOverflow: !1, allowDecimals: !0, allowDuplicatedCategory: !0, angle: 0, dataKey: void 0, domain: ww, hide: !0, id: 0, includeHidden: !1, interval: "preserveEnd", minTickGap: 5, mirror: !1, name: void 0, orientation: "left", padding: { top: 0, bottom: 0 }, reversed: !1, scale: "auto", tick: !0, tickCount: 5, tickFormatter: void 0, ticks: void 0, type: "number", unit: void 0, width: _m }, BO = (e, r) => e.cartesianAxis.yAxis[r], so = (e, r) => { var a = BO(e, r); return a ?? Ma }, BY = { domain: [0, "auto"], includeHidden: !1, reversed: !1, allowDataOverflow: !1, allowDuplicatedCategory: !1, dataKey: void 0, id: 0, name: "", range: [64, 64], scale: "auto", type: "number", unit: "" }, mN = (e, r) => { var a = e.cartesianAxis.zAxis[r]; return a ?? BY }, Zr = (e, r, a) => { switch (r) { case "xAxis": return ao(e, a); case "yAxis": return so(e, a); case "zAxis": return mN(e, a); case "angleAxis": return cN(e, a); case "radiusAxis": return dN(e, a); default: throw new Error("Unexpected axis type: ".concat(r)) } }, qY = (e, r, a) => { switch (r) { case "xAxis": return ao(e, a); case "yAxis": return so(e, a); default: throw new Error("Unexpected axis type: ".concat(r)) } }, Vm = (e, r, a) => { switch (r) { case "xAxis": return ao(e, a); case "yAxis": return so(e, a); case "angleAxis": return cN(e, a); case "radiusAxis": return dN(e, a); default: throw new Error("Unexpected axis type: ".concat(r)) } }, qO = e => e.graphicalItems.cartesianItems.some(r => r.type === "bar") || e.graphicalItems.polarItems.some(r => r.type === "radialBar"); function gN(e, r) { return a => { switch (e) { case "xAxis": return "xAxisId" in a && a.xAxisId === r; case "yAxis": return "yAxisId" in a && a.yAxisId === r; case "zAxis": return "zAxisId" in a && a.zAxisId === r; case "angleAxis": return "angleAxisId" in a && a.angleAxisId === r; case "radiusAxis": return "radiusAxisId" in a && a.radiusAxisId === r; default: return !1 } } } var Gm = e => e.graphicalItems.cartesianItems, HY = be([qr, Wm], gN), hN = (e, r, a) => e.filter(a).filter(s => r?.includeHidden === !0 ? !0 : !s.hide), Km = be([Gm, Zr, HY], hN, { memoizeOptions: { resultEqualityCheck: ax } }), HO = be([Km], e => e.filter(r => r.type === "area" || r.type === "bar").filter(tx)), WO = e => e.filter(r => !("stackId" in r) || r.stackId === void 0), WY = be([Km], WO), fN = e => e.map(r => r.data).filter(Boolean).flat(1), VY = be([Km], fN, { memoizeOptions: { resultEqualityCheck: ax } }), xN = (e, r) => { var { chartData: a = [], dataStartIndex: s, dataEndIndex: n } = r; return e.length > 0 ? e : a.slice(s, n + 1) }, pN = be([VY, qm], xN), yN = (e, r, a) => r?.dataKey != null ? e.map(s => ({ value: xr(s, r.dataKey) })) : a.length > 0 ? a.map(s => s.dataKey).flatMap(s => e.map(n => ({ value: xr(n, s) }))) : e.map(s => ({ value: s })), sx = be([pN, Zr, Km], yN); function VO(e, r) { switch (e) { case "xAxis": return r.direction === "x"; case "yAxis": return r.direction === "y"; default: return !1 } } function V0(e) { if (oi(e) || e instanceof Date) { var r = Number(e); if (Rr(r)) return r } } function sA(e) { if (Array.isArray(e)) { var r = [V0(e[0]), V0(e[1])]; return Wo(r) ? r : void 0 } var a = V0(e); if (a != null) return [a, a] } function Qi(e) { return e.map(V0).filter(Fz) } function GY(e, r, a) { return !a || typeof r != "number" || wn(r) ? [] : a.length ? Qi(a.flatMap(s => { var n = xr(e, s.dataKey), i, o; if (Array.isArray(n) ? [i, o] = n : i = o = n, !(!Rr(i) || !Rr(o))) return [r - i, r + o] })) : [] } var Da = e => { var r = Ta(e), a = Nd(e); return Vm(e, r, a) }, Ym = be([Da], e => e?.dataKey), KY = be([HO, qm, Da], FO), GO = (e, r, a, s) => { var n = {}, i = r.reduce((o, c) => (c.stackId == null || (o[c.stackId] == null && (o[c.stackId] = []), o[c.stackId].push(c)), o), n); return Object.fromEntries(Object.entries(i).map(o => { var [c, u] = o, m = s ? [...u].reverse() : u, g = m.map(ex); return [c, { stackedData: gH(e, g, a), graphicalItems: m }] })) }, hm = be([KY, HO, Hm, IO], GO), KO = (e, r, a, s) => { var { dataStartIndex: n, dataEndIndex: i } = r; if (s == null && a !== "zAxis") { var o = pH(e, n, i); if (!(o != null && o[0] === 0 && o[1] === 0)) return o } }, YY = be([Zr], e => e.allowDataOverflow), vN = e => { var r; if (e == null || !("domain" in e)) return ww; if (e.domain != null) return e.domain; if (e.ticks != null) { if (e.type === "number") { var a = Qi(e.ticks); return [Math.min(...a), Math.max(...a)] } if (e.type === "category") return e.ticks.map(String) } return (r = e?.domain) !== null && r !== void 0 ? r : ww }, bN = be([Zr], vN), wN = be([bN, YY], pO), QY = be([hm, el, qr, wN], KO, { memoizeOptions: { resultEqualityCheck: rx } }), nx = e => e.errorBars, XY = (e, r, a) => e.flatMap(s => r[s.id]).filter(Boolean).filter(s => VO(a, s)), Kh = function () { for (var r = arguments.length, a = new Array(r), s = 0; s < r; s++)a[s] = arguments[s]; var n = a.filter(Boolean); if (n.length !== 0) { var i = n.flat(), o = Math.min(...i), c = Math.max(...i); return [o, c] } }, jN = (e, r, a, s, n) => { var i, o; if (a.length > 0 && e.forEach(c => { a.forEach(u => { var m, g, f = (m = s[u.id]) === null || m === void 0 ? void 0 : m.filter(S => VO(n, S)), y = xr(c, (g = r.dataKey) !== null && g !== void 0 ? g : u.dataKey), p = GY(c, y, f); if (p.length >= 2) { var b = Math.min(...p), j = Math.max(...p); (i == null || b < i) && (i = b), (o == null || j > o) && (o = j) } var v = sA(y); v != null && (i = i == null ? v[0] : Math.min(i, v[0]), o = o == null ? v[1] : Math.max(o, v[1])) }) }), r?.dataKey != null && e.forEach(c => { var u = sA(xr(c, r.dataKey)); u != null && (i = i == null ? u[0] : Math.min(i, u[0]), o = o == null ? u[1] : Math.max(o, u[1])) }), Rr(i) && Rr(o)) return [i, o] }, ZY = be([pN, Zr, WY, nx, qr], jN, { memoizeOptions: { resultEqualityCheck: rx } }); function JY(e) { var { value: r } = e; if (oi(r) || r instanceof Date) return r } var eQ = (e, r, a) => { var s = e.map(JY).filter(n => n != null); return a && (r.dataKey == null || r.allowDuplicatedCategory && d3(s)) ? M5(0, e.length) : r.allowDuplicatedCategory ? s : Array.from(new Set(s)) }, YO = e => e.referenceElements.dots, kd = (e, r, a) => e.filter(s => s.ifOverflow === "extendDomain").filter(s => r === "xAxis" ? s.xAxisId === a : s.yAxisId === a), tQ = be([YO, qr, Wm], kd), QO = e => e.referenceElements.areas, rQ = be([QO, qr, Wm], kd), XO = e => e.referenceElements.lines, aQ = be([XO, qr, Wm], kd), ZO = (e, r) => { var a = Qi(e.map(s => r === "xAxis" ? s.x : s.y)); if (a.length !== 0) return [Math.min(...a), Math.max(...a)] }, sQ = be(tQ, qr, ZO), JO = (e, r) => { var a = Qi(e.flatMap(s => [r === "xAxis" ? s.x1 : s.y1, r === "xAxis" ? s.x2 : s.y2])); if (a.length !== 0) return [Math.min(...a), Math.max(...a)] }, nQ = be([rQ, qr], JO); function iQ(e) { var r; if (e.x != null) return Qi([e.x]); var a = (r = e.segment) === null || r === void 0 ? void 0 : r.map(s => s.x); return a == null || a.length === 0 ? [] : Qi(a) } function oQ(e) { var r; if (e.y != null) return Qi([e.y]); var a = (r = e.segment) === null || r === void 0 ? void 0 : r.map(s => s.y); return a == null || a.length === 0 ? [] : Qi(a) } var eI = (e, r) => { var a = e.flatMap(s => r === "xAxis" ? iQ(s) : oQ(s)); if (a.length !== 0) return [Math.min(...a), Math.max(...a)] }, lQ = be([aQ, qr], eI), cQ = be(sQ, lQ, nQ, (e, r, a) => Kh(e, a, r)), NN = (e, r, a, s, n, i, o, c) => { if (a != null) return a; var u = o === "vertical" && c === "xAxis" || o === "horizontal" && c === "yAxis", m = u ? Kh(s, i, n) : Kh(i, n); return vY(r, m, e.allowDataOverflow) }, dQ = be([Zr, bN, wN, QY, ZY, cQ, Wt, qr], NN, { memoizeOptions: { resultEqualityCheck: rx } }), uQ = [0, 1], kN = (e, r, a, s, n, i, o) => { if (!((e == null || a == null || a.length === 0) && o === void 0)) { var { dataKey: c, type: u } = e, m = xi(r, i); if (m && c == null) { var g; return M5(0, (g = a?.length) !== null && g !== void 0 ? g : 0) } return u === "category" ? eQ(s, e, m) : n === "expand" ? uQ : o } }, SN = be([Zr, Wt, pN, sx, Hm, qr, dQ], kN), tI = (e, r, a, s, n) => { if (e != null) { var { scale: i, type: o } = e; if (i === "auto") return r === "radial" && n === "radiusAxis" ? "band" : r === "radial" && n === "angleAxis" ? "linear" : o === "category" && s && (s.indexOf("LineChart") >= 0 || s.indexOf("AreaChart") >= 0 || s.indexOf("ComposedChart") >= 0 && !a) ? "point" : o === "category" ? "band" : "linear"; if (typeof i == "string") { var c = "scale".concat(Dm(i)); return c in Lu ? c : "point" } } }, Sd = be([Zr, Wt, qO, iN, qr], tI); function mQ(e) { if (e != null) { if (e in Lu) return Lu[e](); var r = "scale".concat(Dm(e)); if (r in Lu) return Lu[r]() } } function CN(e, r, a, s) { if (!(a == null || s == null)) { if (typeof e.scale == "function") return e.scale.copy().domain(a).range(s); var n = mQ(r); if (n != null) { var i = n.domain(a).range(s); return lH(i), i } } } var EN = (e, r, a) => { var s = vN(r); if (!(a !== "auto" && a !== "linear")) { if (r != null && r.tickCount && Array.isArray(s) && (s[0] === "auto" || s[1] === "auto") && Wo(e)) return AY(e, r.tickCount, r.allowDecimals); if (r != null && r.tickCount && r.type === "number" && Wo(e)) return PY(e, r.tickCount, r.allowDecimals) } }, AN = be([SN, Vm, Sd], EN), PN = (e, r, a, s) => { if (s !== "angleAxis" && e?.type === "number" && Wo(r) && Array.isArray(a) && a.length > 0) { var n = r[0], i = a[0], o = r[1], c = a[a.length - 1]; return [Math.min(n, i), Math.max(o, c)] } return r }, gQ = be([Zr, SN, AN, qr], PN), hQ = be(sx, Zr, (e, r) => { if (!(!r || r.type !== "number")) { var a = 1 / 0, s = Array.from(Qi(e.map(c => c.value))).sort((c, u) => c - u); if (s.length < 2) return 1 / 0; var n = s[s.length - 1] - s[0]; if (n === 0) return 1 / 0; for (var i = 0; i < s.length - 1; i++) { var o = s[i + 1] - s[i]; a = Math.min(a, o) } return a / n } }), rI = be(hQ, Wt, OO, Aa, (e, r, a, s) => s, (e, r, a, s, n) => { if (!Rr(e)) return 0; var i = r === "vertical" ? s.height : s.width; if (n === "gap") return e * i / 2; if (n === "no-gap") { var o = os(a, e * i), c = e * i / 2; return c - o - (c - o) / i * o } return 0 }), fQ = (e, r) => { var a = ao(e, r); return a == null || typeof a.padding != "string" ? 0 : rI(e, "xAxis", r, a.padding) }, xQ = (e, r) => { var a = so(e, r); return a == null || typeof a.padding != "string" ? 0 : rI(e, "yAxis", r, a.padding) }, pQ = be(ao, fQ, (e, r) => { var a, s; if (e == null) return { left: 0, right: 0 }; var { padding: n } = e; return typeof n == "string" ? { left: r, right: r } : { left: ((a = n.left) !== null && a !== void 0 ? a : 0) + r, right: ((s = n.right) !== null && s !== void 0 ? s : 0) + r } }), yQ = be(so, xQ, (e, r) => { var a, s; if (e == null) return { top: 0, bottom: 0 }; var { padding: n } = e; return typeof n == "string" ? { top: r, bottom: r } : { top: ((a = n.top) !== null && a !== void 0 ? a : 0) + r, bottom: ((s = n.bottom) !== null && s !== void 0 ? s : 0) + r } }), vQ = be([Aa, pQ, Ff, Uf, (e, r, a) => a], (e, r, a, s, n) => { var { padding: i } = s; return n ? [i.left, a.width - i.right] : [e.left + r.left, e.left + e.width - r.right] }), bQ = be([Aa, Wt, yQ, Ff, Uf, (e, r, a) => a], (e, r, a, s, n, i) => { var { padding: o } = n; return i ? [s.height - o.bottom, o.top] : r === "horizontal" ? [e.top + e.height - a.bottom, e.top + a.top] : [e.top + a.top, e.top + e.height - a.bottom] }), Qm = (e, r, a, s) => { var n; switch (r) { case "xAxis": return vQ(e, a, s); case "yAxis": return bQ(e, a, s); case "zAxis": return (n = mN(e, a)) === null || n === void 0 ? void 0 : n.range; case "angleAxis": return _O(e); case "radiusAxis": return $O(e, a); default: return } }, aI = be([Zr, Qm], Zf), Cd = be([Zr, Sd, gQ, aI], CN); be([Km, nx, qr], XY); function sI(e, r) { return e.id < r.id ? -1 : e.id > r.id ? 1 : 0 } var ix = (e, r) => r, ox = (e, r, a) => a, wQ = be(_f, ix, ox, (e, r, a) => e.filter(s => s.orientation === r).filter(s => s.mirror === a).sort(sI)), jQ = be($f, ix, ox, (e, r, a) => e.filter(s => s.orientation === r).filter(s => s.mirror === a).sort(sI)), nI = (e, r) => ({ width: e.width, height: r.height }), NQ = (e, r) => { var a = typeof r.width == "number" ? r.width : _m; return { width: a, height: e.height } }, iI = be(Aa, ao, nI), kQ = (e, r, a) => { switch (r) { case "top": return e.top; case "bottom": return a - e.bottom; default: return 0 } }, SQ = (e, r, a) => { switch (r) { case "left": return e.left; case "right": return a - e.right; default: return 0 } }, CQ = be(to, Aa, wQ, ix, ox, (e, r, a, s, n) => { var i = {}, o; return a.forEach(c => { var u = nI(r, c); o == null && (o = kQ(r, s, e)); var m = s === "top" && !n || s === "bottom" && n; i[c.id] = o - Number(m) * u.height, o += (m ? -1 : 1) * u.height }), i }), EQ = be(eo, Aa, jQ, ix, ox, (e, r, a, s, n) => { var i = {}, o; return a.forEach(c => { var u = NQ(r, c); o == null && (o = SQ(r, s, e)); var m = s === "left" && !n || s === "right" && n; i[c.id] = o - Number(m) * u.width, o += (m ? -1 : 1) * u.width }), i }), AQ = (e, r) => { var a = ao(e, r); if (a != null) return CQ(e, a.orientation, a.mirror) }, PQ = be([Aa, ao, AQ, (e, r) => r], (e, r, a, s) => { if (r != null) { var n = a?.[s]; return n == null ? { x: e.left, y: 0 } : { x: e.left, y: n } } }), TQ = (e, r) => { var a = so(e, r); if (a != null) return EQ(e, a.orientation, a.mirror) }, DQ = be([Aa, so, TQ, (e, r) => r], (e, r, a, s) => { if (r != null) { var n = a?.[s]; return n == null ? { x: 0, y: e.top } : { x: n, y: e.top } } }), oI = be(Aa, so, (e, r) => { var a = typeof r.width == "number" ? r.width : _m; return { width: a, height: e.height } }), nA = (e, r, a) => { switch (r) { case "xAxis": return iI(e, a).width; case "yAxis": return oI(e, a).height; default: return } }, lI = (e, r, a, s) => { if (a != null) { var { allowDuplicatedCategory: n, type: i, dataKey: o } = a, c = xi(e, s), u = r.map(m => m.value); if (o && c && i === "category" && n && d3(u)) return u } }, TN = be([Wt, sx, Zr, qr], lI), cI = (e, r, a, s) => { if (!(a == null || a.dataKey == null)) { var { type: n, scale: i } = a, o = xi(e, s); if (o && (n === "number" || i !== "auto")) return r.map(c => c.value) } }, DN = be([Wt, sx, Vm, qr], cI), iA = be([Wt, qY, Sd, Cd, TN, DN, Qm, AN, qr], (e, r, a, s, n, i, o, c, u) => { if (r != null) { var m = xi(e, u); return { angle: r.angle, interval: r.interval, minTickGap: r.minTickGap, orientation: r.orientation, tick: r.tick, tickCount: r.tickCount, tickFormatter: r.tickFormatter, ticks: r.ticks, type: r.type, unit: r.unit, axisType: u, categoricalDomain: i, duplicateDomain: n, isCategorical: m, niceTicks: c, range: o, realScaleType: a, scale: s } } }), OQ = (e, r, a, s, n, i, o, c, u) => { if (!(r == null || s == null)) { var m = xi(e, u), { type: g, ticks: f, tickCount: y } = r, p = a === "scaleBand" && typeof s.bandwidth == "function" ? s.bandwidth() / 2 : 2, b = g === "category" && s.bandwidth ? s.bandwidth() / p : 0; b = u === "angleAxis" && i != null && i.length >= 2 ? Fa(i[0] - i[1]) * 2 * b : b; var j = f || n; if (j) { var v = j.map((S, k) => { var E = o ? o.indexOf(S) : S; return { index: k, coordinate: s(E) + b, value: S, offset: b } }); return v.filter(S => Rr(S.coordinate)) } return m && c ? c.map((S, k) => ({ coordinate: s(S) + b, value: S, index: k, offset: b })).filter(S => Rr(S.coordinate)) : s.ticks ? s.ticks(y).map(S => ({ coordinate: s(S) + b, value: S, offset: b })) : s.domain().map((S, k) => ({ coordinate: s(S) + b, value: o ? o[S] : S, index: k, offset: b })) } }, dI = be([Wt, Vm, Sd, Cd, AN, Qm, TN, DN, qr], OQ), IQ = (e, r, a, s, n, i, o) => { if (!(r == null || a == null || s == null || s[0] === s[1])) { var c = xi(e, o), { tickCount: u } = r, m = 0; return m = o === "angleAxis" && s?.length >= 2 ? Fa(s[0] - s[1]) * 2 * m : m, c && i ? i.map((g, f) => ({ coordinate: a(g) + m, value: g, index: f, offset: m })) : a.ticks ? a.ticks(u).map(g => ({ coordinate: a(g) + m, value: g, offset: m })) : a.domain().map((g, f) => ({ coordinate: a(g) + m, value: n ? n[g] : g, index: f, offset: m })) } }, di = be([Wt, Vm, Cd, Qm, TN, DN, qr], IQ), ui = be(Zr, Cd, (e, r) => { if (!(e == null || r == null)) return Gh(Gh({}, e), {}, { scale: r }) }), LQ = be([Zr, Sd, SN, aI], CN); be((e, r, a) => mN(e, a), LQ, (e, r) => { if (!(e == null || r == null)) return Gh(Gh({}, e), {}, { scale: r }) }); var RQ = be([Wt, _f, $f], (e, r, a) => { switch (e) { case "horizontal": return r.some(s => s.reversed) ? "right-to-left" : "left-to-right"; case "vertical": return a.some(s => s.reversed) ? "bottom-to-top" : "top-to-bottom"; case "centric": case "radial": return "left-to-right"; default: return } }), uI = e => e.options.defaultTooltipEventType, mI = e => e.options.validateTooltipEventTypes; function gI(e, r, a) { if (e == null) return r; var s = e ? "axis" : "item"; return a == null ? r : a.includes(s) ? s : r } function ON(e, r) { var a = uI(e), s = mI(e); return gI(r, a, s) } function MQ(e) { return nt(r => ON(r, e)) } var hI = (e, r) => { var a, s = Number(r); if (!(wn(s) || r == null)) return s >= 0 ? e == null || (a = e[s]) === null || a === void 0 ? void 0 : a.value : void 0 }, _Q = e => e.tooltip.settings, Lo = { active: !1, index: null, dataKey: void 0, graphicalItemId: void 0, coordinate: void 0 }, $Q = { itemInteraction: { click: Lo, hover: Lo }, axisInteraction: { click: Lo, hover: Lo }, keyboardInteraction: Lo, syncInteraction: { active: !1, index: null, dataKey: void 0, label: void 0, coordinate: void 0, sourceViewBox: void 0, graphicalItemId: void 0 }, tooltipItemPayloads: [], settings: { shared: void 0, trigger: "hover", axisId: 0, active: !1, defaultIndex: void 0 } }, fI = Fs({ name: "tooltip", initialState: $Q, reducers: { addTooltipEntrySettings: { reducer(e, r) { e.tooltipItemPayloads.push(r.payload) }, prepare: Ur() }, replaceTooltipEntrySettings: { reducer(e, r) { var { prev: a, next: s } = r.payload, n = Un(e).tooltipItemPayloads.indexOf(a); n > -1 && (e.tooltipItemPayloads[n] = s) }, prepare: Ur() }, removeTooltipEntrySettings: { reducer(e, r) { var a = Un(e).tooltipItemPayloads.indexOf(r.payload); a > -1 && e.tooltipItemPayloads.splice(a, 1) }, prepare: Ur() }, setTooltipSettingsState(e, r) { e.settings = r.payload }, setActiveMouseOverItemIndex(e, r) { e.syncInteraction.active = !1, e.keyboardInteraction.active = !1, e.itemInteraction.hover.active = !0, e.itemInteraction.hover.index = r.payload.activeIndex, e.itemInteraction.hover.dataKey = r.payload.activeDataKey, e.itemInteraction.hover.graphicalItemId = r.payload.activeGraphicalItemId, e.itemInteraction.hover.coordinate = r.payload.activeCoordinate }, mouseLeaveChart(e) { e.itemInteraction.hover.active = !1, e.axisInteraction.hover.active = !1 }, mouseLeaveItem(e) { e.itemInteraction.hover.active = !1 }, setActiveClickItemIndex(e, r) { e.syncInteraction.active = !1, e.itemInteraction.click.active = !0, e.keyboardInteraction.active = !1, e.itemInteraction.click.index = r.payload.activeIndex, e.itemInteraction.click.dataKey = r.payload.activeDataKey, e.itemInteraction.click.graphicalItemId = r.payload.activeGraphicalItemId, e.itemInteraction.click.coordinate = r.payload.activeCoordinate }, setMouseOverAxisIndex(e, r) { e.syncInteraction.active = !1, e.axisInteraction.hover.active = !0, e.keyboardInteraction.active = !1, e.axisInteraction.hover.index = r.payload.activeIndex, e.axisInteraction.hover.dataKey = r.payload.activeDataKey, e.axisInteraction.hover.coordinate = r.payload.activeCoordinate }, setMouseClickAxisIndex(e, r) { e.syncInteraction.active = !1, e.keyboardInteraction.active = !1, e.axisInteraction.click.active = !0, e.axisInteraction.click.index = r.payload.activeIndex, e.axisInteraction.click.dataKey = r.payload.activeDataKey, e.axisInteraction.click.coordinate = r.payload.activeCoordinate }, setSyncInteraction(e, r) { e.syncInteraction = r.payload }, setKeyboardInteraction(e, r) { e.keyboardInteraction.active = r.payload.active, e.keyboardInteraction.index = r.payload.activeIndex, e.keyboardInteraction.coordinate = r.payload.activeCoordinate, e.keyboardInteraction.dataKey = r.payload.activeDataKey } } }), { addTooltipEntrySettings: UQ, replaceTooltipEntrySettings: FQ, removeTooltipEntrySettings: zQ, setTooltipSettingsState: BQ, setActiveMouseOverItemIndex: xI, mouseLeaveItem: qQ, mouseLeaveChart: pI, setActiveClickItemIndex: HQ, setMouseOverAxisIndex: yI, setMouseClickAxisIndex: WQ, setSyncInteraction: jw, setKeyboardInteraction: Nw } = fI.actions, VQ = fI.reducer; function oA(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function A0(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? oA(Object(a), !0).forEach(function (s) { GQ(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : oA(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function GQ(e, r, a) { return (r = KQ(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function KQ(e) { var r = YQ(e, "string"); return typeof r == "symbol" ? r : r + "" } function YQ(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function QQ(e, r, a) { return r === "axis" ? a === "click" ? e.axisInteraction.click : e.axisInteraction.hover : a === "click" ? e.itemInteraction.click : e.itemInteraction.hover } function XQ(e) { return e.index != null } var vI = (e, r, a, s) => { if (r == null) return Lo; var n = QQ(e, r, a); if (n == null) return Lo; if (n.active) return n; if (e.keyboardInteraction.active) return e.keyboardInteraction; if (e.syncInteraction.active && e.syncInteraction.index != null) return e.syncInteraction; var i = e.settings.active === !0; if (XQ(n)) { if (i) return A0(A0({}, n), {}, { active: !0 }) } else if (s != null) return { active: !0, coordinate: void 0, dataKey: void 0, index: s, graphicalItemId: void 0 }; return A0(A0({}, Lo), {}, { coordinate: n.coordinate }) }; function ZQ(e) { if (typeof e == "number") return Number.isFinite(e) ? e : void 0; if (e instanceof Date) { var r = e.valueOf(); return Number.isFinite(r) ? r : void 0 } var a = Number(e); return Number.isFinite(a) ? a : void 0 } function JQ(e, r) { var a = ZQ(e), s = r[0], n = r[1]; if (a === void 0) return !1; var i = Math.min(s, n), o = Math.max(s, n); return a >= i && a <= o } function eX(e, r, a) { if (a == null || r == null) return !0; var s = xr(e, r); return s == null || !Wo(a) ? !0 : JQ(s, a) } var IN = (e, r, a, s) => { var n = e?.index; if (n == null) return null; var i = Number(n); if (!Rr(i)) return n; var o = 0, c = 1 / 0; r.length > 0 && (c = r.length - 1); var u = Math.max(o, Math.min(i, c)), m = r[u]; return m == null || eX(m, a, s) ? String(u) : null }, bI = (e, r, a, s, n, i, o, c) => { if (!(i == null || c == null)) { var u = o[0], m = u == null ? void 0 : c(u.positions, i); if (m != null) return m; var g = n?.[Number(i)]; if (g) switch (a) { case "horizontal": return { x: g.coordinate, y: (s.top + r) / 2 }; default: return { x: (s.left + e) / 2, y: g.coordinate } } } }, wI = (e, r, a, s) => { if (r === "axis") return e.tooltipItemPayloads; if (e.tooltipItemPayloads.length === 0) return []; var n; return a === "hover" ? n = e.itemInteraction.hover.dataKey : n = e.itemInteraction.click.dataKey, n == null && s != null ? [e.tooltipItemPayloads[0]] : e.tooltipItemPayloads.filter(i => { var o; return ((o = i.settings) === null || o === void 0 ? void 0 : o.dataKey) === n }) }, Xm = e => e.options.tooltipPayloadSearcher, Ed = e => e.tooltip; function lA(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function cA(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? lA(Object(a), !0).forEach(function (s) { tX(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : lA(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function tX(e, r, a) { return (r = rX(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function rX(e) { var r = aX(e, "string"); return typeof r == "symbol" ? r : r + "" } function aX(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function sX(e, r) { return e ?? r } var jI = (e, r, a, s, n, i, o) => { if (!(r == null || i == null)) { var { chartData: c, computedData: u, dataStartIndex: m, dataEndIndex: g } = a, f = []; return e.reduce((y, p) => { var b, { dataDefinedOnItem: j, settings: v } = p, S = sX(j, c), k = Array.isArray(S) ? s5(S, m, g) : S, E = (b = v?.dataKey) !== null && b !== void 0 ? b : s, C = v?.nameKey, N; if (s && Array.isArray(k) && !Array.isArray(k[0]) && o === "axis" ? N = u3(k, s, n) : N = i(k, r, u, C), Array.isArray(N)) N.forEach(D => { var I = cA(cA({}, v), {}, { name: D.name, unit: D.unit, color: void 0, fill: void 0 }); y.push(P4({ tooltipEntrySettings: I, dataKey: D.dataKey, payload: D.payload, value: xr(D.payload, D.dataKey), name: D.name })) }); else { var A; y.push(P4({ tooltipEntrySettings: v, dataKey: E, payload: N, value: xr(N, E), name: (A = xr(N, C)) !== null && A !== void 0 ? A : v?.name })) } return y }, f) } }, LN = be([Da, Wt, qO, iN, Ta], tI), nX = be([e => e.graphicalItems.cartesianItems, e => e.graphicalItems.polarItems], (e, r) => [...e, ...r]), iX = be([Ta, Nd], gN), Zm = be([nX, Da, iX], hN, { memoizeOptions: { resultEqualityCheck: ax } }), oX = be([Zm], e => e.filter(tx)), lX = be([Zm], fN, { memoizeOptions: { resultEqualityCheck: ax } }), Ad = be([lX, el], xN), cX = be([oX, el, Da], FO), RN = be([Ad, Da, Zm], yN), NI = be([Da], vN), dX = be([Da], e => e.allowDataOverflow), kI = be([NI, dX], pO), uX = be([Zm], e => e.filter(tx)), mX = be([cX, uX, Hm, IO], GO), gX = be([mX, el, Ta, kI], KO), hX = be([Zm], WO), fX = be([Ad, Da, hX, nx, Ta], jN, { memoizeOptions: { resultEqualityCheck: rx } }), xX = be([YO, Ta, Nd], kd), pX = be([xX, Ta], ZO), yX = be([QO, Ta, Nd], kd), vX = be([yX, Ta], JO), bX = be([XO, Ta, Nd], kd), wX = be([bX, Ta], eI), jX = be([pX, wX, vX], Kh), NX = be([Da, NI, kI, gX, fX, jX, Wt, Ta], NN), Jm = be([Da, Wt, Ad, RN, Hm, Ta, NX], kN), kX = be([Jm, Da, LN], EN), SX = be([Da, Jm, kX, Ta], PN), SI = e => { var r = Ta(e), a = Nd(e), s = !1; return Qm(e, r, a, s) }, CI = be([Da, SI], Zf), EI = be([Da, LN, SX, CI], CN), CX = be([Wt, RN, Da, Ta], lI), EX = be([Wt, RN, Da, Ta], cI), AX = (e, r, a, s, n, i, o, c) => { if (r) { var { type: u } = r, m = xi(e, c); if (s) { var g = a === "scaleBand" && s.bandwidth ? s.bandwidth() / 2 : 2, f = u === "category" && s.bandwidth ? s.bandwidth() / g : 0; return f = c === "angleAxis" && n != null && n?.length >= 2 ? Fa(n[0] - n[1]) * 2 * f : f, m && o ? o.map((y, p) => ({ coordinate: s(y) + f, value: y, index: p, offset: f })) : s.domain().map((y, p) => ({ coordinate: s(y) + f, value: i ? i[y] : y, index: p, offset: f })) } } }, no = be([Wt, Da, LN, EI, SI, CX, EX, Ta], AX), MN = be([uI, mI, _Q], (e, r, a) => gI(a.shared, e, r)), AI = e => e.tooltip.settings.trigger, _N = e => e.tooltip.settings.defaultIndex, eg = be([Ed, MN, AI, _N], vI), Vo = be([eg, Ad, Ym, Jm], IN), PI = be([no, Vo], hI), $N = be([eg], e => { if (e) return e.dataKey }), PX = be([eg], e => { if (e) return e.graphicalItemId }), TI = be([Ed, MN, AI, _N], wI), TX = be([eo, to, Wt, Aa, no, _N, TI, Xm], bI), DX = be([eg, TX], (e, r) => e != null && e.coordinate ? e.coordinate : r), OX = be([eg], e => e.active), IX = be([TI, Vo, el, Ym, PI, Xm, MN], jI), LX = be([IX], e => { if (e != null) { var r = e.map(a => a.payload).filter(a => a != null); return Array.from(new Set(r)) } }); function dA(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function uA(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? dA(Object(a), !0).forEach(function (s) { RX(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : dA(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function RX(e, r, a) { return (r = MX(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function MX(e) { var r = _X(e, "string"); return typeof r == "symbol" ? r : r + "" } function _X(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var $X = () => nt(Da), UX = () => { var e = $X(), r = nt(no), a = nt(EI); return Ho(!e || !a ? void 0 : uA(uA({}, e), {}, { scale: a }), r) }; function mA(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function Ac(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? mA(Object(a), !0).forEach(function (s) { FX(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : mA(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function FX(e, r, a) { return (r = zX(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function zX(e) { var r = BX(e, "string"); return typeof r == "symbol" ? r : r + "" } function BX(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var qX = (e, r, a, s) => { var n = r.find(i => i && i.index === a); if (n) { if (e === "horizontal") return { x: n.coordinate, y: s.chartY }; if (e === "vertical") return { x: s.chartX, y: n.coordinate } } return { x: 0, y: 0 } }, HX = (e, r, a, s) => { var n = r.find(m => m && m.index === a); if (n) { if (e === "centric") { var i = n.coordinate, { radius: o } = s; return Ac(Ac(Ac({}, s), ba(s.cx, s.cy, o, i)), {}, { angle: i, radius: o }) } var c = n.coordinate, { angle: u } = s; return Ac(Ac(Ac({}, s), ba(s.cx, s.cy, c, u)), {}, { angle: u, radius: c }) } return { angle: 0, clockWise: !1, cx: 0, cy: 0, endAngle: 0, innerRadius: 0, outerRadius: 0, radius: 0, startAngle: 0, x: 0, y: 0 } }; function WX(e, r) { var { chartX: a, chartY: s } = e; return a >= r.left && a <= r.left + r.width && s >= r.top && s <= r.top + r.height } var DI = (e, r, a, s, n) => { var i, o = -1, c = (i = r?.length) !== null && i !== void 0 ? i : 0; if (c <= 1 || e == null) return 0; if (s === "angleAxis" && n != null && Math.abs(Math.abs(n[1] - n[0]) - 360) <= 1e-6) for (var u = 0; u < c; u++) { var m = u > 0 ? a[u - 1].coordinate : a[c - 1].coordinate, g = a[u].coordinate, f = u >= c - 1 ? a[0].coordinate : a[u + 1].coordinate, y = void 0; if (Fa(g - m) !== Fa(f - g)) { var p = []; if (Fa(f - g) === Fa(n[1] - n[0])) { y = f; var b = g + n[1] - n[0]; p[0] = Math.min(b, (b + m) / 2), p[1] = Math.max(b, (b + m) / 2) } else { y = m; var j = f + n[1] - n[0]; p[0] = Math.min(g, (j + g) / 2), p[1] = Math.max(g, (j + g) / 2) } var v = [Math.min(g, (y + g) / 2), Math.max(g, (y + g) / 2)]; if (e > v[0] && e <= v[1] || e >= p[0] && e <= p[1]) { ({ index: o } = a[u]); break } } else { var S = Math.min(m, f), k = Math.max(m, f); if (e > (S + g) / 2 && e <= (k + g) / 2) { ({ index: o } = a[u]); break } } } else if (r) { for (var E = 0; E < c; E++)if (E === 0 && e <= (r[E].coordinate + r[E + 1].coordinate) / 2 || E > 0 && E < c - 1 && e > (r[E].coordinate + r[E - 1].coordinate) / 2 && e <= (r[E].coordinate + r[E + 1].coordinate) / 2 || E === c - 1 && e > (r[E].coordinate + r[E - 1].coordinate) / 2) { ({ index: o } = r[E]); break } } return o }, OI = () => nt(iN), UN = (e, r) => r, II = (e, r, a) => a, FN = (e, r, a, s) => s, VX = be(no, e => Af(e, r => r.coordinate)), zN = be([Ed, UN, II, FN], vI), BN = be([zN, Ad, Ym, Jm], IN), GX = (e, r, a) => { if (r != null) { var s = Ed(e); return r === "axis" ? a === "hover" ? s.axisInteraction.hover.dataKey : s.axisInteraction.click.dataKey : a === "hover" ? s.itemInteraction.hover.dataKey : s.itemInteraction.click.dataKey } }, LI = be([Ed, UN, II, FN], wI), Yh = be([eo, to, Wt, Aa, no, FN, LI, Xm], bI), KX = be([zN, Yh], (e, r) => { var a; return (a = e.coordinate) !== null && a !== void 0 ? a : r }), RI = be([no, BN], hI), YX = be([LI, BN, el, Ym, RI, Xm, UN], jI), QX = be([zN, BN], (e, r) => ({ isActive: e.active && r != null, activeIndex: r })), XX = (e, r, a, s, n, i, o) => { if (!(!e || !a || !s || !n) && WX(e, o)) { var c = yH(e, r), u = DI(c, i, n, a, s), m = qX(r, n, u, e); return { activeIndex: String(u), activeCoordinate: m } } }, ZX = (e, r, a, s, n, i, o) => { if (!(!e || !s || !n || !i || !a)) { var c = RV(e, a); if (c) { var u = vH(c, r), m = DI(u, o, i, s, n), g = HX(r, i, m, c); return { activeIndex: String(m), activeCoordinate: g } } } }, JX = (e, r, a, s, n, i, o, c) => { if (!(!e || !r || !s || !n || !i)) return r === "horizontal" || r === "vertical" ? XX(e, r, s, n, i, o, c) : ZX(e, r, a, s, n, i, o) }, eZ = be(e => e.zIndex.zIndexMap, (e, r) => r, (e, r, a) => a, (e, r, a) => { if (r != null) { var s = e[r]; if (s != null) return a ? s.panoramaElementId : s.elementId } }), tZ = be(e => e.zIndex.zIndexMap, e => { var r = Object.keys(e).map(s => parseInt(s, 10)).concat(Object.values(ga)), a = Array.from(new Set(r)); return a.sort((s, n) => s - n) }, { memoizeOptions: { resultEqualityCheck: $Y } }); function gA(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function hA(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? gA(Object(a), !0).forEach(function (s) { rZ(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : gA(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function rZ(e, r, a) { return (r = aZ(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function aZ(e) { var r = sZ(e, "string"); return typeof r == "symbol" ? r : r + "" } function sZ(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var nZ = {}, iZ = { zIndexMap: Object.values(ga).reduce((e, r) => hA(hA({}, e), {}, { [r]: { elementId: void 0, panoramaElementId: void 0, consumers: 0 } }), nZ) }, oZ = new Set(Object.values(ga)); function lZ(e) { return oZ.has(e) } var MI = Fs({ name: "zIndex", initialState: iZ, reducers: { registerZIndexPortal: { reducer: (e, r) => { var { zIndex: a } = r.payload; e.zIndexMap[a] ? e.zIndexMap[a].consumers += 1 : e.zIndexMap[a] = { consumers: 1, elementId: void 0, panoramaElementId: void 0 } }, prepare: Ur() }, unregisterZIndexPortal: { reducer: (e, r) => { var { zIndex: a } = r.payload; e.zIndexMap[a] && (e.zIndexMap[a].consumers -= 1, e.zIndexMap[a].consumers <= 0 && !lZ(a) && delete e.zIndexMap[a]) }, prepare: Ur() }, registerZIndexPortalId: { reducer: (e, r) => { var { zIndex: a, elementId: s, isPanorama: n } = r.payload; e.zIndexMap[a] ? n ? e.zIndexMap[a].panoramaElementId = s : e.zIndexMap[a].elementId = s : e.zIndexMap[a] = { consumers: 0, elementId: n ? void 0 : s, panoramaElementId: n ? s : void 0 } }, prepare: Ur() }, unregisterZIndexPortalId: { reducer: (e, r) => { var { zIndex: a } = r.payload; e.zIndexMap[a] && (r.payload.isPanorama ? e.zIndexMap[a].panoramaElementId = void 0 : e.zIndexMap[a].elementId = void 0) }, prepare: Ur() } } }), { registerZIndexPortal: cZ, unregisterZIndexPortal: dZ, registerZIndexPortalId: uZ, unregisterZIndexPortalId: mZ } = MI.actions, gZ = MI.reducer; function ws(e) { var { zIndex: r, children: a } = e, s = XH(), n = s && r !== void 0 && r !== 0, i = Ha(), o = Tr(); h.useLayoutEffect(() => n ? (o(cZ({ zIndex: r })), () => { o(dZ({ zIndex: r })) }) : Om, [o, r, n]); var c = nt(m => eZ(m, r, i)); if (!n) return a; if (!c) return null; var u = document.getElementById(c); return u ? Ro.createPortal(a, u) : null } function kw() { return kw = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, kw.apply(null, arguments) } function fA(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function P0(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? fA(Object(a), !0).forEach(function (s) { hZ(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : fA(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function hZ(e, r, a) { return (r = fZ(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function fZ(e) { var r = xZ(e, "string"); return typeof r == "symbol" ? r : r + "" } function xZ(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function pZ(e) { var { cursor: r, cursorComp: a, cursorProps: s } = e; return h.isValidElement(r) ? h.cloneElement(r, s) : h.createElement(a, s) } function yZ(e) { var r, { coordinate: a, payload: s, index: n, offset: i, tooltipAxisBandSize: o, layout: c, cursor: u, tooltipEventType: m, chartName: g } = e, f = a, y = s, p = n; if (!u || !f || g !== "ScatterChart" && m !== "axis") return null; var b, j, v; if (g === "ScatterChart") b = f, j = QW, v = ga.cursorLine; else if (g === "BarChart") b = XW(c, f, i, o), j = D5, v = ga.cursorRectangle; else if (c === "radial" && g3(f)) { var { cx: S, cy: k, radius: E, startAngle: C, endAngle: N } = I5(f); b = { cx: S, cy: k, startAngle: C, endAngle: N, innerRadius: E, outerRadius: E }, j = R5, v = ga.cursorLine } else b = { points: UV(c, f, i) }, j = Vc, v = ga.cursorLine; var A = typeof u == "object" && "className" in u ? u.className : void 0, D = P0(P0(P0(P0({ stroke: "#ccc", pointerEvents: "none" }, i), b), Wl(u)), {}, { payload: y, payloadIndex: p, className: er("recharts-tooltip-cursor", A) }); return h.createElement(ws, { zIndex: (r = e.zIndex) !== null && r !== void 0 ? r : v }, h.createElement(pZ, { cursor: u, cursorComp: j, cursorProps: D })) } function vZ(e) { var r = UX(), a = f5(), s = ec(), n = OI(); return r == null || a == null || s == null || n == null ? null : h.createElement(yZ, kw({}, e, { offset: a, layout: s, tooltipAxisBandSize: r, chartName: n })) } var _I = h.createContext(null), bZ = () => h.useContext(_I), Fv = { exports: {} }, xA; function wZ() { return xA || (xA = 1, (function (e) { var r = Object.prototype.hasOwnProperty, a = "~"; function s() { } Object.create && (s.prototype = Object.create(null), new s().__proto__ || (a = !1)); function n(u, m, g) { this.fn = u, this.context = m, this.once = g || !1 } function i(u, m, g, f, y) { if (typeof g != "function") throw new TypeError("The listener must be a function"); var p = new n(g, f || u, y), b = a ? a + m : m; return u._events[b] ? u._events[b].fn ? u._events[b] = [u._events[b], p] : u._events[b].push(p) : (u._events[b] = p, u._eventsCount++), u } function o(u, m) { --u._eventsCount === 0 ? u._events = new s : delete u._events[m] } function c() { this._events = new s, this._eventsCount = 0 } c.prototype.eventNames = function () { var m = [], g, f; if (this._eventsCount === 0) return m; for (f in g = this._events) r.call(g, f) && m.push(a ? f.slice(1) : f); return Object.getOwnPropertySymbols ? m.concat(Object.getOwnPropertySymbols(g)) : m }, c.prototype.listeners = function (m) { var g = a ? a + m : m, f = this._events[g]; if (!f) return []; if (f.fn) return [f.fn]; for (var y = 0, p = f.length, b = new Array(p); y < p; y++)b[y] = f[y].fn; return b }, c.prototype.listenerCount = function (m) { var g = a ? a + m : m, f = this._events[g]; return f ? f.fn ? 1 : f.length : 0 }, c.prototype.emit = function (m, g, f, y, p, b) { var j = a ? a + m : m; if (!this._events[j]) return !1; var v = this._events[j], S = arguments.length, k, E; if (v.fn) { switch (v.once && this.removeListener(m, v.fn, void 0, !0), S) { case 1: return v.fn.call(v.context), !0; case 2: return v.fn.call(v.context, g), !0; case 3: return v.fn.call(v.context, g, f), !0; case 4: return v.fn.call(v.context, g, f, y), !0; case 5: return v.fn.call(v.context, g, f, y, p), !0; case 6: return v.fn.call(v.context, g, f, y, p, b), !0 }for (E = 1, k = new Array(S - 1); E < S; E++)k[E - 1] = arguments[E]; v.fn.apply(v.context, k) } else { var C = v.length, N; for (E = 0; E < C; E++)switch (v[E].once && this.removeListener(m, v[E].fn, void 0, !0), S) { case 1: v[E].fn.call(v[E].context); break; case 2: v[E].fn.call(v[E].context, g); break; case 3: v[E].fn.call(v[E].context, g, f); break; case 4: v[E].fn.call(v[E].context, g, f, y); break; default: if (!k) for (N = 1, k = new Array(S - 1); N < S; N++)k[N - 1] = arguments[N]; v[E].fn.apply(v[E].context, k) } } return !0 }, c.prototype.on = function (m, g, f) { return i(this, m, g, f, !1) }, c.prototype.once = function (m, g, f) { return i(this, m, g, f, !0) }, c.prototype.removeListener = function (m, g, f, y) { var p = a ? a + m : m; if (!this._events[p]) return this; if (!g) return o(this, p), this; var b = this._events[p]; if (b.fn) b.fn === g && (!y || b.once) && (!f || b.context === f) && o(this, p); else { for (var j = 0, v = [], S = b.length; j < S; j++)(b[j].fn !== g || y && !b[j].once || f && b[j].context !== f) && v.push(b[j]); v.length ? this._events[p] = v.length === 1 ? v[0] : v : o(this, p) } return this }, c.prototype.removeAllListeners = function (m) { var g; return m ? (g = a ? a + m : m, this._events[g] && o(this, g)) : (this._events = new s, this._eventsCount = 0), this }, c.prototype.off = c.prototype.removeListener, c.prototype.addListener = c.prototype.on, c.prefixed = a, c.EventEmitter = c, e.exports = c })(Fv)), Fv.exports } var jZ = wZ(); const NZ = mi(jZ); var fm = new NZ, Sw = "recharts.syncEvent.tooltip", pA = "recharts.syncEvent.brush"; function lx(e, r) { if (r) { var a = Number.parseInt(r, 10); if (!wn(a)) return e?.[a] } } var kZ = { chartName: "", tooltipPayloadSearcher: void 0, eventEmitter: void 0, defaultTooltipEventType: "axis" }, $I = Fs({ name: "options", initialState: kZ, reducers: { createEventEmitter: e => { e.eventEmitter == null && (e.eventEmitter = Symbol("rechartsEventEmitter")) } } }), SZ = $I.reducer, { createEventEmitter: CZ } = $I.actions; function EZ(e) { return e.tooltip.syncInteraction } var AZ = { chartData: void 0, computedData: void 0, dataStartIndex: 0, dataEndIndex: 0 }, UI = Fs({ name: "chartData", initialState: AZ, reducers: { setChartData(e, r) { if (e.chartData = r.payload, r.payload == null) { e.dataStartIndex = 0, e.dataEndIndex = 0; return } r.payload.length > 0 && e.dataEndIndex !== r.payload.length - 1 && (e.dataEndIndex = r.payload.length - 1) }, setComputedData(e, r) { e.computedData = r.payload }, setDataStartEndIndexes(e, r) { var { startIndex: a, endIndex: s } = r.payload; a != null && (e.dataStartIndex = a), s != null && (e.dataEndIndex = s) } } }), { setChartData: yA, setDataStartEndIndexes: PZ, setComputedData: Nue } = UI.actions, TZ = UI.reducer, DZ = ["x", "y"]; function vA(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function Pc(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? vA(Object(a), !0).forEach(function (s) { OZ(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : vA(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function OZ(e, r, a) { return (r = IZ(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function IZ(e) { var r = LZ(e, "string"); return typeof r == "symbol" ? r : r + "" } function LZ(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function RZ(e, r) { if (e == null) return {}; var a, s, n = MZ(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function MZ(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } function _Z() { var e = nt(oN), r = nt(lN), a = Tr(), s = nt(LO), n = nt(no), i = ec(), o = zf(), c = nt(u => u.rootProps.className); h.useEffect(() => { if (e == null) return Om; var u = (m, g, f) => { if (r !== f && e === m) { if (s === "index") { var y; if (o && g !== null && g !== void 0 && (y = g.payload) !== null && y !== void 0 && y.coordinate && g.payload.sourceViewBox) { var p = g.payload.coordinate, { x: b, y: j } = p, v = RZ(p, DZ), { x: S, y: k, width: E, height: C } = g.payload.sourceViewBox, N = Pc(Pc({}, v), {}, { x: o.x + (E ? (b - S) / E : 0) * o.width, y: o.y + (C ? (j - k) / C : 0) * o.height }); a(Pc(Pc({}, g), {}, { payload: Pc(Pc({}, g.payload), {}, { coordinate: N }) })) } else a(g); return } if (n != null) { var A; if (typeof s == "function") { var D = { activeTooltipIndex: g.payload.index == null ? void 0 : Number(g.payload.index), isTooltipActive: g.payload.active, activeIndex: g.payload.index == null ? void 0 : Number(g.payload.index), activeLabel: g.payload.label, activeDataKey: g.payload.dataKey, activeCoordinate: g.payload.coordinate }, I = s(n, D); A = n[I] } else s === "value" && (A = n.find(se => String(se.value) === g.payload.label)); var { coordinate: $ } = g.payload; if (A == null || g.payload.active === !1 || $ == null || o == null) { a(jw({ active: !1, coordinate: void 0, dataKey: void 0, index: null, label: void 0, sourceViewBox: void 0, graphicalItemId: void 0 })); return } var { x: B, y: W } = $, M = Math.min(B, o.x + o.width), q = Math.min(W, o.y + o.height), V = { x: i === "horizontal" ? A.coordinate : M, y: i === "horizontal" ? q : A.coordinate }, X = jw({ active: g.payload.active, coordinate: V, dataKey: g.payload.dataKey, index: String(A.index), label: g.payload.label, sourceViewBox: g.payload.sourceViewBox, graphicalItemId: g.payload.graphicalItemId }); a(X) } } }; return fm.on(Sw, u), () => { fm.off(Sw, u) } }, [c, a, r, e, s, n, i, o]) } function $Z() { var e = nt(oN), r = nt(lN), a = Tr(); h.useEffect(() => { if (e == null) return Om; var s = (n, i, o) => { r !== o && e === n && a(PZ(i)) }; return fm.on(pA, s), () => { fm.off(pA, s) } }, [a, r, e]) } function UZ() { var e = Tr(); h.useEffect(() => { e(CZ()) }, [e]), _Z(), $Z() } function FZ(e, r, a, s, n, i) { var o = nt(p => GX(p, e, r)), c = nt(lN), u = nt(oN), m = nt(LO), g = nt(EZ), f = g?.active, y = zf(); h.useEffect(() => { if (!f && u != null && c != null) { var p = jw({ active: i, coordinate: a, dataKey: o, index: n, label: typeof s == "number" ? String(s) : s, sourceViewBox: y, graphicalItemId: void 0 }); fm.emit(Sw, u, p, c) } }, [f, a, o, n, s, c, u, m, i, y]) } function bA(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function wA(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? bA(Object(a), !0).forEach(function (s) { zZ(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : bA(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function zZ(e, r, a) { return (r = BZ(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function BZ(e) { var r = qZ(e, "string"); return typeof r == "symbol" ? r : r + "" } function qZ(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function HZ(e) { return e.dataKey } function WZ(e, r) { return h.isValidElement(e) ? h.cloneElement(e, r) : typeof e == "function" ? h.createElement(e, r) : h.createElement(PW, r) } var jA = [], VZ = { allowEscapeViewBox: { x: !1, y: !1 }, animationDuration: 400, animationEasing: "ease", axisId: 0, contentStyle: {}, cursor: !0, filterNull: !0, isAnimationActive: "auto", itemSorter: "name", itemStyle: {}, labelStyle: {}, offset: 10, reverseDirection: { x: !1, y: !1 }, separator: " : ", trigger: "hover", useTranslate3d: !1, wrapperStyle: {} }; function Ba(e) { var r, a, s = sa(e, VZ), { active: n, allowEscapeViewBox: i, animationDuration: o, animationEasing: c, content: u, filterNull: m, isAnimationActive: g, offset: f, payloadUniqBy: y, position: p, reverseDirection: b, useTranslate3d: j, wrapperStyle: v, cursor: S, shared: k, trigger: E, defaultIndex: C, portal: N, axisId: A } = s, D = Tr(), I = typeof C == "number" ? String(C) : C; h.useEffect(() => { D(BQ({ shared: k, trigger: E, axisId: A, active: n, defaultIndex: I })) }, [D, k, E, A, n, I]); var $ = zf(), B = C5(), W = MQ(k), { activeIndex: M, isActive: q } = (r = nt(J => QX(J, W, E, I))) !== null && r !== void 0 ? r : {}, V = nt(J => YX(J, W, E, I)), X = nt(J => RI(J, W, E, I)), se = nt(J => KX(J, W, E, I)), le = V, ee = bZ(), L = (a = n ?? q) !== null && a !== void 0 ? a : !1, [z, T] = A3([le, L]), _ = W === "axis" ? X : void 0; FZ(W, E, se, _, M, L); var H = N ?? ee; if (H == null || $ == null || W == null) return null; var U = le ?? jA; L || (U = jA), m && U.length && (U = N3(U.filter(J => J.value != null && (J.hide !== !0 || s.includeHidden)), y, HZ)); var K = U.length > 0, Z = h.createElement(MW, { allowEscapeViewBox: i, animationDuration: o, animationEasing: c, isAnimationActive: g, active: L, coordinate: se, hasPayload: K, offset: f, position: p, reverseDirection: b, useTranslate3d: j, viewBox: $, wrapperStyle: v, lastBoundingBox: z, innerRef: T, hasPortalFromProps: !!N }, WZ(u, wA(wA({}, s), {}, { payload: U, label: _, active: L, activeIndex: M, coordinate: se, accessibilityLayer: B }))); return h.createElement(h.Fragment, null, Ro.createPortal(Z, H), L && h.createElement(vZ, { cursor: S, tooltipEventType: W, coordinate: se, payload: U, index: M })) } var tl = e => null; tl.displayName = "Cell"; function GZ(e, r, a) { return (r = KZ(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function KZ(e) { var r = YZ(e, "string"); return typeof r == "symbol" ? r : r + "" } function YZ(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } class QZ { constructor(r) { GZ(this, "cache", new Map), this.maxSize = r } get(r) { var a = this.cache.get(r); return a !== void 0 && (this.cache.delete(r), this.cache.set(r, a)), a } set(r, a) { if (this.cache.has(r)) this.cache.delete(r); else if (this.cache.size >= this.maxSize) { var s = this.cache.keys().next().value; s != null && this.cache.delete(s) } this.cache.set(r, a) } clear() { this.cache.clear() } size() { return this.cache.size } } function NA(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function XZ(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? NA(Object(a), !0).forEach(function (s) { ZZ(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : NA(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function ZZ(e, r, a) { return (r = JZ(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function JZ(e) { var r = eJ(e, "string"); return typeof r == "symbol" ? r : r + "" } function eJ(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var tJ = { cacheSize: 2e3, enableCache: !0 }, FI = XZ({}, tJ), kA = new QZ(FI.cacheSize), rJ = { position: "absolute", top: "-20000px", left: 0, padding: 0, margin: 0, border: "none", whiteSpace: "pre" }, SA = "recharts_measurement_span"; function aJ(e, r) { var a = r.fontSize || "", s = r.fontFamily || "", n = r.fontWeight || "", i = r.fontStyle || "", o = r.letterSpacing || "", c = r.textTransform || ""; return "".concat(e, "|").concat(a, "|").concat(s, "|").concat(n, "|").concat(i, "|").concat(o, "|").concat(c) } var CA = (e, r) => { try { var a = document.getElementById(SA); a || (a = document.createElement("span"), a.setAttribute("id", SA), a.setAttribute("aria-hidden", "true"), document.body.appendChild(a)), Object.assign(a.style, rJ, r), a.textContent = "".concat(e); var s = a.getBoundingClientRect(); return { width: s.width, height: s.height } } catch { return { width: 0, height: 0 } } }, Hu = function (r) { var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}; if (r == null || pd.isSsr) return { width: 0, height: 0 }; if (!FI.enableCache) return CA(r, a); var s = aJ(r, a), n = kA.get(s); if (n) return n; var i = CA(r, a); return kA.set(s, i), i }, EA = /(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/, AA = /(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/, sJ = /^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/, nJ = /(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/, zI = { cm: 96 / 2.54, mm: 96 / 25.4, pt: 96 / 72, pc: 96 / 6, in: 96, Q: 96 / (2.54 * 40), px: 1 }, iJ = Object.keys(zI), Fc = "NaN"; function oJ(e, r) { return e * zI[r] } class Ds { static parse(r) { var a, [, s, n] = (a = nJ.exec(r)) !== null && a !== void 0 ? a : []; return new Ds(parseFloat(s), n ?? "") } constructor(r, a) { this.num = r, this.unit = a, this.num = r, this.unit = a, wn(r) && (this.unit = ""), a !== "" && !sJ.test(a) && (this.num = NaN, this.unit = ""), iJ.includes(a) && (this.num = oJ(r, a), this.unit = "px") } add(r) { return this.unit !== r.unit ? new Ds(NaN, "") : new Ds(this.num + r.num, this.unit) } subtract(r) { return this.unit !== r.unit ? new Ds(NaN, "") : new Ds(this.num - r.num, this.unit) } multiply(r) { return this.unit !== "" && r.unit !== "" && this.unit !== r.unit ? new Ds(NaN, "") : new Ds(this.num * r.num, this.unit || r.unit) } divide(r) { return this.unit !== "" && r.unit !== "" && this.unit !== r.unit ? new Ds(NaN, "") : new Ds(this.num / r.num, this.unit || r.unit) } toString() { return "".concat(this.num).concat(this.unit) } isNaN() { return wn(this.num) } } function BI(e) { if (e.includes(Fc)) return Fc; for (var r = e; r.includes("*") || r.includes("/");) { var a, [, s, n, i] = (a = EA.exec(r)) !== null && a !== void 0 ? a : [], o = Ds.parse(s ?? ""), c = Ds.parse(i ?? ""), u = n === "*" ? o.multiply(c) : o.divide(c); if (u.isNaN()) return Fc; r = r.replace(EA, u.toString()) } for (; r.includes("+") || /.-\d+(?:\.\d+)?/.test(r);) { var m, [, g, f, y] = (m = AA.exec(r)) !== null && m !== void 0 ? m : [], p = Ds.parse(g ?? ""), b = Ds.parse(y ?? ""), j = f === "+" ? p.add(b) : p.subtract(b); if (j.isNaN()) return Fc; r = r.replace(AA, j.toString()) } return r } var PA = /\(([^()]*)\)/; function lJ(e) { for (var r = e, a; (a = PA.exec(r)) != null;) { var [, s] = a; r = r.replace(PA, BI(s)) } return r } function cJ(e) { var r = e.replace(/\s+/g, ""); return r = lJ(r), r = BI(r), r } function dJ(e) { try { return cJ(e) } catch { return Fc } } function zv(e) { var r = dJ(e.slice(5, -1)); return r === Fc ? "" : r } var uJ = ["x", "y", "lineHeight", "capHeight", "fill", "scaleToFit", "textAnchor", "verticalAnchor"], mJ = ["dx", "dy", "angle", "className", "breakAll"]; function Cw() { return Cw = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Cw.apply(null, arguments) } function TA(e, r) { if (e == null) return {}; var a, s, n = gJ(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function gJ(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } var qI = /[ \f\n\r\t\v\u2028\u2029]+/, HI = e => { var { children: r, breakAll: a, style: s } = e; try { var n = []; Lr(r) || (a ? n = r.toString().split("") : n = r.toString().split(qI)); var i = n.map(c => ({ word: c, width: Hu(c, s).width })), o = a ? 0 : Hu("", s).width; return { wordsWithComputedWidth: i, spaceWidth: o } } catch { return null } }; function hJ(e) { return e === "start" || e === "middle" || e === "end" || e === "inherit" } var WI = (e, r, a, s) => e.reduce((n, i) => { var { word: o, width: c } = i, u = n[n.length - 1]; if (u && c != null && (r == null || s || u.width + c + a < Number(r))) u.words.push(o), u.width += c + a; else { var m = { words: [o], width: c }; n.push(m) } return n }, []), VI = e => e.reduce((r, a) => r.width > a.width ? r : a), fJ = "", DA = (e, r, a, s, n, i, o, c) => { var u = e.slice(0, r), m = HI({ breakAll: a, style: s, children: u + fJ }); if (!m) return [!1, []]; var g = WI(m.wordsWithComputedWidth, i, o, c), f = g.length > n || VI(g).width > Number(i); return [f, g] }, xJ = (e, r, a, s, n) => { var { maxLines: i, children: o, style: c, breakAll: u } = e, m = rt(i), g = String(o), f = WI(r, s, a, n); if (!m || n) return f; var y = f.length > i || VI(f).width > Number(s); if (!y) return f; for (var p = 0, b = g.length - 1, j = 0, v; p <= b && j <= g.length - 1;) { var S = Math.floor((p + b) / 2), k = S - 1, [E, C] = DA(g, k, u, c, i, s, a, n), [N] = DA(g, S, u, c, i, s, a, n); if (!E && !N && (p = S + 1), E && N && (b = S - 1), !E && N) { v = C; break } j++ } return v || f }, OA = e => { var r = Lr(e) ? [] : e.toString().split(qI); return [{ words: r, width: void 0 }] }, pJ = e => { var { width: r, scaleToFit: a, children: s, style: n, breakAll: i, maxLines: o } = e; if ((r || a) && !pd.isSsr) { var c, u, m = HI({ breakAll: i, children: s, style: n }); if (m) { var { wordsWithComputedWidth: g, spaceWidth: f } = m; c = g, u = f } else return OA(s); return xJ({ breakAll: i, children: s, maxLines: o, style: n }, c, u, r, !!a) } return OA(s) }, GI = "#808080", yJ = { angle: 0, breakAll: !1, capHeight: "0.71em", fill: GI, lineHeight: "1em", scaleToFit: !1, textAnchor: "start", verticalAnchor: "end", x: 0, y: 0 }, cx = h.forwardRef((e, r) => { var a = sa(e, yJ), { x: s, y: n, lineHeight: i, capHeight: o, fill: c, scaleToFit: u, textAnchor: m, verticalAnchor: g } = a, f = TA(a, uJ), y = h.useMemo(() => pJ({ breakAll: f.breakAll, children: f.children, maxLines: f.maxLines, scaleToFit: u, style: f.style, width: f.width }), [f.breakAll, f.children, f.maxLines, u, f.style, f.width]), { dx: p, dy: b, angle: j, className: v, breakAll: S } = f, k = TA(f, mJ); if (!oi(s) || !oi(n) || y.length === 0) return null; var E = Number(s) + (rt(p) ? p : 0), C = Number(n) + (rt(b) ? b : 0); if (!Rr(E) || !Rr(C)) return null; var N; switch (g) { case "start": N = zv("calc(".concat(o, ")")); break; case "middle": N = zv("calc(".concat((y.length - 1) / 2, " * -").concat(i, " + (").concat(o, " / 2))")); break; default: N = zv("calc(".concat(y.length - 1, " * -").concat(i, ")")); break }var A = []; if (u) { var D = y[0].width, { width: I } = f; A.push("scale(".concat(rt(I) && rt(D) ? I / D : 1, ")")) } return j && A.push("rotate(".concat(j, ", ").concat(E, ", ").concat(C, ")")), A.length && (k.transform = A.join(" ")), h.createElement("text", Cw({}, ls(k), { ref: r, x: E, y: C, className: er("recharts-text", v), textAnchor: m, fill: c.includes("url") ? GI : c }), y.map(($, B) => { var W = $.words.join(S ? "" : " "); return h.createElement("tspan", { x: E, dy: B === 0 ? N : i, key: "".concat(W, "-").concat(B) }, W) })) }); cx.displayName = "Text"; var vJ = ["labelRef"]; function bJ(e, r) { if (e == null) return {}; var a, s, n = wJ(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function wJ(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } function IA(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function ca(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? IA(Object(a), !0).forEach(function (s) { jJ(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : IA(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function jJ(e, r, a) { return (r = NJ(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function NJ(e) { var r = kJ(e, "string"); return typeof r == "symbol" ? r : r + "" } function kJ(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function Li() { return Li = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Li.apply(null, arguments) } var KI = h.createContext(null), SJ = e => { var { x: r, y: a, upperWidth: s, lowerWidth: n, width: i, height: o, children: c } = e, u = h.useMemo(() => ({ x: r, y: a, upperWidth: s, lowerWidth: n, width: i, height: o }), [r, a, s, n, i, o]); return h.createElement(KI.Provider, { value: u }, c) }, YI = () => { var e = h.useContext(KI), r = zf(); return e || h5(r) }, CJ = h.createContext(null), EJ = () => { var e = h.useContext(CJ), r = nt(UO); return e || r }, AJ = e => { var { value: r, formatter: a } = e, s = Lr(e.children) ? r : e.children; return typeof a == "function" ? a(s) : s }, qN = e => e != null && typeof e == "function", PJ = (e, r) => { var a = Fa(r - e), s = Math.min(Math.abs(r - e), 360); return a * s }, TJ = (e, r, a, s, n) => {
    var { offset: i, className: o } = e, { cx: c, cy: u, innerRadius: m, outerRadius: g, startAngle: f, endAngle: y, clockWise: p } = n, b = (m + g) / 2, j = PJ(f, y), v = j >= 0 ? 1 : -1, S, k; switch (r) { case "insideStart": S = f + v * i, k = p; break; case "insideEnd": S = y - v * i, k = !p; break; case "end": S = y + v * i, k = p; break; default: throw new Error("Unsupported position ".concat(r)) }k = j <= 0 ? k : !k; var E = ba(c, u, b, S), C = ba(c, u, b, S + (k ? 1 : -1) * 359), N = "M".concat(E.x, ",").concat(E.y, `
    A`).concat(b, ",").concat(b, ",0,1,").concat(k ? 0 : 1, `,
    `).concat(C.x, ",").concat(C.y), A = Lr(e.id) ? tm("recharts-radial-line-") : e.id; return h.createElement("text", Li({}, s, { dominantBaseline: "central", className: er("recharts-radial-bar-label", o) }), h.createElement("defs", null, h.createElement("path", { id: A, d: N })), h.createElement("textPath", { xlinkHref: "#".concat(A) }, a))
}, DJ = (e, r, a) => { var { cx: s, cy: n, innerRadius: i, outerRadius: o, startAngle: c, endAngle: u } = e, m = (c + u) / 2; if (a === "outside") { var { x: g, y: f } = ba(s, n, o + r, m); return { x: g, y: f, textAnchor: g >= s ? "start" : "end", verticalAnchor: "middle" } } if (a === "center") return { x: s, y: n, textAnchor: "middle", verticalAnchor: "middle" }; if (a === "centerTop") return { x: s, y: n, textAnchor: "middle", verticalAnchor: "start" }; if (a === "centerBottom") return { x: s, y: n, textAnchor: "middle", verticalAnchor: "end" }; var y = (i + o) / 2, { x: p, y: b } = ba(s, n, y, m); return { x: p, y: b, textAnchor: "middle", verticalAnchor: "middle" } }, Ew = e => "cx" in e && rt(e.cx), OJ = (e, r) => { var { parentViewBox: a, offset: s, position: n } = e, i; a != null && !Ew(a) && (i = a); var { x: o, y: c, upperWidth: u, lowerWidth: m, height: g } = r, f = o, y = o + (u - m) / 2, p = (f + y) / 2, b = (u + m) / 2, j = f + u / 2, v = g >= 0 ? 1 : -1, S = v * s, k = v > 0 ? "end" : "start", E = v > 0 ? "start" : "end", C = u >= 0 ? 1 : -1, N = C * s, A = C > 0 ? "end" : "start", D = C > 0 ? "start" : "end"; if (n === "top") { var I = { x: f + u / 2, y: c - S, textAnchor: "middle", verticalAnchor: k }; return ca(ca({}, I), i ? { height: Math.max(c - i.y, 0), width: u } : {}) } if (n === "bottom") { var $ = { x: y + m / 2, y: c + g + S, textAnchor: "middle", verticalAnchor: E }; return ca(ca({}, $), i ? { height: Math.max(i.y + i.height - (c + g), 0), width: m } : {}) } if (n === "left") { var B = { x: p - N, y: c + g / 2, textAnchor: A, verticalAnchor: "middle" }; return ca(ca({}, B), i ? { width: Math.max(B.x - i.x, 0), height: g } : {}) } if (n === "right") { var W = { x: p + b + N, y: c + g / 2, textAnchor: D, verticalAnchor: "middle" }; return ca(ca({}, W), i ? { width: Math.max(i.x + i.width - W.x, 0), height: g } : {}) } var M = i ? { width: b, height: g } : {}; return n === "insideLeft" ? ca({ x: p + N, y: c + g / 2, textAnchor: D, verticalAnchor: "middle" }, M) : n === "insideRight" ? ca({ x: p + b - N, y: c + g / 2, textAnchor: A, verticalAnchor: "middle" }, M) : n === "insideTop" ? ca({ x: f + u / 2, y: c + S, textAnchor: "middle", verticalAnchor: E }, M) : n === "insideBottom" ? ca({ x: y + m / 2, y: c + g - S, textAnchor: "middle", verticalAnchor: k }, M) : n === "insideTopLeft" ? ca({ x: f + N, y: c + S, textAnchor: D, verticalAnchor: E }, M) : n === "insideTopRight" ? ca({ x: f + u - N, y: c + S, textAnchor: A, verticalAnchor: E }, M) : n === "insideBottomLeft" ? ca({ x: y + N, y: c + g - S, textAnchor: D, verticalAnchor: k }, M) : n === "insideBottomRight" ? ca({ x: y + m - N, y: c + g - S, textAnchor: A, verticalAnchor: k }, M) : n && typeof n == "object" && (rt(n.x) || Wi(n.x)) && (rt(n.y) || Wi(n.y)) ? ca({ x: o + os(n.x, b), y: c + os(n.y, g), textAnchor: "end", verticalAnchor: "end" }, M) : ca({ x: j, y: c + g / 2, textAnchor: "middle", verticalAnchor: "middle" }, M) }, IJ = { angle: 0, offset: 5, zIndex: ga.label, position: "middle", textBreakAll: !1 }; function Io(e) { var r = sa(e, IJ), { viewBox: a, position: s, value: n, children: i, content: o, className: c = "", textBreakAll: u, labelRef: m } = r, g = EJ(), f = YI(), y = s === "center" ? f : g ?? f, p, b, j; if (a == null ? p = y : Ew(a) ? p = a : p = h5(a), !p || Lr(n) && Lr(i) && !h.isValidElement(o) && typeof o != "function") return null; var v = ca(ca({}, r), {}, { viewBox: p }); if (h.isValidElement(o)) { var { labelRef: S } = v, k = bJ(v, vJ); return h.cloneElement(o, k) } if (typeof o == "function") { if (b = h.createElement(o, v), h.isValidElement(b)) return b } else b = AJ(r); var E = ls(r); if (Ew(p)) { if (s === "insideStart" || s === "insideEnd" || s === "end") return TJ(r, s, b, E, p); j = DJ(p, r.offset, r.position) } else j = OJ(r, p); return h.createElement(ws, { zIndex: r.zIndex }, h.createElement(cx, Li({ ref: m, className: er("recharts-label", c) }, E, j, { textAnchor: hJ(E.textAnchor) ? E.textAnchor : j.textAnchor, breakAll: u }), b)) } Io.displayName = "Label"; var LJ = (e, r, a) => { if (!e) return null; var s = { viewBox: r, labelRef: a }; return e === !0 ? h.createElement(Io, Li({ key: "label-implicit" }, s)) : oi(e) ? h.createElement(Io, Li({ key: "label-implicit", value: e }, s)) : h.isValidElement(e) ? e.type === Io ? h.cloneElement(e, ca({ key: "label-implicit" }, s)) : h.createElement(Io, Li({ key: "label-implicit", content: e }, s)) : qN(e) ? h.createElement(Io, Li({ key: "label-implicit", content: e }, s)) : e && typeof e == "object" ? h.createElement(Io, Li({}, e, { key: "label-implicit" }, s)) : null }; function RJ(e) { var { label: r, labelRef: a } = e, s = YI(); return LJ(r, s, a) || null } var Bv = {}, qv = {}, LA; function MJ() { return LA || (LA = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { return a[a.length - 1] } e.last = r })(qv)), qv } var Hv = {}, RA; function _J() { return RA || (RA = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { return Array.isArray(a) ? a : Array.from(a) } e.toArray = r })(Hv)), Hv } var MA; function $J() { return MA || (MA = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); const r = MJ(), a = _J(), s = yj(); function n(i) { if (s.isArrayLike(i)) return r.last(a.toArray(i)) } e.last = n })(Bv)), Bv } var Wv, _A; function UJ() { return _A || (_A = 1, Wv = $J().last), Wv } var FJ = UJ(); const zJ = mi(FJ); var BJ = ["valueAccessor"], qJ = ["dataKey", "clockWise", "id", "textBreakAll", "zIndex"]; function Qh() { return Qh = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Qh.apply(null, arguments) } function $A(e, r) { if (e == null) return {}; var a, s, n = HJ(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function HJ(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } var WJ = e => Array.isArray(e.value) ? zJ(e.value) : e.value, QI = h.createContext(void 0), HN = QI.Provider, XI = h.createContext(void 0), VJ = XI.Provider; function GJ() { return h.useContext(QI) } function KJ() { return h.useContext(XI) } function G0(e) { var { valueAccessor: r = WJ } = e, a = $A(e, BJ), { dataKey: s, clockWise: n, id: i, textBreakAll: o, zIndex: c } = a, u = $A(a, qJ), m = GJ(), g = KJ(), f = m || g; return !f || !f.length ? null : h.createElement(ws, { zIndex: c ?? ga.label }, h.createElement(aa, { className: "recharts-label-list" }, f.map((y, p) => { var b, j = Lr(s) ? r(y, p) : xr(y && y.payload, s), v = Lr(i) ? {} : { id: "".concat(i, "-").concat(p) }; return h.createElement(Io, Qh({ key: "label-".concat(p) }, ls(y), u, v, { fill: (b = a.fill) !== null && b !== void 0 ? b : y.fill, parentViewBox: y.parentViewBox, value: j, textBreakAll: o, viewBox: y.viewBox, index: p, zIndex: 0 })) }))) } G0.displayName = "LabelList"; function dx(e) { var { label: r } = e; return r ? r === !0 ? h.createElement(G0, { key: "labelList-implicit" }) : h.isValidElement(r) || qN(r) ? h.createElement(G0, { key: "labelList-implicit", content: r }) : typeof r == "object" ? h.createElement(G0, Qh({ key: "labelList-implicit" }, r, { type: String(r.type) })) : null : null } function Aw() { return Aw = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Aw.apply(null, arguments) } var ZI = e => { var { cx: r, cy: a, r: s, className: n } = e, i = er("recharts-dot", n); return rt(r) && rt(a) && rt(s) ? h.createElement("circle", Aw({}, vs(e), pj(e), { className: i, cx: r, cy: a, r: s })) : null }, JI = e => e.graphicalItems.polarItems, YJ = be([qr, Wm], gN), ux = be([JI, Zr, YJ], hN), QJ = be([ux], fN), mx = be([QJ, aN], xN), XJ = be([mx, Zr, ux], yN); be([mx, Zr, ux], (e, r, a) => a.length > 0 ? e.flatMap(s => a.flatMap(n => { var i, o = xr(s, (i = r.dataKey) !== null && i !== void 0 ? i : n.dataKey); return { value: o, errorDomain: [] } })).filter(Boolean) : r?.dataKey != null ? e.map(s => ({ value: xr(s, r.dataKey), errorDomain: [] })) : e.map(s => ({ value: s, errorDomain: [] }))); var UA = () => { }, ZJ = be([mx, Zr, ux, nx, qr], jN), JJ = be([Zr, bN, wN, UA, ZJ, UA, Wt, qr], NN), e6 = be([Zr, Wt, mx, XJ, Hm, qr, JJ], kN), eee = be([e6, Zr, Sd], EN); be([Zr, e6, eee, qr], PN); var tee = { radiusAxis: {}, angleAxis: {} }, t6 = Fs({ name: "polarAxis", initialState: tee, reducers: { addRadiusAxis(e, r) { e.radiusAxis[r.payload.id] = r.payload }, removeRadiusAxis(e, r) { delete e.radiusAxis[r.payload.id] }, addAngleAxis(e, r) { e.angleAxis[r.payload.id] = r.payload }, removeAngleAxis(e, r) { delete e.angleAxis[r.payload.id] } } }), { addRadiusAxis: kue, removeRadiusAxis: Sue, addAngleAxis: Cue, removeAngleAxis: Eue } = t6.actions, ree = t6.reducer; function FA(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function zA(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? FA(Object(a), !0).forEach(function (s) { aee(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : FA(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function aee(e, r, a) { return (r = see(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function see(e) { var r = nee(e, "string"); return typeof r == "symbol" ? r : r + "" } function nee(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var iee = (e, r) => r, WN = be([JI, iee], (e, r) => e.filter(a => a.type === "pie").find(a => a.id === r)), oee = [], VN = (e, r, a) => a?.length === 0 ? oee : a, r6 = be([aN, WN, VN], (e, r, a) => { var { chartData: s } = e; if (r != null) { var n; if (r?.data != null && r.data.length > 0 ? n = r.data : n = s, (!n || !n.length) && a != null && (n = a.map(i => zA(zA({}, r.presentationProps), i.props))), n != null) return n } }), lee = be([r6, WN, VN], (e, r, a) => { if (!(e == null || r == null)) return e.map((s, n) => { var i, o = xr(s, r.nameKey, r.name), c; return a != null && (i = a[n]) !== null && i !== void 0 && (i = i.props) !== null && i !== void 0 && i.fill ? c = a[n].props.fill : typeof s == "object" && s != null && "fill" in s ? c = s.fill : c = r.fill, { value: Xo(o, r.dataKey), color: c, payload: s, type: r.legendType } }) }), cee = be([r6, WN, VN, Aa], (e, r, a, s) => { if (!(r == null || e == null)) return dte({ offset: s, pieSettings: r, displayedData: e, cells: a }) }), Vv = { exports: {} }, br = {}; var BA; function dee() { if (BA) return br; BA = 1; var e = Symbol.for("react.transitional.element"), r = Symbol.for("react.portal"), a = Symbol.for("react.fragment"), s = Symbol.for("react.strict_mode"), n = Symbol.for("react.profiler"), i = Symbol.for("react.consumer"), o = Symbol.for("react.context"), c = Symbol.for("react.forward_ref"), u = Symbol.for("react.suspense"), m = Symbol.for("react.suspense_list"), g = Symbol.for("react.memo"), f = Symbol.for("react.lazy"), y = Symbol.for("react.view_transition"), p = Symbol.for("react.client.reference"); function b(j) { if (typeof j == "object" && j !== null) { var v = j.$$typeof; switch (v) { case e: switch (j = j.type, j) { case a: case n: case s: case u: case m: case y: return j; default: switch (j = j && j.$$typeof, j) { case o: case c: case f: case g: return j; case i: return j; default: return v } }case r: return v } } } return br.ContextConsumer = i, br.ContextProvider = o, br.Element = e, br.ForwardRef = c, br.Fragment = a, br.Lazy = f, br.Memo = g, br.Portal = r, br.Profiler = n, br.StrictMode = s, br.Suspense = u, br.SuspenseList = m, br.isContextConsumer = function (j) { return b(j) === i }, br.isContextProvider = function (j) { return b(j) === o }, br.isElement = function (j) { return typeof j == "object" && j !== null && j.$$typeof === e }, br.isForwardRef = function (j) { return b(j) === c }, br.isFragment = function (j) { return b(j) === a }, br.isLazy = function (j) { return b(j) === f }, br.isMemo = function (j) { return b(j) === g }, br.isPortal = function (j) { return b(j) === r }, br.isProfiler = function (j) { return b(j) === n }, br.isStrictMode = function (j) { return b(j) === s }, br.isSuspense = function (j) { return b(j) === u }, br.isSuspenseList = function (j) { return b(j) === m }, br.isValidElementType = function (j) { return typeof j == "string" || typeof j == "function" || j === a || j === n || j === s || j === u || j === m || typeof j == "object" && j !== null && (j.$$typeof === f || j.$$typeof === g || j.$$typeof === o || j.$$typeof === i || j.$$typeof === c || j.$$typeof === p || j.getModuleId !== void 0) }, br.typeOf = b, br } var qA; function uee() { return qA || (qA = 1, Vv.exports = dee()), Vv.exports } var mee = uee(), HA = e => typeof e == "string" ? e : e ? e.displayName || e.name || "Component" : "", WA = null, Gv = null, a6 = e => { if (e === WA && Array.isArray(Gv)) return Gv; var r = []; return h.Children.forEach(e, a => { Lr(a) || (mee.isFragment(a) ? r = r.concat(a6(a.props.children)) : r.push(a)) }), Gv = r, WA = e, r }; function GN(e, r) { var a = [], s = []; return Array.isArray(r) ? s = r.map(n => HA(n)) : s = [HA(r)], a6(e).forEach(n => { var i = Vl(n, "type.displayName") || Vl(n, "type.name"); i && s.indexOf(i) !== -1 && a.push(n) }), a } var KN = e => e && typeof e == "object" && "clipDot" in e ? !!e.clipDot : !0, Kv = {}, VA; function gee() { return VA || (VA = 1, (function (e) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }); function r(a) { if (typeof a != "object" || a == null) return !1; if (Object.getPrototypeOf(a) === null) return !0; if (Object.prototype.toString.call(a) !== "[object Object]") { const n = a[Symbol.toStringTag]; return n == null || !Object.getOwnPropertyDescriptor(a, Symbol.toStringTag)?.writable ? !1 : a.toString() === `[object ${n}]` } let s = a; for (; Object.getPrototypeOf(s) !== null;)s = Object.getPrototypeOf(s); return Object.getPrototypeOf(a) === s } e.isPlainObject = r })(Kv)), Kv } var Yv, GA; function hee() { return GA || (GA = 1, Yv = gee().isPlainObject), Yv } var fee = hee(); const xee = mi(fee); function KA(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function YA(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? KA(Object(a), !0).forEach(function (s) { pee(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : KA(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function pee(e, r, a) { return (r = yee(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function yee(e) { var r = vee(e, "string"); return typeof r == "symbol" ? r : r + "" } function vee(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function Xh() { return Xh = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Xh.apply(null, arguments) } var QA = (e, r, a, s, n) => { var i = a - s, o; return o = "M ".concat(e, ",").concat(r), o += "L ".concat(e + a, ",").concat(r), o += "L ".concat(e + a - i / 2, ",").concat(r + n), o += "L ".concat(e + a - i / 2 - s, ",").concat(r + n), o += "L ".concat(e, ",").concat(r, " Z"), o }, bee = { x: 0, y: 0, upperWidth: 0, lowerWidth: 0, height: 0, isUpdateAnimationActive: !1, animationBegin: 0, animationDuration: 1500, animationEasing: "ease" }, wee = e => { var r = sa(e, bee), { x: a, y: s, upperWidth: n, lowerWidth: i, height: o, className: c } = r, { animationEasing: u, animationDuration: m, animationBegin: g, isUpdateAnimationActive: f } = r, y = h.useRef(null), [p, b] = h.useState(-1), j = h.useRef(n), v = h.useRef(i), S = h.useRef(o), k = h.useRef(a), E = h.useRef(s), C = vd(e, "trapezoid-"); if (h.useEffect(() => { if (y.current && y.current.getTotalLength) try { var V = y.current.getTotalLength(); V && b(V) } catch { } }, []), a !== +a || s !== +s || n !== +n || i !== +i || o !== +o || n === 0 && i === 0 || o === 0) return null; var N = er("recharts-trapezoid", c); if (!f) return h.createElement("g", null, h.createElement("path", Xh({}, ls(r), { className: N, d: QA(a, s, n, i, o) }))); var A = j.current, D = v.current, I = S.current, $ = k.current, B = E.current, W = "0px ".concat(p === -1 ? 1 : p, "px"), M = "".concat(p, "px 0px"), q = E5(["strokeDasharray"], m, u); return h.createElement(yd, { animationId: C, key: C, canBegin: p > 0, duration: m, easing: u, isActive: f, begin: g }, V => { var X = cr(A, n, V), se = cr(D, i, V), le = cr(I, o, V), ee = cr($, a, V), L = cr(B, s, V); y.current && (j.current = X, v.current = se, S.current = le, k.current = ee, E.current = L); var z = V > 0 ? { transition: q, strokeDasharray: M } : { strokeDasharray: W }; return h.createElement("path", Xh({}, ls(r), { className: N, d: QA(ee, L, X, se, le), ref: y, style: YA(YA({}, z), r.style) })) }) }, jee = ["option", "shapeType", "propTransformer", "activeClassName"]; function Nee(e, r) { if (e == null) return {}; var a, s, n = kee(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function kee(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } function XA(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function Zh(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? XA(Object(a), !0).forEach(function (s) { See(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : XA(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function See(e, r, a) { return (r = Cee(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function Cee(e) { var r = Eee(e, "string"); return typeof r == "symbol" ? r : r + "" } function Eee(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function Aee(e, r) { return Zh(Zh({}, r), e) } function Pee(e, r) { return e === "symbols" } function ZA(e) { var { shapeType: r, elementProps: a } = e; switch (r) { case "rectangle": return h.createElement(D5, a); case "trapezoid": return h.createElement(wee, a); case "sector": return h.createElement(R5, a); case "symbols": if (Pee(r)) return h.createElement(xj, a); break; case "curve": return h.createElement(Vc, a); default: return null } } function Tee(e) { return h.isValidElement(e) ? e.props : e } function YN(e) { var { option: r, shapeType: a, propTransformer: s = Aee, activeClassName: n = "recharts-active-shape" } = e, i = Nee(e, jee), o; if (h.isValidElement(r)) o = h.cloneElement(r, Zh(Zh({}, i), Tee(r))); else if (typeof r == "function") o = r(i, i.index); else if (xee(r) && typeof r != "boolean") { var c = s(r, i); o = h.createElement(ZA, { shapeType: a, elementProps: c }) } else { var u = i; o = h.createElement(ZA, { shapeType: a, elementProps: u }) } return i.isActive ? h.createElement(aa, { className: n }, o) : o } var QN = (e, r, a) => { var s = Tr(); return (n, i) => o => { e?.(n, i, o), s(xI({ activeIndex: String(i), activeDataKey: r, activeCoordinate: n.tooltipPosition, activeGraphicalItemId: a })) } }, XN = e => { var r = Tr(); return (a, s) => n => { e?.(a, s, n), r(qQ()) } }, ZN = (e, r, a) => { var s = Tr(); return (n, i) => o => { e?.(n, i, o), s(HQ({ activeIndex: String(i), activeDataKey: r, activeCoordinate: n.tooltipPosition, activeGraphicalItemId: a })) } }; function gx(e) { var { tooltipEntrySettings: r } = e, a = Tr(), s = Ha(), n = h.useRef(null); return h.useLayoutEffect(() => { s || (n.current === null ? a(UQ(r)) : n.current !== r && a(FQ({ prev: n.current, next: r })), n.current = r) }, [r, a, s]), h.useLayoutEffect(() => () => { n.current && (a(zQ(n.current)), n.current = null) }, [a]), null } function JN(e) { var { legendPayload: r } = e, a = Tr(), s = Ha(), n = h.useRef(null); return h.useLayoutEffect(() => { s || (n.current === null ? a(N5(r)) : n.current !== r && a(k5({ prev: n.current, next: r })), n.current = r) }, [a, s, r]), h.useLayoutEffect(() => () => { n.current && (a(S5(n.current)), n.current = null) }, [a]), null } function Dee(e) { var { legendPayload: r } = e, a = Tr(), s = nt(Wt), n = h.useRef(null); return h.useLayoutEffect(() => { s !== "centric" && s !== "radial" || (n.current === null ? a(N5(r)) : n.current !== r && a(k5({ prev: n.current, next: r })), n.current = r) }, [a, s, r]), h.useLayoutEffect(() => () => { n.current && (a(S5(n.current)), n.current = null) }, [a]), null } var Qv, Oee = () => { var [e] = h.useState(() => tm("uid-")); return e }, Iee = (Qv = oT.useId) !== null && Qv !== void 0 ? Qv : Oee; function s6(e, r) { var a = Iee(); return r || (e ? "".concat(e, "-").concat(a) : a) } var Lee = h.createContext(void 0), hx = e => { var { id: r, type: a, children: s } = e, n = s6("recharts-".concat(a), r); return h.createElement(Lee.Provider, { value: n }, s(n)) }, Ree = { cartesianItems: [], polarItems: [] }, n6 = Fs({ name: "graphicalItems", initialState: Ree, reducers: { addCartesianGraphicalItem: { reducer(e, r) { e.cartesianItems.push(r.payload) }, prepare: Ur() }, replaceCartesianGraphicalItem: { reducer(e, r) { var { prev: a, next: s } = r.payload, n = Un(e).cartesianItems.indexOf(a); n > -1 && (e.cartesianItems[n] = s) }, prepare: Ur() }, removeCartesianGraphicalItem: { reducer(e, r) { var a = Un(e).cartesianItems.indexOf(r.payload); a > -1 && e.cartesianItems.splice(a, 1) }, prepare: Ur() }, addPolarGraphicalItem: { reducer(e, r) { e.polarItems.push(r.payload) }, prepare: Ur() }, removePolarGraphicalItem: { reducer(e, r) { var a = Un(e).polarItems.indexOf(r.payload); a > -1 && e.polarItems.splice(a, 1) }, prepare: Ur() } } }), { addCartesianGraphicalItem: Mee, replaceCartesianGraphicalItem: _ee, removeCartesianGraphicalItem: $ee, addPolarGraphicalItem: Uee, removePolarGraphicalItem: Fee } = n6.actions, zee = n6.reducer, Bee = e => { var r = Tr(), a = h.useRef(null); return h.useLayoutEffect(() => { a.current === null ? r(Mee(e)) : a.current !== e && r(_ee({ prev: a.current, next: e })), a.current = e }, [r, e]), h.useLayoutEffect(() => () => { a.current && (r($ee(a.current)), a.current = null) }, [r]), null }, ek = h.memo(Bee); function qee(e) { var r = Tr(); return h.useLayoutEffect(() => (r(Uee(e)), () => { r(Fee(e)) }), [r, e]), null } var Hee = ["key"], Wee = ["onMouseEnter", "onClick", "onMouseLeave"], Vee = ["id"], Gee = ["id"]; function JA(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function ta(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? JA(Object(a), !0).forEach(function (s) { Kee(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : JA(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function Kee(e, r, a) { return (r = Yee(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function Yee(e) { var r = Qee(e, "string"); return typeof r == "symbol" ? r : r + "" } function Qee(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function Go() { return Go = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Go.apply(null, arguments) } function fx(e, r) { if (e == null) return {}; var a, s, n = Xee(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function Xee(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } function Zee(e) { var r = h.useMemo(() => GN(e.children, tl), [e.children]), a = nt(s => lee(s, e.id, r)); return a == null ? null : h.createElement(Dee, { legendPayload: a }) } var Jee = h.memo(e => { var { dataKey: r, nameKey: a, sectors: s, stroke: n, strokeWidth: i, fill: o, name: c, hide: u, tooltipType: m } = e, g = { dataDefinedOnItem: s.map(f => f.tooltipPayload), positions: s.map(f => f.tooltipPosition), settings: { stroke: n, strokeWidth: i, fill: o, dataKey: r, nameKey: a, name: Xo(c, r), hide: u, type: m, color: o, unit: "" } }; return h.createElement(gx, { tooltipEntrySettings: g }) }), ete = (e, r) => e > r ? "start" : e < r ? "end" : "middle", tte = (e, r, a) => os(typeof r == "function" ? r(e) : r, a, a * .8), rte = (e, r, a) => { var { top: s, left: n, width: i, height: o } = r, c = O5(i, o), u = n + os(e.cx, i, i / 2), m = s + os(e.cy, o, o / 2), g = os(e.innerRadius, c, 0), f = tte(a, e.outerRadius, c), y = e.maxRadius || Math.sqrt(i * i + o * o) / 2; return { cx: u, cy: m, innerRadius: g, outerRadius: f, maxRadius: y } }, ate = (e, r) => { var a = Fa(r - e), s = Math.min(Math.abs(r - e), 360); return a * s }; function ste(e) { return e && typeof e == "object" && "className" in e && typeof e.className == "string" ? e.className : "" } var nte = (e, r) => { if (h.isValidElement(e)) return h.cloneElement(e, r); if (typeof e == "function") return e(r); var a = er("recharts-pie-label-line", typeof e != "boolean" ? e.className : ""), { key: s } = r, n = fx(r, Hee); return h.createElement(Vc, Go({}, n, { type: "linear", className: a })) }, ite = (e, r, a) => { if (h.isValidElement(e)) return h.cloneElement(e, r); var s = a; if (typeof e == "function" && (s = e(r), h.isValidElement(s))) return s; var n = er("recharts-pie-label-text", ste(e)); return h.createElement(cx, Go({}, r, { alignmentBaseline: "middle", className: n }), s) }; function ote(e) { var { sectors: r, props: a, showLabels: s } = e, { label: n, labelLine: i, dataKey: o } = a; if (!s || !n || !r) return null; var c = vs(a), u = Wl(n), m = Wl(i), g = typeof n == "object" && "offsetRadius" in n && typeof n.offsetRadius == "number" && n.offsetRadius || 20, f = r.map((y, p) => { var b = (y.startAngle + y.endAngle) / 2, j = ba(y.cx, y.cy, y.outerRadius + g, b), v = ta(ta(ta(ta({}, c), y), {}, { stroke: "none" }, u), {}, { index: p, textAnchor: ete(j.x, y.cx) }, j), S = ta(ta(ta(ta({}, c), y), {}, { fill: "none", stroke: y.fill }, m), {}, { index: p, points: [ba(y.cx, y.cy, y.outerRadius, b), j], key: "line" }); return h.createElement(ws, { zIndex: ga.label, key: "label-".concat(y.startAngle, "-").concat(y.endAngle, "-").concat(y.midAngle, "-").concat(p) }, h.createElement(aa, null, i && nte(i, S), ite(n, v, xr(y, o)))) }); return h.createElement(aa, { className: "recharts-pie-labels" }, f) } function lte(e) { var { sectors: r, props: a, showLabels: s } = e, { label: n } = a; return typeof n == "object" && n != null && "position" in n ? h.createElement(dx, { label: n }) : h.createElement(ote, { sectors: r, props: a, showLabels: s }) } function cte(e) { var { sectors: r, activeShape: a, inactiveShape: s, allOtherPieProps: n, shape: i, id: o } = e, c = nt(Vo), u = nt($N), m = nt(PX), { onMouseEnter: g, onClick: f, onMouseLeave: y } = n, p = fx(n, Wee), b = QN(g, n.dataKey, o), j = XN(y), v = ZN(f, n.dataKey, o); return r == null || r.length === 0 ? null : h.createElement(h.Fragment, null, r.map((S, k) => { if (S?.startAngle === 0 && S?.endAngle === 0 && r.length !== 1) return null; var E = m == null || m === o, C = String(k) === c && (u == null || n.dataKey === u) && E, N = c ? s : null, A = a && C ? a : N, D = ta(ta({}, S), {}, { stroke: S.stroke, tabIndex: -1, [c5]: k, [d5]: n.dataKey }); return h.createElement(aa, Go({ key: "sector-".concat(S?.startAngle, "-").concat(S?.endAngle, "-").concat(S.midAngle, "-").concat(k), tabIndex: -1, className: "recharts-pie-sector" }, Im(p, S, k), { onMouseEnter: b(S, k), onMouseLeave: j(S, k), onClick: v(S, k) }), h.createElement(YN, Go({ option: i ?? A, index: k, shapeType: "sector", isActive: C }, D))) })) } function dte(e) { var r, { pieSettings: a, displayedData: s, cells: n, offset: i } = e, { cornerRadius: o, startAngle: c, endAngle: u, dataKey: m, nameKey: g, tooltipType: f } = a, y = Math.abs(a.minAngle), p = ate(c, u), b = Math.abs(p), j = s.length <= 1 ? 0 : (r = a.paddingAngle) !== null && r !== void 0 ? r : 0, v = s.filter(A => xr(A, m, 0) !== 0).length, S = (b >= 360 ? v : v - 1) * j, k = b - v * y - S, E = s.reduce((A, D) => { var I = xr(D, m, 0); return A + (rt(I) ? I : 0) }, 0), C; if (E > 0) { var N; C = s.map((A, D) => { var I = xr(A, m, 0), $ = xr(A, g, D), B = rte(a, i, A), W = (rt(I) ? I : 0) / E, M, q = ta(ta({}, A), n && n[D] && n[D].props); D ? M = N.endAngle + Fa(p) * j * (I !== 0 ? 1 : 0) : M = c; var V = M + Fa(p) * ((I !== 0 ? y : 0) + W * k), X = (M + V) / 2, se = (B.innerRadius + B.outerRadius) / 2, le = [{ name: $, value: I, payload: q, dataKey: m, type: f }], ee = ba(B.cx, B.cy, se, X); return N = ta(ta(ta(ta({}, a.presentationProps), {}, { percent: W, cornerRadius: typeof o == "string" ? parseFloat(o) : o, name: $, tooltipPayload: le, midAngle: X, middleRadius: se, tooltipPosition: ee }, q), B), {}, { value: I, dataKey: m, startAngle: M, endAngle: V, payload: q, paddingAngle: Fa(p) * j }), N }) } return C } function ute(e) { var { showLabels: r, sectors: a, children: s } = e, n = h.useMemo(() => !r || !a ? [] : a.map(i => ({ value: i.value, payload: i.payload, clockWise: !1, parentViewBox: void 0, viewBox: { cx: i.cx, cy: i.cy, innerRadius: i.innerRadius, outerRadius: i.outerRadius, startAngle: i.startAngle, endAngle: i.endAngle, clockWise: !1 }, fill: i.fill })), [a, r]); return h.createElement(VJ, { value: r ? n : void 0 }, s) } function mte(e) { var { props: r, previousSectorsRef: a, id: s } = e, { sectors: n, isAnimationActive: i, animationBegin: o, animationDuration: c, animationEasing: u, activeShape: m, inactiveShape: g, onAnimationStart: f, onAnimationEnd: y } = r, p = vd(r, "recharts-pie-"), b = a.current, [j, v] = h.useState(!1), S = h.useCallback(() => { typeof y == "function" && y(), v(!1) }, [y]), k = h.useCallback(() => { typeof f == "function" && f(), v(!0) }, [f]); return h.createElement(ute, { showLabels: !j, sectors: n }, h.createElement(yd, { animationId: p, begin: o, duration: c, isActive: i, easing: u, onAnimationStart: k, onAnimationEnd: S, key: p }, E => { var C = [], N = n && n[0], A = N?.startAngle; return n?.forEach((D, I) => { var $ = b && b[I], B = I > 0 ? Vl(D, "paddingAngle", 0) : 0; if ($) { var W = cr($.endAngle - $.startAngle, D.endAngle - D.startAngle, E), M = ta(ta({}, D), {}, { startAngle: A + B, endAngle: A + W + B }); C.push(M), A = M.endAngle } else { var { endAngle: q, startAngle: V } = D, X = cr(0, q - V, E), se = ta(ta({}, D), {}, { startAngle: A + B, endAngle: A + X + B }); C.push(se), A = se.endAngle } }), a.current = C, h.createElement(aa, null, h.createElement(cte, { sectors: C, activeShape: m, inactiveShape: g, allOtherPieProps: r, shape: r.shape, id: s })) }), h.createElement(lte, { showLabels: !j, sectors: n, props: r }), r.children) } var gte = { animationBegin: 400, animationDuration: 1500, animationEasing: "ease", cx: "50%", cy: "50%", dataKey: "value", endAngle: 360, fill: "#808080", hide: !1, innerRadius: 0, isAnimationActive: "auto", label: !1, labelLine: !0, legendType: "rect", minAngle: 0, nameKey: "name", outerRadius: "80%", paddingAngle: 0, rootTabIndex: 0, startAngle: 0, stroke: "#fff", zIndex: ga.area }; function hte(e) { var { id: r } = e, a = fx(e, Vee), { hide: s, className: n, rootTabIndex: i } = e, o = h.useMemo(() => GN(e.children, tl), [e.children]), c = nt(g => cee(g, r, o)), u = h.useRef(null), m = er("recharts-pie", n); return s || c == null ? (u.current = null, h.createElement(aa, { tabIndex: i, className: m })) : h.createElement(ws, { zIndex: e.zIndex }, h.createElement(Jee, { dataKey: e.dataKey, nameKey: e.nameKey, sectors: c, stroke: e.stroke, strokeWidth: e.strokeWidth, fill: e.fill, name: e.name, hide: e.hide, tooltipType: e.tooltipType }), h.createElement(aa, { tabIndex: i, className: m }, h.createElement(mte, { props: ta(ta({}, a), {}, { sectors: c }), previousSectorsRef: u, id: r }))) } function tg(e) { var r = sa(e, gte), { id: a } = r, s = fx(r, Gee), n = vs(s); return h.createElement(hx, { id: a, type: "pie" }, i => h.createElement(h.Fragment, null, h.createElement(qee, { type: "pie", id: i, data: s.data, dataKey: s.dataKey, hide: s.hide, angleAxisId: 0, radiusAxisId: 0, name: s.name, nameKey: s.nameKey, tooltipType: s.tooltipType, legendType: s.legendType, fill: s.fill, cx: s.cx, cy: s.cy, startAngle: s.startAngle, endAngle: s.endAngle, paddingAngle: s.paddingAngle, minAngle: s.minAngle, innerRadius: s.innerRadius, outerRadius: s.outerRadius, cornerRadius: s.cornerRadius, presentationProps: n, maxRadius: r.maxRadius }), h.createElement(Zee, Go({}, s, { id: i })), h.createElement(hte, Go({}, s, { id: i })))) } tg.displayName = "Pie"; var fte = ["points"]; function eP(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function Xv(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? eP(Object(a), !0).forEach(function (s) { xte(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : eP(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function xte(e, r, a) { return (r = pte(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function pte(e) { var r = yte(e, "string"); return typeof r == "symbol" ? r : r + "" } function yte(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function Jh() { return Jh = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Jh.apply(null, arguments) } function vte(e, r) { if (e == null) return {}; var a, s, n = bte(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function bte(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } function wte(e) { var { option: r, dotProps: a, className: s } = e; if (h.isValidElement(r)) return h.cloneElement(r, a); if (typeof r == "function") return r(a); var n = er(s, typeof r != "boolean" ? r.className : ""), i = a ?? {}, { points: o } = i, c = vte(i, fte); return h.createElement(ZI, Jh({}, c, { className: n })) } function jte(e, r) { return e == null ? !1 : r ? !0 : e.length === 1 } function i6(e) { var { points: r, dot: a, className: s, dotClassName: n, dataKey: i, baseProps: o, needClip: c, clipPathId: u, zIndex: m = ga.scatter } = e; if (!jte(r, a)) return null; var g = KN(a), f = KF(a), y = r.map((b, j) => { var v, S, k = Xv(Xv(Xv({ r: 3 }, o), f), {}, { index: j, cx: (v = b.x) !== null && v !== void 0 ? v : void 0, cy: (S = b.y) !== null && S !== void 0 ? S : void 0, dataKey: i, value: b.value, payload: b.payload, points: r }); return h.createElement(wte, { key: "dot-".concat(j), option: a, dotProps: k, className: n }) }), p = {}; return c && u != null && (p.clipPath = "url(#clipPath-".concat(g ? "" : "dots-").concat(u, ")")), h.createElement(ws, { zIndex: m }, h.createElement(aa, Jh({ className: s }, p), y)) } function tP(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function rP(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? tP(Object(a), !0).forEach(function (s) { Nte(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : tP(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function Nte(e, r, a) { return (r = kte(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function kte(e) { var r = Ste(e, "string"); return typeof r == "symbol" ? r : r + "" } function Ste(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var Cte = { xAxis: {}, yAxis: {}, zAxis: {} }, o6 = Fs({ name: "cartesianAxis", initialState: Cte, reducers: { addXAxis: { reducer(e, r) { e.xAxis[r.payload.id] = r.payload }, prepare: Ur() }, replaceXAxis: { reducer(e, r) { var { prev: a, next: s } = r.payload; e.xAxis[a.id] !== void 0 && (a.id !== s.id && delete e.xAxis[a.id], e.xAxis[s.id] = s) }, prepare: Ur() }, removeXAxis: { reducer(e, r) { delete e.xAxis[r.payload.id] }, prepare: Ur() }, addYAxis: { reducer(e, r) { e.yAxis[r.payload.id] = r.payload }, prepare: Ur() }, replaceYAxis: { reducer(e, r) { var { prev: a, next: s } = r.payload; e.yAxis[a.id] !== void 0 && (a.id !== s.id && delete e.yAxis[a.id], e.yAxis[s.id] = s) }, prepare: Ur() }, removeYAxis: { reducer(e, r) { delete e.yAxis[r.payload.id] }, prepare: Ur() }, addZAxis: { reducer(e, r) { e.zAxis[r.payload.id] = r.payload }, prepare: Ur() }, replaceZAxis: { reducer(e, r) { var { prev: a, next: s } = r.payload; e.zAxis[a.id] !== void 0 && (a.id !== s.id && delete e.zAxis[a.id], e.zAxis[s.id] = s) }, prepare: Ur() }, removeZAxis: { reducer(e, r) { delete e.zAxis[r.payload.id] }, prepare: Ur() }, updateYAxisWidth(e, r) { var { id: a, width: s } = r.payload, n = e.yAxis[a]; if (n) { var i = n.widthHistory || []; if (i.length === 3 && i[0] === i[2] && s === i[1] && s !== n.width && Math.abs(s - i[0]) <= 1) return; var o = [...i, s].slice(-3); e.yAxis[a] = rP(rP({}, e.yAxis[a]), {}, { width: s, widthHistory: o }) } } } }), { addXAxis: Ete, replaceXAxis: Ate, removeXAxis: Pte, addYAxis: Tte, replaceYAxis: Dte, removeYAxis: Ote, addZAxis: Aue, replaceZAxis: Pue, removeZAxis: Tue, updateYAxisWidth: Ite } = o6.actions, Lte = o6.reducer, Rte = be([Aa], e => ({ top: e.top, bottom: e.bottom, left: e.left, right: e.right })), Mte = be([Rte, eo, to], (e, r, a) => { if (!(!e || r == null || a == null)) return { x: e.left, y: e.top, width: Math.max(0, r - e.left - e.right), height: Math.max(0, a - e.top - e.bottom) } }), xx = () => nt(Mte), _te = () => nt(LX); function aP(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function Zv(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? aP(Object(a), !0).forEach(function (s) { $te(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : aP(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function $te(e, r, a) { return (r = Ute(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function Ute(e) { var r = Fte(e, "string"); return typeof r == "symbol" ? r : r + "" } function Fte(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var zte = e => { var { point: r, childIndex: a, mainColor: s, activeDot: n, dataKey: i, clipPath: o } = e; if (n === !1 || r.x == null || r.y == null) return null; var c = { index: a, dataKey: i, cx: r.x, cy: r.y, r: 4, fill: s ?? "none", strokeWidth: 2, stroke: "#fff", payload: r.payload, value: r.value }, u = Zv(Zv(Zv({}, c), Wl(n)), pj(n)), m; return h.isValidElement(n) ? m = h.cloneElement(n, u) : typeof n == "function" ? m = n(u) : m = h.createElement(ZI, u), h.createElement(aa, { className: "recharts-active-dot", clipPath: o }, m) }; function Pw(e) { var { points: r, mainColor: a, activeDot: s, itemDataKey: n, clipPath: i, zIndex: o = ga.activeDot } = e, c = nt(Vo), u = _te(); if (r == null || u == null) return null; var m = r.find(g => u.includes(g.payload)); return Lr(m) ? null : h.createElement(ws, { zIndex: o }, h.createElement(zte, { point: m, childIndex: Number(c), mainColor: a, dataKey: n, activeDot: s, clipPath: i })) } var Bte = "Invariant failed"; function qte(e, r) { throw new Error(Bte) } var Hte = ["x", "y"]; function Tw() { return Tw = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Tw.apply(null, arguments) } function sP(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function Su(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? sP(Object(a), !0).forEach(function (s) { Wte(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : sP(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function Wte(e, r, a) { return (r = Vte(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function Vte(e) { var r = Gte(e, "string"); return typeof r == "symbol" ? r : r + "" } function Gte(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function Kte(e, r) { if (e == null) return {}; var a, s, n = Yte(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function Yte(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } function Qte(e, r) { var { x: a, y: s } = e, n = Kte(e, Hte), i = "".concat(a), o = parseInt(i, 10), c = "".concat(s), u = parseInt(c, 10), m = "".concat(r.height || n.height), g = parseInt(m, 10), f = "".concat(r.width || n.width), y = parseInt(f, 10); return Su(Su(Su(Su(Su({}, r), n), o ? { x: o } : {}), u ? { y: u } : {}), {}, { height: g, width: y, name: r.name, radius: r.radius }) } function ef(e) { return h.createElement(YN, Tw({ shapeType: "rectangle", propTransformer: Qte, activeClassName: "recharts-active-bar" }, e)) } var Xte = function (r) { var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0; return (s, n) => { if (rt(r)) return r; var i = rt(s) || Lr(s); return i ? r(s, n) : (i || qte(), a) } }, Zte = {}, l6 = Fs({ name: "errorBars", initialState: Zte, reducers: { addErrorBar: (e, r) => { var { itemId: a, errorBar: s } = r.payload; e[a] || (e[a] = []), e[a].push(s) }, replaceErrorBar: (e, r) => { var { itemId: a, prev: s, next: n } = r.payload; e[a] && (e[a] = e[a].map(i => i.dataKey === s.dataKey && i.direction === s.direction ? n : i)) }, removeErrorBar: (e, r) => { var { itemId: a, errorBar: s } = r.payload; e[a] && (e[a] = e[a].filter(n => n.dataKey !== s.dataKey || n.direction !== s.direction)) } } }), { addErrorBar: Due, replaceErrorBar: Oue, removeErrorBar: Iue } = l6.actions, Jte = l6.reducer, ere = ["children"]; function tre(e, r) { if (e == null) return {}; var a, s, n = rre(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function rre(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } var are = { data: [], xAxisId: "xAxis-0", yAxisId: "yAxis-0", dataPointFormatter: () => ({ x: 0, y: 0, value: 0 }), errorBarOffset: 0 }, sre = h.createContext(are); function c6(e) { var { children: r } = e, a = tre(e, ere); return h.createElement(sre.Provider, { value: a }, r) } function px(e, r) { var a, s, n = nt(m => ao(m, e)), i = nt(m => so(m, r)), o = (a = n?.allowDataOverflow) !== null && a !== void 0 ? a : Ra.allowDataOverflow, c = (s = i?.allowDataOverflow) !== null && s !== void 0 ? s : Ma.allowDataOverflow, u = o || c; return { needClip: u, needClipX: o, needClipY: c } } function tk(e) { var { xAxisId: r, yAxisId: a, clipPathId: s } = e, n = xx(), { needClipX: i, needClipY: o, needClip: c } = px(r, a); if (!c || !n) return null; var { x: u, y: m, width: g, height: f } = n; return h.createElement("clipPath", { id: "clipPath-".concat(s) }, h.createElement("rect", { x: i ? u : u - g / 2, y: o ? m : m - f / 2, width: i ? g : g * 2, height: o ? f : f * 2 })) } function nre(e, r) { return e && typeof e == "object" && "zIndex" in e && typeof e.zIndex == "number" && Rr(e.zIndex) ? e.zIndex : r } var Jv = { exports: {} }, eb = {}; var nP; function ire() { if (nP) return eb; nP = 1; var e = ld(); function r(u, m) { return u === m && (u !== 0 || 1 / u === 1 / m) || u !== u && m !== m } var a = typeof Object.is == "function" ? Object.is : r, s = e.useSyncExternalStore, n = e.useRef, i = e.useEffect, o = e.useMemo, c = e.useDebugValue; return eb.useSyncExternalStoreWithSelector = function (u, m, g, f, y) { var p = n(null); if (p.current === null) { var b = { hasValue: !1, value: null }; p.current = b } else b = p.current; p = o(function () { function v(N) { if (!S) { if (S = !0, k = N, N = f(N), y !== void 0 && b.hasValue) { var A = b.value; if (y(A, N)) return E = A } return E = N } if (A = E, a(k, N)) return A; var D = f(N); return y !== void 0 && y(A, D) ? (k = N, A) : (k = N, E = D) } var S = !1, k, E, C = g === void 0 ? null : g; return [function () { return v(m()) }, C === null ? void 0 : function () { return v(C()) }] }, [m, g, f, y]); var j = s(u, p[0], p[1]); return i(function () { b.hasValue = !0, b.value = j }, [j]), c(j), j }, eb } var iP; function ore() { return iP || (iP = 1, Jv.exports = ire()), Jv.exports } ore(); function lre(e) { e() } function cre() { let e = null, r = null; return { clear() { e = null, r = null }, notify() { lre(() => { let a = e; for (; a;)a.callback(), a = a.next }) }, get() { const a = []; let s = e; for (; s;)a.push(s), s = s.next; return a }, subscribe(a) { let s = !0; const n = r = { callback: a, next: null, prev: r }; return n.prev ? n.prev.next = n : e = n, function () { !s || e === null || (s = !1, n.next ? n.next.prev = n.prev : r = n.prev, n.prev ? n.prev.next = n.next : e = n.next) } } } } var oP = { notify() { }, get: () => [] }; function dre(e, r) { let a, s = oP, n = 0, i = !1; function o(j) { g(); const v = s.subscribe(j); let S = !1; return () => { S || (S = !0, v(), f()) } } function c() { s.notify() } function u() { b.onStateChange && b.onStateChange() } function m() { return i } function g() { n++, a || (a = e.subscribe(u), s = cre()) } function f() { n--, a && n === 0 && (a(), a = void 0, s.clear(), s = oP) } function y() { i || (i = !0, g()) } function p() { i && (i = !1, f()) } const b = { addNestedSub: o, notifyNestedSubs: c, handleChangeWrapper: u, isSubscribed: m, trySubscribe: y, tryUnsubscribe: p, getListeners: () => s }; return b } var ure = () => typeof window < "u" && typeof window.document < "u" && typeof window.document.createElement < "u", mre = ure(), gre = () => typeof navigator < "u" && navigator.product === "ReactNative", hre = gre(), fre = () => mre || hre ? h.useLayoutEffect : h.useEffect, xre = fre(); function lP(e, r) { return e === r ? e !== 0 || r !== 0 || 1 / e === 1 / r : e !== e && r !== r } function pre(e, r) { if (lP(e, r)) return !0; if (typeof e != "object" || e === null || typeof r != "object" || r === null) return !1; const a = Object.keys(e), s = Object.keys(r); if (a.length !== s.length) return !1; for (let n = 0; n < a.length; n++)if (!Object.prototype.hasOwnProperty.call(r, a[n]) || !lP(e[a[n]], r[a[n]])) return !1; return !0 } var yre = Symbol.for("react-redux-context"), vre = typeof globalThis < "u" ? globalThis : {}; function bre() { if (!h.createContext) return {}; const e = vre[yre] ??= new Map; let r = e.get(h.createContext); return r || (r = h.createContext(null), e.set(h.createContext, r)), r } var wre = bre(); function jre(e) { const { children: r, context: a, serverState: s, store: n } = e, i = h.useMemo(() => { const u = dre(n); return { store: n, subscription: u, getServerState: s ? () => s : void 0 } }, [n, s]), o = h.useMemo(() => n.getState(), [n]); xre(() => { const { subscription: u } = i; return u.onStateChange = u.notifyNestedSubs, u.trySubscribe(), o !== n.getState() && u.notifyNestedSubs(), () => { u.tryUnsubscribe(), u.onStateChange = void 0 } }, [i, o]); const c = a || wre; return h.createElement(c.Provider, { value: i }, r) } var Nre = jre, kre = new Set(["axisLine", "tickLine", "activeBar", "activeDot", "activeLabel", "activeShape", "allowEscapeViewBox", "background", "cursor", "dot", "label", "line", "margin", "padding", "position", "shape", "style", "tick", "wrapperStyle"]); function Sre(e, r) { return e == null && r == null ? !0 : typeof e == "number" && typeof r == "number" ? e === r || e !== e && r !== r : e === r } function rg(e, r) { var a = new Set([...Object.keys(e), ...Object.keys(r)]); for (var s of a) if (kre.has(s)) { if (e[s] == null && r[s] == null) continue; if (!pre(e[s], r[s])) return !1 } else if (!Sre(e[s], r[s])) return !1; return !0 } var Cre = ["onMouseEnter", "onMouseLeave", "onClick"], Ere = ["value", "background", "tooltipPosition"], Are = ["id"], Pre = ["onMouseEnter", "onClick", "onMouseLeave"]; function Xi() { return Xi = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Xi.apply(null, arguments) } function cP(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function ms(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? cP(Object(a), !0).forEach(function (s) { Tre(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : cP(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function Tre(e, r, a) { return (r = Dre(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function Dre(e) { var r = Ore(e, "string"); return typeof r == "symbol" ? r : r + "" } function Ore(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function tf(e, r) { if (e == null) return {}; var a, s, n = Ire(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function Ire(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } var Lre = e => { var { dataKey: r, name: a, fill: s, legendType: n, hide: i } = e; return [{ inactive: i, dataKey: r, type: n, color: s, value: Xo(a, r), payload: e }] }, Rre = h.memo(e => { var { dataKey: r, stroke: a, strokeWidth: s, fill: n, name: i, hide: o, unit: c, tooltipType: u } = e, m = { dataDefinedOnItem: void 0, positions: void 0, settings: { stroke: a, strokeWidth: s, fill: n, dataKey: r, nameKey: void 0, name: Xo(i, r), hide: o, type: u, color: n, unit: c } }; return h.createElement(gx, { tooltipEntrySettings: m }) }); function Mre(e) { var r = nt(Vo), { data: a, dataKey: s, background: n, allOtherBarProps: i } = e, { onMouseEnter: o, onMouseLeave: c, onClick: u } = i, m = tf(i, Cre), g = QN(o, s), f = XN(c), y = ZN(u, s); if (!n || a == null) return null; var p = Wl(n); return h.createElement(ws, { zIndex: nre(n, ga.barBackground) }, a.map((b, j) => { var { value: v, background: S, tooltipPosition: k } = b, E = tf(b, Ere); if (!S) return null; var C = g(b, j), N = f(b, j), A = y(b, j), D = ms(ms(ms(ms(ms({ option: n, isActive: String(j) === r }, E), {}, { fill: "#eee" }, S), p), Im(m, b, j)), {}, { onMouseEnter: C, onMouseLeave: N, onClick: A, dataKey: s, index: j, className: "recharts-bar-background-rectangle" }); return h.createElement(ef, Xi({ key: "background-bar-".concat(j) }, D)) })) } function _re(e) { var { showLabels: r, children: a, rects: s } = e, n = s?.map(i => { var o = { x: i.x, y: i.y, width: i.width, lowerWidth: i.width, upperWidth: i.width, height: i.height }; return ms(ms({}, o), {}, { value: i.value, payload: i.payload, parentViewBox: i.parentViewBox, viewBox: o, fill: i.fill }) }); return h.createElement(HN, { value: r ? n : void 0 }, a) } function $re(e) { var { shape: r, activeBar: a, baseProps: s, entry: n, index: i, dataKey: o } = e, c = nt(Vo), u = nt($N), m = a && String(i) === c && (u == null || o === u), g = m ? a : r; return m ? h.createElement(ws, { zIndex: ga.activeBar }, h.createElement(ef, Xi({}, s, { name: String(s.name) }, n, { isActive: m, option: g, index: i, dataKey: o }))) : h.createElement(ef, Xi({}, s, { name: String(s.name) }, n, { isActive: m, option: g, index: i, dataKey: o })) } function Ure(e) { var { shape: r, baseProps: a, entry: s, index: n, dataKey: i } = e; return h.createElement(ef, Xi({}, a, { name: String(a.name) }, s, { isActive: !1, option: r, index: n, dataKey: i })) } function Fre(e) { var r, { data: a, props: s } = e, n = (r = vs(s)) !== null && r !== void 0 ? r : {}, { id: i } = n, o = tf(n, Are), { shape: c, dataKey: u, activeBar: m } = s, { onMouseEnter: g, onClick: f, onMouseLeave: y } = s, p = tf(s, Pre), b = QN(g, u), j = XN(y), v = ZN(f, u); return a ? h.createElement(h.Fragment, null, a.map((S, k) => h.createElement(aa, Xi({ key: "rectangle-".concat(S?.x, "-").concat(S?.y, "-").concat(S?.value, "-").concat(k), className: "recharts-bar-rectangle" }, Im(p, S, k), { onMouseEnter: b(S, k), onMouseLeave: j(S, k), onClick: v(S, k) }), m ? h.createElement($re, { shape: c, activeBar: m, baseProps: o, entry: S, index: k, dataKey: u }) : h.createElement(Ure, { shape: c, baseProps: o, entry: S, index: k, dataKey: u })))) : null } function zre(e) { var { props: r, previousRectanglesRef: a } = e, { data: s, layout: n, isAnimationActive: i, animationBegin: o, animationDuration: c, animationEasing: u, onAnimationEnd: m, onAnimationStart: g } = r, f = a.current, y = vd(r, "recharts-bar-"), [p, b] = h.useState(!1), j = !p, v = h.useCallback(() => { typeof m == "function" && m(), b(!1) }, [m]), S = h.useCallback(() => { typeof g == "function" && g(), b(!0) }, [g]); return h.createElement(_re, { showLabels: j, rects: s }, h.createElement(yd, { animationId: y, begin: o, duration: c, isActive: i, easing: u, onAnimationEnd: v, onAnimationStart: S, key: y }, k => { var E = k === 1 ? s : s?.map((C, N) => { var A = f && f[N]; if (A) return ms(ms({}, C), {}, { x: cr(A.x, C.x, k), y: cr(A.y, C.y, k), width: cr(A.width, C.width, k), height: cr(A.height, C.height, k) }); if (n === "horizontal") { var D = cr(0, C.height, k), I = cr(C.stackedBarStart, C.y, k); return ms(ms({}, C), {}, { y: I, height: D }) } var $ = cr(0, C.width, k), B = cr(C.stackedBarStart, C.x, k); return ms(ms({}, C), {}, { width: $, x: B }) }); return k > 0 && (a.current = E ?? null), E == null ? null : h.createElement(aa, null, h.createElement(Fre, { props: r, data: E })) }), h.createElement(dx, { label: r.label }), r.children) } function Bre(e) { var r = h.useRef(null); return h.createElement(zre, { previousRectanglesRef: r, props: e }) } var d6 = 0, qre = (e, r) => { var a = Array.isArray(e.value) ? e.value[1] : e.value; return { x: e.x, y: e.y, value: a, errorVal: xr(e, r) } }; class Hre extends h.PureComponent { render() { var { hide: r, data: a, dataKey: s, className: n, xAxisId: i, yAxisId: o, needClip: c, background: u, id: m } = this.props; if (r || a == null) return null; var g = er("recharts-bar", n), f = m; return h.createElement(aa, { className: g, id: m }, c && h.createElement("defs", null, h.createElement(tk, { clipPathId: f, xAxisId: i, yAxisId: o })), h.createElement(aa, { className: "recharts-bar-rectangles", clipPath: c ? "url(#clipPath-".concat(f, ")") : void 0 }, h.createElement(Mre, { data: a, dataKey: s, background: u, allOtherBarProps: this.props }), h.createElement(Bre, this.props))) } } var Wre = { activeBar: !1, animationBegin: 0, animationDuration: 400, animationEasing: "ease", background: !1, hide: !1, isAnimationActive: "auto", label: !1, legendType: "rect", minPointSize: d6, xAxisId: 0, yAxisId: 0, zIndex: ga.bar }; function Vre(e) { var { xAxisId: r, yAxisId: a, hide: s, legendType: n, minPointSize: i, activeBar: o, animationBegin: c, animationDuration: u, animationEasing: m, isAnimationActive: g } = e, { needClip: f } = px(r, a), y = ec(), p = Ha(), b = GN(e.children, tl), j = nt(k => bae(k, r, a, p, e.id, b)); if (y !== "vertical" && y !== "horizontal") return null; var v, S = j?.[0]; return S == null || S.height == null || S.width == null ? v = 0 : v = y === "vertical" ? S.height / 2 : S.width / 2, h.createElement(c6, { xAxisId: r, yAxisId: a, data: j, dataPointFormatter: qre, errorBarOffset: v }, h.createElement(Hre, Xi({}, e, { layout: y, needClip: f, data: j, xAxisId: r, yAxisId: a, hide: s, legendType: n, minPointSize: i, activeBar: o, animationBegin: c, animationDuration: u, animationEasing: m, isAnimationActive: g }))) } function Gre(e) { var { layout: r, barSettings: { dataKey: a, minPointSize: s }, pos: n, bandSize: i, xAxis: o, yAxis: c, xAxisTicks: u, yAxisTicks: m, stackedData: g, displayedData: f, offset: y, cells: p, parentViewBox: b, dataStartIndex: j } = e, v = r === "horizontal" ? c : o, S = g ? v.scale.domain() : null, k = hH({ numericAxis: v }), E = v.scale(k); return f.map((C, N) => { var A, D, I, $, B, W; g ? A = cH(g[N + j], S) : (A = xr(C, a), Array.isArray(A) || (A = [k, A])); var M = Xte(s, d6)(A[1], N); if (r === "horizontal") { var q, [V, X] = [c.scale(A[0]), c.scale(A[1])]; D = C4({ axis: o, ticks: u, bandSize: i, offset: n.offset, entry: C, index: N }), I = (q = X ?? V) !== null && q !== void 0 ? q : void 0, $ = n.size; var se = V - X; if (B = wn(se) ? 0 : se, W = { x: D, y: y.top, width: $, height: y.height }, Math.abs(M) > 0 && Math.abs(B) < Math.abs(M)) { var le = Fa(B || M) * (Math.abs(M) - Math.abs(B)); I -= le, B += le } } else { var [ee, L] = [o.scale(A[0]), o.scale(A[1])]; if (D = ee, I = C4({ axis: c, ticks: m, bandSize: i, offset: n.offset, entry: C, index: N }), $ = L - ee, B = n.size, W = { x: y.left, y: I, width: y.width, height: B }, Math.abs(M) > 0 && Math.abs($) < Math.abs(M)) { var z = Fa($ || M) * (Math.abs(M) - Math.abs($)); $ += z } } if (D == null || I == null || $ == null || B == null) return null; var T = ms(ms({}, C), {}, { stackedBarStart: E, x: D, y: I, width: $, height: B, value: g ? A : A[1], payload: C, background: W, tooltipPosition: { x: D + $ / 2, y: I + B / 2 }, parentViewBox: b }, p && p[N] && p[N].props); return T }).filter(Boolean) } function Kre(e) { var r = sa(e, Wre), a = Ha(); return h.createElement(hx, { id: r.id, type: "bar" }, s => h.createElement(h.Fragment, null, h.createElement(JN, { legendPayload: Lre(r) }), h.createElement(Rre, { dataKey: r.dataKey, stroke: r.stroke, strokeWidth: r.strokeWidth, fill: r.fill, name: r.name, hide: r.hide, unit: r.unit, tooltipType: r.tooltipType }), h.createElement(ek, { type: "bar", id: s, data: void 0, xAxisId: r.xAxisId, yAxisId: r.yAxisId, zAxisId: 0, dataKey: r.dataKey, stackId: o5(r.stackId), hide: r.hide, barSize: r.barSize, minPointSize: r.minPointSize, maxBarSize: r.maxBarSize, isPanorama: a }), h.createElement(ws, { zIndex: r.zIndex }, h.createElement(Vre, Xi({}, r, { id: s }))))) } var qn = h.memo(Kre, rg); qn.displayName = "Bar"; function dP(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function T0(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? dP(Object(a), !0).forEach(function (s) { Yre(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : dP(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function Yre(e, r, a) { return (r = Qre(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function Qre(e) { var r = Xre(e, "string"); return typeof r == "symbol" ? r : r + "" } function Xre(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var Zre = (e, r) => r, Jre = (e, r, a) => a, eae = (e, r, a, s) => s, tae = (e, r, a, s, n) => n, ag = be([Gm, tae], (e, r) => e.filter(a => a.type === "bar").find(a => a.id === r)), rae = be([ag], e => e?.maxBarSize), aae = (e, r, a, s, n, i) => i, uP = (e, r, a) => { var s = a ?? e; if (!Lr(s)) return os(s, r, 0) }, sae = be([Wt, Gm, Zre, Jre, eae], (e, r, a, s, n) => r.filter(i => e === "horizontal" ? i.xAxisId === a : i.yAxisId === s).filter(i => i.isPanorama === n).filter(i => i.hide === !1).filter(i => i.type === "bar")), nae = (e, r, a, s) => { var n = Wt(e); return n === "horizontal" ? hm(e, "yAxis", a, s) : hm(e, "xAxis", r, s) }, iae = (e, r, a) => { var s = Wt(e); return s === "horizontal" ? nA(e, "xAxis", r) : nA(e, "yAxis", a) }, oae = (e, r, a) => { var s = {}, n = e.filter(tx), i = e.filter(m => m.stackId == null), o = n.reduce((m, g) => (m[g.stackId] || (m[g.stackId] = []), m[g.stackId].push(g), m), s), c = Object.entries(o).map(m => { var [g, f] = m, y = f.map(b => b.dataKey), p = uP(r, a, f[0].barSize); return { stackId: g, dataKeys: y, barSize: p } }), u = i.map(m => { var g = [m.dataKey].filter(y => y != null), f = uP(r, a, m.barSize); return { stackId: void 0, dataKeys: g, barSize: f } }); return [...c, ...u] }, lae = be([sae, DY, iae], oae), cae = (e, r, a, s, n) => { var i, o, c = ag(e, r, a, s, n); if (c != null) { var u = Wt(e), m = DO(e), { maxBarSize: g } = c, f = Lr(g) ? m : g, y, p; return u === "horizontal" ? (y = ui(e, "xAxis", r, s), p = di(e, "xAxis", r, s)) : (y = ui(e, "yAxis", a, s), p = di(e, "yAxis", a, s)), (i = (o = Ho(y, p, !0)) !== null && o !== void 0 ? o : f) !== null && i !== void 0 ? i : 0 } }, u6 = (e, r, a, s) => { var n = Wt(e), i, o; return n === "horizontal" ? (i = ui(e, "xAxis", r, s), o = di(e, "xAxis", r, s)) : (i = ui(e, "yAxis", a, s), o = di(e, "yAxis", a, s)), Ho(i, o) }; function dae(e, r, a, s, n) { var i = s.length; if (!(i < 1)) { var o = os(e, a, 0, !0), c, u = []; if (Rr(s[0].barSize)) { var m = !1, g = a / i, f = s.reduce((S, k) => S + (k.barSize || 0), 0); f += (i - 1) * o, f >= a && (f -= (i - 1) * o, o = 0), f >= a && g > 0 && (m = !0, g *= .9, f = i * g); var y = (a - f) / 2 >> 0, p = { offset: y - o, size: 0 }; c = s.reduce((S, k) => { var E, C = { stackId: k.stackId, dataKeys: k.dataKeys, position: { offset: p.offset + p.size + o, size: m ? g : (E = k.barSize) !== null && E !== void 0 ? E : 0 } }, N = [...S, C]; return p = N[N.length - 1].position, N }, u) } else { var b = os(r, a, 0, !0); a - 2 * b - (i - 1) * o <= 0 && (o = 0); var j = (a - 2 * b - (i - 1) * o) / i; j > 1 && (j >>= 0); var v = Rr(n) ? Math.min(j, n) : j; c = s.reduce((S, k, E) => [...S, { stackId: k.stackId, dataKeys: k.dataKeys, position: { offset: b + (j + o) * E + (j - v) / 2, size: v } }], u) } return c } } var uae = (e, r, a, s, n, i, o) => { var c = Lr(o) ? r : o, u = dae(a, s, n !== i ? n : i, e, c); return n !== i && u != null && (u = u.map(m => T0(T0({}, m), {}, { position: T0(T0({}, m.position), {}, { offset: m.position.offset - n / 2 }) }))), u }, mae = be([lae, DO, TY, OO, cae, u6, rae], uae), gae = (e, r, a, s) => ui(e, "xAxis", r, s), hae = (e, r, a, s) => ui(e, "yAxis", a, s), fae = (e, r, a, s) => di(e, "xAxis", r, s), xae = (e, r, a, s) => di(e, "yAxis", a, s), pae = be([mae, ag], (e, r) => { if (!(e == null || r == null)) { var a = e.find(s => s.stackId === r.stackId && r.dataKey != null && s.dataKeys.includes(r.dataKey)); if (a != null) return a.position } }), yae = (e, r) => { var a = ex(r); if (!(!e || a == null || r == null)) { var { stackId: s } = r; if (s != null) { var n = e[s]; if (n) { var { stackedData: i } = n; if (i) return i.find(o => o.key === a) } } } }, vae = be([nae, ag], yae), bae = be([Aa, Aj, gae, hae, fae, xae, pae, Wt, qm, u6, vae, ag, aae], (e, r, a, s, n, i, o, c, u, m, g, f, y) => { var { chartData: p, dataStartIndex: b, dataEndIndex: j } = u; if (!(f == null || o == null || r == null || c !== "horizontal" && c !== "vertical" || a == null || s == null || n == null || i == null || m == null)) { var { data: v } = f, S; if (v != null && v.length > 0 ? S = v : S = p?.slice(b, j + 1), S != null) return Gre({ layout: c, barSettings: f, pos: o, parentViewBox: r, bandSize: m, xAxis: a, yAxis: s, xAxisTicks: n, yAxisTicks: i, stackedData: g, displayedData: S, offset: e, cells: y, dataStartIndex: b }) } }), m6 = e => { var { chartData: r } = e, a = Tr(), s = Ha(); return h.useEffect(() => s ? () => { } : (a(yA(r)), () => { a(yA(void 0)) }), [r, a, s]), null }, mP = { x: 0, y: 0, width: 0, height: 0, padding: { top: 0, right: 0, bottom: 0, left: 0 } }, g6 = Fs({ name: "brush", initialState: mP, reducers: { setBrushSettings(e, r) { return r.payload == null ? mP : r.payload } } }), { setBrushSettings: Lue } = g6.actions, wae = g6.reducer; function jae(e, r, a) { return (r = Nae(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function Nae(e) { var r = kae(e, "string"); return typeof r == "symbol" ? r : r + "" } function kae(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } class rk { static create(r) { return new rk(r) } constructor(r) { this.scale = r } get domain() { return this.scale.domain } get range() { return this.scale.range } get rangeMin() { return this.range()[0] } get rangeMax() { return this.range()[1] } get bandwidth() { return this.scale.bandwidth } apply(r) { var { bandAware: a, position: s } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}; if (r !== void 0) { if (s) switch (s) { case "start": return this.scale(r); case "middle": { var n = this.bandwidth ? this.bandwidth() / 2 : 0; return this.scale(r) + n } case "end": { var i = this.bandwidth ? this.bandwidth() : 0; return this.scale(r) + i } default: return this.scale(r) }if (a) { var o = this.bandwidth ? this.bandwidth() / 2 : 0; return this.scale(r) + o } return this.scale(r) } } isInRange(r) { var a = this.range(), s = a[0], n = a[a.length - 1]; return s <= n ? r >= s && r <= n : r >= n && r <= s } } jae(rk, "EPS", 1e-4); function Sae(e) { return (e % 180 + 180) % 180 } var Cae = function (r) { var { width: a, height: s } = r, n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0, i = Sae(n), o = i * Math.PI / 180, c = Math.atan(s / a), u = o > c && o < Math.PI - c ? s / Math.sin(o) : a / Math.cos(o); return Math.abs(u) }, Eae = { dots: [], areas: [], lines: [] }, h6 = Fs({ name: "referenceElements", initialState: Eae, reducers: { addDot: (e, r) => { e.dots.push(r.payload) }, removeDot: (e, r) => { var a = Un(e).dots.findIndex(s => s === r.payload); a !== -1 && e.dots.splice(a, 1) }, addArea: (e, r) => { e.areas.push(r.payload) }, removeArea: (e, r) => { var a = Un(e).areas.findIndex(s => s === r.payload); a !== -1 && e.areas.splice(a, 1) }, addLine: (e, r) => { e.lines.push(r.payload) }, removeLine: (e, r) => { var a = Un(e).lines.findIndex(s => s === r.payload); a !== -1 && e.lines.splice(a, 1) } } }), { addDot: Rue, removeDot: Mue, addArea: _ue, removeArea: $ue, addLine: Uue, removeLine: Fue } = h6.actions, Aae = h6.reducer, Pae = h.createContext(void 0), Tae = e => { var { children: r } = e, [a] = h.useState("".concat(tm("recharts"), "-clip")), s = xx(); if (s == null) return null; var { x: n, y: i, width: o, height: c } = s; return h.createElement(Pae.Provider, { value: a }, h.createElement("defs", null, h.createElement("clipPath", { id: a }, h.createElement("rect", { x: n, y: i, height: c, width: o }))), r) }; function f6(e, r) { if (r < 1) return []; if (r === 1) return e; for (var a = [], s = 0; s < e.length; s += r)a.push(e[s]); return a } function Dae(e, r, a) { var s = { width: e.width + r.width, height: e.height + r.height }; return Cae(s, a) } function Oae(e, r, a) { var s = a === "width", { x: n, y: i, width: o, height: c } = e; return r === 1 ? { start: s ? n : i, end: s ? n + o : i + c } : { start: s ? n + o : i + c, end: s ? n : i } } function rf(e, r, a, s, n) { if (e * r < e * s || e * r > e * n) return !1; var i = a(); return e * (r - e * i / 2 - s) >= 0 && e * (r + e * i / 2 - n) <= 0 } function Iae(e, r) { return f6(e, r + 1) } function Lae(e, r, a, s, n) { for (var i = (s || []).slice(), { start: o, end: c } = r, u = 0, m = 1, g = o, f = function () { var b = s?.[u]; if (b === void 0) return { v: f6(s, m) }; var j = u, v, S = () => (v === void 0 && (v = a(b, j)), v), k = b.coordinate, E = u === 0 || rf(e, k, S, g, c); E || (u = 0, g = o, m += 1), E && (g = k + e * (S() / 2 + n), u += m) }, y; m <= i.length;)if (y = f(), y) return y.v; return [] } function gP(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function ss(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? gP(Object(a), !0).forEach(function (s) { Rae(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : gP(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function Rae(e, r, a) { return (r = Mae(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function Mae(e) { var r = _ae(e, "string"); return typeof r == "symbol" ? r : r + "" } function _ae(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function $ae(e, r, a, s, n) { for (var i = (s || []).slice(), o = i.length, { start: c } = r, { end: u } = r, m = function (y) { var p = i[y], b, j = () => (b === void 0 && (b = a(p, y)), b); if (y === o - 1) { var v = e * (p.coordinate + e * j() / 2 - u); i[y] = p = ss(ss({}, p), {}, { tickCoord: v > 0 ? p.coordinate - v * e : p.coordinate }) } else i[y] = p = ss(ss({}, p), {}, { tickCoord: p.coordinate }); if (p.tickCoord != null) { var S = rf(e, p.tickCoord, j, c, u); S && (u = p.tickCoord - e * (j() / 2 + n), i[y] = ss(ss({}, p), {}, { isShow: !0 })) } }, g = o - 1; g >= 0; g--)m(g); return i } function Uae(e, r, a, s, n, i) { var o = (s || []).slice(), c = o.length, { start: u, end: m } = r; if (i) { var g = s[c - 1], f = a(g, c - 1), y = e * (g.coordinate + e * f / 2 - m); if (o[c - 1] = g = ss(ss({}, g), {}, { tickCoord: y > 0 ? g.coordinate - y * e : g.coordinate }), g.tickCoord != null) { var p = rf(e, g.tickCoord, () => f, u, m); p && (m = g.tickCoord - e * (f / 2 + n), o[c - 1] = ss(ss({}, g), {}, { isShow: !0 })) } } for (var b = i ? c - 1 : c, j = function (k) { var E = o[k], C, N = () => (C === void 0 && (C = a(E, k)), C); if (k === 0) { var A = e * (E.coordinate - e * N() / 2 - u); o[k] = E = ss(ss({}, E), {}, { tickCoord: A < 0 ? E.coordinate - A * e : E.coordinate }) } else o[k] = E = ss(ss({}, E), {}, { tickCoord: E.coordinate }); if (E.tickCoord != null) { var D = rf(e, E.tickCoord, N, u, m); D && (u = E.tickCoord + e * (N() / 2 + n), o[k] = ss(ss({}, E), {}, { isShow: !0 })) } }, v = 0; v < b; v++)j(v); return o } function ak(e, r, a) { var { tick: s, ticks: n, viewBox: i, minTickGap: o, orientation: c, interval: u, tickFormatter: m, unit: g, angle: f } = e; if (!n || !n.length || !s) return []; if (rt(u) || pd.isSsr) { var y; return (y = Iae(n, rt(u) ? u : 0)) !== null && y !== void 0 ? y : [] } var p = [], b = c === "top" || c === "bottom" ? "width" : "height", j = g && b === "width" ? Hu(g, { fontSize: r, letterSpacing: a }) : { width: 0, height: 0 }, v = (E, C) => { var N = typeof m == "function" ? m(E.value, C) : E.value; return b === "width" ? Dae(Hu(N, { fontSize: r, letterSpacing: a }), j, f) : Hu(N, { fontSize: r, letterSpacing: a })[b] }, S = n.length >= 2 ? Fa(n[1].coordinate - n[0].coordinate) : 1, k = Oae(i, S, b); return u === "equidistantPreserveStart" ? Lae(S, k, v, n, o) : (u === "preserveStart" || u === "preserveStartEnd" ? p = Uae(S, k, v, n, o, u === "preserveStartEnd") : p = $ae(S, k, v, n, o), p.filter(E => E.isShow)) } var Fae = e => { var { ticks: r, label: a, labelGapWithTick: s = 5, tickSize: n = 0, tickMargin: i = 0 } = e, o = 0; if (r) { Array.from(r).forEach(g => { if (g) { var f = g.getBoundingClientRect(); f.width > o && (o = f.width) } }); var c = a ? a.getBoundingClientRect().width : 0, u = n + i, m = o + u + c + (a ? s : 0); return Math.round(m) } return 0 }, zae = ["axisLine", "width", "height", "className", "hide", "ticks", "axisType"]; function Bae(e, r) { if (e == null) return {}; var a, s, n = qae(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function qae(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } function Ql() { return Ql = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Ql.apply(null, arguments) } function hP(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function va(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? hP(Object(a), !0).forEach(function (s) { Hae(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : hP(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function Hae(e, r, a) { return (r = Wae(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function Wae(e) { var r = Vae(e, "string"); return typeof r == "symbol" ? r : r + "" } function Vae(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var zi = { x: 0, y: 0, width: 0, height: 0, viewBox: { x: 0, y: 0, width: 0, height: 0 }, orientation: "bottom", ticks: [], stroke: "#666", tickLine: !0, axisLine: !0, tick: !0, mirror: !1, minTickGap: 5, tickSize: 6, tickMargin: 2, interval: "preserveEnd", zIndex: ga.axis }; function Gae(e) { var { x: r, y: a, width: s, height: n, orientation: i, mirror: o, axisLine: c, otherSvgProps: u } = e; if (!c) return null; var m = va(va(va({}, u), vs(c)), {}, { fill: "none" }); if (i === "top" || i === "bottom") { var g = +(i === "top" && !o || i === "bottom" && o); m = va(va({}, m), {}, { x1: r, y1: a + g * n, x2: r + s, y2: a + g * n }) } else { var f = +(i === "left" && !o || i === "right" && o); m = va(va({}, m), {}, { x1: r + f * s, y1: a, x2: r + f * s, y2: a + n }) } return h.createElement("line", Ql({}, m, { className: er("recharts-cartesian-axis-line", Vl(c, "className")) })) } function Kae(e, r, a, s, n, i, o, c, u) { var m, g, f, y, p, b, j = c ? -1 : 1, v = e.tickSize || o, S = rt(e.tickCoord) ? e.tickCoord : e.coordinate; switch (i) { case "top": m = g = e.coordinate, y = a + +!c * n, f = y - j * v, b = f - j * u, p = S; break; case "left": f = y = e.coordinate, g = r + +!c * s, m = g - j * v, p = m - j * u, b = S; break; case "right": f = y = e.coordinate, g = r + +c * s, m = g + j * v, p = m + j * u, b = S; break; default: m = g = e.coordinate, y = a + +c * n, f = y + j * v, b = f + j * u, p = S; break }return { line: { x1: m, y1: f, x2: g, y2: y }, tick: { x: p, y: b } } } function Yae(e, r) { switch (e) { case "left": return r ? "start" : "end"; case "right": return r ? "end" : "start"; default: return "middle" } } function Qae(e, r) { switch (e) { case "left": case "right": return "middle"; case "top": return r ? "start" : "end"; default: return r ? "end" : "start" } } function Xae(e) { var { option: r, tickProps: a, value: s } = e, n, i = er(a.className, "recharts-cartesian-axis-tick-value"); if (h.isValidElement(r)) n = h.cloneElement(r, va(va({}, a), {}, { className: i })); else if (typeof r == "function") n = r(va(va({}, a), {}, { className: i })); else { var o = "recharts-cartesian-axis-tick-value"; typeof r != "boolean" && (o = er(o, r?.className)), n = h.createElement(cx, Ql({}, a, { className: o }), s) } return n } var Zae = h.forwardRef((e, r) => { var { ticks: a = [], tick: s, tickLine: n, stroke: i, tickFormatter: o, unit: c, padding: u, tickTextProps: m, orientation: g, mirror: f, x: y, y: p, width: b, height: j, tickSize: v, tickMargin: S, fontSize: k, letterSpacing: E, getTicksConfig: C, events: N, axisType: A } = e, D = ak(va(va({}, C), {}, { ticks: a }), k, E), I = Yae(g, f), $ = Qae(g, f), B = vs(C), W = Wl(s), M = {}; typeof n == "object" && (M = n); var q = va(va({}, B), {}, { fill: "none" }, M), V = D.map(le => va({ entry: le }, Kae(le, y, p, b, j, g, v, f, S))), X = V.map(le => { var { entry: ee, line: L } = le; return h.createElement(aa, { className: "recharts-cartesian-axis-tick", key: "tick-".concat(ee.value, "-").concat(ee.coordinate, "-").concat(ee.tickCoord) }, n && h.createElement("line", Ql({}, q, L, { className: er("recharts-cartesian-axis-tick-line", Vl(n, "className")) }))) }), se = V.map((le, ee) => { var { entry: L, tick: z } = le, T = va(va(va(va({ textAnchor: I, verticalAnchor: $ }, B), {}, { stroke: "none", fill: i }, W), z), {}, { index: ee, payload: L, visibleTicksCount: D.length, tickFormatter: o, padding: u }, m); return h.createElement(aa, Ql({ className: "recharts-cartesian-axis-tick-label", key: "tick-label-".concat(L.value, "-").concat(L.coordinate, "-").concat(L.tickCoord) }, Im(N, L, ee)), s && h.createElement(Xae, { option: s, tickProps: T, value: "".concat(typeof o == "function" ? o(L.value, ee) : L.value).concat(c || "") })) }); return h.createElement("g", { className: "recharts-cartesian-axis-ticks recharts-".concat(A, "-ticks") }, se.length > 0 && h.createElement(ws, { zIndex: ga.label }, h.createElement("g", { className: "recharts-cartesian-axis-tick-labels recharts-".concat(A, "-tick-labels"), ref: r }, se)), X.length > 0 && h.createElement("g", { className: "recharts-cartesian-axis-tick-lines recharts-".concat(A, "-tick-lines") }, X)) }), Jae = h.forwardRef((e, r) => { var { axisLine: a, width: s, height: n, className: i, hide: o, ticks: c, axisType: u } = e, m = Bae(e, zae), [g, f] = h.useState(""), [y, p] = h.useState(""), b = h.useRef(null); h.useImperativeHandle(r, () => ({ getCalculatedWidth: () => { var v; return Fae({ ticks: b.current, label: (v = e.labelRef) === null || v === void 0 ? void 0 : v.current, labelGapWithTick: 5, tickSize: e.tickSize, tickMargin: e.tickMargin }) } })); var j = h.useCallback(v => { if (v) { var S = v.getElementsByClassName("recharts-cartesian-axis-tick-value"); b.current = S; var k = S[0]; if (k) { var E = window.getComputedStyle(k), C = E.fontSize, N = E.letterSpacing; (C !== g || N !== y) && (f(C), p(N)) } } }, [g, y]); return o || s != null && s <= 0 || n != null && n <= 0 ? null : h.createElement(ws, { zIndex: e.zIndex }, h.createElement(aa, { className: er("recharts-cartesian-axis", i) }, h.createElement(Gae, { x: e.x, y: e.y, width: s, height: n, orientation: e.orientation, mirror: e.mirror, axisLine: a, otherSvgProps: vs(e) }), h.createElement(Zae, { ref: j, axisType: u, events: m, fontSize: g, getTicksConfig: e, height: e.height, letterSpacing: y, mirror: e.mirror, orientation: e.orientation, padding: e.padding, stroke: e.stroke, tick: e.tick, tickFormatter: e.tickFormatter, tickLine: e.tickLine, tickMargin: e.tickMargin, tickSize: e.tickSize, tickTextProps: e.tickTextProps, ticks: c, unit: e.unit, width: e.width, x: e.x, y: e.y }), h.createElement(SJ, { x: e.x, y: e.y, width: e.width, height: e.height, lowerWidth: e.width, upperWidth: e.width }, h.createElement(RJ, { label: e.label, labelRef: e.labelRef }), e.children))) }), sk = h.forwardRef((e, r) => { var a = sa(e, zi); return h.createElement(Jae, Ql({}, a, { ref: r })) }); sk.displayName = "CartesianAxis"; var ese = ["x1", "y1", "x2", "y2", "key"], tse = ["offset"], rse = ["xAxisId", "yAxisId"], ase = ["xAxisId", "yAxisId"]; function fP(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function ns(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? fP(Object(a), !0).forEach(function (s) { sse(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : fP(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function sse(e, r, a) { return (r = nse(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function nse(e) { var r = ise(e, "string"); return typeof r == "symbol" ? r : r + "" } function ise(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function Al() { return Al = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Al.apply(null, arguments) } function af(e, r) { if (e == null) return {}; var a, s, n = ose(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function ose(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } var lse = e => { var { fill: r } = e; if (!r || r === "none") return null; var { fillOpacity: a, x: s, y: n, width: i, height: o, ry: c } = e; return h.createElement("rect", { x: s, y: n, ry: c, width: i, height: o, stroke: "none", fill: r, fillOpacity: a, className: "recharts-cartesian-grid-bg" }) }; function x6(e) { var { option: r, lineItemProps: a } = e, s; if (h.isValidElement(r)) s = h.cloneElement(r, a); else if (typeof r == "function") s = r(a); else { var n, { x1: i, y1: o, x2: c, y2: u, key: m } = a, g = af(a, ese), f = (n = vs(g)) !== null && n !== void 0 ? n : {}, { offset: y } = f, p = af(f, tse); s = h.createElement("line", Al({}, p, { x1: i, y1: o, x2: c, y2: u, fill: "none", key: m })) } return s } function cse(e) { var { x: r, width: a, horizontal: s = !0, horizontalPoints: n } = e; if (!s || !n || !n.length) return null; var { xAxisId: i, yAxisId: o } = e, c = af(e, rse), u = n.map((m, g) => { var f = ns(ns({}, c), {}, { x1: r, y1: m, x2: r + a, y2: m, key: "line-".concat(g), index: g }); return h.createElement(x6, { key: "line-".concat(g), option: s, lineItemProps: f }) }); return h.createElement("g", { className: "recharts-cartesian-grid-horizontal" }, u) } function dse(e) { var { y: r, height: a, vertical: s = !0, verticalPoints: n } = e; if (!s || !n || !n.length) return null; var { xAxisId: i, yAxisId: o } = e, c = af(e, ase), u = n.map((m, g) => { var f = ns(ns({}, c), {}, { x1: m, y1: r, x2: m, y2: r + a, key: "line-".concat(g), index: g }); return h.createElement(x6, { option: s, lineItemProps: f, key: "line-".concat(g) }) }); return h.createElement("g", { className: "recharts-cartesian-grid-vertical" }, u) } function use(e) { var { horizontalFill: r, fillOpacity: a, x: s, y: n, width: i, height: o, horizontalPoints: c, horizontal: u = !0 } = e; if (!u || !r || !r.length || c == null) return null; var m = c.map(f => Math.round(f + n - n)).sort((f, y) => f - y); n !== m[0] && m.unshift(0); var g = m.map((f, y) => { var p = !m[y + 1], b = p ? n + o - f : m[y + 1] - f; if (b <= 0) return null; var j = y % r.length; return h.createElement("rect", { key: "react-".concat(y), y: f, x: s, height: b, width: i, stroke: "none", fill: r[j], fillOpacity: a, className: "recharts-cartesian-grid-bg" }) }); return h.createElement("g", { className: "recharts-cartesian-gridstripes-horizontal" }, g) } function mse(e) { var { vertical: r = !0, verticalFill: a, fillOpacity: s, x: n, y: i, width: o, height: c, verticalPoints: u } = e; if (!r || !a || !a.length) return null; var m = u.map(f => Math.round(f + n - n)).sort((f, y) => f - y); n !== m[0] && m.unshift(0); var g = m.map((f, y) => { var p = !m[y + 1], b = p ? n + o - f : m[y + 1] - f; if (b <= 0) return null; var j = y % a.length; return h.createElement("rect", { key: "react-".concat(y), x: f, y: i, width: b, height: c, stroke: "none", fill: a[j], fillOpacity: s, className: "recharts-cartesian-grid-bg" }) }); return h.createElement("g", { className: "recharts-cartesian-gridstripes-vertical" }, g) } var gse = (e, r) => { var { xAxis: a, width: s, height: n, offset: i } = e; return n5(ak(ns(ns(ns({}, zi), a), {}, { ticks: i5(a), viewBox: { x: 0, y: 0, width: s, height: n } })), i.left, i.left + i.width, r) }, hse = (e, r) => { var { yAxis: a, width: s, height: n, offset: i } = e; return n5(ak(ns(ns(ns({}, zi), a), {}, { ticks: i5(a), viewBox: { x: 0, y: 0, width: s, height: n } })), i.top, i.top + i.height, r) }, fse = { horizontal: !0, vertical: !0, horizontalPoints: [], verticalPoints: [], stroke: "#ccc", fill: "none", verticalFill: [], horizontalFill: [], xAxisId: 0, yAxisId: 0, syncWithTicks: !1, zIndex: ga.grid }; function fs(e) { var r = Tj(), a = Dj(), s = f5(), n = ns(ns({}, sa(e, fse)), {}, { x: rt(e.x) ? e.x : s.left, y: rt(e.y) ? e.y : s.top, width: rt(e.width) ? e.width : s.width, height: rt(e.height) ? e.height : s.height }), { xAxisId: i, yAxisId: o, x: c, y: u, width: m, height: g, syncWithTicks: f, horizontalValues: y, verticalValues: p } = n, b = Ha(), j = nt($ => iA($, "xAxis", i, b)), v = nt($ => iA($, "yAxis", o, b)); if (!li(m) || !li(g) || !rt(c) || !rt(u)) return null; var S = n.verticalCoordinatesGenerator || gse, k = n.horizontalCoordinatesGenerator || hse, { horizontalPoints: E, verticalPoints: C } = n; if ((!E || !E.length) && typeof k == "function") { var N = y && y.length, A = k({ yAxis: v ? ns(ns({}, v), {}, { ticks: N ? y : v.ticks }) : void 0, width: r ?? m, height: a ?? g, offset: s }, N ? !0 : f); Ah(Array.isArray(A), "horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A, "]")), Array.isArray(A) && (E = A) } if ((!C || !C.length) && typeof S == "function") { var D = p && p.length, I = S({ xAxis: j ? ns(ns({}, j), {}, { ticks: D ? p : j.ticks }) : void 0, width: r ?? m, height: a ?? g, offset: s }, D ? !0 : f); Ah(Array.isArray(I), "verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I, "]")), Array.isArray(I) && (C = I) } return h.createElement(ws, { zIndex: n.zIndex }, h.createElement("g", { className: "recharts-cartesian-grid" }, h.createElement(lse, { fill: n.fill, fillOpacity: n.fillOpacity, x: n.x, y: n.y, width: n.width, height: n.height, ry: n.ry }), h.createElement(use, Al({}, n, { horizontalPoints: E })), h.createElement(mse, Al({}, n, { verticalPoints: C })), h.createElement(cse, Al({}, n, { offset: s, horizontalPoints: E, xAxis: j, yAxis: v })), h.createElement(dse, Al({}, n, { offset: s, verticalPoints: C, xAxis: j, yAxis: v })))) } fs.displayName = "CartesianGrid"; var p6 = (e, r, a, s) => ui(e, "xAxis", r, s), y6 = (e, r, a, s) => di(e, "xAxis", r, s), v6 = (e, r, a, s) => ui(e, "yAxis", a, s), b6 = (e, r, a, s) => di(e, "yAxis", a, s), xse = be([Wt, p6, v6, y6, b6], (e, r, a, s, n) => xi(e, "xAxis") ? Ho(r, s, !1) : Ho(a, n, !1)), pse = (e, r, a, s, n) => n; function yse(e) { return e.type === "line" } var vse = be([Gm, pse], (e, r) => e.filter(yse).find(a => a.id === r)), bse = be([Wt, p6, v6, y6, b6, vse, xse, qm], (e, r, a, s, n, i, o, c) => { var { chartData: u, dataStartIndex: m, dataEndIndex: g } = c; if (!(i == null || r == null || a == null || s == null || n == null || s.length === 0 || n.length === 0 || o == null || e !== "horizontal" && e !== "vertical")) { var { dataKey: f, data: y } = i, p; if (y != null && y.length > 0 ? p = y : p = u?.slice(m, g + 1), p != null) return Fse({ layout: e, xAxis: r, yAxis: a, xAxisTicks: s, yAxisTicks: n, dataKey: f, bandSize: o, displayedData: p }) } }); function w6(e) { var r = Wl(e), a = 3, s = 2; if (r != null) { var { r: n, strokeWidth: i } = r, o = Number(n), c = Number(i); return (Number.isNaN(o) || o < 0) && (o = a), (Number.isNaN(c) || c < 0) && (c = s), { r: o, strokeWidth: c } } return { r: a, strokeWidth: s } } var wse = ["id"], jse = ["type", "layout", "connectNulls", "needClip", "shape"], Nse = ["activeDot", "animateNewValues", "animationBegin", "animationDuration", "animationEasing", "connectNulls", "dot", "hide", "isAnimationActive", "label", "legendType", "xAxisId", "yAxisId", "id"]; function xm() { return xm = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, xm.apply(null, arguments) } function xP(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function Jn(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? xP(Object(a), !0).forEach(function (s) { kse(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : xP(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function kse(e, r, a) { return (r = Sse(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function Sse(e) { var r = Cse(e, "string"); return typeof r == "symbol" ? r : r + "" } function Cse(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function nk(e, r) { if (e == null) return {}; var a, s, n = Ese(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function Ese(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } var Ase = e => { var { dataKey: r, name: a, stroke: s, legendType: n, hide: i } = e; return [{ inactive: i, dataKey: r, type: n, color: s, value: Xo(a, r), payload: e }] }, Pse = h.memo(e => { var { dataKey: r, data: a, stroke: s, strokeWidth: n, fill: i, name: o, hide: c, unit: u, tooltipType: m } = e, g = { dataDefinedOnItem: a, positions: void 0, settings: { stroke: s, strokeWidth: n, fill: i, dataKey: r, nameKey: void 0, name: Xo(o, r), hide: c, type: m, color: s, unit: u } }; return h.createElement(gx, { tooltipEntrySettings: g }) }), j6 = (e, r) => "".concat(r, "px ").concat(e - r, "px"); function Tse(e, r) { for (var a = e.length % 2 !== 0 ? [...e, 0] : e, s = [], n = 0; n < r; ++n)s = [...s, ...a]; return s } var Dse = (e, r, a) => { var s = a.reduce((f, y) => f + y); if (!s) return j6(r, e); for (var n = Math.floor(e / s), i = e % s, o = r - e, c = [], u = 0, m = 0; u < a.length; m += a[u], ++u)if (m + a[u] > i) { c = [...a.slice(0, u), i - m]; break } var g = c.length % 2 === 0 ? [0, o] : [o]; return [...Tse(a, n), ...c, ...g].map(f => "".concat(f, "px")).join(", ") }; function Ose(e) { var { clipPathId: r, points: a, props: s } = e, { dot: n, dataKey: i, needClip: o } = s, { id: c } = s, u = nk(s, wse), m = vs(u); return h.createElement(i6, { points: a, dot: n, className: "recharts-line-dots", dotClassName: "recharts-line-dot", dataKey: i, baseProps: m, needClip: o, clipPathId: r }) } function Ise(e) { var { showLabels: r, children: a, points: s } = e, n = h.useMemo(() => s?.map(i => { var o, c, u = { x: (o = i.x) !== null && o !== void 0 ? o : 0, y: (c = i.y) !== null && c !== void 0 ? c : 0, width: 0, lowerWidth: 0, upperWidth: 0, height: 0 }; return Jn(Jn({}, u), {}, { value: i.value, payload: i.payload, viewBox: u, parentViewBox: void 0, fill: void 0 }) }), [s]); return h.createElement(HN, { value: r ? n : void 0 }, a) } function pP(e) { var { clipPathId: r, pathRef: a, points: s, strokeDasharray: n, props: i } = e, { type: o, layout: c, connectNulls: u, needClip: m, shape: g } = i, f = nk(i, jse), y = Jn(Jn({}, ls(f)), {}, { fill: "none", className: "recharts-line-curve", clipPath: m ? "url(#clipPath-".concat(r, ")") : void 0, points: s, type: o, layout: c, connectNulls: u, strokeDasharray: n ?? i.strokeDasharray }); return h.createElement(h.Fragment, null, s?.length > 1 && h.createElement(YN, xm({ shapeType: "curve", option: g }, y, { pathRef: a })), h.createElement(Ose, { points: s, clipPathId: r, props: i })) } function Lse(e) { try { return e && e.getTotalLength && e.getTotalLength() || 0 } catch { return 0 } } function Rse(e) { var { clipPathId: r, props: a, pathRef: s, previousPointsRef: n, longestAnimatedLengthRef: i } = e, { points: o, strokeDasharray: c, isAnimationActive: u, animationBegin: m, animationDuration: g, animationEasing: f, animateNewValues: y, width: p, height: b, onAnimationEnd: j, onAnimationStart: v } = a, S = n.current, k = vd(o, "recharts-line-"), E = h.useRef(k), [C, N] = h.useState(!1), A = !C, D = h.useCallback(() => { typeof j == "function" && j(), N(!1) }, [j]), I = h.useCallback(() => { typeof v == "function" && v(), N(!0) }, [v]), $ = Lse(s.current), B = h.useRef(0); E.current !== k && (B.current = i.current, E.current = k); var W = B.current; return h.createElement(Ise, { points: o, showLabels: A }, a.children, h.createElement(yd, { animationId: k, begin: m, duration: g, isActive: u, easing: f, onAnimationEnd: D, onAnimationStart: I, key: k }, M => { var q = cr(W, $ + W, M), V = Math.min(q, $), X; if (u) if (c) { var se = "".concat(c).split(/[,\s]+/gim).map(L => parseFloat(L)); X = Dse(V, $, se) } else X = j6($, V); else X = c == null ? void 0 : String(c); if (M > 0 && $ > 0 && (n.current = o, i.current = Math.max(i.current, V)), S) { var le = S.length / o.length, ee = M === 1 ? o : o.map((L, z) => { var T = Math.floor(z * le); if (S[T]) { var _ = S[T]; return Jn(Jn({}, L), {}, { x: cr(_.x, L.x, M), y: cr(_.y, L.y, M) }) } return y ? Jn(Jn({}, L), {}, { x: cr(p * 2, L.x, M), y: cr(b / 2, L.y, M) }) : Jn(Jn({}, L), {}, { x: L.x, y: L.y }) }); return n.current = ee, h.createElement(pP, { props: a, points: ee, clipPathId: r, pathRef: s, strokeDasharray: X }) } return h.createElement(pP, { props: a, points: o, clipPathId: r, pathRef: s, strokeDasharray: X }) }), h.createElement(dx, { label: a.label })) } function Mse(e) { var { clipPathId: r, props: a } = e, s = h.useRef(null), n = h.useRef(0), i = h.useRef(null); return h.createElement(Rse, { props: a, clipPathId: r, previousPointsRef: s, longestAnimatedLengthRef: n, pathRef: i }) } var _se = (e, r) => { var a, s; return { x: (a = e.x) !== null && a !== void 0 ? a : void 0, y: (s = e.y) !== null && s !== void 0 ? s : void 0, value: e.value, errorVal: xr(e.payload, r) } }; class $se extends h.Component { render() { var { hide: r, dot: a, points: s, className: n, xAxisId: i, yAxisId: o, top: c, left: u, width: m, height: g, id: f, needClip: y, zIndex: p } = this.props; if (r) return null; var b = er("recharts-line", n), j = f, { r: v, strokeWidth: S } = w6(a), k = KN(a), E = v * 2 + S, C = y ? "url(#clipPath-".concat(k ? "" : "dots-").concat(j, ")") : void 0; return h.createElement(ws, { zIndex: p }, h.createElement(aa, { className: b }, y && h.createElement("defs", null, h.createElement(tk, { clipPathId: j, xAxisId: i, yAxisId: o }), !k && h.createElement("clipPath", { id: "clipPath-dots-".concat(j) }, h.createElement("rect", { x: u - E / 2, y: c - E / 2, width: m + E, height: g + E }))), h.createElement(c6, { xAxisId: i, yAxisId: o, data: s, dataPointFormatter: _se, errorBarOffset: 0 }, h.createElement(Mse, { props: this.props, clipPathId: j }))), h.createElement(Pw, { activeDot: this.props.activeDot, points: s, mainColor: this.props.stroke, itemDataKey: this.props.dataKey, clipPath: C })) } } var N6 = { activeDot: !0, animateNewValues: !0, animationBegin: 0, animationDuration: 1500, animationEasing: "ease", connectNulls: !1, dot: !0, fill: "#fff", hide: !1, isAnimationActive: "auto", label: !1, legendType: "line", stroke: "#3182bd", strokeWidth: 1, xAxisId: 0, yAxisId: 0, zIndex: ga.line, type: "linear" }; function Use(e) { var r = sa(e, N6), { activeDot: a, animateNewValues: s, animationBegin: n, animationDuration: i, animationEasing: o, connectNulls: c, dot: u, hide: m, isAnimationActive: g, label: f, legendType: y, xAxisId: p, yAxisId: b, id: j } = r, v = nk(r, Nse), { needClip: S } = px(p, b), k = xx(), E = ec(), C = Ha(), N = nt(B => bse(B, p, b, C, j)); if (E !== "horizontal" && E !== "vertical" || N == null || k == null) return null; var { height: A, width: D, x: I, y: $ } = k; return h.createElement($se, xm({}, v, { id: j, connectNulls: c, dot: u, activeDot: a, animateNewValues: s, animationBegin: n, animationDuration: i, animationEasing: o, isAnimationActive: g, hide: m, label: f, legendType: y, xAxisId: p, yAxisId: b, points: N, layout: E, height: A, width: D, left: I, top: $, needClip: S })) } function Fse(e) { var { layout: r, xAxis: a, yAxis: s, xAxisTicks: n, yAxisTicks: i, dataKey: o, bandSize: c, displayedData: u } = e; return u.map((m, g) => { var f = xr(m, o); if (r === "horizontal") { var y = Eh({ axis: a, ticks: n, bandSize: c, entry: m, index: g }), p = Lr(f) ? null : s.scale(f); return { x: y, y: p, value: f, payload: m } } var b = Lr(f) ? null : a.scale(f), j = Eh({ axis: s, ticks: i, bandSize: c, entry: m, index: g }); return b == null || j == null ? null : { x: b, y: j, value: f, payload: m } }).filter(Boolean) } function zse(e) { var r = sa(e, N6), a = Ha(); return h.createElement(hx, { id: r.id, type: "line" }, s => h.createElement(h.Fragment, null, h.createElement(JN, { legendPayload: Ase(r) }), h.createElement(Pse, { dataKey: r.dataKey, data: r.data, stroke: r.stroke, strokeWidth: r.strokeWidth, fill: r.fill, name: r.name, hide: r.hide, unit: r.unit, tooltipType: r.tooltipType }), h.createElement(ek, { type: "line", id: s, data: r.data, xAxisId: r.xAxisId, yAxisId: r.yAxisId, zAxisId: 0, dataKey: r.dataKey, hide: r.hide, isPanorama: a }), h.createElement(Use, xm({}, r, { id: s })))) } var Zi = h.memo(zse, rg); Zi.displayName = "Line"; var k6 = (e, r, a, s) => ui(e, "xAxis", r, s), S6 = (e, r, a, s) => di(e, "xAxis", r, s), C6 = (e, r, a, s) => ui(e, "yAxis", a, s), E6 = (e, r, a, s) => di(e, "yAxis", a, s), Bse = be([Wt, k6, C6, S6, E6], (e, r, a, s, n) => xi(e, "xAxis") ? Ho(r, s, !1) : Ho(a, n, !1)), qse = (e, r, a, s, n) => n, A6 = be([Gm, qse], (e, r) => e.filter(a => a.type === "area").find(a => a.id === r)), Hse = (e, r, a, s, n) => { var i, o = A6(e, r, a, s, n); if (o != null) { var c = Wt(e), u = xi(c, "xAxis"), m; if (u ? m = hm(e, "yAxis", a, s) : m = hm(e, "xAxis", r, s), m != null) { var { stackId: g } = o, f = ex(o); if (!(g == null || f == null)) { var y = (i = m[g]) === null || i === void 0 ? void 0 : i.stackedData; return y?.find(p => p.key === f) } } } }, Wse = be([Wt, k6, C6, S6, E6, Hse, qm, Bse, A6, OY], (e, r, a, s, n, i, o, c, u, m) => { var { chartData: g, dataStartIndex: f, dataEndIndex: y } = o; if (!(u == null || e !== "horizontal" && e !== "vertical" || r == null || a == null || s == null || n == null || s.length === 0 || n.length === 0 || c == null)) { var { data: p } = u, b; if (p && p.length > 0 ? b = p : b = g?.slice(f, y + 1), b != null) return dne({ layout: e, xAxis: r, yAxis: a, xAxisTicks: s, yAxisTicks: n, dataStartIndex: f, areaSettings: u, stackedData: i, displayedData: b, chartBaseValue: m, bandSize: c }) } }), Vse = ["id"], Gse = ["activeDot", "animationBegin", "animationDuration", "animationEasing", "connectNulls", "dot", "fill", "fillOpacity", "hide", "isAnimationActive", "legendType", "stroke", "xAxisId", "yAxisId"]; function Ul() { return Ul = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Ul.apply(null, arguments) } function P6(e, r) { if (e == null) return {}; var a, s, n = Kse(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function Kse(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } function yP(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function zc(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? yP(Object(a), !0).forEach(function (s) { Yse(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : yP(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function Yse(e, r, a) { return (r = Qse(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function Qse(e) { var r = Xse(e, "string"); return typeof r == "symbol" ? r : r + "" } function Xse(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function sf(e, r) { return e && e !== "none" ? e : r } var Zse = e => { var { dataKey: r, name: a, stroke: s, fill: n, legendType: i, hide: o } = e; return [{ inactive: o, dataKey: r, type: i, color: sf(s, n), value: Xo(a, r), payload: e }] }, Jse = h.memo(e => { var { dataKey: r, data: a, stroke: s, strokeWidth: n, fill: i, name: o, hide: c, unit: u, tooltipType: m } = e, g = { dataDefinedOnItem: a, positions: void 0, settings: { stroke: s, strokeWidth: n, fill: i, dataKey: r, nameKey: void 0, name: Xo(o, r), hide: c, type: m, color: sf(s, i), unit: u } }; return h.createElement(gx, { tooltipEntrySettings: g }) }); function ene(e) { var { clipPathId: r, points: a, props: s } = e, { needClip: n, dot: i, dataKey: o } = s, c = vs(s); return h.createElement(i6, { points: a, dot: i, className: "recharts-area-dots", dotClassName: "recharts-area-dot", dataKey: o, baseProps: c, needClip: n, clipPathId: r }) } function tne(e) { var { showLabels: r, children: a, points: s } = e, n = s.map(i => { var o, c, u = { x: (o = i.x) !== null && o !== void 0 ? o : 0, y: (c = i.y) !== null && c !== void 0 ? c : 0, width: 0, lowerWidth: 0, upperWidth: 0, height: 0 }; return zc(zc({}, u), {}, { value: i.value, payload: i.payload, parentViewBox: void 0, viewBox: u, fill: void 0 }) }); return h.createElement(HN, { value: r ? n : void 0 }, a) } function vP(e) { var { points: r, baseLine: a, needClip: s, clipPathId: n, props: i } = e, { layout: o, type: c, stroke: u, connectNulls: m, isRange: g } = i, { id: f } = i, y = P6(i, Vse), p = vs(y), b = ls(y); return h.createElement(h.Fragment, null, r?.length > 1 && h.createElement(aa, { clipPath: s ? "url(#clipPath-".concat(n, ")") : void 0 }, h.createElement(Vc, Ul({}, b, { id: f, points: r, connectNulls: m, type: c, baseLine: a, layout: o, stroke: "none", className: "recharts-area-area" })), u !== "none" && h.createElement(Vc, Ul({}, p, { className: "recharts-area-curve", layout: o, type: c, connectNulls: m, fill: "none", points: r })), u !== "none" && g && h.createElement(Vc, Ul({}, p, { className: "recharts-area-curve", layout: o, type: c, connectNulls: m, fill: "none", points: a }))), h.createElement(ene, { points: r, props: y, clipPathId: n })) } function rne(e) { var { alpha: r, baseLine: a, points: s, strokeWidth: n } = e, i = s[0].y, o = s[s.length - 1].y; if (!Rr(i) || !Rr(o)) return null; var c = r * Math.abs(i - o), u = Math.max(...s.map(m => m.x || 0)); return rt(a) ? u = Math.max(a, u) : a && Array.isArray(a) && a.length && (u = Math.max(...a.map(m => m.x || 0), u)), rt(u) ? h.createElement("rect", { x: 0, y: i < o ? i : i - c, width: u + (n ? parseInt("".concat(n), 10) : 1), height: Math.floor(c) }) : null } function ane(e) { var { alpha: r, baseLine: a, points: s, strokeWidth: n } = e, i = s[0].x, o = s[s.length - 1].x; if (!Rr(i) || !Rr(o)) return null; var c = r * Math.abs(i - o), u = Math.max(...s.map(m => m.y || 0)); return rt(a) ? u = Math.max(a, u) : a && Array.isArray(a) && a.length && (u = Math.max(...a.map(m => m.y || 0), u)), rt(u) ? h.createElement("rect", { x: i < o ? i : i - c, y: 0, width: c, height: Math.floor(u + (n ? parseInt("".concat(n), 10) : 1)) }) : null } function sne(e) { var { alpha: r, layout: a, points: s, baseLine: n, strokeWidth: i } = e; return a === "vertical" ? h.createElement(rne, { alpha: r, points: s, baseLine: n, strokeWidth: i }) : h.createElement(ane, { alpha: r, points: s, baseLine: n, strokeWidth: i }) } function nne(e) { var { needClip: r, clipPathId: a, props: s, previousPointsRef: n, previousBaselineRef: i } = e, { points: o, baseLine: c, isAnimationActive: u, animationBegin: m, animationDuration: g, animationEasing: f, onAnimationStart: y, onAnimationEnd: p } = s, b = h.useMemo(() => ({ points: o, baseLine: c }), [o, c]), j = vd(b, "recharts-area-"), v = QH(), [S, k] = h.useState(!1), E = !S, C = h.useCallback(() => { typeof p == "function" && p(), k(!1) }, [p]), N = h.useCallback(() => { typeof y == "function" && y(), k(!0) }, [y]); if (v == null) return null; var A = n.current, D = i.current; return h.createElement(tne, { showLabels: E, points: o }, s.children, h.createElement(yd, { animationId: j, begin: m, duration: g, isActive: u, easing: f, onAnimationEnd: C, onAnimationStart: N, key: j }, I => { if (A) { var $ = A.length / o.length, B = I === 1 ? o : o.map((M, q) => { var V = Math.floor(q * $); if (A[V]) { var X = A[V]; return zc(zc({}, M), {}, { x: cr(X.x, M.x, I), y: cr(X.y, M.y, I) }) } return M }), W; return rt(c) ? W = cr(D, c, I) : Lr(c) || wn(c) ? W = cr(D, 0, I) : W = c.map((M, q) => { var V = Math.floor(q * $); if (Array.isArray(D) && D[V]) { var X = D[V]; return zc(zc({}, M), {}, { x: cr(X.x, M.x, I), y: cr(X.y, M.y, I) }) } return M }), I > 0 && (n.current = B, i.current = W), h.createElement(vP, { points: B, baseLine: W, needClip: r, clipPathId: a, props: s }) } return I > 0 && (n.current = o, i.current = c), h.createElement(aa, null, u && h.createElement("defs", null, h.createElement("clipPath", { id: "animationClipPath-".concat(a) }, h.createElement(sne, { alpha: I, points: o, baseLine: c, layout: v, strokeWidth: s.strokeWidth }))), h.createElement(aa, { clipPath: "url(#animationClipPath-".concat(a, ")") }, h.createElement(vP, { points: o, baseLine: c, needClip: r, clipPathId: a, props: s }))) }), h.createElement(dx, { label: s.label })) } function ine(e) { var { needClip: r, clipPathId: a, props: s } = e, n = h.useRef(null), i = h.useRef(); return h.createElement(nne, { needClip: r, clipPathId: a, props: s, previousPointsRef: n, previousBaselineRef: i }) } class one extends h.PureComponent { render() { var { hide: r, dot: a, points: s, className: n, top: i, left: o, needClip: c, xAxisId: u, yAxisId: m, width: g, height: f, id: y, baseLine: p, zIndex: b } = this.props; if (r) return null; var j = er("recharts-area", n), v = y, { r: S, strokeWidth: k } = w6(a), E = KN(a), C = S * 2 + k, N = c ? "url(#clipPath-".concat(E ? "" : "dots-").concat(v, ")") : void 0; return h.createElement(ws, { zIndex: b }, h.createElement(aa, { className: j }, c && h.createElement("defs", null, h.createElement(tk, { clipPathId: v, xAxisId: u, yAxisId: m }), !E && h.createElement("clipPath", { id: "clipPath-dots-".concat(v) }, h.createElement("rect", { x: o - C / 2, y: i - C / 2, width: g + C, height: f + C }))), h.createElement(ine, { needClip: c, clipPathId: v, props: this.props })), h.createElement(Pw, { points: s, mainColor: sf(this.props.stroke, this.props.fill), itemDataKey: this.props.dataKey, activeDot: this.props.activeDot, clipPath: N }), this.props.isRange && Array.isArray(p) && h.createElement(Pw, { points: p, mainColor: sf(this.props.stroke, this.props.fill), itemDataKey: this.props.dataKey, activeDot: this.props.activeDot, clipPath: N })) } } var T6 = { activeDot: !0, animationBegin: 0, animationDuration: 1500, animationEasing: "ease", connectNulls: !1, dot: !1, fill: "#3182bd", fillOpacity: .6, hide: !1, isAnimationActive: "auto", legendType: "line", stroke: "#3182bd", strokeWidth: 1, type: "linear", label: !1, xAxisId: 0, yAxisId: 0, zIndex: ga.area }; function lne(e) { var r, a = sa(e, T6), { activeDot: s, animationBegin: n, animationDuration: i, animationEasing: o, connectNulls: c, dot: u, fill: m, fillOpacity: g, hide: f, isAnimationActive: y, legendType: p, stroke: b, xAxisId: j, yAxisId: v } = a, S = P6(a, Gse), k = ec(), E = OI(), { needClip: C } = px(j, v), N = Ha(), { points: A, isRange: D, baseLine: I } = (r = nt(V => Wse(V, j, v, N, e.id))) !== null && r !== void 0 ? r : {}, $ = xx(); if (k !== "horizontal" && k !== "vertical" || $ == null || E !== "AreaChart" && E !== "ComposedChart") return null; var { height: B, width: W, x: M, y: q } = $; return !A || !A.length ? null : h.createElement(one, Ul({}, S, { activeDot: s, animationBegin: n, animationDuration: i, animationEasing: o, baseLine: I, connectNulls: c, dot: u, fill: m, fillOpacity: g, height: B, hide: f, layout: k, isAnimationActive: y === "auto" ? !pd.isSsr : y, isRange: D, legendType: p, needClip: C, points: A, stroke: b, width: W, left: M, top: q, xAxisId: j, yAxisId: v })) } var cne = (e, r, a, s, n) => { var i = a ?? r; if (rt(i)) return i; var o = e === "horizontal" ? n : s, c = o.scale.domain(); if (o.type === "number") { var u = Math.max(c[0], c[1]), m = Math.min(c[0], c[1]); return i === "dataMin" ? m : i === "dataMax" || u < 0 ? u : Math.max(Math.min(c[0], c[1]), 0) } return i === "dataMin" ? c[0] : i === "dataMax" ? c[1] : c[0] }; function dne(e) { var { areaSettings: { connectNulls: r, baseValue: a, dataKey: s }, stackedData: n, layout: i, chartBaseValue: o, xAxis: c, yAxis: u, displayedData: m, dataStartIndex: g, xAxisTicks: f, yAxisTicks: y, bandSize: p } = e, b = n && n.length, j = cne(i, o, a, c, u), v = i === "horizontal", S = !1, k = m.map((C, N) => { var A; b ? A = n[g + N] : (A = xr(C, s), Array.isArray(A) ? S = !0 : A = [j, A]); var D = A[1] == null || b && !r && xr(C, s) == null; return v ? { x: Eh({ axis: c, ticks: f, bandSize: p, entry: C, index: N }), y: D ? null : u.scale(A[1]), value: A, payload: C } : { x: D ? null : c.scale(A[1]), y: Eh({ axis: u, ticks: y, bandSize: p, entry: C, index: N }), value: A, payload: C } }), E; return b || S ? E = k.map(C => { var N = Array.isArray(C.value) ? C.value[0] : null; return v ? { x: C.x, y: N != null && C.y != null ? u.scale(N) : null, payload: C.payload } : { x: N != null ? c.scale(N) : null, y: C.y, payload: C.payload } }) : E = v ? u.scale(j) : c.scale(j), { points: k, baseLine: E, isRange: S } } function une(e) { var r = sa(e, T6), a = Ha(); return h.createElement(hx, { id: r.id, type: "area" }, s => h.createElement(h.Fragment, null, h.createElement(JN, { legendPayload: Zse(r) }), h.createElement(Jse, { dataKey: r.dataKey, data: r.data, stroke: r.stroke, strokeWidth: r.strokeWidth, fill: r.fill, name: r.name, hide: r.hide, unit: r.unit, tooltipType: r.tooltipType }), h.createElement(ek, { type: "area", id: s, data: r.data, dataKey: r.dataKey, xAxisId: r.xAxisId, yAxisId: r.yAxisId, zAxisId: 0, stackId: o5(r.stackId), hide: r.hide, barSize: void 0, baseValue: r.baseValue, isPanorama: a, connectNulls: r.connectNulls }), h.createElement(lne, Ul({}, r, { id: s })))) } var od = h.memo(une, rg); od.displayName = "Area"; var mne = ["domain", "range"], gne = ["domain", "range"]; function bP(e, r) { if (e == null) return {}; var a, s, n = hne(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function hne(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } function wP(e, r) { return e === r ? !0 : Array.isArray(e) && e.length === 2 && Array.isArray(r) && r.length === 2 ? e[0] === r[0] && e[1] === r[1] : !1 } function D6(e, r) { if (e === r) return !0; var { domain: a, range: s } = e, n = bP(e, mne), { domain: i, range: o } = r, c = bP(r, gne); return !wP(a, i) || !wP(s, o) ? !1 : rg(n, c) } var fne = ["dangerouslySetInnerHTML", "ticks"], xne = ["id"]; function Dw() { return Dw = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Dw.apply(null, arguments) } function jP(e, r) { if (e == null) return {}; var a, s, n = pne(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function pne(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } function yne(e) { var r = Tr(), a = h.useRef(null); return h.useLayoutEffect(() => { a.current === null ? r(Ete(e)) : a.current !== e && r(Ate({ prev: a.current, next: e })), a.current = e }, [e, r]), h.useLayoutEffect(() => () => { a.current && (r(Pte(a.current)), a.current = null) }, [r]), null } var vne = e => { var { xAxisId: r, className: a } = e, s = nt(Aj), n = Ha(), i = "xAxis", o = nt(v => Cd(v, i, r, n)), c = nt(v => dI(v, i, r, n)), u = nt(v => iI(v, r)), m = nt(v => PQ(v, r)), g = nt(v => zO(v, r)); if (u == null || m == null || g == null) return null; var { dangerouslySetInnerHTML: f, ticks: y } = e, p = jP(e, fne), { id: b } = g, j = jP(g, xne); return h.createElement(sk, Dw({}, p, j, { scale: o, x: m.x, y: m.y, width: u.width, height: u.height, className: er("recharts-".concat(i, " ").concat(i), a), viewBox: s, ticks: c, axisType: i })) }, bne = { allowDataOverflow: Ra.allowDataOverflow, allowDecimals: Ra.allowDecimals, allowDuplicatedCategory: Ra.allowDuplicatedCategory, angle: Ra.angle, axisLine: zi.axisLine, height: Ra.height, hide: !1, includeHidden: Ra.includeHidden, interval: Ra.interval, minTickGap: Ra.minTickGap, mirror: Ra.mirror, orientation: Ra.orientation, padding: Ra.padding, reversed: Ra.reversed, scale: Ra.scale, tick: Ra.tick, tickCount: Ra.tickCount, tickLine: zi.tickLine, tickSize: zi.tickSize, type: Ra.type, xAxisId: 0 }, wne = e => { var r = sa(e, bne); return h.createElement(h.Fragment, null, h.createElement(yne, { allowDataOverflow: r.allowDataOverflow, allowDecimals: r.allowDecimals, allowDuplicatedCategory: r.allowDuplicatedCategory, angle: r.angle, dataKey: r.dataKey, domain: r.domain, height: r.height, hide: r.hide, id: r.xAxisId, includeHidden: r.includeHidden, interval: r.interval, minTickGap: r.minTickGap, mirror: r.mirror, name: r.name, orientation: r.orientation, padding: r.padding, reversed: r.reversed, scale: r.scale, tick: r.tick, tickCount: r.tickCount, tickFormatter: r.tickFormatter, ticks: r.ticks, type: r.type, unit: r.unit }), h.createElement(vne, r)) }, xs = h.memo(wne, D6); xs.displayName = "XAxis"; var jne = ["dangerouslySetInnerHTML", "ticks"], Nne = ["id"]; function Ow() { return Ow = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Ow.apply(null, arguments) } function NP(e, r) { if (e == null) return {}; var a, s, n = kne(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function kne(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } function Sne(e) { var r = Tr(), a = h.useRef(null); return h.useLayoutEffect(() => { a.current === null ? r(Tte(e)) : a.current !== e && r(Dte({ prev: a.current, next: e })), a.current = e }, [e, r]), h.useLayoutEffect(() => () => { a.current && (r(Ote(a.current)), a.current = null) }, [r]), null } var Cne = e => { var { yAxisId: r, className: a, width: s, label: n } = e, i = h.useRef(null), o = h.useRef(null), c = nt(Aj), u = Ha(), m = Tr(), g = "yAxis", f = nt(N => Cd(N, g, r, u)), y = nt(N => oI(N, r)), p = nt(N => DQ(N, r)), b = nt(N => dI(N, g, r, u)), j = nt(N => BO(N, r)); if (h.useLayoutEffect(() => { if (!(s !== "auto" || !y || qN(n) || h.isValidElement(n) || j == null)) { var N = i.current; if (N) { var A = N.getCalculatedWidth(); Math.round(y.width) !== Math.round(A) && m(Ite({ id: r, width: A })) } } }, [b, y, m, n, r, s, j]), y == null || p == null || j == null) return null; var { dangerouslySetInnerHTML: v, ticks: S } = e, k = NP(e, jne), { id: E } = j, C = NP(j, Nne); return h.createElement(sk, Ow({}, k, C, { ref: i, labelRef: o, scale: f, x: p.x, y: p.y, tickTextProps: s === "auto" ? { width: void 0 } : { width: s }, width: y.width, height: y.height, className: er("recharts-".concat(g, " ").concat(g), a), viewBox: c, ticks: b, axisType: g })) }, Ene = { allowDataOverflow: Ma.allowDataOverflow, allowDecimals: Ma.allowDecimals, allowDuplicatedCategory: Ma.allowDuplicatedCategory, angle: Ma.angle, axisLine: zi.axisLine, hide: !1, includeHidden: Ma.includeHidden, interval: Ma.interval, minTickGap: Ma.minTickGap, mirror: Ma.mirror, orientation: Ma.orientation, padding: Ma.padding, reversed: Ma.reversed, scale: Ma.scale, tick: Ma.tick, tickCount: Ma.tickCount, tickLine: zi.tickLine, tickSize: zi.tickSize, type: Ma.type, width: Ma.width, yAxisId: 0 }, Ane = e => { var r = sa(e, Ene); return h.createElement(h.Fragment, null, h.createElement(Sne, { interval: r.interval, id: r.yAxisId, scale: r.scale, type: r.type, domain: r.domain, allowDataOverflow: r.allowDataOverflow, dataKey: r.dataKey, allowDuplicatedCategory: r.allowDuplicatedCategory, allowDecimals: r.allowDecimals, tickCount: r.tickCount, padding: r.padding, includeHidden: r.includeHidden, reversed: r.reversed, ticks: r.ticks, width: r.width, orientation: r.orientation, mirror: r.mirror, hide: r.hide, unit: r.unit, name: r.name, angle: r.angle, minTickGap: r.minTickGap, tick: r.tick, tickFormatter: r.tickFormatter }), h.createElement(Cne, r)) }, ps = h.memo(Ane, D6); ps.displayName = "YAxis"; var Pne = (e, r) => r, ik = be([Pne, Wt, UO, Ta, CI, no, VX, Aa], JX), ok = e => { var r = e.currentTarget.getBoundingClientRect(), a = r.width / e.currentTarget.offsetWidth, s = r.height / e.currentTarget.offsetHeight; return { chartX: Math.round((e.clientX - r.left) / a), chartY: Math.round((e.clientY - r.top) / s) } }, O6 = jn("mouseClick"), I6 = Mm(); I6.startListening({ actionCreator: O6, effect: (e, r) => { var a = e.payload, s = ik(r.getState(), ok(a)); s?.activeIndex != null && r.dispatch(WQ({ activeIndex: s.activeIndex, activeDataKey: void 0, activeCoordinate: s.activeCoordinate })) } }); var Iw = jn("mouseMove"), L6 = Mm(), D0 = null; L6.startListening({ actionCreator: Iw, effect: (e, r) => { var a = e.payload; D0 !== null && cancelAnimationFrame(D0); var s = ok(a); D0 = requestAnimationFrame(() => { var n = r.getState(), i = ON(n, n.tooltip.settings.shared); if (i === "axis") { var o = ik(n, s); o?.activeIndex != null ? r.dispatch(yI({ activeIndex: o.activeIndex, activeDataKey: void 0, activeCoordinate: o.activeCoordinate })) : r.dispatch(pI()) } D0 = null }) } }); var kP = { accessibilityLayer: !0, barCategoryGap: "10%", barGap: 4, barSize: void 0, className: void 0, maxBarSize: void 0, stackOffset: "none", syncId: void 0, syncMethod: "index", baseValue: void 0, reverseStackOrder: !1 }, R6 = Fs({ name: "rootProps", initialState: kP, reducers: { updateOptions: (e, r) => { var a; e.accessibilityLayer = r.payload.accessibilityLayer, e.barCategoryGap = r.payload.barCategoryGap, e.barGap = (a = r.payload.barGap) !== null && a !== void 0 ? a : kP.barGap, e.barSize = r.payload.barSize, e.maxBarSize = r.payload.maxBarSize, e.stackOffset = r.payload.stackOffset, e.syncId = r.payload.syncId, e.syncMethod = r.payload.syncMethod, e.className = r.payload.className, e.baseValue = r.payload.baseValue, e.reverseStackOrder = r.payload.reverseStackOrder } } }), Tne = R6.reducer, { updateOptions: Dne } = R6.actions, M6 = Fs({ name: "polarOptions", initialState: null, reducers: { updatePolarOptions: (e, r) => r.payload } }), { updatePolarOptions: One } = M6.actions, Ine = M6.reducer, _6 = jn("keyDown"), $6 = jn("focus"), lk = Mm(); lk.startListening({ actionCreator: _6, effect: (e, r) => { var a = r.getState(), s = a.rootProps.accessibilityLayer !== !1; if (s) { var { keyboardInteraction: n } = a.tooltip, i = e.payload; if (!(i !== "ArrowRight" && i !== "ArrowLeft" && i !== "Enter")) { var o = IN(n, Ad(a), Ym(a), Jm(a)), c = o == null ? -1 : Number(o); if (!(!Number.isFinite(c) || c < 0)) { var u = no(a); if (i === "Enter") { var m = Yh(a, "axis", "hover", String(n.index)); r.dispatch(Nw({ active: !n.active, activeIndex: n.index, activeDataKey: n.dataKey, activeCoordinate: m })); return } var g = RQ(a), f = g === "left-to-right" ? 1 : -1, y = i === "ArrowRight" ? 1 : -1, p = c + y * f; if (!(u == null || p >= u.length || p < 0)) { var b = Yh(a, "axis", "hover", String(p)); r.dispatch(Nw({ active: !0, activeIndex: p.toString(), activeDataKey: void 0, activeCoordinate: b })) } } } } } }); lk.startListening({ actionCreator: $6, effect: (e, r) => { var a = r.getState(), s = a.rootProps.accessibilityLayer !== !1; if (s) { var { keyboardInteraction: n } = a.tooltip; if (!n.active && n.index == null) { var i = "0", o = Yh(a, "axis", "hover", String(i)); r.dispatch(Nw({ activeDataKey: void 0, active: !0, activeIndex: i, activeCoordinate: o })) } } } }); var hn = jn("externalEvent"), U6 = Mm(), tb = new Map; U6.startListening({ actionCreator: hn, effect: (e, r) => { var { handler: a, reactEvent: s } = e.payload; if (a != null) { s.persist(); var n = s.type, i = tb.get(n); i !== void 0 && cancelAnimationFrame(i); var o = requestAnimationFrame(() => { try { var c = r.getState(), u = { activeCoordinate: DX(c), activeDataKey: $N(c), activeIndex: Vo(c), activeLabel: PI(c), activeTooltipIndex: Vo(c), isTooltipActive: OX(c) }; a(u, s) } finally { tb.delete(n) } }); tb.set(n, o) } } }); var Lne = be([Ed], e => e.tooltipItemPayloads), Rne = be([Lne, Xm, (e, r, a) => r, (e, r, a) => a], (e, r, a, s) => { var n = e.find(c => c.settings.dataKey === s); if (n != null) { var { positions: i } = n; if (i != null) { var o = r(i, a); return o } } }), F6 = jn("touchMove"), z6 = Mm(); z6.startListening({ actionCreator: F6, effect: (e, r) => { var a = e.payload; if (!(a.touches == null || a.touches.length === 0)) { var s = r.getState(), n = ON(s, s.tooltip.settings.shared); if (n === "axis") { var i = ik(s, ok({ clientX: a.touches[0].clientX, clientY: a.touches[0].clientY, currentTarget: a.currentTarget })); i?.activeIndex != null && r.dispatch(yI({ activeIndex: i.activeIndex, activeDataKey: void 0, activeCoordinate: i.activeCoordinate })) } else if (n === "item") { var o, c = a.touches[0]; if (document.elementFromPoint == null) return; var u = document.elementFromPoint(c.clientX, c.clientY); if (!u || !u.getAttribute) return; var m = u.getAttribute(c5), g = (o = u.getAttribute(d5)) !== null && o !== void 0 ? o : void 0, f = Rne(r.getState(), m, g); r.dispatch(xI({ activeDataKey: g, activeIndex: m, activeCoordinate: f })) } } } }); var Mne = T3({ brush: wae, cartesianAxis: Lte, chartData: TZ, errorBars: Jte, graphicalItems: zee, layout: aH, legend: uW, options: SZ, polarAxis: ree, polarOptions: Ine, referenceElements: Aae, rootProps: Tne, tooltip: VQ, zIndex: gZ }), _ne = function (r) { return Aq({ reducer: Mne, preloadedState: r, middleware: a => { var s; return a({ serializableCheck: !1, immutableCheck: !["commonjs", "es6", "production"].includes((s = "es6") !== null && s !== void 0 ? s : "") }).concat([I6.middleware, L6.middleware, lk.middleware, U6.middleware, z6.middleware]) }, enhancers: a => { var s = a; return typeof a == "function" && (s = a()), s.concat(W3({ type: "raf" })) }, devTools: pd.devToolsEnabled }) }; function B6(e) { var { preloadedState: r, children: a, reduxStoreName: s } = e, n = Ha(), i = h.useRef(null); if (n) return a; i.current == null && (i.current = _ne(r)); var o = vj; return h.createElement(Nre, { context: o, store: i.current }, a) } function $ne(e) { var { layout: r, margin: a } = e, s = Tr(), n = Ha(); return h.useEffect(() => { n || (s(eH(r)), s(Jq(a))) }, [s, n, r, a]), null } var q6 = h.memo($ne, rg); function H6(e) { var r = Tr(); return h.useEffect(() => { r(Dne(e)) }, [r, e]), null } function SP(e) { var { zIndex: r, isPanorama: a } = e, s = a ? "recharts-zindex-panorama-" : "recharts-zindex-", n = s6("".concat(s).concat(r)), i = Tr(); return h.useLayoutEffect(() => (i(uZ({ zIndex: r, elementId: n, isPanorama: a })), () => { i(mZ({ zIndex: r, isPanorama: a })) }), [i, r, n, a]), h.createElement("g", { tabIndex: -1, id: n }) } function CP(e) { var { children: r, isPanorama: a } = e, s = nt(tZ); if (!s || s.length === 0) return r; var n = s.filter(o => o < 0), i = s.filter(o => o > 0); return h.createElement(h.Fragment, null, n.map(o => h.createElement(SP, { key: o, zIndex: o, isPanorama: a })), r, i.map(o => h.createElement(SP, { key: o, zIndex: o, isPanorama: a }))) } var Une = ["children"]; function Fne(e, r) { if (e == null) return {}; var a, s, n = zne(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function zne(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } function nf() { return nf = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, nf.apply(null, arguments) } var Bne = { width: "100%", height: "100%", display: "block" }, qne = h.forwardRef((e, r) => { var a = Tj(), s = Dj(), n = C5(); if (!li(a) || !li(s)) return null; var { children: i, otherAttributes: o, title: c, desc: u } = e, m, g; return o != null && (typeof o.tabIndex == "number" ? m = o.tabIndex : m = n ? 0 : void 0, typeof o.role == "string" ? g = o.role : g = n ? "application" : void 0), h.createElement(cj, nf({}, o, { title: c, desc: u, role: g, tabIndex: m, width: a, height: s, style: Bne, ref: r }), i) }), Hne = e => { var { children: r } = e, a = nt(Ff); if (!a) return null; var { width: s, height: n, y: i, x: o } = a; return h.createElement(cj, { width: s, height: n, x: o, y: i }, r) }, EP = h.forwardRef((e, r) => { var { children: a } = e, s = Fne(e, Une), n = Ha(); return n ? h.createElement(Hne, null, h.createElement(CP, { isPanorama: !0 }, a)) : h.createElement(qne, nf({ ref: r }, s), h.createElement(CP, { isPanorama: !1 }, a)) }); function Wne() { var e = Tr(), [r, a] = h.useState(null), s = nt(bH); return h.useEffect(() => { if (r != null) { var n = r.getBoundingClientRect(), i = n.width / r.offsetWidth; Rr(i) && i !== s && e(rH(i)) } }, [r, e, s]), a } function AP(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function Vne(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? AP(Object(a), !0).forEach(function (s) { Gne(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : AP(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function Gne(e, r, a) { return (r = Kne(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function Kne(e) { var r = Yne(e, "string"); return typeof r == "symbol" ? r : r + "" } function Yne(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } function Xl() { return Xl = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Xl.apply(null, arguments) } var Qne = () => (UZ(), null); function of(e) { if (typeof e == "number") return e; if (typeof e == "string") { var r = parseFloat(e); if (!Number.isNaN(r)) return r } return 0 } var Xne = h.forwardRef((e, r) => { var a, s, n = h.useRef(null), [i, o] = h.useState({ containerWidth: of((a = e.style) === null || a === void 0 ? void 0 : a.width), containerHeight: of((s = e.style) === null || s === void 0 ? void 0 : s.height) }), c = h.useCallback((m, g) => { o(f => { var y = Math.round(m), p = Math.round(g); return f.containerWidth === y && f.containerHeight === p ? f : { containerWidth: y, containerHeight: p } }) }, []), u = h.useCallback(m => { if (typeof r == "function" && r(m), m != null && typeof ResizeObserver < "u") { var { width: g, height: f } = m.getBoundingClientRect(); c(g, f); var y = b => { var { width: j, height: v } = b[0].contentRect; c(j, v) }, p = new ResizeObserver(y); p.observe(m), n.current = p } }, [r, c]); return h.useEffect(() => () => { var m = n.current; m?.disconnect() }, [c]), h.createElement(h.Fragment, null, h.createElement(Bf, { width: i.containerWidth, height: i.containerHeight }), h.createElement("div", Xl({ ref: u }, e))) }), Zne = h.forwardRef((e, r) => { var { width: a, height: s } = e, [n, i] = h.useState({ containerWidth: of(a), containerHeight: of(s) }), o = h.useCallback((u, m) => { i(g => { var f = Math.round(u), y = Math.round(m); return g.containerWidth === f && g.containerHeight === y ? g : { containerWidth: f, containerHeight: y } }) }, []), c = h.useCallback(u => { if (typeof r == "function" && r(u), u != null) { var { width: m, height: g } = u.getBoundingClientRect(); o(m, g) } }, [r, o]); return h.createElement(h.Fragment, null, h.createElement(Bf, { width: n.containerWidth, height: n.containerHeight }), h.createElement("div", Xl({ ref: c }, e))) }), Jne = h.forwardRef((e, r) => { var { width: a, height: s } = e; return h.createElement(h.Fragment, null, h.createElement(Bf, { width: a, height: s }), h.createElement("div", Xl({ ref: r }, e))) }), eie = h.forwardRef((e, r) => { var { width: a, height: s } = e; return Wi(a) || Wi(s) ? h.createElement(Zne, Xl({}, e, { ref: r })) : h.createElement(Jne, Xl({}, e, { ref: r })) }); function tie(e) { return e === !0 ? Xne : eie } var rie = h.forwardRef((e, r) => { var { children: a, className: s, height: n, onClick: i, onContextMenu: o, onDoubleClick: c, onMouseDown: u, onMouseEnter: m, onMouseLeave: g, onMouseMove: f, onMouseUp: y, onTouchEnd: p, onTouchMove: b, onTouchStart: j, style: v, width: S, responsive: k, dispatchTouchEvents: E = !0 } = e, C = h.useRef(null), N = Tr(), [A, D] = h.useState(null), [I, $] = h.useState(null), B = Wne(), W = Pj(), M = W?.width > 0 ? W.width : S, q = W?.height > 0 ? W.height : n, V = h.useCallback(G => { B(G), typeof r == "function" && r(G), D(G), $(G), G != null && (C.current = G) }, [B, r, D, $]), X = h.useCallback(G => { N(O6(G)), N(hn({ handler: i, reactEvent: G })) }, [N, i]), se = h.useCallback(G => { N(Iw(G)), N(hn({ handler: m, reactEvent: G })) }, [N, m]), le = h.useCallback(G => { N(pI()), N(hn({ handler: g, reactEvent: G })) }, [N, g]), ee = h.useCallback(G => { N(Iw(G)), N(hn({ handler: f, reactEvent: G })) }, [N, f]), L = h.useCallback(() => { N($6()) }, [N]), z = h.useCallback(G => { N(_6(G.key)) }, [N]), T = h.useCallback(G => { N(hn({ handler: o, reactEvent: G })) }, [N, o]), _ = h.useCallback(G => { N(hn({ handler: c, reactEvent: G })) }, [N, c]), H = h.useCallback(G => { N(hn({ handler: u, reactEvent: G })) }, [N, u]), U = h.useCallback(G => { N(hn({ handler: y, reactEvent: G })) }, [N, y]), K = h.useCallback(G => { N(hn({ handler: j, reactEvent: G })) }, [N, j]), Z = h.useCallback(G => { E && N(F6(G)), N(hn({ handler: b, reactEvent: G })) }, [N, E, b]), J = h.useCallback(G => { N(hn({ handler: p, reactEvent: G })) }, [N, p]), te = tie(k); return h.createElement(_I.Provider, { value: A }, h.createElement(VD.Provider, { value: I }, h.createElement(te, { width: M ?? v?.width, height: q ?? v?.height, className: er("recharts-wrapper", s), style: Vne({ position: "relative", cursor: "default", width: M, height: q }, v), onClick: X, onContextMenu: T, onDoubleClick: _, onFocus: L, onKeyDown: z, onMouseDown: H, onMouseEnter: se, onMouseLeave: le, onMouseMove: ee, onMouseUp: U, onTouchEnd: J, onTouchMove: Z, onTouchStart: K, ref: V }, h.createElement(Qne, null), a))) }), aie = ["width", "height", "responsive", "children", "className", "style", "compact", "title", "desc"]; function sie(e, r) { if (e == null) return {}; var a, s, n = nie(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function nie(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } var W6 = h.forwardRef((e, r) => { var { width: a, height: s, responsive: n, children: i, className: o, style: c, compact: u, title: m, desc: g } = e, f = sie(e, aie), y = vs(f); return u ? h.createElement(h.Fragment, null, h.createElement(Bf, { width: a, height: s }), h.createElement(EP, { otherAttributes: y, title: m, desc: g }, i)) : h.createElement(rie, { className: o, style: c, width: a, height: s, responsive: n ?? !1, onClick: e.onClick, onMouseLeave: e.onMouseLeave, onMouseEnter: e.onMouseEnter, onMouseMove: e.onMouseMove, onMouseDown: e.onMouseDown, onMouseUp: e.onMouseUp, onContextMenu: e.onContextMenu, onDoubleClick: e.onDoubleClick, onTouchStart: e.onTouchStart, onTouchMove: e.onTouchMove, onTouchEnd: e.onTouchEnd }, h.createElement(EP, { otherAttributes: y, title: m, desc: g, ref: r }, h.createElement(Tae, null, i))) }); function Lw() { return Lw = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Lw.apply(null, arguments) } var iie = { top: 5, right: 5, bottom: 5, left: 5 }, oie = { accessibilityLayer: !0, barCategoryGap: "10%", barGap: 4, layout: "horizontal", margin: iie, responsive: !1, reverseStackOrder: !1, stackOffset: "none", syncMethod: "index" }, ck = h.forwardRef(function (r, a) { var s, n = sa(r.categoricalChartProps, oie), { chartName: i, defaultTooltipEventType: o, validateTooltipEventTypes: c, tooltipPayloadSearcher: u, categoricalChartProps: m } = r, g = { chartName: i, defaultTooltipEventType: o, validateTooltipEventTypes: c, tooltipPayloadSearcher: u, eventEmitter: void 0 }; return h.createElement(B6, { preloadedState: { options: g }, reduxStoreName: (s = m.id) !== null && s !== void 0 ? s : i }, h.createElement(m6, { chartData: m.data }), h.createElement(q6, { layout: n.layout, margin: n.margin }), h.createElement(H6, { baseValue: n.baseValue, accessibilityLayer: n.accessibilityLayer, barCategoryGap: n.barCategoryGap, maxBarSize: n.maxBarSize, stackOffset: n.stackOffset, barGap: n.barGap, barSize: n.barSize, syncId: n.syncId, syncMethod: n.syncMethod, className: n.className, reverseStackOrder: n.reverseStackOrder }), h.createElement(W6, Lw({}, n, { ref: a }))) }), lie = ["axis"], sg = h.forwardRef((e, r) => h.createElement(ck, { chartName: "LineChart", defaultTooltipEventType: "axis", validateTooltipEventTypes: lie, tooltipPayloadSearcher: lx, categoricalChartProps: e, ref: r })), cie = ["axis", "item"], Pd = h.forwardRef((e, r) => h.createElement(ck, { chartName: "BarChart", defaultTooltipEventType: "axis", validateTooltipEventTypes: cie, tooltipPayloadSearcher: lx, categoricalChartProps: e, ref: r })); function die(e) { var r = Tr(); return h.useEffect(() => { r(One(e)) }, [r, e]), null } var uie = ["layout"]; function Rw() { return Rw = Object.assign ? Object.assign.bind() : function (e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r]; for (var s in a) ({}).hasOwnProperty.call(a, s) && (e[s] = a[s]) } return e }, Rw.apply(null, arguments) } function mie(e, r) { if (e == null) return {}; var a, s, n = gie(e, r); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (s = 0; s < i.length; s++)a = i[s], r.indexOf(a) === -1 && {}.propertyIsEnumerable.call(e, a) && (n[a] = e[a]) } return n } function gie(e, r) { if (e == null) return {}; var a = {}; for (var s in e) if ({}.hasOwnProperty.call(e, s)) { if (r.indexOf(s) !== -1) continue; a[s] = e[s] } return a } var hie = { top: 5, right: 5, bottom: 5, left: 5 }, V6 = { accessibilityLayer: !0, stackOffset: "none", barCategoryGap: "10%", barGap: 4, margin: hie, reverseStackOrder: !1, syncMethod: "index", layout: "radial", responsive: !1, cx: "50%", cy: "50%", innerRadius: 0, outerRadius: "80%" }, fie = h.forwardRef(function (r, a) { var s, n = sa(r.categoricalChartProps, V6), { layout: i } = n, o = mie(n, uie), { chartName: c, defaultTooltipEventType: u, validateTooltipEventTypes: m, tooltipPayloadSearcher: g } = r, f = { chartName: c, defaultTooltipEventType: u, validateTooltipEventTypes: m, tooltipPayloadSearcher: g, eventEmitter: void 0 }; return h.createElement(B6, { preloadedState: { options: f }, reduxStoreName: (s = n.id) !== null && s !== void 0 ? s : c }, h.createElement(m6, { chartData: n.data }), h.createElement(q6, { layout: i, margin: n.margin }), h.createElement(H6, { baseValue: void 0, accessibilityLayer: n.accessibilityLayer, barCategoryGap: n.barCategoryGap, maxBarSize: n.maxBarSize, stackOffset: n.stackOffset, barGap: n.barGap, barSize: n.barSize, syncId: n.syncId, syncMethod: n.syncMethod, className: n.className, reverseStackOrder: n.reverseStackOrder }), h.createElement(die, { cx: n.cx, cy: n.cy, startAngle: n.startAngle, endAngle: n.endAngle, innerRadius: n.innerRadius, outerRadius: n.outerRadius }), h.createElement(W6, Rw({}, o, { ref: a }))) }); function PP(e, r) { var a = Object.keys(e); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); r && (s = s.filter(function (n) { return Object.getOwnPropertyDescriptor(e, n).enumerable })), a.push.apply(a, s) } return a } function TP(e) { for (var r = 1; r < arguments.length; r++) { var a = arguments[r] != null ? arguments[r] : {}; r % 2 ? PP(Object(a), !0).forEach(function (s) { xie(e, s, a[s]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : PP(Object(a)).forEach(function (s) { Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(a, s)) }) } return e } function xie(e, r, a) { return (r = pie(r)) in e ? Object.defineProperty(e, r, { value: a, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = a, e } function pie(e) { var r = yie(e, "string"); return typeof r == "symbol" ? r : r + "" } function yie(e, r) { if (typeof e != "object" || !e) return e; var a = e[Symbol.toPrimitive]; if (a !== void 0) { var s = a.call(e, r); if (typeof s != "object") return s; throw new TypeError("@@toPrimitive must return a primitive value.") } return (r === "string" ? String : Number)(e) } var vie = ["item"], bie = TP(TP({}, V6), {}, { layout: "centric", startAngle: 0, endAngle: 360 }), yx = h.forwardRef((e, r) => { var a = sa(e, bie); return h.createElement(fie, { chartName: "PieChart", defaultTooltipEventType: "item", validateTooltipEventTypes: vie, tooltipPayloadSearcher: lx, categoricalChartProps: a, ref: r }) }), wie = ["axis"], dk = h.forwardRef((e, r) => h.createElement(ck, { chartName: "AreaChart", defaultTooltipEventType: "axis", validateTooltipEventTypes: wie, tooltipPayloadSearcher: lx, categoricalChartProps: e, ref: r })); const DP = ({ data: e, title: r, height: a = 300, showLegend: s = !0, showTooltip: n = !0, dataKeys: i = [{ key: "value", color: "#3B82F6", name: "Value" }], xAxisKey: o = "name", valueFormatter: c = u => u }) => { const u = ({ active: m, payload: g, label: f }) => m && g && g.length ? t.jsxs("div", { className: "bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg", children: [t.jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-white mb-2", children: f }), g.map((y, p) => t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-300", children: [t.jsx("span", { style: { color: y.color }, children: "" }), " ", y.name, ": ", t.jsx("span", { className: "font-semibold", children: c(y.value) })] }, p))] }) : null; return t.jsxs("div", { className: "w-full", children: [r && t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: r }), t.jsx(Ms, { width: "100%", height: a, children: t.jsxs(Pd, { data: e, margin: { top: 5, right: 30, left: 20, bottom: 5 }, children: [t.jsx(fs, { strokeDasharray: "3 3", className: "opacity-30" }), t.jsx(xs, { dataKey: o, className: "text-xs text-gray-600 dark:text-gray-400", tick: { fontSize: 12 } }), t.jsx(ps, { className: "text-xs text-gray-600 dark:text-gray-400", tick: { fontSize: 12 }, tickFormatter: c }), n && t.jsx(Ba, { content: t.jsx(u, {}) }), s && t.jsx(za, {}), i.map((m, g) => t.jsx(qn, { dataKey: m.key, fill: m.color, name: m.name, radius: [4, 4, 0, 0] }, g))] }) })] }) }, jie = ({ data: e, title: r, height: a = 300, showLegend: s = !0, showTooltip: n = !0, dataKeys: i = [{ key: "value", color: "#3B82F6", name: "Value" }], xAxisKey: o = "name", valueFormatter: c = u => u }) => { const u = ({ active: m, payload: g, label: f }) => m && g && g.length ? t.jsxs("div", { className: "bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg", children: [t.jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-white mb-2", children: f }), g.map((y, p) => t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-300", children: [t.jsx("span", { style: { color: y.color }, children: "" }), " ", y.name, ": ", t.jsx("span", { className: "font-semibold", children: c(y.value) })] }, p))] }) : null; return t.jsxs("div", { className: "w-full", children: [r && t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: r }), t.jsx(Ms, { width: "100%", height: a, children: t.jsxs(sg, { data: e, margin: { top: 5, right: 30, left: 20, bottom: 5 }, children: [t.jsx(fs, { strokeDasharray: "3 3", className: "opacity-30" }), t.jsx(xs, { dataKey: o, className: "text-xs text-gray-600 dark:text-gray-400", tick: { fontSize: 12 } }), t.jsx(ps, { className: "text-xs text-gray-600 dark:text-gray-400", tick: { fontSize: 12 }, tickFormatter: c }), n && t.jsx(Ba, { content: t.jsx(u, {}) }), s && t.jsx(za, {}), i.map((m, g) => t.jsx(Zi, { type: "monotone", dataKey: m.key, stroke: m.color, strokeWidth: 2, dot: { fill: m.color, strokeWidth: 2, r: 4 }, activeDot: { r: 6, stroke: m.color, strokeWidth: 2 }, name: m.name }, g))] }) })] }) }, Nie = ({ data: e, title: r, height: a = 300, dataKeys: s, gradientId: n, showLegend: i = !0, showTooltip: o = !0, valueFormatter: c = u => u }) => { const u = ({ active: m, payload: g, label: f }) => m && g && g.length ? t.jsxs("div", { className: "bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg", children: [t.jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-white mb-2", children: f }), g.map((y, p) => t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-300", children: [y.name, ": ", t.jsx("span", { className: "font-semibold", style: { color: y.color }, children: c(y.value) })] }, p))] }) : null; return t.jsxs("div", { className: "w-full", children: [r && t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: r }), t.jsx(Ms, { width: "100%", height: a, children: t.jsxs(dk, { data: e, margin: { top: 10, right: 30, left: 0, bottom: 0 }, children: [t.jsx("defs", { children: n && s.map((m, g) => t.jsxs("linearGradient", { id: `${n}-${m.key}`, x1: "0", y1: "0", x2: "0", y2: "1", children: [t.jsx("stop", { offset: "5%", stopColor: m.color, stopOpacity: .8 }), t.jsx("stop", { offset: "95%", stopColor: m.color, stopOpacity: .1 })] }, g)) }), t.jsx(fs, { strokeDasharray: "3 3", className: "stroke-gray-200 dark:stroke-gray-700" }), t.jsx(xs, { dataKey: "name", className: "text-gray-600 dark:text-gray-400", fontSize: 12 }), t.jsx(ps, { className: "text-gray-600 dark:text-gray-400", fontSize: 12, tickFormatter: c }), o && t.jsx(Ba, { content: t.jsx(u, {}) }), i && t.jsx(za, { wrapperStyle: { paddingTop: "20px" }, formatter: (m, g) => t.jsx("span", { style: { color: g.color }, className: "text-sm", children: m }) }), s.map((m, g) => t.jsx(od, { type: "monotone", dataKey: m.key, stackId: "1", stroke: m.color, fill: n ? `url(#${n}-${m.key})` : m.color, fillOpacity: n ? 1 : .6, name: m.name }, g))] }) })] }) }; function kie() {
    const { hasPermission: e, user: r } = mr(), a = xt(), s = r?.roles?.some(Y => { const je = (Y.name || "").toLowerCase(); return je === "admin" || je === "super_admin" || je === "super admin" }), [n, i] = h.useState({ totalUsers: 0, activeUsers: 0, inactiveUsers: 0, newUsers: 0 }), [o, c] = h.useState([]), [u, m] = h.useState(!0), [g, f] = h.useState(!0), [y, p] = h.useState(!0), [b, j] = h.useState(!0), [v, S] = h.useState(!0), [k, E] = h.useState(0), [C, N] = h.useState({ api: !1, database: !1, frontend: !0 }), [A, D] = h.useState({ apiMs: null, dbMs: null }), [I, $] = h.useState({ today: 0, week: 0, month: 0, total: 0 }), [B, W] = h.useState({ totalLeads: 0, newLeads: 0, contactedLeads: 0, qualifiedLeads: 0, proposalLeads: 0, negotiationLeads: 0, closedLeads: 0, lostLeads: 0 }), [M, q] = h.useState({ totalRoles: 0, activeRoles: 0, inactiveRoles: 0 }), [V, X] = h.useState(null), [se, le] = h.useState(!0), [ee, L] = h.useState("me"), [z, T] = h.useState(new Date), [_, H] = h.useState(new Date), [U, K] = h.useState([]), [Z, J] = h.useState([]), [te, G] = h.useState([]), [de, Te] = h.useState([]), [pe, He] = h.useState([]), [ne, De] = h.useState(!0), $e = Y => { const je = Y.getFullYear(), Ne = String(Y.getMonth() + 1).padStart(2, "0"), fe = String(Y.getDate()).padStart(2, "0"); return `${je}-${Ne}-${fe}` }, Et = Y => Y.toLocaleDateString(void 0, { month: "long", year: "numeric" }), Bt = Y => { const je = Y.getFullYear(), Ne = Y.getMonth(), fe = new Date(je, Ne, 1), ke = new Date(je, Ne + 1, 0), he = (fe.getDay() + 6) % 7, Ee = ke.getDate(), Ge = []; for (let qe = 0; qe < he; qe++)Ge.push(null); for (let qe = 1; qe <= Ee; qe++)Ge.push(new Date(je, Ne, qe)); for (; Ge.length % 7 !== 0;)Ge.push(null); return Ge }, Ft = () => { const Y = $e(_); a(`/task-management?dueDate=${Y}`) }, mt = e(Ye.DASHBOARD_WIDGETS.STATS_USERS), ce = e(Ye.DASHBOARD_WIDGETS.STATS_ROLES), Xe = e(Ye.DASHBOARD_WIDGETS.STATS_LEADS); e(Ye.DASHBOARD_WIDGETS.SYSTEM_STATUS); const jt = e(Ye.DASHBOARD_WIDGETS.SYSTEM_ACTIVITY), Q = e(Ye.DASHBOARD_WIDGETS.ACTIVITY_CALENDAR), Le = e(Ye.DASHBOARD_WIDGETS.PERFORMANCE), Ve = e(Ye.DASHBOARD_WIDGETS.REVENUE_METRICS), et = e(Ye.DASHBOARD_WIDGETS.ACTIVITY_ENGAGEMENT), pt = mt || ce || Xe; return h.useEffect(() => { const Y = async () => { try { if (e("user.read")) { const fe = (await ur.getUserStats()).data.stats; i({ totalUsers: fe.totalUsers, activeUsers: fe.activeUsers, inactiveUsers: fe.inactiveUsers, newUsers: fe.newUsers }) } } catch (Ne) { console.error("Error fetching user stats:", Ne) } finally { m(!1) } }, je = async () => { try { if (e("activity.read")) { const Ne = ee === "me" && r?.id ? Number(r.id) : void 0, fe = await Bi.getRecentActivities(5, Ne), ke = fe?.data?.items || fe?.data || [], he = Array.isArray(ke) ? ke.map(Yw) : []; c(he) } } catch (Ne) { console.error("Error fetching activities:", Ne) } finally { j(!1) } }; Y(), je() }, [e, ee, r?.id]), h.useEffect(() => { (async () => { try { if (e("lead.read")) { const je = await Yt.getDashboardKPIs(void 0, void 0, ee === "me" ? r?.id : void 0, ee); X(je?.data ?? je) } } catch (je) { console.error("Error fetching dashboard KPIs:", je) } finally { le(!1) } })() }, [e, ee, r?.id]), h.useEffect(() => { const Y = async () => { try { if (e("lead.read")) if (ee === "me" && r?.id) { const Ne = await Yt.getLeads({ page: 1, limit: 100, assignedTo: Number(r.id) }), fe = Ne?.data?.leads || Ne?.data?.items || [], ke = { total: 0, newLeads: 0, contactedLeads: 0, qualifiedLeads: 0, proposalLeads: 0, negotiationLeads: 0, closedLeads: 0, lostLeads: 0 }, he = { new: "newLeads", contacted: "contactedLeads", qualified: "qualifiedLeads", proposal: "proposalLeads", "proposal sent": "proposalLeads", negotiation: "negotiationLeads", negotiating: "negotiationLeads", closed: "closedLeads", won: "closedLeads", lost: "lostLeads" }, Ee = fe.reduce((Ge, qe) => { Ge.total += 1; const vt = String(qe.status || "").toLowerCase().replace(/_/g, " ").trim(), yr = he[vt]; return yr && (Ge[yr] += 1), Ge }, ke); W({ totalLeads: Ee.total || 0, newLeads: Ee.newLeads || 0, contactedLeads: Ee.contactedLeads || 0, qualifiedLeads: Ee.qualifiedLeads || 0, proposalLeads: Ee.proposalLeads || 0, negotiationLeads: Ee.negotiationLeads || 0, closedLeads: Ee.closedLeads || 0, lostLeads: Ee.lostLeads || 0 }) } else { const Ne = await Yt.getLeadStats(), fe = Ne?.data || Ne; W({ totalLeads: fe.totalLeads ?? fe.total ?? 0, newLeads: fe.newLeads ?? 0, contactedLeads: fe.contactedLeads ?? 0, qualifiedLeads: fe.qualifiedLeads ?? 0, proposalLeads: fe.proposalLeads ?? 0, negotiationLeads: fe.negotiationLeads ?? 0, closedLeads: fe.closedLeads ?? fe.converted ?? 0, lostLeads: fe.lostLeads ?? 0 }) } } catch (Ne) { console.error("Error fetching lead stats:", Ne) } finally { f(!1) } }, je = async () => { try { if (e("role.read")) { const fe = (await Xa.getRoles())?.data?.roles || [], ke = fe.length, he = fe.filter(Ge => Ge.isActive).length, Ee = ke - he; q({ totalRoles: ke, activeRoles: he, inactiveRoles: Ee }) } } catch (Ne) { console.error("Error fetching role stats:", Ne) } finally { p(!1) } }; Y(), je() }, [e, ee, r?.id]), h.useEffect(() => { const Y = async () => { try { const Ne = performance.now(), fe = await ie.get("/health"), ke = performance.now(), he = !!fe.data?.success; let Ee = !1, Ge = null; try { if (e("user.read")) { const tr = performance.now(); await ur.getUserStats(); const Nt = performance.now(); Ge = Math.max(0, Math.round(Nt - tr)), Ee = !0 } } catch { Ee = !1 } let qe = 0, vt = 0, yr = 0, vr = 0; try { if (e("activity.read")) { const tr = await Bi.getActivityStats(); qe = tr?.data?.monthCount || 0, vt = tr?.data?.todayCount || 0, yr = tr?.data?.weekCount || 0, vr = tr?.data?.totalCount || 0 } } catch { qe = 0 } N({ api: he, database: Ee, frontend: !0 }), E(qe), $({ today: vt, week: yr, month: qe, total: vr }), D({ apiMs: Math.max(0, Math.round(ke - Ne)), dbMs: Ge }) } catch { N(fe => ({ ...fe, api: !1 })) } finally { S(!1) } }; Y(); const je = setInterval(Y, 3e4); return () => clearInterval(je) }, [e]), h.useEffect(() => { (async () => { if (e("activity.read")) try { const je = new Date(z.getFullYear(), z.getMonth(), 1), Ne = new Date(z.getFullYear(), z.getMonth() + 1, 0), ke = (await ie.get("/activities/calendar", { params: { startDate: je.toISOString().split("T")[0], endDate: Ne.toISOString().split("T")[0] } })).data?.data?.activities || []; K(ke) } catch (je) { console.error("Error fetching calendar activities:", je), K([]) } })() }, [z, e]), h.useEffect(() => { (async () => { if (!e("lead.read")) { De(!1); return } try { De(!0); const je = ee === "me" ? "me" : "all", Ne = ee === "me" && r?.id ? r.id : void 0, [fe, ke, he, Ee] = await Promise.all([ti.getRevenueTrends(12, Ne, je), ti.getLeadConversionFunnel(Ne, je), ti.getSalesPipelineFlow(6, Ne, je), ti.getActivityTrends(12, Ne, je)]); J(fe?.data || []), G(ke?.data || []), Te(he?.success ? he.data : []), He(Ee?.data || []) } catch (je) { console.error("Error fetching chart data:", je) } finally { De(!1) } })() }, [e, ee, r?.id]), t.jsxs("div", {
        className: "bg-gradient-to-br from-slate-50 via-gray-50 to-blue-50 dark:from-gray-950 dark:via-gray-900 dark:to-slate-900 min-h-screen", children: [t.jsxs("div", { className: "header bg-hero-gradient bg-cover bg-center relative overflow-hidden", children: [t.jsx("div", { className: "absolute inset-0 bg-gradient-to-r from-black/60 via-black/40 to-black/60" }), t.jsx("div", { className: "absolute inset-0 bg-gradient-to-b from-transparent via-black/20 to-black/40" }), t.jsx("div", { className: "relative z-10 px-4 sm:px-6 lg:px-8 py-4  lg:py-10", children: t.jsx("div", { className: "mx-auto w-full ", children: t.jsxs("div", { className: "grid gap-10 xl:grid-cols-2", children: [t.jsxs("div", { className: "space-y-5 text-white", children: [t.jsxs("div", { children: [t.jsxs("p", { className: "text-base sm:text-lg text-white/80 font-light", children: ["Good", " ", new Date().getHours() < 12 ? "Morning" : new Date().getHours() < 18 ? "Afternoon" : "Evening", ","] }), t.jsx("h1", { className: "text-4xl sm:text-5xl font-bold text-white mb-2 leading-tight", children: r ? r.fullName || `${r.firstName} ${r.lastName}` || r.email?.split("@")[0] : "Welcome" })] }), t.jsxs("p", { className: "text-white/80 text-base sm:text-lg leading-relaxed max-w-2xl", children: ["Here's what's happening with your CRM today. You have", " ", t.jsxs("span", { className: "text-white font-semibold", children: [n.totalUsers, " users"] }), " ", "and", " ", t.jsxs("span", { className: "text-white font-semibold", children: [B.totalLeads, " leads"] }), " ", "in your ", ee === "me" ? "pipeline" : "system", "."] }), s && t.jsx("div", { className: "inline-flex flex-col xs:flex-row items-start xs:items-center gap-2", children: t.jsxs("div", { className: "flex items-center bg-white/10 border border-white/20 rounded-full p-1 shadow-lg", children: [t.jsx("button", { type: "button", "aria-pressed": ee === "all", className: `px-4 py-1.5 rounded-full text-xs sm:text-sm transition-colors ${ee === "all" ? "bg-white text-black" : "text-white/80"}`, onClick: () => L("all"), children: "All Data" }), t.jsx("button", { type: "button", "aria-pressed": ee === "me", className: `px-4 py-1.5 rounded-full text-xs sm:text-sm transition-colors ${ee === "me" ? "bg-white text-black" : "text-white/80"}`, onClick: () => L("me"), children: "My Data" })] }) })] }), pt && t.jsx("div", { className: "bg-white/10 backdrop-blur rounded-3xl border border-white/10 p-4 sm:p-6 shadow-2xl", children: t.jsxs("div", { className: "grid grid-cols-1 min-[420px]:grid-cols-2 gap-4", children: [mt && t.jsx(wy, { icon: t.jsx(BF, { className: "w-6 h-6" }), title: "Total Users", value: u ? "..." : n.totalUsers, subtitle: `${n.activeUsers} active, ${n.inactiveUsers} inactive`, color: "blue", className: "" }), ce && t.jsx(wy, { icon: t.jsx(zF, { className: "w-6 h-6" }), title: "Total Roles", value: y ? "..." : M.totalRoles, subtitle: `${M.activeRoles} active, ${M.inactiveRoles} inactive`, color: "green", className: "" }), Xe && t.jsx(wy, { icon: t.jsx(sC, { className: "w-6 h-6" }), title: "Total Leads", value: g ? "..." : B.totalLeads, subtitle: `${B.newLeads} new, ${B.qualifiedLeads} qualified`, color: "purple", className: "" })] }) })] }) }) })] }), t.jsxs("div", {
            className: "space-y-8 mx-auto px-4 sm:px-6 lg:px-8 py-4 lg:py-8", children: [t.jsxs("div", {
                className: "grid grid-cols-1 lg:grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8", children: [jt && t.jsxs("div", { className: "relative bg-gray-200 dark:bg-gray-800 rounded-2xl  hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700", children: [t.jsxs("div", { className: "flex justify-between items-center mb-6", children: [t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "System Activity" }), t.jsx("button", { onClick: () => a("/activities"), className: "text-weconnect-red hover:text-red-600 text-sm font-semibold transition-colors", children: "View All" })] }), t.jsx("div", { className: "space-y-4 max-h-80 overflow-y-auto", children: b ? t.jsx("div", { className: "flex items-center justify-center py-8", children: t.jsx("div", { className: "animate-spin rounded-full h-6 w-6 border-b-2 border-red-500" }) }) : o.length > 0 ? o.map(Y => t.jsxs("div", { className: "flex items-start space-x-3", children: [t.jsx("div", { className: "w-8 h-8 bg-white dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0", children: t.jsx(Y.icon, { className: `w-4 h-4 ${Y.iconColor}` }) }), t.jsxs("div", { className: "flex-1 min-w-0", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("p", { className: "text-xs font-medium text-gray-900 dark:text-white", children: Y.title }), t.jsxs("div", { className: "flex items-center text-xs text-gray-500 ", children: [t.jsx(XT, { className: "w-3 h-3 mr-1" }), Y.time] })] }), t.jsx("p", { className: "text-xs text-gray-600 dark:text-gray-300", children: Y.description }), t.jsx("div", { className: "flex mt-1 space-x-1", children: Y.tags.map((je, Ne) => t.jsx("span", { className: "inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200", children: je }, Ne)) })] })] }, Y.id)) : t.jsx("div", { className: "text-center py-8 text-gray-500 dark:text-gray-400", children: t.jsx("p", { className: "text-sm", children: "No recent activities" }) }) })] }), Q && t.jsxs("div", {
                    className: "relative bg-gray-200 dark:bg-gray-800 rounded-2xl  hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700 lg:col-span-1", children: [t.jsxs("div", { className: "flex items-center justify-between mb-6", children: [t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Activity Calendar" }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("button", { className: "p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 dark:text-white", onClick: () => T(Y => new Date(Y.getFullYear(), Y.getMonth() - 1, 1)), "aria-label": "Previous month", children: t.jsx(RF, { className: "w-4 h-4" }) }), t.jsx("div", { className: "text-xs font-medium text-gray-700 dark:text-gray-200 ", children: Et(z) }), t.jsx("button", { className: "p-1.5 rounded hover:bg-gray-100 dark:hover:bg-gray-700 dark:text-white", onClick: () => T(Y => new Date(Y.getFullYear(), Y.getMonth() + 1, 1)), "aria-label": "Next month", children: t.jsx(MF, { className: "w-4 h-4" }) })] })] }), t.jsxs("div", {
                        className: "grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6", children: [t.jsxs("div", {
                            className: "lg:col-span-2 overflow-x-auto", children: [t.jsxs("div", { className: "grid grid-cols-7 text-[10px] sm:text-xs font-medium text-gray-500 dark:text-gray-300 mb-2", children: [t.jsx("div", { className: "text-center", children: "Mon" }), t.jsx("div", { className: "text-center", children: "Tue" }), t.jsx("div", { className: "text-center", children: "Wed" }), t.jsx("div", { className: "text-center", children: "Thu" }), t.jsx("div", { className: "text-center", children: "Fri" }), t.jsx("div", { className: "text-center", children: "Sat" }), t.jsx("div", { className: "text-center", children: "Sun" })] }), t.jsx("div", {
                                className: "grid grid-cols-7 gap-1.5 sm:gap-2", children: Bt(z).map((Y, je) => {
                                    if (!Y) return t.jsx("div", { className: "flex items-center justify-center h-10 sm:h-10 aspect-square rounded border border-dashed border-gray-300 dark:border-gray-700 bg-gray-200 dark:bg-gray-900/20" }, je); const Ne = $e(Y), fe = $e(new Date) === Ne, ke = $e(_) === Ne, Ee = U.filter(Ge => { if (!Ge.date) return !1; const qe = new Date(Ge.date); return $e(qe) === Ne }).length > 0; return t.jsxs("button", {
                                        onClick: () => H(Y), className: `flex items-center justify-center relative aspect-square h-10 w-10 sm:h-10 sm:w-10 rounded border p-0 overflow-hidden transition-colors
          ${ke ? "border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-sm" : Ee ? "border-green-400 bg-green-50 dark:bg-green-900/20" : "border-gray-300 dark:border-gray-700 bg-gray-200 dark:bg-gray-800"}`, children: [t.jsx("span", { className: `text-[10px] sm:text-xs leading-none ${fe ? "font-semibold text-blue-600 dark:text-blue-400" : Ee ? "font-semibold text-green-600 dark:text-green-400" : "text-gray-700 dark:text-gray-200"}`, children: Y.getDate() }), ke && t.jsx("span", { className: "absolute inset-x-1 bottom-1 h-1 rounded-full bg-blue-200 dark:bg-blue-500/50" }), Ee && !ke && t.jsx("span", { className: "absolute top-1 right-1 w-1.5 h-1.5 rounded-full bg-green-500" })]
                                    }, je)
                                })
                            })]
                        }), t.jsxs("div", { className: "flex flex-col gap-3", children: [t.jsx("div", { className: "text-xs font-semibold tracking-wide uppercase text-gray-500 dark:text-gray-400", children: $e(_) }), (() => { const Y = U.filter(je => { if (!je.date) return !1; const Ne = new Date(je.date); return $e(Ne) === $e(_) }); return Y.length > 0 ? t.jsxs("div", { className: "space-y-2", children: [t.jsxs("h4", { className: "text-sm font-medium text-gray-900 dark:text-white", children: ["Activities (", Y.length, ")"] }), t.jsx("div", { className: "space-y-2 max-h-32 overflow-y-auto", children: Y.map((je, Ne) => t.jsx("div", { className: "p-2 bg-gray-50 dark:bg-gray-700 rounded-lg", children: t.jsxs("div", { className: "flex items-start gap-2", children: [t.jsx("div", { className: `w-2 h-2 rounded-full mt-1.5 flex-shrink-0 ${je.type === "MEETING" ? "bg-blue-500" : "bg-green-500"}` }), t.jsxs("div", { className: "flex-1 min-w-0", children: [t.jsx("p", { className: "text-xs font-medium text-gray-900 dark:text-white truncate", children: je.title }), je.description && t.jsx("p", { className: "text-xs text-gray-600 dark:text-gray-300 truncate", children: je.description }), je.lead && t.jsxs("p", { className: "text-xs text-blue-600 dark:text-blue-400", children: ["Lead: ", je.lead.firstName, " ", je.lead.lastName] })] })] }) }, Ne)) })] }) : null })(), t.jsxs("button", { onClick: Ft, className: "w-full inline-flex items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 px-4 py-3 text-sm font-semibold text-white shadow hover:from-blue-500 hover:to-indigo-500 transition-all", children: [t.jsx(UF, { className: "w-4 h-4" }), "Plan tasks for this day"] }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Jump straight into Task Management with this date prefilled. Ideal for scheduling follow-ups, reminders, or any activity uncovered on the calendar." })] })]
                    })]
                }), Le && t.jsxs("div", { className: "lg:col-span-1 bg-gray-200 dark:bg-gray-800 rounded-2xl  hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700 mt-6 lg:mt-0", children: [t.jsx("div", { className: "flex justify-between items-center mb-6", children: t.jsxs("h3", { className: "text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(FF, { className: "text-yellow-500" }), "Performance"] }) }), t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "p-4 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/20 rounded-lg", children: [t.jsxs("div", { className: "flex items-center justify-between mb-2", children: [t.jsx("p", { className: "text-sm font-medium text-gray-700 dark:text-gray-300", children: "Win Rate" }), t.jsx(u9, { className: "text-blue-600 dark:text-blue-400" })] }), t.jsx("p", { className: "text-3xl font-bold text-blue-600 dark:text-blue-400", children: se ? "..." : `${V?.conversion.winRate || 0}%` }), t.jsx("p", { className: "text-xs text-gray-600 dark:text-gray-400 mt-1", children: "Deals won vs lost" })] }), t.jsxs("div", { className: "p-4 bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/20 rounded-lg", children: [t.jsxs("div", { className: "flex items-center justify-between mb-2", children: [t.jsx("p", { className: "text-sm font-medium text-gray-700 dark:text-gray-300", children: "Conversion Rate" }), t.jsx(by, { className: "text-green-600 dark:text-green-400" })] }), t.jsx("p", { className: "text-3xl font-bold text-green-600 dark:text-green-400", children: se ? "..." : `${V?.conversion.conversionRate || 0}%` }), t.jsx("p", { className: "text-xs text-gray-600 dark:text-gray-400 mt-1", children: se ? "" : `${V?.conversion.convertedLeads || 0} of ${V?.conversion.totalLeads || 0} leads` })] }), t.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [t.jsxs("div", { className: "p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg", children: [t.jsx("p", { className: "text-xs text-gray-600 dark:text-gray-400 mb-1", children: "Avg Sales Cycle" }), t.jsx("p", { className: "text-xl font-bold text-purple-600 dark:text-purple-400", children: se ? "..." : `${V?.conversion.avgSalesCycleDays || 0}d` })] }), t.jsxs("div", { className: "p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg", children: [t.jsx("p", { className: "text-xs text-gray-600 dark:text-gray-400 mb-1", children: "Avg Response" }), t.jsx("p", { className: "text-xl font-bold text-orange-600 dark:text-orange-400", children: se ? "..." : `${V?.conversion.avgResponseTimeHours || 0}h` })] })] })] })] }), Le && t.jsx("div", { className: "lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700 mt-6 lg:mt-0", children: ne ? t.jsx("div", { className: "flex items-center justify-center py-8 h-full", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500" }) }) : t.jsx(DP, { data: pe, title: "System Activity Trends (12 Months)", height: 350, dataKeys: [{ key: "activities", color: "#6366F1", name: "Activities" }] }) })]
            }), t.jsxs("div", { className: "grid grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8", children: [Ve && t.jsxs("div", { className: "bg-gray-200 dark:bg-gray-800 rounded-2xl hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700", children: [t.jsx("div", { className: "flex justify-between items-center mb-6", children: t.jsxs("h3", { className: "text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(nC, { className: "text-green-500" }), "Revenue Metrics"] }) }), t.jsx("div", { className: "grid grid-cols-2 md:grid-cols-3 gap-4", children: [{ label: "Total Revenue", value: V?.revenue.total || 0, bg: "bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20", color: "text-green-600 dark:text-green-400", icon: t.jsx(nC, { className: "w-5 h-5 text-green-600 dark:text-green-400" }), isCurrency: !0 }, { label: "Avg Deal Size", value: V?.revenue.avgDealSize || 0, bg: "bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20", color: "text-blue-600 dark:text-blue-400", icon: t.jsx(by, { className: "w-5 h-5 text-blue-600 dark:text-blue-400" }), isCurrency: !0 }, { label: "Won Deals", value: V?.revenue.wonDeals || 0, bg: "bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20", color: "text-purple-600 dark:text-purple-400", icon: t.jsx(aC, { className: "w-5 h-5 text-purple-600 dark:text-purple-400" }) }, { label: "Active Deals", value: V?.revenue.activeDeals || 0, bg: "bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20", color: "text-orange-600 dark:text-orange-400", icon: t.jsx(_F, { className: "w-5 h-5 text-orange-600 dark:text-orange-400" }) }, { label: "Lost Deals", value: V?.revenue.lostDeals || 0, bg: "bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20", color: "text-red-600 dark:text-red-400", icon: t.jsx(qF, { className: "w-5 h-5 text-red-600 dark:text-red-400" }) }].map((Y, je) => t.jsxs("div", { className: `p-4 rounded-lg ${Y.bg} flex flex-col`, children: [t.jsxs("div", { className: "flex items-center gap-2 mb-2", children: [Y.icon, t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: Y.label })] }), t.jsx("p", { className: `text-2xl font-bold ${Y.color}`, children: se ? "..." : Y.isCurrency ? new Intl.NumberFormat("en-US", { style: "currency", currency: V?.revenue?.currency?.code && ["USD", "EUR", "GBP", "INR", "JPY", "CAD", "AUD"].includes(V.revenue.currency.code) ? V.revenue.currency.code : "USD", maximumFractionDigits: 0 }).format(Y.value) : Y.value.toLocaleString() })] }, je)) })] }), et && t.jsxs("div", { className: "bg-gray-200 dark:bg-gray-800 rounded-2xl hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700", children: [t.jsx("div", { className: "flex justify-between items-center mb-6", children: t.jsxs("h3", { className: "text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(iC, { className: "text-blue-500" }), "Activity & Engagement"] }) }), t.jsx("div", { className: "grid grid-cols-2 md:grid-cols-3 gap-4", children: [{ label: "Total Calls", value: V?.activity.totalCalls || 0, bg: "bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20", color: "text-blue-600 dark:text-blue-400", icon: t.jsx(iC, { className: "w-5 h-5 text-blue-600 dark:text-blue-400" }) }, { label: "Total Tasks", value: V?.activity.totalTasks || 0, bg: "bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20", color: "text-purple-600 dark:text-purple-400", icon: t.jsx(sC, { className: "w-5 h-5 text-purple-600 dark:text-purple-400" }) }, { label: "Completed Tasks", value: V?.activity.completedTasks || 0, bg: "bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20", color: "text-green-600 dark:text-green-400", icon: t.jsx(aC, { className: "w-5 h-5 text-green-600 dark:text-green-400" }) }, { label: "Task Completion", value: V?.activity.taskCompletionRate || 0, bg: "bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20", color: "text-orange-600 dark:text-orange-400", icon: t.jsx(by, { className: "w-5 h-5 text-orange-600 dark:text-orange-400" }) }].map((Y, je) => t.jsxs("div", { className: `p-4 rounded-lg ${Y.bg} flex flex-col`, children: [t.jsxs("div", { className: "flex items-center gap-2 mb-2", children: [Y.icon, t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: Y.label })] }), t.jsx("p", { className: `text-2xl font-bold ${Y.color}`, children: se ? "..." : Y.label.includes("Rate") ? `${Y.value}%` : Y.value.toLocaleString() })] }, je)) })] })] }), t.jsxs("div", { className: "space-y-6 lg:space-y-8", children: [Ve && t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-2xl hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700", children: ne ? t.jsx("div", { className: "flex items-center justify-center py-8", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-green-500" }) }) : t.jsx(jie, { data: Z, title: "Revenue Trends (12 Months)", height: 350, dataKeys: [{ key: "revenue", color: "#10B981", name: "Revenue" }], valueFormatter: Y => new Intl.NumberFormat("en-US", { style: "currency", currency: V?.revenue?.currency?.code && ["USD", "EUR", "GBP", "INR", "JPY", "CAD", "AUD"].includes(V.revenue.currency.code) ? V.revenue.currency.code : "USD", maximumFractionDigits: 0 }).format(Y) }) }), Xe && t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-2xl hover:shadow-xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700", children: ne ? t.jsx("div", { className: "flex items-center justify-center py-8", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500" }) }) : t.jsx(DP, { data: te, title: "Lead Conversion Funnel", height: 350, dataKeys: [{ key: "value", color: "#F59E0B", name: "Count" }] }) }), Xe && t.jsx("div", { className: "bg-gradient-to-br from-white to-blue-50 dark:from-gray-800 dark:to-gray-900 rounded-2xl hover:shadow-2xl transition-all duration-300 p-6 sm:p-8 border border-gray-100 dark:border-gray-700", children: ne ? t.jsx("div", { className: "flex items-center justify-center py-8", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500" }) }) : t.jsx(Nie, { data: de, title: "Sales Pipeline Flow (6 Months)", height: 400, dataKeys: [{ key: "new", color: "#3B82F6", name: "New Leads" }, { key: "contacted", color: "#10B981", name: "Contacted" }, { key: "qualified", color: "#F59E0B", name: "Qualified" }, { key: "proposal", color: "#8B5CF6", name: "Proposal" }, { key: "negotiation", color: "#EC4899", name: "Negotiation" }, { key: "closed", color: "#14B8A6", name: "Closed Won" }], gradientId: "pipelineGradient", valueFormatter: Y => new Intl.NumberFormat("en-US", { style: "currency", currency: V?.revenue?.currency?.code && ["USD", "EUR", "GBP", "INR", "JPY", "CAD", "AUD"].includes(V.revenue.currency.code) ? V.revenue.currency.code : "USD", maximumFractionDigits: 0 }).format(Y) }) })] })]
        })]
    })
} const ng = ({ containerClassName: e = "space-y-6 p-6", showTitle: r = !0, titleWidthClassName: a = "w-1/4", blocks: s = 0, gridColsClassName: n = "grid-cols-1", blockHeightClassName: i = "h-24", blockClassName: o = "", ariaLabel: c = "Loading", sizeClassName: u = "h-12 w-12" }) => t.jsx("div", {
    className: e, "aria-busy": "true", "aria-label": c, role: "status", children: t.jsxs("div", {
        className: "animate-pulse", children: [r && t.jsx("div", { className: `h-8 ${a} mb-4 rounded bg-gray-300 dark:bg-gray-600` }), s > 0 ? t.jsx("div", { className: `grid ${n} gap-6`, children: Array.from({ length: s }).map((m, g) => t.jsx("div", { className: `rounded-xl bg-gray-300 dark:bg-gray-700 ${i} ${o}` }, g)) }) : t.jsxs("div", {
            className: "flex flex-col items-center justify-center py-10", children: [t.jsxs("div", {
                className: `relative ${u}`, children: [t.jsxs("svg", {
                    viewBox: "0 0 50 50", className: "absolute inset-0 animate-spin", "aria-hidden": "true", children: [t.jsx("circle", { cx: "25", cy: "25", r: "20", fill: "none", strokeWidth: "6", stroke: "#FFFFFF", className: "dark:opacity-10 opacity-60" }), t.jsx("path", {
                        d: `M25 5
                     a 20 20 0 0 1 0 40`, fill: "none", stroke: "#EF444E", strokeWidth: "6", strokeLinecap: "round"
                    }), t.jsx("path", {
                        d: `M25 45
                     a 20 20 0 0 1 0 -40`, fill: "none", stroke: "#2B2C2B", strokeWidth: "6", strokeLinecap: "round"
                    })]
                }), t.jsx("div", { className: "absolute inset-0 rounded-full blur-md opacity-20 bg-gradient-to-tr from-[#EF444E] to-[#2B2C2B]" })]
            }), t.jsx("p", { className: "mt-3 text-sm text-[#2B2C2B] dark:text-gray-300", children: "Loading..." })]
        })]
    })
}), Zl = ({ value: e, onChange: r, placeholder: a = "Search...", className: s = "" }) => { const n = h.useRef(null), i = o => { r(o.target.value) }; return t.jsxs("div", { className: `relative w-full ${s}`, children: [t.jsx(Xr, { className: "input-icon pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500" }), t.jsx("input", { ref: n, type: "text", placeholder: a, value: e, onChange: i, className: "w-full h-11 pl-11 pr-4 border border-gray-200 dark:border-gray-600 rounded-full focus:outline-none focus:ring-2 focus:ring-brand-blue focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-200", autoComplete: "off", spellCheck: "false", "aria-label": a, name: "search" })] }) }, Yr = ({ title: e = "No users found", description: r = "Try adjusting your filters or search terms. You can also clear all filters to see all users.", showClearButton: a = !1, onClear: s, icon: n, className: i = "", isError: o = !1 }) => t.jsxs("div", { className: `flex flex-col items-center ${i} h-full`, children: [n && t.jsx("div", { className: "mb-4", children: n }), t.jsx("h3", { className: `text-lg font-medium mb-2 ${o ? "text-red-600 dark:text-red-400" : "text-gray-900 dark:text-white"}`, children: e }), t.jsx("p", { className: `${o ? "text-red-600 dark:text-red-400" : "text-gray-500 dark:text-gray-400"} mb-4 text-center max-w-md`, children: r }), a && t.jsx("button", { onClick: s, className: "flex items-center px-4 py-2.5 bg-blue-700 text-white rounded-full hover:bg-blue-600 transition-colors", children: "Clear all filters" })] }), ra = ({ value: e, onChange: r, options: a, placeholder: s = "Select option", label: n, className: i = "" }) => t.jsxs("div", { className: `relative ${i}`, children: [n && t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: n }), t.jsxs("div", { className: "relative max-w-full", children: [t.jsx(Zc, { className: "pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500" }), t.jsxs("select", { value: typeof e == "boolean" ? e.toString() : e, onChange: o => { const c = o.target.value; r(c === "true" ? !0 : c === "false" ? !1 : c) }, style: { WebkitAppearance: "none", backgroundImage: "none", lineHeight: "44px", verticalAlign: "middle" }, className: "w-full max-w-full h-11 pl-11 pr-8 border border-gray-200 dark:border-gray-600 rounded-full focus:ring-2 focus:ring-brand-blue focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white appearance-none cursor-pointer transition-colors duration-200 text-center leading-[44px]", children: [t.jsx("option", { value: "", children: s }), a.map(o => t.jsx("option", { value: String(o.value), children: o.label }, String(o.value)))] }), t.jsx(_s, { className: "absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500 pointer-events-none" })] })] }), io = ({ currentPage: e, itemsPerPage: r, totalItems: a, onItemsPerPageChange: s, rightNode: n, columnConfig: i }) => { const [o, c] = h.useState(!1), u = a === 0 ? 0 : (e - 1) * r + 1, m = Math.min(e * r, a), g = f => { if (!i) return; const { visibleColumns: y, onChange: p, minVisible: b = 1 } = i; if (!y.includes(f)) { p([...y, f]); return } y.length <= b || p(y.filter(v => v !== f)) }; return t.jsxs("div", { className: "flex items-center justify-between bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 px-3 sm:px-4 py-2", children: [t.jsxs("div", { className: "flex items-center gap-3 text-sm", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Per Page" }), t.jsx("select", { value: String(r), onChange: f => s?.(Number(f.target.value)), className: "h-9 px-3 rounded-md border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white", children: [10, 20, 50, 100].map(f => t.jsx("option", { value: f, children: f }, f)) }), t.jsxs("span", { className: "text-gray-500 dark:text-gray-400", children: [u, " - ", m, " of ", a] })] }), t.jsxs("div", { className: "relative flex items-center gap-2", children: [n, i && t.jsxs("div", { className: "relative", children: [t.jsx("button", { type: "button", onClick: () => c(f => !f), className: "p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500", title: "Configure columns", children: t.jsx(Hi, { className: "w-4 h-4" }) }), o && t.jsxs("div", { className: "absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-lg z-20", children: [t.jsx("div", { className: "px-3 py-2 border-b border-gray-100 dark:border-gray-700 text-xs font-medium text-gray-500 dark:text-gray-400", children: "Columns" }), t.jsx("div", { className: "max-h-64 overflow-y-auto py-1", children: i.columns.map(f => { const y = i.visibleColumns.includes(f.id); return t.jsxs("label", { className: "flex items-center px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer gap-2", children: [t.jsx("input", { type: "checkbox", className: "rounded border-gray-300 text-[#ef444e] focus:ring-[#ef444e]", checked: y, onChange: () => g(f.id) }), t.jsx("span", { className: "truncate", children: f.label })] }, f.id) }) })] })] })] })] }) }, Sie = () => { const { hasPermission: e } = mr(), { refreshRolesCount: r } = Sn(), { t: a } = kn(), s = xt(), [n, i] = h.useState([]), [o, c] = h.useState(!0), [u, m] = h.useState(!1), [g, f] = h.useState(!1), [y, p] = h.useState(!1), [b, j] = h.useState(null), [v, S] = h.useState(!1), [k, E] = h.useState({}), [C, N] = h.useState(""), [A, D] = h.useState(!0), [I, $] = h.useState(null), [B, W] = h.useState("card"), [M, q] = h.useState(["name", "description", "status", "usersCount", "permissionsCount"]), { searchValue: V, debouncedSearchValue: X, setSearch: se } = ql("", 500); h.useEffect(() => { le() }, [X, C]), h.useEffect(() => { try { const te = localStorage.getItem("roles_visible_columns"); if (te) { const G = JSON.parse(te); Array.isArray(G) && G.every(de => typeof de == "string") && q(G) } } catch { } }, []), h.useEffect(() => { try { localStorage.setItem("roles_visible_columns", JSON.stringify(M)) } catch { } }, [M]); const le = async () => { try { g ? m(!0) : c(!0), $(null); const te = await Xa.getRoles({ search: X, status: C || void 0 }), G = te.data?.roles ?? te.roles ?? te; i(Array.isArray(G) ? G : []), D(!0), f(!0) } catch (te) { console.error("Error fetching roles:", te); const G = te?.response?.data?.message || "Failed to load roles"; if (R.error(G, { toastId: "roles_fetch_error" }), X) { D(!1), $("Backend search not available, using frontend filtering"); try { const de = await Xa.getRoles({ status: C || void 0 }), Te = de.data?.roles ?? de.roles ?? de; i(Array.isArray(Te) ? Te : []) } catch (de) { console.error("Fallback fetch also failed:", de), $(G) } } else $(G) } finally { g ? m(!1) : c(!1) } }, ee = te => { se(te) }, L = !!X, z = !!C, T = L && z ? "No roles match your search and filters. Try adjusting your filters or search terms. You can also clear all filters to see all roles." : L ? "No roles found for your search. Try adjusting your search terms. You can also clear all filters to see all roles." : z ? "No roles found for the selected filters. Try adjusting your filters or clear all filters to see all roles." : "No roles found.", _ = () => { N(""), se("") }, H = te => M.includes(te), U = async () => { if (b) try { S(!0), await Xa.deleteRole(b.id), await r(), p(!1), j(null), le(), R.success("Role deleted successfully!") } catch (te) { console.error("Error deleting role:", te); const G = te.response?.data?.message || "An error occurred while deleting the role"; R.error(G) } finally { S(!1) } }, K = te => { j(te), p(!0) }; let Z = A ? n : n.filter(te => te.name.toLowerCase().includes(X.toLowerCase()) || te.description && te.description.toLowerCase().includes(X.toLowerCase())); C === "active" ? Z = Z.filter(te => te.isActive) : C === "inactive" && (Z = Z.filter(te => !te.isActive)); const J = te => { E(G => ({ ...G, [te]: !G[te] })) }; return t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "flex flex-col lg:flex-row lg:items-end gap-4", children: [t.jsxs("div", { className: "flex flex-col sm:flex-row gap-4 flex-1", children: [t.jsxs("div", { className: "w-full sm:w-48", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: t.jsx("div", { className: "flex items-center gap-2", children: a("common.search") }) }), t.jsx(Zl, { value: V, onChange: ee, placeholder: a("roles.searchRoles") })] }), t.jsx("div", { className: "w-full sm:w-48", children: t.jsx(ra, { label: a("common.status"), value: C, onChange: te => N(te || ""), options: [{ value: "", label: "All Statuses" }, { value: "active", label: "Active" }, { value: "inactive", label: "Inactive" }] }) })] }), e("role.create") && t.jsxs("button", { onClick: () => s("/roles/new"), className: "w-full sm:w-auto flex items-center justify-center px-4 py-3 bg-[#ef444e] text-white rounded-full hover:bg-[#f26971] transition-colors text-sm font-semibold", children: [t.jsx($t, { className: "h-4 w-4 mr-2" }), a("Add Role")] })] }), t.jsxs("div", { className: "hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto", children: [t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${B === "list" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => W("list"), title: "List view", children: t.jsx(fi, { className: "w-4 h-4" }) }), t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${B === "card" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => W("card"), title: "Card view", children: t.jsx(hi, { className: "w-4 h-4" }) })] })] }), B === "card" ? t.jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: o || u ? t.jsx("div", { className: "col-span-full", children: t.jsx(ng, { containerClassName: "p-0", showTitle: !1, blocks: 6, gridColsClassName: "grid-cols-1 md:grid-cols-2 lg:grid-cols-3", blockHeightClassName: "h-64", ariaLabel: "Loading roles" }) }) : Z.length === 0 ? t.jsx("div", { className: "col-span-full text-center py-20", children: t.jsx(Yr, { title: I ? "Network or server error" : "No roles found", description: I || T, icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), showClearButton: !I && (L || z), onClear: I ? void 0 : _, isError: !!I }) }) : Z.map(te => t.jsxs("div", { className: `bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 hover:shadow transition-all duration-300 hover:shadow-md overflow-hidden ${te.isActive ? "" : "opacity-75"}`, children: [t.jsxs("div", { className: "p-4 border-b border-gray-200 dark:border-gray-700", children: [t.jsxs("div", { className: "flex items-center justify-between mb-3", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-br from-purple-500 to-purple-900 rounded-lg shadow-2xl", children: t.jsx(Xs, { className: "h-5 w-5 text-white" }) }), t.jsxs("div", { children: [t.jsx("h3", { className: "text-sm font-bold text-gray-900 dark:text-white", children: te.name }), t.jsx("p", { className: "text-xs text-purple-800 dark:text-purple-400", children: te.name === "Admin" ? "All permissions" : `${te.permissionsCount ?? te.permissions.length} permissions` })] })] }), t.jsxs("div", { className: "flex items-center gap-2 ", children: [e("role.update") && t.jsx("button", { onClick: () => s(`/roles/${te.id}/edit`, { state: { role: te } }), className: "p-2 text-gray-400 dark:text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors", children: t.jsx(Jt, { className: "h-4 w-4" }) }), e("role.delete") && t.jsx("button", { onClick: () => K(te), className: "p-2 text-gray-400 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors", children: t.jsx(yt, { className: "h-4 w-4" }) })] })] }), te.description && t.jsx("p", { className: "text-xs text-gray-600 dark:text-gray-400 leading-relaxed", children: te.description })] }), t.jsxs("div", { className: "", children: [t.jsxs("div", { className: "space-y-1 p-4", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("span", { className: "text-xs font-medium text-gray-700 dark:text-gray-300", children: "Status" }), t.jsxs("span", { className: `inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${te.isActive ? "bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400" : "bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400"}`, children: [t.jsx(ut, { className: `h-3 w-3 mr-1 ${te.isActive ? "" : "opacity-50"}` }), te.isActive ? "Active" : "Inactive"] })] }), t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("span", { className: "text-xs font-medium text-gray-700 dark:text-gray-300", children: "Users" }), t.jsxs("div", { className: "flex items-center text-xs text-gray-600 dark:text-gray-400", children: [t.jsx($s, { className: "h-3 w-3 mr-2" }), te.usersCount ?? te.users?.length ?? 0] })] }), t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("span", { className: "text-xs font-medium text-gray-700 dark:text-gray-300", children: "Permissions" }), t.jsxs("div", { className: "flex items-center text-xs text-gray-600 dark:text-gray-400", children: [t.jsx(Y9, { className: "h-3 w-3 mr-2" }), te.name === "Admin" ? "All" : te.permissionsCount ?? te.permissions.length] })] })] }), t.jsx("div", { className: "p-4  border-t border-gray-200 dark:border-gray-700", children: t.jsx("div", { className: "flex flex-wrap gap-2", children: (() => { const G = {}; (te.permissions || []).forEach(ne => { const De = ne.module || "General"; G[De] || (G[De] = []), G[De].push(ne.name) }); const de = Object.keys(G), Te = !!k[te.id], pe = Te ? de : de.slice(0, 3), He = de.length - (Te ? 3 : pe.length); return t.jsxs(t.Fragment, { children: [pe.map(ne => t.jsxs("div", { className: "flex items-center flex-wrap gap-1", children: [t.jsx("span", { className: "inline-flex items-center px-2 py-1 rounded-full text-xs  bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200", children: ne }), G[ne].map((De, $e) => t.jsx("span", { className: "inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400", children: De }, `${ne}-${$e}`))] }, ne)), (de.length > 3 || Te) && t.jsx("button", { onClick: () => J(te.id), className: "inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors cursor-pointer", children: Te ? "Show less" : `+${He} more` })] }) })() }) })] })] }, te.id)) }) : t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 overflow-hidden", children: t.jsxs("div", { className: "p-6", children: [t.jsx("div", { className: "mb-4", children: t.jsx(io, { currentPage: 1, itemsPerPage: Z.length, totalItems: Z.length, onItemsPerPageChange: () => { }, columnConfig: { columns: [{ id: "name", label: "Name" }, { id: "description", label: "Description" }, { id: "status", label: "Status" }, { id: "usersCount", label: "Users" }, { id: "permissionsCount", label: "Permissions" }], visibleColumns: M, onChange: q, minVisible: 1 } }) }), t.jsx("div", { className: "overflow-hidden relative", children: t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-gray-900", children: t.jsxs("tr", { children: [t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${H("name") ? "" : "hidden"}`, children: "Name" }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${H("description") ? "" : "hidden"}`, children: "Description" }), t.jsx("th", { className: `px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${H("status") ? "" : "hidden"}`, children: "Status" }), t.jsx("th", { className: `px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${H("usersCount") ? "" : "hidden"}`, children: "Users" }), t.jsx("th", { className: `px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${H("permissionsCount") ? "" : "hidden"}`, children: "Permissions" }), t.jsx("th", { className: "px-6 py-3 text-end text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Actions" })] }) }), o || u ? t.jsx("tbody", { children: t.jsx("tr", { children: t.jsx("td", { colSpan: M.length + 1, className: "px-6 py-12 text-center", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto" }) }) }) }) : t.jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: Z.length === 0 ? t.jsx("tr", { children: t.jsx("td", { colSpan: M.length + 1, className: "px-6 py-12 text-center", children: t.jsx(Yr, { title: I ? "Network or server error" : "No roles found", description: I || T, icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), showClearButton: !I && (L || z), onClear: I ? void 0 : _, isError: !!I }) }) }) : Z.map(te => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${H("name") ? "" : "hidden"}`, children: t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-br from-purple-500 to-purple-900 rounded-lg shadow-2xl", children: t.jsx(Xs, { className: "h-4 w-4 text-white" }) }), t.jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: te.name })] }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${H("description") ? "" : "hidden"}`, children: t.jsx("div", { className: "text-sm text-gray-500 dark:text-gray-400 max-w-xs truncate", children: te.description || "-" }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap text-center ${H("status") ? "" : "hidden"}`, children: t.jsxs("span", { className: `inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${te.isActive ? "bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400" : "bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400"}`, children: [t.jsx(ut, { className: `h-3 w-3 mr-1 ${te.isActive ? "" : "opacity-50"}` }), te.isActive ? "Active" : "Inactive"] }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500 dark:text-gray-400 ${H("usersCount") ? "" : "hidden"}`, children: te.usersCount ?? te.users?.length ?? 0 }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500 dark:text-gray-400 ${H("permissionsCount") ? "" : "hidden"}`, children: te.name === "Admin" ? "All" : te.permissionsCount ?? te.permissions.length }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-end text-sm font-medium", children: t.jsxs("div", { className: "flex items-center justify-end gap-2", children: [e("role.update") && t.jsx("button", { onClick: () => s(`/roles/${te.id}/edit`, { state: { role: te } }), className: "text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors", title: "Edit Role", children: t.jsx(Jt, { className: "h-4 w-4" }) }), e("role.delete") && t.jsx("button", { onClick: () => K(te), className: "text-red-600 hover:text-red-900 p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors", title: "Delete Role", children: t.jsx(yt, { className: "h-4 w-4" }) })] }) })] }, te.id)) })] }) }) })] }) }), t.jsx(Cm, { open: y, title: "Delete Role", description: t.jsxs("div", { className: "space-y-3", children: [t.jsxs("div", { className: "flex items-center mb-4", children: [t.jsx("div", { className: "p-3 bg-red-100 dark:bg-red-900/30 rounded-full mr-4", children: t.jsx(yt, { className: "h-6 w-6 text-red-600 dark:text-red-400" }) }), t.jsxs("div", { children: [t.jsx("h4", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Are you sure?" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "This action cannot be undone." })] })] }), t.jsxs("p", { className: "text-sm text-gray-700 dark:text-gray-300", children: ["You are about to delete the role", " ", t.jsxs("strong", { children: ['"', b?.name, '"'] }), ". This will permanently remove the role and all its associated permissions."] })] }), confirmText: "Delete Role", cancelText: "Cancel", loading: v, onConfirm: U, onClose: () => { v || p(!1) } })] }) }, Cie = () => { const e = xt(), { companySettings: r, isLoading: a } = Br(), [s, n] = h.useState(null), i = [{ id: "user-management", name: "User Management", description: "Manage users, roles, and permissions for your CRM system", icon: t.jsx($s, { className: "w-6 h-6" }), color: "bg-emerald-500", items: [{ name: "Users", description: "Create, edit, and manage user accounts", path: "/users" }, { name: "Roles & Permissions", description: "Define roles and assign permissions", path: "/roles" }, { name: "Teams", description: "Manage teams and reporting structures", path: "/business-settings/teams" }] }, { id: Pi.CATEGORIES.COMPANY, name: "Company Information", description: "Basic company details, logo, and contact information", icon: t.jsx(Il, { className: "w-6 h-6" }), color: "bg-blue-500", items: [{ name: "Company Profile", description: "Name, address, logo, GST details", path: "/business-settings/company" }] }, { id: Pi.CATEGORIES.CURRENCY_TAX, name: "Currency & Tax", description: "Currency settings, tax rates, and financial configuration", icon: t.jsx(xn, { className: "w-6 h-6" }), color: "bg-green-500", items: [{ name: "Currency Settings", description: "Primary currency, exchange rates", path: "/business-settings/currency" }] }, { id: Pi.CATEGORIES.LEAD_SOURCES, name: "Lead Sources", description: "Configurable dropdown options for lead sources", icon: t.jsx($s, { className: "w-6 h-6" }), color: "bg-purple-500", items: [{ name: "Lead Sources", description: "Manage lead source options", path: "/business-settings/lead-sources" }, { name: "Lead Form Fields", description: "Configure lead form fields - add, hide, show, make required", path: "/business-settings/lead-fields" }] }, { id: "tags", name: "Tags", description: "Manage tags for organizing leads and deals", icon: t.jsx(qo, { className: "w-6 h-6" }), color: "bg-blue-500", items: [{ name: "Tags Management", description: "Create and manage tags", path: "/business-settings/tags" }] }, { id: "product-config", name: "Product Configuration", description: "Configure product categories and measurement units", icon: t.jsx(Qa, { className: "w-6 h-6" }), color: "bg-green-500", items: [{ name: "Product Categories", description: "Create and manage product categories", path: "/business-settings/product-categories" }, { name: "Unit Types", description: "Manage measurement units for products", path: "/business-settings/unit-types" }] }, { id: "industries", name: "Industries", description: "Manage industry options for leads and companies", icon: t.jsx(Il, { className: "w-6 h-6" }), color: "bg-green-500", items: [{ name: "Industries Management", description: "Create and manage industries", path: "/business-settings/industries" }] }, { id: Pi.CATEGORIES.LEAD_STATUSES, name: "Deal Status", description: "Customizable  deal statuses", icon: t.jsx(mD, { className: "w-6 h-6" }), color: "bg-orange-500", items: [{ name: "Deal Status Management", description: "Configure dynamic  deal statuses", path: "/business-settings/lead-statuses" }] }, { id: Pi.CATEGORIES.TEMPLATES, name: "Document Templates", description: "Quotation, invoice, and email templates", icon: t.jsx(Mt, { className: "w-6 h-6" }), color: "bg-red-500", items: [{ name: "Invoice Templates", description: "Invoice formats and layouts", path: "/business-settings/invoice-templates" }, { name: "Document Numbering", description: "Configure prefixes, suffixes, and numbering formats", path: "/business-settings/numbering" }, { name: "Terms & Conditions", description: "Legal terms and conditions templates", path: "/business-settings/terms-and-conditions" }] }, { id: Pi.CATEGORIES.NOTIFICATIONS, name: "Notification Settings", description: "Email, SMS, and notification preferences", icon: t.jsx(Bl, { className: "w-6 h-6" }), color: "bg-yellow-500", items: [{ name: "Channel Settings", description: "Email, SMS, WhatsApp preferences", path: "/business-settings/notifications" }] }, { id: Pi.CATEGORIES.INTEGRATIONS, name: "API & Integrations", description: "WhatsApp, SMS, email gateway, and third-party integrations", icon: t.jsx(Sb, { className: "w-6 h-6" }), color: "bg-teal-500", items: [{ name: "Communication Settings", description: "Templates", path: "/business-settings/communication" }, { name: "Lead Integrations", description: "Meta Ads, IndiaMart, TradeIndia integrations", path: "/business-settings/integrations/leads" }, { name: "Communication APIs", description: "WhatsApp, SMS, Email gateways", path: "/business-settings/integrations/communication" }] }]; return a ? t.jsx(Cn, { message: "Loading business settings..." }) : t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl", children: t.jsx(Hi, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Business Settings" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Configure your CRM system and business processes" })] })] }), r && t.jsx(Ae, { variant: "GRADIENT", className: "border-l-4 border-l-blue-500", children: t.jsx(st, { className: "p-4", children: t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx("div", { className: "w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center", children: t.jsx(Il, { className: "w-6 h-6 text-blue-600 dark:text-blue-400" }) }), t.jsxs("div", { className: "flex-1", children: [t.jsx("h3", { className: "font-semibold text-gray-900 dark:text-white", children: r.name }), t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: [r.email, "  ", r.timezone] })] }), t.jsxs("div", { className: "text-right", children: [t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "GST Number" }), t.jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: r.gstNumber || "Not configured" })] })] }) }) })] }), t.jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6", children: i.map(o => t.jsxs(Ae, { variant: "ELEVATED", className: "group hover:shadow-xl transition-all duration-300 cursor-pointer", onClick: () => n(o.id === s ? null : o.id), children: [t.jsx(Pt, { className: "pb-3", children: t.jsxs("div", { className: "flex items-start gap-4", children: [t.jsx("div", { className: `p-3 ${o.color} rounded-xl text-white group-hover:scale-110 transition-transform duration-300`, children: o.icon }), t.jsxs("div", { className: "flex-1", children: [t.jsx("h3", { className: "font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors", children: o.name }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mt-1", children: o.description })] }), t.jsx(Xc, { className: `w-5 h-5 text-gray-400 transition-transform duration-300 ${s === o.id ? "rotate-90" : "group-hover:translate-x-1"}` })] }) }), s === o.id && t.jsx(st, { className: "pt-0", children: t.jsx("div", { className: "space-y-2 border-t border-gray-200 dark:border-gray-700 pt-4", children: o.items.map((c, u) => t.jsxs("div", { className: "flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer group/item", onClick: m => { m.stopPropagation(), e(c.path) }, children: [t.jsxs("div", { children: [t.jsx("p", { className: "font-medium text-sm text-gray-900 dark:text-white group-hover/item:text-blue-600 dark:group-hover/item:text-blue-400", children: c.name }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: c.description })] }), t.jsx(Xc, { className: "w-4 h-4 text-gray-400 group-hover/item:text-blue-500 group-hover/item:translate-x-1 transition-all" })] }, u)) }) })] }, o.id)) })] }) }, Ru = { getAll: async () => (await ie.get("/teams")).data, getById: async e => (await ie.get(`/teams/${e}`)).data, create: async e => (await ie.post("/teams", e)).data, update: async (e, r) => (await ie.patch(`/teams/${e}`, r)).data, delete: async e => (await ie.delete(`/teams/${e}`)).data }, Eie = () => { const [e, r] = h.useState(!0), [a, s] = h.useState([]), [n, i] = h.useState([]), [o, c] = h.useState(!1), [u, m] = h.useState(null), [g, f] = h.useState(null), [y, p] = h.useState(""), [b, j] = h.useState({ name: "", description: "", managerId: "", memberIds: [] }); h.useEffect(() => { v() }, []); const v = async () => { try { const [D, I] = await Promise.all([Ru.getAll(), ur.getUsers()]); s(D); const $ = I.data?.users || (Array.isArray(I.data) ? I.data : []) || []; i($) } catch (D) { console.error("Error fetching data:", D), R.error("Failed to load teams") } finally { r(!1) } }, S = D => { D ? (m(D), j({ name: D.name, description: D.description || "", managerId: D.managerId?.toString() || "", memberIds: D.members?.map(I => I.id.toString()).filter(I => I !== D.managerId?.toString()) || [] })) : (m(null), j({ name: "", description: "", managerId: "", memberIds: [] })), c(!0) }, k = () => { c(!1), m(null) }, E = async D => { D.preventDefault(); try { const I = { name: b.name, description: b.description, managerId: b.managerId ? parseInt(b.managerId) : void 0, memberIds: b.memberIds.map($ => parseInt($)) }; u ? (await Ru.update(u.id, I), R.success("Team updated successfully")) : (await Ru.create(I), R.success("Team created successfully")), k(), v() } catch (I) { console.error("Error saving team:", I), R.error("Failed to save team") } }, C = async D => { if (window.confirm("Are you sure you want to delete this team? Members will be unassigned.")) try { await Ru.delete(D), R.success("Team deleted successfully"), v() } catch (I) { console.error("Error deleting team:", I), R.error("Failed to delete team") } }, N = D => { j(I => { const $ = I.memberIds; return $.includes(D) ? { ...I, memberIds: $.filter(B => B !== D) } : { ...I, memberIds: [...$, D] } }) }, A = a.filter(D => D.name.toLowerCase().includes(y.toLowerCase())); return e ? t.jsx(Cn, {}) : t.jsxs("div", { className: "space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8", children: [t.jsxs("div", { className: "flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4", children: [t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Teams" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400 mt-1", children: "Manage teams, managers, and members" })] }), t.jsx(ue, { variant: "PRIMARY", onClick: () => S(), icon: t.jsx($t, { size: 18 }), children: "Create Team" })] }), t.jsxs(Ae, { children: [t.jsx("div", { className: "p-4 border-b border-gray-200 dark:border-gray-700", children: t.jsxs("div", { className: "relative max-w-sm", children: [t.jsx(Xr, { className: "absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400" }), t.jsx("input", { type: "text", placeholder: "Search teams...", value: y, onChange: D => p(D.target.value), className: "pl-9 pr-4 py-2 w-full text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500" })] }) }), t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "w-full text-sm text-left", children: [t.jsx("thead", { className: "text-xs text-gray-700 dark:text-gray-300 uppercase bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-6 py-4 font-medium", children: "Team Name" }), t.jsx("th", { className: "px-6 py-4 font-medium", children: "Manager" }), t.jsx("th", { className: "px-6 py-4 font-medium", children: "Members" }), t.jsx("th", { className: "px-6 py-4 font-medium", children: "Created At" }), t.jsx("th", { className: "px-6 py-4 font-medium text-right", children: "Actions" })] }) }), t.jsx("tbody", { className: "divide-y divide-gray-200 dark:divide-gray-700", children: A.length > 0 ? A.map(D => t.jsxs("tr", { className: "bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors", children: [t.jsx("td", { className: "px-6 py-4 font-medium text-gray-900 dark:text-white", children: D.name }), t.jsx("td", { className: "px-6 py-4 text-gray-600 dark:text-gray-400", children: D.manager ? `${D.manager.firstName} ${D.manager.lastName}` : "-" }), t.jsxs("td", { className: "px-6 py-4 text-gray-600 dark:text-gray-400", children: [D._count?.members || 0, " Members"] }), t.jsx("td", { className: "px-6 py-4 text-gray-600 dark:text-gray-400", children: new Date(D.createdAt).toLocaleDateString() }), t.jsxs("td", { className: "px-6 py-4 text-right space-x-2", children: [t.jsx("button", { onClick: () => f(D), className: "text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300 transition-colors", title: "View Details", children: t.jsx(Ht, { size: 18 }) }), t.jsx("button", { onClick: () => S(D), className: "text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors", children: t.jsx(uD, { size: 18 }) }), t.jsx("button", { onClick: () => C(D.id), className: "text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors", children: t.jsx(yt, { size: 18 }) })] })] }, D.id)) : t.jsx("tr", { children: t.jsx("td", { colSpan: 5, className: "px-6 py-8 text-center text-gray-500 dark:text-gray-400", children: "No teams found" }) }) })] }) })] }), o && t.jsx("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-lg overflow-hidden", children: [t.jsxs("div", { className: "flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700", children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: u ? "Edit Team" : "Create Team" }), t.jsx("button", { onClick: k, className: "text-gray-400 hover:text-gray-500 dark:hover:text-gray-300", children: "" })] }), t.jsxs("form", { onSubmit: E, className: "p-4 space-y-4 max-h-[80vh] overflow-y-auto", children: [t.jsxs("div", { children: [t.jsxs("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: ["Team Name ", t.jsx("span", { className: "text-red-500", children: "*" })] }), t.jsx("input", { type: "text", required: !0, value: b.name, onChange: D => j({ ...b, name: D.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Description" }), t.jsx("textarea", { value: b.description, onChange: D => j({ ...b, description: D.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500", rows: 2 })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Team Lead (Manager)" }), t.jsxs("select", { value: b.managerId, onChange: D => { const I = D.target.value; j($ => ({ ...$, managerId: I, memberIds: $.memberIds.filter(B => B !== I) })) }, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500", children: [t.jsx("option", { value: "", children: "Select Manager" }), n.map(D => t.jsxs("option", { value: D.id, children: [D.firstName, " ", D.lastName] }, D.id))] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Team Members" }), t.jsx("div", { className: "border border-gray-300 dark:border-gray-600 rounded-lg max-h-48 overflow-y-auto divide-y divide-gray-200 dark:divide-gray-700", children: n.filter(D => (!D.teamId || u && D.teamId === u.id) && D.id.toString() !== b.managerId).map(D => t.jsxs("div", { className: "flex items-center p-2 hover:bg-gray-50 dark:hover:bg-gray-700 gap-3", children: [t.jsx("input", { type: "checkbox", checked: b.memberIds.includes(D.id.toString()), onChange: () => N(D.id.toString()), className: "w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" }), t.jsxs("span", { className: "text-sm text-gray-700 dark:text-gray-300", children: [D.firstName, " ", D.lastName, " (", D.email, ")", D.team && t.jsxs("span", { className: "text-xs text-gray-400 ml-1", children: ["(", D.team.name, ")"] })] })] }, D.id)) }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Select users to add to this team." })] }), t.jsxs("div", { className: "flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700", children: [t.jsx(ue, { variant: "SECONDARY", onClick: k, type: "button", children: "Cancel" }), t.jsx(ue, { variant: "PRIMARY", type: "submit", children: u ? "Update Team" : "Create Team" })] })] })] }) }), g && t.jsx("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-lg overflow-hidden", children: [t.jsxs("div", { className: "flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700", children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Team Details" }), t.jsx("button", { onClick: () => f(null), className: "text-gray-400 hover:text-gray-500 dark:hover:text-gray-300", children: "" })] }), t.jsxs("div", { className: "p-6 space-y-6", children: [t.jsxs("div", { children: [t.jsx("h3", { className: "text-sm font-medium text-gray-500 dark:text-gray-400", children: "Team Name" }), t.jsx("p", { className: "text-lg font-medium text-gray-900 dark:text-white mt-1", children: g.name })] }), g.description && t.jsxs("div", { children: [t.jsx("h3", { className: "text-sm font-medium text-gray-500 dark:text-gray-400", children: "Description" }), t.jsx("p", { className: "text-base text-gray-700 dark:text-gray-300 mt-1", children: g.description })] }), t.jsxs("div", { children: [t.jsx("h3", { className: "text-sm font-medium text-gray-500 dark:text-gray-400", children: "Team Manager" }), t.jsxs("div", { className: "flex items-center mt-2 p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-100 dark:border-blue-800", children: [t.jsx("div", { className: "w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-800 flex items-center justify-center text-blue-600 dark:text-blue-300 font-bold mr-3", children: g.manager?.firstName?.[0] || "M" }), t.jsxs("div", { children: [t.jsxs("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: [g.manager?.firstName, " ", g.manager?.lastName] }), t.jsx("p", { className: "text-xs text-blue-600 dark:text-blue-400", children: "Team Lead" })] })] })] }), t.jsxs("div", { children: [t.jsxs("h3", { className: "text-sm font-medium text-gray-500 dark:text-gray-400 mb-2", children: ["Team Members (", g.members?.length || 0, ")"] }), t.jsx("div", { className: "border border-gray-200 dark:border-gray-700 rounded-lg divide-y divide-gray-200 dark:divide-gray-700 max-h-60 overflow-y-auto", children: g.members && g.members.length > 0 ? g.members.map(D => t.jsxs("div", { className: "p-3 flex items-center hover:bg-gray-50 dark:hover:bg-gray-700/50", children: [t.jsxs("div", { className: "w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-400 font-medium text-xs mr-3", children: [D.firstName[0], D.lastName[0]] }), t.jsxs("p", { className: "text-sm text-gray-700 dark:text-gray-300", children: [D.firstName, " ", D.lastName] })] }, D.id)) : t.jsx("p", { className: "p-4 text-sm text-gray-500 dark:text-gray-400 text-center", children: "No members assigned to this team." }) })] })] }), t.jsx("div", { className: "p-4 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-700 flex justify-end", children: t.jsx(ue, { variant: "SECONDARY", onClick: () => f(null), children: "Close" }) })] }) })] }) }, Aie = () => { const e = xt(), { companySettings: r, updateCompanySettings: a, isLoading: s } = Br(), [n, i] = h.useState({ name: "", email: "", phone: "", address: "", website: "", gstNumber: "", panNumber: "", cinNumber: "", timezone: "Asia/Kolkata", fiscalYearStart: "04-01", industry: "", employeeCount: "", description: "" }), [o, c] = h.useState(!1), [u, m] = h.useState(null); h.useEffect(() => { r && (i(r), r.logo && m(r.logo)) }, [r]); const g = (v, S) => { i(k => ({ ...k, [v]: S })) }, f = v => { const S = v.target.files?.[0]; if (S) { if (S.size > 5 * 1024 * 1024) { R.error("Logo file size must be less than 5MB"); return } const k = new FileReader; k.onload = E => { const C = E.target?.result; m(C), i(N => ({ ...N, logo: C })) }, k.readAsDataURL(S) } }, y = async v => { v.preventDefault(), c(!0); try { await a(n), R.success("Company settings updated successfully") } catch (S) { console.error("Failed to update company settings:", S), R.error("Failed to update company settings") } finally { c(!1) } }; if (s) return t.jsx(Cn, { message: "Loading company settings..." }); const p = ["Asia/Kolkata", "America/New_York", "Europe/London", "Asia/Tokyo", "Australia/Sydney", "America/Los_Angeles", "Europe/Paris", "Asia/Singapore"], b = ["Technology", "Healthcare", "Finance", "Education", "Manufacturing", "Retail", "Real Estate", "Consulting", "Marketing", "Other"], j = ["1-10", "11-50", "51-200", "201-500", "501-1000", "1000+"]; return t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "sm", onClick: () => e("/business-settings"), className: "p-2", children: t.jsx(pr, { className: "w-4 h-4" }) }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl", children: t.jsx(Il, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Company Settings" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Manage your company information and basic details" })] })] })] }), t.jsxs("form", { onSubmit: y, className: "space-y-6", children: [t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsxs("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(Il, { className: "w-5 h-5" }), "Basic Information"] }) }), t.jsx(st, { className: "space-y-4", children: t.jsxs("div", { className: "flex items-start gap-6", children: [t.jsxs("div", { className: "flex-shrink-0", children: [t.jsx("div", { className: "w-24 h-24 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg flex items-center justify-center overflow-hidden", children: u ? t.jsx("img", { src: u, alt: "Company Logo", className: "w-full h-full object-cover" }) : t.jsxs("div", { className: "text-center", children: [t.jsx(Ui, { className: "w-8 h-8 text-gray-400 mx-auto mb-1" }), t.jsx("p", { className: "text-xs text-gray-500", children: "Logo" })] }) }), t.jsx("input", { type: "file", id: "logo-upload", accept: "image/*", onChange: f, className: "hidden" }), t.jsx(ue, { type: "button", variant: "OUTLINE", size: "sm", onClick: () => document.getElementById("logo-upload")?.click(), className: "mt-2 w-full text-xs", children: "Upload Logo" })] }), t.jsxs("div", { className: "flex-1 grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Company Name *" }), t.jsx("input", { type: "text", value: n.name || "", onChange: v => g("name", v.target.value), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", required: !0 })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Industry" }), t.jsxs("select", { value: n.industry || "", onChange: v => g("industry", v.target.value), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", children: [t.jsx("option", { value: "", children: "Select Industry" }), b.map(v => t.jsx("option", { value: v, children: v }, v))] })] })] })] }) })] }), t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsxs("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(ir, { className: "w-5 h-5" }), "Contact Information"] }) }), t.jsxs(st, { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsxs("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center gap-1", children: [t.jsx(ir, { className: "w-4 h-4" }), "Email Address *"] }), t.jsx("input", { type: "email", value: n.email || "", onChange: v => g("email", v.target.value), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", required: !0 })] }), t.jsxs("div", { children: [t.jsxs("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center gap-1", children: [t.jsx(ma, { className: "w-4 h-4" }), "Phone Number"] }), t.jsx("input", { type: "tel", value: n.phone || "", onChange: v => g("phone", v.target.value), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white" })] }), t.jsxs("div", { className: "md:col-span-2", children: [t.jsxs("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center gap-1", children: [t.jsx($o, { className: "w-4 h-4" }), "Address"] }), t.jsx("textarea", { value: n.address || "", onChange: v => g("address", v.target.value), rows: 3, className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white" })] }), t.jsxs("div", { children: [t.jsxs("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center gap-1", children: [t.jsx(bf, { className: "w-4 h-4" }), "Website"] }), t.jsx("input", { type: "url", value: n.website || "", onChange: v => g("website", v.target.value), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "https://example.com" })] }), t.jsxs("div", { children: [t.jsxs("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center gap-1", children: [t.jsx($s, { className: "w-4 h-4" }), "Employee Count"] }), t.jsxs("select", { value: n.employeeCount || "", onChange: v => g("employeeCount", v.target.value), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", children: [t.jsx("option", { value: "", children: "Select Range" }), j.map(v => t.jsx("option", { value: v, children: v }, v))] })] })] })] }), t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Business Details" }) }), t.jsxs(st, { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "GST Number" }), t.jsx("input", { type: "text", value: n.gstNumber || "", onChange: v => g("gstNumber", v.target.value), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "22AAAAA0000A1Z5" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "PAN Number" }), t.jsx("input", { type: "text", value: n.panNumber || "", onChange: v => g("panNumber", v.target.value), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "AAAAA0000A" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "CIN Number" }), t.jsx("input", { type: "text", value: n.cinNumber || "", onChange: v => g("cinNumber", v.target.value), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "U12345AB1234PTC123456" })] }), t.jsxs("div", { children: [t.jsxs("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center gap-1", children: [t.jsx(Zt, { className: "w-4 h-4" }), "Fiscal Year Start"] }), t.jsx("input", { type: "text", value: n.fiscalYearStart || "", onChange: v => g("fiscalYearStart", v.target.value), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "MM-DD (e.g., 04-01)" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Timezone" }), t.jsx("select", { value: n.timezone || "", onChange: v => g("timezone", v.target.value), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", children: p.map(v => t.jsx("option", { value: v, children: v }, v)) })] }), t.jsxs("div", { className: "md:col-span-2", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Company Description" }), t.jsx("textarea", { value: n.description || "", onChange: v => g("description", v.target.value), rows: 3, className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "Brief description of your company..." })] })] })] }), t.jsxs("div", { className: "flex gap-4 justify-end", children: [t.jsx(ue, { type: "button", variant: "OUTLINE", onClick: () => e("/business-settings"), disabled: o, children: "Cancel" }), t.jsxs(ue, { type: "submit", variant: "PRIMARY", disabled: o, className: "flex items-center gap-2", children: [t.jsx(Za, { className: "w-4 h-4" }), o ? "Saving..." : "Save Settings"] })] })] })] }) }, Pl = { getAll: async () => Ze.get("/taxes"), getById: async e => Ze.get(`/taxes/${e}`), create: async e => Ze.post("/taxes", e), update: async (e, r) => Ze.patch(`/taxes/${e}`, r), delete: async e => Ze.delete(`/taxes/${e}`) }, Cu = { getAll: async () => Ze.get("/currencies"), getById: async e => Ze.get(`/currencies/${e}`), create: async e => Ze.post("/currencies", e), update: async (e, r) => Ze.patch(`/currencies/${e}`, r), delete: async e => Ze.delete(`/currencies/${e}`) }, Pie = () => { const e = xt(), { taxSettings: r, updateTaxSettings: a, isLoading: s } = Br(), [n, i] = h.useState({ defaultRate: 18, type: "GST", inclusive: !1, registrationNumber: "" }), [o, c] = h.useState(!1), [u, m] = h.useState([]), [g, f] = h.useState(!0), [y, p] = h.useState(!1), [b, j] = h.useState(null), [v, S] = h.useState(""), [k, E] = h.useState(0), [C, N] = h.useState(""), [A, D] = h.useState(!0), [I, $] = h.useState(!1), [B, W] = h.useState([]), [M, q] = h.useState(!0), [V, X] = h.useState(!1), [se, le] = h.useState(null), [ee, L] = h.useState(""), [z, T] = h.useState(""), [_, H] = h.useState(""), [U, K] = h.useState(1), [Z, J] = h.useState(!0), [te, G] = h.useState(!1), [de, Te] = h.useState(!1); h.useEffect(() => { r && i(r) }, [r]), h.useEffect(() => { pe(), He() }, []); const pe = async () => { try { const Q = await Pl.getAll(); m(Q) } catch (Q) { console.error("Failed to fetch taxes", Q), R.error("Failed to load tax rates") } finally { f(!1) } }, He = async () => { try { const Q = await Cu.getAll(); W(Q) } catch (Q) { console.error("Failed to fetch currencies", Q), R.error("Failed to load currencies") } finally { q(!1) } }, ne = async Q => { Q.preventDefault(), c(!0); try { await a(n), R.success("Tax settings updated successfully") } catch (Le) { console.error("Failed to update settings:", Le), R.error("Failed to update settings") } finally { c(!1) } }, De = () => { j(null), S(""), E(0), N(""), D(!0), p(!0) }, $e = Q => { j(Q), S(Q.name), E(Number(Q.rate)), N(Q.description || ""), D(Q.isActive), p(!0) }, Et = async Q => { Q.preventDefault(), $(!0); try { const Le = { name: v, rate: k, description: C, isActive: A }; b ? (await Pl.update(b.id, Le), R.success("Tax rate updated")) : (await Pl.create(Le), R.success("Tax rate created")), p(!1), pe() } catch { R.error("Failed to save tax rate") } finally { $(!1) } }, Bt = async Q => { if (window.confirm("Are you sure you want to delete this tax rate?")) try { await Pl.delete(Q), R.success("Tax rate deleted"), pe() } catch { R.error("Failed to delete tax rate") } }, Ft = () => { le(null), L(""), T(""), H(""), K(1), J(!0), G(!1), X(!0) }, mt = Q => { le(Q), L(Q.name), T(Q.code), H(Q.symbol), K(Number(Q.exchangeRate)), J(Q.isActive), G(Q.isDefault), X(!0) }, ce = async Q => { Q.preventDefault(), Te(!0); try { const Le = { name: ee, code: z, symbol: _, exchangeRate: U, isActive: Z, isDefault: te }; se ? (await Cu.update(se.id, Le), R.success("Currency updated")) : (await Cu.create(Le), R.success("Currency created")), X(!1), He() } catch { R.error("Failed to save currency") } finally { Te(!1) } }, Xe = async Q => { try { await Cu.update(Q.id, { isDefault: !0 }), R.success(`${Q.name} set as default`), He() } catch { R.error("Failed to set default currency") } }, jt = async Q => { if (window.confirm("Are you sure you want to delete this currency?")) try { await Cu.delete(Q), R.success("Currency deleted"), He() } catch { R.error("Failed to delete currency") } }; return s ? t.jsx("div", { className: "flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-red-500" }) }) : t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => e("/business-settings"), className: "p-2", children: t.jsx(pr, { className: "w-4 h-4" }) }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-r from-green-500 to-blue-600 rounded-xl", children: t.jsx(T2, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Currency & Tax Settings" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Configure currencies and tax calculations" })] })] })] }), t.jsxs("div", { className: "grid grid-cols-1 xl:grid-cols-2 gap-6", children: [t.jsx(Ae, { children: t.jsxs(st, { className: "space-y-4", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsxs("h4", { className: "text-md font-medium text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(Qr, { className: "w-5 h-5 text-green-500" }), "Currencies"] }), t.jsx("p", { className: "text-sm text-gray-500", children: "Manage currencies and exchange rates." })] }), t.jsxs(ue, { type: "button", variant: "OUTLINE", size: "SM", onClick: Ft, className: "flex items-center gap-1", children: [t.jsx($t, { className: "w-4 h-4" }), "Add Currency"] })] }), M ? t.jsx("div", { className: "text-center py-4 text-gray-500", children: "Loading currencies..." }) : t.jsxs("div", { className: "space-y-3", children: [B.map(Q => t.jsxs("div", { className: "p-4 border border-gray-100 dark:border-gray-800 rounded-xl bg-white dark:bg-gray-800/50 flex items-center justify-between hover:border-indigo-500/30 transition-colors", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "w-10 h-10 rounded-lg bg-green-50 dark:bg-green-900/20 flex items-center justify-center text-green-600 font-bold", children: Q.symbol }), t.jsxs("div", { children: [t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsxs("p", { className: "font-semibold text-gray-900 dark:text-white", children: [Q.name, " (", Q.code, ")"] }), Q.isDefault && t.jsx("span", { className: "text-[10px] bg-blue-100 text-blue-600 px-1.5 py-0.5 rounded-full font-medium", children: "Default" }), !Q.isActive && t.jsx("span", { className: "text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded-full font-medium", children: "Inactive" })] }), t.jsxs("p", { className: "text-xs text-gray-500", children: ["Rate: 1 USD = ", Q.exchangeRate, " ", Q.code] })] })] }), t.jsxs("div", { className: "flex items-center gap-1", children: [!Q.isDefault && Q.isActive && t.jsx(ue, { type: "button", variant: "GHOST", size: "SM", onClick: () => Xe(Q), className: "px-2 py-1 text-[10px] font-medium text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20", children: "Set as Default" }), t.jsx(ue, { type: "button", variant: "GHOST", size: "SM", onClick: () => mt(Q), className: "p-2 text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20", children: "Edit" }), t.jsx(ue, { type: "button", variant: "GHOST", size: "SM", onClick: () => jt(Q.id), className: "p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20", children: t.jsx(yt, { className: "w-4 h-4" }) })] })] }, Q.id)), B.length === 0 && t.jsx("div", { className: "text-center py-8 border-2 border-dashed border-gray-100 dark:border-gray-800 rounded-xl", children: t.jsx("p", { className: "text-sm text-gray-500", children: 'No currencies found. Click "Add Currency" to get started.' }) })] })] }) }), t.jsx(Ae, { children: t.jsxs(st, { className: "space-y-4", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsxs("h4", { className: "text-md font-medium text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(Eb, { className: "w-5 h-5 text-blue-500" }), "Tax Rates"] }), t.jsx("p", { className: "text-sm text-gray-500", children: "Manage available tax rates for documents." })] }), t.jsxs(ue, { type: "button", variant: "OUTLINE", size: "SM", onClick: De, className: "flex items-center gap-1", children: [t.jsx($t, { className: "w-4 h-4" }), "Add New Rate"] })] }), g ? t.jsx("div", { className: "text-center py-4 text-gray-500", children: "Loading rates..." }) : t.jsxs("div", { className: "space-y-3", children: [u.map(Q => t.jsxs("div", { className: "p-4 border border-gray-100 dark:border-gray-800 rounded-xl bg-white dark:bg-gray-800/50 flex items-center justify-between hover:border-blue-500/30 transition-colors", children: [t.jsxs("div", { children: [t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsxs("p", { className: "font-semibold text-gray-900 dark:text-white", children: [Q.name, " (", Q.rate, "%)"] }), !Q.isActive && t.jsx("span", { className: "text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded-full font-medium", children: "Inactive" })] }), Q.description && t.jsx("p", { className: "text-xs text-gray-500", children: Q.description })] }), t.jsxs("div", { className: "flex items-center gap-1", children: [t.jsx(ue, { type: "button", variant: "GHOST", size: "SM", onClick: () => $e(Q), className: "p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20", children: "Edit" }), t.jsx(ue, { type: "button", variant: "GHOST", size: "SM", onClick: () => Bt(Q.id), className: "p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20", children: t.jsx(yt, { className: "w-4 h-4" }) })] })] }, Q.id)), u.length === 0 && t.jsx("div", { className: "text-center py-8 border-2 border-dashed border-gray-100 dark:border-gray-800 rounded-xl", children: t.jsx("p", { className: "text-sm text-gray-500", children: 'No tax rates found. Click "Add New Rate" to get started.' }) })] })] }) })] }), t.jsx("form", { onSubmit: ne, className: "hidden", children: t.jsxs("div", { className: "flex gap-4 justify-end", children: [t.jsx(ue, { type: "button", variant: "OUTLINE", onClick: () => e("/business-settings"), disabled: o, children: "Cancel" }), t.jsxs(ue, { type: "submit", variant: "PRIMARY", disabled: o, className: "flex items-center gap-2", children: [t.jsx(Za, { className: "w-4 h-4" }), o ? "Saving..." : "Save Settings"] })] }) }), V && t.jsx("div", { className: "fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4", children: t.jsxs("div", { className: "bg-white dark:bg-gray-900 rounded-2xl w-full max-w-md shadow-2xl border border-gray-100 dark:border-gray-800 overflow-hidden transform transition-all", children: [t.jsxs("div", { className: "p-6 border-b border-gray-100 dark:border-gray-800 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/50", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-green-100 dark:bg-green-900/30 rounded-lg", children: t.jsx(Qr, { className: "w-5 h-5 text-green-600" }) }), t.jsx("h2", { className: "text-xl font-bold text-gray-900 dark:text-white", children: se ? "Edit Currency" : "Add New Currency" })] }), t.jsx("button", { onClick: () => X(!1), className: "p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors", children: t.jsx(yt, { className: "w-5 h-5 text-gray-400" }) })] }), t.jsxs("form", { onSubmit: ce, className: "p-6 space-y-5", children: [t.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [t.jsxs("div", { className: "col-span-2", children: [t.jsx("label", { className: "block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1.5", children: "Currency Name *" }), t.jsx("input", { type: "text", required: !0, value: ee, onChange: Q => L(Q.target.value), className: "w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 transition-all outline-none", placeholder: "e.g. US Dollar" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1.5", children: "Currency Code *" }), t.jsx("input", { type: "text", required: !0, value: z, onChange: Q => T(Q.target.value.toUpperCase()), className: "w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 transition-all outline-none", placeholder: "e.g. USD", maxLength: 3 })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1.5", children: "Symbol *" }), t.jsx("input", { type: "text", required: !0, value: _, onChange: Q => H(Q.target.value), className: "w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 transition-all outline-none", placeholder: "e.g. $" })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1.5", children: "Exchange Rate *" }), t.jsxs("div", { className: "relative", children: [t.jsx("div", { className: "absolute left-4 top-1/2 -translate-y-1/2 text-gray-400", children: t.jsx(T2, { className: "w-4 h-4" }) }), t.jsx("input", { type: "number", required: !0, min: "0", step: "0.000001", value: U, onChange: Q => K(parseFloat(Q.target.value)), className: "w-full pl-10 pr-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 transition-all outline-none" })] }), t.jsx("p", { className: "mt-1.5 text-[11px] text-gray-500 italic", children: "Enter how much of this currency equals 1 US Dollar." })] }), t.jsx("div", { className: "flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-100 dark:border-gray-800", children: t.jsxs("div", { className: "flex flex-col gap-3", children: [t.jsxs("label", { className: "flex items-center gap-3 cursor-pointer group", children: [t.jsxs("div", { className: "relative flex items-center", children: [t.jsx("input", { type: "checkbox", checked: Z, onChange: Q => J(Q.target.checked), className: "peer h-5 w-5 cursor-pointer appearance-none rounded-md border border-gray-300 dark:border-gray-600 checked:border-indigo-600 checked:bg-indigo-600 transition-all" }), t.jsx("svg", { className: "absolute h-3.5 w-3.5 text-white opacity-0 peer-checked:opacity-100 transition-opacity pointer-events-none left-0.5", xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "4", strokeLinecap: "round", strokeLinejoin: "round", children: t.jsx("polyline", { points: "20 6 9 17 4 12" }) })] }), t.jsx("span", { className: "text-sm font-medium text-gray-700 dark:text-gray-300 group-hover:text-indigo-600 transition-colors", children: "Active" })] }), t.jsxs("label", { className: "flex items-center gap-3 cursor-pointer group", children: [t.jsxs("div", { className: "relative flex items-center", children: [t.jsx("input", { type: "checkbox", checked: te, onChange: Q => G(Q.target.checked), className: "peer h-5 w-5 cursor-pointer appearance-none rounded-md border border-gray-300 dark:border-gray-600 checked:border-blue-600 checked:bg-blue-600 transition-all" }), t.jsx("svg", { className: "absolute h-3.5 w-3.5 text-white opacity-0 peer-checked:opacity-100 transition-opacity pointer-events-none left-0.5", xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "4", strokeLinecap: "round", strokeLinejoin: "round", children: t.jsx("polyline", { points: "20 6 9 17 4 12" }) })] }), t.jsx("span", { className: "text-sm font-medium text-gray-700 dark:text-gray-300 group-hover:text-blue-600 transition-colors", children: "Set as Default" })] })] }) }), t.jsxs("div", { className: "pt-2 flex justify-end gap-3", children: [t.jsx(ue, { type: "button", variant: "GHOST", onClick: () => X(!1), className: "px-6 py-2.5", children: "Cancel" }), t.jsx(ue, { type: "submit", disabled: de, className: "px-8 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-200 dark:shadow-none", children: de ? "Saving..." : se ? "Update" : "Create" })] })] })] }) }), y && t.jsx("div", { className: "fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4", children: t.jsxs("div", { className: "bg-white dark:bg-gray-900 rounded-2xl w-full max-w-md shadow-2xl border border-gray-100 dark:border-gray-800 overflow-hidden transform transition-all", children: [t.jsxs("div", { className: "p-6 border-b border-gray-100 dark:border-gray-800 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/50", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg", children: t.jsx(Eb, { className: "w-5 h-5 text-blue-600" }) }), t.jsx("h2", { className: "text-xl font-bold text-gray-900 dark:text-white", children: b ? "Edit Tax Rate" : "Add Tax Rate" })] }), t.jsx("button", { onClick: () => p(!1), className: "p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors", children: t.jsx(yt, { className: "w-5 h-5 text-gray-400" }) })] }), t.jsxs("form", { onSubmit: Et, className: "p-6 space-y-5", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1.5", children: "Name *" }), t.jsx("input", { type: "text", required: !0, value: v, onChange: Q => S(Q.target.value), className: "w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all outline-none", placeholder: "e.g. GST 18%" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1.5", children: "Rate (%) *" }), t.jsx("input", { type: "number", required: !0, min: "0", max: "100", step: "0.01", value: k, onChange: Q => E(parseFloat(Q.target.value)), className: "w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all outline-none" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1.5", children: "Description" }), t.jsx("textarea", { value: C, onChange: Q => N(Q.target.value), rows: 2, className: "w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all outline-none resize-none", placeholder: "Optional description..." })] }), t.jsxs("div", { className: "flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-100 dark:border-gray-800", children: [t.jsxs("div", { className: "relative flex items-center", children: [t.jsx("input", { type: "checkbox", id: "rateActive", checked: A, onChange: Q => D(Q.target.checked), className: "peer h-5 w-5 cursor-pointer appearance-none rounded-md border border-gray-300 dark:border-gray-600 checked:border-blue-600 checked:bg-blue-600 transition-all" }), t.jsx("svg", { className: "absolute h-3.5 w-3.5 text-white opacity-0 peer-checked:opacity-100 transition-opacity pointer-events-none left-0.5", xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "4", strokeLinecap: "round", strokeLinejoin: "round", children: t.jsx("polyline", { points: "20 6 9 17 4 12" }) })] }), t.jsx("label", { htmlFor: "rateActive", className: "text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer", children: "Active" })] }), t.jsxs("div", { className: "pt-2 flex justify-end gap-3", children: [t.jsx(ue, { type: "button", onClick: () => p(!1), variant: "GHOST", className: "px-6 py-2.5", children: "Cancel" }), t.jsx(ue, { type: "submit", disabled: I, className: "px-8 py-2.5 bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-200 dark:shadow-none", children: I ? "Saving..." : b ? "Update" : "Create" })] })] })] }) })] }) }, Mw = ["#EF4444", "#F59E0B", "#10B981", "#3B82F6", "#8B5CF6", "#EC4899", "#14B8A6", "#F97316", "#84CC16", "#6366F1", "#64748B", "#374151", "#7C2D12", "#B91C1C", "#365314"], rb = (e = []) => { const r = Mw.filter(s => !e.includes(s)), a = r.length > 0 ? r : Mw; return a[Math.floor(Math.random() * a.length)] }, Tie = () => { const e = xt(), { leadSources: r, addLeadSource: a, updateLeadSource: s, deleteLeadSource: n, reorderLeadSources: i, isLoading: o } = Br(), [c, u] = h.useState(!1), [m, g] = h.useState(null), [f, y] = h.useState(() => ({ name: "", description: "", color: rb(), isActive: !0, sortOrder: 0 })), [p, b] = h.useState(!1), [j, v] = h.useState({}), S = () => { const N = r.map(A => A.color).filter(A => !!A); y({ name: "", description: "", color: rb(N), isActive: !0, sortOrder: r.length }), u(!1), g(null), v({}) }, k = N => { y({ name: N.name, description: N.description || "", color: N.color || rb(), isActive: N.isActive, sortOrder: N.sortOrder }), g(N.id || null), u(!0), v({}) }, E = async N => { N.preventDefault(); const A = {}, D = (f.name || "").trim(); if (D ? D.length > 50 && (A.name = "Lead source name must be at most 50 characters") : A.name = "Lead source name is required", Object.keys(A).length > 0) { v(A); return } v({}), b(!0); try { m ? await s(m, { ...f, name: D }) : await a({ ...f, name: D }), S() } catch (I) { console.error("Failed to save lead source:", I) } finally { b(!1) } }, C = async N => { if (window.confirm("Are you sure you want to delete this lead source? This action cannot be undone.")) try { await n(N), R.success("Lead source deleted successfully") } catch (A) { console.error("Failed to delete lead source:", A) } }; return o ? t.jsx(Cn, { message: "Loading lead sources..." }) : t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "sm", onClick: () => e("/business-settings"), className: "p-2", children: t.jsx(pr, { className: "w-4 h-4" }) }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl", children: t.jsx($s, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Lead Sources Management" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Configure and manage lead source options for your CRM" })] })] })] }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [t.jsx("div", { className: "lg:col-span-1", children: t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: c ? "Edit Lead Source" : "Add New Lead Source" }) }), t.jsx(st, { children: t.jsxs("form", { onSubmit: E, className: "space-y-4", children: [t.jsxs("div", { children: [t.jsxs("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: ["Source Name ", t.jsx("span", { className: "text-red-500", children: "*" })] }), t.jsx("input", { type: "text", value: f.name, onChange: N => { const A = N.target.value; y(I => ({ ...I, name: A })); const D = A.trim(); D ? D.length > 50 ? v(I => ({ ...I, name: "Lead source name must be at most 50 characters" })) : v(I => ({ ...I, name: void 0 })) : v(I => ({ ...I, name: "Lead source name is required" })) }, className: `w-full p-2 border rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${j.name ? "border-red-300 dark:border-red-600" : "border-gray-300 dark:border-gray-600"}`, placeholder: "e.g., Website, Referral, Social Media" }), j.name && t.jsx("p", { className: "mt-1 text-xs text-rose-600 dark:text-rose-400", children: j.name })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Description" }), t.jsx("textarea", { value: f.description, onChange: N => y(A => ({ ...A, description: N.target.value })), rows: 3, className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "Brief description of this lead source" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Color" }), t.jsxs("div", { className: "flex items-center gap-2 mb-2", children: [t.jsx("input", { type: "color", value: f.color, onChange: N => y(A => ({ ...A, color: N.target.value })), className: "w-10 h-10 border border-gray-300 dark:border-gray-600 rounded cursor-pointer" }), t.jsx("input", { type: "text", value: f.color, onChange: N => y(A => ({ ...A, color: N.target.value })), className: "flex-1 p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm" })] }), t.jsx("div", { className: "grid grid-cols-5 gap-2", children: Mw.map(N => t.jsx("button", { type: "button", onClick: () => y(A => ({ ...A, color: N })), className: `w-8 h-8 rounded border-2 ${f.color === N ? "border-gray-800 dark:border-white" : "border-gray-300 dark:border-gray-600"}`, style: { backgroundColor: N } }, N)) })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("input", { type: "checkbox", id: "isActive", checked: f.isActive, onChange: N => y(A => ({ ...A, isActive: N.target.checked })), className: "rounded border-gray-300 dark:border-gray-600" }), t.jsx("label", { htmlFor: "isActive", className: "text-sm text-gray-700 dark:text-gray-300", children: "Active (available for selection)" })] }), t.jsxs("div", { className: "flex gap-2", children: [t.jsxs(ue, { type: "submit", variant: "PRIMARY", disabled: p, className: "flex items-center gap-2", children: [t.jsx(Za, { className: "w-4 h-4" }), p ? "Saving..." : c ? "Update" : "Add"] }), c && t.jsx(ue, { type: "button", variant: "OUTLINE", onClick: S, children: "Cancel" })] })] }) })] }) }), t.jsx("div", { className: "lg:col-span-2", children: t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: ["Lead Sources (", r.length, ")"] }), t.jsxs(ue, { variant: "PRIMARY", size: "SM", onClick: S, className: "flex items-center gap-1", children: [t.jsx($t, { className: "w-4 h-4" }), "Add New"] })] }) }), t.jsx(st, { children: r.length === 0 ? t.jsxs("div", { className: "text-center py-8", children: [t.jsx($s, { className: "w-12 h-12 text-gray-400 mx-auto mb-4" }), t.jsx("h4", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: "No Lead Sources Found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: "Create your first lead source to start tracking where your leads come from." })] }) : t.jsx("div", { className: "space-y-3", children: r.sort((N, A) => N.sortOrder - A.sortOrder).map((N, A) => t.jsxs("div", { className: "flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsxs("div", { className: "flex items-center gap-4 flex-1", children: [t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("div", { className: "w-4 h-4 rounded-full border border-gray-300 dark:border-gray-600", style: { backgroundColor: N.color } }), t.jsxs("span", { className: "text-sm text-gray-500 dark:text-gray-400", children: ["#", A + 1] })] }), t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("h4", { className: "font-medium text-gray-900 dark:text-white", children: N.name }), !N.isActive && t.jsx("span", { className: "px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full", children: "Inactive" })] }), N.description && t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mt-1", children: N.description })] })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx(ue, { variant: "GHOST", size: "sm", onClick: () => k(N), className: "p-1", title: "Edit", children: t.jsx(Qo, { className: "w-4 h-4 text-blue-500" }) }), t.jsx(ue, { variant: "GHOST", size: "sm", onClick: () => C(N.id), className: "p-1", title: "Delete", children: t.jsx(yt, { className: "w-4 h-4 text-red-500" }) })] })] }, N.id)) }) })] }) })] }), r.length > 0 && t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Lead Source Analytics" }) }), t.jsx(st, { children: t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [t.jsxs("div", { className: "text-center", children: [t.jsx("div", { className: "text-2xl font-bold text-blue-600 dark:text-blue-400", children: r.filter(N => N.isActive).length }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Active Sources" })] }), t.jsxs("div", { className: "text-center", children: [t.jsx("div", { className: "text-2xl font-bold text-gray-600 dark:text-gray-400", children: r.filter(N => !N.isActive).length }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Inactive Sources" })] })] }) })] })] }) }, G6 = () => {
    const [e, r] = h.useState([]), [a, s] = h.useState(!1), [n, i] = h.useState(null), [o, c] = h.useState({}); h.useEffect(() => { u() }, []); const u = async () => { try { s(!0); const C = await ie.get("/business-settings/field-configs/lead"); C.data?.success && r(C.data.data) } catch (C) { console.error("Error fetching fields:", C), R.error("Failed to load field settings") } finally { s(!1) } }, m = C => { i(C.id), c(C) }, g = async () => { if (n) try { await ie.put(`/business-settings/field-configs/${n}`, o), R.success("Field updated successfully"), i(null), c({}), u() } catch (C) { console.error("Error updating field:", C), R.error("Failed to update field") } }, f = () => { i(null), c({}) }, y = async C => { try { await ie.put(`/business-settings/field-configs/${C.id}`, { isVisible: !C.isVisible }), r(e.map(N => N.id === C.id ? { ...N, isVisible: !N.isVisible } : N)), R.success(`Field ${C.isVisible ? "hidden" : "shown"}`) } catch (N) { console.error("Error toggling visibility:", N), R.error("Failed to update field visibility") } }, p = async (C, N) => { const A = e.findIndex($ => $.id === C.id), D = N === "up" ? A - 1 : A + 1; if (D < 0 || D >= e.length) return; const I = [...e];[I[A], I[D]] = [I[D], I[A]]; try { const $ = I.map((B, W) => ({ id: B.id, displayOrder: W })); await Promise.all($.map(B => ie.put(`/business-settings/field-configs/${B.id}`, { displayOrder: B.displayOrder }))), r(I), R.success("Field order updated") } catch ($) { console.error("Error reordering fields:", $), R.error("Failed to reorder fields") } }, b = async C => { try { await ie.put(`/business-settings/field-configs/${C.id}`, { isRequired: !C.isRequired }), r(e.map(N => N.id === C.id ? { ...N, isRequired: !N.isRequired } : N)), R.success(`Field ${C.isRequired ? "marked as optional" : "marked as required"}`) } catch (N) { console.error("Error updating required status:", N), R.error("Failed to update field") } try { window.dispatchEvent(new CustomEvent("fieldConfigsUpdated")) } catch { } }, [j, v] = h.useState({ entityType: "lead", fieldName: "", label: "", isRequired: !1, isVisible: !0, displayOrder: e.length, section: "personal", validation: { type: "text" } }), S = [{ value: "text", label: "Text" }, { value: "number", label: "Number" }, { value: "email", label: "Email" }, { value: "phone", label: "Phone" }, { value: "url", label: "URL" }, { value: "textarea", label: "Textarea" }, { value: "select", label: "Select/Dropdown" }, { value: "multiselect", label: "Multi-Select" }, { value: "date", label: "Date" }, { value: "datetime", label: "Date & Time" }, { value: "checkbox", label: "Checkbox" }], k = async () => { if (!j.fieldName || !j.label) { R.error("Field key and label are required"); return } try { s(!0); const C = { ...j, displayOrder: e.length, validation: j.validation || { type: "text" } }; await ie.post("/business-settings/field-configs", C), R.success("Field added"), v({ entityType: "lead", fieldName: "", label: "", isRequired: !1, isVisible: !0, displayOrder: e.length, section: "personal", validation: { type: "text" } }), await u(); try { window.dispatchEvent(new CustomEvent("fieldConfigsUpdated")) } catch { } } catch (C) { console.error("Error adding field:", C), R.error("Failed to add field") } finally { s(!1) } }, E = async C => { if (confirm("Delete this field? This cannot be undone.")) try { await ie.delete(`/business-settings/field-configs/${C}`), R.success("Field deleted"), await u(); try { window.dispatchEvent(new CustomEvent("fieldConfigsUpdated")) } catch { } } catch (N) { console.error("Error deleting field:", N), R.error("Failed to delete field") } }; return a ? t.jsx("div", { className: "flex justify-center items-center py-8", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600" }) }) : t.jsxs("div", {
        className: "bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700", children: [t.jsxs("div", { className: "px-6 py-4 border-b border-gray-200 dark:border-gray-700", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Manage Lead Form Fields" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mt-1", children: "Show, hide, reorder, and configure lead form fields" })] }), t.jsx("div", { className: "px-6 py-4 border-b border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/40", children: t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 items-end", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs text-gray-600 dark:text-gray-400 mb-1", children: "Field Key" }), t.jsx("input", { type: "text", placeholder: "e.g. customField", value: j.fieldName || "", onChange: C => v({ ...j, fieldName: C.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 text-sm" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs text-gray-600 dark:text-gray-400 mb-1", children: "Label" }), t.jsx("input", { type: "text", placeholder: "Display Label", value: j.label || "", onChange: C => v({ ...j, label: C.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 text-sm" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs text-gray-600 dark:text-gray-400 mb-1", children: "Field Type" }), t.jsx("select", { value: j.validation?.type || "text", onChange: C => v({ ...j, validation: { ...j.validation || {}, type: C.target.value } }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 text-sm", children: S.map(C => t.jsx("option", { value: C.value, children: C.label }, C.value)) })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs text-gray-600 dark:text-gray-400 mb-1", children: "Section" }), t.jsxs("select", { value: j.section || "personal", onChange: C => v({ ...j, section: C.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 text-sm", children: [t.jsx("option", { value: "personal", children: "Personal" }), t.jsx("option", { value: "company", children: "Company" }), t.jsx("option", { value: "location", children: "Location" }), t.jsx("option", { value: "lead_management", children: "Lead Management" }), t.jsx("option", { value: "notes", children: "Notes" })] })] }), t.jsxs("div", { className: "flex gap-4 items-center", children: [t.jsxs("label", { className: "inline-flex items-center text-sm", children: [t.jsx("input", { type: "checkbox", checked: j.isRequired || !1, onChange: C => v({ ...j, isRequired: C.target.checked }), className: "mr-2" }), "Required"] }), t.jsxs("label", { className: "inline-flex items-center text-sm", children: [t.jsx("input", { type: "checkbox", checked: j.isVisible !== !1, onChange: C => v({ ...j, isVisible: C.target.checked }), className: "mr-2" }), "Visible"] })] }), t.jsx("div", { className: "col-span-full flex justify-end", children: t.jsxs("button", { onClick: k, className: "inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700", children: [t.jsx($t, { className: "h-4 w-4 mr-2" }), "Add Field"] }) })] }) }), t.jsx("div", {
            className: "overflow-x-auto", children: t.jsxs("table", {
                className: "w-full", children: [t.jsx("thead", { children: t.jsxs("tr", { className: "bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700", children: [t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase", children: "Field Name" }), t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase", children: "Label" }), t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase", children: "Type" }), t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase", children: "Section" }), t.jsx("th", { className: "px-6 py-3 text-center text-xs font-medium text-gray-700 dark:text-gray-300 uppercase", children: "Visible" }), t.jsx("th", { className: "px-6 py-3 text-center text-xs font-medium text-gray-700 dark:text-gray-300 uppercase", children: "Required" }), t.jsx("th", { className: "px-6 py-3 text-center text-xs font-medium text-gray-700 dark:text-gray-300 uppercase", children: "Actions" })] }) }), t.jsx("tbody", {
                    className: "divide-y divide-gray-200 dark:divide-gray-700", children: e.map((C, N) => t.jsxs("tr", {
                        className: "hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors", children: [t.jsx("td", { className: "px-6 py-4", children: t.jsx("span", { className: "text-sm font-medium text-gray-900 dark:text-white", children: C.fieldName }) }), t.jsx("td", { className: "px-6 py-4", children: n === C.id ? t.jsx("input", { type: "text", value: o.label || "", onChange: A => c({ ...o, label: A.target.value }), className: "px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" }) : t.jsx("span", { className: "text-sm text-gray-700 dark:text-gray-300", children: C.label }) }), t.jsx("td", { className: "px-6 py-4", children: t.jsx("span", { className: "text-xs font-medium text-gray-600 dark:text-gray-400", children: C.validation?.type || "text" }) }), t.jsx("td", {
                            className: "px-6 py-4", children: t.jsx("span", {
                                className: `inline-block px-3 py-1 rounded-full text-xs font-medium
                    ${C.section === "personal" ? "bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300" : C.section === "company" ? "bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300" : C.section === "location" ? "bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300" : C.section === "lead_management" ? "bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300" : C.section === "notes" ? "bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300" : "bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}`, children: C.section.replace(/_/g, " ")
                            })
                        }), t.jsx("td", { className: "px-6 py-4 text-center", children: t.jsx("button", { onClick: () => y(C), className: "inline-flex items-center justify-center p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors", title: C.isVisible ? "Hide field" : "Show field", children: C.isVisible ? t.jsx(Ht, { className: "h-4 w-4 text-green-600" }) : t.jsx(bn, { className: "h-4 w-4 text-gray-400" }) }) }), t.jsx("td", { className: "px-6 py-4 text-center", children: t.jsx("button", { onClick: () => b(C), className: `inline-flex items-center px-3 py-1 rounded-lg text-xs font-medium transition-colors ${C.isRequired ? "bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/50" : "bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-900/50"}`, children: C.isRequired ? "Required" : "Optional" }) }), t.jsx("td", { className: "px-6 py-4 text-center", children: t.jsx("div", { className: "flex items-center justify-center gap-2", children: n === C.id ? t.jsxs(t.Fragment, { children: [t.jsx("button", { onClick: g, className: "inline-flex items-center p-2 text-green-600 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-colors", title: "Save", children: t.jsx(Za, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: f, className: "inline-flex items-center p-2 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors", title: "Cancel", children: t.jsx(fa, { className: "h-4 w-4" }) })] }) : t.jsxs(t.Fragment, { children: [t.jsx("button", { onClick: () => m(C), className: "inline-flex items-center p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors", title: "Edit", children: t.jsx(uD, { className: "h-4 w-4" }) }), !["firstName", "lastName", "email", "phone", "company"].includes(C.fieldName) && t.jsx("button", { onClick: () => E(C.id), className: "inline-flex items-center p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors", title: "Delete", children: t.jsx(yt, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: () => p(C, "up"), disabled: N === 0, className: "inline-flex items-center p-2 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed", title: "Move up", children: t.jsx(z9, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: () => p(C, "down"), disabled: N === e.length - 1, className: "inline-flex items-center p-2 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed", title: "Move down", children: t.jsx(U9, { className: "h-4 w-4" }) })] }) }) })]
                    }, C.id))
                })]
            })
        }), t.jsx("div", { className: "px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700", children: t.jsxs("p", { className: "text-xs text-gray-600 dark:text-gray-400", children: ["Total fields: ", e.length, "  Visible: ", e.filter(C => C.isVisible).length, "  Required: ", e.filter(C => C.isRequired).length] }) })]
    })
}, Die = () => { const e = xt(); return t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsx("div", { className: "space-y-4", children: t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("button", { onClick: () => e("/business-settings"), className: "p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors", title: "Back to Business Settings", children: t.jsx(pr, { className: "h-5 w-5 text-gray-600 dark:text-gray-400" }) }), t.jsx("div", { className: "p-2 bg-gradient-to-r from-purple-500 to-blue-600 rounded-xl", children: t.jsx(Hi, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Lead Form Fields Configuration" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Manage lead form fields - Add, hide, show, make required/optional, and reorder fields" })] })] }) }), t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700", children: t.jsx(G6, {}) })] }) }, ei = { getTags: async () => { const e = await ie.get("/tags"); return e?.data?.data ?? e?.data ?? [] }, createTag: async e => (await ie.post("/tags", e)).data, updateTag: async (e, r) => (await ie.put(`/tags/${e}`, r)).data, deleteTag: async e => { await ie.delete(`/tags/${e}`) } }, _w = ["#EF4444", "#F59E0B", "#10B981", "#3B82F6", "#8B5CF6", "#EC4899", "#14B8A6", "#F97316", "#84CC16", "#6366F1", "#64748B", "#374151", "#7C2D12", "#B91C1C", "#365314"], ab = (e = []) => { const r = _w.filter(s => !e.includes(s)), a = r.length > 0 ? r : _w; return a[Math.floor(Math.random() * a.length)] }, Oie = () => { const e = xt(), [r, a] = h.useState([]), [s, n] = h.useState(!0), [i, o] = h.useState(!1), [c, u] = h.useState(null), [m, g] = h.useState(() => ({ name: "", color: ab(), description: "", isActive: !0 })), [f, y] = h.useState(!1), [p, b] = h.useState({}); h.useEffect(() => { j() }, []); const j = async () => { try { n(!0); const N = await ei.getTags(); a(Array.isArray(N) ? N : []) } catch (N) { console.error("Failed to fetch tags:", N), R.error("Failed to load tags"), a([]) } finally { n(!1) } }, v = () => { const N = r.map(A => A.color).filter(A => !!A); g({ name: "", color: ab(N), description: "", isActive: !0 }), o(!1), u(null) }, S = N => { g({ name: N.name, color: N.color || ab(), description: N.description || "", isActive: N.isActive !== void 0 ? N.isActive : !0 }), u(N.id), o(!0) }, k = async N => { N.preventDefault(); const A = {}, D = (m.name || "").trim(); if (D ? D.length > 50 && (A.name = "Tag name must be at most 50 characters") : A.name = "Tag name is required", Object.keys(A).length > 0) { b(A); return } b({}), y(!0); try { const I = { name: D, color: m.color || "#3B82F6", description: m.description || void 0, isActive: m.isActive }; c ? await ei.updateTag(c, I) && R.success("Tag updated successfully") : await ei.createTag(I) && R.success("Tag added successfully"), v(), j() } catch (I) { console.error("Failed to save tag:", I); const $ = I?.response?.data?.message?.message || I?.response?.data?.message || "Failed to save tag"; R.error(Array.isArray($) ? $.join(", ") : $) } finally { y(!1) } }, E = async N => { if (window.confirm("Are you sure you want to delete this tag? This action cannot be undone.")) try { await ei.deleteTag(N), R.success("Tag deleted successfully"), j() } catch (A) { console.error("Failed to delete tag:", A), R.error("Failed to delete tag") } }, C = async (N, A) => { try { await ei.updateTag(N, { isActive: !A }), R.success("Tag updated successfully"), j() } catch (D) { console.error("Failed to update tag:", D), R.error("Failed to update tag") } }; return s ? t.jsx(Cn, { message: "Loading tags..." }) : t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "sm", onClick: () => e("/business-settings"), className: "p-2", children: t.jsx(pr, { className: "w-4 h-4" }) }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-xl", children: t.jsx(qo, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Tags Management" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Configure and manage tags for organizing leads and deals" })] })] })] }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [t.jsx("div", { className: "lg:col-span-1", children: t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: i ? "Edit Tag" : "Add New Tag" }) }), t.jsx(st, { children: t.jsxs("form", { onSubmit: k, className: "space-y-4", children: [t.jsxs("div", { children: [t.jsxs("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: ["Tag Name ", t.jsx("span", { className: "text-red-500", children: "*" })] }), t.jsx("input", { type: "text", value: m.name, onChange: N => { const A = N.target.value; g(I => ({ ...I, name: A })); const D = A.trim(); D ? D.length > 50 ? b(I => ({ ...I, name: "Tag name must be at most 50 characters" })) : b(I => ({ ...I, name: void 0 })) : b(I => ({ ...I, name: "Tag name is required" })) }, className: `w-full p-2 border rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${p.name ? "border-red-300 dark:border-red-600" : "border-gray-300 dark:border-gray-600"}`, placeholder: "e.g., Hot Lead, VIP, Follow-up" }), p.name && t.jsx("p", { className: "mt-1 text-xs text-rose-600 dark:text-rose-400", children: p.name })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Description" }), t.jsx("textarea", { value: m.description, onChange: N => g(A => ({ ...A, description: N.target.value })), rows: 3, className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "Brief description of this tag" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Color" }), t.jsxs("div", { className: "flex items-center gap-2 mb-2", children: [t.jsx("input", { type: "color", value: m.color, onChange: N => g(A => ({ ...A, color: N.target.value })), className: "w-10 h-10 border border-gray-300 dark:border-gray-600 rounded cursor-pointer" }), t.jsx("input", { type: "text", value: m.color, onChange: N => g(A => ({ ...A, color: N.target.value })), className: "flex-1 p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm" })] }), t.jsx("div", { className: "grid grid-cols-5 gap-2", children: _w.map(N => t.jsx("button", { type: "button", onClick: () => g(A => ({ ...A, color: N })), className: `w-8 h-8 rounded border-2 ${m.color === N ? "border-gray-800 dark:border-white" : "border-gray-300 dark:border-gray-600"}`, style: { backgroundColor: N } }, N)) })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("input", { type: "checkbox", id: "isActive", checked: m.isActive, onChange: N => g(A => ({ ...A, isActive: N.target.checked })), className: "rounded border-gray-300 dark:border-gray-600" }), t.jsx("label", { htmlFor: "isActive", className: "text-sm text-gray-700 dark:text-gray-300", children: "Active (available for selection)" })] }), t.jsxs("div", { className: "flex gap-2", children: [t.jsxs(ue, { type: "submit", variant: "PRIMARY", disabled: f, className: "flex items-center gap-2", children: [t.jsx(Za, { className: "w-4 h-4" }), f ? "Saving..." : i ? "Update" : "Add"] }), i && t.jsx(ue, { type: "button", variant: "OUTLINE", onClick: v, children: "Cancel" })] })] }) })] }) }), t.jsx("div", { className: "lg:col-span-2", children: t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: ["Tags (", r.length, ")"] }), t.jsxs(ue, { variant: "PRIMARY", size: "SM", onClick: v, className: "flex items-center gap-1", children: [t.jsx($t, { className: "w-4 h-4" }), "Add New"] })] }) }), t.jsx(st, { children: r.length === 0 ? t.jsxs("div", { className: "text-center py-8", children: [t.jsx(qo, { className: "w-12 h-12 text-gray-400 mx-auto mb-4" }), t.jsx("h4", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: "No Tags Found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: "Create your first tag to start organizing your leads and deals." })] }) : t.jsx("div", { className: "space-y-3", children: r.map(N => t.jsxs("div", { className: "flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsxs("div", { className: "flex items-center gap-4 flex-1", children: [t.jsx("div", { className: "w-4 h-4 rounded-full border border-gray-300 dark:border-gray-600", style: { backgroundColor: N.color || "#6B7280" } }), t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("h4", { className: "font-medium text-gray-900 dark:text-white", children: N.name }), N.isActive === !1 && t.jsx("span", { className: "px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full", children: "Inactive" })] }), N.description && t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mt-1", children: N.description })] })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx(ue, { variant: "GHOST", size: "sm", onClick: () => C(N.id, N.isActive !== !1), className: "p-1", title: N.isActive !== !1 ? "Deactivate" : "Activate", children: N.isActive !== !1 ? t.jsx(Ht, { className: "w-4 h-4 text-green-500" }) : t.jsx(bn, { className: "w-4 h-4 text-gray-400" }) }), t.jsx(ue, { variant: "GHOST", size: "sm", onClick: () => S(N), className: "p-1", title: "Edit", children: t.jsx(Qo, { className: "w-4 h-4 text-blue-500" }) }), t.jsx(ue, { variant: "GHOST", size: "sm", onClick: () => E(N.id), className: "p-1", title: "Delete", children: t.jsx(yt, { className: "w-4 h-4 text-red-500" }) })] })] }, N.id)) }) })] }) })] }), r.length > 0 && t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Tags Analytics" }) }), t.jsx(st, { children: t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [t.jsxs("div", { className: "text-center", children: [t.jsx("div", { className: "text-2xl font-bold text-blue-600 dark:text-blue-400", children: r.filter(N => N.isActive !== !1).length }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Active Tags" })] }), t.jsxs("div", { className: "text-center", children: [t.jsx("div", { className: "text-2xl font-bold text-gray-600 dark:text-gray-400", children: r.filter(N => N.isActive === !1).length }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Inactive Tags" })] })] }) })] })] }) }, kl = { async getIndustries() { const e = await ie.get("/industries"); return e.data?.data?.industries ?? e.data }, async createIndustry(e) { const r = await ie.post("/industries", e); return r.data?.data?.industry ?? r.data }, async updateIndustry(e, r) { const a = await ie.put(`/industries/${e}`, r); return a.data?.data?.industry ?? a.data }, async deleteIndustry(e) { await ie.delete(`/industries/${e}`) }, async addField(e, r) { const a = await ie.post(`/industries/${e}/fields`, r); return a.data?.data?.field ?? a.data }, async updateField(e, r) { const a = await ie.put(`/industries/fields/${e}`, r); return a.data?.data?.field ?? a.data }, async deleteField(e) { await ie.delete(`/industries/fields/${e}`) } }, Iie = () => { const e = xt(), [r, a] = h.useState([]), [s, n] = h.useState(!0), [i, o] = h.useState(!1), [c, u] = h.useState(null), [m, g] = h.useState({ name: "", isActive: !0 }), [f, y] = h.useState(!1); h.useEffect(() => { p() }, []); const p = async () => { try { n(!0); const E = await kl.getIndustries(); a(Array.isArray(E) ? E : []) } catch (E) { console.error("Failed to fetch industries:", E), R.error("Failed to load industries"), a([]) } finally { n(!1) } }, b = () => { g({ name: "", isActive: !0 }), o(!1), u(null) }, j = E => { g({ name: E.name, isActive: E.isActive !== void 0 ? E.isActive : !0 }), u(E.id), o(!0) }, v = async E => { if (E.preventDefault(), !m.name || !m.name.trim()) { R.error("Industry name is required"); return } y(!0); try { const C = { name: m.name.trim(), isActive: m.isActive }; c ? await kl.updateIndustry(c, C) && R.success("Industry updated successfully") : await kl.createIndustry(C) && R.success("Industry added successfully"), b(), p() } catch (C) { console.error("Failed to save industry:", C); const N = C?.response?.data?.message?.message || C?.response?.data?.message || "Failed to save industry"; R.error(Array.isArray(N) ? N.join(", ") : N) } finally { y(!1) } }, S = async E => { if (window.confirm("Are you sure you want to delete this industry? This action cannot be undone.")) try { await kl.deleteIndustry(E), R.success("Industry deleted successfully"), p() } catch (C) { console.error("Failed to delete industry:", C), R.error("Failed to delete industry") } }, k = async (E, C) => { try { await kl.updateIndustry(E, { isActive: !C }), R.success("Industry updated successfully"), p() } catch (N) { console.error("Failed to update industry:", N), R.error("Failed to update industry") } }; return s ? t.jsx(Cn, { message: "Loading industries..." }) : t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "sm", onClick: () => e("/business-settings"), className: "p-2", children: t.jsx(pr, { className: "w-4 h-4" }) }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl", children: t.jsx(Il, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Industries Management" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Configure and manage industry options for leads and companies" })] })] })] }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [t.jsx("div", { className: "lg:col-span-1", children: t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: i ? "Edit Industry" : "Add New Industry" }) }), t.jsx(st, { children: t.jsxs("form", { onSubmit: v, className: "space-y-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Industry Name *" }), t.jsx("input", { type: "text", value: m.name, onChange: E => g(C => ({ ...C, name: E.target.value })), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "e.g., Technology, Healthcare, Finance", required: !0 })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("input", { type: "checkbox", id: "isActive", checked: m.isActive, onChange: E => g(C => ({ ...C, isActive: E.target.checked })), className: "rounded border-gray-300 dark:border-gray-600" }), t.jsx("label", { htmlFor: "isActive", className: "text-sm text-gray-700 dark:text-gray-300", children: "Active (available for selection)" })] }), t.jsxs("div", { className: "flex gap-2", children: [t.jsxs(ue, { type: "submit", variant: "PRIMARY", disabled: f, className: "flex items-center gap-2", children: [t.jsx(Za, { className: "w-4 h-4" }), f ? "Saving..." : i ? "Update" : "Add"] }), i && t.jsx(ue, { type: "button", variant: "OUTLINE", onClick: b, children: "Cancel" })] })] }) })] }) }), t.jsx("div", { className: "lg:col-span-2", children: t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: ["Industries (", r.length, ")"] }), t.jsxs(ue, { variant: "OUTLINE", size: "sm", onClick: b, className: "flex items-center gap-1", children: [t.jsx($t, { className: "w-4 h-4" }), "Add New"] })] }) }), t.jsx(st, { children: r.length === 0 ? t.jsxs("div", { className: "text-center py-8", children: [t.jsx(Il, { className: "w-12 h-12 text-gray-400 mx-auto mb-4" }), t.jsx("h4", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: "No Industries Found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: "Create your first industry to start categorizing your leads and companies." })] }) : t.jsx("div", { className: "space-y-3", children: r.sort((E, C) => E.name.localeCompare(C.name)).map(E => t.jsxs("div", { className: "flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsx("div", { className: "flex items-center gap-4 flex-1", children: t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("h4", { className: "font-medium text-gray-900 dark:text-white", children: E.name }), E.isActive === !1 && t.jsx("span", { className: "px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full", children: "Inactive" })] }), E.description && t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mt-1", children: E.description }), E.fields && E.fields.length > 0 && t.jsxs("p", { className: "text-xs text-gray-500 dark:text-gray-500 mt-1", children: [E.fields.length, " custom field", E.fields.length !== 1 ? "s" : ""] })] }) }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx(ue, { variant: "GHOST", size: "sm", onClick: () => k(E.id, E.isActive !== !1), className: "p-1", title: E.isActive !== !1 ? "Deactivate" : "Activate", children: E.isActive !== !1 ? t.jsx(Ht, { className: "w-4 h-4 text-green-500" }) : t.jsx(bn, { className: "w-4 h-4 text-gray-400" }) }), t.jsx(ue, { variant: "GHOST", size: "sm", onClick: () => j(E), className: "p-1", title: "Edit", children: t.jsx(Qo, { className: "w-4 h-4 text-blue-500" }) }), t.jsx(ue, { variant: "GHOST", size: "sm", onClick: () => S(E.id), className: "p-1", title: "Delete", children: t.jsx(yt, { className: "w-4 h-4 text-red-500" }) })] })] }, E.id)) }) })] }) })] }), r.length > 0 && t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Industries Analytics" }) }), t.jsx(st, { children: t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [t.jsxs("div", { className: "text-center", children: [t.jsx("div", { className: "text-2xl font-bold text-green-600 dark:text-green-400", children: r.filter(E => E.isActive !== !1).length }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Active Industries" })] }), t.jsxs("div", { className: "text-center", children: [t.jsx("div", { className: "text-2xl font-bold text-gray-600 dark:text-gray-400", children: r.filter(E => E.isActive === !1).length }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Inactive Industries" })] })] }) })] })] }) }, Lie = () => { const e = xt(), { dealStatuses: r, addDealStatus: a, updateDealStatus: s, deleteDealStatus: n, isLoading: i } = Br(), [o, c] = h.useState(!1), [u, m] = h.useState(null), [g, f] = h.useState({ name: "", color: "#3B82F6", sortOrder: 0, isActive: !0 }), [y, p] = h.useState(!1), b = () => { f({ name: "", color: "#3B82F6", sortOrder: r.length, isActive: !0 }), c(!1), m(null) }, j = k => { f({ name: k.name, color: k.color || "#3B82F6", sortOrder: k.sortOrder, isActive: k.isActive }), m(k.id || null), c(!0) }, v = async k => { if (k.preventDefault(), !g.name.trim()) { R.error("Status name is required"); return } p(!0); try { u ? (await s(u, g), R.success("Deal status updated successfully")) : (await a(g), R.success("Deal status added successfully")), b() } catch (C) { console.error("Failed to save deal status:", C), R.error("Failed to save deal status") } finally { p(!1) } }, S = async k => { if (window.confirm("Are you sure you want to delete this status? This may affect deals using it.")) try { await n(k), R.success("Deal status deleted successfully") } catch (E) { console.error("Failed to delete deal status:", E), R.error("Failed to delete deal status") } }; return i ? t.jsx(Cn, { message: "Loading deal statuses..." }) : t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => e("/business-settings"), className: "p-2", children: t.jsx(pr, { className: "w-4 h-4" }) }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-r from-orange-500 to-red-600 rounded-xl", children: t.jsx(mD, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Deal Status Management" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Configure dynamic stages and statuses for deals" })] })] })] }), !o && t.jsxs(ue, { variant: "PRIMARY", onClick: () => { b(), c(!0) }, className: "flex items-center gap-2", children: [t.jsx($t, { className: "w-4 h-4" }), "Add Status"] })] }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [t.jsx("div", { className: "lg:col-span-2", children: t.jsxs(Ae, { children: [t.jsxs(Pt, { className: "flex flex-row items-center justify-between border-b pb-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Available Statuses" }), t.jsxs("div", { className: "text-xs text-gray-500 font-medium uppercase tracking-wider", children: [r.length, " Total"] })] }), t.jsx(st, { className: "pt-6", children: r.length === 0 ? t.jsxs("div", { className: "text-center py-12", children: [t.jsx(qo, { className: "w-12 h-12 text-gray-300 mx-auto mb-4" }), t.jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "No statuses defined yet." })] }) : t.jsx("div", { className: "space-y-3", children: r.sort((k, E) => k.sortOrder - E.sortOrder).map(k => t.jsxs("div", { className: "flex items-center justify-between p-4 border border-gray-100 dark:border-gray-700 rounded-xl hover:shadow-md transition-all bg-white dark:bg-gray-800 group", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx("div", { className: "w-3 h-3 rounded-full shadow-sm", style: { backgroundColor: k.color || "#3B82F6" } }), t.jsxs("div", { children: [t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("span", { className: "font-bold text-gray-900 dark:text-white", children: k.name }), !k.isActive && t.jsx("span", { className: "text-[10px] px-2 py-0.5 bg-gray-100 dark:bg-gray-800 text-gray-400 rounded-full font-bold", children: "INACTIVE" })] }), t.jsxs("p", { className: "text-xs text-gray-400 mt-0.5", children: ["Order: ", k.sortOrder] })] })] }), t.jsxs("div", { className: "flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => j(k), className: "p-1.5 h-8 w-8 hover:bg-blue-50 hover:text-blue-600 rounded-lg", children: t.jsx(Qo, { className: "w-4 h-4" }) }), t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => S(k.id), className: "p-1.5 h-8 w-8 hover:bg-red-50 hover:text-red-600 rounded-lg", children: t.jsx(yt, { className: "w-4 h-4" }) })] })] }, k.id)) }) })] }) }), t.jsx("div", { children: o ? t.jsxs(Ae, { className: "sticky top-6 border-2 border-orange-100 dark:border-orange-900/30", children: [t.jsx(Pt, { className: "border-b pb-4", children: t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: u ? "Edit Status" : "New Status" }) }), t.jsx(st, { className: "pt-6", children: t.jsxs("form", { onSubmit: v, className: "space-y-5", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-bold text-gray-500 uppercase mb-1.5 tracking-wider", children: "Status Name" }), t.jsx("input", { type: "text", value: g.name, onChange: k => f(E => ({ ...E, name: k.target.value })), className: "w-full p-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 outline-none transition-all", placeholder: "e.g., Contacted, Qualified, Won", required: !0 })] }), t.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-bold text-gray-500 uppercase mb-1.5 tracking-wider", children: "Color" }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("input", { type: "color", value: g.color, onChange: k => f(E => ({ ...E, color: k.target.value })), className: "w-10 h-10 p-0.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white cursor-pointer" }), t.jsx("span", { className: "text-xs font-mono text-gray-500 uppercase", children: g.color })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-bold text-gray-500 uppercase mb-1.5 tracking-wider", children: "Sort Order" }), t.jsx("input", { type: "number", value: g.sortOrder, onChange: k => f(E => ({ ...E, sortOrder: parseInt(k.target.value) || 0 })), className: "w-full p-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 outline-none" })] })] }), t.jsxs("div", { className: "flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700", children: [t.jsx("input", { type: "checkbox", id: "isActive", checked: g.isActive, onChange: k => f(E => ({ ...E, isActive: k.target.checked })), className: "w-4 h-4 rounded text-orange-600 focus:ring-orange-500" }), t.jsx("label", { htmlFor: "isActive", className: "text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer", children: "Status is Active" })] }), t.jsxs("div", { className: "flex gap-3 pt-2", children: [t.jsx(ue, { type: "submit", variant: "PRIMARY", className: "flex-1", disabled: y, children: y ? "Saving..." : u ? "Update Status" : "Add Status" }), t.jsx(ue, { type: "button", variant: "GHOST", onClick: b, className: "flex-1", children: "Cancel" })] })] }) })] }) : t.jsx(Ae, { className: "bg-orange-50/50 dark:bg-orange-900/10 border-dashed border-2 border-orange-200 dark:border-orange-800", children: t.jsxs(st, { className: "p-8 text-center", children: [t.jsx(qo, { className: "w-12 h-12 text-orange-200 dark:text-orange-800 mx-auto mb-4" }), t.jsx("h4", { className: "font-bold text-gray-900 dark:text-white mb-2", children: "Management" }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mb-6", children: 'Select a status to edit or click "Add Status" to create a new one. These statuses are used for deals.' }), t.jsxs(ue, { variant: "OUTLINE", size: "SM", onClick: () => { b(), c(!0) }, className: "w-full border-orange-200 text-orange-600 hover:bg-orange-50", children: [t.jsx($t, { className: "w-4 h-4 mr-2" }), "New Status"] })] }) }) })] })] }) }, Rie = () => { const { t: e } = kn(), [r, a] = h.useState("email-templates"), [s, n] = h.useState([]), [i, o] = h.useState([]), [c, u] = h.useState([]), [m, g] = h.useState([]), [f, y] = h.useState(!0), [p, b] = h.useState(!1), [j, v] = h.useState(!1), [S, k] = h.useState(!1), [E, C] = h.useState(!1), [N, A] = h.useState(null), [D, I] = h.useState(null), [$, B] = h.useState(null), [W, M] = h.useState(null), [q, V] = h.useState("ALL"), [X, se] = h.useState(null), [le, ee] = h.useState({ name: "", type: "EMAIL", subject: "", content: "", isDefault: !1 }), [L, z] = h.useState({ name: "", category: "WELCOME", subject: "", htmlContent: "", textContent: "", variables: {}, isActive: !0, isDefault: !1, status: "ACTIVE" }), [T, _] = h.useState({ name: "", triggerType: "LEAD_CREATED", templateId: "", conditions: "", delay: 0 }), [H, U] = h.useState({ name: "", type: "EMAIL", config: "", isDefault: !1 }); h.useEffect(() => { K() }, []); const K = async () => { y(!0); try { await Promise.all([Z(), J(), te(), G()]) } catch (ce) { console.error("Error fetching communication data:", ce) } finally { y(!1) } }, Z = async () => { try { const ce = localStorage.getItem("authToken") || localStorage.getItem("token"), jt = await (await fetch("/api/communications/templates", { headers: { Authorization: ce ? `Bearer ${ce}` : "" } })).json(); jt.success && n(jt.data.templates) } catch (ce) { console.error("Error fetching templates:", ce) } }, J = async () => { try { const ce = localStorage.getItem("authToken") || localStorage.getItem("token"), jt = await (await fetch("/api/business-settings/email-templates", { headers: { Authorization: ce ? `Bearer ${ce}` : "" } })).json(); jt.success && o(jt.data) } catch (ce) { console.error("Error fetching email templates:", ce) } }, te = async () => { try { const ce = localStorage.getItem("authToken") || localStorage.getItem("token"), jt = await (await fetch("/api/automation/workflows", { headers: { Authorization: ce ? `Bearer ${ce}` : "" } })).json(); jt.success && u(jt.data.automations) } catch (ce) { console.error("Error fetching automations:", ce) } }, G = async () => { try { const ce = localStorage.getItem("authToken") || localStorage.getItem("token"), jt = await (await fetch("/api/communication/providers", { headers: { Authorization: ce ? `Bearer ${ce}` : "" } })).json(); jt.success && g(jt.data.providers) } catch (ce) { console.error("Error fetching providers:", ce) } }, de = async () => { try { const ce = localStorage.getItem("authToken") || localStorage.getItem("token"), Xe = N ? `/api/communications/templates/${N.id}` : "/api/communications/templates", Q = await (await fetch(Xe, { method: N ? "PUT" : "POST", headers: { Authorization: ce ? `Bearer ${ce}` : "", "Content-Type": "application/json" }, body: JSON.stringify(le) })).json(); Q.success ? (R.success(N ? "Template updated successfully" : "Template created successfully"), b(!1), A(null), ee({ name: "", type: "EMAIL", subject: "", content: "", isDefault: !1 }), await Z()) : R.error(Q.message || "Failed to save template") } catch (ce) { console.error("Error saving template:", ce), R.error("Failed to save template") } }, Te = async ce => { if (confirm("Are you sure you want to delete this template?")) try { const Xe = localStorage.getItem("authToken") || localStorage.getItem("token"), Q = await (await fetch(`/api/communications/templates/${ce}`, { method: "DELETE", headers: { Authorization: Xe ? `Bearer ${Xe}` : "" } })).json(); Q.success ? (R.success("Template deleted successfully"), await Z()) : R.error(Q.message || "Failed to delete template") } catch (Xe) { console.error("Error deleting template:", Xe), R.error("Failed to delete template") } }, pe = ce => { A(ce), ee({ name: ce.name, type: ce.type, subject: ce.subject || "", content: ce.content, isDefault: ce.isDefault }), b(!0) }, He = ce => { switch (ce) { case "EMAIL": return t.jsx(ir, { className: "h-4 w-4 text-blue-500" }); case "WHATSAPP": return t.jsx(Fr, { className: "h-4 w-4 text-green-500" }); case "SMS": return t.jsx(Fr, { className: "h-4 w-4 text-purple-500" }); default: return t.jsx(Fr, { className: "h-4 w-4 text-gray-500" }) } }, ne = ce => { switch (ce) { case "LEAD_CREATED": return "Lead Created"; case "LEAD_UPDATED": return "Lead Updated"; case "LEAD_STATUS_CHANGED": return "Status Changed"; case "LEAD_ASSIGNED": return "Lead Assigned"; default: return ce } }, De = ce => ({ WELCOME: "Welcome Email", EMAIL_VERIFICATION: "Email Verification", EMAIL_CHANGE_CONFIRMATION: "Email Change Confirmation", PASSWORD_RESET: "Password Reset", WELCOME_SERIES: "Welcome Series", ONBOARDING: "Onboarding", NEWSLETTER: "Newsletter", MARKETING: "Marketing", SYSTEM_NOTIFICATION: "System Notification", CUSTOM: "Custom" })[ce] || ce, $e = async () => { try { const ce = localStorage.getItem("authToken") || localStorage.getItem("token"), Xe = localStorage.getItem("userId"), jt = Xe ? parseInt(Xe, 10) : 1, Q = D ? `/api/business-settings/email-templates/${D.id}` : "/api/business-settings/email-templates", Le = { ...L, createdBy: jt }; if (L.isDefault) { const pt = i.filter(Y => Y.category === L.category && Y.isDefault && Y.id !== D?.id); for (const Y of pt) await fetch(`/api/business-settings/email-templates/${Y.id}`, { method: "PUT", headers: { Authorization: ce ? `Bearer ${ce}` : "", "Content-Type": "application/json" }, body: JSON.stringify({ ...Y, isDefault: !1 }) }) } const et = await (await fetch(Q, { method: D ? "PUT" : "POST", headers: { Authorization: ce ? `Bearer ${ce}` : "", "Content-Type": "application/json" }, body: JSON.stringify(Le) })).json(); et.success ? (R.success(D ? "Email template updated successfully" : "Email template created successfully"), v(!1), I(null), z({ name: "", category: "WELCOME", subject: "", htmlContent: "", textContent: "", variables: {}, isActive: !0, isDefault: !1, status: "ACTIVE" }), await J()) : R.error(et.message || "Failed to save email template") } catch (ce) { console.error("Error saving email template:", ce), R.error("Failed to save email template") } }, Et = async ce => { if (confirm("Are you sure you want to delete this email template?")) try { const Xe = localStorage.getItem("authToken") || localStorage.getItem("token"), Q = await (await fetch(`/api/business-settings/email-templates/${ce}`, { method: "DELETE", headers: { Authorization: Xe ? `Bearer ${Xe}` : "" } })).json(); Q.success ? (R.success("Email template deleted successfully"), await J()) : R.error(Q.message || "Failed to delete email template") } catch (Xe) { console.error("Error deleting email template:", Xe), R.error("Failed to delete email template") } }, Bt = ce => { I(ce), z({ name: ce.name, category: ce.category, subject: ce.subject, htmlContent: ce.htmlContent, textContent: ce.textContent, variables: ce.variables || {}, isActive: ce.isActive, isDefault: ce.isDefault, status: ce.status }), v(!0) }, Ft = async ce => { try { const Xe = localStorage.getItem("authToken") || localStorage.getItem("token"), Q = await (await fetch(`/api/business-settings/email-templates/preview/${ce.id}`, { headers: { Authorization: Xe ? `Bearer ${Xe}` : "" } })).json(); Q.success && se(Q.data) } catch (Xe) { console.error("Error previewing email template:", Xe), R.error("Failed to preview email template") } }, mt = q === "ALL" ? i : i.filter(ce => ce.category === q); return f ? t.jsx("div", { className: "flex items-center justify-center h-64", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red" }) }) : t.jsxs("div", { className: "space-y-6", children: [t.jsx("div", { className: "flex items-center justify-between", children: t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Communication Settings" }) }), t.jsx("div", { className: "border-b border-gray-200 dark:border-gray-700", children: t.jsx("nav", { className: "-mb-px flex space-x-8", children: [{ id: "email-templates", label: "Email Templates", icon: Mt }, { id: "templates", label: "Message Templates", icon: ir }].map(ce => { const Xe = ce.icon; return t.jsxs("button", { onClick: () => a(ce.id), className: `flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors ${r === ce.id ? "border-weconnect-red text-weconnect-red" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`, children: [t.jsx(Xe, { className: "h-4 w-4 mr-2" }), ce.label] }, ce.id) }) }) }), r === "email-templates" && t.jsxs("div", { className: "space-y-6", children: [t.jsxs("div", { className: "flex justify-between items-center", children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "System Email Templates" }), t.jsxs("button", { onClick: () => { I(null), z({ name: "", category: "WELCOME", subject: "", htmlContent: "", textContent: "", variables: {}, isActive: !0, isDefault: !1, status: "ACTIVE" }), v(!0) }, className: "bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center", children: [t.jsx($t, { className: "h-4 w-4 mr-2" }), "New Email Template"] })] }), t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx(Zc, { className: "h-4 w-4 text-gray-500" }), t.jsxs("select", { value: q, onChange: ce => V(ce.target.value), className: "px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", children: [t.jsx("option", { value: "ALL", children: "All Categories" }), t.jsx("option", { value: "WELCOME", children: "Welcome" }), t.jsx("option", { value: "EMAIL_VERIFICATION", children: "Email Verification" }), t.jsx("option", { value: "EMAIL_CHANGE_CONFIRMATION", children: "Email Change" }), t.jsx("option", { value: "PASSWORD_RESET", children: "Password Reset" }), t.jsx("option", { value: "WELCOME_SERIES", children: "Welcome Series" }), t.jsx("option", { value: "ONBOARDING", children: "Onboarding" }), t.jsx("option", { value: "NEWSLETTER", children: "Newsletter" }), t.jsx("option", { value: "MARKETING", children: "Marketing" }), t.jsx("option", { value: "SYSTEM_NOTIFICATION", children: "System Notification" }), t.jsx("option", { value: "CUSTOM", children: "Custom" })] })] }), t.jsx("div", { className: "grid grid-cols-1 gap-4", children: mt.map(ce => t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6", children: t.jsxs("div", { className: "flex items-start justify-between", children: [t.jsxs("div", { className: "flex items-start space-x-4 flex-1", children: [t.jsx("div", { className: "flex-shrink-0", children: t.jsx(Mt, { className: "h-5 w-5 text-blue-500" }) }), t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center space-x-2 mb-2", children: [t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white", children: ce.name }), t.jsx("span", { className: "bg-purple-100 text-purple-800 text-xs font-medium px-2.5 py-0.5 rounded-full", children: De(ce.category) }), ce.isDefault && t.jsx("span", { className: "bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full", children: "Default" }), !ce.isActive && t.jsx("span", { className: "bg-gray-100 text-gray-800 text-xs font-medium px-2.5 py-0.5 rounded-full", children: "Inactive" }), t.jsx("span", { className: `text-xs font-medium px-2.5 py-0.5 rounded-full ${ce.status === "ACTIVE" ? "bg-green-100 text-green-800" : ce.status === "DRAFT" ? "bg-yellow-100 text-yellow-800" : "bg-gray-100 text-gray-800"}`, children: ce.status })] }), t.jsxs("p", { className: "text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: ["Subject: ", ce.subject] }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mb-2", children: ce.htmlContent.length > 150 ? `${ce.htmlContent.substring(0, 150).replace(/<[^>]*>/g, "")}...` : ce.htmlContent.replace(/<[^>]*>/g, "") }), ce.variables && Object.keys(ce.variables).length > 0 && t.jsxs("div", { className: "flex flex-wrap gap-1 mb-2", children: [t.jsx("span", { className: "text-xs text-gray-500", children: "Variables: " }), Object.keys(ce.variables).map(Xe => t.jsxs("span", { className: "text-xs bg-gray-100 text-gray-700 px-2 py-0.5 rounded", children: ["{", Xe, "}"] }, Xe))] }), t.jsxs("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: ["Updated: ", new Date(ce.updatedAt).toLocaleDateString()] })] })] }), t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx("button", { onClick: () => Ft(ce), className: "text-gray-400 hover:text-green-600 transition-colors", title: "Preview", children: t.jsx(Ht, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: () => Bt(ce), className: "text-gray-400 hover:text-blue-600 transition-colors", title: "Edit", children: t.jsx(Jt, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: () => Et(ce.id), className: "text-gray-400 hover:text-red-600 transition-colors", title: "Delete", children: t.jsx(yt, { className: "h-4 w-4" }) })] })] }) }, ce.id)) }), mt.length === 0 && t.jsxs("div", { className: "text-center py-12", children: [t.jsx(Mt, { className: "h-12 w-12 text-gray-400 mx-auto mb-4" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: q === "ALL" ? "No email templates found" : `No templates found for ${De(q)}` }), t.jsx("button", { onClick: () => { I(null), z({ name: "", category: q !== "ALL" ? q : "WELCOME", subject: "", htmlContent: "", textContent: "", variables: {}, isActive: !0, isDefault: !1, status: "ACTIVE" }), v(!0) }, className: "bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors", children: "Create your first email template" })] })] }), r === "templates" && t.jsxs("div", { className: "space-y-6", children: [t.jsxs("div", { className: "flex justify-between items-center", children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Message Templates" }), t.jsxs("button", { onClick: () => { A(null), ee({ name: "", type: "EMAIL", subject: "", content: "", isDefault: !1 }), b(!0) }, className: "bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center", children: [t.jsx($t, { className: "h-4 w-4 mr-2" }), "New Template"] })] }), t.jsx("div", { className: "grid grid-cols-1 gap-4", children: s.map(ce => t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6", children: t.jsxs("div", { className: "flex items-start justify-between", children: [t.jsxs("div", { className: "flex items-start space-x-4 flex-1", children: [t.jsx("div", { className: "flex-shrink-0", children: He(ce.type) }), t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center space-x-2 mb-2", children: [t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white", children: ce.name }), ce.isDefault && t.jsx("span", { className: "bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full", children: "Default" }), !ce.isActive && t.jsx("span", { className: "bg-gray-100 text-gray-800 text-xs font-medium px-2.5 py-0.5 rounded-full", children: "Inactive" })] }), ce.subject && t.jsxs("p", { className: "text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: ["Subject: ", ce.subject] }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mb-2", children: ce.content.length > 100 ? `${ce.content.substring(0, 100)}...` : ce.content }), t.jsxs("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: ["Created by ", ce.createdByUser.firstName, " ", ce.createdByUser.lastName, " on", " ", new Date(ce.createdAt).toLocaleDateString()] })] })] }), t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx("button", { onClick: () => pe(ce), className: "text-gray-400 hover:text-blue-600 transition-colors", children: t.jsx(Jt, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: () => Te(ce.id), className: "text-gray-400 hover:text-red-600 transition-colors", children: t.jsx(yt, { className: "h-4 w-4" }) })] })] }) }, ce.id)) }), s.length === 0 && t.jsxs("div", { className: "text-center py-12", children: [t.jsx(ir, { className: "h-12 w-12 text-gray-400 mx-auto mb-4" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: "No templates found" }), t.jsx("button", { onClick: () => b(!0), className: "bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors", children: "Create your first template" })] })] }), r === "automations" && t.jsxs("div", { className: "space-y-6", children: [t.jsxs("div", { className: "flex justify-between items-center", children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Automation Rules" }), t.jsxs("button", { onClick: () => k(!0), className: "bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center", children: [t.jsx($t, { className: "h-4 w-4 mr-2" }), "New Automation"] })] }), t.jsx("div", { className: "grid grid-cols-1 gap-4", children: c.map(ce => t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6", children: t.jsxs("div", { className: "flex items-start justify-between", children: [t.jsxs("div", { className: "flex items-start space-x-4 flex-1", children: [t.jsx("div", { className: "flex-shrink-0", children: t.jsx(Rl, { className: "h-5 w-5 text-purple-500" }) }), t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center space-x-2 mb-2", children: [t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white", children: ce.name }), !ce.isActive && t.jsx("span", { className: "bg-gray-100 text-gray-800 text-xs font-medium px-2.5 py-0.5 rounded-full", children: "Inactive" })] }), t.jsxs("div", { className: "space-y-1", children: [t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: [t.jsx("strong", { children: "Trigger:" }), " ", ne(ce.triggerType)] }), t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: [t.jsx("strong", { children: "Template:" }), " ", ce.template.name, " (", ce.template.type, ")"] }), ce.delay && ce.delay > 0 && t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: [t.jsx("strong", { children: "Delay:" }), " ", ce.delay, " minutes"] })] }), t.jsxs("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-2", children: ["Created on ", new Date(ce.createdAt).toLocaleDateString()] })] })] }), t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx("button", { className: "text-gray-400 hover:text-blue-600 transition-colors", children: t.jsx(Jt, { className: "h-4 w-4" }) }), t.jsx("button", { className: "text-gray-400 hover:text-red-600 transition-colors", children: t.jsx(yt, { className: "h-4 w-4" }) })] })] }) }, ce.id)) }), c.length === 0 && t.jsxs("div", { className: "text-center py-12", children: [t.jsx(Rl, { className: "h-12 w-12 text-gray-400 mx-auto mb-4" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: "No automations found" }), t.jsx("button", { onClick: () => k(!0), className: "bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors", children: "Create your first automation" })] })] }), j && t.jsx("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4", children: t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto", children: t.jsxs("div", { className: "p-6", children: [t.jsxs("div", { className: "flex items-center justify-between mb-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: D ? "Edit Email Template" : "Create New Email Template" }), t.jsx("button", { onClick: () => { v(!1), se(null) }, className: "text-gray-400 hover:text-gray-600 dark:hover:text-gray-300", children: t.jsx(fa, { className: "h-5 w-5" }) })] }), t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Template Name *" }), t.jsx("input", { type: "text", value: L.name, onChange: ce => z({ ...L, name: ce.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Welcome Email Template" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Category *" }), t.jsxs("select", { value: L.category, onChange: ce => z({ ...L, category: ce.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", children: [t.jsx("option", { value: "WELCOME", children: "Welcome" }), t.jsx("option", { value: "EMAIL_VERIFICATION", children: "Email Verification" }), t.jsx("option", { value: "EMAIL_CHANGE_CONFIRMATION", children: "Email Change Confirmation" }), t.jsx("option", { value: "PASSWORD_RESET", children: "Password Reset" }), t.jsx("option", { value: "WELCOME_SERIES", children: "Welcome Series" }), t.jsx("option", { value: "ONBOARDING", children: "Onboarding" }), t.jsx("option", { value: "NEWSLETTER", children: "Newsletter" }), t.jsx("option", { value: "MARKETING", children: "Marketing" }), t.jsx("option", { value: "SYSTEM_NOTIFICATION", children: "System Notification" }), t.jsx("option", { value: "CUSTOM", children: "Custom" })] })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Email Subject *" }), t.jsx("input", { type: "text", value: L.subject, onChange: ce => z({ ...L, subject: ce.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "{appName} - Welcome {firstName}" }), t.jsxs("p", { className: "text-xs text-gray-500 mt-1", children: ["Use ", "{variableName}", " for dynamic values (e.g., ", "{firstName}", ", ", "{email}", ", ", "{password}", ", ", "{appName}", ")"] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "HTML Content *" }), t.jsx("textarea", { value: L.htmlContent, onChange: ce => z({ ...L, htmlContent: ce.target.value }), rows: 10, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white font-mono text-sm", placeholder: "<p>Hello {firstName},</p><p>Your account has been created...</p>" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Plain Text Content *" }), t.jsx("textarea", { value: L.textContent, onChange: ce => z({ ...L, textContent: ce.target.value }), rows: 8, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white font-mono text-sm", placeholder: "Hello {firstName}, Your account has been created..." })] }), t.jsxs("div", { className: "bg-gray-50 dark:bg-gray-700 p-4 rounded-lg", children: [t.jsx("p", { className: "text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Available Variables:" }), t.jsx("div", { className: "flex flex-wrap gap-2", children: ["firstName", "lastName", "email", "password", "appName", "verificationLink", "resetLink"].map(ce => t.jsxs("button", { type: "button", onClick: () => { const Xe = `{${ce}}`; z(jt => ({ ...jt, htmlContent: jt.htmlContent + Xe, textContent: jt.textContent + Xe, variables: { ...jt.variables, [ce]: !0 } })) }, className: "text-xs bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 text-gray-700 dark:text-gray-300 px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-500", children: ["{", ce, "}"] }, ce)) }), t.jsxs("p", { className: "text-xs text-gray-500 mt-2", children: ["Click on a variable to insert it into your template. Welcome emails should include ", "{email}", " and ", "{password}", " fields."] })] }), t.jsxs("div", { className: "grid grid-cols-3 gap-4", children: [t.jsxs("div", { className: "flex items-center", children: [t.jsx("input", { type: "checkbox", id: "isActive", checked: L.isActive, onChange: ce => z({ ...L, isActive: ce.target.checked }), className: "h-4 w-4 text-weconnect-red focus:ring-weconnect-red border-gray-300 rounded" }), t.jsx("label", { htmlFor: "isActive", className: "ml-2 text-sm text-gray-700 dark:text-gray-300", children: "Active" })] }), t.jsxs("div", { className: "flex items-center", children: [t.jsx("input", { type: "checkbox", id: "isDefault", checked: L.isDefault, onChange: ce => z({ ...L, isDefault: ce.target.checked }), className: "h-4 w-4 text-weconnect-red focus:ring-weconnect-red border-gray-300 rounded" }), t.jsx("label", { htmlFor: "isDefault", className: "ml-2 text-sm text-gray-700 dark:text-gray-300", children: "Set as Default" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Status" }), t.jsxs("select", { value: L.status, onChange: ce => z({ ...L, status: ce.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", children: [t.jsx("option", { value: "DRAFT", children: "Draft" }), t.jsx("option", { value: "PENDING_APPROVAL", children: "Pending Approval" }), t.jsx("option", { value: "APPROVED", children: "Approved" }), t.jsx("option", { value: "ACTIVE", children: "Active" }), t.jsx("option", { value: "ARCHIVED", children: "Archived" })] })] })] })] }), t.jsxs("div", { className: "flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200 dark:border-gray-600", children: [t.jsx("button", { onClick: () => { v(!1), se(null) }, className: "px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors", children: "Cancel" }), t.jsxs("button", { onClick: $e, disabled: !L.name || !L.subject || !L.htmlContent || !L.textContent, className: "px-4 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center", children: [t.jsx(Za, { className: "h-4 w-4 mr-2" }), D ? "Update" : "Create", " Template"] })] })] }) }) }), X && t.jsx("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4", children: t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto", children: t.jsxs("div", { className: "p-6", children: [t.jsxs("div", { className: "flex items-center justify-between mb-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Email Preview" }), t.jsx("button", { onClick: () => se(null), className: "text-gray-400 hover:text-gray-600 dark:hover:text-gray-300", children: t.jsx(fa, { className: "h-5 w-5" }) })] }), t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Subject:" }), t.jsx("p", { className: "text-sm text-gray-900 dark:text-white font-medium", children: X.subject })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "HTML Preview:" }), t.jsx("div", { className: "border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-700", dangerouslySetInnerHTML: { __html: X.htmlContent } })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Plain Text Preview:" }), t.jsx("div", { className: "border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-700 text-sm whitespace-pre-wrap", children: X.textContent })] })] }), t.jsx("div", { className: "flex justify-end mt-6 pt-6 border-t border-gray-200 dark:border-gray-600", children: t.jsx("button", { onClick: () => se(null), className: "px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors", children: "Close" }) })] }) }) }), p && t.jsx("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4", children: t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto", children: t.jsxs("div", { className: "p-6", children: [t.jsxs("div", { className: "flex items-center justify-between mb-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: N ? "Edit Template" : "Create New Template" }), t.jsx("button", { onClick: () => b(!1), className: "text-gray-400 hover:text-gray-600 dark:hover:text-gray-300", children: t.jsx(fa, { className: "h-5 w-5" }) })] }), t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Template Name *" }), t.jsx("input", { type: "text", value: le.name, onChange: ce => ee({ ...le, name: ce.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Welcome Email" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Type *" }), t.jsxs("select", { value: le.type, onChange: ce => ee({ ...le, type: ce.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", children: [t.jsx("option", { value: "EMAIL", children: "Email" }), t.jsx("option", { value: "WHATSAPP", children: "WhatsApp" }), t.jsx("option", { value: "SMS", children: "SMS" })] })] })] }), le.type === "EMAIL" && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Subject *" }), t.jsx("input", { type: "text", value: le.subject, onChange: ce => ee({ ...le, subject: ce.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Welcome to {{companyName}}" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Message Content *" }), t.jsx("textarea", { value: le.content, onChange: ce => ee({ ...le, content: ce.target.value }), rows: 8, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Hi {{leadFirstName}}, welcome to {{companyName}}..." }), t.jsxs("p", { className: "text-xs text-gray-500 mt-1", children: ["Available variables: ", "{{leadFirstName}}, {{leadLastName}}, {{leadEmail}}, {{leadPhone}}, {{leadCompany}}, {{companyName}}, {{assignedUserName}}"] })] }), t.jsxs("div", { className: "flex items-center", children: [t.jsx("input", { type: "checkbox", id: "isDefault", checked: le.isDefault, onChange: ce => ee({ ...le, isDefault: ce.target.checked }), className: "h-4 w-4 text-weconnect-red focus:ring-weconnect-red border-gray-300 rounded" }), t.jsx("label", { htmlFor: "isDefault", className: "ml-2 text-sm text-gray-700 dark:text-gray-300", children: "Set as default template for this type" })] })] }), t.jsxs("div", { className: "flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200 dark:border-gray-600", children: [t.jsx("button", { onClick: () => b(!1), className: "px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors", children: "Cancel" }), t.jsxs("button", { onClick: de, disabled: !le.name || !le.content, className: "px-4 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center", children: [t.jsx(Za, { className: "h-4 w-4 mr-2" }), N ? "Update" : "Create", " Template"] })] })] }) }) })] }) }, O0 = [{ name: "Twilio SMS", type: "SMS", provider: "TWILIO", fields: [{ name: "accountSid", label: "Account SID", type: "text", required: !0, placeholder: "ACxxxxxxx" }, { name: "authToken", label: "Auth Token", type: "password", required: !0 }, { name: "fromPhone", label: "From Phone Number", type: "text", required: !0, placeholder: "+1234567890" }] }, { name: "TextLocal SMS", type: "SMS", provider: "TEXTLOCAL", fields: [{ name: "apiKey", label: "API Key", type: "password", required: !0 }, { name: "sender", label: "Sender Name", type: "text", required: !0, placeholder: "6 chars max" }] }, { name: "MSG91 SMS", type: "SMS", provider: "MSG91", fields: [{ name: "apiKey", label: "API Key", type: "password", required: !0 }, { name: "senderId", label: "Sender ID", type: "text", required: !0 }] }, { name: "WhatsApp Business API", type: "WHATSAPP", provider: "WHATSAPP_BUSINESS", fields: [{ name: "accessToken", label: "Access Token", type: "password", required: !0 }, { name: "phoneNumberId", label: "Phone Number ID", type: "text", required: !0 }, { name: "webhookVerifyToken", label: "Webhook Verify Token", type: "password", required: !0 }] }, { name: "Gupshup WhatsApp", type: "WHATSAPP", provider: "GUPSHUP", fields: [{ name: "apiKey", label: "API Key", type: "password", required: !0 }, { name: "appName", label: "App Name", type: "text", required: !0 }, { name: "source", label: "Source Number", type: "text", required: !0, placeholder: "91xxxxxxxxxx" }] }, { name: "SMTP Email", type: "EMAIL", provider: "SMTP", fields: [{ name: "smtpHost", label: "SMTP Host", type: "text", required: !0, placeholder: "smtp.gmail.com" }, { name: "smtpPort", label: "SMTP Port", type: "number", required: !0, placeholder: "587" }, { name: "smtpUser", label: "SMTP Username", type: "email", required: !0 }, { name: "smtpPassword", label: "SMTP Password", type: "password", required: !0 }, { name: "fromName", label: "From Name", type: "text", required: !0, placeholder: "Your Company Name" }, { name: "fromEmail", label: "From Email", type: "email", required: !0 }] }, { name: "SendGrid Email", type: "EMAIL", provider: "SENDGRID", fields: [{ name: "apiKey", label: "API Key", type: "password", required: !0 }, { name: "fromName", label: "From Name", type: "text", required: !0 }, { name: "fromEmail", label: "From Email", type: "email", required: !0 }] }, { name: "Mailgun Email", type: "EMAIL", provider: "MAILGUN", fields: [{ name: "apiKey", label: "API Key", type: "password", required: !0 }, { name: "domain", label: "Domain", type: "text", required: !0, placeholder: "mg.yourdomain.com" }, { name: "fromName", label: "From Name", type: "text", required: !0 }, { name: "fromEmail", label: "From Email", type: "email", required: !0 }] }], Mie = () => { const { t: e } = kn(), [r, a] = h.useState([]), [s, n] = h.useState(!0), [i, o] = h.useState(!1), [c, u] = h.useState(null), [m, g] = h.useState(null), [f, y] = h.useState({}), [p, b] = h.useState(null), [j, v] = h.useState({ name: "", type: "EMAIL", provider: "", config: {}, isActive: !0, isDefault: !1 }); h.useEffect(() => { S() }, []); const S = async () => { n(!0); try { const M = localStorage.getItem("authToken") || localStorage.getItem("token"), V = await (await fetch("/api/communication/providers", { headers: { Authorization: M ? `Bearer ${M}` : "" } })).json(); V.success && a(V.data.providers || []) } catch (M) { console.error("Error fetching providers:", M), a([]) } finally { n(!1) } }, k = async () => { try { const M = localStorage.getItem("authToken") || localStorage.getItem("token"), q = c ? `/api/communication/providers/${c.id}` : "/api/communication/providers", X = await (await fetch(q, { method: c ? "PUT" : "POST", headers: { Authorization: M ? `Bearer ${M}` : "", "Content-Type": "application/json" }, body: JSON.stringify(j) })).json(); X.success ? (R.success(c ? "Provider updated successfully" : "Provider created successfully"), o(!1), u(null), g(null), N(), await S()) : R.error(X.message || "Failed to save provider") } catch (M) { console.error("Error saving provider:", M), R.error("Failed to save provider") } }, E = async M => { if (confirm("Are you sure you want to delete this provider?")) try { const q = localStorage.getItem("authToken") || localStorage.getItem("token"), X = await (await fetch(`/api/communication/providers/${M}`, { method: "DELETE", headers: { Authorization: q ? `Bearer ${q}` : "" } })).json(); X.success ? (R.success("Provider deleted successfully"), await S()) : R.error(X.message || "Failed to delete provider") } catch (q) { console.error("Error deleting provider:", q), R.error("Failed to delete provider") } }, C = async M => { b(M.id); try { const q = localStorage.getItem("authToken") || localStorage.getItem("token"), X = await (await fetch(`/api/communication/providers/${M.id}/test`, { method: "POST", headers: { Authorization: q ? `Bearer ${q}` : "", "Content-Type": "application/json" }, body: JSON.stringify({ testType: M.type.toLowerCase(), recipient: M.type === "EMAIL" ? "test@example.com" : "+919999999999" }) })).json(); X.success ? R.success("Test message sent successfully!") : R.error(X.message || "Test failed") } catch (q) { console.error("Error testing provider:", q), R.error("Test failed") } finally { b(null) } }, N = () => { v({ name: "", type: "EMAIL", provider: "", config: {}, isActive: !0, isDefault: !1 }) }, A = M => { u(M), v({ ...M }); const q = M.config || {}, V = O0.find(X => X.provider === q.provider) || O0.find(X => X.name === M.name) || O0.find(X => X.type === M.type); g(V || null), o(!0) }, D = M => { g(M), v(q => ({ ...q, name: M.name, type: M.type, provider: M.provider, config: { provider: M.provider } })) }, I = (M, q) => { v(V => ({ ...V, config: { ...V.config, [M]: q } })) }, $ = M => { y(q => ({ ...q, [M]: !q[M] })) }, B = M => { switch (M) { case "EMAIL": return t.jsx(ir, { className: "h-5 w-5 text-blue-500" }); case "WHATSAPP": return t.jsx(Fr, { className: "h-5 w-5 text-green-500" }); case "SMS": return t.jsx(sU, { className: "h-5 w-5 text-purple-500" }); default: return t.jsx(Hi, { className: "h-5 w-5 text-gray-500" }) } }, W = M => M.isActive ? M.isDefault ? t.jsx("span", { className: "bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full", children: "Default" }) : t.jsx("span", { className: "bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full", children: "Active" }) : t.jsx("span", { className: "bg-gray-100 text-gray-800 text-xs font-medium px-2.5 py-0.5 rounded-full", children: "Inactive" }); return s ? t.jsx("div", { className: "flex items-center justify-center h-64", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red" }) }) : t.jsxs("div", { className: "space-y-6 p-6", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Communication API Settings" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mt-1", children: "Configure WhatsApp, SMS, and Email gateways for automated communications" })] }), t.jsxs("button", { onClick: () => { N(), u(null), g(null), o(!0) }, className: "bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center", children: [t.jsx($t, { className: "h-4 w-4 mr-2" }), "Add Provider"] })] }), t.jsx("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-6 mb-8", children: ["EMAIL", "WHATSAPP", "SMS"].map(M => { const q = r.filter(X => X.type === M), V = q.filter(X => X.isActive).length; return t.jsx(Ae, { variant: "OUTLINED", children: t.jsx(Pt, { className: "pb-3", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [B(M), t.jsxs("div", { children: [t.jsx("h3", { className: "font-semibold text-gray-900 dark:text-white", children: M === "EMAIL" ? "Email" : M === "WHATSAPP" ? "WhatsApp" : "SMS" }), t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: [V, " active / ", q.length, " total"] })] })] }), t.jsxs("div", { className: "text-right", children: [t.jsx("p", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: q.length }), t.jsx("p", { className: "text-xs text-gray-500", children: "providers" })] })] }) }) }, M) }) }), t.jsx("div", { className: "space-y-4", children: r.length === 0 ? t.jsx(Ae, { variant: "OUTLINED", children: t.jsxs(st, { className: "text-center py-12", children: [t.jsx(Hi, { className: "h-12 w-12 text-gray-400 mx-auto mb-4" }), t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: "No Communication Providers Configured" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: "Add your first communication provider to start sending automated messages" }), t.jsx("button", { onClick: () => { N(), o(!0) }, className: "bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors", children: "Get Started" })] }) }) : r.map(M => t.jsx(Ae, { variant: "ELEVATED", children: t.jsx(st, { className: "p-6", children: t.jsxs("div", { className: "flex items-start justify-between", children: [t.jsxs("div", { className: "flex items-start space-x-4 flex-1", children: [t.jsx("div", { className: "flex-shrink-0", children: B(M.type) }), t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center space-x-3 mb-2", children: [t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white", children: M.name }), W(M)] }), t.jsxs("div", { className: "space-y-1 mb-3", children: [t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: [t.jsx("span", { className: "font-medium", children: "Provider:" }), " ", M.config?.provider || "Unknown"] }), t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: [t.jsx("span", { className: "font-medium", children: "Type:" }), " ", M.type] }), M.createdAt && t.jsxs("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: ["Created on ", new Date(M.createdAt).toLocaleDateString()] })] }), t.jsxs("div", { className: "bg-gray-50 dark:bg-gray-700 rounded-lg p-3 text-sm", children: [t.jsx("p", { className: "font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Configuration:" }), t.jsxs("div", { className: "space-y-1", children: [Object.entries(M.config).slice(0, 3).map(([q, V]) => t.jsxs("div", { className: "flex justify-between", children: [t.jsxs("span", { className: "text-gray-600 dark:text-gray-400 capitalize", children: [q.replace(/([A-Z])/g, " $1").toLowerCase(), ":"] }), t.jsx("span", { className: "text-gray-900 dark:text-white", children: q.toLowerCase().includes("password") || q.toLowerCase().includes("token") || q.toLowerCase().includes("key") ? "" : String(V).length > 20 ? String(V).substring(0, 20) + "..." : String(V) })] }, q)), Object.keys(M.config).length > 3 && t.jsxs("p", { className: "text-xs text-gray-500", children: ["+", Object.keys(M.config).length - 3, " more fields"] })] })] })] })] }), t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx("button", { onClick: () => C(M), disabled: p === M.id, className: "text-gray-400 hover:text-blue-600 transition-colors disabled:opacity-50", title: "Test provider", children: p === M.id ? t.jsx("div", { className: "animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full" }) : t.jsx(Ll, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: () => A(M), className: "text-gray-400 hover:text-blue-600 transition-colors", title: "Edit provider", children: t.jsx(Jt, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: () => E(M.id), className: "text-gray-400 hover:text-red-600 transition-colors", title: "Delete provider", children: t.jsx(yt, { className: "h-4 w-4" }) })] })] }) }) }, M.id)) }), i && t.jsx("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4", children: t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto", children: t.jsxs("div", { className: "p-6", children: [t.jsxs("div", { className: "flex items-center justify-between mb-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: c ? "Edit Provider" : "Add Communication Provider" }), t.jsx("button", { onClick: () => o(!1), className: "text-gray-400 hover:text-gray-600 dark:hover:text-gray-300", children: t.jsx(fa, { className: "h-5 w-5" }) })] }), t.jsxs("div", { className: "space-y-6", children: [!c && !m && t.jsxs("div", { children: [t.jsx("h4", { className: "text-md font-medium text-gray-900 dark:text-white mb-4", children: "Choose a Provider Template" }), t.jsx("div", { className: "grid grid-cols-1 gap-3", children: O0.map((M, q) => t.jsx("button", { onClick: () => D(M), className: "text-left p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-weconnect-red hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors", children: t.jsxs("div", { className: "flex items-center gap-3", children: [B(M.type), t.jsxs("div", { children: [t.jsx("p", { className: "font-medium text-gray-900 dark:text-white", children: M.name }), t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: [M.type, "  ", M.fields.length, " configuration fields"] })] })] }) }, q)) })] }), (m || c) && t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Provider Name *" }), t.jsx("input", { type: "text", value: j.name, onChange: M => v(q => ({ ...q, name: M.target.value })), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "My WhatsApp Provider" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Provider Type" }), t.jsx("input", { type: "text", value: `${j.type} (${j.config?.provider || j.provider || "Unknown"})`, disabled: !0, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-400" })] })] }), m && t.jsxs("div", { className: "space-y-4", children: [t.jsx("h4", { className: "text-md font-medium text-gray-900 dark:text-white", children: "Configuration" }), m.fields.map(M => t.jsxs("div", { children: [t.jsxs("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: [M.label, " ", M.required && "*"] }), t.jsxs("div", { className: "relative", children: [t.jsx("input", { type: M.type === "password" && f[M.name] ? "text" : M.type, value: j.config?.[M.name] || "", onChange: q => I(M.name, M.type === "number" ? Number(q.target.value) : q.target.value), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: M.placeholder, required: M.required }), M.type === "password" && t.jsx("button", { type: "button", onClick: () => $(M.name), className: "absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600", children: f[M.name] ? t.jsx(bn, { className: "h-4 w-4" }) : t.jsx(Ht, { className: "h-4 w-4" }) })] }), M.description && t.jsx("p", { className: "text-xs text-gray-500 mt-1", children: M.description })] }, M.name))] }), t.jsxs("div", { className: "space-y-3", children: [t.jsxs("div", { className: "flex items-center", children: [t.jsx("input", { type: "checkbox", id: "isActive", checked: j.isActive, onChange: M => v(q => ({ ...q, isActive: M.target.checked })), className: "h-4 w-4 text-weconnect-red focus:ring-weconnect-red border-gray-300 rounded" }), t.jsx("label", { htmlFor: "isActive", className: "ml-2 text-sm text-gray-700 dark:text-gray-300", children: "Enable this provider" })] }), t.jsxs("div", { className: "flex items-center", children: [t.jsx("input", { type: "checkbox", id: "isDefault", checked: j.isDefault, onChange: M => v(q => ({ ...q, isDefault: M.target.checked })), className: "h-4 w-4 text-weconnect-red focus:ring-weconnect-red border-gray-300 rounded" }), t.jsx("label", { htmlFor: "isDefault", className: "ml-2 text-sm text-gray-700 dark:text-gray-300", children: "Set as default provider for this type" })] })] })] })] }), t.jsxs("div", { className: "flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200 dark:border-gray-600", children: [t.jsx("button", { onClick: () => { o(!1), g(null), N() }, className: "px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors", children: "Cancel" }), (m || c) && t.jsxs("button", { onClick: k, disabled: !j.name, className: "px-4 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center", children: [t.jsx(Za, { className: "h-4 w-4 mr-2" }), c ? "Update" : "Create", " Provider"] })] })] }) }) })] }) }, _ie = () => { const e = xt(), [r, a] = h.useState([]), [s, n] = h.useState(!0), [i, o] = h.useState(!1), [c, u] = h.useState(null), [m, g] = h.useState({ name: "", description: "", headerContent: "", footerContent: "", termsAndConditions: "", validityDays: 30, showTax: !0, showDiscount: !0, logoPosition: "left", isDefault: !1, isActive: !0 }); h.useEffect(() => { f() }, []); const f = async () => { try { n(!0); const k = await It.get("/api/business-settings/quotation-templates"); k.data.success && a(k.data.data) } catch (k) { console.error("Failed to fetch quotation templates:", k), R.error("Failed to load quotation templates") } finally { n(!1) } }, y = async k => { if (k.preventDefault(), !m.name?.trim()) { R.error("Template name is required"); return } try { c ? (await It.put(`/api/business-settings/quotation-templates/${c.id}`, m)).data.success && (R.success("Template updated successfully"), o(!1), u(null), v(), f()) : (await It.post("/api/business-settings/quotation-templates", m)).data.success && (R.success("Template created successfully"), o(!1), v(), f()) } catch (E) { console.error("Failed to save template:", E), R.error(E.response?.data?.message || "Failed to save template") } }, p = k => { u(k), g(k), o(!0) }, b = async k => { try { (await It.put(`/api/business-settings/quotation-templates/${k}/set-default`)).data.success && (R.success("Default template updated successfully"), f()) } catch (E) { console.error("Failed to set default template:", E), R.error("Failed to set default template") } }, j = async k => { if (window.confirm("Are you sure you want to delete this template? This action cannot be undone.")) try { (await It.delete(`/api/business-settings/quotation-templates/${k}`)).data.success && (R.success("Template deleted successfully"), f()) } catch (E) { console.error("Failed to delete template:", E), R.error("Failed to delete template") } }, v = () => { g({ name: "", description: "", headerContent: "", footerContent: "", termsAndConditions: "", validityDays: 30, showTax: !0, showDiscount: !0, logoPosition: "left", isDefault: !1, isActive: !0 }) }, S = (k, E) => { g(C => ({ ...C, [k]: E })) }; return s ? t.jsx("div", { className: "flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-red-500" }) }) : i ? t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsx("div", { className: "flex items-center justify-between", children: t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "sm", onClick: () => { o(!1), u(null), v() }, className: "p-2", children: t.jsx(pr, { className: "w-4 h-4" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: c ? "Edit Template" : "Create Template" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Configure quotation template settings" })] })] }) }), t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Template Settings" }) }), t.jsx(st, { children: t.jsxs("form", { onSubmit: y, className: "space-y-6", children: [t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Template Name *" }), t.jsx("input", { type: "text", value: m.name || "", onChange: k => S("name", k.target.value), className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent", placeholder: "e.g., Standard Quotation", required: !0 })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Validity (Days)" }), t.jsx("input", { type: "number", value: m.validityDays || 30, onChange: k => S("validityDays", parseInt(k.target.value)), className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent", min: "1" })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Description" }), t.jsx("textarea", { value: m.description || "", onChange: k => S("description", k.target.value), className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent", placeholder: "Brief description of this template", rows: 2 })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Header Content" }), t.jsx("textarea", { value: m.headerContent || "", onChange: k => S("headerContent", k.target.value), className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent", placeholder: "Header text or HTML (will appear at top of quotation)", rows: 3 })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Footer Content" }), t.jsx("textarea", { value: m.footerContent || "", onChange: k => S("footerContent", k.target.value), className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent", placeholder: "Footer text or HTML (will appear at bottom of quotation)", rows: 3 })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Terms and Conditions" }), t.jsx("textarea", { value: m.termsAndConditions || "", onChange: k => S("termsAndConditions", k.target.value), className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent", placeholder: "Enter terms and conditions for this quotation", rows: 5 })] }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-6", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Logo Position" }), t.jsxs("select", { value: m.logoPosition || "left", onChange: k => S("logoPosition", k.target.value), className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent", children: [t.jsx("option", { value: "left", children: "Left" }), t.jsx("option", { value: "center", children: "Center" }), t.jsx("option", { value: "right", children: "Right" })] })] }), t.jsx("div", { className: "flex items-end", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx("input", { type: "checkbox", id: "showTax", checked: m.showTax || !1, onChange: k => S("showTax", k.target.checked), className: "w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500" }), t.jsx("label", { htmlFor: "showTax", className: "ml-2 text-sm text-gray-700 dark:text-gray-300", children: "Show Tax" })] }) }), t.jsx("div", { className: "flex items-end", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx("input", { type: "checkbox", id: "showDiscount", checked: m.showDiscount || !1, onChange: k => S("showDiscount", k.target.checked), className: "w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500" }), t.jsx("label", { htmlFor: "showDiscount", className: "ml-2 text-sm text-gray-700 dark:text-gray-300", children: "Show Discount" })] }) })] }), t.jsxs("div", { className: "space-y-3", children: [t.jsxs("div", { className: "flex items-center", children: [t.jsx("input", { type: "checkbox", id: "isActive", checked: m.isActive || !1, onChange: k => S("isActive", k.target.checked), className: "w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500" }), t.jsx("label", { htmlFor: "isActive", className: "ml-2 text-sm text-gray-700 dark:text-gray-300", children: "Active (make this template available for use)" })] }), t.jsxs("div", { className: "flex items-center", children: [t.jsx("input", { type: "checkbox", id: "isDefault", checked: m.isDefault || !1, onChange: k => S("isDefault", k.target.checked), className: "w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500" }), t.jsx("label", { htmlFor: "isDefault", className: "ml-2 text-sm text-gray-700 dark:text-gray-300", children: "Set as default template" })] })] }), t.jsxs("div", { className: "flex items-center gap-3 pt-4", children: [t.jsxs(ue, { type: "submit", className: "flex items-center gap-2", children: [t.jsx(vf, { className: "w-4 h-4" }), c ? "Update Template" : "Create Template"] }), t.jsx(ue, { type: "button", variant: "OUTLINE", onClick: () => { o(!1), u(null), v() }, children: "Cancel" })] })] }) })] })] }) : t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "sm", onClick: () => e("/business-settings"), className: "p-2", children: t.jsx(pr, { className: "w-4 h-4" }) }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-r from-red-500 to-pink-600 rounded-xl", children: t.jsx(Mt, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Quotation Templates" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Manage quotation templates for your business" })] })] })] }), t.jsxs(ue, { onClick: () => { v(), o(!0) }, className: "flex items-center gap-2", children: [t.jsx($t, { className: "w-4 h-4" }), "Create Template"] })] }), r.length === 0 ? t.jsx(Ae, { children: t.jsxs(st, { className: "text-center py-12", children: [t.jsx(Mt, { className: "w-16 h-16 text-gray-400 mx-auto mb-4" }), t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-2", children: "No Templates Yet" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-6", children: "Create your first quotation template to get started" }), t.jsxs(ue, { onClick: () => o(!0), className: "flex items-center gap-2 mx-auto", children: [t.jsx($t, { className: "w-4 h-4" }), "Create Template"] })] }) }) : t.jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6", children: r.map(k => t.jsxs(Ae, { className: "group hover:shadow-xl transition-all duration-300", children: [t.jsx(Pt, { className: "pb-3", children: t.jsx("div", { className: "flex items-start justify-between", children: t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center gap-2 mb-2", children: [t.jsx("h3", { className: "font-semibold text-gray-900 dark:text-white", children: k.name }), k.isDefault && t.jsxs("span", { className: "inline-flex items-center gap-1 px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs font-medium", children: [t.jsx(Qu, { className: "w-3 h-3 fill-current" }), "Default"] })] }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 line-clamp-2", children: k.description || "No description" })] }) }) }), t.jsxs(st, { className: "pt-0", children: [t.jsxs("div", { className: "mb-4 bg-gray-100 dark:bg-gray-800 rounded-lg p-4 space-y-2 text-xs text-gray-600 dark:text-gray-400", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("span", { children: "Validity:" }), t.jsxs("span", { className: "font-medium", children: [k.validityDays, " days"] })] }), t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("span", { children: "Show Tax:" }), t.jsx("span", { className: "font-medium", children: k.showTax ? "Yes" : "No" })] }), t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("span", { children: "Show Discount:" }), t.jsx("span", { className: "font-medium", children: k.showDiscount ? "Yes" : "No" })] }), t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("span", { children: "Status:" }), t.jsx("span", { className: k.isActive ? "text-green-600" : "text-red-600", children: k.isActive ? "Active" : "Inactive" })] })] }), t.jsxs("div", { className: "grid grid-cols-2 gap-2", children: [!k.isDefault && t.jsxs(ue, { variant: "OUTLINE", size: "sm", onClick: () => b(k.id), className: "flex items-center gap-2 justify-center", children: [t.jsx(Qu, { className: "w-4 h-4" }), "Set Default"] }), t.jsxs(ue, { variant: "OUTLINE", size: "sm", onClick: () => p(k), className: "flex items-center gap-2 justify-center", children: [t.jsx(Qo, { className: "w-4 h-4" }), "Edit"] }), !k.isDefault && t.jsxs(ue, { variant: "OUTLINE", size: "sm", onClick: () => j(k.id), className: "flex items-center gap-2 justify-center text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 col-span-2", children: [t.jsx(yt, { className: "w-4 h-4" }), "Delete"] })] })] })] }, k.id)) }), t.jsx(Ae, { className: "border-l-4 border-l-blue-500", children: t.jsx(st, { className: "p-4", children: t.jsxs("div", { className: "flex items-start gap-3", children: [t.jsx("div", { className: "p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg", children: t.jsx(Mt, { className: "w-5 h-5 text-blue-600 dark:text-blue-400" }) }), t.jsxs("div", { children: [t.jsx("h4", { className: "font-semibold text-gray-900 dark:text-white mb-1", children: "About Quotation Templates" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Quotation templates define the design and structure of quotations generated in deal management. When you create a quotation from a deal, it will use the default template's settings for header, footer, terms, and display options. Products and services will be automatically fetched from the deal." })] })] }) }) })] }) }, $ie = () => { const e = xt(), { companySettings: r, updateCompanySettings: a, currencySettings: s, isLoading: n } = Br(), [i, o] = h.useState(null), c = [{ id: "professional", name: "Professional Invoice", description: "Clean modern layout with logo left, invoice details right", type: "professional" }, { id: "template1", name: "Values - Standard Left", description: "Clean layout with logo on the left", type: "standard-left" }, { id: "template2", name: "Classic - Logo Right", description: "Traditional layout with logo on the right", type: "classic-right" }, { id: "template3", name: "Bold Header", description: "Full-width colored header with green theme", type: "bold-header" }, { id: "template5", name: "Minimalist", description: "Simple, data-focused black & white", type: "minimalist" }], u = f => { const y = ({ children: b, className: j = "" }) => t.jsx("div", { className: `bg-white rounded shadow-sm w-full h-full flex flex-col overflow-hidden text-gray-800 relative ${j}`, children: b }), p = () => t.jsxs("div", { className: "mt-auto pt-4 border-t border-gray-100 pb-2", children: [t.jsx("div", { className: "text-[7px] font-bold text-gray-400 uppercase tracking-wider mb-1", children: "Notes & Terms" }), t.jsx("div", { className: "text-[6px] text-gray-400 line-clamp-2 italic", children: "Thank you for your business. Please pay within 15 days." })] }); switch (f) { case "professional": return t.jsxs(y, { className: "p-6 text-[9px]", children: [t.jsx("div", { className: "absolute top-0 left-0 right-0 h-1 bg-orange-600" }), t.jsxs("div", { className: "flex justify-between items-start mb-6", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "h-10 w-10 bg-orange-500 rounded flex items-center justify-center shadow-sm", children: t.jsx("span", { className: "text-white text-[12px] font-bold", children: "YL" }) }), t.jsx("div", { className: "font-bold text-gray-900", children: "YOURLOGO" })] }), t.jsxs("div", { className: "text-right", children: [t.jsx("div", { className: "text-[18px] font-bold text-gray-900 tracking-wider", children: "INVOICE" }), t.jsx("div", { className: "text-[9px] text-gray-500", children: "#INV-2024-001" })] })] }), t.jsxs("div", { className: "flex justify-between mb-6", children: [t.jsxs("div", { className: "bg-orange-50 p-2 rounded w-48", children: [t.jsx("div", { className: "text-[7px] font-bold text-orange-600 mb-1", children: "BILL TO" }), t.jsx("div", { className: "font-bold text-gray-900", children: "Acme Corp Ltd." }), t.jsx("div", { className: "text-gray-500", children: "New Delhi, India" })] }), t.jsxs("div", { className: "border border-gray-100 p-2 rounded w-32", children: [t.jsx("div", { className: "text-[7px] font-bold text-gray-400", children: "DATE" }), t.jsx("div", { className: "font-bold text-gray-900", children: "16 Dec 2024" })] })] }), t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "bg-gray-900 text-white flex text-[7px] font-bold py-1.5 px-2 rounded-t", children: [t.jsx("div", { className: "flex-1", children: "ITEM" }), t.jsx("div", { className: "w-12 text-center", children: "QTY" }), t.jsx("div", { className: "w-20 text-right", children: "TOTAL" })] }), t.jsxs("div", { className: "flex text-[8px] py-1.5 px-2 border-b border-gray-50", children: [t.jsx("div", { className: "flex-1", children: "Web Development" }), t.jsx("div", { className: "w-12 text-center", children: "1" }), t.jsxs("div", { className: "w-20 text-right font-bold", children: [s?.symbol || "", "50,000"] })] })] }), t.jsx("div", { className: "flex justify-end mt-4 mb-4", children: t.jsxs("div", { className: "bg-orange-600 text-white px-4 py-2 rounded flex justify-between w-40 items-center", children: [t.jsx("span", { className: "text-[7px] font-bold", children: "TOTAL" }), t.jsxs("span", { className: "text-[12px] font-bold", children: [s?.symbol || "", "50,000"] })] }) }), t.jsx(p, {})] }); case "standard-left": return t.jsxs(y, { className: "p-6 text-[9px]", children: [t.jsxs("div", { className: "bg-blue-50 -mx-6 -mt-6 p-6 mb-6 flex justify-between items-center border-b border-blue-100", children: [t.jsx("div", { className: "font-bold text-blue-700 text-[12px]", children: "VALUES" }), t.jsx("div", { className: "text-[14px] font-bold text-blue-900", children: "INVOICE" })] }), t.jsxs("div", { className: "flex justify-between mb-6", children: [t.jsxs("div", { children: [t.jsx("div", { className: "text-[7px] font-bold text-blue-600 mb-1", children: "BILL TO" }), t.jsx("div", { className: "font-bold", children: "Tech Solutions" })] }), t.jsx("div", { className: "text-right text-gray-500", children: "#INV-2024-100" })] }), t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "bg-blue-600 text-white flex text-[7px] font-bold py-1 px-2", children: [t.jsx("div", { className: "flex-1", children: "DESCRIPTION" }), t.jsx("div", { className: "w-20 text-right", children: "AMOUNT" })] }), t.jsxs("div", { className: "flex py-2 px-2 border-b border-gray-100", children: [t.jsx("div", { className: "flex-1", children: "Premium Package" }), t.jsxs("div", { className: "w-20 text-right font-bold", children: [s?.symbol || "", "35,000"] })] })] }), t.jsx("div", { className: "flex justify-end mt-4", children: t.jsxs("div", { className: "text-right", children: [t.jsx("div", { className: "text-[7px] font-bold text-gray-400", children: "TOTAL DUE" }), t.jsxs("div", { className: "text-[16px] font-bold text-blue-600", children: [s?.symbol || "", "35,000"] })] }) }), t.jsx(p, {})] }); case "classic-right": return t.jsxs(y, { className: "p-6 text-[9px] font-serif", children: [t.jsxs("div", { className: "flex justify-between items-end mb-2", children: [t.jsx("div", { className: "text-[20px] font-bold tracking-tighter", children: "INVOICE" }), t.jsx("div", { className: "text-indigo-800 font-bold", children: "CLASSIC" })] }), t.jsx("div", { className: "h-0.5 bg-indigo-900 mb-6" }), t.jsxs("div", { className: "flex justify-between mb-8", children: [t.jsxs("div", { children: [t.jsx("div", { className: "text-[7px] text-indigo-900 font-sans font-bold mb-1", children: "BILL TO" }), t.jsx("div", { className: "font-bold text-[10px]", children: "Global Enterprises" })] }), t.jsx("div", { className: "text-right italic text-gray-400", children: "16 Dec 2024" })] }), t.jsxs("div", { className: "flex-1 font-sans", children: [t.jsxs("div", { className: "bg-indigo-50 border-y border-indigo-100 flex text-[7px] font-bold py-2 px-2", children: [t.jsx("div", { className: "flex-1", children: "DESCRIPTION" }), t.jsx("div", { className: "w-20 text-right", children: "TOTAL" })] }), t.jsxs("div", { className: "flex py-2 px-2 border-b border-gray-100", children: [t.jsx("div", { className: "flex-1", children: "Brand Strategy" }), t.jsxs("div", { className: "w-20 text-right font-bold", children: [s?.symbol || "", "45,000"] })] })] }), t.jsx("div", { className: "flex justify-end mt-4", children: t.jsxs("div", { className: "bg-indigo-800 text-white px-4 py-2 rounded-sm shadow-md w-32", children: [t.jsx("div", { className: "text-[6px] opacity-70", children: "PAYABLE" }), t.jsxs("div", { className: "text-[12px] font-bold", children: [s?.symbol || "", "45,000"] })] }) }), t.jsx(p, {})] }); case "bold-header": return t.jsxs(y, { className: "p-0 text-[9px]", children: [t.jsxs("div", { className: "h-20 bg-gray-50 border-b border-gray-100 p-6 flex justify-between items-center", children: [t.jsx("div", { className: "font-bold text-gray-900", children: "YOURLOGO" }), t.jsxs("div", { className: "text-right", children: [t.jsx("div", { className: "text-[7px] font-bold text-emerald-600", children: "BILL TO" }), t.jsx("div", { className: "font-bold text-gray-900", children: "Industrial Corp" })] })] }), t.jsxs("div", { className: "p-6 flex-1 flex flex-col", children: [t.jsxs("div", { className: "bg-emerald-600 text-white p-3 rounded-lg mb-6 flex justify-between items-center", children: [t.jsxs("div", { children: [t.jsx("div", { className: "text-[6px] opacity-80", children: "INVOICE" }), t.jsx("div", { className: "text-[10px] font-bold", children: "#2024-100" })] }), t.jsxs("div", { className: "text-right", children: [t.jsx("div", { className: "text-[6px] opacity-80", children: "DUE" }), t.jsx("div", { className: "text-[10px] font-bold", children: "30 Dec" })] })] }), t.jsxs("div", { className: "border-b-2 border-emerald-50 text-[7px] font-bold text-gray-400 py-1 mb-2 flex", children: [t.jsx("div", { className: "flex-1", children: "ITEM" }), t.jsx("div", { className: "w-20 text-right", children: "PRICE" })] }), t.jsxs("div", { className: "flex py-2 border-b border-gray-50", children: [t.jsx("div", { className: "flex-1 font-bold", children: "Gold Membership Plan" }), t.jsxs("div", { className: "w-20 text-right font-bold", children: [s?.symbol || "", "50,000"] })] }), t.jsx("div", { className: "mt-auto flex justify-end pt-4", children: t.jsxs("div", { className: "text-right", children: [t.jsx("div", { className: "text-[7px] font-bold text-gray-400", children: "TOTAL DUE" }), t.jsxs("div", { className: "text-[20px] font-bold text-emerald-600", children: [s?.symbol || "", "50,000"] })] }) }), t.jsx(p, {})] })] }); case "minimalist": return t.jsxs(y, { className: "p-8 border-[2px] border-gray-900 text-[9px] flex flex-col", children: [t.jsxs("div", { className: "flex flex-col items-center mb-6", children: [t.jsx("div", { className: "w-8 h-8 bg-gray-900 rounded-full mb-2" }), t.jsx("div", { className: "text-[18px] font-black tracking-widest text-center", children: "INVOICE" })] }), t.jsxs("div", { className: "flex justify-between mb-6 border-b-2 border-gray-900 pb-4", children: [t.jsx("div", { children: t.jsx("div", { className: "font-bold", children: "Client Co." }) }), t.jsx("div", { className: "text-right font-mono font-bold", children: "INV-001" })] }), t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex font-bold border-b border-gray-100 pb-2 mb-2", children: [t.jsx("div", { className: "flex-1", children: "SERVICES" }), t.jsx("div", { className: "w-20 text-right", children: "TOTAL" })] }), t.jsxs("div", { className: "flex mb-2", children: [t.jsx("div", { className: "flex-1", children: "Consulting" }), t.jsxs("div", { className: "w-20 text-right font-bold", children: [s?.symbol || "", "60,000"] })] })] }), t.jsx("div", { className: "border-t-2 border-gray-900 pt-4 text-right", children: t.jsxs("div", { className: "text-[24px] font-black", children: [s?.symbol || "", "60,000"] }) }), t.jsx(p, {})] }); default: return null } }, m = async f => { try { await a({ invoiceTemplate: f }), R.success("Invoice template updated successfully") } catch (y) { console.error("Failed to update invoice template:", y), R.error("Failed to update invoice template") } }; if (n) return t.jsx(Cn, { message: "Loading settings..." }); const g = r?.invoiceTemplate || "template1"; return t.jsxs(t.Fragment, { children: [t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => e("/business-settings"), className: "p-2", children: t.jsx(pr, { className: "w-4 h-4" }) }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-r from-red-500 to-pink-600 rounded-xl", children: t.jsx(Mt, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Invoice Templates" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Select the design for your invoices" })] })] })] }), t.jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-10", children: c.map(f => { const y = g === f.id; return t.jsx("div", { className: `group relative cursor-pointer transition-all duration-300 transform hover:-translate-y-1 ${y ? "ring-2 ring-blue-500 ring-offset-2 dark:ring-offset-gray-900 rounded-xl" : ""}`, onClick: () => m(f.id), children: t.jsxs(Ae, { className: "h-full overflow-hidden border-0 shadow-lg hover:shadow-xl transition-shadow bg-gray-50 dark:bg-gray-800/50", children: [t.jsxs("div", { className: "h-96 relative border-b border-gray-100 dark:border-gray-800 p-10 flex justify-center items-center bg-gray-100 dark:bg-gray-900/50", children: [t.jsx("div", { className: "w-72 h-[22rem] shadow-2xl transform transition-transform group-hover:scale-105", children: u(f.type) }), t.jsx("button", { onClick: p => { p.stopPropagation(), o(f.type) }, className: "absolute top-3 right-3 bg-white dark:bg-gray-800 p-2 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-all duration-300 hover:bg-blue-50 dark:hover:bg-blue-900/30 hover:scale-110 z-20", title: "Preview Invoice Design", children: t.jsx(Ht, { className: "w-4 h-4 text-blue-500" }) }), y && t.jsx("div", { className: "absolute inset-0 bg-blue-500/10 flex items-center justify-center backdrop-blur-[1px]", children: t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-full p-2 shadow-lg mb-8", children: t.jsx(Nb, { className: "w-8 h-8 text-blue-500" }) }) })] }), t.jsxs(st, { className: "p-4 bg-white dark:bg-gray-800 relative z-10", children: [t.jsxs("div", { className: "flex items-center justify-between mb-2", children: [t.jsx("h3", { className: `font-semibold text-sm ${y ? "text-blue-600 dark:text-blue-400" : "text-gray-900 dark:text-white"}`, children: f.name }), y && t.jsx("span", { className: "text-[10px] font-bold uppercase tracking-wider bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-2 py-0.5 rounded-full", children: "Active" })] }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 line-clamp-2", children: f.description })] })] }) }, f.id) }) }), t.jsx(Ae, { className: "bg-blue-50 dark:bg-blue-900/10 border-blue-100 dark:border-blue-900/30", children: t.jsxs(st, { className: "p-4 flex items-start gap-3", children: [t.jsx(eU, { className: "w-5 h-5 text-blue-500 mt-0.5" }), t.jsxs("div", { children: [t.jsx("h4", { className: "font-medium text-blue-900 dark:text-blue-100 mb-1", children: "About Invoice Templates" }), t.jsx("p", { className: "text-sm text-blue-700 dark:text-blue-300", children: "The selected template will be automatically applied to all PDF invoices and quotations generated from the system. content layout and branding will be adjusted according to the chosen style." })] })] }) })] }), i && t.jsx("div", { className: "fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4", onClick: () => o(null), children: t.jsxs("div", { className: "bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden", onClick: f => f.stopPropagation(), children: [t.jsxs("div", { className: "flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg", children: t.jsx(Mt, { className: "w-5 h-5 text-white" }) }), t.jsxs("div", { children: [t.jsx("h3", { className: "font-bold text-lg text-gray-900 dark:text-white", children: "Invoice Design Preview" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: c.find(f => f.type === i)?.name })] })] }), t.jsx("button", { onClick: () => o(null), className: "p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors", children: t.jsx(fa, { className: "w-5 h-5 text-gray-500" }) })] }), t.jsx("div", { className: "p-8 bg-gray-100 dark:bg-gray-800/50 flex justify-center items-center min-h-[500px]", children: t.jsx("div", { className: "w-[420px] h-[560px] shadow-2xl rounded-lg overflow-hidden transform hover:scale-[1.02] transition-transform duration-300", children: t.jsx("div", { className: "bg-white w-full h-full flex flex-col", children: u(i) }) }) }), t.jsxs("div", { className: "p-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center", children: [t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: 'Click "Use Template" below or click outside to close' }), t.jsxs("div", { className: "flex gap-3", children: [t.jsx(ue, { variant: "SECONDARY", size: "SM", onClick: () => o(null), children: "Close" }), t.jsx(ue, { variant: "PRIMARY", size: "SM", onClick: () => { const f = c.find(y => y.type === i); f && (m(f.id), o(null)) }, children: "Use This Template" })] })] })] }) })] }) }, Uie = () => { const e = xt(), [r, a] = h.useState({ quotePrefix: "Q-", quoteSuffix: "", quotePad: 6, invoicePrefix: "INV-", invoiceSuffix: "", invoicePad: 6, quoteNumberingEnabled: !0, invoiceNumberingEnabled: !0 }), [s, n] = h.useState(!0), [i, o] = h.useState(!1); h.useEffect(() => { c() }, []); const c = async () => { try { const f = await ie.get("/business-settings/numbering"); f.data.success && a(f.data.data) } catch (f) { console.error("Error fetching numbering settings:", f), R.error("Failed to load numbering settings") } finally { n(!1) } }, u = (f, y) => { a(p => ({ ...p, [f]: y })) }, m = async f => { f.preventDefault(), o(!0); try { (await ie.put("/business-settings/numbering", r)).data.success && R.success("Numbering settings updated successfully") } catch (y) { console.error("Failed to update numbering settings:", y), R.error(y.response?.data?.message || "Failed to update numbering settings") } finally { o(!1) } }, g = (f, y, p, b = 1) => `${f}${String(b).padStart(p, "0")}${y}`; return s ? t.jsx(Cn, { message: "Loading numbering settings..." }) : t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => e("/business-settings"), className: "p-2", children: t.jsx(pr, { className: "w-4 h-4" }) }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-r from-red-500 to-pink-600 rounded-xl", children: t.jsx(lD, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Document Numbering" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Configure prefixes, suffixes, and numbering formats for quotations and invoices" })] })] })] }), t.jsxs("form", { onSubmit: m, className: "space-y-6", children: [t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(Mt, { className: "w-5 h-5" }), "Quotation Numbering"] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: r.quoteNumberingEnabled ? "Enabled" : "Disabled" }), t.jsxs("label", { className: "relative inline-flex items-center cursor-pointer", children: [t.jsx("input", { type: "checkbox", checked: r.quoteNumberingEnabled, onChange: f => u("quoteNumberingEnabled", f.target.checked), className: "sr-only peer" }), t.jsx("div", { className: "w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600" })] })] })] }) }), t.jsxs(st, { className: "space-y-4", children: [t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Prefix *" }), t.jsx("input", { type: "text", value: r.quotePrefix, onChange: f => u("quotePrefix", f.target.value), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "Q-", required: !0 }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Characters before the number (e.g., Q-, QUOTE-)" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Suffix" }), t.jsx("input", { type: "text", value: r.quoteSuffix, onChange: f => u("quoteSuffix", f.target.value), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "-2025" }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Characters after the number (e.g., -2025, /2025)" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Zero Padding *" }), t.jsx("input", { type: "number", value: r.quotePad, onChange: f => u("quotePad", parseInt(f.target.value) || 6), min: "1", max: "10", className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", required: !0 }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Number of digits (e.g., 6 = Q-000001)" })] })] }), t.jsxs("div", { className: "bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4", children: [t.jsx("h4", { className: "text-sm font-medium text-blue-900 dark:text-blue-100 mb-2", children: "Preview" }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4 text-sm", children: [t.jsxs("div", { children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "First quotation:" }), t.jsx("p", { className: "font-mono font-semibold text-blue-700 dark:text-blue-300", children: g(r.quotePrefix, r.quoteSuffix, r.quotePad, 1) })] }), t.jsxs("div", { children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "100th quotation:" }), t.jsx("p", { className: "font-mono font-semibold text-blue-700 dark:text-blue-300", children: g(r.quotePrefix, r.quoteSuffix, r.quotePad, 100) })] }), t.jsxs("div", { children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "1000th quotation:" }), t.jsx("p", { className: "font-mono font-semibold text-blue-700 dark:text-blue-300", children: g(r.quotePrefix, r.quoteSuffix, r.quotePad, 1e3) })] })] })] })] })] }), t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx($i, { className: "w-5 h-5" }), "Invoice Numbering"] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: r.invoiceNumberingEnabled ? "Enabled" : "Disabled" }), t.jsxs("label", { className: "relative inline-flex items-center cursor-pointer", children: [t.jsx("input", { type: "checkbox", checked: r.invoiceNumberingEnabled, onChange: f => u("invoiceNumberingEnabled", f.target.checked), className: "sr-only peer" }), t.jsx("div", { className: "w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600" })] })] })] }) }), t.jsxs(st, { className: "space-y-4", children: [t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Prefix *" }), t.jsx("input", { type: "text", value: r.invoicePrefix, onChange: f => u("invoicePrefix", f.target.value), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "INV-", required: !0 }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Characters before the number (e.g., INV-, INVOICE-)" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Suffix" }), t.jsx("input", { type: "text", value: r.invoiceSuffix, onChange: f => u("invoiceSuffix", f.target.value), className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "-2025" }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Characters after the number (e.g., -2025, /2025)" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Zero Padding *" }), t.jsx("input", { type: "number", value: r.invoicePad, onChange: f => u("invoicePad", parseInt(f.target.value) || 6), min: "1", max: "10", className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", required: !0 }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Number of digits (e.g., 6 = INV-000001)" })] })] }), t.jsxs("div", { className: "bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4", children: [t.jsx("h4", { className: "text-sm font-medium text-green-900 dark:text-green-100 mb-2", children: "Preview" }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4 text-sm", children: [t.jsxs("div", { children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "First invoice:" }), t.jsx("p", { className: "font-mono font-semibold text-green-700 dark:text-green-300", children: g(r.invoicePrefix, r.invoiceSuffix, r.invoicePad, 1) })] }), t.jsxs("div", { children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "100th invoice:" }), t.jsx("p", { className: "font-mono font-semibold text-green-700 dark:text-green-300", children: g(r.invoicePrefix, r.invoiceSuffix, r.invoicePad, 100) })] }), t.jsxs("div", { children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "1000th invoice:" }), t.jsx("p", { className: "font-mono font-semibold text-green-700 dark:text-green-300", children: g(r.invoicePrefix, r.invoiceSuffix, r.invoicePad, 1e3) })] })] })] })] })] }), t.jsxs("div", { className: "flex gap-4 justify-end", children: [t.jsxs(ue, { type: "button", variant: "OUTLINE", onClick: () => { a({ quotePrefix: "Q-", quoteSuffix: "", quotePad: 6, invoicePrefix: "INV-", invoiceSuffix: "", invoicePad: 6, quoteNumberingEnabled: !0, invoiceNumberingEnabled: !0 }) }, disabled: i, className: "flex items-center gap-2", children: [t.jsx(Sm, { className: "w-4 h-4" }), "Reset to Defaults"] }), t.jsx(ue, { type: "button", variant: "OUTLINE", onClick: () => e("/business-settings"), disabled: i, children: "Cancel" }), t.jsxs(ue, { type: "submit", variant: "PRIMARY", disabled: i, className: "flex items-center gap-2", children: [t.jsx(Za, { className: "w-4 h-4" }), i ? "Saving..." : "Save Settings"] })] })] })] }) }, Fie = () => { const e = xt(), [r, a] = h.useState([]), [s, n] = h.useState(!0), [i, o] = h.useState(!1), [c, u] = h.useState(null), [m, g] = h.useState({ name: "", description: "", content: "", category: "general", isDefault: !1, isActive: !0 }); h.useEffect(() => { f() }, []); const f = async () => { try { n(!0); const k = await It.get("/api/business-settings/terms-and-conditions"); k.data.success && a(k.data.data) } catch (k) { console.error("Failed to fetch terms and conditions:", k), R.error("Failed to load terms and conditions") } finally { n(!1) } }, y = async k => { if (k.preventDefault(), !m.name?.trim()) { R.error("Template name is required"); return } if (!m.content?.trim()) { R.error("Content is required"); return } try { c ? (await It.put(`/api/business-settings/terms-and-conditions/${c.id}`, m)).data.success && (R.success("Template updated successfully"), o(!1), u(null), v(), f()) : (await It.post("/api/business-settings/terms-and-conditions", m)).data.success && (R.success("Template created successfully"), o(!1), v(), f()) } catch (E) { console.error("Failed to save template:", E), R.error(E.response?.data?.message || "Failed to save template") } }, p = k => { u(k), g(k), o(!0) }, b = async k => { try { (await It.put(`/api/business-settings/terms-and-conditions/set-default/${k}`)).data.success && (R.success("Default template updated successfully"), f()) } catch (E) { console.error("Failed to set default template:", E), R.error("Failed to set default template") } }, j = async k => { if (window.confirm("Are you sure you want to delete this template? This action cannot be undone.")) try { (await It.delete(`/api/business-settings/terms-and-conditions/${k}`)).data.success && (R.success("Template deleted successfully"), f()) } catch (E) { console.error("Failed to delete template:", E), R.error("Failed to delete template") } }, v = () => { g({ name: "", description: "", content: "", category: "general", isDefault: !1, isActive: !0 }) }, S = (k, E) => { g(C => ({ ...C, [k]: E })) }; return s ? t.jsx("div", { className: "flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-red-500" }) }) : i ? t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsx("div", { className: "flex items-center justify-between", children: t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => { o(!1), u(null), v() }, className: "p-2", children: t.jsx(pr, { className: "w-4 h-4" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: c ? "Edit Template" : "Create Template" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Configure terms and conditions template settings" })] })] }) }), t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Template Settings" }) }), t.jsx(st, { children: t.jsxs("form", { onSubmit: y, className: "space-y-6", children: [t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Template Name *" }), t.jsx("input", { type: "text", value: m.name || "", onChange: k => S("name", k.target.value), className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent", placeholder: "e.g., Standard Terms & Conditions", required: !0 })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Category" }), t.jsxs("select", { value: m.category || "general", onChange: k => S("category", k.target.value), className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent", children: [t.jsx("option", { value: "general", children: "General" }), t.jsx("option", { value: "service", children: "Service Agreement" }), t.jsx("option", { value: "product", children: "Product Sale" }), t.jsx("option", { value: "consultation", children: "Consultation" }), t.jsx("option", { value: "custom", children: "Custom" })] })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Description" }), t.jsx("textarea", { value: m.description || "", onChange: k => S("description", k.target.value), className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent", placeholder: "Brief description of this template", rows: 2 })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Terms and Conditions Content *" }), t.jsx("textarea", { value: m.content || "", onChange: k => S("content", k.target.value), className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent", placeholder: "Enter the full terms and conditions text here...", rows: 15, required: !0 }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "This content will be displayed in quotations and invoices. You can use HTML formatting if needed." })] }), t.jsxs("div", { className: "space-y-3", children: [t.jsxs("div", { className: "flex items-center", children: [t.jsx("input", { type: "checkbox", id: "isActive", checked: m.isActive || !1, onChange: k => S("isActive", k.target.checked), className: "w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500" }), t.jsx("label", { htmlFor: "isActive", className: "ml-2 text-sm text-gray-700 dark:text-gray-300", children: "Active (make this template available for use)" })] }), t.jsxs("div", { className: "flex items-center", children: [t.jsx("input", { type: "checkbox", id: "isDefault", checked: m.isDefault || !1, onChange: k => S("isDefault", k.target.checked), className: "w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500" }), t.jsx("label", { htmlFor: "isDefault", className: "ml-2 text-sm text-gray-700 dark:text-gray-300", children: "Set as default template" })] })] }), t.jsxs("div", { className: "flex items-center gap-3 pt-4", children: [t.jsxs(ue, { type: "submit", className: "flex items-center gap-2", children: [t.jsx(vf, { className: "w-4 h-4" }), c ? "Update Template" : "Create Template"] }), t.jsx(ue, { type: "button", variant: "OUTLINE", onClick: () => { o(!1), u(null), v() }, children: "Cancel" })] })] }) })] })] }) : t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "sm", onClick: () => e("/business-settings"), className: "p-2", children: t.jsx(pr, { className: "w-4 h-4" }) }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-r from-red-500 to-pink-600 rounded-xl", children: t.jsx(Mt, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Terms & Conditions" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Manage terms and conditions templates for your business" })] })] })] }), t.jsxs(ue, { onClick: () => { v(), o(!0) }, className: "flex items-center gap-2", children: [t.jsx($t, { className: "w-4 h-4" }), "Create Template"] })] }), r.length === 0 ? t.jsx(Ae, { children: t.jsxs(st, { className: "text-center py-12", children: [t.jsx(Mt, { className: "w-16 h-16 text-gray-400 mx-auto mb-4" }), t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-2", children: "No Templates Yet" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-6", children: "Create your first terms and conditions template to get started" }), t.jsxs(ue, { onClick: () => o(!0), className: "flex items-center gap-2 mx-auto", children: [t.jsx($t, { className: "w-4 h-4" }), "Create Template"] })] }) }) : t.jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6", children: r.map(k => t.jsxs(Ae, { className: "group hover:shadow-xl transition-all duration-300", children: [t.jsx(Pt, { className: "pb-3", children: t.jsx("div", { className: "flex items-start justify-between", children: t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center gap-2 mb-2", children: [t.jsx("h3", { className: "font-semibold text-gray-900 dark:text-white", children: k.name }), k.isDefault && t.jsxs("span", { className: "inline-flex items-center gap-1 px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs font-medium", children: [t.jsx(Qu, { className: "w-3 h-3 fill-current" }), "Default"] })] }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 line-clamp-2", children: k.description || "No description" })] }) }) }), t.jsxs(st, { className: "pt-0", children: [t.jsxs("div", { className: "mb-4 bg-gray-100 dark:bg-gray-800 rounded-lg p-4 space-y-2 text-xs text-gray-600 dark:text-gray-400", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("span", { children: "Category:" }), t.jsx("span", { className: "font-medium capitalize", children: k.category })] }), t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("span", { children: "Status:" }), t.jsx("span", { className: k.isActive ? "text-green-600" : "text-red-600", children: k.isActive ? "Active" : "Inactive" })] }), t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("span", { children: "Created:" }), t.jsx("span", { className: "font-medium", children: new Date(k.createdAt).toLocaleDateString() })] })] }), t.jsxs("div", { className: "mb-4", children: [t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mb-1", children: "Content Preview:" }), t.jsx("div", { className: "bg-gray-50 dark:bg-gray-800 rounded p-2 max-h-20 overflow-hidden", children: t.jsxs("p", { className: "text-xs text-gray-700 dark:text-gray-300 line-clamp-3", children: [k.content.replace(/<[^>]*>/g, "").substring(0, 150), "..."] }) })] }), t.jsxs("div", { className: "grid grid-cols-2 gap-2", children: [!k.isDefault && t.jsxs(ue, { variant: "OUTLINE", size: "sm", onClick: () => b(k.id), className: "flex items-center gap-2 justify-center", children: [t.jsx(Qu, { className: "w-4 h-4" }), "Set Default"] }), t.jsxs(ue, { variant: "OUTLINE", size: "sm", onClick: () => p(k), className: "flex items-center gap-2 justify-center", children: [t.jsx(Qo, { className: "w-4 h-4" }), "Edit"] }), !k.isDefault && t.jsxs(ue, { variant: "OUTLINE", size: "sm", onClick: () => j(k.id), className: "flex items-center gap-2 justify-center text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 col-span-2", children: [t.jsx(yt, { className: "w-4 h-4" }), "Delete"] })] })] })] }, k.id)) }), t.jsx(Ae, { className: "border-l-4 border-l-blue-500", children: t.jsx(st, { className: "p-4", children: t.jsxs("div", { className: "flex items-start gap-3", children: [t.jsx("div", { className: "p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg", children: t.jsx(Mt, { className: "w-5 h-5 text-blue-600 dark:text-blue-400" }) }), t.jsxs("div", { children: [t.jsx("h4", { className: "font-semibold text-gray-900 dark:text-white mb-1", children: "About Terms & Conditions Templates" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Terms and conditions templates define the legal terms that will be included in your quotations and invoices. When you create a quotation or invoice, it will automatically use the default template's terms. You can create different templates for different types of services or products." })] })] }) }) })] }) }, zie = () => { const [e, r] = h.useState(null), [a, s] = h.useState(!0), [n, i] = h.useState(!1); h.useEffect(() => { o() }, []); const o = async () => { try { const f = await Zn.getPreferences(); r(f) } catch (f) { console.error("Failed to load preferences:", f), R.error("Failed to load preferences") } finally { s(!1) } }, c = async () => { if (e) { i(!0); try { await Zn.updatePreferences(e), R.success("Preferences saved successfully") } catch (f) { console.error("Failed to save preferences:", f), R.error("Failed to save preferences") } finally { i(!1) } } }, u = f => { e && r({ ...e, [f]: !e[f] }) }, m = f => { e && r({ ...e, preferences: { ...e.preferences, [f]: !e.preferences[f] } }) }; if (a) return t.jsx("div", { className: "p-6 flex items-center justify-center min-h-screen", children: t.jsxs("div", { className: "text-center", children: [t.jsx(_i, { className: "w-8 h-8 animate-spin mx-auto mb-2 text-blue-600" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "Loading preferences..." })] }) }); if (!e) return t.jsx("div", { className: "p-6 flex items-center justify-center min-h-screen", children: t.jsx("div", { className: "text-center text-red-600", children: t.jsx("p", { children: "Failed to load preferences. Please try refreshing the page." }) }) }); const g = [{ key: "leadCreated", label: "New Lead Created", description: "When a new lead is added to the system" }, { key: "leadUpdated", label: "Lead Updated", description: "When lead information is modified" }, { key: "leadAssigned", label: "Lead Assigned to You", description: "When a lead is assigned to you" }, { key: "leadStatusChanged", label: "Lead Status Changed", description: "When a lead status changes" }, { key: "clientReply", label: "Client Reply", description: "When a client responds via email or WhatsApp" }, { key: "paymentAdded", label: "Payment Added", description: "When a new payment is recorded" }, { key: "paymentUpdated", label: "Payment Updated", description: "When payment information is modified" }, { key: "taskAssigned", label: "Task Assigned to You", description: "When a task is assigned to you" }, { key: "taskDue", label: "Task Due", description: "When your task is due soon" }, { key: "meetingScheduled", label: "Meeting Scheduled", description: "When a meeting is scheduled with you" }, { key: "followUpDue", label: "Follow-up Due", description: "When a follow-up is due" }, { key: "dealCreated", label: "Deal Created", description: "When a new deal is created" }, { key: "dealWon", label: "Deal Won", description: "When a deal is marked as won" }, { key: "dealLost", label: "Deal Lost", description: "When a deal is marked as lost" }, { key: "quotationSent", label: "Quotation Sent", description: "When a quotation is sent to a client" }, { key: "quotationAccepted", label: "Quotation Accepted", description: "When a client accepts a quotation" }, { key: "invoiceSent", label: "Invoice Sent", description: "When an invoice is sent" }, { key: "invoicePaid", label: "Invoice Paid", description: "When an invoice is marked as paid" }]; return t.jsxs("div", { className: "p-6  mx-auto space-y-6", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Notification Preferences" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mt-1", children: "Manage how you receive notifications" })] }), t.jsx("button", { onClick: c, disabled: n, className: "flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors", children: n ? t.jsxs(t.Fragment, { children: [t.jsx(_i, { className: "h-4 w-4 animate-spin" }), "Saving..."] }) : t.jsxs(t.Fragment, { children: [t.jsx(Za, { className: "h-4 w-4" }), "Save Changes"] }) })] }), t.jsxs("div", { className: "bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 p-6 space-y-4", children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Global Settings" }), t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx(Bl, { className: "h-5 w-5 text-gray-600 dark:text-gray-400" }), t.jsxs("div", { children: [t.jsx("p", { className: "font-medium text-gray-900 dark:text-white", children: "In-App Notifications" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Show notifications in the application" })] })] }), t.jsx("button", { onClick: () => u("inAppEnabled"), className: `relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e.inAppEnabled ? "bg-blue-600" : "bg-gray-300 dark:bg-gray-600"}`, children: t.jsx("span", { className: `inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e.inAppEnabled ? "translate-x-3" : "-translate-x-3"}` }) })] }), t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [e.soundEnabled ? t.jsx(cU, { className: "h-5 w-5 text-gray-600 dark:text-gray-400" }) : t.jsx(dU, { className: "h-5 w-5 text-gray-600 dark:text-gray-400" }), t.jsxs("div", { children: [t.jsx("p", { className: "font-medium text-gray-900 dark:text-white", children: "Notification Sound" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Play sound when new notification arrives" })] })] }), t.jsx("button", { onClick: () => u("soundEnabled"), className: `relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e.soundEnabled ? "bg-blue-600" : "bg-gray-300 dark:bg-gray-600"}`, children: t.jsx("span", { className: `inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e.soundEnabled ? "translate-x-3" : "-translate-x-3"}` }) })] }), t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx(ir, { className: "h-5 w-5 text-gray-600 dark:text-gray-400" }), t.jsxs("div", { children: [t.jsx("p", { className: "font-medium text-gray-900 dark:text-white", children: "Email Notifications" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Send notifications to your email" })] })] }), t.jsx("button", { onClick: () => u("emailEnabled"), className: `relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e.emailEnabled ? "bg-blue-600" : "bg-gray-300 dark:bg-gray-600"}`, children: t.jsx("span", { className: `inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e.emailEnabled ? "translate-x-3" : "-translate-x-3"}` }) })] })] })] }), t.jsxs("div", { className: "bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 p-6", children: [t.jsxs("div", { className: "flex items-center gap-3 mb-4", children: [t.jsx(Kt, { className: "h-5 w-5 text-gray-600 dark:text-gray-400" }), t.jsxs("div", { children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Do Not Disturb" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Silence notifications during specific hours (24-hour format)" })] })] }), t.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Start Hour (0-23)" }), t.jsx("input", { type: "number", min: "0", max: "23", value: e.doNotDisturbStart ?? "", onChange: f => r({ ...e, doNotDisturbStart: f.target.value ? parseInt(f.target.value) : void 0 }), className: "w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "22" }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Example: 22 for 10 PM" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "End Hour (0-23)" }), t.jsx("input", { type: "number", min: "0", max: "23", value: e.doNotDisturbEnd ?? "", onChange: f => r({ ...e, doNotDisturbEnd: f.target.value ? parseInt(f.target.value) : void 0 }), className: "w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "8" }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Example: 8 for 8 AM" })] })] })] }), t.jsxs("div", { className: "bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 p-6", children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "Notification Types" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mb-6", children: "Choose which types of notifications you want to receive" }), t.jsx("div", { className: "space-y-3", children: g.map(f => t.jsxs("div", { className: "flex items-center justify-between py-3 border-b border-gray-100 dark:border-slate-700 last:border-0", children: [t.jsxs("div", { children: [t.jsx("p", { className: "font-medium text-gray-900 dark:text-white", children: f.label }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: f.description })] }), t.jsx("button", { onClick: () => m(f.key), className: `relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ml-4 ${e.preferences[f.key] ? "bg-blue-600" : "bg-gray-300 dark:bg-gray-600"}`, children: t.jsx("span", { className: `inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e.preferences[f.key] ? "translate-x-3" : "-translate-x-3"}` }) })] }, f.key)) })] }), t.jsx("div", { className: "flex justify-end", children: t.jsx("button", { onClick: c, disabled: n, className: "flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium", children: n ? t.jsxs(t.Fragment, { children: [t.jsx(_i, { className: "h-5 w-5 animate-spin" }), "Saving Changes..."] }) : t.jsxs(t.Fragment, { children: [t.jsx(Za, { className: "h-5 w-5" }), "Save All Changes"] }) }) })] }) }; class Bie { async getDashboardSettings() { return (await ie.get("/business-settings/dashboard")).data } async updateDashboardSettings(r) { return (await ie.put("/business-settings/dashboard", r)).data } } const OP = new Bie, qie = () => { const e = xt(), [r, a] = h.useState({ salesPipelineFlow: "Sales Pipeline Flow", performanceScorecard: "Performance Scorecard", dealVelocityVolume: "Deal Velocity & Volume", topPerformersMonth: "Top Performers This Month" }), [s, n] = h.useState(!0), [i, o] = h.useState(!1), [c, u] = h.useState(!1); h.useEffect(() => { (async () => { try { const p = await OP.getDashboardSettings(); p.success && a(p.data) } catch (p) { console.error("Error fetching dashboard settings:", p) } finally { n(!1) } })() }, []); const m = (y, p) => { a(b => ({ ...b, [y]: p })), u(!0) }, g = async () => { o(!0); try { (await OP.updateDashboardSettings(r)).success && u(!1) } catch (y) { console.error("Error saving dashboard settings:", y) } finally { o(!1) } }, f = () => { a({ salesPipelineFlow: "Sales Pipeline Flow", performanceScorecard: "Performance Scorecard", dealVelocityVolume: "Deal Velocity & Volume", topPerformersMonth: "Top Performers This Month" }), u(!0) }; return s ? t.jsx(Cn, { message: "Loading dashboard settings..." }) : t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsxs(ue, { variant: "GHOST", size: "SM", onClick: () => e("/business-settings"), className: "flex items-center gap-2", children: [t.jsx(pr, { className: "w-4 h-4" }), "Back to Settings"] }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl", children: t.jsx(Qa, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Dashboard Settings" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Customize the names of your dashboard sections" })] })] })] }), t.jsxs(Ae, { variant: "ELEVATED", className: "max-w-2xl", children: [t.jsxs(Pt, { children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Section Names" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Change the display names for each dashboard section to match your business terminology." })] }), t.jsxs(st, { className: "space-y-6", children: [t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Sales Pipeline Flow" }), t.jsx($c, { value: r.salesPipelineFlow, onChange: y => m("salesPipelineFlow", y.target.value), placeholder: "Enter section name", className: "w-full" }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "The name for the sales pipeline chart section" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Performance Scorecard" }), t.jsx($c, { value: r.performanceScorecard, onChange: y => m("performanceScorecard", y.target.value), placeholder: "Enter section name", className: "w-full" }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "The name for the performance metrics radial chart section" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Deal Velocity & Volume" }), t.jsx($c, { value: r.dealVelocityVolume, onChange: y => m("dealVelocityVolume", y.target.value), placeholder: "Enter section name", className: "w-full" }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "The name for the deal velocity and volume chart section" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Top Performers This Month" }), t.jsx($c, { value: r.topPerformersMonth, onChange: y => m("topPerformersMonth", y.target.value), placeholder: "Enter section name", className: "w-full" }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "The name for the top performers leaderboard section" })] })] }), t.jsxs("div", { className: "flex items-center gap-3 pt-4 border-t border-gray-200 dark:border-gray-700", children: [t.jsxs(ue, { variant: "PRIMARY", onClick: g, disabled: !c || i, className: "flex items-center gap-2", children: [t.jsx(Za, { className: "w-4 h-4" }), i ? "Saving..." : "Save Changes"] }), t.jsx(ue, { variant: "SECONDARY", onClick: f, disabled: i, children: "Reset to Defaults" })] })] })] }), t.jsxs(Ae, { variant: "ELEVATED", className: "max-w-2xl", children: [t.jsxs(Pt, { children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Preview" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "How your dashboard sections will appear with the current names." })] }), t.jsx(st, { children: t.jsxs("div", { className: "space-y-3", children: [t.jsxs("div", { className: "flex items-center gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg", children: [t.jsx(Qa, { className: "w-5 h-5 text-blue-600 dark:text-blue-400" }), t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: r.salesPipelineFlow })] }), t.jsxs("div", { className: "flex items-center gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg", children: [t.jsx(Qa, { className: "w-5 h-5 text-purple-600 dark:text-purple-400" }), t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: r.performanceScorecard })] }), t.jsxs("div", { className: "flex items-center gap-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg", children: [t.jsx(Qa, { className: "w-5 h-5 text-green-600 dark:text-green-400" }), t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: r.dealVelocityVolume })] }), t.jsxs("div", { className: "flex items-center gap-3 p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg", children: [t.jsx(Qa, { className: "w-5 h-5 text-orange-600 dark:text-orange-400" }), t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: r.topPerformersMonth })] })] }) })] })] }) }, Rc = { async getAll() { return (await ie.get("/business-settings/unit-types")).data }, async getById(e) { return (await ie.get(`/business-settings/unit-types/${e}`)).data }, async create(e) { return (await ie.post("/business-settings/unit-types", e)).data }, async update(e, r) { return (await ie.patch(`/business-settings/unit-types/${e}`, r)).data }, async delete(e) { await ie.delete(`/business-settings/unit-types/${e}`) }, async toggle(e) { return (await ie.patch(`/business-settings/unit-types/${e}/toggle`)).data } }, Hie = () => { const e = xt(), [r, a] = h.useState([]), [s, n] = h.useState(!0), [i, o] = h.useState(!1), [c, u] = h.useState(null), [m, g] = h.useState({ name: "", description: "", isActive: !0 }), [f, y] = h.useState(!1), [p, b] = h.useState({}); h.useEffect(() => { j() }, []); const j = async () => { try { n(!0); const N = await Rc.getAll(); a(N) } catch (N) { console.error("Failed to fetch unit types:", N), R.error("Failed to load unit types"), a([]) } finally { n(!1) } }, v = () => { g({ name: "", description: "", isActive: !0 }), o(!1), u(null) }, S = N => { g({ name: N.name, description: N.description || "", isActive: N.isActive }), u(N.id), o(!0) }, k = async N => { N.preventDefault(); const A = {}, D = (m.name || "").trim(); if (D ? D.length > 50 && (A.name = "Unit type name must be at most 50 characters") : A.name = "Unit type name is required", Object.keys(A).length > 0) { b(A); return } b({}), y(!0); try { const I = { name: D, description: m.description || void 0, isActive: m.isActive }; c ? (await Rc.update(c, I), R.success("Unit type updated successfully")) : (await Rc.create(I), R.success("Unit type added successfully")), v(), j() } catch (I) { console.error("Failed to save unit type:", I); const $ = I?.response?.data?.message?.message || I?.response?.data?.message || "Failed to save unit type"; R.error(Array.isArray($) ? $.join(", ") : $) } finally { y(!1) } }, E = async N => { if (window.confirm("Are you sure you want to delete this unit type? This action cannot be undone.")) try { await Rc.delete(N), R.success("Unit type deleted successfully"), j() } catch (A) { console.error("Failed to delete unit type:", A), R.error("Failed to delete unit type") } }, C = async (N, A) => { try { await Rc.toggle(N), R.success("Unit type updated successfully"), j() } catch (D) { console.error("Failed to update unit type:", D), R.error("Failed to update unit type") } }; return s ? t.jsx(Cn, { message: "Loading unit types..." }) : t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => e("/business-settings"), className: "p-2", children: t.jsx(pr, { className: "w-4 h-4" }) }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl", children: t.jsx(L2, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Unit Types" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Manage measurement units for your products" })] })] })] }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [t.jsx("div", { className: "lg:col-span-1", children: t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: i ? "Edit Unit Type" : "Add New Unit Type" }) }), t.jsx(st, { children: t.jsxs("form", { onSubmit: k, className: "space-y-4", children: [t.jsxs("div", { children: [t.jsxs("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: ["Unit Type Name ", t.jsx("span", { className: "text-red-500", children: "*" })] }), t.jsx("input", { type: "text", value: m.name, onChange: N => { const A = N.target.value; g(D => ({ ...D, name: A })), A.trim() ? A.length > 50 ? b(D => ({ ...D, name: "Unit type name must be at most 50 characters" })) : b(D => ({ ...D, name: void 0 })) : b(D => ({ ...D, name: "Unit type name is required" })) }, className: `w-full p-2 border rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${p.name ? "border-red-300 dark:border-red-600" : "border-gray-300 dark:border-gray-600"}`, placeholder: "e.g., piece, kg, liter, meter" }), p.name && t.jsx("p", { className: "mt-1 text-xs text-rose-600 dark:text-rose-400", children: p.name })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Description" }), t.jsx("textarea", { value: m.description, onChange: N => g(A => ({ ...A, description: N.target.value })), rows: 3, className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "Brief description of this unit type" })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("input", { type: "checkbox", id: "isActive", checked: m.isActive, onChange: N => g(A => ({ ...A, isActive: N.target.checked })), className: "rounded border-gray-300 dark:border-gray-600" }), t.jsx("label", { htmlFor: "isActive", className: "text-sm text-gray-700 dark:text-gray-300", children: "Active (available for selection)" })] }), t.jsxs("div", { className: "flex gap-2", children: [t.jsxs(ue, { type: "submit", variant: "PRIMARY", disabled: f, className: "flex items-center gap-2", children: [t.jsx(Za, { className: "w-4 h-4" }), f ? "Saving..." : i ? "Update" : "Add"] }), i && t.jsx(ue, { type: "button", variant: "OUTLINE", onClick: v, children: "Cancel" })] })] }) })] }) }), t.jsx("div", { className: "lg:col-span-2", children: t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: ["Unit Types (", r.length, ")"] }), t.jsxs(ue, { variant: "PRIMARY", size: "SM", onClick: v, className: "flex items-center gap-1", children: [t.jsx($t, { className: "w-4 h-4" }), "Add New"] })] }) }), t.jsx(st, { children: r.length === 0 ? t.jsxs("div", { className: "text-center py-8", children: [t.jsx(L2, { className: "w-12 h-12 text-gray-400 mx-auto mb-4" }), t.jsx("h4", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: "No Unit Types Found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: "Create your first unit type to start measuring your products." })] }) : t.jsx("div", { className: "space-y-3", children: r.map(N => t.jsxs("div", { className: "flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("h4", { className: "font-medium text-gray-900 dark:text-white", children: N.name }), N.isActive === !1 && t.jsx("span", { className: "px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full", children: "Inactive" })] }), N.description && t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mt-1", children: N.description })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => C(N.id, N.isActive), className: "p-1", title: N.isActive ? "Deactivate" : "Activate", children: N.isActive ? t.jsx(Ht, { className: "w-4 h-4 text-green-500" }) : t.jsx(bn, { className: "w-4 h-4 text-gray-400" }) }), t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => S(N), className: "p-1", title: "Edit", children: t.jsx(Qo, { className: "w-4 h-4 text-blue-500" }) }), t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => E(N.id), className: "p-1", title: "Delete", children: t.jsx(yt, { className: "w-4 h-4 text-red-500" }) })] })] }, N.id)) }) })] }) })] }), r.length > 0 && t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Unit Types Analytics" }) }), t.jsx(st, { children: t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [t.jsxs("div", { className: "text-center", children: [t.jsx("div", { className: "text-2xl font-bold text-purple-600 dark:text-purple-400", children: r.filter(N => N.isActive).length }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Active Unit Types" })] }), t.jsxs("div", { className: "text-center", children: [t.jsx("div", { className: "text-2xl font-bold text-gray-600 dark:text-gray-400", children: r.filter(N => !N.isActive).length }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Inactive Unit Types" })] })] }) })] })] }) }, Mc = { getProductCategories: async () => (await ie.get("/business-settings/product-categories")).data, createProductCategory: async e => (await ie.post("/business-settings/product-categories", e)).data, updateProductCategory: async (e, r) => (await ie.patch(`/business-settings/product-categories/${e}`, r)).data, deleteProductCategory: async e => { await ie.delete(`/business-settings/product-categories/${e}`) }, toggleProductCategory: async e => (await ie.patch(`/business-settings/product-categories/${e}/toggle`)).data }, Wie = () => { const e = xt(), [r, a] = h.useState([]), [s, n] = h.useState(!0), [i, o] = h.useState(!1), [c, u] = h.useState(null), [m, g] = h.useState({ name: "", description: "", isActive: !0 }), [f, y] = h.useState(!1), [p, b] = h.useState({}); h.useEffect(() => { j() }, []); const j = async () => { try { n(!0); const N = await Mc.getProductCategories(); a(N) } catch (N) { console.error("Failed to fetch categories:", N), R.error("Failed to load product categories"), a([]) } finally { n(!1) } }, v = () => { g({ name: "", description: "", isActive: !0 }), o(!1), u(null) }, S = N => { g({ name: N.name, description: N.description || "", isActive: N.isActive }), u(N.id), o(!0) }, k = async N => { N.preventDefault(); const A = {}, D = (m.name || "").trim(); if (D ? D.length > 100 && (A.name = "Category name must be at most 100 characters") : A.name = "Category name is required", Object.keys(A).length > 0) { b(A); return } b({}), y(!0); try { const I = { name: D, description: m.description || void 0, isActive: m.isActive }; c ? (await Mc.updateProductCategory(c, I), R.success("Category updated successfully")) : (await Mc.createProductCategory(I), R.success("Category added successfully")), v(), j() } catch (I) { console.error("Failed to save category:", I); const $ = I?.response?.data?.message?.message || I?.response?.data?.message || "Failed to save category"; R.error(Array.isArray($) ? $.join(", ") : $) } finally { y(!1) } }, E = async N => { if (window.confirm("Are you sure you want to delete this category? This action cannot be undone.")) try { await Mc.deleteProductCategory(N), R.success("Category deleted successfully"), j() } catch (A) { console.error("Failed to delete category:", A), R.error("Failed to delete category") } }, C = async (N, A) => { try { await Mc.toggleProductCategory(N), R.success("Category updated successfully"), j() } catch (D) { console.error("Failed to update category:", D), R.error("Failed to update category") } }; return s ? t.jsx(Cn, { message: "Loading product categories..." }) : t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => e("/business-settings"), className: "p-2", children: t.jsx(pr, { className: "w-4 h-4" }) }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-xl", children: t.jsx(Fn, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Product Categories" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Manage categories for organizing your products" })] })] })] }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [t.jsx("div", { className: "lg:col-span-1", children: t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: i ? "Edit Category" : "Add New Category" }) }), t.jsx(st, { children: t.jsxs("form", { onSubmit: k, className: "space-y-4", children: [t.jsxs("div", { children: [t.jsxs("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: ["Category Name ", t.jsx("span", { className: "text-red-500", children: "*" })] }), t.jsx("input", { type: "text", value: m.name, onChange: N => { const A = N.target.value; g(D => ({ ...D, name: A })), A.trim() ? A.length > 100 ? b(D => ({ ...D, name: "Category name must be at most 100 characters" })) : b(D => ({ ...D, name: void 0 })) : b(D => ({ ...D, name: "Category name is required" })) }, className: `w-full p-2 border rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${p.name ? "border-red-300 dark:border-red-600" : "border-gray-300 dark:border-gray-600"}`, placeholder: "e.g., Electronics, Clothing, Home & Garden" }), p.name && t.jsx("p", { className: "mt-1 text-xs text-rose-600 dark:text-rose-400", children: p.name })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Description" }), t.jsx("textarea", { value: m.description, onChange: N => g(A => ({ ...A, description: N.target.value })), rows: 3, className: "w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "Brief description of this category" })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("input", { type: "checkbox", id: "isActive", checked: m.isActive, onChange: N => g(A => ({ ...A, isActive: N.target.checked })), className: "rounded border-gray-300 dark:border-gray-600" }), t.jsx("label", { htmlFor: "isActive", className: "text-sm text-gray-700 dark:text-gray-300", children: "Active (available for selection)" })] }), t.jsxs("div", { className: "flex gap-2", children: [t.jsxs(ue, { type: "submit", variant: "PRIMARY", disabled: f, className: "flex items-center gap-2", children: [t.jsx(Za, { className: "w-4 h-4" }), f ? "Saving..." : i ? "Update" : "Add"] }), i && t.jsx(ue, { type: "button", variant: "OUTLINE", onClick: v, children: "Cancel" })] })] }) })] }) }), t.jsx("div", { className: "lg:col-span-2", children: t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: ["Categories (", r.length, ")"] }), t.jsxs(ue, { variant: "PRIMARY", size: "SM", onClick: v, className: "flex items-center gap-1", children: [t.jsx($t, { className: "w-4 h-4" }), "Add New"] })] }) }), t.jsx(st, { children: r.length === 0 ? t.jsxs("div", { className: "text-center py-8", children: [t.jsx(Fn, { className: "w-12 h-12 text-gray-400 mx-auto mb-4" }), t.jsx("h4", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: "No Categories Found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: "Create your first product category to start organizing your products." })] }) : t.jsx("div", { className: "space-y-3", children: r.map(N => t.jsxs("div", { className: "flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("h4", { className: "font-medium text-gray-900 dark:text-white", children: N.name }), N.isActive === !1 && t.jsx("span", { className: "px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full", children: "Inactive" })] }), N.description && t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mt-1", children: N.description })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => C(N.id, N.isActive), className: "p-1", title: N.isActive ? "Deactivate" : "Activate", children: N.isActive ? t.jsx(Ht, { className: "w-4 h-4 text-green-500" }) : t.jsx(bn, { className: "w-4 h-4 text-gray-400" }) }), t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => S(N), className: "p-1", title: "Edit", children: t.jsx(Qo, { className: "w-4 h-4 text-blue-500" }) }), t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => E(N.id), className: "p-1", title: "Delete", children: t.jsx(yt, { className: "w-4 h-4 text-red-500" }) })] })] }, N.id)) }) })] }) })] }), r.length > 0 && t.jsxs(Ae, { children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Categories Analytics" }) }), t.jsx(st, { children: t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [t.jsxs("div", { className: "text-center", children: [t.jsx("div", { className: "text-2xl font-bold text-blue-600 dark:text-blue-400", children: r.filter(N => N.isActive).length }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Active Categories" })] }), t.jsxs("div", { className: "text-center", children: [t.jsx("div", { className: "text-2xl font-bold text-gray-600 dark:text-gray-400", children: r.filter(N => !N.isActive).length }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Inactive Categories" })] })] }) })] })] }) }, Td = ({ title: e, subtitle: r, addLabel: a = "Add", onAdd: s, bulkActions: n = [] }) => { const [i, o] = h.useState(!1), c = h.useRef(null); return h.useEffect(() => { if (!i) return; const u = m => { c.current && !c.current.contains(m.target) && o(!1) }; return document.addEventListener("mousedown", u), () => document.removeEventListener("mousedown", u) }, [i]), t.jsx("div", { className: "space-y-4", ref: c, children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: e }), r && t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: r })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [n.length > 0 && t.jsxs("div", { className: "relative", children: [t.jsx(ue, { variant: "SECONDARY", size: "MD", onClick: () => o(u => !u), children: "Bulk Actions" }), i && t.jsx("div", { className: "absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-lg z-20", children: t.jsx("div", { className: "py-2", children: n.map((u, m) => t.jsx("button", { disabled: u.disabled, onClick: () => { u.onClick(), o(!1) }, className: "w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50", children: t.jsxs("span", { className: "inline-flex items-center gap-2", children: [u.icon, u.label] }) }, m)) }) })] }), s && t.jsxs(ue, { variant: "PRIMARY", size: "MD", onClick: s, children: [t.jsx($t, { className: "w-4 h-4 mr-2" }), a] })] })] }) }) }, IP = e => e == null ? "" : `"${String(e).replace(/"/g, '""')}`.concat('"'), Dd = (e, r, a) => {
    try {
        const s = r.map(IP).join(","), n = a.map(m => m.map(IP).join(",")).join(`
`), i = [s, n].join(`
`), o = new Blob([i], { type: "text/csv;charset=utf-8;" }), c = window.URL.createObjectURL(o), u = document.createElement("a"); u.href = c, u.setAttribute("download", e), document.body.appendChild(u), u.click(), document.body.removeChild(u), window.URL.revokeObjectURL(c)
    } catch (s) { console.error("Failed to export CSV", s) }
}, vx = (e, r, a) => {
    try {
        const s = a.map(o => `<tr>${o.map(c => `<td style="padding: 4px 8px; border: 1px solid #e5e7eb; font-size: 12px;">${c ?? ""}</td>`).join("")}</tr>`).join(""), n = `<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>${e}</title>
    <style>
      body { font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; font-size: 12px; color: #111827; margin: 24px; }
      h1 { font-size: 18px; margin-bottom: 12px; }
      table { border-collapse: collapse; width: 100%; }
      th { text-align: left; padding: 6px 8px; border: 1px solid #e5e7eb; background: #f9fafb; font-size: 12px; }
    </style>
  </head>
  <body>
    <h1>${e}</h1>
    <table>
      <thead>
        <tr>${r.map(o => `<th>${o}</th>`).join("")}</tr>
      </thead>
      <tbody>
        ${s}
      </tbody>
    </table>
    <script>
      window.onload = function() { window.print(); };
    <\/script>
  </body>
</html>`, i = window.open("", "_blank"); if (!i) return; i.document.open(), i.document.write(n), i.document.close()
    } catch (s) { console.error("Failed to export PDF", s) }
}, Vie = () => { const { hasPermission: e } = mr(), { t: r } = kn(), a = xt(), [s, n] = h.useState([]), [i, o] = h.useState(!0), [c, u] = h.useState(""), [m, g] = h.useState("ALL"), [f, y] = h.useState(1), [p, b] = h.useState(10), [j, v] = h.useState(null), [S, k] = h.useState("list"), [E, C] = h.useState(["quotationNumber", "customer", "email", "related", "amount", "status", "date"]), [N, A] = h.useState(null), [D, I] = h.useState({ currentPage: 1, totalPages: 1, totalItems: 0, itemsPerPage: 10 }); h.useEffect(() => { try { const L = localStorage.getItem("quotations_visible_columns"); if (L) { const z = JSON.parse(L); Array.isArray(z) && z.every(T => typeof T == "string") && C(z) } } catch { } }, []), h.useEffect(() => { try { localStorage.setItem("quotations_visible_columns", JSON.stringify(E)) } catch { } }, [E]), h.useEffect(() => { $() }, [c, m, f, p]); const $ = async () => { try { o(!0); const L = await ie.get("/quotations", { params: { page: f, limit: p, search: c || void 0, status: m !== "ALL" ? m : void 0 } }); if (L.data.success) { const z = L.data.data || {}, T = Array.isArray(z) ? z : z.items || [], _ = z.total || T.length || 0, H = z.page || f, U = z.limit || p, K = T.map(Z => ({ ...Z, customerName: Z.lead ? `${Z.lead.firstName || ""} ${Z.lead.lastName || ""}`.trim() || Z.lead.company : Z.deal?.title || "-", customerEmail: Z.lead?.email || "-", relatedTo: Z.deal ? `Deal #${Z.deal.id}` : Z.lead ? `Lead #${Z.lead.id}` : void 0, relatedType: Z.dealId ? "deal" : Z.leadId ? "lead" : void 0 })); n(K), I({ currentPage: H, totalPages: Math.max(1, Math.ceil(_ / U)), totalItems: _, itemsPerPage: U }) } } catch (L) { console.error("Error fetching quotations:", L), R.error(L?.response?.data?.message || r("quotations.fetch_error") || "Failed to fetch quotations") } finally { o(!1) } }, B = async L => { try { const z = await ie.get(`/quotations/${L}/pdf/download`, { responseType: "blob" }), T = window.URL.createObjectURL(new Blob([z.data])), _ = document.createElement("a"); _.href = T; const H = s.find(U => U.id === L); _.setAttribute("download", `${H?.quotationNumber || "quotation"}.pdf`), document.body.appendChild(_), _.click(), _.remove() } catch (z) { console.error("Error downloading PDF:", z), R.error(z?.response?.data?.message || r("quotations.download_error") || "Failed to download PDF") } }, W = async L => { try { const z = await ie.get(`/quotations/${L}/pdf/preview`, { responseType: "blob" }), T = new Blob([z.data], { type: "application/pdf" }), _ = window.URL.createObjectURL(T); window.open(_, "_blank") } catch (z) { console.error("Error previewing PDF:", z), R.error(z?.response?.data?.message || r("quotations.preview_error") || "Failed to preview PDF") } }, M = L => { const z = { DRAFT: "bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300", SENT: "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300", VIEWED: "bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300", ACCEPTED: "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300", REJECTED: "bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300", EXPIRED: "bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300", CANCELLED: "bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300" }; return z[L] || z.DRAFT }, q = L => { switch (L) { case "DRAFT": return t.jsx(Ti, { className: "w-3 h-3" }); case "SENT": return t.jsx(Ll, { className: "w-3 h-3" }); case "VIEWED": return t.jsx(Ht, { className: "w-3 h-3" }); case "ACCEPTED": return t.jsx(Ti, { className: "w-3 h-3" }); case "REJECTED": return t.jsx(yt, { className: "w-3 h-3" }); case "EXPIRED": return t.jsx(Kt, { className: "w-3 h-3" }); case "CANCELLED": return t.jsx(yt, { className: "w-3 h-3" }); default: return t.jsx(Ti, { className: "w-3 h-3" }) } }, V = s.filter(L => { const z = L.quotationNumber.toLowerCase().includes(c.toLowerCase()) || L.title.toLowerCase().includes(c.toLowerCase()) || L.customerName?.toLowerCase().includes(c.toLowerCase()), T = m === "ALL" || L.status === m; return z && T }), X = async L => { if (window.confirm(r("quotations.confirm_delete") || "Are you sure you want to delete this quotation?")) try { (await ie.delete(`/quotations/${L}`)).data.success && (R.success(r("quotations.delete_success") || "Quotation deleted successfully"), $()) } catch (z) { console.error("Error deleting quotation:", z), R.error(z?.response?.data?.message || r("quotations.delete_error") || "Failed to delete quotation") } }, se = L => { a(`/quotations/edit/${L}`) }, le = async (L, z) => { if (z && z.stopPropagation(), j !== L) try { v(L), await ie.put(`/quotations/${L}/accept`), (await ie.post(`/quotations/${L}/generate-invoice`)).data?.success ? (R.success("Sales order booked and invoice created"), $(), a("/invoices")) : R.info("Quotation accepted, but invoice not created") } catch (T) { console.error("Error booking sales order:", T), R.error(T?.response?.data?.message || "Failed to book sales order") } finally { v(null) } }, ee = L => { A(N === L ? null : L) }; return i ? t.jsx("div", { className: "min-h-screen bg-gray-50 dark:bg-gray-900", children: t.jsxs("div", { className: "space-y-6 p-6", children: [t.jsxs("div", { className: "mb-8 flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx("div", { className: "w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-xl animate-pulse" }), t.jsxs("div", { children: [t.jsx("div", { className: "h-8 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse" }), t.jsx("div", { className: "h-4 w-64 bg-gray-200 dark:bg-gray-700 rounded mt-2 animate-pulse" })] })] }), t.jsx("div", { className: "h-11 w-40 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse" })] }), t.jsxs("div", { className: "mb-6 flex gap-3", children: [t.jsx("div", { className: "flex-1 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse" }), t.jsx("div", { className: "w-40 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse" }), t.jsx("div", { className: "w-24 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse" })] }), t.jsxs(Ae, { className: "overflow-hidden bg-white dark:bg-gray-800", children: [t.jsx("div", { className: "bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700 px-6 py-4", children: t.jsxs("div", { className: "grid grid-cols-12 gap-4", children: [t.jsx("div", { className: "col-span-3 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse" }), t.jsx("div", { className: "col-span-2 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse" }), t.jsx("div", { className: "col-span-2 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse" }), t.jsx("div", { className: "col-span-2 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse" }), t.jsx("div", { className: "col-span-2 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse" }), t.jsx("div", { className: "col-span-1 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse" })] }) }), t.jsx("div", { className: "divide-y divide-gray-200 dark:divide-gray-700", children: [1, 2, 3, 4, 5].map(L => t.jsxs("div", { className: "grid grid-cols-12 gap-4 px-6 py-4", children: [t.jsxs("div", { className: "col-span-3 flex items-center gap-3", children: [t.jsx("div", { className: "w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse" }), t.jsxs("div", { className: "flex-1 space-y-2", children: [t.jsx("div", { className: "h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse" }), t.jsx("div", { className: "h-3 bg-gray-200 dark:bg-gray-700 rounded w-3/4 animate-pulse" })] })] }), t.jsx("div", { className: "col-span-2", children: t.jsx("div", { className: "h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse" }) }), t.jsx("div", { className: "col-span-2", children: t.jsx("div", { className: "h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-2/3" }) }), t.jsx("div", { className: "col-span-2", children: t.jsx("div", { className: "h-6 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse w-20" }) }), t.jsxs("div", { className: "col-span-2 space-y-1", children: [t.jsx("div", { className: "h-3 bg-gray-200 dark:bg-gray-700 rounded animate-pulse" }), t.jsx("div", { className: "h-3 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-3/4" })] }), t.jsxs("div", { className: "col-span-1 flex justify-end gap-1", children: [t.jsx("div", { className: "w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse" }), t.jsx("div", { className: "w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse" }), t.jsx("div", { className: "w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse" })] })] }, L)) })] })] }) }) : t.jsx("div", { className: "min-h-screen bg-gray-50 dark:bg-gray-900", children: t.jsxs("div", { className: "mx-auto px-4 sm:px-6 lg:px-8 py-6 space-y-6", children: [t.jsx("div", { className: "mb-8", children: t.jsx(Td, { title: "Quotations", subtitle: `Manage and track your quotations  Showing ${D.totalItems} quotation${D.totalItems !== 1 ? "s" : ""}`, addLabel: "Add Quotation", onAdd: e("deal.create") ? () => a("/quotations/new") : void 0, bulkActions: [{ label: "Export Quotations (Excel)", icon: t.jsx(Bo, { className: "w-4 h-4" }), onClick: () => { const L = ["Quotation #", "Title", "Customer", "Email", "Related", "Amount", "Status", "Created", "Valid Until"], z = V.map(T => [T.quotationNumber, T.title, T.customerName || "", T.customerEmail || "", T.relatedTo || "", `${T.currency} ${T.totalAmount.toLocaleString()}`, T.status, new Date(T.createdAt).toLocaleDateString(), T.validUntil ? new Date(T.validUntil).toLocaleDateString() : ""]); Dd("quotations_export.csv", L, z) } }, { label: "Export Quotations (PDF)", icon: t.jsx(Mt, { className: "w-4 h-4" }), onClick: () => { const L = ["Quotation #", "Title", "Customer", "Email", "Related", "Amount", "Status", "Created", "Valid Until"], z = V.map(T => [T.quotationNumber, T.title, T.customerName || "", T.customerEmail || "", T.relatedTo || "", `${T.currency} ${T.totalAmount.toLocaleString()}`, T.status, new Date(T.createdAt).toLocaleDateString(), T.validUntil ? new Date(T.validUntil).toLocaleDateString() : ""]); vx("Quotations", L, z) } }] }) }), t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4", children: t.jsxs("div", { className: "flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between", children: [t.jsxs("div", { className: "flex flex-col sm:flex-row gap-3 flex-1 w-full", children: [t.jsxs("div", { className: "relative flex-1", children: [t.jsx(Xr, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400", size: 18 }), t.jsx("input", { type: "text", placeholder: "Search quotations...", value: c, onChange: L => u(L.target.value), className: "w-full pl-10 pr-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white text-sm" })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx(Zc, { size: 18, className: "text-gray-500" }), t.jsxs("select", { value: m, onChange: L => g(L.target.value), className: "px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white text-sm min-w-[150px]", children: [t.jsx("option", { value: "ALL", children: "All Status" }), t.jsx("option", { value: "DRAFT", children: "Draft" }), t.jsx("option", { value: "SENT", children: "Sent" }), t.jsx("option", { value: "VIEWED", children: "Viewed" }), t.jsx("option", { value: "ACCEPTED", children: "Accepted" }), t.jsx("option", { value: "REJECTED", children: "Rejected" }), t.jsx("option", { value: "EXPIRED", children: "Expired" }), t.jsx("option", { value: "CANCELLED", children: "Cancelled" })] })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Show:" }), t.jsxs("select", { value: p, onChange: L => { b(Number(L.target.value)), y(1) }, className: "px-3 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white text-sm", children: [t.jsx("option", { value: "10", children: "10" }), t.jsx("option", { value: "25", children: "25" }), t.jsx("option", { value: "50", children: "50" }), t.jsx("option", { value: "100", children: "100" })] })] })] }), t.jsxs("div", { className: "flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1", children: [t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${S === "list" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => k("list"), title: "List view", children: t.jsx(fi, { className: "w-4 h-4" }) }), t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${S === "card" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => k("card"), title: "Card view", children: t.jsx(hi, { className: "w-4 h-4" }) })] })] }) }), S === "card" ? t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-6", children: V.length === 0 ? t.jsxs("div", { className: "p-12 text-center", children: [t.jsx("div", { className: "w-20 h-20 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4", children: t.jsx(Ti, { size: 40, className: "text-gray-400 dark:text-gray-600" }) }), t.jsx("h3", { className: "text-xl font-semibold text-gray-900 dark:text-white mb-2", children: "No Quotations Found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto", children: c || m !== "ALL" ? "Try adjusting your filters or search terms" : "Create your first quotation to get started with tracking your sales pipeline" }), e("deal.create") && t.jsxs(ue, { onClick: () => a("/quotations/new"), className: "bg-indigo-600 hover:bg-indigo-700 text-white", children: [t.jsx($t, { size: 18, className: "mr-2" }), "Create Quotation"] })] }) : t.jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6", children: V.map(L => t.jsxs("div", { className: "rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden", children: [t.jsxs("div", { className: "p-5 border-b border-gray-100 dark:border-gray-700 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-750", children: [t.jsxs("div", { className: "flex items-center justify-between mb-3", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "w-10 h-10 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg flex items-center justify-center", children: t.jsx(Ti, { className: "h-5 w-5 text-indigo-600 dark:text-indigo-400" }) }), t.jsxs("div", { children: [t.jsx("h3", { className: "text-sm font-bold text-gray-900 dark:text-white", children: L.quotationNumber }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 truncate max-w-[150px]", children: L.title })] })] }), t.jsxs("div", { className: "relative", children: [t.jsx("button", { onClick: z => { z.stopPropagation(), ee(L.id) }, className: "p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700", children: t.jsx(dD, { size: 16 }) }), N === L.id && t.jsxs("div", { className: "absolute right-0 mt-1 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg z-10 py-1 border border-gray-200 dark:border-gray-700", children: [t.jsxs("button", { onClick: z => { z.stopPropagation(), ee(L.id), W(L.id) }, className: "flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700", children: [t.jsx(Ht, { size: 16 }), "Preview"] }), e("deal.update") && t.jsxs("button", { onClick: z => { z.stopPropagation(), ee(L.id), se(L.id) }, className: "flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700", children: [t.jsx(Jt, { size: 16 }), "Edit"] }), t.jsxs("button", { onClick: z => { z.stopPropagation(), ee(L.id), B(L.id) }, className: "flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700", children: [t.jsx(ys, { size: 16 }), "Download"] }), e("deal.delete") && t.jsxs("button", { onClick: z => { z.stopPropagation(), ee(L.id), X(L.id) }, className: "flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700", children: [t.jsx(yt, { size: 16 }), "Delete"] })] })] })] }), t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("span", { className: `inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ${M(L.status)}`, children: [q(L.status), L.status] }), t.jsxs("div", { className: "text-lg font-bold text-gray-900 dark:text-white", children: [L.currency, " ", L.totalAmount.toLocaleString()] })] })] }), t.jsxs("div", { className: "p-5 space-y-3", children: [L.customerName && t.jsxs("div", { className: "flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400", children: [t.jsx(wt, { size: 14 }), t.jsx("span", { className: "truncate", children: L.customerName })] }), L.customerEmail && t.jsxs("div", { className: "flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400", children: [t.jsx(ir, { size: 14 }), t.jsx("span", { className: "truncate", children: L.customerEmail })] }), t.jsxs("div", { className: "flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400", children: [t.jsx(Zt, { size: 14 }), t.jsxs("span", { children: ["Created: ", new Date(L.createdAt).toLocaleDateString()] })] }), L.validUntil && t.jsxs("div", { className: "flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400", children: [t.jsx(Kt, { size: 14 }), t.jsxs("span", { children: ["Valid: ", new Date(L.validUntil).toLocaleDateString()] })] }), t.jsxs("div", { className: "pt-2 flex items-center justify-between", children: [t.jsx("button", { onClick: () => a(`/quotations/${L.id}`), className: "text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300 text-sm font-medium", children: "View Details" }), L.status === "ACCEPTED" && e("deal.update") && t.jsxs("button", { onClick: z => le(L.id, z), disabled: j === L.id, className: "px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs font-medium rounded-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1", children: [t.jsx(Ll, { size: 12 }), j === L.id ? "Processing..." : "Book Order"] })] })] })] }, L.id)) }) }) : t.jsxs(Ae, { className: "overflow-hidden bg-white dark:bg-gray-800 shadow-sm", children: [t.jsx(io, { currentPage: D.currentPage, itemsPerPage: D.itemsPerPage, totalItems: D.totalItems, onItemsPerPageChange: L => { b(L), y(1) }, columnConfig: { columns: [{ id: "quotationNumber", label: "Quotation" }, { id: "customer", label: "Customer" }, { id: "email", label: "Email" }, { id: "related", label: "Related" }, { id: "amount", label: "Amount" }, { id: "status", label: "Status" }, { id: "date", label: "Date" }], visibleColumns: E, onChange: C, minVisible: 1 } }), t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("div", { className: "min-w-[1000px]", children: [t.jsx("div", { className: "bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700 px-6 py-4", children: t.jsxs("div", { className: "grid grid-cols-12 gap-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap", children: [E.includes("quotationNumber") && t.jsx("div", { className: "col-span-2", children: "Quotation" }), E.includes("customer") && t.jsx("div", { className: "col-span-2", children: "Customer" }), E.includes("email") && t.jsx("div", { className: "col-span-2", children: "Email" }), E.includes("related") && t.jsx("div", { className: "col-span-1", children: "Related" }), E.includes("amount") && t.jsx("div", { className: "col-span-1", children: "Amount" }), E.includes("status") && t.jsx("div", { className: "col-span-1", children: "Status" }), E.includes("date") && t.jsx("div", { className: "col-span-1", children: "Date" }), t.jsx("div", { className: "col-span-2 text-right", children: "Actions" })] }) }), V.length === 0 ? t.jsxs("div", { className: "p-12 text-center", children: [t.jsx("div", { className: "w-20 h-20 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4", children: t.jsx(Ti, { size: 40, className: "text-gray-400 dark:text-gray-600" }) }), t.jsx("h3", { className: "text-xl font-semibold text-gray-900 dark:text-white mb-2", children: "No Quotations Found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto", children: c || m !== "ALL" ? "Try adjusting your filters or search terms" : "Create your first quotation to get started with tracking your sales pipeline" }), e("deal.create") && t.jsxs(ue, { onClick: () => a("/quotations/new"), className: "bg-indigo-600 hover:bg-indigo-700 text-white", children: [t.jsx($t, { size: 18, className: "mr-2" }), "Create Quotation"] })] }) : t.jsx("div", { className: "divide-y divide-gray-200 dark:divide-gray-700", children: V.map(L => t.jsxs("div", { className: "grid grid-cols-12 gap-4 px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors items-center cursor-pointer", onClick: () => a(`/quotations/${L.id}`), children: [E.includes("quotationNumber") && t.jsx("div", { className: "col-span-2 min-w-0", children: t.jsxs("div", { className: "flex items-center gap-3 min-w-0", children: [t.jsx("div", { className: "w-10 h-10 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center flex-shrink-0", children: t.jsx(Ti, { className: "text-indigo-600 dark:text-indigo-400", size: 18 }) }), t.jsxs("div", { className: "min-w-0 overflow-hidden", children: [t.jsx("div", { className: "font-semibold text-gray-900 dark:text-white text-sm truncate", children: L.quotationNumber }), t.jsx("div", { className: "text-xs text-gray-500 dark:text-gray-400 truncate", children: L.title })] })] }) }), E.includes("customer") && t.jsx("div", { className: "col-span-2 min-w-0", children: t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx(wt, { size: 14, className: "text-gray-400" }), t.jsx("div", { className: "text-sm text-gray-900 dark:text-white font-medium truncate", children: L.customerName || "-" })] }) }), E.includes("email") && t.jsx("div", { className: "col-span-2 min-w-0", children: t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx(ir, { size: 14, className: "text-gray-400" }), t.jsx("div", { className: "text-xs text-gray-600 dark:text-gray-400 truncate", children: L.customerEmail || "-" })] }) }), E.includes("related") && t.jsx("div", { className: "col-span-1 min-w-0", children: t.jsx("div", { className: "text-xs text-gray-600 dark:text-gray-400 truncate capitalize", children: L.relatedType ? `${L.relatedType}${L.relatedTo ? `: ${L.relatedTo}` : ""}` : "-" }) }), E.includes("amount") && t.jsx("div", { className: "col-span-1 min-w-0", children: t.jsxs("div", { className: "flex items-center gap-1", children: [t.jsx(Qr, { size: 14, className: "text-gray-400" }), t.jsxs("div", { className: "text-sm font-bold text-gray-900 dark:text-white whitespace-nowrap", children: [L.currency, " ", L.totalAmount.toLocaleString()] })] }) }), E.includes("status") && t.jsx("div", { className: "col-span-1 min-w-0", children: t.jsxs("span", { className: `inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ${M(L.status)}`, children: [q(L.status), L.status] }) }), E.includes("date") && t.jsx("div", { className: "col-span-1 min-w-0", children: t.jsxs("div", { className: "flex flex-col gap-1", children: [t.jsxs("div", { className: "flex items-center gap-1", children: [t.jsx(Zt, { size: 14, className: "text-gray-400 flex-shrink-0" }), t.jsx("div", { className: "text-sm text-gray-600 dark:text-gray-400 whitespace-nowrap", children: new Date(L.createdAt).toLocaleDateString() })] }), L.validUntil && t.jsxs("div", { className: "flex items-center gap-1", children: [t.jsx(Kt, { size: 12, className: "text-gray-400 flex-shrink-0" }), t.jsxs("div", { className: "text-xs text-gray-500 dark:text-gray-500 whitespace-nowrap", children: ["Valid: ", new Date(L.validUntil).toLocaleDateString()] })] })] }) }), t.jsxs("div", { className: "col-span-2 flex items-center justify-end gap-1 flex-shrink-0", onClick: z => z.stopPropagation(), children: [t.jsx("button", { onClick: z => { z.stopPropagation(), W(L.id) }, className: "p-1.5 text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors", title: "Preview", children: t.jsx(Ht, { size: 14 }) }), e("deal.update") && t.jsxs(t.Fragment, { children: [t.jsx("button", { onClick: z => { z.stopPropagation(), se(L.id) }, className: "p-1.5 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors", title: "Edit", children: t.jsx(Jt, { size: 14 }) }), L.status === "ACCEPTED" && t.jsx("button", { onClick: z => le(L.id, z), disabled: j === L.id, className: "p-1.5 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed", title: "Book Sales Order & Create Invoice", children: t.jsx(Ll, { size: 14 }) })] }), t.jsx("button", { onClick: z => { z.stopPropagation(), B(L.id) }, className: "p-1.5 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors", title: "Download", children: t.jsx(ys, { size: 14 }) }), e("deal.delete") && t.jsx("button", { onClick: z => { z.stopPropagation(), X(L.id) }, className: "p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors", title: "Delete", children: t.jsx(yt, { size: 14 }) })] })] }, L.id)) })] }) })] }), D.totalPages > 1 && t.jsxs("div", { className: "mt-6 flex flex-col sm:flex-row items-center justify-between bg-white dark:bg-gray-800 px-6 py-4 rounded-xl shadow-sm gap-4", children: [t.jsxs("div", { className: "text-sm text-gray-600 dark:text-gray-400", children: ["Showing ", t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: (f - 1) * p + 1 }), " to ", t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: Math.min(f * p, D.totalItems) }), " of ", t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: D.totalItems }), " results"] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("button", { onClick: () => y(L => Math.max(1, L - 1)), disabled: f === 1, className: "px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors", children: "Previous" }), Array.from({ length: Math.min(5, D.totalPages) }, (L, z) => { let T; return D.totalPages <= 5 || f <= 3 ? T = z + 1 : f >= D.totalPages - 2 ? T = D.totalPages - 4 + z : T = f - 2 + z, t.jsx("button", { onClick: () => y(T), className: `px-3 py-2 text-sm font-medium rounded-lg transition-colors ${f === T ? "bg-indigo-600 text-white" : "text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`, children: T }, T) }), t.jsx("button", { onClick: () => y(L => Math.min(D.totalPages, L + 1)), disabled: f === D.totalPages, className: "px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors", children: "Next" })] })] })] }) }) }, _c = { Afghanistan: "AFN", Albania: "EUR", Algeria: "DZD", Argentina: "ARS", Australia: "AUD", Austria: "EUR", Bahrain: "BHD", Bangladesh: "BDT", Belgium: "EUR", Benin: "XOF", Bhutan: "BTN", Botswana: "BWP", Brazil: "BRL", Bulgaria: "BGN", "Burkina Faso": "XOF", Burundi: "BIF", Cambodia: "KHR", Cameroon: "XAF", Canada: "CAD", "Cape Verde": "CVE", "Central African Republic": "XAF", Chad: "XAF", Chile: "CLP", China: "CNY", Colombia: "COP", Comoros: "KMF", Congo: "XAF", Croatia: "HRK", "Czech Republic": "CZK", "Democratic Republic of the Congo": "CDF", Denmark: "DKK", Djibouti: "DJF", Egypt: "EGP", "Equatorial Guinea": "XAF", Eritrea: "ERN", Estonia: "EUR", Ethiopia: "ETB", Eswatini: "SZL", Finland: "EUR", France: "EUR", Gabon: "XAF", Gambia: "GMD", Germany: "EUR", Ghana: "GHS", Greece: "EUR", Guinea: "GNF", "Guinea-Bissau": "XOF", "Hong Kong": "HKD", Hungary: "HUF", Iceland: "ISK", India: "INR", Indonesia: "IDR", Iran: "IRR", Iraq: "IQD", Ireland: "EUR", Israel: "ILS", Italy: "EUR", "Ivory Coast": "XOF", Japan: "JPY", Jordan: "JOD", Kazakhstan: "KZT", Kenya: "KES", Kuwait: "KWD", Kyrgyzstan: "KGS", Laos: "LAK", Latvia: "EUR", Lebanon: "LBP", Lesotho: "LSL", Liberia: "LRD", Libya: "LYD", Lithuania: "EUR", Luxembourg: "EUR", Madagascar: "MGA", Malawi: "MWK", Malaysia: "MYR", Maldives: "MVR", Mali: "XOF", Mauritania: "MRU", Mauritius: "MUR", Mexico: "MXN", Mongolia: "MNT", Morocco: "MAD", Mozambique: "MZN", Myanmar: "MMK", Namibia: "NAD", Nepal: "NPR", Netherlands: "EUR", "New Zealand": "NZD", Niger: "XOF", Nigeria: "NGN", "North Korea": "KPW", Norway: "NOK", Oman: "OMR", Pakistan: "PKR", Peru: "PEN", Philippines: "PHP", Poland: "PLN", Portugal: "EUR", Qatar: "QAR", "Republic of the Congo": "XAF", Romania: "RON", Russia: "RUB", Rwanda: "RWF", "So Tom and Prncipe": "STN", "Saudi Arabia": "SAR", Senegal: "XOF", Serbia: "RSD", Seychelles: "SCR", "Sierra Leone": "SLL", Singapore: "SGD", Slovakia: "EUR", Slovenia: "EUR", Somalia: "SOS", "South Africa": "ZAR", "South Korea": "KRW", Spain: "EUR", "Sri Lanka": "LKR", Sudan: "SDG", Sweden: "SEK", Switzerland: "CHF", Syria: "SYP", Tanzania: "TZS", Thailand: "THB", Togo: "XOF", Tunisia: "TND", Turkey: "TRY", Uganda: "UGX", Ukraine: "UAH", "United Arab Emirates": "AED", "United Kingdom": "GBP", "United States": "USD", Uruguay: "UYU", Uzbekistan: "UZS", Vietnam: "VND", Yemen: "YER", Zambia: "ZMW", Zimbabwe: "ZWL" }, K6 = e => _c[e], LP = () => { const e = xt(), { currencySettings: r, formatCurrency: a } = Br(), [s] = vm(), { id: n } = gi(), i = !!n, [o, c] = h.useState(!1), [u, m] = h.useState([]), [g, f] = h.useState([]), [y, p] = h.useState([]), [b, j] = h.useState(""), [v, S] = h.useState(!1), k = h.useRef(null), [E, C] = h.useState([]), [N, A] = h.useState(null), [D, I] = h.useState(""), $ = h.useRef(null), [B, W] = h.useState([]), [M, q] = h.useState([]), [V, X] = h.useState(""), [se, le] = h.useState(""), [ee, L] = h.useState(""), [z, T] = h.useState(""), [_, H] = h.useState(""), [U, K] = h.useState("lead"), [Z, J] = h.useState(""), [te, G] = h.useState("Draft"), [de, Te] = h.useState(""), [pe, He] = h.useState(""), [ne, De] = h.useState(""), [$e, Et] = h.useState(""), [Bt, Ft] = h.useState(""), [mt, ce] = h.useState(""), [Xe, jt] = h.useState(""), [Q, Le] = h.useState(""), [Ve, et] = h.useState(""), [pt, Y] = h.useState(""), [je, Ne] = h.useState(new Date().toISOString().split("T")[0]), [fe, ke] = h.useState(""), [he, Ee] = h.useState(r?.primary || "USD"), [Ge, qe] = h.useState("none"), [vt, yr] = h.useState(""), [vr, tr] = h.useState(!0), [Nt, Ut] = h.useState([{ description: "", longDescription: "", quantity: 1, unit: "Unit", rate: 0, taxRate: 0, amount: 0, isOptional: !1, productId: "" }]), [sr, _r] = h.useState(0), [wr, kr] = h.useState(0), [Sr, Hr] = h.useState("Qty"); h.useEffect(() => { na() }, []), h.useEffect(() => { U === "lead" && g.length === 0 && nr() }, [U]); const nr = async () => { try { const Fe = (await Yt.getLeads({ page: 1, limit: 1e3 }))?.data?.leads || []; f(Fe) } catch (ve) { console.error(ve), R.error("Failed to load leads") } finally { } }; h.useEffect(() => { i && (async () => { try { const ve = await ie.get(`/quotations/${n}`), Fe = ve?.data?.data?.quotation || ve?.data?.quotation || ve?.data; if (!Fe) return; if (L(Fe.quotationNumber || ""), H(Fe.title || ""), G(Fe.status ? Fe.status.charAt(0) + Fe.status.slice(1).toLowerCase() : "Draft"), Ee(Fe.currency || "USD"), ke(Fe.validUntil ? String(Fe.validUntil).slice(0, 10) : ""), Ne(Fe.createdAt ? String(Fe.createdAt).slice(0, 10) : je), Et(""), et(Fe.lead?.email || Ve), Fe.lead) { K("lead"), J(String(Fe.leadId)); const Ie = `${Fe.lead.firstName || ""} ${Fe.lead.lastName || ""}`.trim(); De(Ie), j(Ie) } if (Array.isArray(Fe.items) && Ut(Fe.items.map(Ie => ({ description: Ie.name || Ie.description || "", longDescription: Ie.description || "", quantity: Number(Ie.quantity || 1), unit: Ie.unit || "Unit", rate: Number(Ie.unitPrice || 0), taxRate: Number(Ie.taxRate || 0), amount: Number(Ie.totalAmount || 0), isOptional: !1 }))), Fe.terms) { le(Fe.terms); const Ie = M.find(Vt => Vt.content === Fe.terms); Ie && X(Ie.id.toString()) } } catch { } })() }, [i, n]), h.useEffect(() => { const ve = s.get("entityType") || null, Fe = s.get("entityId"); if (!ve || !Fe) return; const Ie = parseInt(Fe); (async () => { try { if (ve === "lead") { const Vt = await Yt.getLeadById(Ie), ht = Vt?.data?.lead || Vt?.data || Vt; if (ht) { K("lead"), J(String(ht.id)), H(`Proposal for ${ht.firstName} ${ht.lastName}`); const re = `${ht.firstName || ""} ${ht.lastName || ""}`.trim(); De(re), j(re), et(ht.email || ""), Y(ht.phone || ""), Et(ht.address || ""), Ft(ht.city || ""), ce(ht.state || ""), jt(ht.country || ""), Le(ht.zipCode || ""), ht?.currency && Ee(ht.currency) } } else if (ve === "deal") { const Vt = await ua.getDealById(Ie), ht = Vt?.data || Vt; if (ht) { if (He(String(ht.id)), ht.lead) { K("lead"), J(String(ht.lead.id)); const re = `${ht.lead.firstName || ""} ${ht.lead.lastName || ""}`.trim(); H(ht.title ? `${ht.title}` : `Proposal for ${re || "Lead"}`), De(re), j(re), et(ht.lead.email || ""), Y("") } else H(ht.title || "Proposal"); ht.currency && Ee(ht.currency) } } } catch { } })() }, [s]), h.useEffect(() => { const ve = Fe => { k.current && !k.current.contains(Fe.target) && S(!1), $.current && !$.current.contains(Fe.target) && A(null) }; return document.addEventListener("mousedown", ve), () => document.removeEventListener("mousedown", ve) }, []), h.useEffect(() => { const ve = setTimeout(() => { b.length >= 2 && U ? lr(b) : (p([]), S(!1)) }, 300); return () => clearTimeout(ve) }, [b, U, g]), h.useEffect(() => { r?.primary && !i && (he === "USD" || !he) && Ee(r.primary) }, [r, i]), h.useEffect(() => { if (Xe) { const ve = K6(Xe); ve && Ee(ve) } }, [Xe]); const na = async () => { try { const [ve, Fe, Ie, Vt] = await Promise.all([ie.get("/quotations/template"), ie.get("/products?search=&page=1&limit=50"), ie.get("/business-settings/terms-and-conditions"), Pl.getAll()]); if (ve.data.success) { const ht = ve.data.data; m(ht.users || []) } if (Fe.data.success) { const ht = Fe.data.data; C(ht.products || ht.items || []) } if (Ie.data.success) { const ht = Ie.data.data; q(ht || []) } Vt && W(Vt); try { const ht = await ie.get("/quotations/next-number"); if (ht.data.success) { const re = ht.data.data.nextNumber; T(re), ee || L(re) } } catch (ht) { console.error("Error fetching next quotation number:", ht) } } catch (ve) { console.error("Error fetching initial data:", ve) } }, lr = ve => { if (!U) { R.info("Please select Lead first"); return } if (!ve.trim()) { p([]), S(!1); return } const Fe = g.filter(Ie => `${Ie.firstName || ""} ${Ie.lastName || ""}`.trim().toLowerCase().includes(ve.trim().toLowerCase())); p(Fe), S(!0) }, ia = ve => { J(ve.id.toString()); const Fe = [ve.firstName, ve.lastName].filter(Boolean), Ie = Fe.length > 0 ? Fe.join(" ") : ve.email || "Unknown Lead"; De(Ie), j(Ie), et(ve.email || ""), Y(ve.phone || ""), Et(ve.address || ""), Ft(ve.city || ""), ce(ve.state || ""), jt(ve.country || ""), Le(ve.zipCode || ""), S(!1), R.success("Lead selected and details auto-filled") }, xa = (ve, Fe) => { const Ie = [...Nt], Vt = Number(Fe.price || Fe.unitPrice || 0), ht = Number(Fe.taxRate || 0), Pe = (Ie[ve].quantity || 1) * Vt, We = Pe * (ht / 100), bt = Fe.name || Fe.title || Fe.itemName || Fe.productName || ""; Ie[ve] = { ...Ie[ve], description: bt, longDescription: Fe.description || Fe.details || "", rate: Vt, unit: Fe.unit || "Unit", taxRate: ht, productId: String(Fe.id), amount: Pe + We }, Ut(Ie), A(null), I("") }, Wr = () => { Ut([...Nt, { description: "", longDescription: "", quantity: 1, unit: "Unit", rate: 0, taxRate: 0, amount: 0, isOptional: !1, productId: "" }]) }, Vr = ve => { Nt.length > 1 && Ut(Nt.filter((Fe, Ie) => Ie !== ve)) }, jr = (ve, Fe, Ie) => { const Vt = [...Nt]; Vt[ve] = { ...Vt[ve], [Fe]: Ie }; const ht = Vt[ve], re = ht.quantity * ht.rate, Pe = re * (ht.taxRate / 100); ht.amount = re + Pe, Ut(Vt) }, ge = () => Nt.reduce((ve, Fe) => ve + Fe.quantity * Fe.rate, 0), Qe = () => Nt.reduce((ve, Fe) => { const Ie = Fe.quantity * Fe.rate; return ve + Ie * (Fe.taxRate / 100) }, 0), Rt = () => { const ve = ge(); return Ge === "%" ? ve * (sr / 100) : sr }, Ct = () => { const ve = ge(), Fe = Qe(), Ie = Rt(); return ve + Fe - Ie + wr }, xe = async (ve = !1) => { console.log("handleSubmit called with sendImmediately:", ve), console.log("Form data:", { subject: _, relatedId: Z, email: Ve, relatedType: U, toField: ne, items: Nt }); const Fe = Z && U || ne && Ve; if (!Fe) { console.error("Validation failed:", { subject: !!_, hasValidRecipient: Fe, relatedId: !!Z, relatedType: !!U, toField: !!ne, email: !!Ve }), R.error("Please select a lead or enter recipient details manually"); return } try { c(!0); const Ie = _ || (U === "lead" && ne ? `Quotation for ${ne}` : "New Quotation"), Vt = { quotationNumber: ee || void 0, subject: Ie, relatedType: U, relatedId: parseInt(Z), ...pe ? { dealId: parseInt(pe) } : {}, status: ve ? "Sent" : te, assignedTo: de ? parseInt(de) : null, to: ne, address: $e, city: Bt, state: mt, country: Xe, zipCode: Q, email: Ve, phone: pt, date: je, openTill: fe, currency: he, discountType: Ge, discountValue: sr, adjustmentValue: wr, tags: vt, allowComments: vr, items: Nt, terms: se || void 0 }; console.log("Sending payload:", Vt); const ht = i ? await ie.put(`/quotations/${n}`, { title: Ie, status: te.toUpperCase(), currency: he, validUntil: fe || null, notes: void 0, terms: void 0 }) : await ie.post("/quotations", Vt); console.log("API response:", ht), ht.data.success && (R.success(`Quotation ${ve ? "created and sent" : "saved"} successfully!`), e("/quotations")) } catch (Ie) { console.error("Error creating quotation:", Ie), console.error("Error response:", Ie.response), R.error(Ie.response?.data?.message || "Failed to create quotation") } finally { c(!1) } }, _e = ge(), Be = Qe(), zt = Rt(), At = Ct(), Ns = ve => ve.name || ve.title || ve.itemName || ve.productName || (typeof ve == "string" ? ve : "") || "Unnamed Product", Cr = ve => ve.description || ve.details || ve.longDescription || ve.summary || ""; return t.jsx("div", { className: "min-h-screen bg-gray-50 dark:bg-slate-950", children: t.jsxs("div", { className: "mx-auto px-6 py-6", children: [t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-1", children: i ? "Edit Quotation" : "Create New Quotation" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Create professional quotations for your leads and track your sales pipeline" })] }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx(ue, { variant: "SECONDARY", onClick: () => xe(!1), disabled: o, className: "px-4 py-2", children: "Save as Draft" }), t.jsx(ue, { variant: "PRIMARY", onClick: () => xe(!0), loading: o, loadingText: "Saving...", className: "px-6 py-2", children: "Save & Send" })] })] }) }), t.jsxs("div", { className: "space-y-6", children: [t.jsxs("div", { className: "space-y-6", children: [t.jsx(Ae, { padding: "lg", children: t.jsxs("div", { className: "grid grid-cols-12 gap-4", children: [t.jsxs("div", { className: "col-span-12 sm:col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Quotation Number" }), t.jsxs("div", { className: "space-y-2", children: [t.jsx("input", { type: "text", value: ee, onChange: ve => L(ve.target.value), placeholder: z || "Auto-generated", className: "input-base" }), z && t.jsxs("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: ["Preview: ", z, " (leave empty for auto-generation)"] })] })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-3", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Status" }), t.jsxs("select", { value: te, onChange: ve => G(ve.target.value), className: "input-base appearance-none", children: [t.jsx("option", { value: "Draft", children: "Draft" }), t.jsx("option", { value: "Sent", children: "Sent" }), t.jsx("option", { value: "Viewed", children: "Viewed" }), t.jsx("option", { value: "Accepted", children: "Accepted" }), t.jsx("option", { value: "Rejected", children: "Rejected" })] })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-3", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Assigned" }), t.jsxs("select", { value: de, onChange: ve => Te(ve.target.value), className: "input-base appearance-none", children: [t.jsx("option", { value: "", children: "Select User" }), u.map(ve => t.jsxs("option", { value: ve.id, children: [ve.firstName, " ", ve.lastName] }, ve.id))] })] }), t.jsxs("div", { className: "col-span-12", ref: k, children: [t.jsxs("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: [t.jsx("span", { className: "text-red-500", children: "*" }), " Lead"] }), t.jsxs("div", { className: "relative", children: [t.jsxs("button", { type: "button", onClick: () => { S(!v), U !== "lead" && K("lead") }, className: "w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white hover:border-blue-500 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all flex items-center justify-between group", children: [t.jsx("span", { className: `truncate font-medium ${ne ? "" : "text-gray-500"}`, children: ne || "Select Lead..." }), t.jsx(_s, { size: 16, className: "text-gray-400 group-hover:text-blue-500 flex-shrink-0 ml-2 transition-colors" })] }), v && t.jsxs("div", { className: "absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl max-h-64 overflow-hidden z-50", children: [t.jsx("div", { className: "p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50", children: t.jsxs("div", { className: "relative", children: [t.jsx(Xr, { size: 14, className: "absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" }), t.jsx("input", { type: "text", value: b, onChange: ve => { j(ve.target.value), lr(ve.target.value) }, autoFocus: !0, placeholder: "Search leads...", className: "w-full pl-9 pr-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent", onClick: ve => ve.stopPropagation() })] }) }), t.jsx("div", { className: "overflow-y-auto max-h-48", children: y.length > 0 ? y.map(ve => { const Fe = [ve.firstName, ve.lastName].filter(Boolean), Ie = Fe.length > 0 ? Fe.join(" ") : ve.email || "Unknown Lead", Vt = Fe.length > 0 ? Fe.map(ht => ht[0]).join("").toUpperCase() : ve.email?.[0]?.toUpperCase() || "?"; return t.jsx("button", { type: "button", onClick: () => ia(ve), className: "w-full text-left px-4 py-3 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-0", children: t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 font-semibold flex items-center justify-center text-xs shrink-0", children: Vt }), t.jsxs("div", { className: "min-w-0", children: [t.jsx("div", { className: "text-sm font-semibold text-gray-900 dark:text-white truncate", children: Ie }), t.jsx("div", { className: "text-xs text-gray-500 dark:text-gray-400 truncate", children: ve.email })] })] }) }, ve.id) }) : t.jsx("div", { className: "px-4 py-8 text-sm text-gray-500 dark:text-gray-400 text-center", children: t.jsx("p", { children: "No leads found" }) }) })] })] })] }), t.jsxs("div", { className: "col-span-12", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Address" }), t.jsx("textarea", { value: $e, onChange: ve => Et(ve.target.value), rows: 2, className: "input-base" })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "City" }), t.jsx("input", { type: "text", value: Bt, onChange: ve => Ft(ve.target.value), className: "input-base" })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "State" }), t.jsx("input", { type: "text", value: mt, onChange: ve => ce(ve.target.value), className: "input-base" })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Country" }), t.jsxs("select", { value: Xe, onChange: ve => jt(ve.target.value), className: "input-base appearance-none", children: [t.jsx("option", { value: "", children: "Select Country" }), t.jsx("option", { value: "US", children: "United States" }), t.jsx("option", { value: "IN", children: "India" }), t.jsx("option", { value: "UK", children: "United Kingdom" }), t.jsx("option", { value: "CA", children: "Canada" }), t.jsx("option", { value: "AU", children: "Australia" })] })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Zip Code" }), t.jsx("input", { type: "text", value: Q, onChange: ve => Le(ve.target.value), className: "input-base" })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-6", children: [t.jsxs("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: [t.jsx("span", { className: "text-red-500", children: "*" }), " Email"] }), t.jsx("input", { type: "email", value: Ve, onChange: ve => et(ve.target.value), className: "input-base", required: !0 })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Phone" }), t.jsx("input", { type: "tel", value: pt, onChange: ve => Y(ve.target.value), className: "input-base" })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-4", children: [t.jsxs("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: [t.jsx("span", { className: "text-red-500", children: "*" }), " Date"] }), t.jsx("input", { type: "date", value: je, onChange: ve => Ne(ve.target.value), className: "input-base", required: !0 })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-4", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Open Till" }), t.jsx("input", { type: "date", value: fe, onChange: ve => ke(ve.target.value), className: "input-base", min: je })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-4", children: [t.jsxs("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: [t.jsx("span", { className: "text-red-500", children: "*" }), " Currency"] }), t.jsx("select", { value: he, onChange: ve => Ee(ve.target.value), className: "input-base cursor-pointer", required: !0, children: r?.supportedCurrencies?.length ? r.supportedCurrencies.map(ve => t.jsx("option", { value: ve, children: ve }, ve)) : t.jsxs(t.Fragment, { children: [t.jsx("option", { value: "USD", children: "USD $" }), t.jsx("option", { value: "INR", children: "INR " }), t.jsx("option", { value: "EUR", children: "EUR " }), t.jsx("option", { value: "GBP", children: "GBP " })] }) })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Discount Type" }), t.jsxs("select", { value: Ge, onChange: ve => qe(ve.target.value), className: "input-base appearance-none", children: [t.jsx("option", { value: "none", children: "No discount" }), t.jsx("option", { value: "%", children: "Percentage" }), t.jsx("option", { value: "fixed", children: "Fixed Amount" })] })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Tags" }), t.jsx("input", { type: "text", value: vt, onChange: ve => yr(ve.target.value), placeholder: "Enter tags", className: "input-base" })] })] }) }), t.jsx(Ae, { padding: "lg", children: t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700", children: [t.jsxs("div", { children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Quotation Items" }), t.jsxs("p", { className: "text-sm text-gray-500 dark:text-gray-400 mt-1", children: [Nt.length, " ", Nt.length === 1 ? "item" : "items", " added"] })] }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsxs("button", { type: "button", onClick: () => { sessionStorage.setItem("quotation_draft", JSON.stringify({ subject: _, relatedType: U, relatedId: Z, status: te, assignedTo: de, toField: ne, address: $e, city: Bt, state: mt, country: Xe, zipCode: Q, email: Ve, phone: pt, date: je, openTill: fe, currency: he, items: Nt, discountType: Ge, discountValue: sr, adjustmentValue: wr })), e("/products?returnTo=quotation") }, className: "inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-sm", children: [t.jsx(Fn, { size: 16 }), "Add from Catalog"] }), t.jsxs("button", { type: "button", onClick: Wr, className: "inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-sm", children: [t.jsx($t, { size: 16 }), "Add Item"] })] })] }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("span", { className: "text-sm font-medium text-gray-700 dark:text-gray-300", children: "Show quantity as:" }), t.jsxs("div", { className: "inline-flex rounded-lg border border-gray-300 dark:border-gray-600 overflow-hidden shadow-sm", children: [t.jsx("button", { type: "button", onClick: () => Hr("Qty"), className: `px-4 py-2 text-sm font-medium transition-colors ${Sr === "Qty" ? "bg-blue-600 text-white" : "bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`, children: "Qty" }), t.jsx("button", { type: "button", onClick: () => Hr("Hours"), className: `px-4 py-2 text-sm font-medium border-l border-gray-300 dark:border-gray-600 transition-colors ${Sr === "Hours" ? "bg-blue-600 text-white" : "bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`, children: "Hours" }), t.jsx("button", { type: "button", onClick: () => Hr("Qty/Hours"), className: `px-4 py-2 text-sm font-medium border-l border-gray-300 dark:border-gray-600 transition-colors ${Sr === "Qty/Hours" ? "bg-blue-600 text-white" : "bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`, children: "Qty/Hours" })] })] }), t.jsx("div", { className: "overflow-visible border border-gray-200 dark:border-gray-700 rounded-lg", children: t.jsx("div", { className: "overflow-visible", children: t.jsxs("table", { className: "w-full", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-12", children: t.jsx("input", { type: "checkbox", className: "w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500" }) }), t.jsx("th", { className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[180px]", children: "Item" }), t.jsx("th", { className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[150px]", children: "Description" }), t.jsx("th", { className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[200px]", children: "Long Description" }), t.jsx("th", { className: "px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-24", children: Sr }), t.jsx("th", { className: "px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-24", children: "Unit" }), t.jsxs("th", { className: "px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-28", children: ["Rate (", he, ")"] }), t.jsx("th", { className: "px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-24", children: "Tax %" }), t.jsxs("th", { className: "px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-32", children: ["Amount (", he, ")"] }), t.jsx("th", { className: "px-4 py-3 w-12" })] }) }), t.jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: Nt.map((ve, Fe) => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsx("td", { className: "px-4 py-3", children: t.jsx("input", { type: "checkbox", checked: ve.isOptional, onChange: Ie => jr(Fe, "isOptional", Ie.target.checked), className: "w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500", title: "Mark as optional" }) }), t.jsx("td", { className: "px-4 py-3 relative", children: t.jsxs("div", { className: "relative", ref: N === Fe ? $ : null, children: [t.jsxs("button", { type: "button", onClick: () => A(N === Fe ? null : Fe), className: "w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white hover:border-blue-500 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all flex items-center justify-between group", children: [t.jsx("span", { className: "truncate font-medium", children: ve.description || "Select Product..." }), t.jsx(_s, { size: 16, className: "text-gray-400 group-hover:text-blue-500 flex-shrink-0 ml-2 transition-colors" })] }), N === Fe && t.jsx("div", { className: "fixed inset-0 z-40", onClick: () => A(null) }), N === Fe && t.jsxs("div", { className: "absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl max-h-64 overflow-hidden z-50", children: [t.jsx("div", { className: "p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50", children: t.jsxs("div", { className: "relative", children: [t.jsx(Xr, { size: 14, className: "absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" }), t.jsx("input", { type: "text", placeholder: "Search products...", value: D, onChange: Ie => I(Ie.target.value), className: "w-full pl-9 pr-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent", onClick: Ie => Ie.stopPropagation() })] }) }), t.jsxs("div", { className: "overflow-y-auto max-h-60", children: [E.filter(Ie => { const Vt = Ns(Ie).toLowerCase(), ht = Cr(Ie).toLowerCase(), re = D.toLowerCase(); return !D || Vt.includes(re) || ht.includes(re) }).map(Ie => t.jsx("button", { type: "button", onClick: () => xa(Fe, Ie), className: "w-full text-left px-4 py-3 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-0", children: t.jsx("div", { className: "flex items-center justify-between gap-2", children: t.jsx("div", { className: "min-w-0", children: t.jsx("div", { className: "font-semibold text-gray-900 dark:text-white truncate text-sm", children: Ns(Ie) }) }) }) }, Ie.id)), E.length === 0 && t.jsxs("div", { className: "px-4 py-8 text-sm text-gray-500 dark:text-gray-400 text-center", children: [t.jsx(Fn, { size: 32, className: "mx-auto mb-2 text-gray-300 dark:text-gray-600" }), t.jsx("p", { children: "No products found" }), t.jsx("button", { type: "button", onClick: () => e("/products?returnTo=quotation"), className: "mt-3 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium", children: "Browse Products" })] })] })] })] }) }), t.jsx("td", { className: "px-4 py-3", children: t.jsx("input", { type: "text", value: ve.description, onChange: Ie => jr(Fe, "description", Ie.target.value), placeholder: "Enter description", className: "w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent" }) }), t.jsx("td", { className: "px-4 py-3", children: t.jsx("textarea", { value: ve.longDescription, onChange: Ie => jr(Fe, "longDescription", Ie.target.value), placeholder: "Additional details...", rows: 2, className: "w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none" }) }), t.jsx("td", { className: "px-4 py-3", children: t.jsx("input", { type: "number", value: ve.quantity, onChange: Ie => jr(Fe, "quantity", parseFloat(Ie.target.value) || 0), min: "0", step: "0.01", className: "w-full px-3 py-2 text-sm text-right border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent" }) }), t.jsx("td", { className: "px-4 py-3", children: t.jsx("input", { type: "text", value: ve.unit, onChange: Ie => jr(Fe, "unit", Ie.target.value), placeholder: "Unit", className: "w-full px-3 py-2 text-sm text-center border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent" }) }), t.jsx("td", { className: "px-4 py-3", children: t.jsx("input", { type: "number", value: ve.rate, onChange: Ie => jr(Fe, "rate", parseFloat(Ie.target.value) || 0), min: "0", step: "0.01", placeholder: "0.00", className: "w-full px-3 py-2 text-sm text-right border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent" }) }), t.jsx("td", { className: "px-4 py-3", children: t.jsxs("select", { value: ve.taxRate, onChange: Ie => jr(Fe, "taxRate", parseFloat(Ie.target.value)), className: "w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none", children: [t.jsx("option", { value: "0", children: "No Tax" }), B.filter(Ie => Ie.isActive).map(Ie => t.jsxs("option", { value: Ie.rate, children: [Ie.name, " (", Ie.rate, "%)"] }, Ie.id))] }) }), t.jsx("td", { className: "px-4 py-3 text-right", children: t.jsx("span", { className: "text-sm font-bold text-gray-900 dark:text-white", children: a(ve.amount, he) }) }), t.jsx("td", { className: "px-4 py-3 text-center", children: Nt.length > 1 && t.jsx("button", { type: "button", onClick: () => Vr(Fe), className: "p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors", title: "Remove item", children: t.jsx(yt, { size: 16 }) }) })] }, Fe)) })] }) }) }), Nt.some(ve => ve.isOptional) && t.jsxs("div", { className: "inline-flex items-center gap-2 px-4 py-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg", children: [t.jsx("div", { className: "w-2 h-2 bg-blue-600 rounded-full" }), t.jsx("span", { className: "text-sm text-blue-700 dark:text-blue-300 font-medium", children: "Items marked as optional are indicated with a checkbox" })] })] }) })] }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [t.jsx("div", { className: "lg:col-span-2", children: t.jsx(Ae, { padding: "lg", className: "h-full", children: t.jsxs("div", { className: "grid grid-cols-12 gap-4", children: [t.jsxs("div", { className: "col-span-12", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Terms & Conditions" }), t.jsxs("select", { value: V, onChange: ve => { const Fe = ve.target.value; if (X(Fe), Fe) { const Ie = M.find(Vt => Vt.id.toString() === Fe); Ie && le(Ie.content) } else le("") }, className: "input-base appearance-none", children: [t.jsx("option", { value: "", children: "Select Terms & Conditions Template" }), M.filter(ve => ve.isActive).map(ve => t.jsxs("option", { value: ve.id, children: [ve.name, " ", ve.isDefault ? "(Default)" : ""] }, ve.id))] }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Choose a template or leave empty to use default terms" })] }), V && t.jsxs("div", { className: "col-span-12", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Selected Template Content" }), t.jsx("div", { className: "bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 max-h-32 overflow-y-auto", children: t.jsx("p", { className: "text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap", children: se }) })] }), t.jsx("div", { className: "col-span-12", children: t.jsxs("label", { className: "flex items-center gap-2 cursor-pointer", children: [t.jsx("input", { type: "checkbox", checked: vr, onChange: ve => tr(ve.target.checked), className: "w-4 h-4 text-blue-600 border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500" }), t.jsx("span", { className: "text-sm font-medium text-gray-700 dark:text-gray-300", children: "Allow Comments" })] }) })] }) }) }), t.jsx("div", { className: "lg:col-span-1 space-y-6", children: t.jsx(Ae, { padding: "lg", className: "sticky top-20", children: t.jsxs("div", { className: "space-y-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white pb-3 border-b border-gray-200 dark:border-gray-700", children: "Summary" }), t.jsxs("div", { className: "space-y-3", children: [t.jsxs("div", { className: "flex items-center justify-between text-sm", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Subtotal" }), t.jsx("span", { className: "font-semibold text-gray-900 dark:text-white", children: a(_e, he) })] }), Be > 0 && t.jsxs("div", { className: "flex items-center justify-between text-sm", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Total Tax" }), t.jsx("span", { className: "font-semibold text-gray-900 dark:text-white", children: a(Be, he) })] }), t.jsxs("div", { className: "flex items-center justify-between text-sm", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Discount" }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("input", { type: "number", value: sr, onChange: ve => _r(parseFloat(ve.target.value) || 0), min: "0", step: "0.01", className: "w-20 px-2 py-1 text-xs text-right border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500" }), t.jsxs("select", { value: Ge, onChange: ve => qe(ve.target.value), className: "px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500", children: [t.jsx("option", { value: "%", children: "%" }), t.jsx("option", { value: "fixed", children: he })] })] })] }), zt > 0 && t.jsx("div", { className: "flex items-center justify-end", children: t.jsxs("span", { className: "text-sm text-red-600 dark:text-red-400 font-medium", children: ["-", a(zt, he)] }) }), t.jsxs("div", { className: "flex items-center justify-between text-sm", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Adjustment" }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("input", { type: "number", value: wr, onChange: ve => kr(parseFloat(ve.target.value) || 0), step: "0.01", className: "w-20 px-2 py-1 text-xs text-right border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500" }), t.jsx("span", { className: "text-xs text-gray-500 dark:text-gray-400", children: he })] })] }), t.jsxs("div", { className: "pt-3 mt-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between", children: [t.jsx("span", { className: "text-base font-semibold text-gray-900 dark:text-white", children: "Total" }), t.jsx("span", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: a(At, he) })] })] }), t.jsxs("div", { className: "flex flex-col gap-2 pt-4", children: [t.jsx(ue, { variant: "SECONDARY", fullWidth: !0, onClick: () => xe(!1), disabled: o, children: "Save as Draft" }), t.jsx(ue, { variant: "PRIMARY", fullWidth: !0, onClick: () => xe(!0), loading: o, loadingText: "Saving...", children: "Save & Send" })] })] }) }) })] })] }), t.jsx("div", { className: "h-8" })] }) }) }; var Gie = {}; const Kie = () => {
    const { id: e } = gi(), r = xt(), [a, s] = h.useState(null), [n, i] = h.useState(null), [o, c] = h.useState(!0), [u, m] = h.useState(!1); h.useEffect(() => { g(), f() }, [e]); const g = async () => { try { c(!0); const S = await ie.get(`/quotations/${e}`); S.data.success && s(S.data.data.quotation) } catch (S) { R.error(S?.response?.data?.message || "Failed to fetch quotation"), r("/quotations") } finally { c(!1) } }, f = async () => { try { const S = await ie.get("/business-settings/all"); S.data.success && i(S.data.data) } catch (S) { console.error("Error fetching business settings:", S) } }, y = async () => { if (a) try { m(!0); const S = await ie.get(`/quotations/${e}/pdf/download`, { responseType: "blob" }), k = window.URL.createObjectURL(new Blob([S.data])), E = document.createElement("a"); E.href = k, E.setAttribute("download", `${a.quotationNumber}.pdf`), document.body.appendChild(E), E.click(), E.remove(), R.success("Quotation downloaded successfully") } catch { R.error("Failed to download PDF") } finally { m(!1) } }, p = () => { window.print() }, b = async S => { if (a) try { m(!0); let k = "", E = ""; switch (S) { case "accept": k = `/quotations/${e}/accept`, E = "Quotation marked as accepted"; break; case "reject": k = `/quotations/${e}/reject`, E = "Quotation marked as rejected"; break; case "send": k = `/quotations/${e}/send`, E = "Quotation marked as sent"; break }(await ie.put(k)).data.success && (R.success(E), g()) } catch { R.error("Failed to update quotation status") } finally { m(!1) } }, j = S => { switch (S) { case "ACCEPTED": return { label: "Accepted", color: "bg-green-100 text-green-800" }; case "REJECTED": return { label: "Rejected", color: "bg-red-100 text-red-800" }; case "SENT": return { label: "Sent", color: "bg-blue-100 text-blue-800" }; case "DRAFT": return { label: "Draft", color: "bg-gray-100 text-gray-800" }; default: return { label: S, color: "bg-gray-100 text-gray-800" } } }; if (o || !a) return t.jsx("div", { className: "flex items-center justify-center min-h-screen", children: t.jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600" }) }); const v = j(a.status); return t.jsxs("div", {
        className: "min-h-screen bg-gray-50 dark:bg-slate-950 pb-12 print:bg-white print:pb-0", children: [t.jsx("div", { className: "bg-white dark:bg-slate-900 border-b border-gray-200 dark:border-slate-800 py-4 px-6 sticky top-0 z-10 print:hidden", children: t.jsxs("div", { className: "max-w-5xl mx-auto flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx("button", { onClick: () => r("/quotations"), className: "p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full transition-colors", children: t.jsx(pr, { className: "w-5 h-5 text-gray-600 dark:text-gray-400" }) }), t.jsxs("div", { children: [t.jsxs("h1", { className: "text-xl font-bold text-gray-900 dark:text-white flex items-center gap-3", children: [a.quotationNumber, t.jsx("span", { className: `px-2.5 py-0.5 rounded-full text-xs font-bold uppercase tracking-wider ${v.color}`, children: v.label })] }), t.jsxs("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: ["Created on ", Hc(new Date(a.createdAt), "PPP")] })] })] }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsxs(ue, { variant: "SECONDARY", size: "SM", onClick: p, children: [t.jsx(aU, { className: "w-4 h-4 mr-2" }), " Print"] }), t.jsxs(ue, { variant: "SECONDARY", size: "SM", onClick: y, loading: u, children: [t.jsx(ys, { className: "w-4 h-4 mr-2" }), " PDF"] }), a.status === "DRAFT" && t.jsxs(ue, { variant: "PRIMARY", size: "SM", onClick: () => b("send"), loading: u, children: [t.jsx(Ll, { className: "w-4 h-4 mr-2" }), " Send"] }), a.status === "SENT" && t.jsxs(t.Fragment, { children: [t.jsxs(ue, { variant: "SECONDARY", size: "SM", className: "text-red-600 hover:bg-red-50", onClick: () => b("reject"), loading: u, children: [t.jsx(Ca, { className: "w-4 h-4 mr-2" }), " Reject"] }), t.jsxs(ue, { variant: "PRIMARY", size: "SM", onClick: () => b("accept"), loading: u, children: [t.jsx(ut, { className: "w-4 h-4 mr-2" }), " Accept"] })] }), t.jsxs(ue, { variant: "SECONDARY", size: "SM", onClick: () => r(`/quotations/edit/${e}`), children: [t.jsx(Jt, { className: "w-4 h-4 mr-2" }), " Edit"] })] })] }) }), t.jsx("div", { className: "max-w-5xl mx-auto pt-8 px-6 print:pt-0 print:px-0", children: t.jsxs(Ae, { className: "shadow-2xl border-none p-0 overflow-hidden dark:bg-slate-900 print:shadow-none print:bg-white", children: [t.jsx("div", { className: "h-2 bg-indigo-600 print:h-1" }), t.jsxs("div", { className: "p-12 print:p-8", children: [t.jsxs("div", { className: "flex flex-col md:flex-row justify-between gap-8 mb-16", children: [t.jsxs("div", { className: "space-y-6 max-w-md", children: [n?.companyLogo ? t.jsx("img", { src: n.companyLogo.startsWith("data:image") ? n.companyLogo : `${Gie.REACT_APP_API_URL || ""}/uploads/${n.companyLogo}`, alt: "Logo", className: "h-16 w-auto object-contain" }) : t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "w-12 h-12 bg-indigo-600 rounded-xl flex items-center justify-center", children: t.jsx(qi, { className: "text-white w-7 h-7" }) }), t.jsx("span", { className: "text-2xl font-black text-slate-800 dark:text-white tracking-tight", children: n?.companyName || "WE-CONNECT" })] }), t.jsxs("div", { className: "space-y-1 text-sm text-slate-500 dark:text-slate-400 font-medium", children: [t.jsx("p", { className: "text-slate-900 dark:text-slate-200 font-bold text-base mb-2", children: n?.companyName }), t.jsxs("p", { className: "flex items-center gap-2", children: [t.jsx($o, { className: "w-3.5 h-3.5" }), " ", n?.companyAddress] }), t.jsxs("p", { className: "flex items-center gap-2", children: [t.jsx(ir, { className: "w-3.5 h-3.5" }), " ", n?.companyEmail] }), t.jsxs("p", { className: "flex items-center gap-2", children: [t.jsx(ma, { className: "w-3.5 h-3.5" }), " ", n?.companyPhone] }), n?.companyWebsite && t.jsxs("p", { className: "flex items-center gap-2", children: [t.jsx(bf, { className: "w-3.5 h-3.5" }), " ", n?.companyWebsite] })] })] }), t.jsxs("div", { className: "text-left md:text-right space-y-4 min-w-[200px]", children: [t.jsx("h2", { className: "text-5xl font-black text-slate-900 dark:text-white tracking-tighter opacity-10 print:opacity-20 uppercase", children: "Quotation" }), t.jsxs("div", { className: "space-y-1 pt-4", children: [t.jsx("p", { className: "text-xs font-bold text-slate-400 uppercase tracking-widest", children: "Quotation Number" }), t.jsx("p", { className: "text-2xl font-black text-indigo-600", children: a.quotationNumber })] }), t.jsxs("div", { className: "grid grid-cols-2 gap-4 pt-4 md:float-right", children: [t.jsxs("div", { className: "space-y-1", children: [t.jsx("p", { className: "text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-none", children: "Date" }), t.jsx("p", { className: "text-sm font-bold text-slate-800 dark:text-slate-200", children: Hc(new Date(a.createdAt), "dd MMM, yyyy") })] }), t.jsxs("div", { className: "space-y-1", children: [t.jsx("p", { className: "text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-none", children: "Valid Until" }), t.jsx("p", { className: "text-sm font-bold text-slate-800 dark:text-slate-200", children: a.validUntil ? Hc(new Date(a.validUntil), "dd MMM, yyyy") : "-" })] })] })] })] }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-12 mb-16 px-8 py-10 bg-slate-50 dark:bg-slate-800/50 rounded-3xl border border-slate-100 dark:border-slate-800 print:bg-white print:border-slate-200", children: [t.jsxs("div", { className: "space-y-6", children: [t.jsxs("div", { className: "flex items-center gap-3 text-indigo-600 font-bold uppercase tracking-widest text-xs", children: [t.jsx("span", { className: "w-8 h-[2px] bg-indigo-600" }), "Recipient"] }), a.lead ? t.jsxs("div", { className: "space-y-3", children: [t.jsxs("div", { children: [t.jsxs("h3", { className: "text-xl font-bold text-slate-900 dark:text-white", children: [a.lead.firstName, " ", a.lead.lastName] }), a.lead.company && t.jsx("p", { className: "text-slate-500 dark:text-slate-400 font-semibold", children: a.lead.company })] }), t.jsxs("div", { className: "space-y-1 text-sm text-slate-600 dark:text-slate-400 font-medium", children: [a.lead.address && t.jsxs("p", { className: "flex items-start gap-2", children: [t.jsx($o, { className: "w-4 h-4 mt-0.5 shrink-0" }), " ", a.lead.address] }), t.jsxs("p", { className: "flex items-center gap-2", children: [t.jsx(ir, { className: "w-4 h-4 shrink-0" }), " ", a.lead.email] }), a.lead.phone && t.jsxs("p", { className: "flex items-center gap-2", children: [t.jsx(ma, { className: "w-4 h-4 shrink-0" }), " ", a.lead.phone] })] })] }) : t.jsx("p", { className: "text-slate-400 italic font-medium", children: "Customer details not specified" })] }), t.jsxs("div", { className: "space-y-6", children: [t.jsxs("div", { className: "flex items-center gap-3 text-slate-400 font-bold uppercase tracking-widest text-xs", children: [t.jsx("span", { className: "w-8 h-[2px] bg-slate-300" }), "Subject & Description"] }), t.jsxs("div", { className: "space-y-3", children: [t.jsx("h3", { className: "text-xl font-bold text-slate-900 dark:text-white leading-tight", children: a.title }), a.description && t.jsx("p", { className: "text-sm text-slate-500 dark:text-slate-400 leading-relaxed font-medium", children: a.description })] })] })] }), t.jsx("div", { className: "mb-12 overflow-hidden rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm print:shadow-none", children: t.jsxs("table", { className: "w-full text-left border-collapse", children: [t.jsx("thead", { children: t.jsxs("tr", { className: "bg-slate-900 border-b border-slate-800", children: [t.jsx("th", { className: "px-6 py-5 text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 text-center w-16", children: "#" }), t.jsx("th", { className: "px-6 py-5 text-[10px] font-black uppercase tracking-[0.2em] text-slate-400", children: "Description" }), t.jsx("th", { className: "px-6 py-5 text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 text-center w-24", children: "Qty" }), t.jsx("th", { className: "px-6 py-5 text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 text-right w-40", children: "Unit Price" }), t.jsx("th", { className: "px-6 py-5 text-[10px] font-black uppercase tracking-[0.2em] text-slate-200 text-right w-40", children: "Amount" })] }) }), t.jsx("tbody", { className: "divide-y divide-slate-100 dark:divide-slate-800", children: a.items?.map((S, k) => t.jsxs("tr", { className: "group hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors", children: [t.jsx("td", { className: "px-6 py-6 text-sm font-black text-slate-300 dark:text-slate-600 text-center", children: String(k + 1).padStart(2, "0") }), t.jsxs("td", { className: "px-6 py-6", children: [t.jsx("p", { className: "font-bold text-slate-900 dark:text-white mb-1 group-hover:text-indigo-600 transition-colors", children: S.name }), S.description && t.jsx("p", { className: "text-xs text-slate-500 dark:text-slate-400 font-medium line-clamp-2", children: S.description })] }), t.jsxs("td", { className: "px-6 py-6 text-sm font-bold text-slate-900 dark:text-white text-center", children: [S.quantity, " ", t.jsx("span", { className: "text-[10px] text-slate-400 uppercase ml-1", children: S.unit || "pcs" })] }), t.jsxs("td", { className: "px-6 py-6 text-sm font-semibold text-slate-900 dark:text-white text-right font-mono", children: [a.currency, " ", Number(S.unitPrice).toLocaleString("en-US", { minimumFractionDigits: 2 })] }), t.jsxs("td", { className: "px-6 py-6 text-sm font-black text-slate-900 dark:text-white text-right font-mono", children: [a.currency, " ", Number(S.totalAmount).toLocaleString("en-US", { minimumFractionDigits: 2 })] })] }, S.id)) })] }) }), t.jsxs("div", { className: "flex flex-col md:flex-row justify-between gap-12 border-t border-slate-100 dark:border-slate-800 pt-16", children: [t.jsxs("div", { className: "max-w-md space-y-8 flex-1", children: [a.notes && t.jsxs("div", { className: "space-y-4 p-6 bg-slate-50 dark:bg-slate-800/30 rounded-2xl border border-slate-100 dark:border-slate-800/50", children: [t.jsxs("h4", { className: "text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2", children: [t.jsx(dr, { className: "w-3.5 h-3.5" }), " Additional Notes"] }), t.jsx("p", { className: "text-xs text-slate-600 dark:text-slate-400 leading-relaxed font-medium", children: a.notes })] }), a.terms && t.jsxs("div", { className: "space-y-4 p-6 bg-indigo-50/30 dark:bg-slate-800/30 rounded-2xl border border-indigo-100/50 dark:border-slate-800/50", children: [t.jsxs("h4", { className: "text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2", children: [t.jsx(Mt, { className: "w-3.5 h-3.5" }), " Terms & Conditions"] }), t.jsx("p", { className: "text-xs text-slate-600 dark:text-slate-400 leading-relaxed font-medium", children: a.terms })] })] }), t.jsxs("div", { className: "min-w-[320px] space-y-4", children: [t.jsxs("div", { className: "space-y-3 px-2", children: [t.jsxs("div", { className: "flex justify-between text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider", children: [t.jsx("span", { children: "Subtotal" }), t.jsxs("span", { className: "text-slate-900 dark:text-white", children: [a.currency, " ", Number(a.subtotal).toLocaleString("en-US", { minimumFractionDigits: 2 })] })] }), Number(a.taxAmount) > 0 && t.jsxs("div", { className: "flex justify-between text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider", children: [t.jsx("span", { children: "Tax Amount" }), t.jsxs("span", { className: "text-slate-900 dark:text-white", children: ["+", a.currency, " ", Number(a.taxAmount).toLocaleString("en-US", { minimumFractionDigits: 2 })] })] }), Number(a.discountAmount) > 0 && t.jsxs("div", { className: "flex justify-between text-sm font-bold text-red-500 uppercase tracking-wider", children: [t.jsx("span", { children: "Discount" }), t.jsxs("span", { children: ["-", a.currency, " ", Number(a.discountAmount).toLocaleString("en-US", { minimumFractionDigits: 2 })] })] })] }), t.jsxs("div", { className: "bg-indigo-600 rounded-3xl p-8 text-white shadow-xl shadow-indigo-600/20", children: [t.jsxs("div", { className: "flex items-center justify-between mb-2", children: [t.jsx("span", { className: "text-[10px] font-black uppercase tracking-[0.2em] text-indigo-200", children: "Total Amount Due" }), t.jsx(Zt, { className: "w-4 h-4 text-indigo-200 opacity-50" })] }), t.jsxs("div", { className: "flex items-baseline gap-2", children: [t.jsx("span", { className: "text-xl font-bold opacity-70", children: a.currency }), t.jsx("span", { className: "text-4xl font-black tracking-tighter tabular-nums", children: Number(a.totalAmount).toLocaleString("en-US", { minimumFractionDigits: 2 }) })] })] })] })] }), t.jsxs("div", { className: "mt-24 pt-8 border-t border-slate-100 dark:border-slate-800 text-center", children: [t.jsxs("p", { className: "text-xs text-slate-400 font-bold uppercase tracking-widest mb-1", children: ["Thank you for choosing ", n?.companyName || "our services"] }), t.jsx("p", { className: "text-[10px] text-slate-400 font-medium", children: "This is a computer generated document and does not require a physical signature." })] })] })] }) }), t.jsx("style", {
            dangerouslySetInnerHTML: {
                __html: `
        @media print {
          body { background-color: white !important; }
          .min-h-screen { min-h-0 !important; }
          card { box-shadow: none !important; }
          footer, nav, .print-hidden { display: none !important; }
        }
      `}
        })]
    })
}, Yie = () => { const { hasPermission: e } = mr(), r = xt(), [a] = vm(), [s, n] = h.useState([]), [i, o] = h.useState(!0), [c, u] = h.useState(""), [m, g] = h.useState("ALL"), [f, y] = h.useState("card"), [p, b] = h.useState(["invoiceNumber", "customer", "email", "related", "totalAmount", "paidAmount", "status", "dueDate", "createdAt"]), [j, v] = h.useState(1), [S, k] = h.useState(10); h.useEffect(() => { try { const A = localStorage.getItem("invoices_visible_columns"); if (A) { const D = JSON.parse(A); Array.isArray(D) && D.every(I => typeof I == "string") && b(D) } } catch { } }, []), h.useEffect(() => { try { localStorage.setItem("invoices_visible_columns", JSON.stringify(p)) } catch { } }, [p]), h.useEffect(() => { E() }, [c, m]); const E = async () => { try { o(!0); const A = await ie.get("/invoices", { params: { search: c || void 0, status: m !== "ALL" ? m : void 0 } }); if (A.data.success) { const D = A.data.data || {}, $ = (Array.isArray(D) ? D : D.items || []).map(B => ({ id: B.id, invoiceNumber: B.invoiceNumber, title: B.title, totalAmount: Number(B.totalAmount) || 0, paidAmount: Number(B.paidAmount) || 0, currency: B.currency || "USD", status: B.status, dueDate: B.dueDate, createdAt: B.createdAt, customerName: B.lead ? `${B.lead.firstName || ""} ${B.lead.lastName || ""}`.trim() || B.lead.company : void 0, customerEmail: B.lead?.email, relatedTo: B.deal ? `Deal #${B.deal.id}` : B.lead ? `Lead #${B.lead.id}` : void 0, relatedType: B.dealId ? "deal" : B.leadId ? "lead" : void 0 })); n($) } } catch (A) { console.error("Error fetching invoices:", A), R.error(A?.response?.data?.message || "Failed to fetch invoices"), n([]) } finally { o(!1) } }, C = A => { const D = { DRAFT: "bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300", SENT: "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300", VIEWED: "bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300", PAID: "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300", PARTIALLY_PAID: "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300", OVERDUE: "bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300", CANCELLED: "bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300", REFUNDED: "bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300" }; return D[A] || D.DRAFT }, N = s.filter(A => { const D = A.invoiceNumber.toLowerCase().includes(c.toLowerCase()) || A.title.toLowerCase().includes(c.toLowerCase()) || A.customerName?.toLowerCase().includes(c.toLowerCase()), I = m === "ALL" || A.status === m; return D && I }); return i ? t.jsx("div", { className: "flex items-center justify-center h-96", children: t.jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-weconnect-red" }) }) : t.jsx("div", { className: "min-h-screen bg-gray-50 dark:bg-gray-900", children: t.jsxs("div", { className: "mx-auto px-6 py-6 space-y-6", children: [t.jsx("div", { children: t.jsx(Td, { title: "Invoices", subtitle: "Track payments and manage all your invoices", addLabel: "Create Invoice", onAdd: e("deal.create") ? () => { const A = a.get("entityType"), D = a.get("entityId"); r(A && D ? `/invoices/new?entityType=${A}&entityId=${D}` : "/invoices/new") } : void 0, bulkActions: [{ label: "Export Invoices (Excel)", icon: t.jsx(Bo, { className: "w-4 h-4" }), onClick: () => { const A = ["Invoice #", "Title", "Customer", "Email", "Related", "Total Amount", "Paid Amount", "Status", "Created", "Due Date"], D = N.map(I => [I.invoiceNumber, I.title, I.customerName || "", I.customerEmail || "", I.relatedTo || "", `${I.currency} ${Number(I.totalAmount).toLocaleString()}`, `${I.currency} ${(Number(I.paidAmount) || 0).toLocaleString()}`, I.status, new Date(I.createdAt).toLocaleDateString(), I.dueDate ? new Date(I.dueDate).toLocaleDateString() : ""]); Dd("invoices_export.csv", A, D) } }, { label: "Export Invoices (PDF)", icon: t.jsx(Mt, { className: "w-4 h-4" }), onClick: () => { const A = ["Invoice #", "Title", "Customer", "Email", "Related", "Total Amount", "Paid Amount", "Status", "Created", "Due Date"], D = N.map(I => [I.invoiceNumber, I.title, I.customerName || "", I.customerEmail || "", I.relatedTo || "", `${I.currency} ${Number(I.totalAmount).toLocaleString()}`, `${I.currency} ${(Number(I.paidAmount) || 0).toLocaleString()}`, I.status, new Date(I.createdAt).toLocaleDateString(), I.dueDate ? new Date(I.dueDate).toLocaleDateString() : ""]); vx("Invoices", A, D) } }] }) }), t.jsx(Ae, { className: "p-6", children: t.jsxs("div", { className: "flex flex-col md:flex-row gap-4", children: [t.jsxs("div", { className: "flex-1 relative", children: [t.jsx(Xr, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400", size: 20 }), t.jsx("input", { type: "text", placeholder: "Search invoices...", value: c, onChange: A => u(A.target.value), className: "w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-slate-800 dark:text-white" })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx(Zc, { size: 20, className: "text-gray-500" }), t.jsxs("select", { value: m, onChange: A => g(A.target.value), className: "px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-slate-800 dark:text-white", children: [t.jsx("option", { value: "ALL", children: "All Status" }), t.jsx("option", { value: "DRAFT", children: "Draft" }), t.jsx("option", { value: "SENT", children: "Sent" }), t.jsx("option", { value: "VIEWED", children: "Viewed" }), t.jsx("option", { value: "PAID", children: "Paid" }), t.jsx("option", { value: "PARTIALLY_PAID", children: "Partially Paid" }), t.jsx("option", { value: "OVERDUE", children: "Overdue" }), t.jsx("option", { value: "CANCELLED", children: "Cancelled" }), t.jsx("option", { value: "REFUNDED", children: "Refunded" })] })] }), t.jsxs("div", { className: "hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto", children: [t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${f === "list" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => y("list"), title: "List view", children: t.jsx(fi, { className: "w-4 h-4" }) }), t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${f === "card" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => y("card"), title: "Card view", children: t.jsx(hi, { className: "w-4 h-4" }) })] })] }) }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-4 gap-4", children: [t.jsxs(Ae, { className: "p-4 bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 border-emerald-200 dark:border-emerald-800", children: [t.jsx("div", { className: "text-emerald-600 dark:text-emerald-400 text-sm font-medium", children: "Total Invoices" }), t.jsx("div", { className: "text-2xl font-bold text-emerald-900 dark:text-emerald-100 mt-1", children: s.length })] }), t.jsxs(Ae, { className: "p-4 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800", children: [t.jsx("div", { className: "text-green-600 dark:text-green-400 text-sm font-medium", children: "Paid" }), t.jsx("div", { className: "text-2xl font-bold text-green-900 dark:text-green-100 mt-1", children: s.filter(A => A.status === "PAID").length })] }), t.jsxs(Ae, { className: "p-4 bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800", children: [t.jsx("div", { className: "text-red-600 dark:text-red-400 text-sm font-medium", children: "Overdue" }), t.jsx("div", { className: "text-2xl font-bold text-red-900 dark:text-red-100 mt-1", children: s.filter(A => A.status === "OVERDUE").length })] }), t.jsxs(Ae, { className: "p-4 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200 dark:border-blue-800", children: [t.jsx("div", { className: "text-blue-600 dark:text-blue-400 text-sm font-medium", children: "Total Revenue" }), t.jsxs("div", { className: "text-2xl font-bold text-blue-900 dark:text-blue-100 mt-1", children: ["$", s.reduce((A, D) => A + (Number(D.paidAmount) || 0), 0).toLocaleString()] })] })] }), f === "card" ? t.jsx("div", { className: "space-y-4", children: N.length === 0 ? t.jsxs(Ae, { className: "p-12 text-center", children: [t.jsx($i, { size: 64, className: "mx-auto text-gray-400 dark:text-gray-600 mb-4" }), t.jsx("h3", { className: "text-xl font-semibold text-gray-900 dark:text-white mb-2", children: "No Invoices Found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-6", children: c || m !== "ALL" ? "Try adjusting your filters" : "Create your first invoice to get started" }), e("deal.create") && t.jsx(ue, { onClick: () => r("/invoices/new"), children: "Create Invoice" })] }) : N.map(A => t.jsx(Ae, { className: "p-6 hover:shadow-2xl transition-all duration-200 hover:scale-[1.01]", children: t.jsxs("div", { className: "flex items-start justify-between", children: [t.jsxs("div", { className: "flex items-start space-x-4 flex-1", children: [t.jsx("div", { className: "p-3 bg-gradient-to-br from-emerald-100 to-emerald-200 dark:from-emerald-900 dark:to-emerald-800 rounded-2xl", children: t.jsx($i, { size: 28, className: "text-emerald-600 dark:text-emerald-400" }) }), t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center gap-3 mb-2", children: [t.jsx("h3", { className: "text-xl font-bold text-gray-900 dark:text-white", children: A.invoiceNumber }), t.jsx("span", { className: `px-3 py-1.5 text-xs font-bold rounded-full ${C(A.status)}`, children: A.status.replace("_", " ") })] }), t.jsx("p", { className: "text-base font-medium text-gray-700 dark:text-gray-300 mb-2", children: A.title }), t.jsxs("div", { className: "flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400", children: [t.jsxs("span", { children: ["Customer: ", t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: A.customerName })] }), A.relatedTo && t.jsx("span", { children: "" }), A.relatedTo && t.jsxs("span", { children: ["Related: ", t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: A.relatedTo })] })] }), t.jsxs("div", { className: "flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400 mt-2", children: [t.jsxs("span", { children: ["Created: ", new Date(A.createdAt).toLocaleDateString()] }), A.dueDate && t.jsxs(t.Fragment, { children: [t.jsx("span", { children: "" }), t.jsxs("span", { children: ["Due: ", new Date(A.dueDate).toLocaleDateString()] })] })] }), A.status === "PARTIALLY_PAID" && t.jsxs("div", { className: "mt-3", children: [t.jsxs("div", { className: "flex items-center justify-between text-xs text-gray-600 dark:text-gray-400 mb-1", children: [t.jsx("span", { children: "Payment Progress" }), t.jsxs("span", { children: ["$", (Number(A.paidAmount) || 0).toLocaleString(), " / $", Number(A.totalAmount).toLocaleString()] })] }), t.jsx("div", { className: "w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2", children: t.jsx("div", { className: "bg-gradient-to-r from-yellow-500 to-yellow-600 h-2 rounded-full transition-all duration-300", style: { width: `${(Number(A.paidAmount) || 0) / Number(A.totalAmount) * 100}%` } }) })] })] })] }), t.jsxs("div", { className: "text-right ml-6", children: [t.jsxs("div", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-1", children: [A.currency, " $", Number(A.totalAmount).toLocaleString()] }), A.status === "PARTIALLY_PAID" && t.jsxs("div", { className: "text-sm text-yellow-600 dark:text-yellow-400 mb-3 font-medium", children: ["$", (Number(A.paidAmount) || 0).toLocaleString(), " paid"] }), A.status === "PAID" && t.jsxs("div", { className: "text-sm text-green-600 dark:text-green-400 mb-3 font-medium flex items-center justify-end gap-1", children: [t.jsx(Qr, { size: 14 }), "Fully Paid"] }), t.jsxs("div", { className: "flex items-center gap-2 mt-3", children: [t.jsx(ue, { size: "SM", variant: "GHOST", title: "View", onClick: async () => { try { const D = await ie.get(`/invoices/${A.id}/pdf/preview`, { responseType: "blob" }), I = URL.createObjectURL(new Blob([D.data], { type: "application/pdf" })); window.open(I, "_blank") } catch (D) { R.error(D?.response?.data?.message || "Failed to preview invoice") } }, children: t.jsx(Ht, { size: 16 }) }), t.jsx(ue, { size: "SM", variant: "GHOST", title: "Edit", onClick: () => r(`/invoices/edit/${A.id}`), children: t.jsx(Jt, { size: 16 }) }), t.jsx(ue, { size: "SM", variant: "GHOST", title: "Download", onClick: async () => { try { const D = await ie.get(`/invoices/${A.id}/pdf/download`, { responseType: "blob" }), I = URL.createObjectURL(new Blob([D.data])), $ = document.createElement("a"); $.href = I, $.download = `${A.invoiceNumber || "invoice"}.pdf`, $.click(), R.success("Invoice downloaded successfully") } catch (D) { R.error(D?.response?.data?.message || "Failed to download invoice") } }, children: t.jsx(ys, { size: 16 }) }), A.status === "DRAFT" && t.jsx(ue, { size: "SM", variant: "PRIMARY", className: "ml-2", title: "Send", onClick: async () => { try { await ie.put(`/invoices/${A.id}/send`), R.success("Invoice sent successfully"), E() } catch (D) { R.error(D?.response?.data?.message || "Failed to send invoice") } }, children: t.jsx(Ll, { size: 16 }) }), t.jsx(ue, { size: "SM", variant: "GHOST", className: "text-red-600 hover:text-red-700", title: "Delete", onClick: async () => { if (window.confirm("Are you sure you want to delete this invoice?")) try { await ie.delete(`/invoices/${A.id}`), R.success("Invoice deleted successfully"), E() } catch (D) { R.error(D?.response?.data?.message || "Failed to delete invoice") } }, children: t.jsx(yt, { size: 16 }) })] })] })] }) }, A.id)) }) : t.jsxs(Ae, { className: "overflow-hidden bg-white dark:bg-gray-800 shadow-sm", children: [t.jsx(io, { currentPage: j, itemsPerPage: S, totalItems: N.length, onItemsPerPageChange: A => { k(A), v(1) }, columnConfig: { columns: [{ id: "invoiceNumber", label: "Invoice #" }, { id: "customer", label: "Customer" }, { id: "email", label: "Email" }, { id: "related", label: "Related" }, { id: "totalAmount", label: "Total Amount" }, { id: "paidAmount", label: "Paid Amount" }, { id: "status", label: "Status" }, { id: "dueDate", label: "Due Date" }, { id: "createdAt", label: "Created" }], visibleColumns: p, onChange: b, minVisible: 1 } }), t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-gray-800/50", children: t.jsxs("tr", { children: [p.includes("invoiceNumber") && t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Invoice #" }), p.includes("customer") && t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Customer" }), p.includes("email") && t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Email" }), p.includes("related") && t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Related" }), p.includes("totalAmount") && t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Total" }), p.includes("paidAmount") && t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Paid" }), p.includes("status") && t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Status" }), p.includes("dueDate") && t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Due Date" }), p.includes("createdAt") && t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Created" }), t.jsx("th", { className: "px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Actions" })] }) }), t.jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: N.length === 0 ? t.jsx("tr", { children: t.jsxs("td", { colSpan: p.length + 1, className: "px-6 py-12 text-center", children: [t.jsx($i, { size: 64, className: "mx-auto text-gray-400 dark:text-gray-600 mb-4" }), t.jsx("h3", { className: "text-xl font-semibold text-gray-900 dark:text-white mb-2", children: "No Invoices Found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-6", children: c || m !== "ALL" ? "Try adjusting your filters" : "Create your first invoice to get started" }), e("deal.create") && t.jsx(ue, { onClick: () => r("/invoices/new"), children: "Create Invoice" })] }) }) : N.map(A => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-700/50", children: [p.includes("invoiceNumber") && t.jsxs("td", { className: "px-6 py-4 whitespace-nowrap", children: [t.jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: A.invoiceNumber }), t.jsx("div", { className: "text-xs text-gray-500 dark:text-gray-400", children: A.title })] }), p.includes("customer") && t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white", children: A.customerName || "-" }), p.includes("email") && t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400", children: A.customerEmail || "-" }), p.includes("related") && t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400", children: A.relatedTo || "-" }), p.includes("totalAmount") && t.jsxs("td", { className: "px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white", children: [A.currency, " $", Number(A.totalAmount).toLocaleString()] }), p.includes("paidAmount") && t.jsxs("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400", children: [A.currency, " $", (Number(A.paidAmount) || 0).toLocaleString()] }), p.includes("status") && t.jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: t.jsx("span", { className: `inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold ${C(A.status)}`, children: A.status.replace("_", " ") }) }), p.includes("dueDate") && t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400", children: A.dueDate ? new Date(A.dueDate).toLocaleDateString() : "-" }), p.includes("createdAt") && t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400", children: new Date(A.createdAt).toLocaleDateString() }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-right text-sm font-medium", children: t.jsxs("div", { className: "flex items-center justify-end gap-2", children: [t.jsx(ue, { size: "SM", variant: "GHOST", title: "View", onClick: async () => { try { const D = await ie.get(`/invoices/${A.id}/pdf/preview`, { responseType: "blob" }), I = URL.createObjectURL(new Blob([D.data], { type: "application/pdf" })); window.open(I, "_blank") } catch (D) { R.error(D?.response?.data?.message || "Failed to preview invoice") } }, children: t.jsx(Ht, { size: 16 }) }), t.jsx(ue, { size: "SM", variant: "GHOST", title: "Edit", onClick: () => r(`/invoices/edit/${A.id}`), children: t.jsx(Jt, { size: 16 }) }), t.jsx(ue, { size: "SM", variant: "GHOST", title: "Download", onClick: async () => { try { const D = await ie.get(`/invoices/${A.id}/pdf/download`, { responseType: "blob" }), I = URL.createObjectURL(new Blob([D.data])), $ = document.createElement("a"); $.href = I, $.download = `${A.invoiceNumber || "invoice"}.pdf`, $.click(), R.success("Invoice downloaded successfully") } catch (D) { R.error(D?.response?.data?.message || "Failed to download invoice") } }, children: t.jsx(ys, { size: 16 }) })] }) })] }, A.id)) })] }) })] })] }) }) }, RP = () => { const e = xt(), { currencySettings: r, formatCurrency: a } = Br(), [s] = vm(), { id: n } = gi(), i = !!n, [o, c] = h.useState(!1), [u, m] = h.useState([]), [g, f] = h.useState([]), [y, p] = h.useState(null), [b, j] = h.useState(""), v = h.useRef(null), [S, k] = h.useState([]), [E, C] = h.useState(""), [N, A] = h.useState([]), [D, I] = h.useState(!1), $ = h.useRef(null), [B, W] = h.useState([]), [M, q] = h.useState(""), [V, X] = h.useState(""), [se, le] = h.useState(""), [ee, L] = h.useState(""), [z, T] = h.useState("Draft"), [_, H] = h.useState(""), [U, K] = h.useState(""), [Z, J] = h.useState(""), [te, G] = h.useState(""), [de, Te] = h.useState(""), [pe, He] = h.useState(""), [ne, De] = h.useState(""), [$e, Et] = h.useState(""), [Bt, Ft] = h.useState(""), [mt, ce] = h.useState(new Date().toISOString().split("T")[0]), [Xe, jt] = h.useState(""), [Q, Le] = h.useState(r?.primary || "USD"), [Ve, et] = h.useState("none"), [pt, Y] = h.useState(""), [je, Ne] = h.useState(""), [fe, ke] = h.useState([]), [he, Ee] = h.useState(""), [Ge, qe] = h.useState(""), [vt, yr] = h.useState([{ description: "", longDescription: "", quantity: 1, unit: "Unit", rate: 0, taxRate: 0, amount: 0, isOptional: !1, productId: "" }]), [vr, tr] = h.useState(0), [Nt, Ut] = h.useState(0), [sr, _r] = h.useState("Qty"); h.useEffect(() => { wr() }, []), h.useEffect(() => { i && (async () => { try { const xe = await ie.get(`/invoices/${n}`), _e = xe?.data?.data?.invoice || xe?.data?.invoice || xe?.data; if (!_e) return; if (q(_e.invoiceNumber || ""), T(_e.status ? _e.status.charAt(0) + _e.status.slice(1).toLowerCase() : "Draft"), Le(_e.currency || "USD"), jt(_e.dueDate ? String(_e.dueDate).slice(0, 10) : ""), ce(_e.createdAt ? String(_e.createdAt).slice(0, 10) : mt), Y(_e.notes || ""), Ne(_e.terms || ""), qe(_e.terms || ""), _e.terms) { const Be = fe.find(zt => zt.content === _e.terms); Be && Ee(Be.id.toString()) } Et(_e.lead?.email || $e), _e.lead && le(String(_e.leadId)), Array.isArray(_e.items) && yr(_e.items.map(Be => ({ description: Be.name || Be.description || "", longDescription: Be.description || "", quantity: Number(Be.quantity || 1), unit: Be.unit || "Unit", rate: Number(Be.unitPrice || 0), taxRate: Number(Be.taxRate || 0), amount: Number(Be.totalAmount || 0), isOptional: !1, productId: Be.productId ? String(Be.productId) : "" }))) } catch (xe) { console.error("Error loading invoice:", xe) } })() }, [i, n]), h.useEffect(() => { const xe = _e => { v.current && !v.current.contains(_e.target) && p(null), $.current && !$.current.contains(_e.target) && I(!1) }; return document.addEventListener("mousedown", xe), () => document.removeEventListener("mousedown", xe) }, []), h.useEffect(() => { const xe = setTimeout(() => { E.length >= 1 ? kr(E) : A([]) }, 300); return () => clearTimeout(xe) }, [E, B]), h.useEffect(() => { if (pe) { const xe = K6(pe); xe && Le(xe) } }, [pe]), h.useEffect(() => { const xe = s.get("entityType") || null, _e = s.get("entityId"); if (!xe || !_e || i) return; const Be = parseInt(_e); (async () => { try { if (xe === "lead") { const zt = await Yt.getLeadById(Be), At = zt?.data?.lead || zt?.data || zt; At && (le(String(At.id)), Et(At.email || ""), Ft(At.phone || ""), J(At.address || ""), G(At.city || ""), Te(At.state || ""), He(At.country || ""), De(At.zipCode || ""), At?.currency && Le(At.currency)) } else if (xe === "deal") { const zt = await ua.getDealById(Be), At = zt?.data?.deal || zt?.data || zt; At && K(String(At.id)) } } catch (zt) { console.error("Error loading entity:", zt) } })() }, [s, i]), h.useEffect(() => { r?.primary && !i && (Q === "USD" || !Q) && Le(r.primary) }, [r, i]); const wr = async () => { try { const [xe, _e, Be, zt, At, Ns] = await Promise.all([ie.get("/quotations/template"), ie.get("/business-settings/terms-and-conditions"), ie.get("/leads?page=1&limit=100"), ie.get("/business-settings/all"), ie.get("/products?page=1&limit=100"), Pl.getAll()]); if (xe.data.success) { const Cr = xe.data.data; m(Cr.users || []) } if (_e.data.success) { const Cr = _e.data.data; ke(Cr || []) } if (Be.data.success) { const Cr = Be.data.data; W(Cr.leads || Cr.items || []) } if (At.data.success) { const Cr = At.data.data; f(Cr.products || Cr.items || []) } if (Ns && k(Ns), zt.data.success) try { const Cr = await ie.get("/invoices/next-number"); if (Cr.data.success) { const ve = Cr.data.data.nextNumber; X(ve), M || q(ve) } } catch (Cr) { console.error("Error fetching next invoice number:", Cr) } } catch (xe) { console.error("Error fetching initial data:", xe) } }, kr = xe => { if (!xe.trim()) { A([]); return } const _e = B.filter(Be => { const zt = `${Be.firstName || ""} ${Be.lastName || ""}`.trim().toLowerCase(), At = (Be.email || "").toLowerCase().includes(xe.toLowerCase()); return zt.includes(xe.trim().toLowerCase()) || At }); A(_e), I(!0) }, Sr = xe => { le(xe.id.toString()); const _e = [xe.firstName, xe.lastName].filter(Boolean), Be = _e.length > 0 ? _e.join(" ") : xe.email || "Unknown Customer"; L(Be), C(Be), Et(xe.email || ""), Ft(xe.phone || ""), J(xe.address || ""), G(xe.city || ""), Te(xe.state || ""), He(xe.country || ""), De(xe.zipCode || ""), xe?.currency && Le(xe.currency), I(!1), R.success("Customer selected and details auto-filled") }, Hr = (xe, _e) => { const Be = [...vt], zt = Number(_e.price || _e.unitPrice || 0), At = Number(_e.taxRate || 0), Cr = (Be[xe].quantity || 1) * zt, ve = Cr * (At / 100); Be[xe] = { ...Be[xe], description: _e.name || _e.title || "", longDescription: _e.description || "", rate: zt, unit: _e.unit || "Unit", taxRate: At, productId: _e.id.toString(), amount: Cr + ve }, yr(Be), p(null), j("") }, nr = () => { yr([...vt, { description: "", longDescription: "", quantity: 1, unit: "Unit", rate: 0, taxRate: 0, amount: 0, isOptional: !1 }]) }, na = xe => { vt.length > 1 && yr(vt.filter((_e, Be) => Be !== xe)) }, lr = (xe, _e, Be) => { const zt = [...vt]; zt[xe] = { ...zt[xe], [_e]: Be }; const At = zt[xe], Ns = At.quantity * At.rate, Cr = Ns * (At.taxRate / 100); At.amount = Ns + Cr, yr(zt) }, ia = () => vt.reduce((xe, _e) => xe + _e.quantity * _e.rate, 0), xa = () => vt.reduce((xe, _e) => { const Be = _e.quantity * _e.rate; return xe + Be * (_e.taxRate / 100) }, 0), Wr = () => { const xe = ia(); return Ve === "%" ? xe * (vr / 100) : vr }, Vr = () => { const xe = ia(), _e = xa(), Be = Wr(); return xe + _e - Be + Nt }, jr = async (xe = !1) => { if (!se || !$e) { R.error("Please select a customer and ensure email is filled"); return } if (vt.length === 0 || vt.some(_e => !_e.description || _e.rate === 0)) { R.error("Please add at least one item with description and rate"); return } try { c(!0); const _e = Wr(), Be = { invoiceNumber: M || void 0, title: pt || "Invoice", description: pt, status: xe ? "Sent" : z.toUpperCase(), currency: Q, dueDate: Xe || null, notes: pt, terms: je, leadId: se ? parseInt(se, 10) : null, dealId: U ? parseInt(U, 10) : null, createdBy: parseInt(localStorage.getItem("userId") || "1", 10), discountAmount: Ve === "fixed" ? _e : 0, items: vt.map(At => ({ name: At.description, description: At.longDescription, quantity: At.quantity, unit: At.unit, unitPrice: At.rate, taxRate: At.taxRate, discountRate: Ve === "%" ? vr : 0, productId: At.productId && !isNaN(parseInt(At.productId)) ? parseInt(At.productId, 10) : void 0 })) }, zt = i ? await ie.put(`/invoices/${n}`, { title: pt || "Invoice", status: z.toUpperCase(), currency: Q, dueDate: Xe || null, notes: pt, terms: je }) : await ie.post("/invoices", Be); if (zt.data.success) { if (R.success(`Invoice ${i ? "updated" : xe ? "created and sent" : "saved"} successfully!`), xe && !i) { const At = zt.data.data?.invoice?.id || zt.data.data?.id; At && await ie.put(`/invoices/${At}/send`) } e("/invoices") } } catch (_e) { console.error("Error creating invoice:", _e), console.error("Payload was:", { invoiceNumber: M, title: pt, status: z.toUpperCase(), leadId: parseInt(se), items: vt }), R.error(_e.response?.data?.message || "Failed to create invoice") } finally { c(!1) } }, ge = ia(), Qe = xa(), Rt = Wr(), Ct = Vr(); return t.jsx("div", { className: "min-h-screen bg-gray-50 dark:bg-slate-950", children: t.jsxs("div", { className: "mx-auto px-6 py-6", children: [t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-1", children: i ? "Edit Invoice" : "Create New Invoice" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Create professional invoices for your customers and track payments" })] }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx(ue, { variant: "SECONDARY", onClick: () => jr(!1), disabled: o, className: "px-4 py-2", children: "Save as Draft" }), t.jsx(ue, { variant: "PRIMARY", onClick: () => jr(!0), loading: o, loadingText: "Saving...", className: "px-6 py-2", children: "Save & Send" })] })] }) }), t.jsxs("div", { className: "flex flex-col gap-6", children: [t.jsx("div", { className: "space-y-6", children: t.jsxs(Ae, { padding: "lg", children: [t.jsxs("div", { className: "grid grid-cols-12 gap-4", children: [t.jsxs("div", { className: "col-span-12 sm:col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Invoice Number" }), t.jsxs("div", { className: "space-y-2", children: [t.jsx("input", { type: "text", value: M || V || "Auto-generated", readOnly: !0, disabled: !0, className: "input-base bg-gray-100 dark:bg-gray-700 cursor-not-allowed" }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Auto-generated from Business Settings" })] })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-6", ref: $, children: [t.jsxs("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: [t.jsx("span", { className: "text-red-500", children: "*" }), " Customer"] }), t.jsxs("div", { className: "relative", children: [t.jsxs("button", { type: "button", onClick: () => I(!D), className: "w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white hover:border-blue-500 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all flex items-center justify-between group", children: [t.jsx("span", { className: `truncate font-medium ${ee ? "" : "text-gray-500"}`, children: ee || "Select Customer..." }), t.jsx(_s, { size: 16, className: "text-gray-400 group-hover:text-blue-500 flex-shrink-0 ml-2 transition-colors" })] }), D && t.jsxs("div", { className: "absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl max-h-64 overflow-hidden z-50", children: [t.jsx("div", { className: "p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50", children: t.jsxs("div", { className: "relative", children: [t.jsx(Xr, { size: 14, className: "absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" }), t.jsx("input", { type: "text", value: E, onChange: xe => { C(xe.target.value), kr(xe.target.value) }, autoFocus: !0, placeholder: "Search customers...", className: "w-full pl-9 pr-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent", onClick: xe => xe.stopPropagation() })] }) }), t.jsx("div", { className: "overflow-y-auto max-h-48", children: (E ? N : B).length > 0 ? (E ? N : B).map(xe => { const _e = [xe.firstName, xe.lastName].filter(Boolean), Be = _e.length > 0 ? _e.join(" ") : xe.email || "Unknown Customer", zt = _e.length > 0 ? _e.map(At => At[0]).join("").toUpperCase() : xe.email?.[0]?.toUpperCase() || "?"; return t.jsx("button", { type: "button", onClick: () => Sr(xe), className: "w-full text-left px-4 py-3 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-0", children: t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 font-semibold flex items-center justify-center text-xs shrink-0", children: zt }), t.jsxs("div", { className: "min-w-0", children: [t.jsx("div", { className: "text-sm font-semibold text-gray-900 dark:text-white truncate", children: Be }), t.jsx("div", { className: "text-xs text-gray-500 dark:text-gray-400 truncate", children: xe.email })] })] }) }, xe.id) }) : t.jsx("div", { className: "px-4 py-8 text-sm text-gray-500 dark:text-gray-400 text-center", children: t.jsx("p", { children: "No customers found" }) }) })] })] })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Status" }), t.jsxs("select", { value: z, onChange: xe => T(xe.target.value), className: "input-base appearance-none", children: [t.jsx("option", { value: "DRAFT", children: "Draft" }), t.jsx("option", { value: "SENT", children: "Sent" }), t.jsx("option", { value: "PAID", children: "Paid" })] })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Assigned" }), t.jsxs("select", { value: _, onChange: xe => H(xe.target.value), className: "input-base appearance-none", children: [t.jsx("option", { value: "", children: "Select User" }), u.map(xe => t.jsxs("option", { value: xe.id, children: [xe.firstName, " ", xe.lastName] }, xe.id))] })] }), t.jsxs("div", { className: "col-span-12", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Address" }), t.jsx("textarea", { value: Z, onChange: xe => J(xe.target.value), rows: 2, className: "input-base" })] }), t.jsxs("div", { className: "col-span-12 sm:col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "City" }), t.jsx("input", { type: "text", value: te, onChange: xe => G(xe.target.value), className: "input-base" })] }), t.jsxs("div", { className: "col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "State" }), t.jsx("input", { type: "text", value: de, onChange: xe => Te(xe.target.value), className: "input-base" })] }), t.jsxs("div", { className: "col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Country" }), t.jsxs("select", { value: pe, onChange: xe => He(xe.target.value), className: "input-base appearance-none", children: [t.jsx("option", { value: "", children: "Select Country" }), t.jsx("option", { value: "US", children: "United States" }), t.jsx("option", { value: "IN", children: "India" }), t.jsx("option", { value: "UK", children: "United Kingdom" }), t.jsx("option", { value: "CA", children: "Canada" }), t.jsx("option", { value: "AU", children: "Australia" })] })] }), t.jsxs("div", { className: "col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Zip Code" }), t.jsx("input", { type: "text", value: ne, onChange: xe => De(xe.target.value), className: "input-base" })] }), t.jsxs("div", { className: "col-span-6", children: [t.jsxs("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: [t.jsx("span", { className: "text-red-500", children: "*" }), " Email"] }), t.jsx("input", { type: "email", value: $e, onChange: xe => Et(xe.target.value), className: "input-base", required: !0 })] }), t.jsxs("div", { className: "col-span-6", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Phone" }), t.jsx("input", { type: "tel", value: Bt, onChange: xe => Ft(xe.target.value), className: "input-base" })] }), t.jsxs("div", { className: "col-span-3", children: [t.jsxs("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: [t.jsx("span", { className: "text-red-500", children: "*" }), " Invoice Date"] }), t.jsx("input", { type: "date", value: mt, onChange: xe => ce(xe.target.value), className: "input-base", required: !0 })] }), t.jsxs("div", { className: "col-span-3", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Due Date" }), t.jsx("input", { type: "date", value: Xe, onChange: xe => jt(xe.target.value), className: "input-base", min: mt })] }), t.jsxs("div", { className: "col-span-3", children: [t.jsxs("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: [t.jsx("span", { className: "text-red-500", children: "*" }), " Currency"] }), t.jsx("select", { value: Q, onChange: xe => Le(xe.target.value), className: "input-base cursor-pointer", required: !0, children: r?.supportedCurrencies?.length ? r.supportedCurrencies.map(xe => t.jsx("option", { value: xe, children: xe }, xe)) : t.jsxs(t.Fragment, { children: [t.jsx("option", { value: "USD", children: "USD $" }), t.jsx("option", { value: "INR", children: "INR " }), t.jsx("option", { value: "EUR", children: "EUR " }), t.jsx("option", { value: "GBP", children: "GBP " })] }) })] }), t.jsxs("div", { className: "col-span-3", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1", children: "Discount Type" }), t.jsxs("select", { value: Ve, onChange: xe => et(xe.target.value), className: "input-base appearance-none", children: [t.jsx("option", { value: "none", children: "No discount" }), t.jsx("option", { value: "%", children: "Percentage" }), t.jsx("option", { value: "fixed", children: "Fixed Amount" })] })] })] }), t.jsx("div", { className: "mt-6 border-t border-gray-200 dark:border-gray-700 pt-4", children: t.jsxs("div", { className: "flex items-center justify-between mb-3", children: [t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsxs(ue, { variant: "SECONDARY", onClick: () => { sessionStorage.setItem("invoice_draft", JSON.stringify({ invoiceNumber: M, customerId: se, status: z, assignedTo: _, address: Z, city: te, state: de, country: pe, zipCode: ne, email: $e, phone: Bt, invoiceDate: mt, dueDate: Xe, currency: Q, items: vt, discountType: Ve, discountValue: vr, adjustmentValue: Nt })), e("/products?returnTo=invoice") }, className: "inline-flex items-center gap-2 text-xs", children: [t.jsx(Fn, { size: 14 }), "Add from Catalog"] }), t.jsx("button", { type: "button", onClick: nr, className: "p-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors", children: t.jsx($t, { size: 14 }) })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("span", { className: "text-xs text-gray-600 dark:text-gray-400", children: "Show quantity as:" }), t.jsxs("div", { className: "flex border border-gray-300 dark:border-gray-600 rounded overflow-hidden", children: [t.jsx("button", { type: "button", onClick: () => _r("Qty"), className: `px-3 py-1 text-xs ${sr === "Qty" ? "bg-blue-500 text-white" : "bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`, children: "Qty" }), t.jsx("button", { type: "button", onClick: () => _r("Hours"), className: `px-3 py-1 text-xs border-l border-gray-300 dark:border-gray-600 ${sr === "Hours" ? "bg-blue-500 text-white" : "bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`, children: "Hours" }), t.jsx("button", { type: "button", onClick: () => _r("Qty/Hours"), className: `px-3 py-1 text-xs border-l border-gray-300 dark:border-gray-600 ${sr === "Qty/Hours" ? "bg-blue-500 text-white" : "bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`, children: "Qty/Hours" })] })] })] }) }), t.jsx("div", { className: "overflow-visible border border-gray-200 dark:border-gray-700 rounded-lg", children: t.jsx("div", { className: "overflow-visible", children: t.jsxs("table", { className: "w-full", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-12", children: t.jsx("input", { type: "checkbox", className: "w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500" }) }), t.jsx("th", { className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[200px]", children: "Product" }), t.jsx("th", { className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[150px]", children: "Description" }), t.jsx("th", { className: "px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-24", children: "Qty" }), t.jsx("th", { className: "px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-20", children: "Unit" }), t.jsx("th", { className: "px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-28", children: "Rate" }), t.jsx("th", { className: "px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-20", children: "Tax %" }), t.jsx("th", { className: "px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-32", children: "Amount" }), t.jsx("th", { className: "px-4 py-3 w-12" })] }) }), t.jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: vt.map((xe, _e) => t.jsxs("tr", { className: "relative", children: [t.jsx("td", { className: "px-4 py-3 align-top", children: t.jsx("input", { type: "checkbox", checked: xe.isOptional, onChange: Be => lr(_e, "isOptional", Be.target.checked), className: "w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 mt-2" }) }), t.jsxs("td", { className: "px-4 py-3 align-top relative", ref: y === _e ? v : null, children: [t.jsxs("button", { type: "button", onClick: () => { p(y === _e ? null : _e), j("") }, className: "w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white hover:border-blue-500 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all flex items-center justify-between group", children: [t.jsx("span", { className: "truncate font-medium", children: xe.description || "Select Product..." }), t.jsx(_s, { size: 16, className: "text-gray-400 group-hover:text-blue-500 flex-shrink-0 ml-2 transition-colors" })] }), y === _e && t.jsxs("div", { className: "absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl max-h-64 overflow-hidden z-[100]", children: [t.jsx("div", { className: "p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50", children: t.jsx("input", { type: "text", placeholder: "Search products...", value: b, onChange: Be => j(Be.target.value), className: "w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent", onClick: Be => Be.stopPropagation(), autoFocus: !0 }) }), t.jsxs("div", { className: "overflow-y-auto max-h-60", children: [g.filter(Be => !b || (Be.name || Be.title || "").toLowerCase().includes(b.toLowerCase()) || (Be.description || "").toLowerCase().includes(b.toLowerCase())).map(Be => t.jsx("button", { type: "button", onClick: () => Hr(_e, Be), className: "w-full text-left px-4 py-3 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-0", children: t.jsx("div", { className: "flex items-center justify-between gap-2", children: t.jsx("div", { className: "min-w-0", children: t.jsx("div", { className: "font-semibold text-gray-900 dark:text-white truncate text-sm", children: Be.name || Be.title }) }) }) }, Be.id)), g.length === 0 && t.jsxs("div", { className: "px-4 py-8 text-sm text-gray-500 dark:text-gray-400 text-center", children: [t.jsx(Fn, { size: 32, className: "mx-auto mb-2 text-gray-300 dark:text-gray-600" }), t.jsx("p", { children: "No products found" }), t.jsx("button", { type: "button", onClick: () => e("/products?returnTo=invoice"), className: "mt-3 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium", children: "Browse Products" })] })] })] })] }), t.jsx("td", { className: "px-4 py-3 align-top", children: t.jsx("input", { type: "text", value: xe.longDescription, onChange: Be => lr(_e, "longDescription", Be.target.value), className: "input-base text-sm", placeholder: "Details..." }) }), t.jsx("td", { className: "px-4 py-3 align-top", children: t.jsx("input", { type: "number", min: "0", value: xe.quantity, onChange: Be => lr(_e, "quantity", parseFloat(Be.target.value) || 0), className: "input-base text-right text-sm" }) }), t.jsx("td", { className: "px-4 py-3 align-top", children: t.jsx("input", { type: "text", value: xe.unit, onChange: Be => lr(_e, "unit", Be.target.value), className: "input-base text-center text-sm" }) }), t.jsx("td", { className: "px-4 py-3 align-top", children: t.jsxs("div", { className: "relative", children: [t.jsx("span", { className: "absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm", children: Q }), t.jsx("input", { type: "number", min: "0", step: "0.01", value: xe.rate, onChange: Be => lr(_e, "rate", parseFloat(Be.target.value) || 0), className: "input-base pl-8 text-right text-sm" })] }) }), t.jsx("td", { className: "px-4 py-3 align-top", children: t.jsxs("select", { value: xe.taxRate, onChange: Be => lr(_e, "taxRate", parseFloat(Be.target.value)), className: "input-base text-right text-sm appearance-none", children: [t.jsx("option", { value: "0", children: "No Tax" }), S.filter(Be => Be.isActive).map(Be => t.jsxs("option", { value: Be.rate, children: [Be.name, " (", Be.rate, "%)"] }, Be.id))] }) }), t.jsx("td", { className: "px-4 py-3 align-top text-right font-medium text-gray-900 dark:text-white pt-3", children: a(xe.amount, Q) }), t.jsx("td", { className: "px-4 py-3 align-top text-center pt-3", children: t.jsx("button", { type: "button", onClick: () => na(_e), className: "text-gray-400 hover:text-red-500 transition-colors p-1", children: t.jsx(yt, { size: 16 }) }) })] }, _e)) })] }) }) })] }) }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [t.jsx("div", { className: "space-y-6", children: t.jsx(Ae, { padding: "lg", children: t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "space-y-2", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400", children: " Notes & Payment Terms" }), t.jsx("textarea", { value: pt, onChange: xe => Y(xe.target.value), placeholder: "Add notes...", rows: 4, className: "input-base" })] }), t.jsxs("div", { className: "space-y-2", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400", children: " Terms & Conditions" }), t.jsxs("select", { value: he, onChange: xe => { const _e = xe.target.value; if (Ee(_e), _e) { const Be = fe.find(zt => zt.id.toString() === _e); Be && (qe(Be.content), Ne(Be.content)) } else qe(""), Ne("") }, className: "input-base appearance-none", children: [t.jsx("option", { value: "", children: "Select Terms & Conditions Template" }), fe.filter(xe => xe.isActive).map(xe => t.jsxs("option", { value: xe.id, children: [xe.name, " ", xe.isDefault ? "(Default)" : ""] }, xe.id))] }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Choose a template or leave empty to use default terms" })] }), he && t.jsxs("div", { className: "space-y-2", children: [t.jsx("label", { className: "block text-xs font-medium text-gray-600 dark:text-gray-400", children: "Selected Template Content" }), t.jsx("div", { className: "bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 max-h-32 overflow-y-auto", children: t.jsx("p", { className: "text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap", children: Ge }) })] })] }) }) }), t.jsx("div", { className: "space-y-6", children: t.jsx(Ae, { padding: "lg", children: t.jsxs("div", { className: "space-y-3", children: [t.jsxs("div", { className: "flex items-center justify-between text-sm", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Sub total" }), t.jsx("span", { className: "font-semibold text-gray-900 dark:text-white", children: a(ge, Q) })] }), Qe > 0 && t.jsxs("div", { className: "flex items-center justify-between text-sm", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Total Tax" }), t.jsx("span", { className: "font-semibold text-gray-900 dark:text-white", children: a(Qe, Q) })] }), t.jsxs("div", { className: "flex items-center justify-between text-sm", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Discount" }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("input", { type: "number", value: vr, onChange: xe => tr(parseFloat(xe.target.value) || 0), min: "0", step: "0.01", className: "w-20 px-2 py-1 text-xs text-right border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white" }), t.jsxs("select", { value: Ve, onChange: xe => et(xe.target.value), className: "px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white", children: [t.jsx("option", { value: "%", children: "%" }), t.jsx("option", { value: "fixed", children: Q })] }), t.jsxs("span", { className: "text-red-600 dark:text-red-400 font-medium", children: ["-", a(Rt, Q)] })] })] }), t.jsxs("div", { className: "flex items-center justify-between text-sm", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Adjustment" }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("input", { type: "number", value: Nt, onChange: xe => Ut(parseFloat(xe.target.value) || 0), step: "0.01", className: "w-20 px-2 py-1 text-xs text-right border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white" }), t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: a(Nt, Q) })] })] }), t.jsxs("div", { className: "pt-3 mt-1 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between", children: [t.jsx("span", { className: "font-semibold text-gray-900 dark:text-white", children: "Total" }), t.jsx("span", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: a(Ct, Q) })] }), t.jsxs("div", { className: "flex gap-2 pt-2", children: [t.jsx(ue, { variant: "SECONDARY", fullWidth: !0, onClick: () => jr(!1), disabled: o, children: "Save" }), t.jsx(ue, { variant: "PRIMARY", fullWidth: !0, onClick: () => jr(!0), loading: o, children: "Save & Send" })] })] }) }) })] })] }), t.jsx("div", { className: "h-8" })] }) }) }, Qie = "modulepreload", Xie = function (e) { return "/" + e }, MP = {}, Zie = function (r, a, s) { let n = Promise.resolve(); if (a && a.length > 0) { let m = function (g) { return Promise.all(g.map(f => Promise.resolve(f).then(y => ({ status: "fulfilled", value: y }), y => ({ status: "rejected", reason: y })))) }; var o = m; document.getElementsByTagName("link"); const c = document.querySelector("meta[property=csp-nonce]"), u = c?.nonce || c?.getAttribute("nonce"); n = m(a.map(g => { if (g = Xie(g), g in MP) return; MP[g] = !0; const f = g.endsWith(".css"), y = f ? '[rel="stylesheet"]' : ""; if (document.querySelector(`link[href="${g}"]${y}`)) return; const p = document.createElement("link"); if (p.rel = f ? "stylesheet" : Qie, f || (p.as = "script"), p.crossOrigin = "", p.href = g, u && p.setAttribute("nonce", u), document.head.appendChild(p), f) return new Promise((b, j) => { p.addEventListener("load", b), p.addEventListener("error", () => j(new Error(`Unable to preload CSS for ${g}`))) }) })) } function i(c) { const u = new Event("vite:preloadError", { cancelable: !0 }); if (u.payload = c, window.dispatchEvent(u), !u.defaultPrevented) throw c } return n.then(c => { for (const u of c || []) u.status === "rejected" && i(u.reason); return r().catch(i) }) }, Y6 = ({ isOpen: e, onClose: r, onConvert: a, lead: s, isConverting: n }) => { const { dealStatuses: i } = Br(), [o, c] = h.useState({ createContact: !1, createCompany: !1, createDeal: !1, contactData: {}, companyData: {}, dealData: { currency: "USD", status: "", probability: 50 } }); h.useEffect(() => { s && c(g => ({ ...g, contactData: { firstName: s.firstName, lastName: s.lastName, email: s.email, phone: s.phone || "", company: s.company || "", position: s.position || "", notes: s.notes || "", website: s?.website || "" }, dealData: { ...g.dealData, title: `Deal with ${s.firstName} ${s.lastName}`, description: "Deal opportunity from lead conversion", value: s?.budget ?? s?.value ?? void 0, currency: s?.currency || g.dealData.currency, status: g.dealData.status || (i?.length > 0 ? i.find(f => f.isActive)?.name || i[0].name : "DRAFT") } })) }, [s, i]); const u = (g, f, y) => { if (g === "createDeal") c(p => ({ ...p, [g]: y })); else { if (g === "createContact" || g === "createCompany") return; c(p => ({ ...p, [g]: { ...p[g], [f]: y } })) } }, m = async g => { if (g.preventDefault(), !o.createDeal) { R.error("Please select Create Deal to convert the lead"); return } if (o.createDeal && !o.dealData.title) { R.error("Deal title is required"); return } try { const f = { ...o, createContact: !1, contactData: Object.fromEntries(Object.entries(o.contactData).filter(([y, p]) => p !== "" && p !== null && p !== void 0)), companyData: Object.fromEntries(Object.entries(o.companyData).filter(([y, p]) => p !== "" && p !== null && p !== void 0)), dealData: Object.fromEntries(Object.entries(o.dealData).filter(([y, p]) => p !== "" && p !== null && p !== void 0)) }; await a(f) } catch { } }; return !e || !s ? null : t.jsx("div", { className: "fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4", children: t.jsx("div", { className: "relative mx-auto p-5 border max-w-4xl w-full shadow-lg rounded-md bg-white dark:bg-gray-800", children: t.jsxs("form", { onSubmit: m, className: "space-y-6", children: [t.jsxs("div", { className: "flex items-center justify-between border-b border-gray-200 dark:border-gray-700 pb-4", children: [t.jsxs("div", { className: "flex items-center space-x-3", children: [t.jsx("div", { className: "flex-shrink-0 h-10 w-10", children: t.jsx("div", { className: "h-10 w-10 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center", children: t.jsxs("span", { className: "text-white font-medium text-sm", children: [s.firstName[0], s.lastName[0]] }) }) }), t.jsxs("div", { children: [t.jsxs("h3", { className: "text-lg font-medium text-gray-900 dark:text-white", children: ["Convert Lead: ", s.firstName, " ", s.lastName] }), t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: [s.email, "  ", s.company || "No company"] })] })] }), t.jsx("button", { type: "button", onClick: r, disabled: n, className: "text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50", children: t.jsx(fa, { className: "h-5 w-5" }) })] }), t.jsx("div", { className: "grid grid-cols-1 gap-6", children: t.jsxs("div", { className: `border rounded-lg p-4 ${o.createDeal ? "border-purple-500 bg-purple-50 dark:bg-purple-900/20" : "border-gray-200 dark:border-gray-700"}`, children: [t.jsxs("div", { className: "flex items-center space-x-3 mb-4", children: [t.jsx("input", { type: "checkbox", checked: o.createDeal, onChange: g => u("createDeal", "", g.target.checked), disabled: n, className: "h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded" }), t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx(Qr, { className: "h-5 w-5 text-purple-600" }), t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: "Create Deal" })] })] }), o.createDeal && t.jsxs("div", { className: "space-y-3", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Deal Title *" }), t.jsx("input", { type: "text", value: o.dealData.title || "", onChange: g => u("dealData", "title", g.target.value), disabled: n, className: "w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white" })] }), t.jsxs("div", { className: "grid grid-cols-2 gap-3", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Value" }), t.jsx("input", { type: "number", value: o.dealData.value || "", onChange: g => u("dealData", "value", parseFloat(g.target.value) || 0), min: "0", step: "0.01", disabled: n, className: "w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Currency" }), t.jsx("div", { className: "w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-300 flex items-center", children: t.jsx("span", { className: "font-medium", children: o.dealData.currency || "USD" }) })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Probability (%)" }), t.jsx("input", { type: "number", value: o.dealData.probability || 50, onChange: g => u("dealData", "probability", parseInt(g.target.value) || 0), min: "0", max: "100", disabled: n, className: "w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Status" }), t.jsx("select", { value: o.dealData.status, onChange: g => u("dealData", "status", g.target.value), disabled: n, className: "w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white", children: (i || []).filter(g => g.isActive).map(g => t.jsx("option", { value: g.name, children: g.name }, g.id)) })] })] })] }) }), t.jsx("div", { className: "bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4", children: t.jsxs("div", { className: "flex items-start space-x-3", children: [t.jsx(dr, { className: "h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5" }), t.jsxs("div", { className: "text-sm", children: [t.jsx("p", { className: "text-blue-800 dark:text-blue-200 font-medium", children: "Conversion Summary" }), t.jsxs("ul", { className: "text-blue-700 dark:text-blue-300 mt-1 space-y-1", children: [t.jsx("li", { children: ' The lead status will be changed to "Converted"' }), o.createDeal && t.jsx("li", { children: " A new deal/opportunity will be created and linked" })] })] })] }) }), t.jsxs("div", { className: "flex justify-end space-x-3 border-t border-gray-200 dark:border-gray-700 pt-4", children: [t.jsx("button", { type: "button", onClick: r, disabled: n, className: "px-6 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 disabled:opacity-50", children: "Cancel" }), t.jsx("button", { type: "submit", disabled: n || !o.createDeal, className: "px-6 py-2 bg-[#ef444e] text-white text-sm font-medium rounded-lg hover:bg-[#f26971] focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2", children: n ? t.jsxs(t.Fragment, { children: [t.jsx(Uo, { className: "h-4 w-4 animate-spin" }), t.jsx("span", { children: "Converting..." })] }) : t.jsxs(t.Fragment, { children: [t.jsx(ut, { className: "h-4 w-4" }), t.jsx("span", { children: "Convert Lead" })] }) })] })] }) }) }) }, en = ({ currentPage: e, totalPages: r, totalItems: a, onPageChange: s, itemsPerPage: n = 50, showItemsPerPage: i = !0, className: o = "" }) => { if (r <= 1) return null; const u = (() => { const y = [], p = []; for (let b = Math.max(2, e - 2); b <= Math.min(r - 1, e + 2); b++)y.push(b); return e - 2 > 2 ? p.push(1, "...") : p.push(1), p.push(...y), e + 2 < r - 1 ? p.push("...", r) : p.push(r), p })(), m = (e - 1) * n + 1, g = Math.min(e * n, a); return t.jsx("div", { className: `px-6 py-4 border-t border-gray-100 dark:border-gray-700 ${o}`, children: t.jsxs("div", { className: "flex flex-col sm:flex-row items-center justify-between gap-4", children: [i && t.jsxs("div", { className: "text-sm text-gray-600 dark:text-gray-400", children: ["Showing ", t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: m }), " to", " ", t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: g }), " of", " ", t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: a }), " results"] }), t.jsxs("div", { className: "flex items-center space-x-1", children: [t.jsxs("button", { onClick: () => s(e - 1), disabled: e === 1, className: "flex items-center px-3 py-2 text-sm font-medium text-gray-500 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-700 dark:hover:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white dark:disabled:hover:bg-gray-800 transition-all duration-200", title: "Previous page", children: [t.jsx(Xw, { className: "h-4 w-4" }), t.jsx("span", { className: "ml-1 hidden sm:inline", children: "Previous" })] }), t.jsx("div", { className: "flex items-center space-x-1", children: u.map((f, y) => { if (f === "...") return t.jsx("span", { className: "px-3 py-2 text-sm text-gray-500 dark:text-gray-400", children: "..." }, `dots-${y}`); const p = f, b = p === e; return t.jsx("button", { onClick: () => s(p), className: `px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${b ? "bg-[#ef444e] text-white shadow-sm hover:bg-[#f26971]" : "text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`, children: p }, p) }) }), t.jsxs("button", { onClick: () => s(e + 1), disabled: e === r, className: "flex items-center px-3 py-2 text-sm font-medium text-gray-500 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-700 dark:hover:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white dark:disabled:hover:bg-gray-800 transition-all duration-200", title: "Next page", children: [t.jsx("span", { className: "mr-1 hidden sm:inline", children: "Next" }), t.jsx(Xc, { className: "h-4 w-4" })] })] })] }) }) }, Jl = ({ rows: e = 5, columns: r = 6 }) => t.jsxs("tbody", {
    className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: [Array.from({ length: e }).map((a, s) => t.jsx("tr", { children: Array.from({ length: r }).map((n, i) => t.jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: t.jsx("div", { className: "w-full", children: t.jsx("div", { className: "h-2 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden", children: t.jsx("div", { className: "h-full w-2/3 bg-gradient-to-r from-[#EF444E]/30 via-[#ff5a64]/40 to-[#EF444E]/30 animate-[shimmer_1.6s_infinite]" }) }) }) }, i)) }, s)), t.jsx("style", {
        children: `
        @keyframes shimmer {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
      `})]
}), Ua = ({ label: e, column: r, sortBy: a, sortOrder: s, onChange: n, className: i = "" }) => { const o = a === r; return t.jsxs("button", { type: "button", onClick: () => n(r), className: `inline-flex items-center gap-1 select-none ${i}`, children: [t.jsx("span", { children: e }), o ? s === "asc" ? t.jsx(oD, { className: "w-3 h-3" }) : t.jsx(_s, { className: "w-3 h-3" }) : null] }) }, _P = e => [{ value: "new", label: "New", color: "bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300" }, { value: "contacted", label: "Contacted", color: "bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300" }, { value: "qualified", label: "Qualified", color: "bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300" }, { value: "proposal", label: "Proposal", color: "bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300" }, { value: "negotiation", label: "Negotiation", color: "bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300" }, { value: "closed", label: "Closed", color: "bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300" }, { value: "lost", label: "Lost", color: "bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300" }, { value: "converted", label: "Converted", color: "bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300" }].find(s => s.value === e)?.color || "bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300", Jie = () => {
    const { t: e } = kn(), r = xt(), { refreshLeadsCount: a, refreshDealsCount: s } = Sn(), [n, i] = h.useState([]), [o, c] = h.useState(!0), [u, m] = h.useState(null), [g, f] = h.useState("list"), [y, p] = h.useState({ page: 1, limit: 10 }), [b, j] = h.useState({ currentPage: 1, totalPages: 1, totalItems: 0, itemsPerPage: 10 }), [v, S] = h.useState(1), [k, E] = h.useState(!1), [C, N] = h.useState(null), [A, D] = h.useState(!1), [I, $] = h.useState(["name", "email", "phone", "company", "status", "assignedTo", "createdAt"]), [B, W] = h.useState(!1), [M, q] = h.useState(null), [V, X] = h.useState(!1), [se, le] = h.useState(!1), [ee, L] = h.useState(!1), [z, T] = h.useState(!1), [_, H] = h.useState(!1), [U, K] = h.useState(null), [Z, J] = h.useState(new Set), [te, G] = h.useState(!1), [de, Te] = h.useState(""), [pe, He] = h.useState([]), [ne, De] = h.useState(!1), { searchValue: $e, debouncedSearchValue: Et, setSearch: Bt, isSearching: Ft } = ql("", 500), { searchValue: mt, debouncedSearchValue: ce, setSearch: Xe, isSearching: jt } = ql("", 500), Q = [{ value: "new", label: e("leads.status.new"), color: "bg-blue-100 text-blue-800" }, { value: "contacted", label: e("leads.status.contacted"), color: "bg-yellow-100 text-yellow-800" }, { value: "qualified", label: e("leads.status.qualified"), color: "bg-green-100 text-green-800" }, { value: "proposal", label: e("leads.status.proposal"), color: "bg-purple-100 text-purple-800" }, { value: "negotiation", label: e("leads.status.negotiation"), color: "bg-orange-100 text-orange-800" }, { value: "closed", label: e("leads.status.closed"), color: "bg-green-100 text-green-800" }, { value: "lost", label: e("leads.status.lost"), color: "bg-red-100 text-red-800" }, { value: "converted", label: e("leads.status.converted"), color: "bg-emerald-100 text-emerald-800" }], Le = !!Et || !!ce, Ve = !!y.status || !!y.assignedTo, et = ge => I.includes(ge), [pt, Y] = h.useState("createdAt"), [je, Ne] = h.useState("desc"), fe = ge => { Y(Qe => Qe === ge ? (Ne(Rt => Rt === "asc" ? "desc" : "asc"), Qe) : (Ne("asc"), ge)) }, ke = Je.useMemo(() => { const ge = [...n], Qe = je === "asc" ? 1 : -1, Rt = Ct => { switch (pt) { case "name": return `${Ct.firstName} ${Ct.lastName}`.toLowerCase(); case "email": return Ct.email?.toLowerCase() || ""; case "phone": return Ct.phone || ""; case "company": return Ct.company?.toLowerCase() || ""; case "status": return Ct.status || ""; case "createdAt": default: return Ct.createdAt || "" } }; return ge.sort((Ct, xe) => String(Rt(Ct)).localeCompare(String(Rt(xe))) * Qe) }, [n, pt, je]); h.useEffect(() => { he() }, [Et, ce, y.status, y.assignedTo, y.limit, v]), h.useEffect(() => { try { const ge = localStorage.getItem("leads_visible_columns"); if (ge) { const Qe = JSON.parse(ge); Array.isArray(Qe) && Qe.every(Rt => typeof Rt == "string") && $(Qe) } } catch { } }, []), h.useEffect(() => { try { localStorage.setItem("leads_visible_columns", JSON.stringify(I)) } catch { } }, [I]); const he = async () => { try { c(!0); const ge = await Yt.getLeads({ ...y, page: v, search: Et, email: ce }), Qe = ge?.data?.leads ?? ge?.data?.items ?? []; i(Qe); const Rt = ge?.data?.pagination ?? (ge?.data?.total != null ? { totalItems: ge.data.total, currentPage: ge.data.page ?? 1, pageSize: ge.data.limit ?? Qe.length ?? 0, totalPages: Math.ceil((ge.data.total || 0) / (ge.data.limit || 1)) } : null); j(Rt), m(null) } catch (ge) { const Qe = ge?.response?.data?.message || e("leads.fetchError"); m(Qe), R.error(Qe, { toastId: "leads_fetch_error" }) } finally { c(!1) } }, Ee = (ge, Qe) => { p(Rt => ({ ...Rt, [ge]: Qe })), S(1) }, Ge = ge => { Bt(ge), S(1) }, qe = ge => { S(ge), window.scrollTo({ top: 0, behavior: "smooth" }) }, vt = () => { r("/leads/new") }, yr = ge => { r(`/leads/${ge.id}`) }, vr = ge => { r(`/leads/${ge.id}/edit`) }, tr = ge => { N(ge), E(!0) }, Nt = async () => { if (C) { D(!0); try { await Yt.deleteLead(C.id), await a(), E(!1), N(null), R.success(e("leads.deleteSuccess")), he() } catch (ge) { const Qe = ge.response?.data?.message || e("leads.deleteError"); m(Qe), R.error(Qe) } finally { D(!1) } } }, Ut = () => { p({ page: 1, limit: y.limit || 10, status: void 0, assignedTo: void 0 }), S(1), Bt(""), Xe("") }, [sr, _r] = h.useState({}), wr = async (ge, Qe) => { _r(Rt => ({ ...Rt, [ge]: !0 })); try { if (Qe === "closed" || Qe === "converted") { const Ct = n.find(xe => xe.id === ge); if (!Ct) throw new Error("Lead not found"); q(Ct), W(!0) } else await Yt.updateLeadStatus(ge, Qe), i(Ct => Ct.map(xe => xe.id === ge ? { ...xe, status: Qe } : xe)), R.success("Lead status updated successfully"); await a(), await s() } catch (Rt) { const Ct = Rt?.response?.data?.message || "Failed to update status"; R.error(Ct) } finally { _r(Rt => ({ ...Rt, [ge]: !1 })) } }, kr = ge => { const Qe = new Set(Z); Qe.has(ge) ? Qe.delete(ge) : Qe.add(ge), J(Qe) }, Sr = () => { Z.size === n.length ? J(new Set) : J(new Set(n.map(ge => ge.id))) }, Hr = async () => { if (!de) { R.error("Please select a user to assign to"); return } if (Z.size === 0) { R.error("Please select at least one lead to assign"); return } De(!0); try { const ge = Array.from(Z), Qe = de === "unassigned" ? null : parseInt(de); await Yt.bulkAssignLeads(ge, Qe), i(Rt => Rt.map(Ct => Z.has(Ct.id) ? { ...Ct, assignedTo: Qe ?? void 0 } : Ct)), J(new Set), G(!1), Te(""), await a(), R.success(`Successfully assigned ${ge.length} leads`) } catch (ge) { const Qe = ge?.response?.data?.message || "Failed to bulk assign leads"; R.error(Qe) } finally { De(!1) } }; h.useEffect(() => { (async () => { try { const { userService: Qe } = await Zie(async () => { const { userService: xe } = await Promise.resolve().then(() => w9); return { userService: xe } }, void 0), Rt = await Qe.getUsers({ page: 1, limit: 100 }), Ct = Rt?.data?.users || Rt?.data || Rt?.users || []; He(Ct.map(xe => ({ id: xe.id, firstName: xe.firstName, lastName: xe.lastName }))) } catch (Qe) { console.error("Failed to fetch users:", Qe) } })() }, []); const nr = () => {
        try {
            const Qe = ["firstName", "lastName", "email", "phone", "company", "position", "status", "website", "industry", "companySize", "annualRevenue", "budget", "currency", "priority", "leadScore", "address", "city", "state", "country", "zipCode", "linkedinProfile", "timezone", "preferredContactMethod", "notes"].join(",") + `
`, Rt = new Blob([Qe], { type: "text/csv;charset=utf-8;" }), Ct = window.URL.createObjectURL(Rt), xe = document.createElement("a"); xe.href = Ct, xe.download = "leads_template.csv", document.body.appendChild(xe), xe.click(), window.URL.revokeObjectURL(Ct), document.body.removeChild(xe), R.success("CSV template downloaded successfully")
        } catch { R.error("Failed to generate CSV template") }
    }, na = ge => { const Qe = ge.target.files?.[0]; if (Qe) { if (Qe.type !== "text/csv" && !Qe.name.endsWith(".csv")) { R.error("Please select a CSV file"); return } if (Qe.size > 10 * 1024 * 1024) { R.error("File size must be less than 10MB"); return } K(Qe) } }, lr = async () => {
        if (!U) { R.error("Please select a CSV file to import"); return } L(!0); try {
            const ge = new FormData; ge.append("csvFile", U); const Qe = await fetch("/api/leads/bulk/import", { method: "POST", headers: { Authorization: `Bearer ${localStorage.getItem(Ot.AUTH_TOKEN)}` }, body: ge }), Rt = Qe.headers.get("content-type"); if (!Rt || !Rt.includes("application/json")) throw (await Qe.text()).includes("<!DOCTYPE") ? new Error("Server returned an error page. Please check the server logs.") : new Error("Invalid response format from server"); const Ct = await Qe.json(); if (!Qe.ok) throw new Error(Ct.message || "Import failed"); if (Ct.data?.errors && Ct.data.errors.length > 0) {
                const xe = Ct.data.errors.slice(0, 3).map(_e => `Row ${_e.row}: ${_e.error}`).join(`
`); R.warning(`${Ct.data?.message}

${xe}`, { autoClose: 5e3 })
            } else R.success(Ct.data?.message || Ct.message || "Import completed successfully"); le(!1), K(null), he(), a()
        } catch (ge) { console.error("Import error:", ge), R.error(ge.message || "Failed to import leads") } finally { L(!1) }
    }, ia = async () => { T(!0); try { const ge = new URLSearchParams; y.status && ge.append("status", y.status), Et && ge.append("search", Et); const Qe = await fetch(`/api/leads/bulk/export?${ge.toString()}`, { headers: { Authorization: `Bearer ${localStorage.getItem(Ot.AUTH_TOKEN)}` } }); if (!Qe.ok) throw new Error("Failed to export leads"); const Rt = await Qe.blob(), Ct = window.URL.createObjectURL(Rt), xe = document.createElement("a"); xe.href = Ct, xe.download = `leads_export_${new Date().toISOString().slice(0, 10)}.csv`, document.body.appendChild(xe), xe.click(), window.URL.revokeObjectURL(Ct), document.body.removeChild(xe), R.success("Leads exported successfully") } catch { R.error("Failed to export leads") } finally { T(!1) } }, xa = async () => { H(!0); try { const ge = await fetch("/api/leads/integrations/sync-all", { method: "POST", headers: { Authorization: `Bearer ${localStorage.getItem(Ot.AUTH_TOKEN)}`, "Content-Type": "application/json" } }), Qe = await ge.json(); if (!ge.ok) throw new Error(Qe.message || "Sync failed"); R.success("Integrations synced successfully"), he(), a() } catch (ge) { R.error(ge.message || "Failed to sync integrations") } finally { H(!1) } }, Wr = ge => { ge.status === "converted" && R.info("This lead was already converted. You can reconvert; we will handle it automatically."), q(ge), W(!0) }, Vr = async ge => { if (M) { X(!0); try { const Qe = { ...ge, dealData: { ...ge.dealData, status: ge.dealData?.status } }; await Yt.convertLead(M.id, Qe), R.success("Lead converted successfully!"), W(!1), q(null), he(), await Promise.all([a(), s()]) } catch (Qe) { const Rt = Qe.response?.data?.message || "Failed to convert lead"; if ((/already\s*converted/i.test(Rt) || Qe?.response?.status === 409) && M) try { const xe = { ...ge, dealData: { ...ge.dealData, status: ge.dealData?.status } }; await Yt.convertLeadForce(M.id, xe), R.success("Lead converted successfully!"), W(!1), q(null), he(), await Promise.all([a(), s()]); return } catch (xe) { try { await Yt.updateLeadStatus(M.id, "qualified"); const _e = { ...ge, dealData: { ...ge.dealData, status: ge.dealData?.status } }; await Yt.convertLead(M.id, _e), R.success("Lead converted successfully!"), W(!1), q(null), he(), await Promise.all([a(), s()]); return } catch (_e) { const Be = _e?.response?.data?.message || xe?.response?.data?.message || Rt; R.error(Be) } } else R.error(Rt) } finally { X(!1) } } }, jr = Le || Ve ? "No leads match your search and filters. Try adjusting your filters or search terms. You can also clear all filters to see all leads." : "No leads found."; return t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "space-y-4", children: [t.jsx(Td, { title: "Leads", subtitle: "Capture and manage your incoming opportunities", addLabel: "Add Lead", onAdd: vt, bulkActions: [{ label: "Download Template", onClick: nr, icon: t.jsx(Bo, { className: "w-4 h-4" }) }, { label: "Import Leads", onClick: () => le(!0), icon: t.jsx(Ui, { className: "w-4 h-4" }) }, { label: "Export Leads", onClick: ia, icon: t.jsx(Bo, { className: "w-4 h-4" }), disabled: z }, { label: "Sync Integrations", onClick: xa, icon: t.jsx(Uo, { className: "w-4 h-4" }), disabled: _ }, ...Z.size > 0 ? [{ label: `Bulk Assign (${Z.size})`, onClick: () => G(!0), icon: t.jsx(wt, { className: "w-4 h-4" }) }] : []] }), t.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-end gap-4", children: [t.jsxs("div", { className: "", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: t.jsxs("div", { className: "flex items-center gap-2", children: [e("common.search"), Ft && t.jsxs("span", { className: "text-xs text-blue-500 flex items-center gap-1", children: [t.jsx(Xr, { className: "h-3 w-3" }), "Searching..."] })] }) }), t.jsx(Zl, { value: $e, onChange: Ge, placeholder: e("leads.searchLeads"), className: "max-w-full" })] }), t.jsxs("div", { className: "", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: t.jsxs("div", { className: "flex items-center gap-2", children: ["Email Search", jt && t.jsxs("span", { className: "text-xs text-blue-500 flex items-center gap-1", children: [t.jsx(Xr, { className: "h-3 w-3" }), "Searching..."] })] }) }), t.jsx(Zl, { value: mt, onChange: ge => { Xe(ge), S(1) }, placeholder: "Search by email...", className: "max-w-full" })] }), t.jsx("div", { className: "w-full sm:w-48 sm:min-w-[220px]", children: t.jsx(ra, { label: e("leads.form.status"), value: y.status || "", onChange: ge => Ee("status", ge), options: [{ value: "", label: e("leads.form.allStatuses") }, ...Q.map(ge => ({ value: ge.value, label: ge.label }))] }) }), t.jsx("div", { className: "w-full sm:w-48 sm:min-w-[220px]", children: t.jsx(ra, { label: "Assigned To", value: y.assignedTo?.toString() || "", onChange: ge => Ee("assignedTo", ge === "" ? "" : Number(ge)), options: [{ value: "", label: "All Users" }, ...pe.map(ge => ({ value: ge.id.toString(), label: `${ge.firstName} ${ge.lastName}` }))] }) }), t.jsx("div", { className: "w-full sm:w-48 sm:min-w-[200px]", children: t.jsx(ra, { label: e("leads.form.itemsPerPage"), value: String(y.limit || 10), onChange: ge => Ee("limit", Number(ge)), options: [{ value: "5", label: "5" }, { value: "10", label: "10" }, { value: "20", label: "20" }, { value: "50", label: "50" }] }) })] }), t.jsxs("div", { className: "hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto", children: [t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${g === "list" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => f("list"), title: "List view", children: t.jsx(fi, { className: "w-4 h-4" }) }), t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${g === "card" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => f("card"), title: "Card view", children: t.jsx(hi, { className: "w-4 h-4" }) })] })] }), g === "card" ? t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 transition-all duration-300 p-6", children: [n.length === 0 ? t.jsx(Yr, { title: u ? "Network or server error" : "No leads found", description: u ? typeof u == "string" ? u : String(u) : jr, icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), showClearButton: !u && (Le || Ve), onClear: u ? void 0 : Ut, isError: !!u }) : t.jsx("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4", children: ke.map(ge => t.jsxs("div", { className: "rounded-lg border shadow-sm hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700", style: { minHeight: "280px" }, children: [t.jsxs("div", { className: "p-4 border-b border-gray-100 dark:border-gray-700", children: [t.jsx("div", { className: "flex items-center justify-between mb-3", children: t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-br from-[#EF444E] to-[#ff5a64] rounded-lg shadow-2xl", children: t.jsx(wt, { className: "h-5 w-5 text-white" }) }), t.jsxs("div", { children: [t.jsxs("h3", { className: "text-sm font-bold text-gray-900 dark:text-white", children: [ge.firstName, " ", ge.lastName] }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: ge.company || "No company" })] })] }) }), t.jsx("div", { className: "flex items-center justify-between", children: t.jsx("span", { className: `inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium ${_P(ge.status)}`, children: ge.status }) })] }), t.jsx("div", { className: "p-4 flex-1", children: t.jsxs("div", { className: "space-y-2", children: [ge.email && t.jsxs("div", { className: "text-xs text-gray-600 dark:text-gray-400 flex items-center gap-1.5", children: [t.jsx(ir, { className: "h-3 w-3 flex-shrink-0" }), t.jsx("span", { className: "truncate", children: ge.email })] }), ge.phone && t.jsxs("div", { className: "text-xs text-gray-600 dark:text-gray-400 flex items-center gap-1.5", children: [t.jsx(ma, { className: "h-3 w-3 flex-shrink-0" }), t.jsx("span", { children: ge.phone })] }), ge.assignedUser && t.jsxs("div", { className: "text-xs text-gray-600 dark:text-gray-400 flex items-center gap-1.5", children: [t.jsx(wt, { className: "h-3 w-3 flex-shrink-0" }), t.jsxs("span", { children: [ge.assignedUser.firstName, " ", ge.assignedUser.lastName] })] }), t.jsxs("div", { className: "text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1.5", children: [t.jsx(Zt, { className: "h-3 w-3 flex-shrink-0" }), t.jsx("span", { children: new Date(ge.createdAt).toLocaleDateString() })] })] }) }), t.jsx("div", { className: "px-4 pb-4 pt-3 border-t border-gray-100 dark:border-gray-700", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center gap-1", children: [t.jsx("button", { onClick: () => yr(ge), className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors", title: "View Lead", children: t.jsx(Ht, { className: "h-4 w-4" }) }), ge.status !== "converted" && t.jsx("button", { onClick: () => Wr(ge), className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded transition-colors", title: "Convert Lead", children: t.jsx(E2, { className: "h-4 w-4" }) })] }), t.jsxs("div", { className: "flex items-center gap-1", children: [t.jsx("button", { onClick: () => vr(ge), className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors", title: "Edit Lead", children: t.jsx(Jt, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: () => tr(ge), className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors", title: "Delete Lead", children: t.jsx(yt, { className: "h-4 w-4" }) })] })] }) })] }, ge.id)) }), n.length > 0 && t.jsx("div", { className: "mt-6", children: t.jsx(en, { currentPage: b.currentPage, totalPages: b.totalPages, totalItems: b.totalItems, onPageChange: qe, itemsPerPage: b.itemsPerPage || y.limit || 10 }) })] }) : t.jsx("div", { className: "bg-gray-100 dark:bg-gray-800 rounded-2xl shadow border border-gray-200 dark:border-gray-700  transition-all duration-300", children: t.jsxs("div", { className: "p-6", children: [t.jsx("div", { className: "mb-4", children: t.jsx(io, { currentPage: b.currentPage, itemsPerPage: b.itemsPerPage || y.limit || 10, totalItems: b.totalItems || n.length, onItemsPerPageChange: ge => Ee("limit", ge), columnConfig: { columns: [{ id: "name", label: "Lead" }, { id: "email", label: "Email" }, { id: "phone", label: "Phone" }, { id: "company", label: "Company" }, { id: "status", label: "Status" }, { id: "assignedTo", label: "Assigned To" }, { id: "createdAt", label: "Created" }], visibleColumns: I, onChange: $, minVisible: 1 } }) }), t.jsx("div", { className: "overflow-hidden relative", children: t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700 mobile-card-view table-fixed", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-gray-900", children: t.jsxs("tr", { children: [t.jsx("th", { className: "w-12 px-4 py-3 text-start", children: t.jsx("input", { type: "checkbox", checked: Z.size === n.length && n.length > 0, onChange: Sr, className: "rounded border-gray-300 text-blue-600 focus:ring-blue-500" }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${et("name") ? "" : "hidden"}`, children: t.jsx(Ua, { label: e("leads.table.lead"), column: "name", sortBy: pt, sortOrder: je, onChange: ge => fe(ge) }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${et("email") ? "" : "hidden"}`, children: t.jsx(Ua, { label: e("leads.form.email"), column: "email", sortBy: pt, sortOrder: je, onChange: ge => fe(ge) }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${et("phone") ? "" : "hidden"}`, children: t.jsx(Ua, { label: "Phone", column: "phone", sortBy: pt, sortOrder: je, onChange: ge => fe(ge) }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${et("company") ? "" : "hidden"}`, children: t.jsx(Ua, { label: e("leads.table.company"), column: "company", sortBy: pt, sortOrder: je, onChange: ge => fe(ge) }) }), t.jsx("th", { className: `px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${et("status") ? "" : "hidden"}`, children: t.jsx("div", { className: "flex items-center justify-center", children: t.jsx(Ua, { label: e("leads.table.status"), column: "status", sortBy: pt, sortOrder: je, onChange: ge => fe(ge) }) }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${et("assignedTo") ? "" : "hidden"}`, children: e("leads.table.assignedTo") }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${et("createdAt") ? "" : "hidden"}`, children: t.jsx(Ua, { label: e("leads.table.created"), column: "createdAt", sortBy: pt, sortOrder: je, onChange: ge => fe(ge) }) }), t.jsx("th", { className: "px-6 py-3 text-end text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: e("leads.table.actions") })] }) }), o ? t.jsx(Jl, { rows: 8, columns: 8 }) : t.jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: n.length === 0 ? t.jsx("tr", { children: t.jsx("td", { colSpan: I.length + 1, className: "px-6 py-12 text-center", children: t.jsx(Yr, { title: u ? "Network or server error" : "No leads found", description: u ? typeof u == "string" ? u : String(u) : jr, icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), showClearButton: !u && (Le || Ve), onClear: u ? void 0 : Ut, isError: !!u }) }) }) : ke.map(ge => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsx("td", { className: "w-12 px-4 py-4", children: t.jsx("input", { type: "checkbox", checked: Z.has(ge.id), onChange: () => kr(ge.id), className: "rounded border-gray-300 text-blue-600 focus:ring-blue-500" }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${et("name") ? "" : "hidden"}`, "data-label": "Lead", children: t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "flex-shrink-0 h-10 w-10", children: t.jsx("div", { className: "h-10 w-10 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center", children: t.jsxs("span", { className: "text-white font-medium text-sm leading-none", children: [ge.firstName?.[0] || "", ge.lastName?.[0] || ""] }) }) }), t.jsx("div", { className: "min-w-0 flex-1", children: t.jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: t.jsxs("button", { onClick: () => yr(ge), className: "hover:underline hover:text-[#ef444e] text-left truncate", children: [ge.firstName, " ", ge.lastName] }) }) })] }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${et("email") ? "" : "hidden"}`, "data-label": "Email", children: t.jsxs("div", { className: "text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1.5", children: [t.jsx(ir, { className: "h-3 w-3 flex-shrink-0" }), t.jsx("span", { className: "truncate", children: ge.email })] }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${et("phone") ? "" : "hidden"}`, "data-label": "Phone", children: t.jsxs("div", { className: "text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1.5", children: [t.jsx(ma, { className: "h-3 w-3 flex-shrink-0" }), t.jsx("span", { children: ge.phone || "-" })] }) }), t.jsxs("td", { className: `px-6 py-4 whitespace-nowrap ${et("company") ? "" : "hidden"}`, "data-label": "Company", children: [t.jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: ge.company || "-" }), ge.position && t.jsxs("div", { className: "text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1.5 mt-1", children: [t.jsx(Yu, { className: "h-3 w-3 flex-shrink-0" }), t.jsx("span", { children: ge.position })] })] }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap text-center ${et("status") ? "" : "hidden"}`, "data-label": "Status", children: t.jsxs("div", { className: "relative inline-flex items-center justify-center", children: [t.jsx("select", { value: ge.status, onChange: Qe => wr(ge.id, Qe.target.value), disabled: sr[ge.id], style: { WebkitAppearance: "none", backgroundImage: "none", lineHeight: "1.5", textAlign: "center", textAlignLast: "center" }, className: `pr-5 pl-3 text-xs font-semibold rounded-full py-1 border-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed disabled:opacity-50 text-center leading-tight ${_P(ge.status)}`, children: Q.map(Qe => t.jsx("option", { value: Qe.value, children: Qe.label }, Qe.value)) }), t.jsx(_s, { className: "pointer-events-none absolute right-1 top-1/2 -translate-y-1/2 h-3 w-3 text-blue-800/80 dark:text-blue-300/80" }), sr[ge.id] && t.jsx("div", { className: "absolute right-1 top-1 w-3 h-3", children: t.jsx("div", { className: "animate-spin rounded-full h-3 w-3 border-b-2 border-current" }) })] }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 ${et("assignedTo") ? "" : "hidden"}`, "data-label": "Assigned to", children: ge.assignedUser ? `${ge.assignedUser.firstName} ${ge.assignedUser.lastName}` : "-" }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 ${et("createdAt") ? "" : "hidden"}`, "data-label": "Created", children: t.jsxs("div", { className: "flex items-center gap-1.5", children: [t.jsx(Zt, { className: "h-3 w-3 flex-shrink-0" }), t.jsx("span", { children: new Date(ge.createdAt).toLocaleDateString() })] }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-end text-sm font-medium", "data-label": "Actions", children: t.jsxs("div", { className: "flex items-center justify-end gap-2", children: [t.jsx("button", { onClick: () => yr(ge), className: "text-green-600 hover:text-green-900 p-1 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors", title: "View Lead", children: t.jsx(Ht, { className: "h-4 w-4" }) }), ge.status !== "converted" && t.jsx("button", { onClick: () => Wr(ge), className: "text-purple-600 hover:text-purple-900 p-1 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded transition-colors", title: "Convert Lead", children: t.jsx(E2, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: () => vr(ge), className: "text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors", title: e("common.edit"), children: t.jsx(Jt, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: () => tr(ge), className: "text-red-600 hover:text-red-900 p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors", title: e("common.delete"), children: t.jsx(yt, { className: "h-4 w-4" }) })] }) })] }, ge.id)) })] }) }) }), t.jsx(en, { currentPage: b.currentPage, totalPages: b.totalPages, totalItems: b.totalItems, onPageChange: qe, itemsPerPage: b.itemsPerPage || y.limit || 10 })] }) }), t.jsx(Cm, { open: k && !!C, title: e("leads.deleteLead"), description: C ? t.jsxs("div", { children: [t.jsxs("div", { className: "flex items-center mb-3", children: [t.jsx("div", { className: "flex-shrink-0 h-10 w-10", children: t.jsx("div", { className: "h-10 w-10 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center", children: t.jsxs("span", { className: "text-white font-medium text-sm", children: [C.firstName?.[0] || "", C.lastName?.[0] || ""] }) }) }), t.jsxs("div", { className: "ml-3", children: [t.jsxs("div", { className: "font-medium text-gray-900 dark:text-white", children: [C.firstName, " ", C.lastName] }), t.jsx("div", { className: "text-xs text-gray-500 dark:text-gray-400", children: C.email })] })] }), t.jsx("p", { children: e("leads.deleteConfirmation") })] }) : null, confirmText: e("leads.deleteLead"), cancelText: e("common.cancel"), loading: A, onConfirm: Nt, onClose: () => { A || (E(!1), N(null)) } }), se && t.jsx("div", { className: "fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50", children: t.jsx("div", { className: "relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800", children: t.jsxs("div", { className: "mt-3", children: [t.jsxs("div", { className: "flex items-center justify-between mb-4", children: [t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white", children: "Import Leads from CSV" }), t.jsx("button", { onClick: () => { ee || (le(!1), K(null)) }, className: "text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50", disabled: ee, children: "" })] }), t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "text-sm text-gray-600 dark:text-gray-400", children: [t.jsx("p", { className: "mb-2", children: "Upload a CSV file to import multiple leads at once." }), t.jsxs("ul", { className: "list-disc list-inside space-y-1 text-xs", children: [t.jsx("li", { children: "Use our template for best results" }), t.jsx("li", { children: "Required columns: firstName, lastName, email" }), t.jsx("li", { children: "Maximum file size: 10MB" }), t.jsx("li", { children: "Duplicate emails will be skipped" })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Select CSV File" }), t.jsx("input", { type: "file", accept: ".csv", onChange: na, disabled: ee, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white disabled:opacity-50" }), U && t.jsxs("p", { className: "mt-2 text-sm text-green-600 dark:text-green-400", children: ["Selected: ", U.name] })] }), t.jsxs("div", { className: "flex justify-end space-x-2 pt-4", children: [t.jsx("button", { onClick: () => { le(!1), K(null) }, disabled: ee, className: "px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 disabled:opacity-50", children: "Cancel" }), t.jsx("button", { onClick: lr, disabled: !U || ee, className: "px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center", children: ee ? t.jsxs(t.Fragment, { children: [t.jsx(Uo, { className: "h-4 w-4 mr-2 animate-spin" }), "Importing..."] }) : t.jsxs(t.Fragment, { children: [t.jsx(Ui, { className: "h-4 w-4 mr-2" }), "Import Leads"] }) })] })] })] }) }) }), te && t.jsx("div", { className: "fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50", children: t.jsx("div", { className: "relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800", children: t.jsxs("div", { className: "mt-3", children: [t.jsxs("div", { className: "flex items-center justify-between mb-4", children: [t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white", children: "Bulk Assign Leads" }), t.jsx("button", { onClick: () => { ne || (G(!1), Te("")) }, className: "text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50", disabled: ne, children: "" })] }), t.jsxs("div", { className: "space-y-4", children: [t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: ["Assign ", Z.size, " selected lead(s) to a user"] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Assign to User" }), t.jsxs("select", { value: de, onChange: ge => Te(ge.target.value), disabled: ne, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white disabled:opacity-50", children: [t.jsx("option", { value: "", children: "-- Select a user --" }), t.jsx("option", { value: "unassigned", children: "Unassigned" }), pe.map(ge => t.jsxs("option", { value: ge.id.toString(), children: [ge.firstName, " ", ge.lastName] }, ge.id))] })] }), t.jsxs("div", { className: "flex justify-end space-x-2 pt-4", children: [t.jsx("button", { onClick: () => { G(!1), Te("") }, disabled: ne, className: "px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 disabled:opacity-50", children: "Cancel" }), t.jsx("button", { onClick: Hr, disabled: !de || ne, className: "px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center", children: ne ? t.jsxs(t.Fragment, { children: [t.jsx(Uo, { className: "h-4 w-4 mr-2 animate-spin" }), "Assigning..."] }) : t.jsxs(t.Fragment, { children: [t.jsx(wt, { className: "h-4 w-4 mr-2" }), "Assign Leads"] }) })] })] })] }) }) }), t.jsx(Y6, { isOpen: B, onClose: () => { V || (W(!1), q(null)) }, onConvert: async ge => { await Vr(ge) }, lead: M, isConverting: V })] })
}, Xt = ({ label: e, error: r, leftIcon: a, rightIcon: s, className: n, required: i, inputRef: o, ...c }) => t.jsxs("div", { children: [e && t.jsxs("label", { className: "block text-sm font-medium text-gray-900 dark:text-white mb-2", children: [e, i && t.jsx("span", { className: "text-red-500 ml-1", children: "*" })] }), t.jsxs("div", { className: "relative", children: [a && t.jsx("div", { className: "absolute inset-y-0 left-0 pl-3 pr-2 flex items-center pointer-events-none", children: a }), a && t.jsx("span", { className: "absolute inset-y-0 left-9 w-px bg-gray-200 dark:bg-gray-600" }), t.jsx("input", { ...c, ref: o, required: i, className: ["block w-full", a ? "pl-12" : "pl-4", s ? "pr-12" : "pr-4", "py-3 rounded-lg border transition-all duration-200", "bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100", "placeholder:text-gray-500 dark:placeholder:text-gray-400", r ? "border-red-300 dark:border-red-600 hover:border-red-400 dark:hover:border-red-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500" : "border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500", n || ""].join(" ") }), s && t.jsx("div", { className: "absolute inset-y-0 right-0 pr-3 flex items-center", children: s })] }), r && t.jsx("p", { className: "mt-1 text-xs text-rose-600 dark:text-rose-400", children: r })] }), Kc = ({ label: e, error: r, className: a, rows: s = 3, onChange: n, required: i, ...o }) => { const c = u => { let m = u.target.value; const g = /<script|<\/script|javascript:|on\w+\s*=|<iframe|<object|<embed/i; g.test(m) && (m = m.replace(g, "")), u.target.value = m, n && n(u) }; return t.jsxs("div", { children: [e && t.jsxs("label", { className: "block text-sm font-medium text-gray-900 dark:text-white mb-2", children: [e, i && t.jsx("span", { className: "text-red-500 ml-1", children: "*" })] }), t.jsx("textarea", { rows: s, ...o, onChange: c, required: i, className: ["w-full rounded-lg border p-4 text-sm transition-all duration-200", "bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100", "placeholder:text-gray-500 dark:placeholder:text-gray-400", "resize-y", r ? "border-red-300 dark:border-red-600 hover:border-red-400 dark:hover:border-red-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500" : "border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500", a || ""].join(" ") }), r && t.jsx("p", { className: "mt-1 text-xs text-rose-600 dark:text-rose-400", children: r })] }) }, Ai = ({ label: e, placeholder: r = "Select an option", value: a, options: s, onChange: n, error: i, required: o, searchable: c = !0, clearable: u = !0, leftIcon: m, disabled: g, className: f }) => {
    const [y, p] = h.useState(!1), [b, j] = h.useState(""), [v, S] = h.useState(-1), k = h.useRef(null), E = h.useRef(null), C = h.useRef(null), N = s.filter(W => W.label.toLowerCase().includes(b.toLowerCase())), A = s.find(W => W.value === a); h.useEffect(() => { const W = M => { k.current && !k.current.contains(M.target) && (p(!1), j(""), S(-1)) }; return document.addEventListener("mousedown", W), () => document.removeEventListener("mousedown", W) }, []), h.useEffect(() => { y && c && E.current && E.current.focus() }, [y, c]), h.useEffect(() => { y && v >= 0 && C.current && C.current.children[v]?.scrollIntoView({ block: "nearest" }) }, [v, y]); const D = W => { if (!y) { (W.key === "ArrowDown" || W.key === "Enter" || W.key === " ") && (W.preventDefault(), p(!0), S(0)); return } switch (W.key) { case "ArrowDown": W.preventDefault(), S(M => M < N.length - 1 ? M + 1 : 0); break; case "ArrowUp": W.preventDefault(), S(M => M > 0 ? M - 1 : N.length - 1); break; case "Enter": W.preventDefault(), v >= 0 && N[v] && I(N[v].value); break; case "Escape": p(!1), j(""), S(-1); break } }, I = W => { n(W), p(!1), j(""), S(-1) }, $ = W => { W.stopPropagation(), n(""), j("") }, B = () => { g || (p(!y), y || S(-1)) }; return t.jsxs("div", {
        className: `relative ${f || ""}`, ref: k, children: [e && t.jsxs("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: [e, o && t.jsx("span", { className: "text-red-500 ml-1", children: "*" })] }), t.jsxs("div", {
            className: "relative", children: [t.jsxs("div", {
                className: `
            relative w-full rounded-lg border transition-all duration-200 cursor-pointer
            ${m ? "pl-12" : "pl-4"} pr-10 py-3
            bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100
            ${i ? "border-red-300 dark:border-red-600 hover:border-red-400 dark:hover:border-red-500" : "border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}
            ${y ? "ring-2 ring-blue-500 border-blue-500" : "focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-blue-500"}
            ${g ? "opacity-50 cursor-not-allowed bg-gray-50 dark:bg-gray-800" : ""}
          `, onClick: B, onKeyDown: D, tabIndex: g ? -1 : 0, children: [m && t.jsx("div", { className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none", children: m }), m && t.jsx("span", { className: "absolute inset-y-0 left-9 w-px bg-gray-200 dark:bg-gray-600" }), t.jsx("div", { className: "flex items-center justify-between w-full", children: y && c ? t.jsx("input", { ref: E, type: "text", value: b, onChange: W => j(W.target.value), placeholder: "Type to search...", className: "bg-transparent border-none outline-none text-sm w-full", onKeyDown: D }) : t.jsxs("div", { className: "flex items-center space-x-2 text-sm", children: [A?.icon && t.jsx("span", { className: "flex-shrink-0", children: A.icon }), t.jsx("span", { className: A ? "text-gray-900 dark:text-gray-100" : "text-gray-500 dark:text-gray-400", children: A ? A.label : r })] }) }), t.jsxs("div", { className: "absolute inset-y-0 right-0 flex items-center pr-2 space-x-1", children: [u && A && !g && t.jsx("button", { onClick: $, className: "p-1 hover:bg-gray-100 dark:hover:bg-gray-600 rounded transition-colors", tabIndex: -1, children: t.jsx(fa, { className: "h-4 w-4 text-gray-400 hover:text-gray-600" }) }), t.jsx(_s, { className: `h-4 w-4 text-gray-400 transition-transform duration-200 ${y ? "transform rotate-180" : ""}` })] })]
            }), y && t.jsxs("div", {
                className: "absolute z-50 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-auto", children: [c && t.jsx("div", { className: "p-3 border-b border-gray-200 dark:border-gray-600", children: t.jsxs("div", { className: "relative", children: [t.jsx(Xr, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400" }), t.jsx("input", { type: "text", value: b, onChange: W => j(W.target.value), placeholder: "Search options...", className: "w-full pl-10 pr-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500", onKeyDown: D })] }) }), t.jsx("ul", {
                    ref: C, className: "py-1", children: N.length === 0 ? t.jsx("li", { className: "px-4 py-3 text-sm text-gray-500 dark:text-gray-400 text-center", children: "No options found" }) : N.map((W, M) => t.jsx("li", {
                        className: "relative", children: t.jsxs("button", {
                            type: "button", onClick: () => I(W.value), className: `
                        w-full text-left px-4 py-3 text-sm transition-colors duration-150
                        flex items-center space-x-3
                        ${M === v ? "bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300" : "hover:bg-gray-50 dark:hover:bg-gray-600"}
                        ${W.value === a ? "bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 font-medium" : "text-gray-900 dark:text-gray-100"}
                      `, children: [W.icon && t.jsx("span", { className: "flex-shrink-0", children: W.icon }), t.jsxs("div", { className: "flex-1", children: [t.jsx("div", { children: W.label }), W.description && t.jsx("div", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: W.description })] }), W.value === a && t.jsx("div", { className: "w-2 h-2 bg-blue-500 rounded-full flex-shrink-0" })]
                        })
                    }, W.value))
                })]
            })]
        }), i && t.jsx("p", { className: "mt-1 text-xs text-red-600 dark:text-red-400", children: i })]
    })
}, pm = [{ code: "US", name: "United States", phoneCode: "+1", flag: "" }, { code: "CA", name: "Canada", phoneCode: "+1", flag: "" }, { code: "GB", name: "United Kingdom", phoneCode: "+44", flag: "" }, { code: "AU", name: "Australia", phoneCode: "+61", flag: "" }, { code: "DE", name: "Germany", phoneCode: "+49", flag: "" }, { code: "FR", name: "France", phoneCode: "+33", flag: "" }, { code: "IT", name: "Italy", phoneCode: "+39", flag: "" }, { code: "ES", name: "Spain", phoneCode: "+34", flag: "" }, { code: "NL", name: "Netherlands", phoneCode: "+31", flag: "" }, { code: "BE", name: "Belgium", phoneCode: "+32", flag: "" }, { code: "CH", name: "Switzerland", phoneCode: "+41", flag: "" }, { code: "AT", name: "Austria", phoneCode: "+43", flag: "" }, { code: "SE", name: "Sweden", phoneCode: "+46", flag: "" }, { code: "NO", name: "Norway", phoneCode: "+47", flag: "" }, { code: "DK", name: "Denmark", phoneCode: "+45", flag: "" }, { code: "FI", name: "Finland", phoneCode: "+358", flag: "" }, { code: "PL", name: "Poland", phoneCode: "+48", flag: "" }, { code: "CZ", name: "Czech Republic", phoneCode: "+420", flag: "" }, { code: "HU", name: "Hungary", phoneCode: "+36", flag: "" }, { code: "SK", name: "Slovakia", phoneCode: "+421", flag: "" }, { code: "SI", name: "Slovenia", phoneCode: "+386", flag: "" }, { code: "HR", name: "Croatia", phoneCode: "+385", flag: "" }, { code: "RS", name: "Serbia", phoneCode: "+381", flag: "" }, { code: "BG", name: "Bulgaria", phoneCode: "+359", flag: "" }, { code: "RO", name: "Romania", phoneCode: "+40", flag: "" }, { code: "GR", name: "Greece", phoneCode: "+30", flag: "" }, { code: "TR", name: "Turkey", phoneCode: "+90", flag: "" }, { code: "RU", name: "Russia", phoneCode: "+7", flag: "" }, { code: "UA", name: "Ukraine", phoneCode: "+380", flag: "" }, { code: "BY", name: "Belarus", phoneCode: "+375", flag: "" }, { code: "LT", name: "Lithuania", phoneCode: "+370", flag: "" }, { code: "LV", name: "Latvia", phoneCode: "+371", flag: "" }, { code: "EE", name: "Estonia", phoneCode: "+372", flag: "" }, { code: "JP", name: "Japan", phoneCode: "+81", flag: "" }, { code: "KR", name: "South Korea", phoneCode: "+82", flag: "" }, { code: "CN", name: "China", phoneCode: "+86", flag: "" }, { code: "IN", name: "India", phoneCode: "+91", flag: "" }, { code: "ID", name: "Indonesia", phoneCode: "+62", flag: "" }, { code: "TH", name: "Thailand", phoneCode: "+66", flag: "" }, { code: "VN", name: "Vietnam", phoneCode: "+84", flag: "" }, { code: "PH", name: "Philippines", phoneCode: "+63", flag: "" }, { code: "MY", name: "Malaysia", phoneCode: "+60", flag: "" }, { code: "SG", name: "Singapore", phoneCode: "+65", flag: "" }, { code: "HK", name: "Hong Kong", phoneCode: "+852", flag: "" }, { code: "TW", name: "Taiwan", phoneCode: "+886", flag: "" }, { code: "NZ", name: "New Zealand", phoneCode: "+64", flag: "" }, { code: "BR", name: "Brazil", phoneCode: "+55", flag: "" }, { code: "MX", name: "Mexico", phoneCode: "+52", flag: "" }, { code: "AR", name: "Argentina", phoneCode: "+54", flag: "" }, { code: "CL", name: "Chile", phoneCode: "+56", flag: "" }, { code: "CO", name: "Colombia", phoneCode: "+57", flag: "" }, { code: "PE", name: "Peru", phoneCode: "+51", flag: "" }, { code: "VE", name: "Venezuela", phoneCode: "+58", flag: "" }, { code: "UY", name: "Uruguay", phoneCode: "+598", flag: "" }, { code: "PY", name: "Paraguay", phoneCode: "+595", flag: "" }, { code: "BO", name: "Bolivia", phoneCode: "+591", flag: "" }, { code: "EC", name: "Ecuador", phoneCode: "+593", flag: "" }, { code: "ZA", name: "South Africa", phoneCode: "+27", flag: "" }, { code: "NG", name: "Nigeria", phoneCode: "+234", flag: "" }, { code: "KE", name: "Kenya", phoneCode: "+254", flag: "" }, { code: "GH", name: "Ghana", phoneCode: "+233", flag: "" }, { code: "EG", name: "Egypt", phoneCode: "+20", flag: "" }, { code: "MA", name: "Morocco", phoneCode: "+212", flag: "" }, { code: "TN", name: "Tunisia", phoneCode: "+216", flag: "" }, { code: "DZ", name: "Algeria", phoneCode: "+213", flag: "" }, { code: "IL", name: "Israel", phoneCode: "+972", flag: "" }, { code: "SA", name: "Saudi Arabia", phoneCode: "+966", flag: "" }, { code: "AE", name: "United Arab Emirates", phoneCode: "+971", flag: "" }, { code: "QA", name: "Qatar", phoneCode: "+974", flag: "" }, { code: "KW", name: "Kuwait", phoneCode: "+965", flag: "" }, { code: "BH", name: "Bahrain", phoneCode: "+973", flag: "" }, { code: "OM", name: "Oman", phoneCode: "+968", flag: "" }, { code: "JO", name: "Jordan", phoneCode: "+962", flag: "" }, { code: "LB", name: "Lebanon", phoneCode: "+961", flag: "" }, { code: "SY", name: "Syria", phoneCode: "+963", flag: "" }, { code: "IQ", name: "Iraq", phoneCode: "+964", flag: "" }, { code: "IR", name: "Iran", phoneCode: "+98", flag: "" }, { code: "AF", name: "Afghanistan", phoneCode: "+93", flag: "" }, { code: "PK", name: "Pakistan", phoneCode: "+92", flag: "" }, { code: "BD", name: "Bangladesh", phoneCode: "+880", flag: "" }, { code: "LK", name: "Sri Lanka", phoneCode: "+94", flag: "" }, { code: "NP", name: "Nepal", phoneCode: "+977", flag: "" }, { code: "BT", name: "Bhutan", phoneCode: "+975", flag: "" }, { code: "MV", name: "Maldives", phoneCode: "+960", flag: "" }], eoe = () => pm.find(e => e.code === "US") || pm[0], toe = ({ value: e, onChange: r, label: a = "Phone", error: s, required: n = !1, placeholder: i = "Enter number" }) => { const [o, c] = h.useState(!1), [u, m] = h.useState(""), [g, f] = h.useState(eoe()), [y, p] = h.useState(""), b = h.useRef(null), j = h.useRef(null); h.useEffect(() => { if (e) { const E = pm.find(C => e.startsWith(C.phoneCode)); E ? (f(E), p(e.substring(E.phoneCode.length).trim())) : p(e) } }, []), h.useEffect(() => { const E = C => { b.current && !b.current.contains(C.target) && (c(!1), m("")) }; return document.addEventListener("mousedown", E), () => document.removeEventListener("mousedown", E) }, []), h.useEffect(() => { o && j.current && j.current.focus() }, [o]); const v = pm.filter(E => E.name.toLowerCase().includes(u.toLowerCase()) || E.phoneCode.includes(u) || E.code.toLowerCase().includes(u.toLowerCase())), S = E => { f(E), c(!1), m(""); const C = y ? `${E.phoneCode} ${y}` : ""; r(C, E.code) }, k = E => { const C = E.target.value; p(C); const N = C ? `${g.phoneCode} ${C}` : ""; r(N, g.code) }; return t.jsxs("div", { className: "w-full", children: [a && t.jsxs("label", { className: "block text-sm font-medium text-gray-900 dark:text-white mb-2", children: [a, n && t.jsx("span", { className: "text-red-500 ml-1", children: "*" })] }), t.jsxs("div", { className: "relative", children: [t.jsxs("div", { className: `flex items-stretch rounded-lg border ${s ? "border-red-300 dark:border-red-600" : "border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-blue-500 transition-all`, children: [t.jsxs("button", { type: "button", onClick: () => c(!o), className: "flex items-center gap-2 px-3 py-2 border-r border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors rounded-l-lg bg-gray-50/30 dark:bg-gray-800/30", children: [t.jsx("span", { className: "text-2xl leading-none", children: g.flag }), t.jsx("span", { className: "text-sm font-medium text-gray-700 dark:text-gray-200", children: g.phoneCode }), t.jsx(_s, { className: `h-4 w-4 text-gray-400 transition-transform ${o ? "rotate-180" : ""}` })] }), t.jsxs("div", { className: "flex-1 flex items-center", children: [t.jsx(ma, { className: "h-4 w-4 text-gray-400 ml-3" }), t.jsx("input", { type: "tel", value: y, onChange: k, placeholder: i, className: "flex-1 px-3 py-2 bg-transparent text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none" })] })] }), o && t.jsxs("div", { ref: b, className: "absolute z-50 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-xl max-h-80 overflow-hidden", children: [t.jsx("div", { className: "p-3 border-b border-gray-200 dark:border-gray-600 sticky top-0 bg-white dark:bg-gray-800", children: t.jsxs("div", { className: "relative", children: [t.jsx(Xr, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400" }), t.jsx("input", { ref: j, type: "text", value: u, onChange: E => m(E.target.value), placeholder: "Search country or code...", className: "w-full pl-10 pr-8 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500" }), u && t.jsx("button", { type: "button", onClick: () => m(""), className: "absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded", children: t.jsx(fa, { className: "h-4 w-4 text-gray-400" }) })] }) }), t.jsx("div", { className: "overflow-y-auto max-h-64 custom-scrollbar", children: v.length > 0 ? v.map(E => t.jsxs("button", { type: "button", onClick: () => S(E), className: `w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${g.code === E.code ? "bg-blue-50 dark:bg-blue-900/20" : ""}`, children: [t.jsx("span", { className: "text-2xl leading-none", children: E.flag }), t.jsxs("div", { className: "flex-1 text-left", children: [t.jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: E.name }), t.jsx("div", { className: "text-xs text-gray-500 dark:text-gray-400", children: E.code })] }), t.jsx("span", { className: "text-sm font-medium text-gray-600 dark:text-gray-300", children: E.phoneCode })] }, E.code)) : t.jsxs("div", { className: "px-4 py-8 text-center text-gray-500 dark:text-gray-400", children: [t.jsx(Xr, { className: "h-8 w-8 mx-auto mb-2 opacity-50" }), t.jsx("p", { className: "text-sm", children: "No countries found" })] }) })] })] }), s && t.jsxs("p", { className: "mt-1 text-sm text-red-600 dark:text-red-400 flex items-center gap-1", children: [t.jsx("span", { className: "inline-block w-1 h-1 rounded-full bg-red-600 dark:bg-red-400" }), s] }), !s && t.jsx("p", { className: "mt-1 text-xs text-gray-500 dark:text-gray-400", children: "Select country code and enter your phone number" })] }) }, sb = { firstName: "", lastName: "", email: "", phone: "", company: "", position: "", sourceId: void 0, status: "new", notes: "", assignedTo: void 0, tags: [], budget: void 0, currency: "USD", priority: "medium", website: "", address: "", industry: "", companySize: void 0, annualRevenue: void 0, leadScore: void 0, country: "", state: "", city: "", zipCode: "", linkedinProfile: "", timezone: "", preferredContactMethod: "email", lastContactedAt: void 0, nextFollowUpAt: void 0, customFields: {} }, Q6 = ({ initial: e, onSubmit: r, submitting: a }) => { const { currencySettings: s } = Br(), [n, i] = h.useState({ form: { ...sb, currency: s?.primary || "USD", ...e || {} }, errors: {}, isSubmitting: !1, hasSubmitted: !1 }), [o, c] = h.useState([]), { leadSources: u } = Br(), [m, g] = h.useState(""), [f, y] = h.useState([]), [p, b] = h.useState([]), [j, v] = h.useState(!1), [S, k] = h.useState([]), E = () => Object.keys(_c).sort(), C = () => { const T = [{ value: "USD", label: "USD ($)", description: "US Dollar", symbol: "$" }, { value: "EUR", label: "EUR ()", description: "Euro", symbol: "" }, { value: "GBP", label: "GBP ()", description: "British Pound", symbol: "" }, { value: "INR", label: "INR ()", description: "Indian Rupee", symbol: "" }, { value: "JPY", label: "JPY ()", description: "Japanese Yen", symbol: "" }, { value: "CNY", label: "CNY ()", description: "Chinese Yuan", symbol: "" }, { value: "CAD", label: "CAD ($)", description: "Canadian Dollar", symbol: "$" }, { value: "AUD", label: "AUD ($)", description: "Australian Dollar", symbol: "$" }, { value: "SGD", label: "SGD ($)", description: "Singapore Dollar", symbol: "$" }, { value: "HKD", label: "HKD ($)", description: "Hong Kong Dollar", symbol: "$" }, { value: "AED", label: "AED (.)", description: "UAE Dirham", symbol: "." }, { value: "SAR", label: "SAR ()", description: "Saudi Riyal", symbol: "" }, { value: "QAR", label: "QAR ()", description: "Qatari Riyal", symbol: "" }]; let _ = T; if (s?.supportedCurrencies && s.supportedCurrencies.length > 0) { const U = new Set(s.supportedCurrencies); s.primary && U.add(s.primary), _ = T.filter(K => U.has(K.value)), s.supportedCurrencies.forEach(K => { T.find(Z => Z.value === K) || _.push({ value: K, label: `${K}`, description: K, symbol: "" }) }) } const H = s?.primary || "USD"; return _.sort((U, K) => U.value === H ? -1 : K.value === H ? 1 : U.label.localeCompare(K.label)) }, N = T => ({ USD: "$", EUR: "", GBP: "", INR: "", JPY: "", CNY: "", CAD: "C$", AUD: "A$", SGD: "S$", HKD: "HK$", CHF: "", KRW: "", MXN: "MX$", BRL: "R$", RUB: "", ZAR: "R", TRY: "", NOK: "kr", SEK: "kr", DKK: "kr", PLN: "z", CZK: "K", HUF: "Ft", ILS: "", AED: ".", SAR: "", THB: "", MYR: "RM", IDR: "Rp", PHP: "", VND: "", KGS: "", KPW: "", SYP: "", UYU: "$U", YER: "" })[T] || T; h.useEffect(() => { if (e) { const T = e.tags ? Array.isArray(e.tags) ? e.tags.map(_ => typeof _ == "object" ? _.id : _).filter(Boolean) : [] : []; i(_ => ({ ..._, form: { ...sb, currency: s?.primary || "USD", ...e, tags: T } })), e.sourceId && g(e.sourceId) } }, [e, s]), h.useEffect(() => { s && !e && i(T => ({ ...T, form: { ...T.form, currency: T.form.currency || s.primary } })) }, [s, e]), h.useEffect(() => { if (n.form.country && _c[n.form.country]) { const T = _c[n.form.country]; (!n.form.currency || n.form.currency === s?.primary || n.form.currency === "USD") && i(_ => ({ ..._, form: { ..._.form, currency: T } })) } }, [n.form.country]), h.useEffect(() => { (async () => { try { const [_, H, U] = await Promise.all([ur.getUsers(), ei.getTags(), kl.getIndustries().catch(() => [])]), K = _?.data ?? _?.users ?? _, Z = H?.data ?? H?.tags ?? H; c(Array.isArray(K) ? K : []), y(Array.isArray(Z) ? Z : []), b(Array.isArray(U) ? U : []), Array.isArray(Z) || console.warn("Tags payload not array:", H) } catch (_) { console.error("Error loading form data:", _), i(H => ({ ...H, errors: { ...H.errors, general: "Failed to load form data. Please refresh the page." } })), c([]), y([]), b([]), console.log("Setting fallback empty arrays due to API error"), n.form.sourceId && g(n.form.sourceId) } finally { } })() }, []), h.useEffect(() => { if (n.form.industry) { const T = p.some(_ => _.isActive && _.name.toLowerCase() === n.form.industry?.toLowerCase()); v(!T) } else v(!1) }, [n.form.industry, p]); const A = async () => { try { const T = await ie.get("/business-settings/field-configs/lead"); T.data?.success && k(T.data.data) } catch (T) { console.error("Error fetching field configs:", T), k([]) } }; h.useEffect(() => { A(); const T = () => A(); return window.addEventListener("fieldConfigsUpdated", T), () => window.removeEventListener("fieldConfigsUpdated", T) }, []); const D = T => { const _ = (T || "").trim(); if (!_) return "Email is required"; if (!/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(_)) return "Please enter a valid email address"; const [U, K] = _.split("@"); return U.startsWith(".") || U.endsWith(".") || U.includes("..") || K.includes("..") || K.split(".").some(J => !J || J.startsWith("-") || J.endsWith("-")) ? "Please enter a valid email address" : null }, I = { IN: { min: 10, max: 10 }, US: { min: 10, max: 10 }, CA: { min: 10, max: 10 }, GB: { min: 10, max: 10 }, AU: { min: 9, max: 9 }, AE: { min: 9, max: 9 }, SA: { min: 9, max: 9 }, SG: { min: 8, max: 8 }, MY: { min: 9, max: 10 }, ID: { min: 10, max: 12 }, PK: { min: 10, max: 10 }, BD: { min: 10, max: 10 }, NP: { min: 10, max: 10 }, LK: { min: 9, max: 9 }, PH: { min: 10, max: 10 }, ZA: { min: 9, max: 9 }, NG: { min: 8, max: 10 } }, $ = () => { if (!S.length) return []; const T = {}, _ = { personal: { title: "Personal Information", icon: t.jsx(wt, { className: "h-5 w-5" }), color: "blue" }, company: { title: "Company Information", icon: t.jsx(qi, { className: "h-5 w-5" }), color: "green" }, location: { title: "Location & Contact", icon: t.jsx($o, { className: "h-5 w-5" }), color: "purple" }, lead_management: { title: "Lead Management", icon: t.jsx(A2, { className: "h-5 w-5" }), color: "orange" }, notes: { title: "Notes & Tags", icon: t.jsx(Fr, { className: "h-5 w-5" }), color: "indigo" } }; S.filter(U => U.isVisible).sort((U, K) => U.displayOrder - K.displayOrder).forEach(U => { const K = U.section || "other"; if (!T[K]) { const Z = _[K] || { title: K.replace(/_/g, " "), icon: t.jsx(Fr, { className: "h-5 w-5" }), color: "gray" }; T[K] = { id: K, ...Z, fields: [] } } T[K].fields.push(U) }); const H = ["personal", "company", "location", "lead_management", "notes"]; return H.filter(U => T[U]).map(U => T[U]).concat(Object.values(T).filter(U => !H.includes(U.id))) }, B = T => { const _ = { blue: { bg: "bg-transparent", icon: "text-blue-600 dark:text-blue-400", border: "border-gray-200 dark:border-gray-700" }, green: { bg: "bg-transparent", icon: "text-green-600 dark:text-green-400", border: "border-gray-200 dark:border-gray-700" }, purple: { bg: "bg-transparent", icon: "text-purple-600 dark:text-purple-400", border: "border-gray-200 dark:border-gray-700" }, orange: { bg: "bg-transparent", icon: "text-orange-600 dark:text-orange-400", border: "border-gray-200 dark:border-gray-700" }, indigo: { bg: "bg-transparent", icon: "text-indigo-600 dark:text-indigo-400", border: "border-gray-200 dark:border-gray-700" }, gray: { bg: "bg-transparent", icon: "text-gray-600 dark:text-gray-400", border: "border-gray-200 dark:border-gray-700" } }; return _[T] || _.gray }, W = T => { const _ = n.form[T.fieldName] !== void 0 ? n.form[T.fieldName] : n.form.customFields?.[T.fieldName] || "", H = n.errors[T.fieldName]; switch ((T.validation?.type || "text").toLowerCase()) { case "number": return t.jsx(Xt, { label: T.label, type: "number", value: _ || "", onChange: Z => se(T.fieldName, Z.target.value ? Number(Z.target.value) : void 0), required: T.isRequired, error: H, placeholder: T.placeholder }, T.fieldName); case "date": return t.jsx(Xt, { label: T.label, type: "date", value: _ || "", onChange: Z => se(T.fieldName, Z.target.value || void 0), required: T.isRequired, error: H, placeholder: T.placeholder }, T.fieldName); case "datetime": case "datetime-local": return t.jsx(Xt, { label: T.label, type: "datetime-local", value: _ || "", onChange: Z => se(T.fieldName, Z.target.value || void 0), required: T.isRequired, error: H, placeholder: T.placeholder }, T.fieldName); case "textarea": return t.jsx(Kc, { label: T.label, value: _ || "", onChange: Z => se(T.fieldName, Z.target.value), required: T.isRequired, error: H, rows: 3, placeholder: T.placeholder }, T.fieldName); case "select": case "dropdown": const K = T.options?.options || T.options || []; return t.jsx(Ai, { label: T.label, value: _ || "", placeholder: T.placeholder || `Select ${T.label}`, options: Array.isArray(K) ? K.map(Z => ({ value: typeof Z == "string" ? Z : Z.value || Z, label: typeof Z == "string" ? Z : Z.label || Z.value || Z })) : [], onChange: Z => { T.fieldName.startsWith("custom") || !n.form.hasOwnProperty(T.fieldName) ? se(T.fieldName, Z) : X(T.fieldName, Z) }, searchable: !0, clearable: !T.isRequired, required: T.isRequired }, T.fieldName); case "checkbox": return t.jsxs("div", { className: "flex items-center", children: [t.jsx("input", { type: "checkbox", checked: _ || !1, onChange: Z => se(T.fieldName, Z.target.checked), className: "h-4 w-4 text-blue-600 rounded" }), t.jsxs("label", { className: "ml-2 text-sm font-medium text-gray-900 dark:text-white", children: [T.label, T.isRequired && t.jsx("span", { className: "text-red-500 ml-1", children: "*" })] })] }, T.fieldName); default: return t.jsx(Xt, { label: T.label, value: _ || "", onChange: Z => { T.fieldName.startsWith("custom") || !n.form.hasOwnProperty(T.fieldName) ? se(T.fieldName, Z.target.value) : X(T.fieldName, Z.target.value) }, required: T.isRequired, error: H, placeholder: T.placeholder }, T.fieldName) } }, M = T => { const _ = n.form[T.fieldName] !== void 0 ? n.form[T.fieldName] : n.form.customFields?.[T.fieldName], H = n.errors[T.fieldName]; if (!["firstName", "lastName", "email", "phone", "company", "position", "industry", "website", "companySize", "annualRevenue", "country", "state", "city", "zipCode", "address", "timezone", "linkedinProfile", "sourceId", "status", "priority", "assignedTo", "budget", "currency", "leadScore", "preferredContactMethod", "nextFollowUpAt", "notes", "tags"].includes(T.fieldName)) return W(T); switch (T.fieldName) { case "firstName": case "lastName": return t.jsx(Xt, { label: T.label, leftIcon: t.jsx(wt, { className: "h-4 w-4 text-gray-400" }), value: _ || "", onChange: K => X(T.fieldName, K.target.value), required: T.isRequired, error: H, placeholder: T.placeholder }, T.fieldName); case "email": return t.jsx(Xt, { label: T.label, leftIcon: t.jsx(ir, { className: "h-4 w-4 text-gray-400" }), type: "email", value: _ || "", onChange: K => X(T.fieldName, K.target.value), required: T.isRequired, error: H, placeholder: T.placeholder }, T.fieldName); case "phone": return t.jsx(toe, { label: T.label, value: _ || "", onChange: K => X(T.fieldName, K), error: H, placeholder: T.placeholder || "Enter phone number", required: T.isRequired }, T.fieldName); case "company": return t.jsx(Xt, { label: T.label, leftIcon: t.jsx(qi, { className: "h-4 w-4 text-gray-400" }), value: _ || "", onChange: K => X(T.fieldName, K.target.value), error: H, required: T.isRequired, placeholder: T.placeholder }, T.fieldName); case "position": return t.jsx(Xt, { label: T.label, leftIcon: t.jsx(Yu, { className: "h-4 w-4 text-gray-400" }), value: _ || "", onChange: K => X(T.fieldName, K.target.value), error: H, required: T.isRequired, placeholder: T.placeholder }, T.fieldName); case "industry": return t.jsxs("div", { children: [t.jsx(Ai, { label: T.label, leftIcon: t.jsx(Ea, { className: "h-4 w-4 text-gray-400" }), value: j ? "Other" : _ || "", onChange: K => { K === "Other" ? (v(!0), X(T.fieldName, "")) : (v(!1), X(T.fieldName, K)) }, options: [...p.filter(K => K.isActive).map(K => ({ value: K.name, label: K.name })), { value: "Other", label: "Other" }], placeholder: T.placeholder || "Select industry", required: T.isRequired }), j && t.jsx("div", { className: "mt-2", children: t.jsx(Xt, { label: "Specify Industry", leftIcon: t.jsx(Ea, { className: "h-4 w-4 text-gray-400" }), value: _ || "", onChange: K => X(T.fieldName, K.target.value), placeholder: "e.g. Technology, Healthcare" }) })] }, T.fieldName); case "website": return t.jsx(Xt, { label: T.label, leftIcon: t.jsx(bf, { className: "h-4 w-4 text-gray-400" }), type: "url", value: _ || "", onChange: K => X(T.fieldName, K.target.value), placeholder: T.placeholder || "https://company.com", required: T.isRequired }, T.fieldName); case "companySize": return t.jsx(Xt, { label: T.label, leftIcon: t.jsx($s, { className: "h-4 w-4 text-gray-400" }), type: "number", value: _ || "", onChange: K => X(T.fieldName, K.target.value ? Number(K.target.value) : void 0), placeholder: T.placeholder || "Number of employees", required: T.isRequired }, T.fieldName); case "annualRevenue": return t.jsx(Xt, { label: T.label, leftIcon: t.jsx(Qr, { className: "h-4 w-4 text-gray-400" }), type: "number", value: _ || "", onChange: K => X(T.fieldName, K.target.value ? Number(K.target.value) : void 0), placeholder: T.placeholder || "Annual revenue", required: T.isRequired }, T.fieldName); case "country": return t.jsx(Ai, { label: T.label, leftIcon: t.jsx(sh, { className: "h-4 w-4 text-gray-400" }), value: _ || "", placeholder: T.placeholder || "Select country", options: [{ value: "", label: "Select country" }, ...E().map(K => ({ value: K, label: K, description: _c[K] ? `Currency: ${_c[K]}` : void 0 }))], onChange: K => X(T.fieldName, K || ""), searchable: !0, clearable: !0, required: T.isRequired }, T.fieldName); case "state": return t.jsx(Xt, { label: T.label, leftIcon: t.jsx($o, { className: "h-4 w-4 text-gray-400" }), value: _ || "", onChange: K => X(T.fieldName, K.target.value), placeholder: T.placeholder || "State/Province", required: T.isRequired }, T.fieldName); case "city": return t.jsx(Xt, { label: T.label, leftIcon: t.jsx($o, { className: "h-4 w-4 text-gray-400" }), value: _ || "", onChange: K => X(T.fieldName, K.target.value), placeholder: T.placeholder || "City", required: T.isRequired }, T.fieldName); case "zipCode": return t.jsx(Xt, { label: T.label, leftIcon: t.jsx($o, { className: "h-4 w-4 text-gray-400" }), value: _ || "", onChange: K => X(T.fieldName, K.target.value), placeholder: T.placeholder || "ZIP/Postal Code", required: T.isRequired }, T.fieldName); case "address": return t.jsx(Kc, { label: T.label, value: _ || "", onChange: K => X(T.fieldName, K.target.value), placeholder: T.placeholder || "Address", rows: 3, required: T.isRequired }, T.fieldName); case "timezone": return t.jsx(Xt, { label: T.label, leftIcon: t.jsx(Kt, { className: "h-4 w-4 text-gray-400" }), value: _ || "", onChange: K => X(T.fieldName, K.target.value), placeholder: T.placeholder || "e.g. PST, EST, GMT", required: T.isRequired }, T.fieldName); case "linkedinProfile": return t.jsx(Xt, { label: T.label, leftIcon: t.jsx(O2, { className: "h-4 w-4 text-gray-400" }), type: "url", value: _ || "", onChange: K => X(T.fieldName, K.target.value), placeholder: T.placeholder || "LinkedIn URL", required: T.isRequired }, T.fieldName); case "sourceId": return t.jsx(Ai, { label: T.label, leftIcon: t.jsx(I2, { className: "h-4 w-4 text-gray-400" }), value: m, placeholder: T.placeholder || "Select source", options: [{ value: "", label: "Select source" }, ...Array.isArray(u) ? u.filter(K => K.isActive !== !1).sort((K, Z) => (K.sortOrder ?? 0) - (Z.sortOrder ?? 0)).map(K => ({ value: K.id || K.name, label: K.name, description: K.description || void 0 })) : []], onChange: K => { g(K); const Z = Number(K); X(T.fieldName, Number.isFinite(Z) ? Z : void 0) }, searchable: !0, clearable: !0, required: T.isRequired }, T.fieldName); case "status": return t.jsx(Ai, { label: T.label, leftIcon: t.jsx(I2, { className: "h-4 w-4 text-gray-400" }), value: _ || "new", placeholder: T.placeholder || "Select status", options: [{ value: "new", label: "New", description: "Newly generated lead" }, { value: "contacted", label: "Contacted", description: "Initial contact made" }, { value: "qualified", label: "Qualified", description: "Lead has been qualified" }, { value: "proposal", label: "Proposal", description: "Proposal sent" }, { value: "negotiation", label: "Negotiation", description: "In negotiation phase" }, { value: "closed", label: "Closed", description: "Successfully closed" }, { value: "lost", label: "Lost", description: "Lead was lost" }], onChange: K => X(T.fieldName, K), searchable: !1, clearable: !1, required: T.isRequired }, T.fieldName); case "priority": return t.jsx(Ai, { label: T.label, leftIcon: t.jsx(sh, { className: "h-4 w-4 text-gray-400" }), value: _ || "medium", placeholder: T.placeholder || "Select priority", options: [{ value: "low", label: "Low", icon: t.jsx("span", { className: "text-green-500", children: "" }), description: "Low priority" }, { value: "medium", label: "Medium", icon: t.jsx("span", { className: "text-yellow-500", children: "" }), description: "Medium priority" }, { value: "high", label: "High", icon: t.jsx("span", { className: "text-orange-500", children: "" }), description: "High priority" }, { value: "urgent", label: "Urgent", icon: t.jsx("span", { className: "text-red-500", children: "" }), description: "Urgent priority" }], onChange: K => X(T.fieldName, K), searchable: !1, clearable: !1, required: T.isRequired }, T.fieldName); case "assignedTo": return t.jsx(Ai, { label: T.label, leftIcon: t.jsx(oU, { className: "h-4 w-4 text-gray-400" }), value: _ ?? "", placeholder: T.placeholder || "Select user", options: [{ value: "", label: "Select user" }, ...Array.isArray(o) ? o.map(K => ({ value: K.id, label: `${K.firstName} ${K.lastName}`, icon: t.jsx(wt, { className: "h-4 w-4 text-blue-500" }), description: `User ID: ${K.id}` })) : []], onChange: K => X(T.fieldName, K ? Number(K) : void 0), searchable: !0, clearable: !0, required: T.isRequired }, T.fieldName); case "budget": return t.jsxs("div", { className: "space-y-2", children: [t.jsxs("label", { className: "block text-sm font-medium text-gray-900 dark:text-white", children: [T.label, T.isRequired && t.jsx("span", { className: "text-red-500 ml-1", children: "*" })] }), t.jsxs("div", { className: "grid grid-cols-3 gap-3", children: [t.jsx("div", { className: "col-span-2", children: t.jsx(Xt, { leftIcon: t.jsx("span", { className: "text-gray-400 font-medium text-sm", children: N(n.form.currency || s?.primary || "USD") }), type: "number", step: "0.01", value: _ || "", onChange: K => X(T.fieldName, K.target.value ? Number(K.target.value) : void 0), placeholder: T.placeholder || "Enter amount" }) }), t.jsx("div", { children: t.jsx(Ai, { value: n.form.currency || s?.primary || "USD", placeholder: "Currency", options: C(), onChange: K => X("currency", K), searchable: !0, clearable: !1 }) })] })] }, T.fieldName); case "currency": return null; case "leadScore": return t.jsx(Xt, { label: T.label, leftIcon: t.jsx(A2, { className: "h-4 w-4 text-gray-400" }), type: "number", min: "0", max: "100", value: _ || "", onChange: K => X(T.fieldName, K.target.value ? Number(K.target.value) : void 0), placeholder: T.placeholder || "Score (0-100)", required: T.isRequired }, T.fieldName); case "preferredContactMethod": return t.jsx(Ai, { label: T.label, leftIcon: t.jsx(Fr, { className: "h-4 w-4 text-gray-400" }), value: _ || "email", placeholder: T.placeholder || "Select contact method", options: [{ value: "email", label: "Email", icon: t.jsx(ir, { className: "h-4 w-4 text-blue-500" }), description: "Contact via email" }, { value: "phone", label: "Phone", icon: t.jsx(ma, { className: "h-4 w-4 text-green-500" }), description: "Contact via phone call" }, { value: "sms", label: "SMS", icon: t.jsx(Fr, { className: "h-4 w-4 text-purple-500" }), description: "Contact via SMS" }, { value: "whatsapp", label: "WhatsApp", icon: t.jsx(Fr, { className: "h-4 w-4 text-green-600" }), description: "Contact via WhatsApp" }, { value: "linkedin", label: "LinkedIn", icon: t.jsx(O2, { className: "h-4 w-4 text-blue-600" }), description: "Contact via LinkedIn" }], onChange: K => X(T.fieldName, K), searchable: !1, clearable: !1, required: T.isRequired }, T.fieldName); case "nextFollowUpAt": return t.jsx(Xt, { label: T.label, leftIcon: t.jsx(Zt, { className: "h-4 w-4 text-gray-400" }), type: "datetime-local", value: _ || "", onChange: K => X(T.fieldName, K.target.value || void 0), required: T.isRequired }, T.fieldName); case "notes": return t.jsx(Kc, { label: T.label, value: _ || "", onChange: K => X(T.fieldName, K.target.value), error: H, rows: 4, placeholder: T.placeholder || "Add any additional notes...", required: T.isRequired }, T.fieldName); case "tags": return t.jsxs("div", { children: [t.jsxs("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3", children: [T.label, T.isRequired && t.jsx("span", { className: "text-red-500 ml-1", children: "*" })] }), t.jsx("div", { className: "flex flex-wrap gap-3", children: Array.isArray(f) && f.map(K => { const Z = (n.form.tags || []).includes(K.id); return t.jsx("button", { type: "button", onClick: () => le(K.id), className: `px-4 py-2 text-sm rounded-full border transition-all duration-200 ${Z ? "bg-blue-600 text-white border-blue-600 hover:bg-blue-700 shadow-md" : "bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-200 border-gray-300 dark:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-500 hover:border-gray-400"}`, children: K.name }, K.id) }) })] }, T.fieldName); default: return W(T) } }, q = { min: 7, max: 15 }, V = T => { const _ = (T || "").trim(); if (!_) return "Phone is required"; if (!/^[0-9+\s()-]+$/.test(_)) return "Phone can only contain digits, spaces, +, -, (, )"; const H = _.replace(/\D/g, ""); let U, K = 0; for (const J of pm) { const te = J.phoneCode.replace(/\D/g, ""); H.startsWith(te) && te.length > K && (U = J.code, K = te.length) } const Z = U && I[U] ? I[U] : q; if (Z) { const J = U && K > 0 ? H.length - K : H.length; if (J < Z.min) return `Phone number must be at least ${Z.min} digits`; if (Z.max && J > Z.max) return `Phone number must be at most ${Z.max} digits` } return null }, X = (T, _) => { i(H => ({ ...H, form: { ...H.form, [T]: _ }, errors: { ...H.errors, [T]: "" } })) }, se = (T, _) => { i(H => ({ ...H, form: { ...H.form, customFields: { ...H.form.customFields || {}, [T]: _ } }, errors: { ...H.errors, [T]: "" } })) }, le = T => { i(_ => { const H = Array.isArray(_.form.tags) ? [..._.form.tags] : [], U = H.indexOf(T); return U === -1 ? H.push(T) : H.splice(U, 1), { ..._, form: { ..._.form, tags: H } } }) }, ee = () => { const T = {}; for (const _ of S) if (_.isVisible && _.isRequired) { const H = n.form[_.fieldName] || n.form.customFields?.[_.fieldName]; if (H == null || H === "" || Array.isArray(H) && H.length === 0) T[_.fieldName] = `${_.label || _.fieldName} is required`; else { if (_.fieldName === "email") { const U = D(String(H)); U && (T[_.fieldName] = U) } if (_.fieldName === "phone") { const U = V(String(H)); U && (T[_.fieldName] = U) } } } return i(_ => ({ ..._, errors: T })), Object.keys(T).length === 0 }, L = async T => { if (T && typeof T.preventDefault == "function" && T.preventDefault(), !!ee()) try { i(_ => ({ ..._, isSubmitting: !0 })), await r(n.form), i(_ => ({ ..._, hasSubmitted: !0, isSubmitting: !1 })) } catch (_) { i(H => ({ ...H, isSubmitting: !1 })), console.error("Error submitting lead:", _) } }, z = $(); return t.jsxs("form", { onSubmit: L, className: "bg-transparent space-y-8", children: [z.map(T => { const _ = B(T.color); return t.jsxs("div", { className: "pb-8 border-b border-gray-200 dark:border-gray-700 last:border-0 last:pb-0", children: [t.jsxs("div", { className: "flex items-center mb-6", children: [t.jsx("div", { className: `p-2 rounded-lg bg-gray-100 dark:bg-gray-700/50 ${_.icon}`, children: T.icon }), t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white ml-3 tracking-tight", children: T.title })] }), t.jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-x-6 gap-y-6", children: T.fields.map(H => { if (!H.isVisible) return null; const U = M(H); return U ? t.jsx("div", { className: "w-full", children: U }, H.fieldName) : null }) })] }, T.id) }), t.jsxs("div", { className: "flex flex-col sm:flex-row items-center justify-end gap-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700", children: [t.jsx("button", { type: "button", onClick: () => { i({ ...n, form: { ...sb } }) }, className: "w-full sm:w-auto px-6 py-2.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors", children: "Reset" }), t.jsx("button", { type: "submit", disabled: n.isSubmitting || a, className: "w-full sm:w-auto px-8 py-2.5 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-blue-500/20 transition-all active:scale-95", children: n.isSubmitting || a ? t.jsxs("span", { className: "flex items-center gap-2", children: [t.jsxs("svg", { className: "animate-spin h-4 w-4 text-white", viewBox: "0 0 24 24", children: [t.jsx("circle", { className: "opacity-25", cx: "12", cy: "12", r: "10", stroke: "currentColor", strokeWidth: "4", fill: "none" }), t.jsx("path", { className: "opacity-75", fill: "currentColor", d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" })] }), "Saving..."] }) : "Save Lead" })] })] }) }, qa = ({ to: e, onClick: r, className: a = "", children: s }) => {
    const n = xt(), i = () => { r ? r() : n(e || -1) }; return t.jsxs("button", {
        onClick: i, className: `
        inline-flex items-center gap-2 px-4 py-2 text-sm font-medium
        text-gray-700 dark:text-gray-300
        bg-white dark:bg-gray-800
        border border-gray-300 dark:border-gray-600
        rounded-full
        hover:bg-gray-50 dark:hover:bg-gray-700
        hover:border-gray-400 dark:hover:border-gray-500
        focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
        dark:focus:ring-offset-gray-800
        transition-all duration-200 ease-in-out
        shadow-xs hover:shadow-sm
        ${a}
      `, children: [t.jsx(pr, { className: "h-4 w-4" }), s || "Back"]
    })
}, roe = () => {
    const [e, r] = h.useState(!1), a = xt(), { refreshLeadsCount: s } = Sn(), n = async i => {
        try { r(!0), await Yt.createLead({ ...i, sourceId: i.sourceId ? Number(i.sourceId) : void 0, assignedTo: i.assignedTo ? Number(i.assignedTo) : void 0, tags: Array.isArray(i.tags) ? i.tags.filter(Boolean) : [] }), await s(), R.success("Lead created"), a("/leads") } catch (o) {
            const c = o?.response?.data; if (Array.isArray(c?.errors) && c.errors.length > 0) {
                const u = []; for (const m of c.errors) { const g = m?.msg || m?.message; g && u.push(g) } R.error(u.join(`
`) || c?.message || "Validation errors", { toastId: "lead_create_validation_errors" })
            } else R.error(c?.message || o?.message || "Create failed", { toastId: "lead_create_error" })
        } finally { r(!1) }
    }; return t.jsxs("div", { className: "p-4 md:p-6", children: [t.jsxs("div", { className: "mb-6 flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Create Lead" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Fill in the details below" })] }), t.jsx("div", { className: "flex items-center gap-4 mb-4", children: t.jsx(qa, { to: "/leads" }) })] }), t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4", children: t.jsx(Q6, { onSubmit: n, submitting: e }) })] })
}, aoe = () => { const [e, r] = h.useState(!0), [a, s] = h.useState(!1), [n, i] = h.useState(), o = xt(), { id: c } = gi(), { refreshLeadsCount: u } = Sn(); h.useEffect(() => { (async () => { try { r(!0); const f = await Yt.getLeadById(Number(c)), y = f?.data?.lead ?? f?.lead ?? f; i({ firstName: y.firstName, lastName: y.lastName, email: y.email, phone: y.phone, company: y.company, position: y.position, industry: y.industry, website: y.website, companySize: y.companySize, annualRevenue: y.annualRevenue, address: y.address, country: y.country, state: y.state, city: y.city, zipCode: y.zipCode, linkedinProfile: y.linkedinProfile, timezone: y.timezone, preferredContactMethod: y.preferredContactMethod, sourceId: y.sourceId, status: (y.status || "new").toLowerCase(), priority: y.priority, assignedTo: y.assignedTo, budget: y.budget, currency: y.currency, leadScore: y.leadScore, notes: y.notes, tags: Array.isArray(y.tags) ? y.tags.map(p => p.id) : [], lastContactedAt: y.lastContactedAt, nextFollowUpAt: y.nextFollowUpAt }) } catch (f) { R.error(f?.message || "Failed to load lead") } finally { r(!1) } })() }, [c]); const m = async g => { try { s(!0), await Yt.updateLead(Number(c), { ...g, sourceId: g.sourceId ? Number(g.sourceId) : void 0, assignedTo: g.assignedTo ? Number(g.assignedTo) : void 0, tags: Array.isArray(g.tags) ? g.tags.filter(Boolean) : [] }), await u(), R.success("Lead updated"), o("/leads") } catch (f) { R.error(f?.response?.data?.message || f?.message || "Update failed") } finally { s(!1) } }; return t.jsxs("div", { className: "p-4 md:p-6", children: [t.jsxs("div", { className: "mb-6 flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Edit Lead" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Update the details below" })] }), t.jsx("div", { className: "flex items-center gap-4 mb-4", children: t.jsx(qa, { to: "/leads" }) })] }), t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4", children: e ? t.jsx(ng, {}) : t.jsx(Q6, { initial: n, onSubmit: m, submitting: a, skipInternalLoadingUI: !0 }) })] }) }, soe = () => localStorage.getItem(Ot.AUTH_TOKEN), Eu = () => { const e = soe(); return It.create({ baseURL: Yo, headers: { Authorization: `Bearer ${e}`, "Content-Type": "application/json" } }) }, I0 = { getNotesByLeadId: async e => { try { return (await Eu().get(`/notes?leadId=${e}`)).data } catch (r) { throw console.error("Error fetching notes:", r), r } }, getNoteById: async e => { try { return (await Eu().get(`/notes/${e}`)).data } catch (r) { throw console.error("Error fetching note:", r), r } }, createNote: async e => { try { return (await Eu().post("/notes", e)).data } catch (r) { throw console.error("Error creating note:", r), r } }, updateNote: async (e, r) => { try { return (await Eu().put(`/notes/${e}`, r)).data } catch (a) { throw console.error("Error updating note:", a), a } }, deleteNote: async e => { try { return (await Eu().delete(`/notes/${e}`)).data } catch (r) { throw console.error("Error deleting note:", r), r } } }, gs = { list: async e => { const r = new URLSearchParams; e.page && r.append("page", String(e.page)), e.limit && r.append("limit", String(e.limit)), e.status && r.append("status", e.status), e.search && r.append("search", e.search), e.entityType && e.entityId && (r.append("entityType", e.entityType), r.append("entityId", String(e.entityId))), e.leadId && r.append("leadId", String(e.leadId)), e.dealId && r.append("dealId", String(e.dealId)), e.contactId && r.append("contactId", String(e.contactId)), e.assignedTo && r.append("assignedTo", String(e.assignedTo)); const a = `/tasks?${r.toString()}`; return (await ie.get(a)).data }, get: async e => (await ie.get(`/tasks/${e}`)).data, create: async e => (await ie.post("/tasks", e)).data, update: async (e, r) => (await ie.put(`/tasks/${e}`, r)).data, complete: async e => (await ie.put(`/tasks/${e}/complete`)).data, remove: async e => (await ie.delete(`/tasks/${e}`)).data }, $P = { getMeetings: async e => (await ie.get(`/communications/leads/${e}/meetings`)).data, createMeeting: async e => (await ie.post("/communications/leads", e)).data, getCommunications: async e => (await ie.get(`/communications/leads?leadId=${e}`)).data }, UP = ({ lead: e, isOpen: r, onClose: a, onTransferComplete: s, mode: n = "assign" }) => { const [i, o] = h.useState([]), [c, u] = h.useState(!1), [m, g] = h.useState(!1), [f, y] = h.useState(null), [p, b] = h.useState(""), [j, v] = h.useState(""); h.useEffect(() => { r && (S(), b(""), y(null), v("")) }, [r]); const S = async () => { try { u(!0); const A = await ur.getUsers({ page: 1, limit: 100 }), D = Array.isArray(A?.data) ? A.data : A?.data?.users || A?.data || A?.users || []; o(D) } catch (A) { console.error("Error fetching users:", A), R.error("Failed to load users") } finally { u(!1) } }, k = async A => { if (A.preventDefault(), !!e) try { g(!0); let D; n === "transfer" ? D = await Yt.transferLead(e.id, f, p) : D = await Yt.assignLead(e.id, f); const I = D.data?.lead || D.lead; s(I); const $ = n === "transfer" ? "transferred" : "assigned", B = f ? i.find(W => W.id === f)?.firstName + " " + i.find(W => W.id === f)?.lastName : "Unassigned"; R.success(`Lead ${$} to ${B} successfully`), a() } catch (D) { const I = D?.response?.data?.message || `Failed to ${n} lead`; R.error(I) } finally { g(!1) } }, E = i.filter(A => `${A.firstName} ${A.lastName}`.toLowerCase().includes(j.toLowerCase()) || A.email.toLowerCase().includes(j.toLowerCase())), C = i.find(A => A.id === f), N = e?.assignedUser; return r ? t.jsx("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden", children: [t.jsxs("div", { className: "flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700", children: [t.jsxs("div", { className: "flex items-center space-x-3", children: [t.jsx("div", { className: "flex items-center justify-center w-10 h-10 bg-weconnect-red rounded-lg", children: n === "transfer" ? t.jsx(gd, { className: "w-5 h-5 text-white" }) : t.jsx($s, { className: "w-5 h-5 text-white" }) }), t.jsxs("div", { children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: n === "transfer" ? "Transfer Lead" : "Assign Lead" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: e ? `${e.firstName} ${e.lastName}` : "" })] })] }), t.jsx("button", { onClick: a, className: "text-gray-400 hover:text-gray-600 dark:hover:text-gray-300", children: t.jsx(fa, { className: "w-5 h-5" }) })] }), t.jsxs("form", { onSubmit: k, className: "flex flex-col h-full max-h-[calc(90vh-80px)]", children: [t.jsxs("div", { className: "flex-1 overflow-y-auto p-6", children: [N && t.jsxs("div", { className: "mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg", children: [t.jsx("p", { className: "text-sm font-medium text-gray-600 dark:text-gray-400 mb-2", children: "Currently assigned to:" }), t.jsxs("div", { className: "flex items-center space-x-3", children: [t.jsx("div", { className: "w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center", children: t.jsxs("span", { className: "text-white font-medium text-sm", children: [N.firstName[0], N.lastName[0]] }) }), t.jsxs("div", { children: [t.jsxs("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: [N.firstName, " ", N.lastName] }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: N.email })] })] })] }), t.jsxs("div", { className: "mb-4", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: n === "transfer" ? "Transfer to:" : "Assign to:" }), t.jsx("input", { type: "text", placeholder: "Search users...", value: j, onChange: A => v(A.target.value), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white" })] }), t.jsx("div", { className: "mb-6", children: c ? t.jsx("div", { className: "flex items-center justify-center py-8", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red" }) }) : t.jsxs("div", { className: "space-y-2 max-h-64 overflow-y-auto", children: [t.jsx("div", { className: `p-3 border rounded-lg cursor-pointer transition-colors ${f === null ? "border-weconnect-red bg-red-50 dark:bg-red-900/20" : "border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`, onClick: () => y(null), children: t.jsxs("div", { className: "flex items-center space-x-3", children: [t.jsx("div", { className: "w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center", children: t.jsx(wt, { className: "w-4 h-4 text-white" }) }), t.jsxs("div", { children: [t.jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: "Unassigned" }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Remove current assignment" })] })] }) }), E.map(A => t.jsx("div", { className: `p-3 border rounded-lg cursor-pointer transition-colors ${f === A.id ? "border-weconnect-red bg-red-50 dark:bg-red-900/20" : "border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`, onClick: () => y(A.id), children: t.jsxs("div", { className: "flex items-center space-x-3", children: [t.jsx("div", { className: "w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center", children: t.jsxs("span", { className: "text-white font-medium text-sm", children: [A.firstName[0], A.lastName[0]] }) }), t.jsxs("div", { className: "flex-1", children: [t.jsxs("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: [A.firstName, " ", A.lastName] }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: A.email })] }), A.roles && A.roles.length > 0 && t.jsx("span", { className: "text-xs px-2 py-1 bg-gray-100 dark:bg-gray-600 rounded-full text-gray-600 dark:text-gray-300", children: A.roles[0].name })] }) }, A.id)), E.length === 0 && j && t.jsxs("div", { className: "flex items-center justify-center py-8 text-gray-500 dark:text-gray-400", children: [t.jsx(dr, { className: "w-5 h-5 mr-2" }), 'No users found matching "', j, '"'] })] }) }), n === "transfer" && t.jsxs("div", { className: "mb-6", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Transfer Notes (Optional)" }), t.jsx("textarea", { value: p, onChange: A => b(A.target.value), rows: 3, placeholder: "Add a note about why this lead is being transferred...", className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white resize-none" })] }), C && t.jsx("div", { className: "p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800", children: t.jsxs("p", { className: "text-sm text-blue-800 dark:text-blue-300", children: [t.jsxs("strong", { children: [e?.firstName, " ", e?.lastName] }), " will be ", n === "transfer" ? "transferred" : "assigned", " to", " ", t.jsxs("strong", { children: [C.firstName, " ", C.lastName] })] }) }), f === null && t.jsx("div", { className: "p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800", children: t.jsxs("p", { className: "text-sm text-yellow-800 dark:text-yellow-300", children: [t.jsxs("strong", { children: [e?.firstName, " ", e?.lastName] }), " will be unassigned"] }) })] }), t.jsxs("div", { className: "flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700", children: [t.jsx("button", { type: "button", onClick: a, className: "px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors", children: "Cancel" }), t.jsx("button", { type: "submit", disabled: m, className: "px-6 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed", children: m ? t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white" }), t.jsx("span", { children: n === "transfer" ? "Transferring..." : "Assigning..." })] }) : n === "transfer" ? "Transfer Lead" : "Assign Lead" })] })] })] }) }) : null }, X6 = ({ lead: e }) => { const [r, a] = h.useState("compose"), [s, n] = h.useState("EMAIL"), [i, o] = h.useState([]), [c, u] = h.useState([]), [m, g] = h.useState(!1), [f, y] = h.useState(!1), [p, b] = h.useState({ templateId: "", subject: "", content: "", useTemplate: !1 }); h.useEffect(() => { j(), v() }, []); const j = async () => { try { const I = localStorage.getItem("authToken") || localStorage.getItem("token"), B = await (await fetch("/api/communications/templates", { headers: { Authorization: I ? `Bearer ${I}` : "" } })).json(); B.success && B.data?.templates && o(B.data.templates) } catch (I) { console.error("Error fetching templates:", I) } }, v = async () => { try { const I = localStorage.getItem("authToken") || localStorage.getItem("token"), B = await (await fetch(`/api/communications/messages?leadId=${e.id}`, { headers: { Authorization: I ? `Bearer ${I}` : "" } })).json(); if (B.success) { const W = B.data?.messages || B.data?.items || []; u(Array.isArray(W) ? W : []) } } catch (I) { console.error("Error fetching messages:", I) } }, S = I => { const $ = i.find(B => B.id.toString() === I); $ && (b({ ...p, templateId: I, subject: $.subject || "", content: $.content, useTemplate: !0 }), n($.type)) }, k = async () => { if (!p.content.trim()) { R.error("Message content is required"); return } if (s === "EMAIL" && !p.subject.trim()) { R.error("Email subject is required"); return } y(!0); try { const I = localStorage.getItem("authToken") || localStorage.getItem("token"), $ = localStorage.getItem("userId"), B = $ ? parseInt($, 10) : void 0; let W = "", M = {}; s === "EMAIL" ? (W = "/api/communications/send-email", M = { leadId: e.id, to: e.email, subject: p.subject, content: p.content, templateId: p.useTemplate && p.templateId ? parseInt(p.templateId, 10) : void 0, userId: B }) : (W = "/api/communications/send-whatsapp", M = { leadId: e.id, to: e.phone, content: p.content, templateId: p.useTemplate && p.templateId ? parseInt(p.templateId, 10) : void 0, userId: B }); const V = await (await fetch(W, { method: "POST", headers: { Authorization: I ? `Bearer ${I}` : "", "Content-Type": "application/json" }, body: JSON.stringify(M) })).json(); if (V.success) R.success(`${s.toLowerCase()} sent successfully`), b({ templateId: "", subject: "", content: "", useTemplate: !1 }), await v(); else throw new Error(V.message || `Failed to send ${s.toLowerCase()}`) } catch (I) { console.error("Error sending message:", I), R.error(I.message || "Failed to send message") } finally { y(!1) } }, E = I => { switch (I) { case "SENT": return "text-blue-600 bg-blue-100"; case "DELIVERED": return "text-green-600 bg-green-100"; case "READ": return "text-purple-600 bg-purple-100"; case "FAILED": return "text-red-600 bg-red-100"; default: return "text-gray-600 bg-gray-100" } }, C = I => { switch (I) { case "SENT": return t.jsx(Kt, { className: "h-4 w-4" }); case "DELIVERED": return t.jsx(ut, { className: "h-4 w-4" }); case "READ": return t.jsx(Ht, { className: "h-4 w-4" }); case "FAILED": return t.jsx(Ca, { className: "h-4 w-4" }); default: return t.jsx(dr, { className: "h-4 w-4" }) } }, N = I => { switch (I) { case "EMAIL": return t.jsx(ir, { className: "h-4 w-4 text-blue-500" }); case "WHATSAPP": return t.jsx(Fr, { className: "h-4 w-4 text-green-500" }); case "SMS": return t.jsx(Fr, { className: "h-4 w-4 text-purple-500" }); default: return t.jsx(Fr, { className: "h-4 w-4 text-gray-500" }) } }, A = I => I.replace(/\{\{leadFirstName\}\}/g, e.firstName).replace(/\{\{leadLastName\}\}/g, e.lastName).replace(/\{\{leadEmail\}\}/g, e.email).replace(/\{\{leadPhone\}\}/g, e.phone || "").replace(/\{\{leadCompany\}\}/g, e.company || ""), D = i.filter(I => I.type === s && I.isActive); return t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700", children: [t.jsx("div", { className: "border-b border-gray-200 dark:border-gray-700", children: t.jsxs("nav", { className: "flex space-x-8 px-6", children: [t.jsxs("button", { onClick: () => a("compose"), className: `py-4 px-1 border-b-2 font-medium text-sm transition-colors ${r === "compose" ? "border-weconnect-red text-weconnect-red dark:text-weconnect-red" : "border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`, children: [t.jsx($t, { className: "h-4 w-4 inline mr-2" }), "Compose Message"] }), t.jsxs("button", { onClick: () => a("history"), className: `py-4 px-1 border-b-2 font-medium text-sm transition-colors ${r === "history" ? "border-weconnect-red text-weconnect-red dark:text-weconnect-red" : "border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`, children: [t.jsx(Kt, { className: "h-4 w-4 inline mr-2" }), "Communication History"] })] }) }), t.jsxs("div", { className: "p-6", children: [r === "compose" && t.jsxs("div", { className: "space-y-6", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: ["Send Message to ", e.firstName, " ", e.lastName] }), t.jsxs("div", { className: "flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400", children: [t.jsx(qi, { className: "h-4 w-4" }), t.jsx("span", { children: e.company || "No Company" })] })] }), t.jsxs("div", { className: "flex space-x-4", children: [t.jsxs("button", { onClick: () => n("EMAIL"), disabled: !e.email, className: `flex items-center px-4 py-2 rounded-lg border transition-colors ${s === "EMAIL" ? "bg-blue-50 border-blue-200 text-blue-700" : "bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100"} ${e.email ? "" : "opacity-50 cursor-not-allowed"}`, children: [t.jsx(ir, { className: "h-4 w-4 mr-2" }), "Email", !e.email && t.jsx("span", { className: "ml-2 text-xs", children: "(No email)" })] }), t.jsxs("button", { onClick: () => n("WHATSAPP"), disabled: !e.phone, className: `flex items-center px-4 py-2 rounded-lg border transition-colors ${s === "WHATSAPP" ? "bg-green-50 border-green-200 text-green-700" : "bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100"} ${e.phone ? "" : "opacity-50 cursor-not-allowed"}`, children: [t.jsx(Fr, { className: "h-4 w-4 mr-2" }), "WhatsApp", !e.phone && t.jsx("span", { className: "ml-2 text-xs", children: "(No phone)" })] }), t.jsxs("button", { onClick: () => n("SMS"), disabled: !e.phone, className: `flex items-center px-4 py-2 rounded-lg border transition-colors ${s === "SMS" ? "bg-purple-50 border-purple-200 text-purple-700" : "bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100"} ${e.phone ? "" : "opacity-50 cursor-not-allowed"}`, children: [t.jsx(Fr, { className: "h-4 w-4 mr-2" }), "SMS", !e.phone && t.jsx("span", { className: "ml-2 text-xs", children: "(No phone)" })] })] }), D.length > 0 && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Use Template (Optional)" }), t.jsxs("select", { value: p.templateId, onChange: I => S(I.target.value), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", children: [t.jsx("option", { value: "", children: "Select a template..." }), D.map(I => t.jsx("option", { value: I.id, children: I.name }, I.id))] })] }), s === "EMAIL" && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Subject *" }), t.jsx("input", { type: "text", value: p.subject, onChange: I => b({ ...p, subject: I.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Enter email subject" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Message Content *" }), t.jsx("textarea", { value: p.content, onChange: I => b({ ...p, content: I.target.value }), rows: 8, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: `Enter your ${s.toLowerCase()} message...` }), t.jsxs("div", { className: "mt-2 text-xs text-gray-500", children: [t.jsx("strong", { children: "Preview with variables:" }), t.jsx("p", { className: "mt-1 p-2 bg-gray-50 dark:bg-gray-700 rounded border text-gray-700 dark:text-gray-300", children: A(p.content) || "Enter content to see preview..." })] })] }), t.jsx("div", { className: "flex justify-end", children: t.jsx("button", { onClick: k, disabled: f || !p.content.trim() || s === "EMAIL" && !p.subject.trim(), className: "bg-weconnect-red text-white px-6 py-2 rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center", children: f ? t.jsxs(t.Fragment, { children: [t.jsx("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2" }), "Sending..."] }) : t.jsxs(t.Fragment, { children: [t.jsx(Ll, { className: "h-4 w-4 mr-2" }), "Send ", s] }) }) })] }), r === "history" && t.jsxs("div", { className: "space-y-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Communication History" }), c.length > 0 ? t.jsx("div", { className: "space-y-4", children: c.map(I => t.jsxs("div", { className: "border border-gray-200 dark:border-gray-700 rounded-lg p-4", children: [t.jsxs("div", { className: "flex items-start justify-between mb-3", children: [t.jsxs("div", { className: "flex items-center space-x-3", children: [t.jsx("div", { className: "flex-shrink-0", children: N(I.type) }), t.jsxs("div", { children: [t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsxs("h4", { className: "font-medium text-gray-900 dark:text-white", children: [I.type, " ", I.direction === "OUTBOUND" ? "to" : "from", " ", e.firstName] }), t.jsxs("span", { className: `inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${E(I.status)}`, children: [C(I.status), t.jsx("span", { className: "ml-1", children: I.status })] })] }), I.subject && t.jsxs("p", { className: "text-sm font-medium text-gray-700 dark:text-gray-300 mt-1", children: ["Subject: ", I.subject] })] })] }), t.jsxs("div", { className: "flex items-center space-x-2", children: [I.direction === "OUTBOUND" ? t.jsx(gd, { className: "h-4 w-4 text-blue-500" }) : t.jsx(pr, { className: "h-4 w-4 text-green-500" }), t.jsx("span", { className: "text-xs text-gray-500 dark:text-gray-400", children: new Date(I.sentAt).toLocaleString() })] })] }), t.jsx("div", { className: "bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-3", children: t.jsx("p", { className: "text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap", children: I.content }) }), t.jsxs("div", { className: "flex items-center justify-between text-xs text-gray-500 dark:text-gray-400", children: [t.jsxs("span", { children: ["Sent by ", I.user.firstName, " ", I.user.lastName] }), t.jsxs("div", { className: "flex items-center space-x-4", children: [I.deliveredAt && t.jsxs("span", { children: ["Delivered: ", new Date(I.deliveredAt).toLocaleString()] }), I.readAt && t.jsxs("span", { children: ["Read: ", new Date(I.readAt).toLocaleString()] }), I.errorMessage && t.jsxs("span", { className: "text-red-500", children: ["Error: ", I.errorMessage] })] })] })] }, I.id)) }) : t.jsxs("div", { className: "text-center py-12", children: [t.jsx(Fr, { className: "h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-2", children: "No communications yet" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Start a conversation by sending an email or WhatsApp message" }), t.jsx("button", { onClick: () => a("compose"), className: "mt-4 bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors", children: "Send First Message" })] })] })] })] }) }, Z6 = ({ entityType: e, entityId: r, quotations: a, invoices: s, onRefresh: n }) => { const { hasPermission: i } = mr(), o = xt(), [c, u] = h.useState("quotations"), m = y => { const p = { DRAFT: "bg-gray-100 text-gray-800", SENT: "bg-blue-100 text-blue-800", VIEWED: "bg-indigo-100 text-indigo-800", ACCEPTED: "bg-green-100 text-green-800", PAID: "bg-green-100 text-green-800", REJECTED: "bg-red-100 text-red-800", EXPIRED: "bg-orange-100 text-orange-800", OVERDUE: "bg-red-100 text-red-800", CANCELLED: "bg-gray-100 text-gray-800", PARTIALLY_PAID: "bg-yellow-100 text-yellow-800", REFUNDED: "bg-purple-100 text-purple-800" }; return p[y] || p.DRAFT }, f = e === "deal" ? { title: "Sales Proposals & Invoices", quotation: "Proposal", quotationPlural: "Proposals", emptyQuotationTitle: "No Proposals Yet", emptyQuotationDesc: "Create your first sales proposal to advance this deal.", emptyInvoiceDesc: "Generate invoices from accepted proposals or create directly." } : { title: "Quotations & Invoices", quotation: "Quotation", quotationPlural: "Quotations", emptyQuotationTitle: "No Quotations Yet", emptyQuotationDesc: "Create your first quotation for this contact.", emptyInvoiceDesc: "Create invoices from accepted quotations or directly." }; return t.jsxs("div", { className: "space-y-6", children: [t.jsxs("div", { className: "flex items-center justify-between mb-4", children: [t.jsx("h2", { className: "text-xl font-semibold text-gray-900 dark:text-white", children: f.title }), i(`${e}.create`) && t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsxs(ue, { variant: "OUTLINE", className: "flex items-center gap-2", onClick: () => o(`/quotations/new?entityType=${e}&entityId=${r}`), children: [t.jsx($t, { size: 16 }), "New ", f.quotation] }), t.jsxs(ue, { className: "flex items-center gap-2 bg-weconnect-red hover:bg-red-600", onClick: () => o(`/invoices/new?entityType=${e}&entityId=${r}`), children: [t.jsx($t, { size: 16 }), "New Invoice"] })] })] }), t.jsx("div", { className: "border-b border-gray-200 dark:border-gray-700", children: t.jsx("nav", { className: "-mb-px flex space-x-8", children: [{ id: "quotations", label: f.quotationPlural, count: a.length }, { id: "invoices", label: "Invoices", count: s.length }].map(y => t.jsxs("button", { onClick: () => u(y.id), className: `py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${c === y.id ? "border-weconnect-red text-weconnect-red" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`, children: [y.label, y.count > 0 && t.jsx("span", { className: "bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-2 py-1 rounded-full text-xs", children: y.count })] }, y.id)) }) }), c === "quotations" && t.jsx("div", { className: "space-y-4", children: a.length === 0 ? t.jsxs(Ae, { className: "p-8 text-center", children: [t.jsx(Mt, { size: 48, className: "mx-auto text-gray-400 dark:text-gray-600 mb-4" }), t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: f.emptyQuotationTitle }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: f.emptyQuotationDesc }), i(`${e}.create`) && t.jsxs(ue, { onClick: () => o(`/quotations/new?entityType=${e}&entityId=${r}`), children: ["Create ", f.quotation] })] }) : a.map(y => t.jsx(Ae, { className: "p-4 hover:shadow-lg transition-shadow", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center space-x-4", children: [t.jsx(Mt, { size: 24, className: "text-blue-600 dark:text-blue-400" }), t.jsxs("div", { children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: y.quotationNumber }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: y.title }), t.jsxs("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: ["Created: ", new Date(y.createdAt).toLocaleDateString(), y.validUntil && t.jsxs("span", { children: ["  Valid until: ", new Date(y.validUntil).toLocaleDateString()] })] })] })] }), t.jsxs("div", { className: "text-right", children: [t.jsxs("div", { className: "flex items-center space-x-3 mb-2", children: [t.jsx("span", { className: `px-2 py-1 text-xs font-medium rounded-full ${m(y.status)}`, children: y.status }), t.jsxs("span", { className: "text-lg font-bold text-gray-900 dark:text-white", children: ["$", y.totalAmount.toLocaleString()] })] }), t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx(ue, { size: "SM", variant: "GHOST", onClick: async () => { try { const p = await ie.get(`/quotations/${y.id}/pdf/preview`, { responseType: "blob" }), b = URL.createObjectURL(new Blob([p.data], { type: "application/pdf" })); window.open(b, "_blank") } catch { } }, children: t.jsx(Ht, { size: 14 }) }), t.jsx(ue, { size: "SM", variant: "GHOST", onClick: async () => { try { const p = await ie.get(`/quotations/${y.id}/pdf/download`, { responseType: "blob" }), b = URL.createObjectURL(new Blob([p.data])), j = document.createElement("a"); j.href = b, j.download = `${y.quotationNumber || "quotation"}.pdf`, j.click() } catch { } }, children: t.jsx(ys, { size: 14 }) }), t.jsx(ue, { size: "SM", variant: "OUTLINE", onClick: async () => { try { await ie.put(`/quotations/${y.id}/accept`), (await ie.post(`/quotations/${y.id}/generate-invoice`)).data?.success && n?.() } catch { } }, children: "Create Invoice" })] })] })] }) }, y.id)) }), c === "invoices" && t.jsx("div", { className: "space-y-4", children: s.length === 0 ? t.jsxs(Ae, { className: "p-8 text-center", children: [t.jsx(Mt, { size: 48, className: "mx-auto text-gray-400 dark:text-gray-600 mb-4" }), t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: "No Invoices Yet" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: f.emptyInvoiceDesc }), i(`${e}.create`) && t.jsx(ue, { onClick: () => o(`/invoices/new?entityType=${e}&entityId=${r}`), children: "Create Invoice" })] }) : s.map(y => t.jsx(Ae, { className: "p-4 hover:shadow-lg transition-shadow", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center space-x-4", children: [t.jsx(Mt, { size: 24, className: "text-green-600 dark:text-green-400" }), t.jsxs("div", { children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: y.invoiceNumber }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: y.title }), t.jsxs("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: ["Created: ", new Date(y.createdAt).toLocaleDateString(), y.dueDate && t.jsxs("span", { children: ["  Due: ", new Date(y.dueDate).toLocaleDateString()] })] })] })] }), t.jsxs("div", { className: "text-right", children: [t.jsxs("div", { className: "flex items-center space-x-3 mb-2", children: [t.jsx("span", { className: `px-2 py-1 text-xs font-medium rounded-full ${m(y.status)}`, children: y.status.replace("_", " ") }), t.jsxs("span", { className: "text-lg font-bold text-gray-900 dark:text-white", children: ["$", Number(y.totalAmount).toLocaleString()] })] }), t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx(ue, { size: "SM", variant: "GHOST", onClick: async p => { p.stopPropagation(); try { const b = await ie.get(`/invoices/${y.id}/pdf/preview`, { responseType: "blob" }), j = URL.createObjectURL(new Blob([b.data], { type: "application/pdf" })); window.open(j, "_blank") } catch (b) { console.error("Error previewing invoice:", b), b?.response?.status === 404 ? o(`/invoices/${y.id}`) : R.error(b?.response?.data?.message || "Failed to preview invoice") } }, children: t.jsx(Ht, { size: 14 }) }), t.jsx(ue, { size: "SM", variant: "GHOST", onClick: async p => { p.stopPropagation(); try { const b = await ie.get(`/invoices/${y.id}/pdf/download`, { responseType: "blob" }), j = URL.createObjectURL(new Blob([b.data])), v = document.createElement("a"); v.href = j, v.download = `${y.invoiceNumber || "invoice"}.pdf`, v.click() } catch (b) { console.error("Error downloading invoice:", b), b?.response?.status === 404 ? o(`/invoices/${y.id}`) : R.error(b?.response?.data?.message || "Failed to download invoice") } }, children: t.jsx(ys, { size: 14 }) })] })] })] }) }, y.id)) })] }) }, J6 = ({ entityType: e, entityId: r, tasks: a }) => { const { user: s, hasPermission: n } = mr(), [i, o] = h.useState(a), [c, u] = h.useState(!1), [m, g] = h.useState("all"), [f, y] = h.useState("all"), [p, b] = h.useState(""), [j, v] = h.useState(!1), [S, k] = h.useState(!1), [E, C] = h.useState({ title: "", description: "", priority: "MEDIUM", dueDate: "" }); h.useEffect(() => { N() }, [e, r]); const N = async () => { try { u(!0); const L = await gs.list({ entityType: e, entityId: r, status: "PENDING,IN_PROGRESS,COMPLETED" }), T = (L?.data?.tasks || L?.data?.items || L?.tasks || L?.items || []).map(_ => ({ ..._, id: String(_.id), assignedTo: _.assignedUser ? { id: String(_.assignedUser.id), firstName: _.assignedUser.firstName, lastName: _.assignedUser.lastName } : void 0, createdBy: _.createdByUser ? { id: String(_.createdByUser.id), firstName: _.createdByUser.firstName, lastName: _.createdByUser.lastName } : void 0 })); o(T) } catch { o(a || []) } finally { u(!1) } }, A = async () => { try { if (!E.title.trim()) { R.error("Please enter a task title"); return } const L = Number(s?.id || s?.userId); if (!L) { R.error("Unable to determine current user"); return } k(!0); const z = {}; e === "deal" && (z.dealId = Number(r)), e === "lead" && (z.leadId = Number(r)), e === "contact" && (z.contactId = Number(r)), await gs.create({ title: E.title.trim(), description: E.description?.trim() || void 0, priority: E.priority, status: "PENDING", dueDate: E.dueDate ? new Date(E.dueDate).toISOString() : void 0, createdBy: L, ...z }), R.success("Task created"), v(!1), C({ title: "", description: "", priority: "MEDIUM", dueDate: "" }), await N() } catch (L) { R.error(L?.response?.data?.message || "Failed to create task") } finally { k(!1) } }, D = i.filter(L => { const z = m === "all" || L.status === m, T = f === "all" || L.priority === f, _ = p === "" || L.title.toLowerCase().includes(p.toLowerCase()) || L.description?.toLowerCase().includes(p.toLowerCase()); return z && T && _ }).sort((L, z) => { const T = { URGENT: 4, HIGH: 3, MEDIUM: 2, LOW: 1 }, _ = T[L.priority], H = T[z.priority]; return _ !== H ? H - _ : L.dueDate && z.dueDate ? new Date(L.dueDate).getTime() - new Date(z.dueDate).getTime() : new Date(z.createdAt).getTime() - new Date(L.createdAt).getTime() }), I = L => { const z = { LOW: "text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300", MEDIUM: "text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300", HIGH: "text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-300", URGENT: "text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300" }; return z[L] || z.MEDIUM }, $ = L => { const z = { PENDING: "text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-300", IN_PROGRESS: "text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300", COMPLETED: "text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300", CANCELLED: "text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300" }; return z[L] || z.PENDING }, B = L => { switch (L) { case "URGENT": return t.jsx(dr, { size: 16, className: "text-red-600" }); case "HIGH": return t.jsx(sh, { size: 16, className: "text-orange-600" }); case "MEDIUM": return t.jsx(Ea, { size: 16, className: "text-blue-600" }); default: return t.jsx(Zw, { size: 16, className: "text-gray-600" }) } }, W = L => { switch (L) { case "COMPLETED": return t.jsx(ut, { size: 20, className: "text-green-600" }); case "IN_PROGRESS": return t.jsx(Kt, { size: 20, className: "text-blue-600" }); case "CANCELLED": return t.jsx(P2, { size: 20, className: "text-red-600" }); default: return t.jsx(P2, { size: 20, className: "text-gray-400" }) } }, M = L => { const z = new Date(L), T = new Date, _ = z.getTime() - T.getTime(), H = Math.ceil(_ / (1e3 * 60 * 60 * 24)); return H < 0 ? `Overdue by ${Math.abs(H)} days` : H === 0 ? "Due today" : H === 1 ? "Due tomorrow" : H <= 7 ? `Due in ${H} days` : z.toLocaleDateString() }, q = L => new Date(L) < new Date, V = async (L, z) => { try { if (z === "COMPLETED") { const T = await gs.update(Number(L), { status: "PENDING" }), _ = T?.data?.task || T?.task; o(H => H.map(U => U.id === L ? { ...U, status: "PENDING", completedAt: void 0 } : U)), R.success("Task reopened") } else { const T = await gs.complete(Number(L)), _ = T?.data?.task || T?.task; o(H => H.map(U => U.id === L ? { ...U, status: "COMPLETED", completedAt: new Date().toISOString() } : U)), R.success("Task marked as completed") } } catch (T) { R.error(T?.response?.data?.message || "Failed to update task") } }, X = { pending: D.filter(L => L.status === "PENDING"), inProgress: D.filter(L => L.status === "IN_PROGRESS"), completed: D.filter(L => L.status === "COMPLETED"), cancelled: D.filter(L => L.status === "CANCELLED") }, se = i.length, le = i.filter(L => L.status === "COMPLETED").length, ee = i.filter(L => L.dueDate && q(L.dueDate) && L.status !== "COMPLETED").length; return t.jsxs("div", { className: "space-y-6", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h2", { className: "text-xl font-semibold text-gray-900 dark:text-white", children: "Task Management" }), t.jsxs("div", { className: "flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mt-1", children: [t.jsxs("span", { children: [se, " total"] }), t.jsxs("span", { children: [le, " completed"] }), ee > 0 && t.jsxs("span", { className: "text-red-600 dark:text-red-400 font-medium", children: [ee, " overdue"] })] })] }), n("task.create") && t.jsx(ue, { onClick: () => v(L => !L), children: j ? "Cancel" : "New Task" })] }), j && t.jsxs(Ae, { className: "p-4", children: [t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm text-gray-600 dark:text-gray-300 mb-1", children: "Title" }), t.jsx("input", { type: "text", value: E.title, onChange: L => C({ ...E, title: L.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm", placeholder: "Task title" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm text-gray-600 dark:text-gray-300 mb-1", children: "Due Date" }), t.jsx("input", { type: "date", value: E.dueDate, onChange: L => C({ ...E, dueDate: L.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm text-gray-600 dark:text-gray-300 mb-1", children: "Priority" }), t.jsxs("select", { value: E.priority, onChange: L => C({ ...E, priority: L.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm", children: [t.jsx("option", { value: "URGENT", children: "Urgent" }), t.jsx("option", { value: "HIGH", children: "High" }), t.jsx("option", { value: "MEDIUM", children: "Medium" }), t.jsx("option", { value: "LOW", children: "Low" })] })] }), t.jsxs("div", { className: "md:col-span-2", children: [t.jsx("label", { className: "block text-sm text-gray-600 dark:text-gray-300 mb-1", children: "Description" }), t.jsx("textarea", { value: E.description, onChange: L => C({ ...E, description: L.target.value }), rows: 3, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm", placeholder: "Optional details" })] })] }), t.jsxs("div", { className: "mt-4 flex items-center gap-2", children: [t.jsx(ue, { onClick: A, disabled: S, className: "bg-weconnect-red hover:bg-red-600", children: S ? "Creating..." : "Create Task" }), t.jsx(ue, { variant: "OUTLINE", onClick: () => v(!1), children: "Cancel" })] })] }), t.jsxs("div", { className: "flex items-center justify-between bg-gray-50 dark:bg-gray-800 rounded-lg p-4", children: [t.jsxs("div", { className: "flex items-center space-x-4", children: [t.jsxs("div", { className: "relative", children: [t.jsx(Xr, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400", size: 16 }), t.jsx("input", { type: "text", placeholder: "Search tasks...", value: p, onChange: L => b(L.target.value), className: "pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent" })] }), t.jsxs("select", { value: m, onChange: L => g(L.target.value), className: "px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent", children: [t.jsx("option", { value: "all", children: "All Status" }), t.jsx("option", { value: "PENDING", children: "Pending" }), t.jsx("option", { value: "IN_PROGRESS", children: "In Progress" }), t.jsx("option", { value: "COMPLETED", children: "Completed" }), t.jsx("option", { value: "CANCELLED", children: "Cancelled" })] }), t.jsxs("select", { value: f, onChange: L => y(L.target.value), className: "px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent", children: [t.jsx("option", { value: "all", children: "All Priority" }), t.jsx("option", { value: "URGENT", children: "Urgent" }), t.jsx("option", { value: "HIGH", children: "High" }), t.jsx("option", { value: "MEDIUM", children: "Medium" }), t.jsx("option", { value: "LOW", children: "Low" })] })] }), t.jsxs("div", { className: "flex items-center space-x-4 text-sm text-gray-700 dark:text-gray-300", children: [t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx("div", { className: "w-3 h-3 bg-green-500 rounded-full" }), t.jsxs("span", { children: [X.completed.length, " Completed"] })] }), t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx("div", { className: "w-3 h-3 bg-blue-500 rounded-full" }), t.jsxs("span", { children: [X.inProgress.length, " In Progress"] })] }), t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx("div", { className: "w-3 h-3 bg-yellow-500 rounded-full" }), t.jsxs("span", { children: [X.pending.length, " Pending"] })] })] })] }), t.jsx("div", { className: "space-y-4", children: c ? t.jsxs(Ae, { className: "p-8 text-center", children: [t.jsx("div", { className: "animate-spin h-8 w-8 border-2 border-weconnect-red border-t-transparent rounded-full mx-auto mb-4" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "Loading tasks..." })] }) : D.length === 0 ? t.jsxs(Ae, { className: "p-8 text-center", children: [t.jsx(ut, { size: 48, className: "mx-auto text-gray-400 dark:text-gray-500 mb-4" }), t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: "No Tasks Found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-300 mb-4", children: p || m !== "all" || f !== "all" ? "Try adjusting your search or filter criteria." : "Create your first task to start organizing your work." })] }) : D.map(L => t.jsx(Ae, { className: "p-4 hover:shadow-lg transition-shadow", children: t.jsx("div", { className: "flex items-start justify-between", children: t.jsxs("div", { className: "flex items-start space-x-4 flex-1", children: [t.jsx("button", { onClick: () => V(L.id, L.status), className: "mt-1 hover:scale-110 transition-transform", children: W(L.status) }), t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center space-x-3 mb-2", children: [t.jsx("h3", { className: `text-lg font-semibold ${L.status === "COMPLETED" ? "line-through text-gray-500 dark:text-gray-400" : "text-gray-900 dark:text-white"}`, children: L.title }), t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx("span", { className: `px-2 py-1 text-xs font-medium rounded-full ${$(L.status)}`, children: L.status.replace("_", " ") }), t.jsxs("span", { className: `px-2 py-1 text-xs font-medium rounded-full ${I(L.priority)}`, children: [B(L.priority), t.jsx("span", { className: "ml-1", children: L.priority })] })] })] }), L.description && t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-3", children: L.description }), t.jsxs("div", { className: "flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400", children: [L.dueDate && t.jsxs("div", { className: `flex items-center ${q(L.dueDate) && L.status !== "COMPLETED" ? "text-red-600 dark:text-red-400 font-medium" : ""}`, children: [t.jsx(rh, { size: 14, className: "mr-1" }), M(L.dueDate)] }), L.assignedTo && t.jsxs("div", { className: "flex items-center text-gray-500 dark:text-gray-400", children: [t.jsx(wt, { size: 14, className: "mr-1" }), L.assignedTo.firstName, " ", L.assignedTo.lastName] }), t.jsxs("div", { className: "flex items-center text-gray-500 dark:text-gray-400", children: [t.jsx(Kt, { size: 14, className: "mr-1" }), "Created ", new Date(L.createdAt).toLocaleDateString()] })] }), L.completedAt && t.jsxs("div", { className: "mt-2 text-sm text-green-600 dark:text-green-400 font-medium", children: [" Completed on ", new Date(L.completedAt).toLocaleDateString()] })] })] }) }) }, L.id)) }), se > 0 && t.jsxs(Ae, { className: "p-4", children: [t.jsxs("div", { className: "flex items-center justify-between mb-2", children: [t.jsx("span", { className: "text-sm font-medium text-gray-700 dark:text-gray-300", children: "Overall Progress" }), t.jsxs("span", { className: "text-sm text-gray-500 dark:text-gray-400", children: [le, " of ", se, " completed (", Math.round(le / se * 100), "%)"] })] }), t.jsx("div", { className: "w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2", children: t.jsx("div", { className: "h-2 bg-green-600 rounded-full transition-all duration-300", style: { width: `${le / se * 100}%` } }) })] })] }) }, eL = ({ activities: e }) => { const [r] = h.useState(e), [a, s] = h.useState(""), n = r.filter(m => a === "" || m.title.toLowerCase().includes(a.toLowerCase()) || m.description?.toLowerCase().includes(a.toLowerCase())), i = m => ({ CALL: ma, EMAIL: ir, MEETING: Zt, VISIT: wt, DEMO: Ab, PRESENTATION: Mt, FOLLOW_UP: Kt, NOTE: Fr, QUOTE_SENT: Mt, CONTRACT_SENT: Mt, PAYMENT_RECEIVED: ut, PROPOSAL_SENT: Mt, NEGOTIATION: Ea, STAGE_CHANGED: Ea, WON: ut, LOST: Kt, OTHER: Fr })[m] || Fr, o = m => { const g = { CALL: "text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300", EMAIL: "text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300", MEETING: "text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-300", VISIT: "text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-300", DEMO: "text-indigo-600 bg-indigo-100 dark:bg-indigo-900 dark:text-indigo-300", PRESENTATION: "text-pink-600 bg-pink-100 dark:bg-pink-900 dark:text-pink-300", FOLLOW_UP: "text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-300", NOTE: "text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-300", QUOTE_SENT: "text-emerald-600 bg-emerald-100 dark:bg-emerald-900 dark:text-emerald-300", CONTRACT_SENT: "text-teal-600 bg-teal-100 dark:bg-teal-900 dark:text-teal-300", PAYMENT_RECEIVED: "text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300", PROPOSAL_SENT: "text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300", NEGOTIATION: "text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-300", STAGE_CHANGED: "text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-300", WON: "text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300", LOST: "text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300", OTHER: "text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-300" }; return g[m] || g.OTHER }, c = m => { const g = Math.floor(m / 60), f = m % 60; return g > 0 ? `${g}h ${f}m` : `${f}m` }, u = m => { const g = new Date(m), y = new Date().getTime() - g.getTime(), p = Math.floor(y / (1e3 * 60)), b = Math.floor(p / 60), j = Math.floor(b / 24); return p < 60 ? `${p} minutes ago` : b < 24 ? `${b} hours ago` : j < 7 ? `${j} days ago` : g.toLocaleDateString() }; return t.jsxs("div", { className: "space-y-6", children: [t.jsx("div", { className: "flex items-center justify-between", children: t.jsxs("div", { className: "flex items-center space-x-4", children: [t.jsx("h2", { className: "text-xl font-semibold text-gray-900 dark:text-white", children: "Activity Timeline" }), t.jsx("div", { className: "flex items-center space-x-2", children: t.jsxs("div", { className: "relative", children: [t.jsx(Xr, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400", size: 16 }), t.jsx("input", { type: "text", placeholder: "Search activities...", value: a, onChange: m => s(m.target.value), className: "pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent" })] }) })] }) }), t.jsxs("div", { className: "relative", children: [t.jsx("div", { className: "absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700" }), t.jsx("div", { className: "space-y-6", children: n.length === 0 ? t.jsxs(Ae, { className: "p-8 text-center", children: [t.jsx(Zt, { size: 48, className: "mx-auto text-gray-400 dark:text-gray-600 mb-4" }), t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: "No Activities Found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: a ? "Try adjusting your search criteria." : "No activities found. Activities will appear here automatically as you interact with this lead." })] }) : n.map(m => { const g = i(m.type), f = o(m.type); return t.jsxs("div", { className: "relative flex items-start", children: [t.jsx("div", { className: `absolute left-0 w-12 h-12 rounded-full border-4 border-white dark:border-gray-800 ${f} flex items-center justify-center z-10`, children: t.jsx(g, { size: 18 }) }), t.jsx("div", { className: "ml-16 flex-1", children: t.jsx(Ae, { className: "p-4 hover:shadow-lg transition-shadow", children: t.jsx("div", { className: "flex items-start justify-between", children: t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center space-x-3 mb-2", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: m.title }), t.jsx("span", { className: `px-2 py-1 text-xs font-medium rounded-full ${f}`, children: m.type.replace("_", " ") }), m.isCompleted && t.jsx(ut, { size: 16, className: "text-green-600" })] }), m.description && t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-3", children: m.description }), t.jsxs("div", { className: "flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400", children: [t.jsxs("div", { className: "flex items-center", children: [t.jsx(Kt, { size: 14, className: "mr-1" }), u(m.createdAt)] }), m.duration && t.jsxs("div", { className: "flex items-center", children: [t.jsx(Ab, { size: 14, className: "mr-1" }), c(m.duration)] }), m.user && t.jsxs("div", { className: "flex items-center", children: [t.jsx(wt, { size: 14, className: "mr-1" }), m.user.firstName, " ", m.user.lastName] })] }), m.outcome && t.jsx("div", { className: "mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg", children: t.jsxs("p", { className: "text-sm text-gray-700 dark:text-gray-300", children: [t.jsx("strong", { children: "Outcome:" }), " ", m.outcome] }) })] }) }) }) })] }, m.id) }) })] }), n.length > 0 && t.jsx("div", { className: "text-center", children: t.jsx(ue, { variant: "OUTLINE", onClick: () => { }, children: "Load More Activities" }) })] }) }, noe = () => {
    const { id: e } = gi(), r = xt(), { hasPermission: a, user: s } = mr(), { getLeadSourceById: n } = Br(), [i, o] = h.useState(null), [c, u] = h.useState(!0), [m, g] = h.useState(null), [f, y] = h.useState("overview"), [p, b] = h.useState(!1), [j, v] = h.useState(!1), [S, k] = h.useState(!1), [E, C] = h.useState(!1), [N, A] = h.useState(!1), [D, I] = h.useState(!1), [$, B] = h.useState(!1), [W, M] = h.useState([]), [q, V] = h.useState([]), [X, se] = h.useState(!1), [le, ee] = h.useState(!1), [L, z] = h.useState([]), [T, _] = h.useState([]), [H, U] = h.useState(!1), [K, Z] = h.useState(!1), [J, te] = h.useState(!1), [G, de] = h.useState(null), [Te, pe] = h.useState([]), [He, ne] = h.useState(!1), [De, $e] = h.useState(0), [Et, Bt] = h.useState([]), [Ft, mt] = h.useState(!1), [ce, Xe] = h.useState([]), [jt, Q] = h.useState(!1), [Le, Ve] = h.useState([]), [et, pt] = h.useState(!1), [Y, je] = h.useState({ title: "", content: "", isPinned: !1 }), [Ne, fe] = h.useState({ phoneNumber: "", callType: "OUTBOUND", notes: "", outcome: "", date: new Date().toISOString().split("T")[0], time: new Date().toLocaleTimeString([], { hour: "2-digit", minute: "2-digit", hour12: !1 }), duration: "", callStatus: "COMPLETED" }), [ke, he] = h.useState({ title: "", date: "", time: "", duration: "30", location: "", link: "", notes: "" }), [Ee, Ge] = h.useState(!1), [qe, vt] = h.useState({ title: "", description: "", dueDate: "", priority: "MEDIUM", assignedTo: "" }), [yr, vr] = h.useState([]); h.useEffect(() => { e && (Hr(parseInt(e)), tr(parseInt(e)), wr(parseInt(e)), Wr(parseInt(e)), sr(parseInt(e))), (async () => { try { const re = await ur.getUsers({ page: 1, limit: 100 }), Pe = re?.data?.users || re?.data || re?.users || []; vr(Pe.map(We => ({ id: We.id, firstName: We.firstName, lastName: We.lastName }))) } catch { } })() }, [e]), h.useEffect(() => { if (!e) return; const re = parseInt(e); f === "call-logs" && _r(re), f === "proposals" && (kr(re), Sr(re)), f === "meetings" && Ut(re) }, [e, f]); const tr = async re => { try { ee(!0); const bt = ((await Bi.getActivitiesByLeadId(re, 1, 100))?.data?.items || []).map(Ke => { let Tt = Ke.description || ""; if (Ke.metadata && Ke.metadata.changes && Array.isArray(Ke.metadata.changes)) Tt = Ke.metadata.changes.join(", "); else if (Ke.metadata) { const Jr = []; Ke.metadata.oldStatus && Ke.metadata.newStatus && Jr.push(`Status: ${String(Ke.metadata.oldStatus).toLowerCase()}  ${String(Ke.metadata.newStatus).toLowerCase()}`), Ke.metadata.oldPriority && Ke.metadata.newPriority && Jr.push(`Priority: ${String(Ke.metadata.oldPriority).toLowerCase()}  ${String(Ke.metadata.newPriority).toLowerCase()}`), Ke.metadata.newAssignedTo && Ke.metadata.oldAssignedTo !== Ke.metadata.newAssignedTo && Jr.push("Assignment changed"), Ke.metadata.scheduledAt && Jr.push(`Scheduled for ${new Date(Ke.metadata.scheduledAt).toLocaleString()}`), Jr.length > 0 && (Tt = Jr.join(", ")) } return { id: String(Ke.id), type: Nt(Ke.type), title: Ke.title, description: Tt || Ke.description, createdAt: Ke.createdAt, isCompleted: !0, user: Ke.user ? { id: String(Ke.user.id), firstName: Ke.user.firstName || "", lastName: Ke.user.lastName || "" } : void 0 } }); M(bt) } catch (Pe) { console.error("Error fetching lead activities:", Pe), M([]) } finally { ee(!1) } }, Nt = re => ({ TASK_CREATED: "NOTE", TASK_UPDATED: "NOTE", TASK_COMPLETED: "NOTE", LEAD_UPDATED: "NOTE", LEAD_STATUS_CHANGED: "STAGE_CHANGED", LEAD_ASSIGNED: "NOTE", LEAD_CONVERTED: "STAGE_CHANGED", COMMUNICATION_LOGGED: "MEETING", FILE_UPLOADED: "NOTE", FILE_DELETED: "NOTE", QUOTATION_CREATED: "QUOTE_SENT", QUOTATION_UPDATED: "QUOTE_SENT", INVOICE_CREATED: "PAYMENT_RECEIVED", INVOICE_UPDATED: "PAYMENT_RECEIVED" })[re] || "OTHER", Ut = async re => { try { pt(!0); const Pe = await $P.getMeetings(re); console.log("Meetings response:", Pe); const We = Pe?.data?.items || []; Ve(We) } catch (Pe) { console.error("Error fetching meetings:", Pe), console.error("Error details:", Pe?.response?.data || Pe?.message), R.error(Pe?.response?.data?.message || "Failed to fetch meetings"), Ve([]) } finally { pt(!1) } }, sr = async re => { try { se(!0); const We = (await I0.getNotesByLeadId(re))?.data?.notes || []; V(We) } catch (Pe) { console.error("Error fetching notes:", Pe), R.error("Failed to fetch notes"), V([]) } finally { se(!1) } }, _r = async (re, Pe = !0) => { try { Pe && U(!0); const We = localStorage.getItem(Ot.AUTH_TOKEN), bt = await fetch(`/api/call-logs/lead/${re}`, { headers: { Authorization: `Bearer ${We}`, "Content-Type": "application/json" } }); if (!bt.ok) throw new Error("Failed to fetch call logs"); const Ke = await bt.json(); console.log("Call logs response:", Ke); const Tt = Ke.data?.callLogs || Ke.callLogs || []; console.log("Setting call logs:", Tt), _([...Tt]) } catch (We) { console.error("Error fetching call logs:", We), R.error("Failed to load call logs") } finally { Pe && U(!1) } }, wr = async re => { try { ne(!0); const Pe = await gs.list({ entityType: "lead", entityId: re.toString(), status: "PENDING,IN_PROGRESS,COMPLETED" }), bt = (Pe?.data?.tasks || Pe?.data?.items || Pe?.tasks || []).sort((Ke, Tt) => Ke.dueDate && Tt.dueDate ? new Date(Ke.dueDate).getTime() - new Date(Tt.dueDate).getTime() : 0); pe(bt) } catch (Pe) { console.error("Error fetching tasks:", Pe), pe([]) } finally { ne(!1) } }, kr = async re => { try { mt(!0); const Pe = localStorage.getItem(Ot.AUTH_TOKEN), We = await fetch(`/api/quotations?entityType=lead&entityId=${re}`, { headers: { Authorization: `Bearer ${Pe}`, "Content-Type": "application/json" } }); if (!We.ok) throw new Error("Failed to fetch quotations"); const bt = await We.json(); Bt(bt.data?.items || bt.data?.quotations || bt.quotations || []) } catch (Pe) { console.error("Error fetching quotations:", Pe), Bt([]) } finally { mt(!1) } }, Sr = async re => { try { Q(!0); const Pe = localStorage.getItem(Ot.AUTH_TOKEN), We = await fetch(`/api/invoices?entityType=lead&entityId=${re}`, { headers: { Authorization: `Bearer ${Pe}`, "Content-Type": "application/json" } }); if (!We.ok) throw new Error("Failed to fetch invoices"); const bt = await We.json(); Xe(bt.data?.items || bt.data?.invoices || bt.invoices || []) } catch (Pe) { console.error("Error fetching invoices:", Pe), Xe([]) } finally { Q(!1) } }, Hr = async re => { try { u(!0), g(null); const Pe = await Yt.getLeadById(re); o(Pe.data.lead || Pe.data || Pe) } catch (Pe) { const We = Pe?.response?.data?.message || "Failed to load lead"; g(We), R.error(We) } finally { u(!1) } }, nr = () => { i && r(`/leads/${i.id}/edit`) }, na = re => { o(re), C(!1), A(!1) }, lr = async () => {
        if (!ke.title.trim() || !ke.date || !ke.time) { R.error("Please fill in all required fields"); return } if (!i || !s) { R.error("Lead or user information missing"); return } try {
            const re = new Date(`${ke.date}T${ke.time}`); let Pe = `Meeting scheduled with ${i.firstName} ${i.lastName}`; if (ke.location && (Pe += `
Location: ${ke.location}`), ke.link && (Pe += `
Meeting Link: ${ke.link}`), ke.notes && (Pe += `

Notes: ${ke.notes}`), (await $P.createMeeting({ leadId: i.id, userId: s.id, type: "MEETING", subject: ke.title, content: Pe, direction: "outbound", duration: ke.duration ? parseInt(ke.duration) : void 0, scheduledAt: re.toISOString() })).success) { R.success("Meeting scheduled successfully"); try { await fetch("/api/communication/send-meeting-email", { method: "POST", headers: { Authorization: `Bearer ${localStorage.getItem(Ot.AUTH_TOKEN)}`, "Content-Type": "application/json" }, body: JSON.stringify({ leadId: i.id, leadEmail: i.email, meetingTitle: ke.title, meetingDate: ke.date, meetingTime: ke.time, location: ke.location, link: ke.link, notes: ke.notes }) }) } catch (bt) { console.warn("Failed to send meeting email:", bt) } k(!1), he({ title: "", date: "", time: "", duration: "30", location: "", link: "", notes: "" }), e && (Ut(parseInt(e)), tr(parseInt(e))) }
        } catch (re) { R.error(re?.response?.data?.message || "Failed to schedule meeting") }
    }, ia = async () => { if (!Y.title.trim() || !Y.content.trim()) { R.error("Please fill in all fields"); return } if (!e || !s?.id) { R.error("Invalid lead or user information"); return } try { const re = await I0.createNote({ title: Y.title, content: Y.content, isPinned: Y.isPinned, leadId: parseInt(e), createdBy: s.id }); if (re.success) { const Pe = re.data.note; V([Pe, ...q]), je({ title: "", content: "", isPinned: !1 }), b(!1), R.success("Note added successfully"), e && tr(parseInt(e)) } else R.error(re.message || "Failed to add note") } catch (re) { R.error(re?.response?.data?.message || "Failed to add note") } }, xa = async re => { const Pe = Array.from(re.target.files || []); if (Pe.length !== 0) { try { const We = localStorage.getItem(Ot.AUTH_TOKEN); if (!We) { R.error("Please login again to upload files"); return } for (const bt of Pe) { const Ke = new FormData; Ke.append("file", bt), Ke.append("entityType", "lead"), Ke.append("entityId", i?.id?.toString() || ""); const Tt = await fetch("/api/files/upload", { method: "POST", headers: { Authorization: `Bearer ${We}` }, body: Ke }); if (console.log("Upload response status:", Tt.status), !Tt.ok) { const pa = await Tt.json().catch(() => ({})); throw console.error("Upload failed:", pa), new Error(pa.message || `Failed to upload ${bt.name}`) } const Jr = await Tt.json(); console.log("Upload successful, response:", Jr) } R.success(`${Pe.length} file(s) uploaded successfully`), i?.id && Wr(i.id) } catch (We) { console.error("Error uploading files:", We), R.error(We.message || "Failed to upload files") } v(!1) } }, Wr = async re => { try { const Pe = localStorage.getItem(Ot.AUTH_TOKEN); if (!Pe) { console.warn("No auth token found, skipping file fetch"); return } const We = await fetch(`/api/files?entityType=lead&entityId=${re}`, { headers: { Authorization: `Bearer ${Pe}`, "Content-Type": "application/json" } }); if (We.ok) { const bt = await We.json(); console.log("Files response data:", bt); const Ke = bt.data?.files || bt.files || []; console.log("Setting files:", Ke), z(Ke) } else { const bt = await We.text(); console.error("Failed to fetch files:", We.status, bt), (We.status === 403 || We.status === 401) && console.warn("Authentication failed when fetching files") } } catch (Pe) { console.error("Error fetching files:", Pe) } }, Vr = re => { switch (re) { case "call": y("call-logs"), setTimeout(() => ge(), 100); break; case "email": y("communication"), R.info("Opening email composer..."); break; case "meeting": he({ ...ke, title: `Meeting with ${i?.firstName} ${i?.lastName}`, date: new Date(Date.now() + 864e5).toISOString().split("T")[0], time: "14:00" }), k(!0); break; case "convert": I(!0); break } }, jr = async (re, Pe) => { try { _(Ke => Ke.map(Tt => Tt.id === re ? { ...Tt, callStatus: "COMPLETED", duration: Pe, endTime: new Date().toISOString() } : Tt)); const We = localStorage.getItem(Ot.AUTH_TOKEN); if (!(await fetch(`/api/call-logs/${re}`, { method: "PUT", headers: { Authorization: `Bearer ${We}`, "Content-Type": "application/json" }, body: JSON.stringify({ callStatus: "COMPLETED", duration: Pe, endTime: new Date().toISOString() }) })).ok) throw new Error("Failed to update call log"); i?.id && _r(i.id, !1) } catch (We) { console.error("Error updating call log:", We) } }, ge = async () => { if (!i?.phone) { R.error("No phone number available for this lead"); return } try { te(!0); const re = localStorage.getItem(Ot.AUTH_TOKEN), Pe = Date.now(); de(Pe); const We = await fetch("/api/call-logs", { method: "POST", headers: { Authorization: `Bearer ${re}`, "Content-Type": "application/json" }, body: JSON.stringify({ leadId: i.id, userId: s?.id, phoneNumber: i.phone, callType: "OUTBOUND", callStatus: "INITIATED", notes: "Call initiated from lead profile", startTime: new Date(Pe).toISOString() }) }); if (!We.ok) { const Jr = await We.json().catch(() => ({})); throw new Error(Jr.message || "Failed to log call") } const bt = await We.json(); console.log("Call log created:", bt); let Ke = bt.data || bt; !Ke.user && s && (Ke = { ...Ke, user: { id: s.id || 0, firstName: s.firstName || "User", lastName: s.lastName || "" } }), _(Jr => [Ke, ...Jr]), R.success("Call initiated and logged!"), window.location.href = `tel:${i.phone}`, tr(i.id); const Tt = () => { if (!document.hidden && G) { const Jr = Date.now(), pa = Math.floor((Jr - G) / 1e3); jr(Ke.id, pa), document.removeEventListener("visibilitychange", Tt), de(null) } }; document.addEventListener("visibilitychange", Tt) } catch (re) { console.error("Error initiating call:", re), R.error(re.message || "Unable to log call. Please try manually calling.") } finally { te(!1) } }, Qe = async () => { if (!Ne.phoneNumber.trim()) { R.error("Please enter a phone number"); return } try { const re = localStorage.getItem(Ot.AUTH_TOKEN); let Pe = new Date().toISOString(); if (Ne.date && Ne.time) { const Tt = `${Ne.date}T${Ne.time}:00`; Pe = new Date(Tt).toISOString() } const We = await fetch("/api/call-logs", { method: "POST", headers: { Authorization: `Bearer ${re}`, "Content-Type": "application/json" }, body: JSON.stringify({ leadId: i?.id, userId: s?.id, phoneNumber: Ne.phoneNumber, callType: Ne.callType, notes: Ne.notes, outcome: Ne.outcome, callStatus: Ne.callStatus, duration: Ne.duration ? parseInt(Ne.duration) * 60 : 0, startTime: Pe, endTime: new Date(new Date(Pe).getTime() + parseInt(Ne.duration || "0") * 6e4).toISOString() }) }); if (!We.ok) throw new Error("Failed to add call log"); const bt = await We.json(); console.log("Call log added:", bt); let Ke = bt.data || bt; !Ke.user && s && (Ke = { ...Ke, user: { id: s.id || 0, firstName: s.firstName || "User", lastName: s.lastName || "" } }), _(Tt => [Ke, ...Tt]), R.success("Call log added successfully"), Z(!1), fe({ phoneNumber: "", callType: "OUTBOUND", notes: "", outcome: "", date: new Date().toISOString().split("T")[0], time: new Date().toLocaleTimeString([], { hour: "2-digit", minute: "2-digit", hour12: !1 }), duration: "", callStatus: "COMPLETED" }), i?.id && tr(i.id), setTimeout(() => { i?.id && _r(i.id, !1) }, 1e3) } catch (re) { console.error("Error adding call log:", re), R.error("Failed to add call log") } }, Rt = async re => { if (confirm("Are you sure you want to delete this note?")) try { const Pe = await I0.deleteNote(re); Pe.success ? (V(q.filter(We => We.id !== re)), R.success("Note deleted successfully"), e && tr(parseInt(e))) : R.error(Pe.message || "Failed to delete note") } catch (Pe) { console.error("Error deleting note:", Pe), R.error(Pe?.response?.data?.message || "Failed to delete note") } }, Ct = async re => { const Pe = q.find(We => We.id === re); if (Pe) try { const We = await I0.updateNote(re, { isPinned: !Pe.isPinned }); We.success ? (V(q.map(bt => bt.id === re ? We.data.note : bt)), R.success("Note updated successfully"), e && tr(parseInt(e))) : R.error(We.message || "Failed to update note") } catch (We) { console.error("Error updating note:", We), R.error(We?.response?.data?.message || "Failed to update note") } }, xe = async re => { try { const Pe = localStorage.getItem(Ot.AUTH_TOKEN), We = await fetch(`/api/files/${re.id}/download?disposition=inline`, { headers: { Authorization: `Bearer ${Pe}` } }); if (!We.ok) throw new Error("Failed to preview file"); const bt = await We.blob(), Ke = URL.createObjectURL(bt); window.open(Ke, "_blank"), setTimeout(() => URL.revokeObjectURL(Ke), 3e4) } catch (Pe) { R.error(Pe.message || "Unable to preview file") } }, _e = async re => { try { const Pe = localStorage.getItem(Ot.AUTH_TOKEN), We = await fetch(`/api/files/${re.id}/download?disposition=attachment`, { headers: { Authorization: `Bearer ${Pe}` } }); if (!We.ok) throw new Error("Failed to download file"); const bt = await We.blob(), Ke = URL.createObjectURL(bt), Tt = document.createElement("a"); Tt.href = Ke, Tt.download = re.name || "download", document.body.appendChild(Tt), Tt.click(), Tt.remove(), setTimeout(() => URL.revokeObjectURL(Ke), 3e4) } catch (Pe) { R.error(Pe.message || "Unable to download file") } }, Be = async re => { if (confirm("Are you sure you want to delete this file?")) try { const Pe = localStorage.getItem(Ot.AUTH_TOKEN); if (!(await fetch(`/api/files/${re}`, { method: "DELETE", headers: { Authorization: `Bearer ${Pe}`, "Content-Type": "application/json" } })).ok) throw new Error("Failed to delete file"); R.success("File deleted successfully"), i?.id && Wr(i.id) } catch (Pe) { console.error("Error deleting file:", Pe), R.error("Failed to delete file") } }, zt = async () => { if (!i) return !1; try { return await Yt.updateLead(i.id, { status: "qualified" }), await Hr(i.id), R.info("Lead conversion status reset. You can try converting again."), !0 } catch (re) { return console.error("Failed to reset conversion status:", re), R.error(re?.response?.data?.message || "Failed to reset conversion status"), !1 } }, At = async re => { if (i) try { B(!0); const Pe = await Yt.convertLead(i.id, re); R.success("Lead converted successfully!"), I(!1), await Hr(i.id), Pe.data?.deal?.id && setTimeout(() => { r(`/deals/${Pe.data.deal.id}`) }, 1500) } catch (Pe) { console.error("Error converting lead:", Pe); const We = Pe?.response?.data?.message || "Failed to convert lead"; if (/already\s*converted/i.test(We) || Pe?.response?.status === 409) try { const Ke = await Yt.convertLeadForce(i.id, re); R.success("Lead converted successfully!"), I(!1), await Hr(i.id), Ke.data?.deal?.id && setTimeout(() => r(`/deals/${Ke.data.deal.id}`), 1200); return } catch (Ke) { if (await zt()) try { const Jr = await Yt.convertLead(i.id, re); R.success("Lead converted successfully!"), I(!1), await Hr(i.id), Jr.data?.deal?.id && setTimeout(() => r(`/deals/${Jr.data.deal.id}`), 1200); return } catch (Jr) { const pa = Jr?.response?.data?.message || "Failed to convert lead after reset"; R.error(pa) } else R.error(Ke?.response?.data?.message || We) } else R.error(We) } finally { B(!1) } }, Ns = re => ({ new: "bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400", contacted: "bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400", qualified: "bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400", proposal: "bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400", negotiation: "bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400", closed: "bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400", lost: "bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400" })[re] || "bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400", Cr = async re => { if (i) try { await Yt.updateLead(i.id, { status: re }), o({ ...i, status: re }), R.success("Lead status updated successfully") } catch (Pe) { console.error("Failed to update lead status:", Pe), R.error(Pe?.response?.data?.message || "Failed to update lead status") } }, ve = re => { switch (re) { case "COMPLETED": return "bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"; case "ANSWERED": return "bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"; case "FAILED": case "NO_ANSWER": case "BUSY": return "bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"; case "INITIATED": case "RINGING": return "bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"; case "CANCELLED": return "bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"; default: return "bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400" } }, Fe = re => { if (!re) return "N/A"; const Pe = Math.floor(re / 60), We = re % 60; return `${Pe}:${We.toString().padStart(2, "0")}` }, Ie = re => re === "INBOUND" ? t.jsx(pr, { className: "h-4 w-4 text-green-500" }) : t.jsx(gd, { className: "h-4 w-4 text-blue-500" }); if (c) return t.jsx("div", { className: "min-h-screen bg-gray-50 dark:bg-gray-900", children: t.jsx(X2, { children: t.jsxs("div", { className: "py-8", children: [t.jsx("div", { className: "mb-8", children: t.jsx(qa, { to: "/leads" }) }), t.jsx("div", { className: "animate-pulse", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-sm", children: [t.jsxs("div", { className: "flex items-center space-x-6 mb-6", children: [t.jsx("div", { className: "w-20 h-20 bg-gray-200 dark:bg-gray-700 rounded-full" }), t.jsxs("div", { className: "flex-1", children: [t.jsx("div", { className: "h-8 bg-gray-200 dark:bg-gray-700 rounded mb-4 w-1/3" }), t.jsxs("div", { className: "space-y-2", children: [t.jsx("div", { className: "h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2" }), t.jsx("div", { className: "h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4" })] })] })] }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [t.jsx("div", { className: "lg:col-span-2", children: t.jsx("div", { className: "h-64 bg-gray-200 dark:bg-gray-700 rounded-xl" }) }), t.jsxs("div", { className: "space-y-4", children: [t.jsx("div", { className: "h-32 bg-gray-200 dark:bg-gray-700 rounded-xl" }), t.jsx("div", { className: "h-32 bg-gray-200 dark:bg-gray-700 rounded-xl" })] })] })] }) })] }) }) }); if (m || !i) return t.jsx("div", { className: "min-h-screen bg-gray-50 dark:bg-gray-900", children: t.jsx(X2, { children: t.jsxs("div", { className: "py-8", children: [t.jsx("div", { className: "mb-8", children: t.jsx(qa, { to: "/leads" }) }), t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl p-12 text-center shadow-sm", children: [t.jsx(Ca, { className: "h-20 w-20 text-weconnect-red mx-auto mb-6" }), t.jsx("h2", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-4", children: m || "Lead not found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-8 text-lg", children: "The lead you're looking for doesn't exist or you don't have permission to view it." }), t.jsx(ue, { variant: "PRIMARY", onClick: () => r("/leads"), className: "px-8 py-3", children: "Back to Leads" })] })] }) }) }); const Vt = i?.source || n(i?.sourceId?.toString() || ""), ht = [{ id: "overview", label: "Overview", icon: Ht }, { id: "activity", label: "Activity", icon: Qc }, { id: "notes", label: "Notes", icon: Mt }, { id: "files", label: "Files", icon: Sb }, { id: "proposals", label: "Proposals", icon: Mt }, { id: "call-logs", label: "Call Logs", icon: F0 }, { id: "meetings", label: "Meetings", icon: Zt }, { id: "tasks", label: "Tasks", icon: ut }, { id: "communication", label: "Communication", icon: Fr }]; return t.jsxs("div", {
        className: "min-h-screen bg-gray-50 dark:bg-gray-900", children: [t.jsx("div", { className: "bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700", children: t.jsx("div", { className: "mx-auto px-6", children: t.jsxs("div", { className: "py-4", children: [t.jsx("div", { className: "flex items-center justify-end mb-4", children: t.jsxs("div", { className: "flex items-center space-x-2", children: [a("lead.update") && t.jsxs("button", { onClick: nr, className: "flex items-center px-3 py-1.5 bg-weconnect-red text-white rounded-lg hover:bg-red-600 transition-colors text-sm", children: [t.jsx(Jt, { className: "h-4 w-4 mr-1.5" }), "Edit"] }), t.jsx(qa, { to: "/leads" })] }) }), t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center space-x-4", children: [t.jsx("div", { className: "flex-shrink-0", children: t.jsx("div", { className: "h-14 w-14 rounded-xl bg-weconnect-red flex items-center justify-center shadow-lg", children: t.jsxs("span", { className: "text-white font-bold text-xl", children: [i.firstName[0], i.lastName[0]] }) }) }), t.jsxs("div", { className: "flex-1", children: [t.jsxs("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-1", children: [i.firstName, " ", i.lastName] }), t.jsxs("div", { className: "flex flex-wrap items-center gap-3 text-sm text-gray-600 dark:text-gray-400 mb-2", children: [i.company && t.jsxs("span", { className: "flex items-center", children: [t.jsx(qi, { className: "h-3.5 w-3.5 mr-1.5 text-blue-500" }), i.company] }), i.email && t.jsxs("span", { className: "flex items-center", children: [t.jsx(ir, { className: "h-3.5 w-3.5 mr-1.5 text-green-500" }), i.email] }), i.phone && t.jsxs("span", { className: "flex items-center", children: [t.jsx(ma, { className: "h-3.5 w-3.5 mr-1.5 text-purple-500" }), i.phone] })] }), t.jsxs("div", { className: "flex flex-wrap items-center gap-2", children: [t.jsxs("select", { value: i.status, onChange: re => Cr(re.target.value), className: `inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium cursor-pointer border-0 focus:outline-none focus:ring-2 focus:ring-offset-1 ${Ns(i.status)}`, children: [t.jsx("option", { value: "new", children: "New" }), t.jsx("option", { value: "contacted", children: "Contacted" }), t.jsx("option", { value: "qualified", children: "Qualified" }), t.jsx("option", { value: "proposal", children: "Proposal" }), t.jsx("option", { value: "negotiation", children: "Negotiation" }), t.jsx("option", { value: "closed", children: "Closed" }), t.jsx("option", { value: "lost", children: "Lost" }), t.jsx("option", { value: "converted", children: "Converted" })] }), Vt && t.jsx("span", { className: "inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium bg-blue-50 text-blue-600 border border-blue-200", children: Vt.name }), i.assignedUser && t.jsxs("span", { className: "flex items-center px-2.5 py-1 bg-gray-50 dark:bg-gray-700 rounded-lg text-xs", children: [t.jsx(wt, { className: "h-3 w-3 mr-1.5 text-orange-500" }), i.assignedUser.firstName, " ", i.assignedUser.lastName] }), i.leadScore !== null && i.leadScore !== void 0 && i.leadScore > 0 && t.jsxs("div", { className: "flex items-center px-2.5 py-1 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg border border-green-200 dark:border-green-800", children: [t.jsx(Ea, { className: "h-3 w-3 mr-1.5 text-green-600 dark:text-green-400" }), t.jsxs("span", { className: "text-xs font-semibold text-green-600 dark:text-green-400", children: ["Score: ", i.leadScore, "/10"] })] })] })] })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsxs("button", { onClick: () => Vr("call"), className: "flex items-center px-3 py-1.5 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors text-sm", title: "Call Lead", children: [t.jsx(ma, { className: "h-4 w-4 mr-1.5" }), "Call"] }), t.jsxs("button", { onClick: () => Vr("email"), className: "flex items-center px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors text-sm", title: "Send Email", children: [t.jsx(ir, { className: "h-4 w-4 mr-1.5" }), "Email"] }), t.jsxs("button", { onClick: () => Vr("meeting"), className: "flex items-center px-3 py-1.5 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-400 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors text-sm", title: "Schedule Meeting", children: [t.jsx(Zt, { className: "h-4 w-4 mr-1.5" }), "Meeting"] }), t.jsxs("button", { onClick: () => Ge(!0), className: "flex items-center px-3 py-1.5 bg-teal-50 dark:bg-teal-900/20 text-teal-700 dark:text-teal-400 rounded-lg hover:bg-teal-100 dark:hover:bg-teal-900/30 transition-colors text-sm", title: "Create Task", children: [t.jsx(ut, { className: "h-4 w-4 mr-1.5" }), "Task"] }), t.jsxs("button", { onClick: () => A(!0), className: "flex items-center px-3 py-1.5 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-400 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/30 transition-colors text-sm", title: "Assign Lead", children: [t.jsx($s, { className: "h-4 w-4 mr-1.5" }), "Assign"] }), t.jsxs("button", { onClick: () => I(!0), className: "flex items-center px-3 py-1.5 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400 rounded-lg hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors text-sm", title: "Convert Lead", children: [t.jsx(Ea, { className: "h-4 w-4 mr-1.5" }), "Convert"] })] })] })] }) }) }), t.jsx("div", {
            className: "mx-auto px-6 py-6", children: t.jsxs("div", {
                className: "space-y-6", children: [t.jsx("div", { className: "border-b border-gray-200 dark:border-gray-700", children: t.jsx("nav", { className: "-mb-px flex space-x-6 overflow-x-auto", children: ht.map(re => { const Pe = re.icon; return t.jsxs("button", { onClick: () => y(re.id), className: `flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${f === re.id ? "border-weconnect-red text-weconnect-red dark:text-weconnect-red" : "border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`, children: [t.jsx(Pe, { className: "h-4 w-4 mr-1.5" }), re.label] }, re.id) }) }) }), t.jsxs("div", {
                    children: [f === "overview" && t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700", children: [t.jsxs("div", { className: "flex items-center justify-between mb-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Lead Details" }), t.jsxs("div", { className: "text-sm text-gray-500 dark:text-gray-400", children: ["Created ", new Date(i.createdAt).toLocaleDateString()] })] }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: [t.jsxs("div", { className: "space-y-4", children: [i.position && t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Position" }), t.jsx("p", { className: "text-sm text-gray-900 dark:text-white", children: i.position })] }), i.website && t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Website" }), t.jsx("p", { className: "text-sm", children: t.jsx("a", { href: i.website.startsWith("http://") || i.website.startsWith("https://") ? i.website : `https://${i.website}`, target: "_blank", rel: "noopener noreferrer", onClick: re => { re.stopPropagation(); const Pe = i.website?.startsWith("http://") || i.website?.startsWith("https://") ? i.website : `https://${i.website}`; window.open(Pe, "_blank", "noopener,noreferrer") }, className: "text-blue-600 dark:text-blue-400 hover:underline cursor-pointer font-medium", children: i.website }) })] }), i.industry && t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Industry" }), t.jsx("p", { className: "text-sm text-gray-900 dark:text-white", children: i.industry })] }), i.address && t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Address" }), t.jsx("p", { className: "text-sm text-gray-900 dark:text-white", children: i.address })] })] }), t.jsxs("div", { className: "space-y-4", children: [(i.city || i.state || i.country) && t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Location" }), t.jsx("p", { className: "text-sm text-gray-900 dark:text-white", children: [i.city, i.state, i.country].filter(Boolean).join(", ") || "N/A" })] }), i.zipCode && t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Zip Code" }), t.jsx("p", { className: "text-sm text-gray-900 dark:text-white", children: i.zipCode })] }), i.companySize && t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Company Size" }), t.jsxs("p", { className: "text-sm text-gray-900 dark:text-white", children: [i.companySize, " employees"] })] }), i.annualRevenue && t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Annual Revenue" }), t.jsxs("p", { className: "text-sm text-gray-900 dark:text-white", children: [i.currency || "USD", " ", Number(i.annualRevenue).toLocaleString()] })] })] }), t.jsxs("div", { className: "space-y-4", children: [i.priority && t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Priority" }), t.jsx("p", { children: t.jsx("span", { className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.priority === "urgent" ? "bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300" : i.priority === "high" ? "bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300" : i.priority === "medium" ? "bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300" : "bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`, children: i.priority }) })] }), i.budget && t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Budget" }), t.jsxs("p", { className: "text-sm text-gray-900 dark:text-white", children: [i.currency || "USD", " ", Number(i.budget).toLocaleString()] })] }), i.preferredContactMethod && t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Preferred Contact" }), t.jsx("p", { className: "text-sm text-gray-900 dark:text-white capitalize", children: i.preferredContactMethod })] }), i.timezone && t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Timezone" }), t.jsx("p", { className: "text-sm text-gray-900 dark:text-white", children: i.timezone })] })] }), t.jsxs("div", { className: "space-y-4", children: [i.linkedinProfile && t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1", children: "LinkedIn" }), t.jsx("p", { className: "text-sm", children: t.jsx("a", { href: i.linkedinProfile.startsWith("http://") || i.linkedinProfile.startsWith("https://") ? i.linkedinProfile : `https://${i.linkedinProfile}`, target: "_blank", rel: "noopener noreferrer", onClick: re => { re.stopPropagation(); const Pe = i.linkedinProfile?.startsWith("http://") || i.linkedinProfile?.startsWith("https://") ? i.linkedinProfile : `https://${i.linkedinProfile}`; window.open(Pe, "_blank", "noopener,noreferrer") }, className: "text-blue-600 dark:text-blue-400 hover:underline cursor-pointer font-medium", children: i.linkedinProfile }) })] }), i.lastContactedAt && t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Last Contacted" }), t.jsxs("p", { className: "text-sm text-gray-900 dark:text-white", children: [new Date(i.lastContactedAt).toLocaleDateString(), t.jsx("br", {}), t.jsx("span", { className: "text-xs text-gray-500", children: new Date(i.lastContactedAt).toLocaleTimeString() })] })] }), i.nextFollowUpAt && t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Next Follow-up" }), t.jsxs("p", { className: "text-sm text-gray-900 dark:text-white", children: [new Date(i.nextFollowUpAt).toLocaleDateString(), t.jsx("br", {}), t.jsx("span", { className: "text-xs text-gray-500", children: new Date(i.nextFollowUpAt).toLocaleTimeString() })] })] })] })] }), i.notes && t.jsxs("div", { className: "mt-6", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2", children: "Notes" }), t.jsx("p", { className: "text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 rounded-md p-3", children: i.notes })] }), i.tags && i.tags.length > 0 && t.jsxs("div", { className: "mt-6", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2", children: "Tags" }), t.jsx("div", { className: "flex flex-wrap gap-2", children: i.tags.map(re => { const Pe = re.tag || re; return t.jsxs("span", { className: "inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium", style: { backgroundColor: (Pe.color || "#3B82F6") + "20", color: Pe.color || "#3B82F6" }, children: [t.jsx(qo, { className: "h-3 w-3 mr-1" }), Pe.name || re.name] }, Pe.id || re.id) }) })] })] }), f === "activity" && (le ? t.jsx(Ae, { className: "p-6", children: t.jsx("div", { className: "flex items-center justify-center py-12", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red" }) }) }) : t.jsx(eL, { entityType: "lead", entityId: e || "", activities: W })), f === "notes" && t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700", children: [t.jsxs("div", { className: "flex items-center justify-between mb-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Notes" }), t.jsx("button", { onClick: () => b(!0), className: "bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm", children: "Add Note" })] }), X ? t.jsx("div", { className: "flex items-center justify-center py-12", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red" }) }) : q.length > 0 ? t.jsx("div", { className: "space-y-4", children: q.map(re => t.jsxs("div", { className: "border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsxs("div", { className: "flex items-start justify-between mb-2", children: [t.jsx("h4", { className: "font-medium text-gray-900 dark:text-white", children: re.title }), t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx("button", { onClick: () => Ct(re.id), className: `p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-600 ${re.isPinned ? "text-yellow-500" : "text-gray-400 dark:text-gray-500"}`, children: t.jsx(Qu, { className: "h-4 w-4", fill: re.isPinned ? "currentColor" : "none" }) }), t.jsx("button", { onClick: () => Rt(re.id), className: "p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-400 dark:text-gray-500 hover:text-red-500", children: t.jsx(yt, { className: "h-4 w-4" }) })] })] }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mb-3", children: re.content }), t.jsxs("div", { className: "flex items-center justify-between text-xs text-gray-500 dark:text-gray-400", children: [t.jsxs("span", { children: ["by ", re.user ? `${re.user.firstName} ${re.user.lastName}` : "Unknown User"] }), t.jsx("span", { children: new Date(re.createdAt).toLocaleDateString() })] })] }, re.id)) }) : t.jsxs("div", { className: "text-center py-12", children: [t.jsx(Mt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-2", children: "No notes yet" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Add notes to track important information about this lead" })] })] }), f === "files" && (console.log("Rendering files tab, files state:", L, "length:", L.length), t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700", children: [t.jsxs("div", { className: "flex items-center justify-between mb-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Files & Attachments" }), t.jsxs("label", { className: "bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm cursor-pointer", children: ["Upload File", t.jsx("input", { type: "file", multiple: !0, className: "hidden", onChange: xa })] })] }), L.length > 0 ? t.jsx("div", { className: "space-y-3", children: L.map(re => t.jsxs("div", { className: "flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg", children: [t.jsxs("div", { className: "flex items-center space-x-3", children: [t.jsx(Mt, { className: "h-5 w-5 text-blue-500" }), t.jsxs("div", { children: [t.jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: re.name }), t.jsxs("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: [(re.fileSize / 1024 / 1024).toFixed(2), " MB  Uploaded ", new Date(re.createdAt).toLocaleDateString()] }), t.jsxs("div", { className: "mt-1 flex gap-3", children: [t.jsx("button", { onClick: () => xe(re), className: "text-blue-600 dark:text-blue-400 text-xs hover:underline", children: "Preview" }), t.jsx("button", { onClick: () => _e(re), className: "text-green-600 dark:text-green-400 text-xs hover:underline", children: "Download" })] })] })] }), t.jsx("button", { onClick: () => Be(re.id), className: "p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-400 hover:text-red-500", children: t.jsx(yt, { className: "h-4 w-4" }) })] }, re.id)) }) : t.jsxs("div", { className: "text-center py-12", children: [t.jsx(Sb, { className: "h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-2", children: "No files uploaded yet" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Upload documents, images, or other files related to this lead" })] })] })), f === "call-logs" && t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700", children: [t.jsxs("div", { className: "flex items-center justify-between mb-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Call Logs" }), t.jsxs("div", { className: "flex items-center space-x-3", children: [t.jsxs("button", { onClick: () => { fe({ ...Ne, phoneNumber: i?.phone || "" }), Z(!0) }, className: "bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm flex items-center", children: [t.jsx($t, { className: "h-4 w-4 mr-2" }), "Add Call Log"] }), t.jsx("button", { onClick: ge, disabled: J || !i?.phone, className: "bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm flex items-center disabled:opacity-50", children: J ? t.jsxs(t.Fragment, { children: [t.jsx("div", { className: "animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2" }), "Initiating..."] }) : t.jsxs(t.Fragment, { children: [t.jsx(F0, { className: "h-4 w-4 mr-2" }), "Call Now"] }) })] })] }), H ? t.jsxs("div", { className: "text-center py-12", children: [t.jsx("div", { className: "animate-spin h-8 w-8 border-2 border-weconnect-red border-t-transparent rounded-full mx-auto mb-4" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "Loading call logs..." })] }) : T.length > 0 ? t.jsx("div", { className: "space-y-4", children: T.map(re => t.jsxs("div", { className: "border border-gray-200 dark:border-gray-700 rounded-lg p-4", children: [t.jsxs("div", { className: "flex items-start justify-between mb-3", children: [t.jsxs("div", { className: "flex items-center space-x-3", children: [t.jsx("div", { className: "flex-shrink-0", children: Ie(re.callType) }), t.jsxs("div", { children: [t.jsxs("div", { className: "flex items-center space-x-2 mb-1", children: [t.jsxs("h4", { className: "font-medium text-gray-900 dark:text-white", children: [re.callType, " Call"] }), t.jsx("span", { className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ve(re.callStatus)}`, children: (re.callStatus || "").replace("_", " ") })] }), t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: [t.jsx(ma, { className: "h-4 w-4 inline mr-1" }), re.phoneNumber] })] })] }), t.jsxs("div", { className: "text-right", children: [t.jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: Fe(re.duration) }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: new Date(re.createdAt).toLocaleDateString() })] })] }), re.notes && t.jsxs("div", { className: "mb-3", children: [t.jsx("p", { className: "text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Notes:" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700 rounded p-2", children: re.notes })] }), re.outcome && t.jsxs("div", { className: "mb-3", children: [t.jsx("p", { className: "text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Outcome:" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: re.outcome })] }), t.jsxs("div", { className: "flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-600 pt-3", children: [t.jsxs("span", { children: ["by ", re.user?.firstName || "Unknown", " ", re.user?.lastName || ""] }), t.jsx("span", { children: re.startTime && new Date(re.startTime).toLocaleTimeString() })] })] }, re.id)) }) : t.jsxs("div", { className: "text-center py-12", children: [t.jsx(F0, { className: "h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-2", children: "No call logs found" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Start making calls to track your communication history" })] })] }), f === "proposals" && t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700", children: Ft ? t.jsxs("div", { className: "text-center py-12", children: [t.jsx("div", { className: "animate-spin h-8 w-8 border-2 border-weconnect-red border-t-transparent rounded-full mx-auto mb-4" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "Loading proposals..." })] }) : t.jsx(Z6, { entityType: "lead", entityId: i.id.toString(), quotations: Et, invoices: ce, onRefresh: () => { kr(i.id), Sr(i.id) } }) }), f === "meetings" && t.jsxs("div", {
                        className: "bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700", children: [t.jsxs("div", { className: "flex items-center justify-between mb-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Scheduled Meetings" }), t.jsxs("button", { onClick: () => k(!0), className: "bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm flex items-center", children: [t.jsx(Zt, { className: "h-4 w-4 mr-2" }), "Schedule Meeting"] })] }), et ? t.jsx("div", { className: "flex items-center justify-center py-12", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red" }) }) : Le.length > 0 ? t.jsx("div", {
                            className: "space-y-4", children: Le.map(re => t.jsxs("div", {
                                className: "border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsxs("div", {
                                    className: "flex items-start justify-between mb-2", children: [t.jsxs("div", {
                                        className: "flex-1", children: [t.jsx("h4", { className: "font-medium text-gray-900 dark:text-white mb-1", children: re.subject || "Meeting" }), re.scheduledAt && t.jsxs("div", { className: "flex items-center text-sm text-gray-600 dark:text-gray-400 mb-2", children: [t.jsx(Zt, { className: "h-4 w-4 mr-2" }), new Date(re.scheduledAt).toLocaleString()] }), re.duration && t.jsxs("div", { className: "flex items-center text-sm text-gray-600 dark:text-gray-400 mb-2", children: [t.jsx(Kt, { className: "h-4 w-4 mr-2" }), re.duration, " minutes"] }), re.content && t.jsx("div", {
                                            className: "text-sm text-gray-600 dark:text-gray-400 mb-2 whitespace-pre-wrap", children: re.content.split(`
`).map((Pe, We) => { const bt = /(https?:\/\/[^\s]+|www\.[^\s]+|zoom\.us\/[^\s]+|meet\.google\.com\/[^\s]+|teams\.microsoft\.com\/[^\s]+|[a-zA-Z0-9][a-zA-Z0-9-]*\.[a-zA-Z]{2,}(?:\/[^\s]*)?)/gi, Ke = Pe.trim(), Tt = Ke.toLowerCase(); if (Tt.match(/meeting\s+link\s*:/i)) { const Ja = Ke.toLowerCase().indexOf("meeting link:"), tn = Ke.substring(0, Ja + 13), oa = Ke.substring(Ja + 13).trim(); if (oa) { const ks = oa.startsWith("http://") || oa.startsWith("https://") ? oa : `https://${oa}`; return t.jsxs("p", { className: "mb-1", children: [t.jsxs("span", { children: [tn, " "] }), t.jsx("a", { href: ks, target: "_blank", rel: "noopener noreferrer", onClick: zs => { zs.preventDefault(), zs.stopPropagation(), window.open(ks, "_blank", "noopener,noreferrer") }, className: "text-blue-600 dark:text-blue-400 hover:underline cursor-pointer font-medium", children: oa })] }, We) } } const pa = Tt.startsWith("location:"), jx = Tt.startsWith("notes:"); if (pa || jx) { const Ja = Ke.indexOf(":"); if (Ja === -1) return t.jsx("p", { className: "mb-1", children: Pe }, We); const tn = Ke.substring(0, Ja + 1), oa = Ke.substring(Ja + 1).trim(), ks = oa.match(bt); if (ks && ks.length > 0) { let zs = 0; const lo = [t.jsxs("span", { children: [tn, " "] }, "prefix")]; return ks.forEach((rl, ac) => { const yi = oa.indexOf(rl, zs); yi > zs && lo.push(t.jsx("span", { children: oa.substring(zs, yi) }, `text-${ac}`)); let al = rl.trim(); !al.startsWith("http://") && !al.startsWith("https://") && (al = "https://" + al), lo.push(t.jsx("a", { href: al, target: "_blank", rel: "noopener noreferrer", onClick: Rd => Rd.stopPropagation(), className: "text-blue-600 dark:text-blue-400 hover:underline cursor-pointer font-medium", children: rl.trim() }, `link-${ac}`)), zs = yi + rl.length }), zs < oa.length && lo.push(t.jsx("span", { children: oa.substring(zs) }, "text-end")), t.jsx("p", { className: "mb-1", children: lo }, We) } return t.jsx("p", { className: "mb-1", children: Pe }, We) } const Ld = Pe.match(bt); if (!Ld || Ld.length === 0) return t.jsx("p", { className: "mb-1", children: Pe }, We); let oo = 0; const pi = []; return Ld.forEach((Ja, tn) => { const oa = Pe.indexOf(Ja, oo); oa > oo && pi.push(t.jsx("span", { children: Pe.substring(oo, oa) }, `text-${tn}`)); let ks = Ja; !ks.startsWith("http://") && !ks.startsWith("https://") && (ks = "https://" + ks), pi.push(t.jsx("a", { href: ks, target: "_blank", rel: "noopener noreferrer", onClick: zs => zs.stopPropagation(), className: "text-blue-600 dark:text-blue-400 hover:underline cursor-pointer font-medium", children: Ja }, `link-${tn}`)), oo = oa + Ja.length }), oo < Pe.length && pi.push(t.jsx("span", { children: Pe.substring(oo) }, "text-end")), t.jsx("p", { className: "mb-1", children: pi }, We) })
                                        }), re.outcome && t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: [t.jsx("span", { className: "font-medium", children: "Outcome:" }), " ", re.outcome] })]
                                    }), t.jsx("div", { className: "ml-4", children: re.completedAt ? t.jsx("span", { className: "inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300", children: "Completed" }) : t.jsx("span", { className: "inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300", children: "Scheduled" }) })]
                                }), re.user && t.jsxs("div", { className: "flex items-center text-xs text-gray-500 dark:text-gray-400 mt-2", children: [t.jsx(wt, { className: "h-3 w-3 mr-1" }), "Scheduled by ", re.user.firstName, " ", re.user.lastName] })]
                            }, re.id))
                        }) : t.jsxs("div", { className: "text-center py-12", children: [t.jsx(Zt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4" }), t.jsx("p", { className: "text-gray-500 dark:text-gray-400 mb-4", children: "No meetings scheduled" }), t.jsx("button", { onClick: () => k(!0), className: "bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm", children: "Schedule First Meeting" })] })]
                    }), f === "tasks" && t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700", children: t.jsx(J6, { entityType: "lead", entityId: i.id.toString(), tasks: Te.map(re => ({ ...re, id: String(re.id), assignedTo: re.assignedUser ? { id: String(re.assignedUser.id), firstName: re.assignedUser.firstName, lastName: re.assignedUser.lastName } : void 0, createdBy: re.createdByUser ? { id: String(re.createdByUser.id), firstName: re.createdByUser.firstName, lastName: re.createdByUser.lastName } : { id: String(s?.id || ""), firstName: s?.firstName || "", lastName: s?.lastName || "" } })) }, `tasks-${i.id}-${De}`) }), f === "communication" && t.jsx(X6, { lead: i })]
                })]
            })
        }), p && t.jsx("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50", onClick: () => b(!1), children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4", onClick: re => re.stopPropagation(), children: [t.jsxs("div", { className: "flex items-center justify-between mb-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Add New Note" }), t.jsx("button", { onClick: () => b(!1), className: "text-gray-400 hover:text-gray-600 dark:hover:text-gray-300", children: t.jsx(Ca, { className: "h-5 w-5" }) })] }), t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Title *" }), t.jsx("input", { type: "text", value: Y.title, onChange: re => je({ ...Y, title: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Enter note title" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Content *" }), t.jsx("textarea", { value: Y.content, onChange: re => je({ ...Y, content: re.target.value }), rows: 4, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Enter note content" })] }), t.jsxs("div", { className: "flex items-center", children: [t.jsx("input", { type: "checkbox", id: "isPinned", checked: Y.isPinned, onChange: re => je({ ...Y, isPinned: re.target.checked }), className: "h-4 w-4 text-weconnect-red focus:ring-weconnect-red border-gray-300 rounded" }), t.jsx("label", { htmlFor: "isPinned", className: "ml-2 text-sm text-gray-700 dark:text-gray-300", children: "Pin this note" })] })] }), t.jsxs("div", { className: "flex justify-end space-x-3 mt-6", children: [t.jsx("button", { onClick: () => b(!1), className: "px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors", children: "Cancel" }), t.jsx("button", { onClick: ia, className: "px-4 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors", children: "Add Note" })] })] }) }), S && t.jsx("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50", onClick: () => k(!1), children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4", onClick: re => re.stopPropagation(), children: [t.jsxs("div", { className: "flex items-center justify-between mb-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Schedule Meeting" }), t.jsx("button", { onClick: () => k(!1), className: "text-gray-400 hover:text-gray-600 dark:hover:text-gray-300", children: t.jsx(Ca, { className: "h-5 w-5" }) })] }), t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Meeting Title *" }), t.jsx("input", { type: "text", value: ke.title, onChange: re => he({ ...ke, title: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Enter meeting title" })] }), t.jsxs("div", { className: "grid grid-cols-2 gap-3", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Date *" }), t.jsx("input", { type: "date", value: ke.date, onChange: re => he({ ...ke, date: re.target.value }), min: new Date().toISOString().split("T")[0], className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Time *" }), t.jsx("input", { type: "time", value: ke.time, onChange: re => he({ ...ke, time: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white" })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Duration (minutes)" }), t.jsxs("select", { value: ke.duration, onChange: re => he({ ...ke, duration: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", children: [t.jsx("option", { value: "15", children: "15 minutes" }), t.jsx("option", { value: "30", children: "30 minutes" }), t.jsx("option", { value: "45", children: "45 minutes" }), t.jsx("option", { value: "60", children: "1 hour" }), t.jsx("option", { value: "90", children: "1.5 hours" }), t.jsx("option", { value: "120", children: "2 hours" })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Location" }), t.jsx("input", { type: "text", value: ke.location, onChange: re => he({ ...ke, location: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Office address, physical location, etc." })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Meeting Link" }), t.jsx("input", { type: "url", value: ke.link, onChange: re => he({ ...ke, link: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "https://zoom.us/j/..., https://meet.google.com/..., etc." })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Notes" }), t.jsx("textarea", { value: ke.notes, onChange: re => he({ ...ke, notes: re.target.value }), rows: 3, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Meeting agenda, topics to discuss, etc." })] })] }), t.jsxs("div", { className: "flex justify-end space-x-3 mt-6", children: [t.jsx("button", { onClick: () => k(!1), className: "px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors", children: "Cancel" }), t.jsx("button", { onClick: lr, className: "px-4 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors", children: "Schedule Meeting" })] })] }) }), t.jsx(UP, { lead: i, isOpen: E, onClose: () => C(!1), onTransferComplete: na, mode: "transfer" }), t.jsx(UP, { lead: i, isOpen: N, onClose: () => A(!1), onTransferComplete: na, mode: "assign" }), t.jsx(Y6, { isOpen: D, onClose: () => I(!1), onConvert: At, lead: i, isConverting: $ }), Ee && t.jsx("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50", onClick: () => Ge(!1), children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4", onClick: re => re.stopPropagation(), children: [t.jsxs("div", { className: "flex items-center justify-between mb-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Create New Task" }), t.jsx("button", { onClick: () => Ge(!1), className: "text-gray-400 hover:text-gray-600 dark:hover:text-gray-300", children: t.jsx(Ca, { className: "h-5 w-5" }) })] }), t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Task Title *" }), t.jsx("input", { type: "text", value: qe.title, onChange: re => vt({ ...qe, title: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Enter task title" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Description" }), t.jsx("textarea", { value: qe.description, onChange: re => vt({ ...qe, description: re.target.value }), rows: 3, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Enter task description" })] }), t.jsxs("div", { className: "grid grid-cols-2 gap-3", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Due Date" }), t.jsx("input", { type: "date", value: qe.dueDate, onChange: re => vt({ ...qe, dueDate: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Priority" }), t.jsxs("select", { value: qe.priority, onChange: re => vt({ ...qe, priority: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", children: [t.jsx("option", { value: "LOW", children: "Low" }), t.jsx("option", { value: "MEDIUM", children: "Medium" }), t.jsx("option", { value: "HIGH", children: "High" }), t.jsx("option", { value: "URGENT", children: "Urgent" })] })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Assign To" }), t.jsxs("select", { value: qe.assignedTo, onChange: re => vt({ ...qe, assignedTo: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", children: [t.jsx("option", { value: "", children: "Unassigned" }), yr.map(re => t.jsxs("option", { value: re.id, children: [re.firstName, " ", re.lastName] }, re.id))] })] })] }), t.jsxs("div", { className: "flex justify-end space-x-3 mt-6", children: [t.jsx("button", { onClick: () => { Ge(!1), vt({ title: "", description: "", dueDate: "", priority: "MEDIUM", assignedTo: "" }) }, className: "px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors", children: "Cancel" }), t.jsx("button", { onClick: async () => { if (!qe.title.trim()) { R.error("Task title is required"); return } if (!s?.id) { R.error("User information not available"); return } if (!i?.id) { R.error("Lead information not available"); return } try { let re; qe.dueDate && (re = new Date(qe.dueDate).toISOString()); const Pe = { title: qe.title, description: qe.description || void 0, status: "PENDING", priority: qe.priority, dueDate: re, assignedTo: qe.assignedTo ? Number(qe.assignedTo) : void 0, createdBy: Number(s?.id || s?.userId), leadId: Number(i.id) }, We = await gs.create(Pe); if (We.success) R.success("Task created successfully!"), Ge(!1), vt({ title: "", description: "", dueDate: "", priority: "MEDIUM", assignedTo: "" }), i?.id && (wr(i.id), $e(bt => bt + 1)), i?.id && tr(i.id); else throw new Error(We.message || "Failed to create task") } catch (re) { console.error("Error creating task:", re), R.error(re?.response?.data?.message || re?.message || "Failed to create task. Please try again.") } }, className: "px-4 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors", children: "Create Task" })] })] }) }), K && t.jsx("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50", onClick: () => Z(!1), children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4", onClick: re => re.stopPropagation(), children: [t.jsxs("div", { className: "flex items-center justify-between mb-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Add Call Log" }), t.jsx("button", { onClick: () => Z(!1), className: "text-gray-400 hover:text-gray-600 dark:hover:text-gray-300", children: t.jsx(Ca, { className: "h-5 w-5" }) })] }), t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Lead Phone Number *" }), t.jsx("input", { type: "tel", value: Ne.phoneNumber, onChange: re => fe({ ...Ne, phoneNumber: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Enter or edit phone number" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Call Type *" }), t.jsxs("select", { value: Ne.callType, onChange: re => fe({ ...Ne, callType: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", children: [t.jsx("option", { value: "OUTBOUND", children: "Outbound" }), t.jsx("option", { value: "INBOUND", children: "Inbound" })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Notes" }), t.jsx("textarea", { value: Ne.notes, onChange: re => fe({ ...Ne, notes: re.target.value }), rows: 3, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Add notes about the call" })] }), t.jsxs("div", { className: "grid grid-cols-2 gap-3", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Date" }), t.jsx("input", { type: "date", value: Ne.date, onChange: re => fe({ ...Ne, date: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Time" }), t.jsx("input", { type: "time", value: Ne.time, onChange: re => fe({ ...Ne, time: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white" })] })] }), t.jsxs("div", { className: "grid grid-cols-2 gap-3", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Duration (mins)" }), t.jsx("input", { type: "number", min: "0", value: Ne.duration, onChange: re => fe({ ...Ne, duration: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Min" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Status" }), t.jsxs("select", { value: Ne.callStatus, onChange: re => fe({ ...Ne, callStatus: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", children: [t.jsx("option", { value: "COMPLETED", children: "Completed" }), t.jsx("option", { value: "ANSWERED", children: "Answered" }), t.jsx("option", { value: "NO_ANSWER", children: "No Answer" }), t.jsx("option", { value: "BUSY", children: "Busy" }), t.jsx("option", { value: "FAILED", children: "Failed" }), t.jsx("option", { value: "RINGING", children: "Ringing" })] })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Outcome" }), t.jsxs("select", { value: Ne.outcome, onChange: re => fe({ ...Ne, outcome: re.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", children: [t.jsx("option", { value: "", children: "Select Outcome" }), t.jsx("option", { value: "Connected", children: "Connected" }), t.jsx("option", { value: "Left Voicemail", children: "Left Voicemail" }), t.jsx("option", { value: "No Answer", children: "No Answer" }), t.jsx("option", { value: "Wrong Number", children: "Wrong Number" }), t.jsx("option", { value: "Busy", children: "Busy" }), t.jsx("option", { value: "Gatekeeper", children: "Gatekeeper" }), t.jsx("option", { value: "Follow-up Scheduled", children: "Follow-up Scheduled" }), t.jsx("option", { value: "Meeting Scheduled", children: "Meeting Scheduled" }), t.jsx("option", { value: "Interested", children: "Interested" }), t.jsx("option", { value: "Not Interested", children: "Not Interested" }), t.jsx("option", { value: "Bad Timing", children: "Bad Timing" })] })] })] }), t.jsxs("div", { className: "flex justify-end space-x-3 mt-6", children: [t.jsx("button", { onClick: () => Z(!1), className: "px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors", children: "Cancel" }), t.jsx("button", { onClick: Qe, className: "px-4 py-2 text-sm font-medium text-white bg-weconnect-red rounded-lg hover:bg-red-600 transition-colors", children: "Add Call Log" })] })] }) })]
    })
}, nb = (e, r) => { const a = r.find(s => s.name.toUpperCase() === (e || "").toUpperCase()); return a && a.color ? { backgroundColor: `${a.color}20`, color: a.color, border: `1px solid ${a.color}40` } : { backgroundColor: "#f3f4f6", color: "#374151" } }, ioe = () => { const e = xt(), [r, a] = h.useState([]), [s, n] = h.useState(!0), [i, o] = h.useState(null), [c, u] = h.useState("list"), [m, g] = h.useState([]), [f, y] = h.useState(!1), [p, b] = h.useState(null), [j, v] = h.useState(!1), [S, k] = h.useState(!1), [E, C] = h.useState([]), { hasPermission: N } = mr(), { refreshDealsCount: A } = Sn(), { dealStatuses: D } = Br(), { searchValue: I, debouncedSearchValue: $, setSearch: B, isSearching: W } = ql("", 500), [M, q] = h.useState("createdAt"), [V, X] = h.useState("desc"), [se, le] = h.useState("ALL"), [ee, L] = h.useState(1), [z, T] = h.useState(10), [_, H] = h.useState(["title", "value", "company", "contact", "phone", "status", "expectedCloseDate"]); h.useEffect(() => { K(), U() }, []); const U = async () => { try { const Q = await ur.getUsers({ limit: 100 }); C(Q.data.users || []) } catch (Q) { console.error("Error fetching users:", Q) } }; h.useEffect(() => { L(1) }, [$, M, V, se, z]), h.useEffect(() => { try { const Q = localStorage.getItem("deals_visible_columns"); if (Q) { const Le = JSON.parse(Q); Array.isArray(Le) && Le.every(Ve => typeof Ve == "string") && H(Le) } } catch { } }, []), h.useEffect(() => { try { localStorage.setItem("deals_visible_columns", JSON.stringify(_)) } catch { } }, [_]); const K = async () => { try { n(!0), o(null); const Q = await ua.getDeals(1, 100, $ || void 0); a(Q.data.deals || []), await A() } catch (Q) { console.error("Error fetching deals:", Q), Q.response?.status === 404 ? o("Deal API endpoints are being set up. Please check back in a moment.") : Q.response?.status === 403 ? o("You do not have permission to view deals. Please contact your administrator.") : o(Q.response?.data?.message || "Failed to fetch deals"), a([]) } finally { n(!1) } }, Z = async (Q, Le) => { const Ve = r; a(et => et.map(pt => pt.id === Q ? { ...pt, status: Le } : pt)); try { await ua.updateDeal(Q, { status: Le }), R.success("Status updated") } catch { R.error("Failed to update status"), a(Ve) } }, J = () => { Dd("deals_template.csv", ["title", "description", "value", "currency", "status", "probability", "expectedCloseDate"], [["Sample Deal", "Sample Description", "1000", "USD", "DRAFT", "50", "2023-12-31"]]), R.success("Template downloaded") }, te = async () => { v(!0); try { const Q = await ua.bulkExportDeals($), Le = window.URL.createObjectURL(Q), Ve = document.createElement("a"); Ve.href = Le, Ve.download = `deals_export_${new Date().toISOString().slice(0, 10)}.csv`, document.body.appendChild(Ve), Ve.click(), window.URL.revokeObjectURL(Le), document.body.removeChild(Ve), R.success("Deals exported successfully") } catch { R.error("Failed to export deals") } finally { v(!1) } }, G = Q => { const Le = Q.target.files?.[0]; if (Le) { if (!Le.name.endsWith(".csv")) { R.error("Please select a CSV file"); return } b(Le) } }, de = async () => { if (!p) { R.error("Please select a file"); return } k(!0); try { const Q = await ua.bulkImportDeals(p); Q.success ? (R.success(Q.data?.message || "Import successful"), y(!1), b(null), K()) : R.error(Q.message || "Import failed") } catch (Q) { R.error(Q.response?.data?.message || "Import failed") } finally { k(!1) } }, Te = async Q => { if (!Q) return; const Le = Q === "unassigned" ? null : parseInt(Q); try { await ua.bulkAssignDeals(m, Le), a(Ve => Ve.map(et => m.includes(et.id) ? { ...et, assignedTo: Le ?? void 0 } : et)), g([]), R.success("Deals assigned successfully") } catch { R.error("Failed to assign deals") } }, He = [...r.filter(Q => { const Le = ($ || "").toLowerCase(), Ve = Q.companies?.name || Q.lead?.company || "", et = !Le || (Q.title || "").toLowerCase().includes(Le) || (Q.description || "").toLowerCase().includes(Le) || (Q.lead?.firstName || "").toLowerCase().includes(Le) || (Q.lead?.lastName || "").toLowerCase().includes(Le) || (Q.lead?.phone || "").toLowerCase().includes(Le) || Ve.toLowerCase().includes(Le); Ve.toLowerCase().includes(Le); const pt = se === "ALL" || (Q.status || "") === se; return et && pt })].sort((Q, Le) => { const Ve = V === "asc" ? 1 : -1, et = je => { switch (M) { case "title": return je.title || ""; case "value": return je.value || 0; case "expectedCloseDate": return je.expectedCloseDate || ""; case "company": return (je.companies?.name || je.lead?.company || "").toLowerCase(); case "contact": return `${je.lead?.firstName || ""} ${je.lead?.lastName || ""}`.toLowerCase(); case "phone": return je.lead?.phone || ""; case "status": return je.status || ""; case "createdAt": default: return je.createdAt || "" } }, pt = et(Q), Y = et(Le); return M === "value" ? (pt - Y) * Ve : M === "createdAt" || M === "expectedCloseDate" ? (new Date(pt).getTime() - new Date(Y).getTime()) * Ve : String(pt).localeCompare(String(Y)) * Ve }), ne = Q => { q(Le => Le === Q ? (X(Ve => Ve === "asc" ? "desc" : "asc"), Le) : (X("asc"), Q)) }, De = He.length, $e = Math.max(1, Math.ceil(De / z)), Et = (ee - 1) * z, Bt = Et + z, Ft = He.slice(Et, Bt), mt = Q => _.includes(Q), ce = Q => { switch (Q?.toLowerCase()) { case "high": case "urgent": return "bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"; case "medium": return "bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300"; case "low": return "bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"; default: return "bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300" } }, Xe = Q => { switch (Q?.toLowerCase()) { case "high": case "urgent": return "bg-gradient-to-br from-red-100 to-orange-100 dark:from-red-950/40 dark:to-orange-950/30 border-red-300 dark:border-red-800/30"; case "medium": return "bg-gradient-to-br from-amber-100 to-yellow-100 dark:from-amber-950/40 dark:to-yellow-950/30 border-amber-300 dark:border-amber-800/30"; case "low": return "bg-gradient-to-br from-blue-100 to-cyan-100 dark:from-blue-950/40 dark:to-cyan-950/30 border-blue-300 dark:border-blue-800/30"; default: return "bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700" } }, jt = Q => Q.charAt(0).toUpperCase() + Q.slice(1).toLowerCase(); return s ? t.jsx("div", { className: "flex items-center justify-center h-64", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600" }) }) : t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsx("div", { className: "space-y-4", children: t.jsx(Td, { title: "Deals", subtitle: "Track and manage your sales opportunities", addLabel: "Add Deal", onAdd: N(Ye.DEAL.CREATE) ? () => e("/leads/new") : void 0, bulkActions: [{ label: "Download Template", icon: t.jsx(ah, { className: "w-4 h-4" }), onClick: J }, { label: "Import Deals", icon: t.jsx(Ui, { className: "w-4 h-4" }), onClick: () => y(!0) }, { label: "Export Deals (CSV)", icon: t.jsx(Bo, { className: "w-4 h-4" }), onClick: te, disabled: j }] }) }), t.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-end gap-4", children: [t.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-end gap-4 flex-1", children: [t.jsxs("div", { className: "", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: t.jsxs("div", { className: "flex items-center gap-2", children: ["Search", W && t.jsx("span", { className: "text-xs text-blue-500 flex items-center gap-1", children: "Searching..." })] }) }), t.jsx(Zl, { value: I, onChange: B, placeholder: "Search deals...", className: "max-w-full" })] }), t.jsx("div", { className: "w-full sm:w-48 sm:min-w-[220px]", children: t.jsx(ra, { label: "Status", value: se, onChange: Q => le(Q), options: [{ value: "ALL", label: "All statuses" }, ...(D || []).map(Q => ({ value: Q.name, label: Q.name }))] }) }), t.jsx("div", { className: "w-full sm:w-48 sm:min-w-[220px]", children: t.jsx(ra, { label: "Sort by", value: M, onChange: Q => q(Q), options: [{ value: "createdAt", label: "Created date" }, { value: "title", label: "Title" }, { value: "value", label: "Value" }, { value: "expectedCloseDate", label: "Expected close" }] }) }), t.jsx("div", { className: "w-full sm:w-48 sm:min-w-[200px]", children: t.jsx(ra, { label: "Order", value: V, onChange: Q => X(Q), options: [{ value: "asc", label: "Ascending" }, { value: "desc", label: "Descending" }] }) }), t.jsx("div", { className: "w-full sm:w-48 sm:min-w-[200px]", children: t.jsx(ra, { label: "Items per page", value: String(z), onChange: Q => T(Number(Q)), options: [{ value: "5", label: "5" }, { value: "10", label: "10" }, { value: "20", label: "20" }, { value: "50", label: "50" }] }) })] }), t.jsxs("div", { className: "hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto", children: [t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${c === "list" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => u("list"), title: "List view", children: t.jsx(fi, { className: "w-4 h-4" }) }), t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${c === "kanban" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => u("kanban"), title: "Kanban view", children: t.jsx(hi, { className: "w-4 h-4" }) })] })] }), i && t.jsx("div", { className: "bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4", children: t.jsx("p", { className: "text-red-600 dark:text-red-400", children: i }) }), c === "kanban" ? t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 transition-all duration-300 p-6", children: [Ft.length === 0 ? t.jsx(Yr, { title: "No deals found", description: I ? "No deals match your search criteria." : "Get started by creating your first deal.", icon: t.jsx(Qr, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), showClearButton: !!I, onClear: () => B("") }) : t.jsx("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4", children: Ft.map(Q => { const Le = Q.probability || 0, Ve = Q.priority || "medium"; return t.jsxs("div", { className: `rounded-lg border shadow-sm hover:shadow-md transition-all duration-200 flex flex-col ${Xe(Ve)}`, style: { minHeight: "320px" }, children: [t.jsxs("div", { className: "px-4 pt-4 pb-2 flex items-center justify-between", children: [t.jsx("span", { className: `inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium ${ce(Ve)}`, children: jt(Ve) }), t.jsx("span", { className: "px-2 py-1 rounded-full text-xs font-medium", style: nb(Q.status || "", D), children: Q.status || "DRAFT" })] }), t.jsxs("div", { className: "px-4 pb-3 flex-1", children: [t.jsx("h3", { className: "text-sm font-semibold text-gray-900 dark:text-white mb-2  cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors", onClick: () => N(Ye.DEAL.READ) && e(`/deals/${Q.id}`), children: Q.title }), Q.description && t.jsx("p", { className: "text-xs text-gray-600 dark:text-gray-400  mb-3", children: Q.description }), t.jsxs("div", { className: "flex items-center text-sm font-semibold text-green-600 dark:text-green-400 mb-3", children: [t.jsx(Qr, { className: "h-4 w-4 mr-1 flex-shrink-0" }), t.jsx("span", { className: "truncate", children: new Intl.NumberFormat("en-US", { style: "currency", currency: Q.currency || "USD" }).format(Q.value || 0) })] }), t.jsxs("div", { className: "space-y-1.5", children: [(Q.companies?.name || Q.lead?.company) && t.jsxs("div", { className: "text-xs text-gray-600 dark:text-gray-400 flex items-center", children: [t.jsx(qi, { className: "h-3 w-3 mr-1.5 flex-shrink-0" }), t.jsx("span", { className: "truncate", children: Q.companies?.name || Q.lead?.company })] }), Q.lead && t.jsxs("div", { className: "text-xs text-gray-600 dark:text-gray-400 flex items-center", children: [t.jsx(wt, { className: "h-3 w-3 mr-1.5 flex-shrink-0" }), t.jsxs("span", { className: "truncate", children: [Q.lead.firstName, " ", Q.lead.lastName] })] })] })] }), t.jsxs("div", { className: "px-4 pb-3", children: [t.jsxs("div", { className: "flex items-center justify-between mb-1", children: [t.jsx("span", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Progress" }), t.jsxs("span", { className: "text-xs font-medium text-gray-700 dark:text-gray-300", children: [Le, "%"] })] }), t.jsx("div", { className: "w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2", children: t.jsx("div", { className: "bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full transition-all duration-300", style: { width: `${Le}%` } }) })] }), t.jsx("div", { className: "px-4 pb-4 pt-3 border-t border-gray-100 dark:border-gray-700", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [Q.assignedUser ? t.jsx("div", { className: "h-6 w-6 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center", children: t.jsxs("span", { className: "text-white text-xs font-medium", children: [Q.assignedUser.firstName?.[0] || "", Q.assignedUser.lastName?.[0] || ""] }) }) : t.jsx("div", { className: "h-6 w-6 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center", children: t.jsx(wt, { className: "h-3 w-3 text-gray-500 dark:text-gray-400" }) }), t.jsxs("div", { className: "flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400", children: [t.jsxs("div", { className: "flex items-center gap-1", children: [t.jsx(Fr, { className: "h-3 w-3" }), t.jsx("span", { children: "0" })] }), t.jsxs("div", { className: "flex items-center gap-1", children: [t.jsx(tU, { className: "h-3 w-3" }), t.jsx("span", { children: "0" })] })] })] }), t.jsxs("div", { className: "flex items-center gap-1", children: [N(Ye.DEAL.READ) && t.jsx("button", { onClick: et => { et.stopPropagation(), e(`/deals/${Q.id}`) }, className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors", title: "View Deal", children: t.jsx(Ht, { className: "h-4 w-4" }) }), N(Ye.DEAL.UPDATE) && t.jsx("button", { onClick: et => { et.stopPropagation(), e(`/deals/${Q.id}/edit`) }, className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors", title: "Edit Deal", children: t.jsx(Jt, { className: "h-4 w-4" }) }), N(Ye.DEAL.DELETE) && t.jsx("button", { onClick: async et => { if (et.stopPropagation(), !!confirm("Delete this deal?")) try { await ua.deleteDeal(Q.id), a(pt => pt.filter(Y => Y.id !== Q.id)), R.success("Deal deleted") } catch { R.error("Failed to delete") } }, className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors", title: "Delete Deal", children: t.jsx(yt, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: et => et.stopPropagation(), className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors", title: "More options", children: t.jsx(Cb, { className: "h-4 w-4" }) })] })] }) })] }, Q.id) }) }), De > 0 && t.jsx("div", { className: "mt-6", children: t.jsx(en, { currentPage: ee, totalPages: $e, totalItems: De, itemsPerPage: z, onPageChange: Q => L(Q) }) })] }) : t.jsx("div", { className: "bg-gray-100 dark:bg-gray-800 rounded-2xl shadow border border-gray-200 dark:border-gray-700 transition-all duration-300", children: t.jsxs("div", { className: "p-6", children: [t.jsx("div", { className: "mb-4", children: t.jsx(io, { currentPage: ee, itemsPerPage: z, totalItems: De, onItemsPerPageChange: Q => T(Q), columnConfig: { columns: [{ id: "title", label: "Title" }, { id: "value", label: "Value" }, { id: "company", label: "Company" }, { id: "contact", label: "Contact" }, { id: "phone", label: "Phone" }, { id: "stage", label: "Stage" }, { id: "status", label: "Status" }, { id: "expectedCloseDate", label: "Expected Close" }], visibleColumns: _, onChange: H, minVisible: 1 } }) }), m.length > 0 && t.jsxs("div", { className: "mb-4 flex items-center justify-between bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3", children: [t.jsxs("div", { className: "text-sm text-blue-800 dark:text-blue-200", children: [m.length, " selected"] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx(ra, { label: "Move to status", value: "", onChange: async Q => { const Le = Q; if (Le) try { a(Ve => Ve.map(et => m.includes(et.id) ? { ...et, status: Le } : et)), await Promise.all(m.map(Ve => ua.updateDeal(Ve, { status: Le }))), R.success("Updated selected deals"), g([]) } catch { R.error("Failed to update selected deals") } }, options: D.map(Q => ({ value: Q.name, label: Q.name })) }), t.jsx(ra, { label: "Assign to", value: "", onChange: Q => Te(Q), options: [{ value: "unassigned", label: "Unassigned" }, ...E.map(Q => ({ value: String(Q.id), label: `${Q.firstName} ${Q.lastName}` }))] }), N(Ye.DEAL.DELETE) && t.jsxs(ue, { variant: "DESTRUCTIVE", size: "SM", onClick: async () => { if (confirm("Delete selected deals?")) try { await Promise.all(m.map(Q => ua.deleteDeal(Q))), a(Q => Q.filter(Le => !m.includes(Le.id))), g([]), R.success("Deleted selected deals") } catch { R.error("Failed to delete selected deals") } }, children: [t.jsx(yt, { className: "w-4 h-4 mr-1" }), " Delete"] })] })] }), t.jsx("div", { className: "overflow-hidden relative", children: t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700 mobile-card-view table-fixed", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-gray-900", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-4 py-3", children: t.jsx("input", { type: "checkbox", checked: Ft.length > 0 && Ft.every(Q => m.includes(Q.id)), onChange: Q => { const Le = Ft.map(Ve => Ve.id); g(Q.target.checked ? Array.from(new Set([...m, ...Le])) : m.filter(Ve => !Le.includes(Ve))) } }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${mt("title") ? "" : "hidden"}`, children: t.jsx(Ua, { label: "Title", column: "title", sortBy: M, sortOrder: V, onChange: Q => ne(Q) }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${mt("value") ? "" : "hidden"}`, children: t.jsx(Ua, { label: "Value", column: "value", sortBy: M, sortOrder: V, onChange: Q => ne(Q) }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${mt("company") ? "" : "hidden"}`, children: t.jsx(Ua, { label: "Company", column: "company", sortBy: M, sortOrder: V, onChange: Q => ne(Q) }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${mt("contact") ? "" : "hidden"}`, children: t.jsx(Ua, { label: "Contact", column: "contact", sortBy: M, sortOrder: V, onChange: Q => ne(Q) }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${mt("phone") ? "" : "hidden"}`, children: t.jsx(Ua, { label: "Phone", column: "phone", sortBy: M, sortOrder: V, onChange: Q => ne(Q) }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${mt("status") ? "" : "hidden"}`, children: "Status" }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${mt("expectedCloseDate") ? "" : "hidden"}`, children: t.jsx(Ua, { label: "Expected Close", column: "expectedCloseDate", sortBy: M, sortOrder: V, onChange: Q => ne(Q) }) }), t.jsx("th", { className: "px-6 py-3 text-end text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Actions" })] }) }), t.jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: Ft.map(Q => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsx("td", { className: "px-4 py-4", "data-label": "Select", children: t.jsx("input", { type: "checkbox", checked: m.includes(Q.id), onChange: Le => { g(Ve => Le.target.checked ? [...Ve, Q.id] : Ve.filter(et => et !== Q.id)) } }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${mt("title") ? "" : "hidden"}`, "data-label": "Title", children: t.jsxs("div", { className: "flex items-start gap-3", children: [t.jsx("div", { className: "flex-shrink-0", children: t.jsx("div", { className: "h-10 w-10 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center", children: t.jsx("span", { className: "text-white font-medium text-sm", children: (Q.lead?.firstName?.[0] || Q.companies?.name?.[0] || "D").toUpperCase() }) }) }), t.jsxs("div", { className: "min-w-[12rem]", children: [t.jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: t.jsx(si, { to: `/deals/${Q.id}`, className: "text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300", children: Q.title }) }), Q.description && t.jsx("div", { className: "text-xs text-gray-500 dark:text-gray-400 truncate max-w-xs", children: Q.description })] })] }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${mt("value") ? "" : "hidden"}`, "data-label": "Value", children: t.jsxs("div", { className: "flex items-center text-sm font-semibold text-green-600 dark:text-green-400", children: [t.jsx("div", { className: "h-4 w-4 mr-1" }), new Intl.NumberFormat("en-US", { style: "currency", currency: Q.currency }).format(Q.value)] }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${mt("company") ? "" : "hidden"}`, "data-label": "Company", children: t.jsx("div", { className: "text-sm text-gray-900 dark:text-white", children: Q.companies?.name || Q.lead?.company || "-" }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${mt("contact") ? "" : "hidden"}`, "data-label": "Contact", children: t.jsxs("div", { className: "text-sm text-gray-900 dark:text-white flex items-center", children: [t.jsx(wt, { className: "h-3 w-3 mr-1" }), Q.lead ? `${Q.lead.firstName} ${Q.lead.lastName}` : "-"] }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${mt("phone") ? "" : "hidden"}`, "data-label": "Phone", children: t.jsx("div", { className: "text-sm text-gray-900 dark:text-white", children: Q.lead?.phone || "-" }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap text-sm ${mt("status") ? "" : "hidden"}`, "data-label": "Status", children: N(Ye.DEAL.UPDATE) ? t.jsx("select", { className: "text-xs px-2 py-1 rounded-md border border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500", style: nb(Q.status || "", D), value: Q.status, onChange: Le => Z(Q.id, Le.target.value), children: (D || []).filter(Le => Le.isActive).map(Le => t.jsx("option", { value: Le.name, children: Le.name }, Le.id)) }) : t.jsx("span", { className: "px-2 py-1 text-xs rounded-full", style: nb(Q.status || "", D), children: Q.status }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 ${mt("expectedCloseDate") ? "" : "hidden"}`, "data-label": "Expected Close", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx(Zt, { className: "h-3 w-3 mr-1" }), Q.expectedCloseDate ? new Date(Q.expectedCloseDate).toLocaleDateString() : "-"] }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-end text-sm font-medium", "data-label": "Actions", children: t.jsxs("div", { className: "flex items-center justify-end space-x-2", children: [N(Ye.DEAL.READ) && t.jsx(si, { to: `/deals/${Q.id}`, className: "text-green-600 hover:text-green-900 p-1 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors", title: "View Deal", children: t.jsx(Ht, { className: "h-4 w-4" }) }), N(Ye.DEAL.UPDATE) && t.jsx(si, { to: `/deals/${Q.id}/edit`, className: "text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors", title: "Edit Deal", children: t.jsx(Jt, { className: "h-4 w-4" }) }), N(Ye.DEAL.DELETE) && t.jsx("button", { className: "text-red-600 hover:text-red-900 p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors", title: "Delete Deal", onClick: async () => { if (confirm("Delete this deal?")) try { await ua.deleteDeal(Q.id), a(Le => Le.filter(Ve => Ve.id !== Q.id)), R.success("Deal deleted") } catch { R.error("Failed to delete") } }, children: t.jsx(yt, { className: "h-4 w-4" }) })] }) })] }, Q.id)) })] }) }) }), De > 0 && t.jsx(en, { currentPage: ee, totalPages: $e, totalItems: De, itemsPerPage: z, onPageChange: Q => L(Q) })] }) }), De === 0 && !s && t.jsx(Yr, { title: "No deals found", description: I ? "No deals match your search criteria." : "Get started by creating your first deal.", icon: t.jsx(Qr, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), showClearButton: !!I, onClear: () => B("") }), f && t.jsx("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200", children: [t.jsxs("div", { className: "p-6 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Import Deals" }), t.jsx("button", { onClick: () => y(!1), className: "text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition-colors", children: t.jsx("div", { className: "h-6 w-6 rounded-full flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-700", children: t.jsx("span", { className: "text-xl", children: "" }) }) })] }), t.jsxs("div", { className: "p-6 space-y-4", children: [t.jsxs("div", { className: "text-sm text-gray-600 dark:text-gray-400", children: [t.jsxs("p", { children: ["Upload a CSV file with your deals data. Make sure it contains at least ", t.jsx("strong", { children: "title" }), " and ", t.jsx("strong", { children: "value" }), " columns."] }), t.jsxs("button", { onClick: J, className: "mt-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 flex items-center gap-1 font-medium", children: [t.jsx(ah, { className: "w-4 h-4" }), "Download CSV Template"] })] }), t.jsxs("div", { className: "mt-4", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Select CSV File" }), t.jsxs("div", { className: `border-2 border-dashed rounded-xl p-8 text-center transition-all ${p ? "border-green-300 bg-green-50 dark:border-green-800 dark:bg-green-900/10" : "border-gray-300 hover:border-blue-400 dark:border-gray-600"}`, children: [t.jsx("input", { type: "file", accept: ".csv", onChange: G, className: "hidden", id: "deal-import-input" }), t.jsxs("label", { htmlFor: "deal-import-input", className: "cursor-pointer group", children: [t.jsx(Ui, { className: `mx-auto h-12 w-12 mb-3 transition-colors ${p ? "text-green-500" : "text-gray-400 group-hover:text-blue-500"}` }), t.jsx("span", { className: "mt-2 block text-sm font-medium text-gray-900 dark:text-white", children: p ? p.name : "Click to upload or drag and drop" }), t.jsx("span", { className: "mt-1 block text-xs text-gray-500 dark:text-gray-400", children: "CSV files only (max. 10MB)" })] })] })] })] }), t.jsxs("div", { className: "p-6 bg-gray-50 dark:bg-gray-800/50 flex gap-3", children: [t.jsx("button", { type: "button", onClick: () => y(!1), className: "flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors font-medium", children: "Cancel" }), t.jsx("button", { type: "button", onClick: de, disabled: !p || S, className: "flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium shadow-sm shadow-blue-200 dark:shadow-none disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2", children: S ? t.jsxs(t.Fragment, { children: [t.jsx("div", { className: "h-4 w-4 border-2 border-white/30 border-t-white rounded-full animate-spin" }), "Importing..."] }) : "Import Deals" })] })] }) })] }) }, ooe = ({ entityType: e, entityId: r, communications: a, callLogs: s }) => { const { hasPermission: n } = mr(), [i, o] = h.useState("communications"); return t.jsxs("div", { className: "space-y-6", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("h2", { className: "text-xl font-semibold text-gray-900 dark:text-white", children: "Communication Center" }), n(`${e}.create`) && t.jsxs(ue, { className: "flex items-center gap-2", children: [t.jsx($t, { size: 16 }), "New Communication"] })] }), t.jsx("div", { className: "border-b border-gray-200 dark:border-gray-700", children: t.jsx("nav", { className: "-mb-px flex space-x-8", children: [{ id: "communications", label: "Communications", icon: Fr }, { id: "calls", label: "Call Logs", icon: ma }].map(c => { const u = c.icon; return t.jsxs("button", { onClick: () => o(c.id), className: `py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${i === c.id ? "border-weconnect-red text-weconnect-red" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`, children: [t.jsx(u, { size: 16 }), c.label] }, c.id) }) }) }), i === "communications" && t.jsx("div", { className: "space-y-4", children: a.length === 0 ? t.jsxs(Ae, { className: "p-8 text-center", children: [t.jsx(Fr, { size: 48, className: "mx-auto text-gray-400 dark:text-gray-600 mb-4" }), t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: "No Communications Yet" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: "Start tracking communications to build a comprehensive history." }), n(`${e}.create`) && t.jsx(ue, { children: "Add Communication" })] }) : a.map(c => { const u = c.direction === "inbound"; return t.jsx(Ae, { className: `p-4 ${u ? "border-l-4 border-l-green-500 bg-green-50/50 dark:bg-green-900/10" : "border-l-4 border-l-blue-500 bg-blue-50/50 dark:bg-blue-900/10"}`, children: t.jsxs("div", { className: "flex items-start space-x-4", children: [t.jsxs("div", { className: `w-10 h-10 rounded-lg flex items-center justify-center ${u ? "bg-green-100 dark:bg-green-900" : "bg-blue-100 dark:bg-blue-900"}`, children: [c.type === "CALL" && t.jsx(ma, { size: 20, className: u ? "text-green-600 dark:text-green-300" : "text-blue-600 dark:text-blue-300" }), c.type === "EMAIL" && t.jsx(ir, { size: 20, className: u ? "text-green-600 dark:text-green-300" : "text-blue-600 dark:text-blue-300" }), c.type === "WHATSAPP" && t.jsx(Z9, { size: 20, className: u ? "text-green-600 dark:text-green-300" : "text-blue-600 dark:text-blue-300" }), c.type !== "CALL" && c.type !== "EMAIL" && c.type !== "WHATSAPP" && t.jsx(Fr, { size: 20, className: u ? "text-green-600 dark:text-green-300" : "text-blue-600 dark:text-blue-300" })] }), t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center justify-between mb-2", children: [t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: c.subject || c.type }), t.jsx("span", { className: `inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${u ? "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300" : "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"}`, children: u ? t.jsxs(t.Fragment, { children: [t.jsx($9, { size: 12 }), "Received"] }) : t.jsxs(t.Fragment, { children: [t.jsx(F9, { size: 12 }), "Sent"] }) })] }), t.jsx("span", { className: "text-sm text-gray-500 dark:text-gray-400", children: new Date(c.createdAt).toLocaleString() })] }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-2 whitespace-pre-wrap", children: c.content }), c.user && t.jsxs("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: [u ? "from" : "by", " ", c.user.firstName, " ", c.user.lastName] })] })] }) }, c.id) }) }), i === "calls" && t.jsx("div", { className: "space-y-4", children: s.length === 0 ? t.jsxs(Ae, { className: "p-8 text-center", children: [t.jsx(ma, { size: 48, className: "mx-auto text-gray-400 dark:text-gray-600 mb-4" }), t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: "No Call Logs Yet" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: "Call logs will appear here when you make or receive calls." }), n(`${e}.create`) && t.jsx(ue, { children: "Log Call" })] }) : s.map(c => t.jsxs(Ae, { className: "p-4", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center space-x-4", children: [t.jsx(ma, { size: 20, className: `${c.callType === "INBOUND" ? "text-green-600" : "text-blue-600"}` }), t.jsxs("div", { children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: c.phoneNumber }), t.jsxs("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: [c.callType, "  ", c.duration ? `${Math.floor(c.duration / 60)}m ${c.duration % 60}s` : "No duration"] })] })] }), t.jsx("span", { className: "text-sm text-gray-500 dark:text-gray-400", children: new Date(c.createdAt).toLocaleDateString() })] }), c.notes && t.jsx("div", { className: "mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg", children: t.jsx("p", { className: "text-sm text-gray-700 dark:text-gray-300", children: c.notes }) })] }, c.id)) })] }) }, loe = ({ entityType: e, entityId: r, payments: a, invoices: s, currency: n }) => { const { user: i, hasPermission: o } = mr(), { formatCurrency: c, getCurrency: u } = Br(), m = xt(), [g, f] = h.useState(a), [y, p] = h.useState(s), [b, j] = h.useState("overview"), [v, S] = h.useState(""), [k, E] = h.useState("all"), [C, N] = h.useState(!1), [A, D] = h.useState(!1), [I, $] = h.useState(null); h.useEffect(() => { f(a) }, [a]), h.useEffect(() => { p(s) }, [s]); const B = async U => { if (window.confirm("Are you sure you want to delete this payment? This action cannot be undone.")) try { await ie.delete(`/payments/${U}`), f(K => K.filter(Z => Z.id !== U)), R.success("Payment deleted successfully") } catch (K) { console.error("Failed to delete payment:", K), R.error(K?.response?.data?.message || "Failed to delete payment") } finally { $(null) } }, W = n || y?.[0]?.currency || u(), [M, q] = h.useState({ amount: "", currency: W, paymentMethod: "CASH", paymentDate: new Date().toISOString().slice(0, 10), reference: "", notes: "", invoiceId: "" }), V = y.reduce((U, K) => U + K.totalAmount, 0), X = y.reduce((U, K) => U + K.paidAmount, 0), se = y.reduce((U, K) => U + K.dueAmount, 0), le = y.filter(U => U.dueDate && new Date(U.dueDate) < new Date && ["SENT", "VIEWED", "PARTIALLY_PAID"].includes(U.status)), ee = U => ({ CASH: B9, BANK_TRANSFER: xn, CREDIT_CARD: xn, DEBIT_CARD: xn, PAYPAL: xn, STRIPE: xn, RAZORPAY: xn, UPI: xn, CHEQUE: $i, OTHER: Qr })[U] || Qr, L = (U, K) => { if (K === "payment") { const Z = { PENDING: "text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-300", PROCESSING: "text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300", COMPLETED: "text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300", FAILED: "text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300", CANCELLED: "text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300", REFUNDED: "text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-300" }; return Z[U] || Z.PENDING } else { const Z = { DRAFT: "text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300", SENT: "text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300", VIEWED: "text-indigo-600 bg-indigo-100 dark:bg-indigo-900 dark:text-indigo-300", PAID: "text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300", PARTIALLY_PAID: "text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-300", OVERDUE: "text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300", CANCELLED: "text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300", REFUNDED: "text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-300" }; return Z[U] || Z.DRAFT } }, z = (U, K) => { if (K === "payment") switch (U) { case "COMPLETED": return t.jsx(ut, { size: 16, className: "text-green-600" }); case "PROCESSING": return t.jsx(Kt, { size: 16, className: "text-blue-600" }); case "FAILED": return t.jsx(dr, { size: 16, className: "text-red-600" }); default: return t.jsx(Kt, { size: 16, className: "text-yellow-600" }) } else switch (U) { case "PAID": return t.jsx(ut, { size: 16, className: "text-green-600" }); case "OVERDUE": return t.jsx(dr, { size: 16, className: "text-red-600" }); case "PARTIALLY_PAID": return t.jsx(Kt, { size: 16, className: "text-orange-600" }); default: return t.jsx(Mt, { size: 16, className: "text-gray-600" }) } }, T = U => new Date(U) < new Date, _ = g.filter(U => { const K = v === "" || U.paymentNumber.toLowerCase().includes(v.toLowerCase()) || U.reference?.toLowerCase().includes(v.toLowerCase()), Z = k === "all" || U.status === k; return K && Z }), H = y.filter(U => { const K = v === "" || U.invoiceNumber.toLowerCase().includes(v.toLowerCase()) || U.title.toLowerCase().includes(v.toLowerCase()), Z = k === "all" || U.status === k; return K && Z }); return t.jsxs("div", { className: "space-y-6", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("h2", { className: "text-xl font-semibold text-gray-900 dark:text-white", children: "Payment Tracker" }), t.jsx("div", { className: "flex items-center space-x-3", children: o(`${e}.create`) && t.jsxs(t.Fragment, { children: [t.jsxs(ue, { variant: "OUTLINE", className: "flex items-center gap-2", onClick: () => m(`/invoices/new?entityType=${e}&entityId=${r}`), children: [t.jsx(Mt, { size: 16 }), "Create Invoice"] }), t.jsxs(ue, { className: "flex items-center gap-2", onClick: () => N(!0), children: [t.jsx($t, { size: 16 }), "Record Payment"] })] }) })] }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: [t.jsx(Ae, { className: "p-6", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx("div", { className: "w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center", children: t.jsx(Mt, { className: "w-6 h-6 text-blue-600 dark:text-blue-300" }) }), t.jsxs("div", { className: "ml-4", children: [t.jsx("h3", { className: "text-sm font-medium text-gray-500 dark:text-gray-400", children: "Total Invoiced" }), t.jsx("p", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: c(V, W) })] })] }) }), t.jsx(Ae, { className: "p-6", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx("div", { className: "w-12 h-12 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center", children: t.jsx(ut, { className: "w-6 h-6 text-green-600 dark:text-green-300" }) }), t.jsxs("div", { className: "ml-4", children: [t.jsx("h3", { className: "text-sm font-medium text-gray-500 dark:text-gray-400", children: "Total Paid" }), t.jsx("p", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: c(X, W) })] })] }) }), t.jsx(Ae, { className: "p-6", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx("div", { className: "w-12 h-12 bg-orange-100 dark:bg-orange-900 rounded-lg flex items-center justify-center", children: t.jsx(Kt, { className: "w-6 h-6 text-orange-600 dark:text-orange-300" }) }), t.jsxs("div", { className: "ml-4", children: [t.jsx("h3", { className: "text-sm font-medium text-gray-500 dark:text-gray-400", children: "Outstanding" }), t.jsx("p", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: c(se, W) })] })] }) }), t.jsx(Ae, { className: "p-6", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx("div", { className: "w-12 h-12 bg-red-100 dark:bg-red-900 rounded-lg flex items-center justify-center", children: t.jsx(dr, { className: "w-6 h-6 text-red-600 dark:text-red-300" }) }), t.jsxs("div", { className: "ml-4", children: [t.jsx("h3", { className: "text-sm font-medium text-gray-500 dark:text-gray-400", children: "Overdue" }), t.jsx("p", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: le.length })] })] }) })] }), t.jsx("div", { className: "border-b border-gray-200 dark:border-gray-700", children: t.jsx("nav", { className: "-mb-px flex space-x-8", children: [{ id: "overview", label: "Overview", icon: Ea }, { id: "invoices", label: "Invoices", icon: Mt }, { id: "payments", label: "Payments", icon: xn }].map(U => { const K = U.icon; return t.jsxs("button", { onClick: () => j(U.id), className: `py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${b === U.id ? "border-weconnect-red text-weconnect-red" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`, children: [t.jsx(K, { size: 16 }), U.label] }, U.id) }) }) }), b === "overview" && t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [t.jsxs(Ae, { className: "p-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "Payment Summary" }), V > 0 ? t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "flex justify-between text-sm", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Payment Progress" }), t.jsxs("span", { children: [Math.round(X / V * 100), "%"] })] }), t.jsx("div", { className: "w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2", children: t.jsx("div", { className: "h-2 bg-green-600 rounded-full transition-all duration-300", style: { width: `${X / V * 100}%` } }) }), t.jsxs("div", { className: "grid grid-cols-2 gap-4 text-sm", children: [t.jsxs("div", { children: [t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "Paid" }), t.jsx("p", { className: "font-semibold text-green-600", children: c(X, u()) })] }), t.jsxs("div", { children: [t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "Outstanding" }), t.jsx("p", { className: "font-semibold text-orange-600", children: c(se, u()) })] })] })] }) : t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "No invoices created yet." })] }), t.jsxs(Ae, { className: "p-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "Recent Activity" }), t.jsxs("div", { className: "space-y-3", children: [g.slice(0, 5).map(U => t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center space-x-3", children: [t.jsx("div", { className: `w-2 h-2 rounded-full ${U.status === "COMPLETED" ? "bg-green-500" : U.status === "FAILED" ? "bg-red-500" : "bg-yellow-500"}` }), t.jsxs("div", { children: [t.jsxs("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: ["Payment ", U.paymentNumber] }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: new Date(U.paymentDate).toLocaleDateString() })] })] }), t.jsx("span", { className: "text-sm font-medium text-gray-900 dark:text-white", children: c(U.amount, U.currency) })] }, U.id)), g.length === 0 && t.jsx("p", { className: "text-gray-600 dark:text-gray-400 text-sm", children: "No payments recorded yet." })] })] })] }), b === "invoices" && t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "flex items-center space-x-4", children: [t.jsxs("div", { className: "relative", children: [t.jsx(Xr, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400", size: 16 }), t.jsx("input", { type: "text", placeholder: "Search invoices...", value: v, onChange: U => S(U.target.value), className: "pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent" })] }), t.jsxs("select", { value: k, onChange: U => E(U.target.value), className: "px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent", children: [t.jsx("option", { value: "all", children: "All Status" }), t.jsx("option", { value: "DRAFT", children: "Draft" }), t.jsx("option", { value: "SENT", children: "Sent" }), t.jsx("option", { value: "PAID", children: "Paid" }), t.jsx("option", { value: "OVERDUE", children: "Overdue" })] })] }), H.length === 0 ? t.jsxs(Ae, { className: "p-8 text-center", children: [t.jsx(Mt, { size: 48, className: "mx-auto text-gray-400 dark:text-gray-600 mb-4" }), t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: "No Invoices Found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: "Create your first invoice to start tracking payments." }), o(`${e}.create`) && t.jsx(ue, { onClick: () => m(`/invoices/new?entityType=${e}&entityId=${r}`), children: "Create Invoice" })] }) : t.jsx("div", { className: "space-y-4", children: H.map(U => t.jsx(Ae, { className: "p-4 hover:shadow-lg transition-shadow", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center space-x-4", children: [t.jsx("div", { children: z(U.status, "invoice") }), t.jsxs("div", { children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: U.invoiceNumber }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: U.title }), t.jsxs("div", { className: "flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400 mt-1", children: [t.jsxs("span", { children: ["Created: ", new Date(U.createdAt).toLocaleDateString()] }), U.dueDate && t.jsxs("span", { className: T(U.dueDate) ? "text-red-600 font-medium" : "", children: ["Due: ", new Date(U.dueDate).toLocaleDateString()] })] })] })] }), t.jsxs("div", { className: "text-right", children: [t.jsxs("div", { className: "flex items-center space-x-3 mb-2", children: [t.jsx("span", { className: `px-2 py-1 text-xs font-medium rounded-full ${L(U.status, "invoice")}`, children: U.status.replace("_", " ") }), t.jsx("span", { className: "text-lg font-bold text-gray-900 dark:text-white", children: c(U.totalAmount, U.currency) })] }), U.status === "PARTIALLY_PAID" && t.jsxs("div", { className: "text-sm", children: [t.jsxs("span", { className: "text-green-600", children: ["Paid: ", c(U.paidAmount, U.currency)] }), t.jsxs("span", { className: "text-orange-600 ml-2", children: ["Due: ", c(U.dueAmount, U.currency)] })] }), t.jsxs("div", { className: "flex items-center space-x-2 mt-2", children: [t.jsx(ue, { size: "SM", variant: "GHOST", children: t.jsx(Ht, { size: 14 }) }), t.jsx(ue, { size: "SM", variant: "GHOST", children: t.jsx(ys, { size: 14 }) }), t.jsx(ue, { size: "SM", variant: "GHOST", children: t.jsx(Cb, { size: 14 }) })] })] })] }) }, U.id)) })] }), b === "payments" && t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "flex items-center space-x-4", children: [t.jsxs("div", { className: "relative", children: [t.jsx(Xr, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400", size: 16 }), t.jsx("input", { type: "text", placeholder: "Search payments...", value: v, onChange: U => S(U.target.value), className: "pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent" })] }), t.jsxs("select", { value: k, onChange: U => E(U.target.value), className: "px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-weconnect-red focus:border-transparent", children: [t.jsx("option", { value: "all", children: "All Status" }), t.jsx("option", { value: "PENDING", children: "Pending" }), t.jsx("option", { value: "PROCESSING", children: "Processing" }), t.jsx("option", { value: "COMPLETED", children: "Completed" }), t.jsx("option", { value: "FAILED", children: "Failed" })] })] }), _.length === 0 ? t.jsxs(Ae, { className: "p-8 text-center", children: [t.jsx(xn, { size: 48, className: "mx-auto text-gray-400 dark:text-gray-600 mb-4" }), t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: "No Payments Found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: "Record your first payment to start tracking transactions." }), o(`${e}.create`) && t.jsx(ue, { onClick: () => N(!0), children: "Record Payment" })] }) : t.jsx("div", { className: "space-y-4", children: _.map(U => { const K = ee(U.paymentMethod); return t.jsx(Ae, { className: "p-4 hover:shadow-lg transition-shadow", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center space-x-4", children: [t.jsx("div", { className: "w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center", children: t.jsx(K, { size: 20, className: "text-gray-600 dark:text-gray-400" }) }), t.jsxs("div", { children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: U.paymentNumber }), t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: [U.paymentMethod.replace("_", " "), "  ", new Date(U.paymentDate).toLocaleDateString()] }), U.reference && t.jsxs("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: ["Ref: ", U.reference] })] })] }), t.jsxs("div", { className: "text-right", children: [t.jsxs("div", { className: "flex items-center space-x-3 mb-2", children: [t.jsxs("span", { className: `px-2 py-1 text-xs font-medium rounded-full ${L(U.status, "payment")}`, children: [z(U.status, "payment"), t.jsx("span", { className: "ml-1", children: U.status })] }), t.jsx("span", { className: "text-lg font-bold text-gray-900 dark:text-white", children: c(U.amount, U.currency) })] }), t.jsxs("div", { className: "flex items-center space-x-2", children: [U.receiptUrl && t.jsx(ue, { size: "SM", variant: "GHOST", children: t.jsx($i, { size: 14 }) }), t.jsx(ue, { size: "SM", variant: "GHOST", children: t.jsx(Ht, { size: 14 }) }), t.jsxs("div", { className: "relative", children: [t.jsx(ue, { size: "SM", variant: "GHOST", onClick: () => $(I === U.id ? null : U.id), children: t.jsx(Cb, { size: 14 }) }), I === U.id && t.jsx("div", { className: "absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-10 overflow-hidden", children: t.jsxs("button", { className: "w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2 transition-colors", onClick: () => B(U.id), children: [t.jsx(yt, { size: 14 }), "Delete Payment"] }) })] })] })] })] }) }, U.id) }) })] }), C && t.jsx("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm", children: t.jsxs("div", { className: "w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 p-6", children: [t.jsx("h3", { className: "text-xl font-semibold text-gray-900 dark:text-white mb-5", children: "Record Payment" }), y.length === 0 ? t.jsxs("div", { className: "text-center py-8", children: [t.jsx(dr, { size: 48, className: "mx-auto text-yellow-500 mb-4" }), t.jsx("h4", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: "No Invoices Found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-6", children: "You need to create an invoice before you can record a payment. Payments must be linked to a specific invoice." }), t.jsxs("div", { className: "flex justify-center gap-3", children: [t.jsx(ue, { variant: "OUTLINE", onClick: () => N(!1), children: "Close" }), t.jsx(ue, { onClick: () => { N(!1), m(`/invoices/new?entityType=${e}&entityId=${r}`) }, children: "Create Invoice" })] })] }) : t.jsxs(t.Fragment, { children: [t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm text-gray-600 dark:text-gray-300 mb-1", children: "Amount" }), t.jsx("input", { type: "number", value: M.amount, onChange: U => q({ ...M, amount: U.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm", placeholder: "0.00" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm text-gray-600 dark:text-gray-300 mb-1", children: "Currency" }), t.jsx("input", { type: "text", value: M.currency, onChange: U => q({ ...M, currency: U.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm text-gray-600 dark:text-gray-300 mb-1", children: "Method" }), t.jsxs("select", { value: M.paymentMethod, onChange: U => q({ ...M, paymentMethod: U.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm", children: [t.jsx("option", { value: "CASH", children: "Cash" }), t.jsx("option", { value: "BANK_TRANSFER", children: "Bank Transfer" }), t.jsx("option", { value: "CREDIT_CARD", children: "Credit Card" }), t.jsx("option", { value: "DEBIT_CARD", children: "Debit Card" }), t.jsx("option", { value: "PAYPAL", children: "PayPal" }), t.jsx("option", { value: "STRIPE", children: "Stripe" }), t.jsx("option", { value: "RAZORPAY", children: "Razorpay" }), t.jsx("option", { value: "UPI", children: "UPI" }), t.jsx("option", { value: "CHEQUE", children: "Cheque" }), t.jsx("option", { value: "OTHER", children: "Other" })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm text-gray-600 dark:text-gray-300 mb-1", children: "Payment Date" }), t.jsx("input", { type: "date", value: M.paymentDate, onChange: U => q({ ...M, paymentDate: U.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm" })] }), t.jsxs("div", { className: "md:col-span-2", children: [t.jsx("label", { className: "block text-sm text-gray-600 dark:text-gray-300 mb-1", children: "Reference" }), t.jsx("input", { type: "text", value: M.reference, onChange: U => q({ ...M, reference: U.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm", placeholder: "Transaction ID, cheque no, etc." })] }), t.jsxs("div", { className: "md:col-span-2", children: [t.jsx("label", { className: "block text-sm text-gray-600 dark:text-gray-300 mb-1", children: "Notes" }), t.jsx("textarea", { rows: 3, value: M.notes, onChange: U => q({ ...M, notes: U.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm", placeholder: "Optional notes" })] }), t.jsxs("div", { className: "md:col-span-2", children: [t.jsxs("label", { className: "block text-sm text-gray-600 dark:text-gray-300 mb-1", children: ["Invoice Number ", t.jsx("span", { className: "text-red-500", children: "*" })] }), t.jsxs("select", { value: M.invoiceId, onChange: U => { const K = U.target.value; q({ ...M, invoiceId: K }); const Z = y.find(J => String(J.id) === K); Z && Z.dueAmount > 0 && (!M.amount || Number(M.amount) <= 0) && q(J => ({ ...J, amount: String(Z.dueAmount) })) }, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm", children: [t.jsx("option", { value: "", children: "-- Select invoice --" }), y.filter(U => (U.dueAmount ?? Math.max(U.totalAmount - (U.paidAmount || 0), 0)) > 0).map(U => t.jsxs("option", { value: String(U.id), children: [U.invoiceNumber, "  Due ", c(U.dueAmount ?? Math.max(U.totalAmount - (U.paidAmount || 0), 0), U.currency)] }, String(U.id)))] })] })] }), t.jsxs("div", { className: "mt-6 flex items-center gap-3 justify-end", children: [t.jsx(ue, { variant: "OUTLINE", onClick: () => N(!1), className: "border-red-200 text-red-600 hover:bg-red-50 hover:border-red-300", children: "Cancel" }), t.jsx(ue, { onClick: async () => { try { if (!M.invoiceId) { R.error("Please select an invoice number"); return } if (!M.amount || Number(M.amount) <= 0) { R.error("Enter a valid amount"); return } D(!0); const U = { amount: Number(M.amount), currency: M.currency, paymentMethod: M.paymentMethod, paymentDate: new Date(M.paymentDate).toISOString(), reference: M.reference || void 0, notes: M.notes || void 0, entityType: e, entityId: Number(r), invoiceId: Number(M.invoiceId) }; e === "deal" && (U.dealId = Number(r)), e === "lead" && (U.leadId = Number(r)); const K = await ie.post("/payments", U), Z = K?.data?.data?.payment || K?.data?.payment || K?.data; Z && (f(J => [{ id: String(Z.id || Date.now()), paymentNumber: Z.paymentNumber || `PMT-${Z.id || Date.now()}`, amount: Number(Z.amount), currency: Z.currency || M.currency, paymentMethod: Z.paymentMethod || M.paymentMethod, paymentDate: Z.paymentDate || new Date().toISOString(), status: Z.status || "COMPLETED", reference: Z.reference, notes: Z.notes, receiptUrl: Z.receiptUrl, createdBy: Z.createdBy || { id: String(i?.id || "0"), firstName: i?.firstName || "", lastName: i?.lastName || "" }, createdAt: Z.createdAt || new Date().toISOString() }, ...J]), R.success("Payment recorded"), onPaymentSaved?.(), N(!1), q({ amount: "", currency: W, paymentMethod: "CASH", paymentDate: new Date().toISOString().slice(0, 10), reference: "", notes: "", invoiceId: "" })) } catch (U) { R.error(U?.response?.data?.message || "Failed to record payment") } finally { D(!1) } }, disabled: A, className: "bg-weconnect-red hover:bg-red-600 text-white", children: A ? "Saving..." : "Save Payment" })] })] })] }) })] }) }, coe = ({ entityType: e, entityId: r, notifications: a }) => { const { hasPermission: s } = mr(), [n, i] = h.useState(a), [o, c] = h.useState("all"), u = v => ({ LEAD_ASSIGNED: Kt, DEAL_CREATED: ut, DEAL_WON: ut, DEAL_LOST: fa, TASK_DUE: Ol, FOLLOW_UP_DUE: Kt, PAYMENT_RECEIVED: ut, QUOTE_ACCEPTED: ut, INVOICE_OVERDUE: Ol, SYSTEM_ALERT: Ol, REMINDER: Bl, OTHER: D2 })[v] || D2, m = (v, S) => S === "URGENT" ? "text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300" : S === "HIGH" ? "text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-300" : { DEAL_WON: "text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300", PAYMENT_RECEIVED: "text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300", QUOTE_ACCEPTED: "text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300", DEAL_LOST: "text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300", INVOICE_OVERDUE: "text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300", TASK_DUE: "text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-300", SYSTEM_ALERT: "text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300", OTHER: "text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300" }[v] || "text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300", g = v => { const S = { LOW: "text-gray-600", NORMAL: "text-blue-600", HIGH: "text-orange-600", URGENT: "text-red-600" }; return S[v] || S.NORMAL }, f = async v => { i(S => S.map(k => k.id === v ? { ...k, isRead: !0, readAt: new Date().toISOString() } : k)) }, y = async () => { i(v => v.map(S => ({ ...S, isRead: !0, readAt: new Date().toISOString() }))) }, p = n.filter(v => o === "unread" ? !v.isRead : o === "urgent" ? v.priority === "URGENT" : o === "high" ? v.priority === "HIGH" : !0), b = n.filter(v => !v.isRead).length, j = n.filter(v => v.priority === "URGENT").length; return t.jsxs("div", { className: "space-y-6", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h2", { className: "text-xl font-semibold text-gray-900 dark:text-white", children: "Notifications" }), t.jsxs("div", { className: "flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mt-1", children: [t.jsxs("span", { children: [n.length, " total"] }), b > 0 && t.jsxs("span", { className: "text-blue-600 font-medium", children: [b, " unread"] }), j > 0 && t.jsxs("span", { className: "text-red-600 font-medium", children: [j, " urgent"] })] })] }), b > 0 && t.jsx(ue, { variant: "OUTLINE", onClick: y, children: "Mark All Read" })] }), t.jsx("div", { className: "flex items-center space-x-4", children: [{ id: "all", label: "All", count: n.length }, { id: "unread", label: "Unread", count: b }, { id: "urgent", label: "Urgent", count: j }, { id: "high", label: "High Priority", count: n.filter(v => v.priority === "HIGH").length }].map(v => t.jsxs("button", { onClick: () => c(v.id), className: `px-3 py-1 text-sm font-medium rounded-full transition-colors ${o === v.id ? "bg-weconnect-red text-white" : "text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`, children: [v.label, v.count > 0 && t.jsxs("span", { className: "ml-1 text-xs", children: ["(", v.count, ")"] })] }, v.id)) }), t.jsx("div", { className: "space-y-3", children: p.length === 0 ? t.jsxs(Ae, { className: "p-8 text-center", children: [t.jsx(Bl, { size: 48, className: "mx-auto text-gray-400 dark:text-gray-600 mb-4" }), t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: o === "all" ? "No Notifications" : `No ${o} notifications` }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: o === "all" ? "All notifications will appear here when you have activity." : `You don't have any ${o} notifications at the moment.` })] }) : p.map(v => { const S = u(v.type), k = m(v.type, v.priority); return t.jsx(Ae, { className: `p-4 cursor-pointer hover:shadow-lg transition-shadow ${v.isRead ? "" : "border-l-4 border-l-weconnect-red bg-blue-50/30 dark:bg-blue-900/10"}`, onClick: () => !v.isRead && f(v.id), children: t.jsxs("div", { className: "flex items-start space-x-4", children: [t.jsx("div", { className: `w-10 h-10 rounded-lg flex items-center justify-center ${k}`, children: t.jsx(S, { size: 20 }) }), t.jsx("div", { className: "flex-1 min-w-0", children: t.jsx("div", { className: "flex items-start justify-between", children: t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center space-x-2 mb-1", children: [t.jsx("h3", { className: `text-base font-semibold ${v.isRead ? "text-gray-700 dark:text-gray-300" : "text-gray-900 dark:text-white"}`, children: v.title }), v.priority !== "NORMAL" && t.jsx("span", { className: `text-xs font-medium ${g(v.priority)}`, children: v.priority }), !v.isRead && t.jsx("div", { className: "w-2 h-2 bg-weconnect-red rounded-full" })] }), t.jsx("p", { className: `text-sm mb-2 ${v.isRead ? "text-gray-600 dark:text-gray-400" : "text-gray-700 dark:text-gray-300"}`, children: v.message }), t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("span", { className: "text-xs text-gray-500 dark:text-gray-400", children: [new Date(v.createdAt).toLocaleDateString(), " at ", new Date(v.createdAt).toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" })] }), v.actionUrl && t.jsx(ue, { size: "SM", variant: "GHOST", className: "text-xs", children: "View Details" })] })] }) }) })] }) }, v.id) }) }), p.length > 0 && p.length >= 20 && t.jsx("div", { className: "text-center", children: t.jsx(ue, { variant: "OUTLINE", children: "Load More Notifications" }) })] }) }, doe = () => { const { id: e } = gi(), r = xt(), { formatCurrency: a, getDealStages: s, getCurrency: n } = Br(), { user: i, hasPermission: o } = mr(), [c, u] = h.useState(null), [m, g] = h.useState(!0), [f, y] = vm(), p = f.get("tab") || "overview", [b, j] = h.useState(p), [v, S] = h.useState(!1), [k, E] = h.useState(!1), [C, N] = h.useState(null), [A, D] = h.useState(!1), [I, $] = h.useState([]), [B, W] = h.useState([]), [M, q] = h.useState([]), [V, X] = h.useState([]), [se, le] = h.useState([]), [ee, L] = h.useState([]), [z, T] = h.useState([]), [_, H] = h.useState([]), [U, K] = h.useState(!1), [Z, J] = h.useState(!1), [te, G] = h.useState(!1), [de, Te] = h.useState(!1), [pe, He] = h.useState(!1), ne = [{ id: "overview", label: "Overview", icon: Ht }, { id: "pipeline", label: "Pipeline Progress", icon: Ea }, { id: "quotations", label: "Quotes & Proposals", icon: Mt }, { id: "activities", label: "Sales Activities", icon: Qc }, { id: "tasks", label: "Action Items", icon: ut }, { id: "communications", label: "Communication", icon: Fr }, { id: "payments", label: "Payments", icon: Qr }, { id: "notifications", label: "Alerts", icon: Bl }]; h.useEffect(() => { ne.map(Ee => Ee.id).includes(b) || j("overview") }, []); const De = s(), $e = Math.max(0, De.findIndex(he => he.name === (c?.stage || ""))), Et = he => { const Ee = String(he?.name || "").toLowerCase(); return he?.isClosedWon ? "WON" : he?.isClosedLost ? "LOST" : Ee.includes("negotiation") ? "NEGOTIATION" : Ee.includes("proposal") ? "PROPOSAL" : "DRAFT" }, Bt = async he => { if (!c) return; const Ee = De[he]; if (Ee) try { const Ge = Et(Ee), qe = { status: Ge, probability: typeof Ee.probability == "number" ? Ee.probability : c.probability }; await ua.updateDeal(parseInt(c.id), qe), u(vt => vt && { ...vt, stage: Ee.name, status: Ge, probability: qe.probability }), R.success(`Stage changed to ${Ee.name} `) } catch (Ge) { console.error("Failed to change stage", Ge), R.error("Failed to change stage") } }, Ft = () => Bt(Math.max(0, $e - 1)), mt = () => Bt(Math.min(De.length - 1, $e + 1)); h.useEffect(() => { e && ce() }, [e]), h.useEffect(() => { const he = f.get("tab"); if (b && he !== b) { const Ee = new URLSearchParams(f); Ee.set("tab", b), y(Ee, { replace: !0 }) } }, [b]), h.useEffect(() => { if (c) switch (b) { case "overview": Ve(), pt(); break; case "activities": Ve(); break; case "tasks": pt(); break; case "communications": Y(); break; case "quotations": je(); break; case "payments": Ne(); break; case "notifications": fe(); break } }, [b, c]); const ce = async () => { try { g(!0); const Ee = (await ua.getDeal(parseInt(e))).data, Ge = { ...Ee, id: Ee.id?.toString() || e, value: Number(Ee.value ?? 0), contactName: Ee.contact ? `${Ee.contact.firstName} ${Ee.contact.lastName} ` : void 0, contactId: Ee.contact?.id?.toString(), companyName: Ee.companies?.name, assignedToName: Ee.assignedUser ? `${Ee.assignedUser.firstName} ${Ee.assignedUser.lastName} ` : void 0, assignedToId: Ee.assignedUser?.id?.toString(), leadId: Ee.lead?.id?.toString() || Ee.leadId?.toString(), leadName: Ee.lead ? `${Ee.lead.firstName} ${Ee.lead.lastName} ` : void 0 }; u(Ge), Ge.leadId && et(Ge.leadId), Ee.tasks && Ee.tasks.length > 0 && W(Ee.tasks) } catch (he) { console.error("Failed to fetch deal:", he), he.response?.status === 404 ? (R.error("Deal not found"), r("/deals")) : R.error("Failed to load deal details") } finally { g(!1) } }, Xe = async () => { if (!(!c || !window.confirm("Are you sure you want to delete this deal?"))) try { S(!0), await ua.deleteDeal(parseInt(c.id)), R.success("Deal deleted successfully"), r("/deals") } catch (he) { console.error("Failed to delete deal:", he), R.error("Failed to delete deal") } finally { S(!1) } }, jt = async () => { if (!c?.leadId) { R.error("This deal is not linked to a lead"); return } if (window.confirm("Are you sure you want to undo the lead conversion? This will revert the lead to its previous status and delete this deal.")) try { E(!0); const he = await Yt.undoConversion(parseInt(c.leadId)); he.success ? (R.success("Lead conversion undone successfully"), r(`/ leads / ${c.leadId} `)) : R.error(he.message || "Failed to undo conversion") } catch (he) { console.error("Failed to undo conversion:", he), R.error(he?.response?.data?.message || "Failed to undo conversion") } finally { E(!1) } }, Q = he => s().find(qe => qe.name === he)?.color || "#6B7280", Le = he => { const Ee = { LOW: "bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300", MEDIUM: "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300", HIGH: "bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300", URGENT: "bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300" }; return Ee[he] || Ee.MEDIUM }, Ve = async () => { try { if (K(!0), c?.leadId) { const Ge = await Bi.getActivitiesByLeadId(parseInt(c.leadId), 1, 5), qe = Ge?.data?.items || Ge?.items || Ge?.data?.activities || []; $(qe); return } const he = await Bi.getRecentActivities(5), Ee = he?.data?.items || he?.items || []; $(Ee) } catch (he) { console.error("Failed to fetch activities:", he), $([]) } finally { K(!1) } }, et = async he => { try { D(!0); const Ee = await Yt.getLeadById(parseInt(he)), Ge = (Ee && (Ee.data?.lead || Ee.data || Ee.lead)) ?? Ee; N(Ge) } catch (Ee) { console.error("Failed to fetch linked lead details:", Ee), N(null) } finally { D(!1) } }, pt = async () => { try { J(!0); const he = await gs.list({ page: 1, limit: 10, status: "PENDING,IN_PROGRESS", entityType: "deal", entityId: c?.id || e, dealId: parseInt(c ? c.id : e) }), Ge = [...he?.data?.tasks || he?.data?.items || he?.tasks || he?.items || []].sort((qe, vt) => qe?.dueDate && vt?.dueDate ? new Date(qe.dueDate).getTime() - new Date(vt.dueDate).getTime() : qe?.dueDate ? -1 : vt?.dueDate ? 1 : new Date(vt.createdAt).getTime() - new Date(qe.createdAt).getTime()); W(Ge) } catch (he) { console.error("Failed to fetch tasks:", he), W([]) } finally { J(!1) } }, Y = async () => { try { G(!0); const he = localStorage.getItem(Ot.AUTH_TOKEN); if (c?.leadId) { const qe = c.leadId, [vt, yr] = await Promise.all([fetch(`/ api / communication / messages / lead / ${qe} `, { headers: { Authorization: `Bearer ${he} `, "Content-Type": "application/json" } }), fetch(`/ api / call - logs / lead / ${qe} `, { headers: { Authorization: `Bearer ${he} `, "Content-Type": "application/json" } })]); if (vt.ok) { const vr = await vt.json(), Nt = (vr?.data?.messages || vr?.messages || []).map(Ut => ({ id: String(Ut.id), type: Ut.type, subject: Ut.subject, content: Ut.content, direction: (Ut.direction || "").toLowerCase(), createdAt: Ut.sentAt || Ut.createdAt, user: Ut.user ? { firstName: Ut.user.firstName, lastName: Ut.user.lastName } : void 0 })); q(Nt) } if (yr.ok) { const vr = await yr.json(); X(vr?.data?.callLogs || vr?.callLogs || []) } return } const [Ee, Ge] = await Promise.all([fetch(`/ api / communications ? entityType = deal & entityId=${e} `, { headers: { Authorization: `Bearer ${he} `, "Content-Type": "application/json" } }), fetch(`/ api / call - logs ? entityType = deal & entityId=${e} `, { headers: { Authorization: `Bearer ${he} `, "Content-Type": "application/json" } })]); if (Ee.ok) { const qe = await Ee.json(); q(qe.data?.communications || qe.communications || []) } if (Ge.ok) { const qe = await Ge.json(); X(qe.data?.callLogs || qe.callLogs || []) } } catch (he) { console.error("Failed to fetch communications:", he) } finally { G(!1) } }, je = async () => { try { Te(!0); const he = localStorage.getItem(Ot.AUTH_TOKEN), [Ee, Ge] = await Promise.all([fetch(`/ api / quotations ? entityType = deal & entityId=${e} `, { headers: { Authorization: `Bearer ${he} `, "Content-Type": "application/json" } }), fetch(`/ api / invoices ? entityType = deal & entityId=${e} `, { headers: { Authorization: `Bearer ${he} `, "Content-Type": "application/json" } })]); if (Ee.ok) { const qe = await Ee.json(); le(qe.data?.quotations || qe.quotations || []) } if (Ge.ok) { const qe = await Ge.json(); L(qe.data?.invoices || qe.invoices || []) } } catch (he) { console.error("Failed to fetch quotations:", he) } finally { Te(!1) } }, Ne = async () => { try { He(!0); const he = localStorage.getItem(Ot.AUTH_TOKEN), [Ee, Ge] = await Promise.all([fetch(`/ api / payments ? dealId = ${e} `, { headers: { Authorization: `Bearer ${he} `, "Content-Type": "application/json" } }), fetch(`/ api / invoices ? entityType = deal & entityId=${e} `, { headers: { Authorization: `Bearer ${he} `, "Content-Type": "application/json" } })]); if (Ee.ok) { const qe = await Ee.json(); T(qe.data?.payments || qe.payments || []) } if (Ge.ok) { const qe = await Ge.json(); L(qe.data?.invoices || qe.invoices || []) } } catch (he) { console.error("Failed to fetch payments or invoices:", he) } finally { He(!1) } }, fe = async () => { try { const he = localStorage.getItem(Ot.AUTH_TOKEN), Ee = await fetch(`/ api / notifications ? entityType = deal & entityId=${e} `, { headers: { Authorization: `Bearer ${he} `, "Content-Type": "application/json" } }); if (Ee.ok) { const Ge = await Ee.json(); H(Ge.data?.notifications || Ge.notifications || []) } } catch (he) { console.error("Failed to fetch notifications:", he) } }, ke = he => { const Ee = { DRAFT: "bg-gray-100 text-gray-800", PROPOSAL: "bg-blue-100 text-blue-800", NEGOTIATION: "bg-yellow-100 text-yellow-800", WON: "bg-green-100 text-green-800", LOST: "bg-red-100 text-red-800" }; return Ee[he] || Ee.DRAFT }; return m ? t.jsx("div", { className: "flex items-center justify-center min-h-screen", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red" }) }) : c ? t.jsxs("div", { className: "mx-auto p-6 space-y-6", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("div", { className: "flex items-center", children: t.jsxs(si, { to: "/deals", className: "flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mr-4 transition-colors", children: [t.jsx(pr, { size: 20, className: "mr-2" }), "Back to Deals"] }) }), t.jsxs("div", { className: "flex space-x-3", children: [c.leadId && t.jsxs(ue, { variant: "OUTLINE", onClick: jt, disabled: k, className: "flex items-center gap-2 border-orange-300 text-orange-700 hover:bg-orange-50 dark:border-orange-700 dark:text-orange-400 dark:hover:bg-orange-900/20", children: [t.jsx(Sm, { size: 16 }), k ? "Undoing..." : "Undo Conversion"] }), o("deal.update") && t.jsxs(ue, { variant: "OUTLINE", onClick: () => r(`/ deals / ${c.id}/edit`), className: "flex items-center gap-2", children: [t.jsx(Jt, { size: 16 }), "Edit Deal"] }), o("deal.delete") && t.jsxs(ue, { variant: "DESTRUCTIVE", onClick: Xe, disabled: v, className: "flex items-center gap-2", children: [t.jsx(yt, { size: 16 }), v ? "Deleting..." : "Delete"] })] })] }), t.jsxs(Ae, { variant: "ELEVATED", className: "p-6 rounded-2xl shadow-lg", children: [t.jsxs("div", { className: "flex items-start justify-between mb-6", children: [t.jsxs("div", { className: "flex items-start", children: [t.jsx("div", { className: "w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mr-4", children: t.jsx(Qr, { size: 28, className: "text-white" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-1", children: c.companyName || C?.company || "" }), t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400 mb-2", children: ["Deal: ", t.jsx("span", { className: "font-semibold text-gray-900 dark:text-white", children: c.title })] }), t.jsxs("div", { className: "flex flex-wrap items-center gap-2 mb-3", children: [t.jsx("span", { className: `px-2.5 py-1 text-xs font-medium rounded-full ${ke(c.status)}`, children: c.status }), t.jsx("span", { className: "px-2.5 py-1 text-xs font-medium rounded-full text-white", style: { backgroundColor: Q(c.stage) }, children: c.stage }), t.jsx("span", { className: `px-2.5 py-1 text-xs font-medium rounded-full ${Le(c.priority)}`, children: c.priority }), t.jsxs("div", { className: "ml-2 flex items-center gap-2", children: [t.jsx("button", { onClick: Ft, className: "px-2 py-1 text-xs rounded-md border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700", children: "Prev" }), t.jsx("select", { className: "text-xs px-2 py-1 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800", value: De[$e]?.name || "", onChange: he => { const Ee = De.findIndex(Ge => Ge.name === he.target.value); Bt(Ee) }, children: De.map(he => t.jsx("option", { value: he.name, children: he.name }, he.id || he.name)) }), t.jsx("button", { onClick: mt, className: "px-2 py-1 text-xs rounded-md border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700", children: "Next" })] })] }), t.jsxs("p", { className: "text-gray-600 dark:text-gray-400 text-sm", children: [c.probability, "% win probability  Expected close: ", c.expectedCloseDate ? new Date(c.expectedCloseDate).toLocaleDateString() : "Not set"] }), (c.companyName || C?.company || C) && t.jsxs("div", { className: "mt-2 flex flex-wrap items-center gap-3 text-sm text-gray-600 dark:text-gray-400", children: [(c.companyName || C?.company) && t.jsxs("span", { className: "inline-flex items-center bg-gray-100 dark:bg-gray-700 px-2.5 py-1 rounded-md", children: [t.jsx(qi, { size: 14, className: "mr-1.5 text-blue-500" }), c.companyName || C?.company] }), C && t.jsxs(t.Fragment, { children: [t.jsxs("span", { className: "inline-flex items-center bg-gray-100 dark:bg-gray-700 px-2.5 py-1 rounded-md", children: [t.jsx(wt, { size: 14, className: "mr-1.5 text-emerald-500" }), `${C.firstName || ""} ${C.lastName || ""}`.trim()] }), C.email && t.jsxs("span", { className: "inline-flex items-center bg-gray-100 dark:bg-gray-700 px-2.5 py-1 rounded-md", children: [t.jsx(ir, { size: 14, className: "mr-1.5 text-indigo-500" }), C.email] }), C.phone && t.jsxs("span", { className: "inline-flex items-center bg-gray-100 dark:bg-gray-700 px-2.5 py-1 rounded-md", children: [t.jsx(ma, { size: 14, className: "mr-1.5 text-purple-500" }), C.phone] })] })] }), c.leadId && t.jsxs("p", { className: "text-gray-600 dark:text-gray-400 text-xs mt-2", children: [t.jsx("span", { className: "text-gray-500", children: "Converted from lead:" }), " ", t.jsx(si, { to: `/leads/${c.leadId}`, className: "text-weconnect-red hover:underline font-medium", children: c.leadName || `Lead #${c.leadId}` })] })] })] }), t.jsxs("div", { className: "text-right", children: [t.jsx("p", { className: "text-3xl font-bold text-green-600 dark:text-green-400", children: a(c.value, c.currency) }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mt-1", children: "Opportunity Value" }), t.jsxs("p", { className: "text-xs text-gray-500 dark:text-gray-500 mt-2", children: ["Expected Revenue: ", a(c.value * (c.probability / 100), c.currency)] })] })] }), t.jsxs("div", { className: "mb-6", children: [t.jsxs("div", { className: "flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2", children: [t.jsx("span", { children: "Pipeline" }), t.jsx("span", { className: "font-medium text-gray-800 dark:text-gray-200", children: c.stage })] }), t.jsx("div", { className: "flex items-center", children: De.map((he, Ee) => { const Ge = Ee < $e, qe = Ee === $e, vt = Q(he.name); return t.jsxs(Je.Fragment, { children: [t.jsxs("div", { className: "flex flex-col items-center min-w-[60px]", children: [t.jsx("div", { className: `h-5 w-5 rounded-full flex items-center justify-center border-2 ${Ge ? "bg-green-500 border-green-500 text-white" : qe ? "bg-white text-gray-800" : "bg-white text-gray-400"}`, style: qe ? { borderColor: vt } : {}, title: he.name, children: Ge ? "" : "" }), t.jsx("span", { className: `mt-2 text-[11px] ${Ge || qe ? "text-gray-800 dark:text-gray-200" : "text-gray-500 dark:text-gray-400"} truncate max-w-[100px]`, children: he.name })] }), Ee < De.length - 1 && t.jsx("div", { className: "w-10 sm:w-16 md:w-24 h-[2px] mx-2 rounded-full bg-gray-300 dark:bg-gray-600", children: t.jsx("div", { className: "h-[2px] rounded-full", style: { width: Ge ? "100%" : "0%", backgroundColor: vt } }) })] }, he.name) }) })] })] }), t.jsx("div", { className: "border-b border-gray-200 dark:border-gray-700", children: t.jsx("nav", { className: "-mb-px flex space-x-8", role: "tablist", "aria-label": "Deal profile tabs", children: ne.map(he => { const Ee = he.icon, Ge = b === he.id; return t.jsxs("button", { onClick: () => j(he.id), role: "tab", "aria-selected": Ge, "aria-controls": `panel-${he.id}`, className: `py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${Ge ? "border-weconnect-red text-weconnect-red" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`, children: [t.jsx(Ee, { size: 16 }), he.label] }, he.id) }) }) }), t.jsxs("div", { className: "min-h-96", children: [b === "overview" && t.jsxs("div", { id: "panel-overview", role: "tabpanel", "aria-labelledby": "overview", className: "space-y-6", children: [t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-4 gap-4", children: [t.jsx(Ae, { className: "p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mb-1", children: "Deal Value" }), t.jsx("p", { className: "text-xl font-bold text-gray-900 dark:text-white", children: a(c.value, c.currency) })] }), t.jsx("div", { className: "p-3 bg-green-100 dark:bg-green-900/20 rounded-lg", children: t.jsx(Qr, { size: 20, className: "text-green-600 dark:text-green-400" }) })] }) }), t.jsx(Ae, { className: "p-4", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mb-1", children: "Expected Revenue" }), t.jsx("p", { className: "text-xl font-bold text-gray-900 dark:text-white", children: a(c.value * (c.probability / 100), c.currency) })] }), t.jsx("div", { className: "p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg", children: t.jsx(Ea, { size: 20, className: "text-blue-600 dark:text-blue-400" }) })] }) }), t.jsx(Ae, { className: "p-4", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mb-1", children: "Win Probability" }), t.jsxs("p", { className: "text-xl font-bold text-gray-900 dark:text-white", children: [c.probability, "%"] })] }), t.jsx("div", { className: "p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg", children: t.jsx(Zw, { size: 20, className: "text-purple-600 dark:text-purple-400" }) })] }) }), t.jsx(Ae, { className: "p-4", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mb-1", children: "Days to Close" }), t.jsx("p", { className: "text-xl font-bold text-gray-900 dark:text-white", children: c.expectedCloseDate ? Math.max(0, Math.ceil((new Date(c.expectedCloseDate).getTime() - new Date().getTime()) / (1e3 * 60 * 60 * 24))) : "N/A" })] }), t.jsx("div", { className: "p-3 bg-orange-100 dark:bg-orange-900/20 rounded-lg", children: t.jsx(Kt, { size: 20, className: "text-orange-600 dark:text-orange-400" }) })] }) })] }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [t.jsxs("div", { className: "lg:col-span-2 space-y-6", children: [t.jsxs(Ae, { className: "p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow", children: [t.jsxs("div", { className: "flex items-center justify-between mb-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Deal Information" }), t.jsxs("div", { className: "text-sm text-gray-500 dark:text-gray-400", children: ["Created ", new Date(c.createdAt).toLocaleDateString()] })] }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400", children: "Deal Title" }), t.jsx("p", { className: "mt-1 text-sm text-gray-900 dark:text-white font-medium", children: c.title })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400", children: "Deal Value" }), t.jsx("p", { className: "mt-1 text-sm text-gray-900 dark:text-white font-semibold", children: a(c.value, c.currency) })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400", children: "Expected Revenue" }), t.jsx("p", { className: "mt-1 text-sm text-gray-900 dark:text-white font-semibold", children: a(c.value * (c.probability / 100), c.currency) })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400", children: "Pipeline Stage" }), t.jsx("p", { className: "mt-1", children: t.jsx("span", { className: "inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-white", style: { backgroundColor: Q(c.stage) }, children: c.stage }) })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400", children: "Expected Close Date" }), t.jsx("p", { className: "mt-1 text-sm text-gray-900 dark:text-white", children: c.expectedCloseDate ? new Date(c.expectedCloseDate).toLocaleDateString() : "Not set" })] }), c.leadId && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400", children: "Source Lead" }), t.jsx("p", { className: "mt-1 text-sm text-gray-900 dark:text-white", children: t.jsx(si, { to: `/leads/${c.leadId}`, className: "hover:text-weconnect-red transition-colors font-medium", children: c.leadName || `Lead #${c.leadId}` }) })] })] }), t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400", children: "Status" }), t.jsx("p", { className: "mt-1", children: t.jsx("span", { className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ke(c.status)}`, children: c.status }) })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400", children: "Win Probability" }), t.jsxs("p", { className: "mt-1 text-sm text-gray-900 dark:text-white", children: [c.probability, "%"] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400", children: "Priority" }), t.jsx("p", { className: "mt-1", children: t.jsx("span", { className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Le(c.priority)}`, children: c.priority }) })] }), (c.contactName || C) && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400", children: "Contact Person" }), t.jsxs("p", { className: "mt-1 text-sm text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(wt, { size: 14, className: "text-gray-400" }), c.contactName || (C ? `${C.firstName || ""} ${C.lastName || ""}`.trim() : "")] })] }), (c.companyName || C?.company) && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400", children: "Company" }), t.jsxs("p", { className: "mt-1 text-sm text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(qi, { size: 14, className: "text-gray-400" }), c.companyName || C?.company] })] }), C?.email && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400", children: "Email" }), t.jsxs("p", { className: "mt-1 text-sm text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(ir, { size: 14, className: "text-gray-400" }), C.email] })] }), C?.phone && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400", children: "Phone" }), t.jsxs("p", { className: "mt-1 text-sm text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(ma, { size: 14, className: "text-gray-400" }), C.phone] })] }), (C?.address || C?.city || C?.state || C?.zipCode || C?.country) && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400", children: "Address" }), t.jsxs("p", { className: "mt-1 text-sm text-gray-900 dark:text-white flex items-start gap-2", children: [t.jsx($o, { size: 14, className: "text-gray-400 mt-0.5" }), t.jsx("span", { children: [C?.address, [C?.city, C?.state].filter(Boolean).join(", "), [C?.zipCode, C?.country].filter(Boolean).join(" ")].filter(Boolean).join("  ") })] })] }), c.assignedToName && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400", children: "Sales Rep" }), t.jsx("p", { className: "mt-1 text-sm text-gray-900 dark:text-white", children: c.assignedToName })] })] })] }), c.description && t.jsxs("div", { className: "mt-6", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2", children: "Description" }), t.jsx("p", { className: "text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 rounded-md p-3", children: c.description })] }), c.notes && t.jsxs("div", { className: "mt-6", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2", children: "Notes" }), t.jsx("p", { className: "text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 rounded-md p-3", children: c.notes })] }), c.tags && c.tags.length > 0 && t.jsxs("div", { className: "mt-6", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2", children: "Tags" }), t.jsx("div", { className: "flex flex-wrap gap-2", children: c.tags.map((he, Ee) => t.jsxs("span", { className: "inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200", children: [t.jsx(qo, { className: "h-3 w-3 mr-1" }), he] }, Ee)) })] })] }), t.jsxs(Ae, { className: "p-6", children: [t.jsxs("div", { className: "flex items-center justify-between mb-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Recent Activities" }), t.jsx(ue, { size: "SM", variant: "GHOST", onClick: () => j("activities"), children: "View All" })] }), U ? t.jsx("div", { className: "flex items-center justify-center py-8", children: t.jsx("div", { className: "animate-spin rounded-full h-6 w-6 border-b-2 border-weconnect-red" }) }) : I.length > 0 ? t.jsx("div", { className: "space-y-3", children: I.slice(0, 3).map(he => t.jsxs("div", { className: "flex items-start space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg", children: [t.jsx(Qc, { size: 16, className: "text-gray-500 mt-1" }), t.jsxs("div", { className: "flex-1 min-w-0", children: [t.jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: he.title }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: he.createdAt ? new Date(he.createdAt).toLocaleDateString() : "" })] })] }, he.id)) }) : t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400 text-center py-8", children: "No recent activities" })] }), c.products && c.products.length > 0 && t.jsxs(Ae, { className: "p-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "Products & Services" }), t.jsx("div", { className: "space-y-3", children: c.products.map(he => t.jsxs("div", { className: "flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg", children: [t.jsxs("div", { children: [t.jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: he.name }), t.jsxs("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: ["Quantity: ", he.quantity] })] }), t.jsx("p", { className: "text-sm font-semibold text-gray-900 dark:text-white", children: a(he.price * he.quantity, c.currency) })] }, he.id)) })] })] }), t.jsxs("div", { className: "space-y-6", children: [t.jsxs(Ae, { className: "p-6", children: [t.jsxs("div", { className: "flex items-center justify-between mb-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Next Steps" }), t.jsx(ue, { size: "SM", variant: "GHOST", onClick: () => j("tasks"), children: "View All" })] }), Z ? t.jsx("div", { className: "flex justify-center py-8", children: t.jsx("div", { className: "animate-spin rounded-full h-6 w-6 border-b-2 border-weconnect-red" }) }) : B.length > 0 ? t.jsx("div", { className: "space-y-3", children: B.slice(0, 3).map(he => t.jsxs("div", { className: "flex items-start space-x-3", children: [t.jsx(ut, { size: 16, className: "text-gray-500 mt-1" }), t.jsxs("div", { className: "flex-1 min-w-0", children: [t.jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: he.title }), he.dueDate && t.jsxs("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: ["Due: ", new Date(he.dueDate).toLocaleDateString()] })] })] }, he.id)) }) : t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400 text-center py-8", children: "No pending tasks" })] }), t.jsxs(Ae, { className: "p-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "Timeline" }), t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "flex items-center", children: [t.jsx(Zt, { size: 18, className: "mr-3 text-gray-500" }), t.jsxs("div", { children: [t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Created" }), t.jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: new Date(c.createdAt).toLocaleDateString() })] })] }), c.expectedCloseDate && t.jsxs("div", { className: "flex items-center", children: [t.jsx(Zt, { size: 18, className: "mr-3 text-gray-500" }), t.jsxs("div", { children: [t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Expected Close" }), t.jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: new Date(c.expectedCloseDate).toLocaleDateString() })] })] }), c.actualCloseDate && t.jsxs("div", { className: "flex items-center", children: [t.jsx(ut, { size: 18, className: "mr-3 text-green-500" }), t.jsxs("div", { children: [t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Closed" }), t.jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: new Date(c.actualCloseDate).toLocaleDateString() })] })] })] })] }), t.jsxs(Ae, { className: "p-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "Additional Details" }), c.description && t.jsxs("div", { className: "mb-6", children: [t.jsx("p", { className: "text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Description" }), t.jsx("div", { className: "bg-gray-50 dark:bg-gray-700 rounded-lg p-4", children: t.jsx("p", { className: "text-gray-900 dark:text-white whitespace-pre-line", children: c.description }) })] }), c.tags && c.tags.length > 0 && t.jsxs("div", { className: "mb-6", children: [t.jsx("p", { className: "text-sm font-medium text-gray-700 dark:text-gray-300 mb-3", children: "Tags" }), t.jsx("div", { className: "flex flex-wrap gap-2", children: c.tags.map((he, Ee) => t.jsx("span", { className: "px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200", children: he }, Ee)) })] }), c.notes && t.jsxs("div", { className: "mb-6", children: [t.jsx("p", { className: "text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Notes" }), t.jsx("div", { className: "bg-gray-50 dark:bg-gray-700 rounded-lg p-4", children: t.jsx("p", { className: "text-gray-900 dark:text-white whitespace-pre-line", children: c.notes }) })] })] })] })] })] }), b === "pipeline" && t.jsxs(Ae, { className: "p-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "Pipeline Progress" }), t.jsxs("div", { className: "space-y-6", children: [t.jsxs("div", { children: [t.jsxs("div", { className: "flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2", children: [t.jsxs("span", { children: ["Current Stage: ", c.stage] }), t.jsxs("span", { children: [c.probability, "% Win Probability"] })] }), t.jsx("div", { className: "w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4", children: t.jsx("div", { className: "h-4 rounded-full transition-all duration-300 flex items-center justify-end pr-2", style: { width: `${c.probability}%`, backgroundColor: Q(c.stage) }, children: t.jsxs("span", { className: "text-xs text-white font-semibold", children: [c.probability, "%"] }) }) })] }), t.jsxs("div", { className: "border-t border-gray-200 dark:border-gray-700 pt-4", children: [t.jsx("h4", { className: "text-sm font-semibold text-gray-900 dark:text-white mb-3", children: "Expected Outcome" }), t.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [t.jsxs("div", { className: "bg-green-50 dark:bg-green-900/20 p-4 rounded-lg", children: [t.jsx("p", { className: "text-xs text-gray-600 dark:text-gray-400 mb-1", children: "Deal Value" }), t.jsx("p", { className: "text-xl font-bold text-green-600 dark:text-green-400", children: a(c.value, c.currency) })] }), t.jsxs("div", { className: "bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg", children: [t.jsx("p", { className: "text-xs text-gray-600 dark:text-gray-400 mb-1", children: "Expected Revenue" }), t.jsx("p", { className: "text-xl font-bold text-blue-600 dark:text-blue-400", children: a(c.value * (c.probability / 100), c.currency) })] })] })] }), t.jsxs("div", { className: "border-t border-gray-200 dark:border-gray-700 pt-4", children: [t.jsx("h4", { className: "text-sm font-semibold text-gray-900 dark:text-white mb-3", children: "Timeline" }), t.jsxs("div", { className: "space-y-2 text-sm", children: [t.jsxs("div", { className: "flex justify-between", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Created" }), t.jsx("span", { className: "text-gray-900 dark:text-white", children: new Date(c.createdAt).toLocaleDateString() })] }), c.expectedCloseDate && t.jsxs("div", { className: "flex justify-between", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Expected Close" }), t.jsx("span", { className: "text-gray-900 dark:text-white font-semibold", children: new Date(c.expectedCloseDate).toLocaleDateString() })] }), c.actualCloseDate && t.jsxs("div", { className: "flex justify-between", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Closed" }), t.jsx("span", { className: "text-gray-900 dark:text-white", children: new Date(c.actualCloseDate).toLocaleDateString() })] })] })] })] })] }), b === "activities" && (U ? t.jsx(Ae, { className: "p-6", id: "panel-activities", role: "tabpanel", "aria-labelledby": "activities", children: t.jsx("div", { className: "flex items-center justify-center py-12", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red" }) }) }) : t.jsx("div", { id: "panel-activities", role: "tabpanel", "aria-labelledby": "activities", children: t.jsx(eL, { entityType: "deal", entityId: c.id, activities: I }) })), b === "tasks" && (Z ? t.jsx(Ae, { className: "p-6", id: "panel-tasks", role: "tabpanel", "aria-labelledby": "tasks", children: t.jsx("div", { className: "flex items-center justify-center py-12", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red" }) }) }) : t.jsx("div", { id: "panel-tasks", role: "tabpanel", "aria-labelledby": "tasks", children: t.jsx(J6, { entityType: "deal", entityId: c.id, tasks: B }) })), b === "communications" && t.jsx("div", { id: "panel-communications", role: "tabpanel", "aria-labelledby": "communications", children: c.leadId && C ? t.jsx(X6, { lead: { id: parseInt(c.leadId), firstName: C.firstName || "", lastName: C.lastName || "", email: C.email || "", phone: C.phone || "", company: C.company || c.companyName || "" } }) : te ? t.jsx(Ae, { className: "p-6", children: t.jsx("div", { className: "flex items-center justify-center py-12", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red" }) }) }) : t.jsx(ooe, { entityType: "deal", entityId: c.id, communications: M, callLogs: V }) }), b === "quotations" && (de ? t.jsx(Ae, { className: "p-6", id: "panel-quotations", role: "tabpanel", "aria-labelledby": "quotations", children: t.jsx("div", { className: "flex items-center justify-center py-12", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red" }) }) }) : t.jsx("div", { id: "panel-quotations", role: "tabpanel", "aria-labelledby": "quotations", children: t.jsx(Z6, { entityType: "deal", entityId: c.id, quotations: se, invoices: ee }) })), b === "payments" && (pe ? t.jsx(Ae, { className: "p-6", id: "panel-payments", role: "tabpanel", "aria-labelledby": "payments", children: t.jsx("div", { className: "flex items-center justify-center py-12", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red" }) }) }) : t.jsx("div", { id: "panel-payments", role: "tabpanel", "aria-labelledby": "payments", children: t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700", children: t.jsx(loe, { entityType: "deal", entityId: c.id, payments: z, invoices: ee, currency: c.currency, onPaymentSaved: Ne }) }) })), b === "notifications" && t.jsx("div", { id: "panel-notifications", role: "tabpanel", "aria-labelledby": "notifications", children: t.jsx(coe, { entityType: "deal", entityId: c.id, notifications: _ }) })] })] }) : t.jsx("div", { className: "mx-auto p-6", children: t.jsxs("div", { className: "text-center py-12", children: [t.jsx(Qr, { size: 48, className: "mx-auto text-gray-400 dark:text-gray-600 mb-4" }), t.jsx("h2", { className: "text-xl font-semibold text-gray-900 dark:text-white mb-2", children: "Deal Not Found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: "The deal you're looking for doesn't exist or has been deleted." }), t.jsx(ue, { onClick: () => r("/deals"), children: "Back to Deals" })] }) }) }, uoe = () => {
    const e = xt(), { currencySettings: r, dealStatuses: a } = Br(), [s, n] = h.useState(!1); h.useEffect(() => { R.info("Create a lead first, then convert it to a deal."), e("/leads/new", { replace: !0 }) }, [e]); const [i, o] = h.useState({ title: "", value: "", currency: r?.primary || "USD", status: "DRAFT", probability: "50", expectedCloseDate: "", contactId: "", companyId: "", description: "" }), c = m => { const { name: g, value: f } = m.target; o(y => ({ ...y, [g]: f })) }, u = async m => {
        if (m.preventDefault(), !i.title.trim()) { R.error("Title is required"); return } try { n(!0); const g = { title: i.title.trim(), description: i.description?.trim() || void 0, value: i.value ? Number(i.value) : 0, currency: i.currency || "USD", status: i.status, probability: i.probability ? Number(i.probability) : 0, expectedCloseDate: i.expectedCloseDate || void 0, contactId: i.contactId ? Number(i.contactId) : void 0, companyId: i.companyId ? Number(i.companyId) : void 0 }, f = await ua.createDeal(g); R.success("Deal created"); const y = f?.data?.id || f?.data?.deal?.id; e(y ? `/deals/${y}` : "/deals") } catch (g) {
            const f = g?.response?.data, y = Array.isArray(f?.errors) ? f.errors.map(p => p?.msg || p?.message).filter(Boolean).join(`
`) : f?.message || g?.message || "Failed to create deal"; R.error(y)
        } finally { n(!1) }
    }; return t.jsxs("div", { className: "p-4 md:p-6", children: [t.jsxs("div", { className: "mb-6 flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Create Deal" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Fill in the details below" })] }), t.jsx(qa, { to: "/deals" })] }), t.jsxs("form", { onSubmit: u, className: "bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 space-y-6", children: [t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Title *" }), t.jsx("input", { name: "title", value: i.title, onChange: c, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Deal title", required: !0 })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Value" }), t.jsx("input", { name: "value", type: "number", step: "0.01", value: i.value, onChange: c, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "0.00" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Currency" }), t.jsx("input", { name: "currency", value: i.currency, onChange: c, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "USD" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Status" }), t.jsx("select", { name: "status", value: i.status, onChange: c, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", children: (a || []).filter(m => m.isActive).map(m => t.jsx("option", { value: m.name, children: m.name }, m.id)) })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Probability (%)" }), t.jsx("input", { name: "probability", type: "number", min: 0, max: 100, value: i.probability, onChange: c, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "0-100" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Expected Close Date" }), t.jsx("input", { name: "expectedCloseDate", type: "date", value: i.expectedCloseDate, onChange: c, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white" })] })] }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Contact ID" }), t.jsx("input", { name: "contactId", type: "number", value: i.contactId, onChange: c, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "e.g. 123" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Company ID" }), t.jsx("input", { name: "companyId", type: "number", value: i.companyId, onChange: c, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "e.g. 456" })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Description" }), t.jsx("textarea", { name: "description", value: i.description, onChange: c, rows: 4, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Add details about this deal" })] }), t.jsxs("div", { className: "flex justify-end gap-3", children: [t.jsx(ue, { type: "button", variant: "SECONDARY", onClick: () => e("/deals"), disabled: s, children: "Cancel" }), t.jsx(ue, { type: "submit", variant: "PRIMARY", disabled: s, children: s ? "Creating..." : "Create Deal" })] })] })] })
}, moe = () => {
    const e = xt(), { id: r } = gi(), { currencySettings: a, dealStatuses: s } = Br(), [n, i] = h.useState(!0), [o, c] = h.useState(!1), [u, m] = h.useState({ title: "", value: "", currency: a?.primary || "USD", status: "DRAFT", probability: "0", expectedCloseDate: "", contactId: "", companyId: "", description: "" }); h.useEffect(() => { r && (async () => { try { i(!0); const b = (await ua.getDealById(Number(r))).data; m({ title: b.title || "", value: String(b.value ?? ""), currency: b.currency || a?.primary || "USD", status: b.status || "DRAFT", probability: String(b.probability ?? "0"), expectedCloseDate: b.expectedCloseDate ? String(b.expectedCloseDate).slice(0, 10) : "", contactId: b.contact?.id ? String(b.contact.id) : b.contactId ? String(b.contactId) : "", companyId: b.companies?.id ? String(b.companies.id) : b.companyId ? String(b.companyId) : "", description: b.description || "" }) } catch (p) { R.error(p?.response?.data?.message || "Failed to load deal"), e("/deals") } finally { i(!1) } })() }, [r, e, a?.primary]); const g = y => { const { name: p, value: b } = y.target; m(j => ({ ...j, [p]: b })) }, f = async y => {
        if (y.preventDefault(), !u.title.trim()) { R.error("Title is required"); return } try { c(!0); const p = { title: u.title.trim(), description: u.description?.trim() || void 0, value: u.value ? Number(u.value) : void 0, currency: u.currency || void 0, status: u.status, probability: u.probability ? Number(u.probability) : void 0, expectedCloseDate: u.expectedCloseDate || void 0, contactId: u.contactId ? Number(u.contactId) : void 0, companyId: u.companyId ? Number(u.companyId) : void 0 }; await ua.updateDeal(Number(r), p), R.success("Deal updated"), e(`/deals/${r}`) } catch (p) {
            const b = p?.response?.data, j = Array.isArray(b?.errors) ? b.errors.map(v => v?.msg || v?.message).filter(Boolean).join(`
`) : b?.message || p?.message || "Failed to update deal"; R.error(j)
        } finally { c(!1) }
    }; return n ? t.jsx("div", { className: "flex items-center justify-center h-64", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600" }) }) : t.jsxs("div", { className: "p-4 md:p-6", children: [t.jsxs("div", { className: "mb-6 flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Edit Deal" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Update the details below" })] }), t.jsx(qa, { to: `/deals/${r}` })] }), t.jsxs("form", { onSubmit: f, className: "bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 space-y-6", children: [t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Title *" }), t.jsx("input", { name: "title", value: u.title, onChange: g, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Deal title", required: !0 })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Value" }), t.jsx("input", { name: "value", type: "number", step: "0.01", value: u.value, onChange: g, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "0.00" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Currency" }), t.jsx("input", { name: "currency", value: u.currency, onChange: g, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "USD" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Status" }), t.jsx("select", { name: "status", value: u.status, onChange: g, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", children: (s || []).filter(y => y.isActive).map(y => t.jsx("option", { value: y.name, children: y.name }, y.id)) })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Probability (%)" }), t.jsx("input", { name: "probability", type: "number", min: 0, max: 100, value: u.probability, onChange: g, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "0-100" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Expected Close Date" }), t.jsx("input", { name: "expectedCloseDate", type: "date", value: u.expectedCloseDate, onChange: g, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white" })] })] }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Contact ID" }), t.jsx("input", { name: "contactId", type: "number", value: u.contactId, onChange: g, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "e.g. 123" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Company ID" }), t.jsx("input", { name: "companyId", type: "number", value: u.companyId, onChange: g, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "e.g. 456" })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Description" }), t.jsx("textarea", { name: "description", value: u.description, onChange: g, rows: 4, className: "mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-weconnect-red focus:border-weconnect-red dark:bg-gray-700 dark:text-white", placeholder: "Add details about this deal" })] }), t.jsxs("div", { className: "flex justify-end gap-3", children: [t.jsx(ue, { type: "button", variant: "SECONDARY", onClick: () => e(`/deals/${r}`), disabled: o, children: "Cancel" }), t.jsx(ue, { type: "submit", variant: "PRIMARY", disabled: o, children: o ? "Saving..." : "Save Changes" })] })] })] })
}, goe = () => { const { hasPermission: e } = mr(), { refreshUsersCount: r } = Sn(), { t: a } = kn(), s = xt(), [n, i] = h.useState([]), [o, c] = h.useState([]), [u, m] = h.useState(null), [g, f] = h.useState(!0), [y, p] = h.useState(null), [b, j] = h.useState("list"), [v, S] = h.useState(["user", "role", "status", "lastLogin", "createdAt"]), [k, E] = h.useState("users"), [C, N] = h.useState({ status: "", roleId: "", search: "" }), [A, D] = h.useState(1), [I] = h.useState(50), { searchValue: $, debouncedSearchValue: B, setSearch: W, isSearching: M } = ql("", 500), [q, V] = h.useState(!1), [X, se] = h.useState(null), [le, ee] = h.useState(!1); h.useEffect(() => { L() }, [B, C.status, C.roleId, A, k]), h.useEffect(() => { try { const ne = localStorage.getItem("users_visible_columns"); if (ne) { const De = JSON.parse(ne); Array.isArray(De) && De.every($e => typeof $e == "string") && S(De) } } catch { } }, []), h.useEffect(() => { try { localStorage.setItem("users_visible_columns", JSON.stringify(v)) } catch { } }, [v]), h.useEffect(() => { const ne = De => { De.key === "Escape" && (B || C.status || C.roleId) && J() }; return document.addEventListener("keydown", ne), () => document.removeEventListener("keydown", ne) }, [C, B]); const L = async () => { try { f(!0), p(null); const ne = await ur.getUsers({ search: B, status: C.status, roleId: C.roleId, page: A, limit: I }), De = ne?.data?.users ?? (Array.isArray(ne?.data) ? ne.data : void 0) ?? ne?.users ?? []; i(De || []); const $e = ne?.data?.pagination || ne?.pagination; m($e ? { currentPage: $e.currentPage ?? A, totalPages: $e.totalPages ?? 1, totalUsers: $e.totalItems ?? De.length ?? 0, hasNextPage: ($e.currentPage ?? 1) < ($e.totalPages ?? 1), hasPrevPage: ($e.currentPage ?? 1) > 1 } : { currentPage: 1, totalPages: 1, totalUsers: De.length, hasNextPage: !1, hasPrevPage: !1 }) } catch (ne) { console.error("Error fetching users:", ne); const De = ne?.response?.data?.message || "Failed to fetch users"; p(De), R.error(De, { toastId: "users_fetch_error" }) } finally { f(!1) } }, z = (ne, De) => { N($e => ({ ...$e, [ne]: De })), D(1) }, T = ne => { W(ne), D(1) }, _ = ne => { D(ne), window.scrollTo({ top: 0, behavior: "smooth" }) }, H = ne => { s(`/users/${ne.id}/edit`, { state: { user: ne } }) }, U = ne => { se(ne), V(!0) }, K = async ne => { try { await ur.updateUser(ne.id, { isActive: !ne.isActive }), R.success(`User ${ne.isActive ? "deactivated" : "activated"} successfully`), await r(), L() } catch (De) { const $e = De?.response?.data?.message || "Failed to update user status"; R.error($e) } }, Z = async () => { if (X) { ee(!0); try { await ur.deleteUser(X.id), await r(), V(!1), se(null), R.success("User deleted successfully!"), L() } catch (ne) { console.error("Error deleting user:", ne); let De = "An error occurred"; ne.response?.status === 429 ? De = "Too many requests. Please wait a moment and try again." : ne.response?.data?.message && (De = ne.response.data.message), R.error(De) } finally { ee(!1) } } }, J = () => { N({ search: "", status: "", roleId: "" }), D(1), W("") }, te = !!B, G = !!C.status, de = !!C.roleId, Te = te || G || de, pe = ne => v.includes(ne), He = te && (G || de) ? "No users match your search and filters. Try adjusting your filters or search terms. You can also clear all filters to see all users." : te ? "No users found for your search. Try adjusting your search terms. You can also clear all filters to see all users." : G || de ? "No users found for the selected filters. Try adjusting your filters or clear all filters to see all users." : void 0; return t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "flex flex-col lg:flex-row lg:items-end gap-4", children: [t.jsxs("div", { className: "flex flex-col sm:flex-row gap-4 flex-1", children: [t.jsxs("div", { className: "w-full sm:w-48", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: t.jsxs("div", { className: "flex items-center gap-2", children: [a("common.search"), M && t.jsxs("div", { className: "flex items-center gap-1 text-xs text-blue-500", children: [t.jsx(Xr, { className: "h-3 w-3 animate-pulse" }), t.jsx("span", { children: "Searching..." })] })] }) }), t.jsx(Zl, { value: $, onChange: T, placeholder: a("users.searchUsers") })] }), t.jsx("div", { className: "w-full sm:w-48", children: t.jsx(ra, { label: "Status", value: C.status, onChange: ne => z("status", ne), options: [{ value: "", label: "All Statuses" }, { value: "active", label: "Active" }, { value: "inactive", label: "Inactive" }] }) }), t.jsx("div", { className: "w-full sm:w-48", children: t.jsx(ra, { label: "Role", value: C.roleId, onChange: ne => z("roleId", ne), options: [{ value: "", label: "All Roles" }, ...o.map(ne => ({ value: ne.id.toString(), label: ne.name }))] }) })] }), e("user.create") && t.jsxs("button", { onClick: () => s("/users/new"), className: "w-full sm:w-auto flex items-center justify-center px-4 py-3 bg-[#ef444e] text-white rounded-full hover:bg-[#f26971] transition-colors text-sm font-semibold", children: [t.jsx($t, { className: "h-4 w-4 mr-2" }), a("users.addUser")] })] }), t.jsxs("div", { className: "hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto", children: [t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${b === "list" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => j("list"), title: "List view", children: t.jsx(fi, { className: "w-4 h-4" }) }), t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${b === "card" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => j("card"), title: "Card view", children: t.jsx(hi, { className: "w-4 h-4" }) })] })] }), t.jsxs("div", { className: "flex space-x-1 bg-gray-200 dark:bg-gray-700 p-1 rounded-lg w-fit", children: [t.jsx("button", { onClick: () => E("users"), className: `px-4 py-2 text-sm font-medium rounded-md transition-all ${k === "users" ? "bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm" : "text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`, children: a("users.allUsers") }), t.jsx("button", { onClick: () => E("teams"), className: `px-4 py-2 text-sm font-medium rounded-md transition-all ${k === "teams" ? "bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm" : "text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`, children: "Teams" })] }), t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 overflow-hidden  transition-all duration-300", children: [t.jsx("div", { className: "p-6 border-b border-gray-100 dark:border-gray-700", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsxs("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: [k === "users" ? a("users.allUsers") : "All Teams", " ", u && `(${u.totalUsers})`] }), t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400 mt-1", children: [k === "users" ? a("users.manageAndTrack") : "Manage and track user teams.", u && t.jsxs("span", { className: "ml-2 text-gray-500", children: [" Showing ", n.length, " of ", u.totalUsers, " users", u.totalPages > 1 && `  Page ${u.currentPage} of ${u.totalPages}`] }), (B || C.status || C.roleId) && t.jsx("span", { className: "ml-2 text-blue-600 dark:text-blue-400", children: " Filters active" })] })] }), t.jsx("div", { className: "flex items-center space-x-2" })] }) }), k === "users" ? t.jsxs(t.Fragment, { children: [t.jsx("div", { className: "mb-4", children: t.jsx(io, { currentPage: u?.currentPage || 1, itemsPerPage: I, totalItems: u?.totalUsers || n.length, onItemsPerPageChange: ne => { }, columnConfig: { columns: [{ id: "user", label: "User" }, { id: "role", label: "Role" }, { id: "status", label: "Status" }, { id: "lastLogin", label: "Last Login" }, { id: "createdAt", label: "Created" }], visibleColumns: v, onChange: S, minVisible: 1 } }) }), b === "card" ? t.jsx("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-6", children: g ? t.jsx("div", { className: "col-span-full", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto" }) }) : y ? t.jsx("div", { className: "col-span-full text-center py-20", children: t.jsx(Yr, { title: "Network or server error", description: y, icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), isError: !0 }) }) : n.length === 0 ? t.jsx("div", { className: "col-span-full text-center py-20", children: t.jsx(Yr, { icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), description: He, showClearButton: Te, onClear: J }) }) : n.map(ne => t.jsxs("div", { className: "rounded-lg border shadow-sm hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700", style: { minHeight: "280px" }, children: [t.jsxs("div", { className: "p-4 border-b border-gray-100 dark:border-gray-700", children: [t.jsx("div", { className: "flex items-center justify-between mb-3", children: t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-gradient-to-br from-[#EF444E] to-[#ff5a64] rounded-lg shadow-2xl", children: t.jsx(wt, { className: "h-5 w-5 text-white" }) }), t.jsxs("div", { children: [t.jsx("h3", { className: "text-sm font-bold text-gray-900 dark:text-white", children: ne.fullName }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: ne.email })] })] }) }), t.jsx("div", { className: "flex items-center justify-between", children: t.jsx("span", { className: `inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium ${ne.isActive ? "bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400" : "bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400"}`, children: ne.isActive ? "Active" : "Inactive" }) })] }), t.jsx("div", { className: "p-4 flex-1", children: t.jsxs("div", { className: "space-y-2", children: [ne.roles.length > 0 && t.jsx("div", { className: "text-xs text-gray-600 dark:text-gray-400", children: t.jsx("div", { className: "flex flex-wrap gap-1", children: ne.roles.map(De => t.jsxs("span", { className: "inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400", children: [t.jsx(Xs, { className: "h-3 w-3 mr-1" }), De.name] }, De.id)) }) }), ne.lastLogin && t.jsxs("div", { className: "text-xs text-gray-600 dark:text-gray-400 flex items-center gap-1.5", children: [t.jsx(Zt, { className: "h-3 w-3 flex-shrink-0" }), t.jsxs("span", { children: ["Last login: ", new Date(ne.lastLogin).toLocaleDateString()] })] }), t.jsxs("div", { className: "text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1.5", children: [t.jsx(Zt, { className: "h-3 w-3 flex-shrink-0" }), t.jsxs("span", { children: ["Created: ", new Date(ne.createdAt).toLocaleDateString()] })] })] }) }), t.jsx("div", { className: "px-4 pb-4 pt-3 border-t border-gray-100 dark:border-gray-700", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("div", { className: "flex items-center gap-1", children: e("user.update") && t.jsx("button", { onClick: () => H(ne), className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors", title: "Edit User", children: t.jsx(Jt, { className: "h-4 w-4" }) }) }), t.jsxs("div", { className: "flex items-center gap-1", children: [e("user.update") && t.jsx("button", { onClick: () => K(ne), className: `p-1.5 rounded transition-colors ${ne.isActive ? "text-amber-600 hover:text-amber-900 hover:bg-amber-50 dark:hover:bg-amber-900/20" : "text-green-600 hover:text-green-900 hover:bg-green-50 dark:hover:bg-green-900/20"}`, title: ne.isActive ? "Deactivate user" : "Activate user", children: ne.isActive ? t.jsx(Ca, { className: "h-4 w-4" }) : t.jsx(ut, { className: "h-4 w-4" }) }), e("user.delete") && t.jsx("button", { onClick: () => U(ne), className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors", title: "Delete User", children: t.jsx(yt, { className: "h-4 w-4" }) })] })] }) })] }, ne.id)) }) : t.jsx("div", { className: "overflow-x-auto relative", children: t.jsxs("table", { className: "w-full divide-y divide-gray-200 dark:divide-gray-700", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-gray-900", children: t.jsxs("tr", { children: [t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${pe("user") ? "" : "hidden"}`, children: a("users.user") }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${pe("role") ? "" : "hidden"}`, children: a("users.role") }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${pe("status") ? "" : "hidden"}`, children: a("common.status") }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${pe("lastLogin") ? "" : "hidden"}`, children: a("users.lastLogin") }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${pe("createdAt") ? "" : "hidden"}`, children: a("users.created") }), t.jsx("th", { className: "px-6 py-3 text-end text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: a("common.actions") })] }) }), g ? t.jsx(Jl, { rows: 8, columns: 6 }) : t.jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: y ? t.jsx("tr", { children: t.jsx("td", { colSpan: v.length + 1, className: "px-6 py-12 text-center", children: t.jsx(Yr, { title: "Network or server error", description: y, icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), isError: !0 }) }) }) : n.length > 0 ? n.map(ne => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${pe("user") ? "" : "hidden"}`, children: t.jsxs("div", { className: "flex items-center", children: [t.jsx("div", { className: "flex-shrink-0 h-10 w-10", children: t.jsx("div", { className: "h-10 w-10 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center", children: t.jsxs("span", { className: "text-white font-medium text-sm", children: [ne.firstName[0], ne.lastName[0]] }) }) }), t.jsxs("div", { className: "ml-4", children: [t.jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: ne.fullName }), t.jsxs("div", { className: "text-sm text-gray-500 dark:text-gray-400 flex items-center", children: [t.jsx(ir, { className: "h-3 w-3 mr-1" }), ne.email] })] })] }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${pe("role") ? "" : "hidden"}`, children: t.jsx("div", { className: "flex flex-wrap gap-1", children: ne.roles.length > 0 ? ne.roles.map(De => t.jsxs("span", { className: "inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400", children: [t.jsx(Xs, { className: "h-3 w-3 mr-1" }), De.name] }, De.id)) : t.jsx("span", { className: "text-sm text-gray-500 dark:text-gray-400", children: a("users.noRoleAssigned") }) }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${pe("status") ? "" : "hidden"}`, children: t.jsxs("span", { className: `inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${ne.isActive ? "bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400" : "bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400"}`, children: [ne.isActive ? t.jsx(ut, { className: "h-3 w-3 mr-1" }) : t.jsx(Ca, { className: "h-3 w-3 mr-1" }), ne.isActive ? "Active" : "Inactive"] }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 ${pe("lastLogin") ? "" : "hidden"}`, children: ne.lastLogin ? t.jsxs("div", { className: "flex items-center", children: [t.jsx(Zt, { className: "h-3 w-3 mr-1" }), new Date(ne.lastLogin).toLocaleDateString()] }) : "Never" }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 ${pe("createdAt") ? "" : "hidden"}`, children: t.jsxs("div", { className: "flex items-center", children: [t.jsx(Zt, { className: "h-3 w-3 mr-1" }), new Date(ne.createdAt).toLocaleDateString()] }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-end text-sm font-medium", children: t.jsxs("div", { className: "flex items-center justify-end space-x-2", children: [e("user.update") && t.jsxs(t.Fragment, { children: [t.jsx("button", { onClick: () => H(ne), className: "text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors", title: "Edit user", children: t.jsx(Jt, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: () => K(ne), className: ["p-1 rounded transition-colors", ne.isActive ? "text-amber-600 hover:text-amber-900 hover:bg-amber-50 dark:hover:bg-amber-900/20" : "text-green-600 hover:text-green-900 hover:bg-green-50 dark:hover:bg-green-900/20"].join(" "), title: ne.isActive ? "Deactivate user" : "Activate user", children: ne.isActive ? t.jsx(Ca, { className: "h-4 w-4" }) : t.jsx(ut, { className: "h-4 w-4" }) })] }), e("user.delete") && t.jsx("button", { onClick: () => U(ne), className: "text-red-600 hover:text-red-900 p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors", title: "Delete user", children: t.jsx(yt, { className: "h-4 w-4" }) })] }) })] }, ne.id)) : t.jsx("tr", { children: t.jsx("td", { colSpan: v.length + 1, className: "px-6 py-12 text-center", children: t.jsx(Yr, { icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), description: He, showClearButton: Te, onClear: J }) }) }) })] }) })] }) : t.jsx("div", { className: "overflow-x-auto relative", children: t.jsxs("table", { className: "w-full divide-y divide-gray-200 dark:divide-gray-700", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-gray-900", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "User (Team Lead)" }), t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Reporting Authority" }), t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Team Size" }), t.jsx("th", { className: "px-6 py-3 text-end text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Actions" })] }) }), g ? t.jsx(Jl, { rows: 8, columns: 4 }) : y ? t.jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: t.jsx("tr", { children: t.jsx("td", { colSpan: 4, className: "px-6 py-12 text-center", children: t.jsx(Yr, { title: "Network or server error", description: y, icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), isError: !0 }) }) }) }) : n.length === 0 ? t.jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: t.jsx("tr", { children: t.jsx("td", { colSpan: 4, className: "px-6 py-12 text-center", children: t.jsx(Yr, { icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), description: "No teams found. Try adjusting your filters or clear all filters to see all teams.", showClearButton: Te, onClear: J }) }) }) }) : t.jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: n.map(ne => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-700", children: [t.jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx("div", { className: "h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold mr-3", children: ne.firstName[0] }), t.jsxs("div", { children: [t.jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: ne.fullName }), t.jsx("div", { className: "text-xs text-gray-500", children: ne.email })] })] }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500", children: ne.manager ? t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx(wt, { className: "h-4 w-4 text-gray-400" }), t.jsx("span", { children: ne.manager.fullName })] }) : t.jsx("span", { className: "text-gray-400 italic", children: "No Manager" }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: t.jsxs("span", { className: "inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400", children: [ne.teamSize || 0, " Members"] }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-end", children: t.jsx("button", { onClick: () => H(ne), className: "text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors", title: "Edit user", children: t.jsx(Jt, { className: "h-4 w-4" }) }) })] }, ne.id)) })] }) }), u && t.jsx(en, { currentPage: u.currentPage, totalPages: u.totalPages, totalItems: u.totalUsers, onPageChange: _, itemsPerPage: 50 })] }), t.jsx(Cm, { open: q && !!X, title: "Delete User", description: X ? t.jsxs("div", { className: "mb-2", children: [t.jsxs("div", { className: "flex items-center mb-3", children: [t.jsx("div", { className: "flex-shrink-0 h-12 w-12", children: t.jsx("div", { className: "h-12 w-12 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center", children: t.jsxs("span", { className: "text-white font-medium text-lg", children: [X.firstName[0], X.lastName[0]] }) }) }), t.jsxs("div", { className: "ml-4", children: [t.jsx("div", { className: "text-lg font-medium text-gray-900 dark:text-white", children: X.fullName }), t.jsx("div", { className: "text-sm text-gray-500 dark:text-gray-400", children: X.email })] })] }), t.jsx("p", { children: "Are you sure you want to delete this user? This action will deactivate their account and cannot be undone." })] }) : null, confirmText: "Delete User", cancelText: "Cancel", loading: le, onConfirm: Z, onClose: () => { le || (V(!1), se(null)) } })] }) }, FP = { firstName: "", lastName: "", email: "", password: "", roleIds: [], isActive: !0 }, tL = ({ initial: e, onSubmit: r, submitting: a, isEdit: s = !1 }) => { const [n, i] = h.useState({ ...FP, ...e || {} }), [o, c] = h.useState([]), [u, m] = h.useState([]), [g, f] = h.useState(null), [y, p] = h.useState(null), [b, j] = h.useState(null), [v, S] = h.useState(null), [k, E] = h.useState({ length: !1, lowercase: !1, uppercase: !1, number: !1, special: !1 }), [C, N] = h.useState(!1), [A, D] = h.useState(null); h.useEffect(() => { e && i({ ...FP, ...e }) }, [e]), h.useEffect(() => { (async () => { try { const [X, se] = await Promise.all([Xa.getRoles({ status: "active" }), ur.getUsers()]), le = X?.data?.roles ?? X?.roles ?? X?.data?.items ?? X?.items ?? []; c(Array.isArray(le) ? le : []); const ee = se?.data?.users ?? se?.data ?? se?.users ?? []; m(Array.isArray(ee) ? ee.map(L => ({ id: L.id, fullName: L.fullName || `${L.firstName} ${L.lastName}`, email: L.email })) : []) } catch (X) { console.error("Failed to load roles/users:", X) } })() }, []); const I = (V, X) => { if (i(se => ({ ...se, [V]: X })), V === "email") { const se = String(X || ""), le = se ? W(se) : null; f(le) } if (V === "password") { const se = String(X || ""); E(q(se)), y && p(null) } if (V === "firstName") { const se = M(String(X || "")); j(se) } if (V === "lastName") { const se = M(String(X || "")); S(se) } }, $ = V => { i(X => (A && D(null), { ...X, roleIds: [V] })) }, B = async V => { V.preventDefault(); let X = !1; const se = String(n.firstName || "").trim(), le = String(n.lastName || "").trim(), ee = String(n.email || ""), L = String(n.password || ""); if (se || (j("First name is required"), X = !0), le || (S("Last name is required"), X = !0), ee || (f("Email is required"), X = !0), X) return; const z = ee ? W(ee) : null; if (f(z), z) return; const T = M(se), _ = M(le); if (j(T), S(_), T || _) return; if ((!s || L) && L) { const U = q(L); if (!(U.length && U.lowercase && U.uppercase && U.number && U.special)) { E(U), p("Password must be 8+ chars with uppercase, lowercase, number, and special symbol"); return } } if ((n.roleIds || []).filter(U => typeof U == "number").length === 0) { D("Select at least one role"); return } D(null), await r(n) }, W = V => { const X = (V || "").trim(); if (!X || !/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(X)) return "Please enter a valid email address"; const [le, ee] = X.split("@"); return le.startsWith(".") || le.endsWith(".") || le.includes("..") || ee.includes("..") || ee.split(".").some(z => !z || z.startsWith("-") || z.endsWith("-")) ? "Please enter a valid email address" : null }, M = V => { const X = V.trim(); return X.length < 3 ? "Must be at least 3 characters" : /<[^>]*>/i.test(V) ? "Invalid characters detected" : /^[A-Za-z\s]+$/.test(X) ? null : "Only letters and spaces are allowed" }, q = V => { const X = /[a-z]/.test(V), se = /[A-Z]/.test(V), le = /[0-9]/.test(V), ee = /[^A-Za-z0-9]/.test(V); return { length: V.length >= 8, lowercase: X, uppercase: se, number: le, special: ee } }; return t.jsxs("form", { onSubmit: B, className: "space-y-5", noValidate: !0, children: [t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3", children: [t.jsx("div", { children: t.jsx(Xt, { label: "First Name", leftIcon: t.jsx(wt, { className: "h-4 w-4 text-gray-400" }), value: n.firstName || "", onChange: V => I("firstName", V.target.value), required: !0, error: b || void 0 }) }), t.jsx("div", { children: t.jsx(Xt, { label: "Last Name", leftIcon: t.jsx(wt, { className: "h-4 w-4 text-gray-400" }), value: n.lastName || "", onChange: V => I("lastName", V.target.value), required: !0, error: v || void 0 }) }), t.jsx("div", { children: t.jsx(Xt, { label: "Email", leftIcon: t.jsx(ir, { className: "h-4 w-4 text-gray-400" }), type: "email", value: n.email || "", onChange: V => I("email", V.target.value), required: !0, error: g || void 0 }) }), t.jsx("div", { children: t.jsx(Xt, { label: s ? "New Password" : "Password", leftIcon: t.jsx(km, { className: "h-4 w-4 text-gray-400" }), rightIcon: t.jsx("button", { type: "button", onClick: () => N(!C), className: "text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors", title: C ? "Hide password" : "Show password", children: C ? t.jsx(bn, { className: "h-4 w-4" }) : t.jsx(Ht, { className: "h-4 w-4" }) }), type: C ? "text" : "password", value: n.password || "", onChange: V => I("password", V.target.value), required: !1, minLength: 8, placeholder: s ? "Leave empty to keep current password" : "Leave empty to auto-generate and email to the user", error: y || void 0 }) })] }), t.jsxs("div", { className: "text-xs text-gray-700 dark:text-gray-300 space-y-1", children: [t.jsx("div", { className: "font-medium", children: "Password must include (only if you set it manually):" }), t.jsxs("div", { className: "grid grid-cols-1 sm:grid-cols-2 gap-1", children: [t.jsxs("div", { className: "flex items-center", children: [k.length ? t.jsx(ut, { className: "h-4 w-4 text-green-600 mr-1" }) : t.jsx(dr, { className: "h-4 w-4 text-gray-400 mr-1" }), t.jsx("span", { children: "At least 8 characters" })] }), t.jsxs("div", { className: "flex items-center", children: [k.lowercase ? t.jsx(ut, { className: "h-4 w-4 text-green-600 mr-1" }) : t.jsx(dr, { className: "h-4 w-4 text-gray-400 mr-1" }), t.jsx("span", { children: "Lowercase letter (a-z)" })] }), t.jsxs("div", { className: "flex items-center", children: [k.uppercase ? t.jsx(ut, { className: "h-4 w-4 text-green-600 mr-1" }) : t.jsx(dr, { className: "h-4 w-4 text-gray-400 mr-1" }), t.jsx("span", { children: "Uppercase letter (A-Z)" })] }), t.jsxs("div", { className: "flex items-center", children: [k.number ? t.jsx(ut, { className: "h-4 w-4 text-green-600 mr-1" }) : t.jsx(dr, { className: "h-4 w-4 text-gray-400 mr-1" }), t.jsx("span", { children: "Number (0-9)" })] }), t.jsxs("div", { className: "flex items-center", children: [k.special ? t.jsx(ut, { className: "h-4 w-4 text-green-600 mr-1" }) : t.jsx(dr, { className: "h-4 w-4 text-gray-400 mr-1" }), t.jsx("span", { children: "Special symbol (!@#$%^&*...)" })] })] }), t.jsx("div", { className: "text-gray-500 dark:text-gray-400", children: s ? "Leave password empty to keep the current one." : "" })] }), t.jsxs("div", { children: [t.jsxs("label", { className: "flex items-center space-x-2", children: [t.jsx("input", { type: "checkbox", checked: n.isActive ?? !0, onChange: V => I("isActive", V.target.checked), className: "rounded border-gray-300 text-blue-600 focus:ring-blue-500" }), t.jsxs("span", { className: "text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center", children: [t.jsx(ut, { className: "h-4 w-4 mr-1" }), "Active User"] })] }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Active users can log in and access the system" })] }), t.jsxs("div", { children: [t.jsxs("label", { className: "flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: [t.jsx(Xs, { className: "h-4 w-4 mr-1" }), "Reporting Authority"] }), t.jsxs("select", { className: "block w-full px-4 py-3 rounded-lg border text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500", value: n.managerId ?? "", onChange: V => I("managerId", V.target.value ? Number(V.target.value) : void 0), children: [t.jsx("option", { value: "", children: "None" }), u.map(V => t.jsxs("option", { value: V.id, children: [V.fullName, " (", V.email, ")"] }, V.id))] }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Select the user's reporting manager." })] }), t.jsxs("div", { children: [t.jsxs("label", { className: "flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: [t.jsx(Xs, { className: "h-4 w-4 mr-1" }), "Role"] }), t.jsx("div", { className: "space-y-2", children: o.length > 0 ? o.map(V => { const X = (n.roleIds || []).includes(V.id); return t.jsxs("label", { className: `flex items-center space-x-2 p-2 rounded-lg border cursor-pointer transition-colors ${X ? "border-blue-500 bg-blue-50 dark:bg-blue-900/20" : "border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`, children: [t.jsx("input", { type: "radio", name: "roleSelection", checked: X, onChange: () => $(V.id), className: "h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300" }), t.jsxs("div", { className: "flex-1", children: [t.jsx("span", { className: "text-sm font-medium text-gray-900 dark:text-white", children: V.name }), V.description && t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: V.description })] })] }, V.id) }) : t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "No roles available. Please create roles first." }) }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Select a role to assign to this user" }), A && t.jsx("p", { className: "text-xs text-red-500 mt-1", children: A })] }), t.jsx("div", { className: "flex justify-end", children: t.jsx("button", { type: "submit", disabled: a, className: "inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold text-white bg-rose-500 hover:bg-rose-600 focus:outline-none focus:ring-2 focus:ring-rose-500 disabled:opacity-50", children: a ? t.jsxs(t.Fragment, { children: [t.jsx("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2" }), s ? "Updating..." : "Creating..."] }) : s ? "Update User" : "Create User" }) })] }) }, hoe = () => { const [e, r] = h.useState(!1), a = xt(), { refreshUsersCount: s } = Sn(), n = async i => { try { if (r(!0), !i.roleIds || i.roleIds.length === 0) { R.error("Please select at least one role."); return } const o = { email: i.email, firstName: i.firstName, lastName: i.lastName, roleIds: i.roleIds, ...i.managerId ? { managerId: i.managerId } : {} }; i.password && i.password.trim() && (o.password = i.password.trim()), await ur.createUser(o), await s(), R.success("User created successfully!"), a("/users") } catch (o) { R.error(o?.response?.data?.message || o?.message || "Create failed") } finally { r(!1) } }; return t.jsxs("div", { className: "p-4 md:p-6", children: [t.jsxs("div", { className: "mb-6 flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Create User" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Fill in the details below" })] }), t.jsx("div", { className: "flex items-center gap-4 mb-4", children: t.jsx(qa, { to: "/users" }) })] }), t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4", children: t.jsx(tL, { onSubmit: n, submitting: e }) })] }) }, foe = () => { const [e, r] = h.useState(!1), [a, s] = h.useState(!0), [n, i] = h.useState(null), o = xt(), c = Hn(), { id: u } = gi(), { refreshUsersCount: m } = Sn(); h.useEffect(() => { (async () => { if (!u) { R.error("User ID not provided"), o("/users"); return } try { s(!0); const y = c.state?.user; if (y) i({ firstName: y.firstName, lastName: y.lastName, email: y.email, password: "", roleIds: y.roles?.map(p => p.id) || [], isActive: y.isActive, managerId: y.managerId }); else { const p = await ur.getUsers(), b = p?.data?.users ?? p?.data ?? p?.users ?? [], j = Array.isArray(b) ? b.find(v => v.id === parseInt(u)) : null; if (!j) { R.error("User not found"), o("/users"); return } i({ firstName: j.firstName, lastName: j.lastName, email: j.email, password: "", roleIds: j.roles?.map(v => v.id) || [], isActive: j.isActive, managerId: j.managerId }) } } catch (y) { console.error("Error getting user data:", y), R.error("Failed to load user data"), o("/users") } finally { s(!1) } })() }, [u, o, c.state]); const g = async f => { if (u) try { r(!0); const y = { email: f.email, firstName: f.firstName, lastName: f.lastName, isActive: f.isActive, managerId: f.managerId ?? null }; f.password && (y.password = f.password), await ur.updateUser(parseInt(u), y), await Xa.assignRoleToUser(parseInt(u), f.roleIds || []), await m(), R.success("User updated successfully!"), o("/users") } catch (y) { R.error(y?.response?.data?.message || y?.message || "Update failed") } finally { r(!1) } }; return a ? t.jsxs("div", { className: "p-4 md:p-6", children: [t.jsx("div", { className: "mb-6", children: t.jsx("div", { className: "flex items-center gap-4 mb-4", children: t.jsx(qa, { to: "/users" }) }) }), t.jsx("div", { className: "flex items-center justify-center h-64", children: t.jsx(ng, {}) })] }) : n ? t.jsxs("div", { className: "p-4 md:p-6", children: [t.jsxs("div", { className: "mb-6 flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Edit User" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Update the user details below" })] }), t.jsx("div", { className: "flex items-center gap-4 mb-4", children: t.jsx(qa, { to: "/users" }) })] }), t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4", children: t.jsx(tL, { initial: n, onSubmit: g, submitting: e, isEdit: !0 }) })] }) : t.jsxs("div", { className: "p-4 md:p-6", children: [t.jsx("div", { className: "mb-6", children: t.jsx("div", { className: "flex items-center gap-4 mb-4", children: t.jsx(qa, { to: "/users" }) }) }), t.jsx("div", { className: "text-center", children: t.jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "User not found" }) })] }) }, rL = ({ initial: e, onSubmit: r, submitting: a }) => { const [s, n] = h.useState({ name: "", description: "", permissionIds: [], accessScope: "OWN", isActive: !0 }), [i, o] = h.useState({}), [c, u] = h.useState(!0), [m, g] = h.useState({}); h.useEffect(() => { b() }, []), h.useEffect(() => { e && (n({ accessScope: "OWN", ...e }), g({})) }, [e]); const f = S => { const k = (S || "").trim(); return k ? k.length < 3 ? "Role name must be at least 3 characters" : /<[^>]*>/i.test(k) ? "Invalid characters detected" : /^[A-Za-z\s]+$/.test(k) ? null : "Only letters and spaces are allowed" : "Role name is required" }, y = /^[A-Za-z0-9 _-]+$/, p = S => { const k = (S || "").trim(); return k ? y.test(k) ? null : "Only letters, numbers, spaces, hyphen (-) and underscore (_) allowed" : null }, b = async () => { try { const S = await Xa.getPermissions(), E = ((Array.isArray(S?.data) ? S.data : S?.permissions || S?.data || []) || []).reduce((C, N) => { if (!N) return C; const A = N.module || "GENERAL"; return C[A] || (C[A] = []), C[A].push(N), C }, {}); o(E) } catch (S) { console.error("Error fetching permissions:", S), R.error("Failed to fetch permissions") } finally { u(!1) } }, j = S => { S.preventDefault(); const k = {}, E = f(s.name); E && (k.name = E), s.permissionIds.length === 0 && (k.permissions = "At least one permission is required"); const C = p(s.description); if (C && (k.description = C), Object.keys(k).length > 0) { g(k); return } g({}), r(s) }, v = (S, k) => { n(k ? { ...s, permissionIds: [...s.permissionIds, S] } : { ...s, permissionIds: s.permissionIds.filter(E => E !== S) }) }; return t.jsxs("form", { onSubmit: j, className: "space-y-5", noValidate: !0, children: [m.general && t.jsx("div", { className: "p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-sm text-red-700 dark:text-red-400", children: m.general }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3", children: [t.jsx("div", { children: t.jsx(Xt, { label: "Role Name", leftIcon: t.jsx(Xs, { className: "h-4 w-4 text-gray-400" }), value: s.name, onChange: S => { const k = S.target.value; n({ ...s, name: k }); const E = f(k); g(C => ({ ...C, name: E || "" })), E || g(C => { const { name: N, ...A } = C; return A }) }, required: !0, error: m.name }) }), e && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Status" }), t.jsxs("label", { className: "flex items-center space-x-2", children: [t.jsx("input", { type: "checkbox", checked: s.isActive, onChange: S => n({ ...s, isActive: S.target.checked }), className: "rounded border-gray-300 text-blue-600 focus:ring-blue-500" }), t.jsxs("span", { className: "text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center", children: [t.jsx(ut, { className: "h-4 w-4 mr-1" }), "Active Role"] })] }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Active roles can be assigned to users" })] })] }), t.jsx("div", { className: "grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3", children: t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Access Scope *" }), t.jsxs("select", { value: s.accessScope, onChange: S => n({ ...s, accessScope: S.target.value }), className: "w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500", required: !0, children: [t.jsx("option", { value: "OWN", children: "Own" }), t.jsx("option", { value: "GLOBAL", children: "Global" })] }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Choose whether this role grants access only to user's own records or global access." })] }) }), t.jsx(Kc, { label: "Description (Optional)", value: s.description, onChange: S => { const k = S.target.value; n({ ...s, description: k }); const E = p(k); g(C => ({ ...C, description: E || "" })), E || g(C => { const { description: N, ...A } = C; return A }) }, error: m.description, rows: 3 }), t.jsxs("div", { children: [t.jsxs("label", { className: "flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: [t.jsx(Hi, { className: "h-4 w-4 mr-1" }), "Permissions *"] }), m.permissions && t.jsx("p", { className: "text-sm text-red-600 dark:text-red-400 mb-3", children: m.permissions }), t.jsx("div", { className: "max-h-64 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-xl p-4 bg-white dark:bg-gray-700", children: c ? t.jsx("div", { className: "text-center py-4", children: t.jsx(ng, {}) }) : Object.entries(i || {}).length === 0 ? t.jsx("div", { className: "text-center py-4 text-gray-500 dark:text-gray-400", children: "No permissions available" }) : Object.entries(i || {}).map(([S, k]) => t.jsxs("div", { className: "mb-4 last:mb-0", children: [t.jsxs("h4", { className: "text-sm font-medium text-gray-900 dark:text-white mb-3 flex items-center", children: [t.jsx(Hi, { className: "h-4 w-4 mr-2 text-purple-600 dark:text-purple-400" }), S] }), t.jsx("div", { className: "space-y-2 ml-6", children: k.map(E => t.jsxs("label", { className: "flex items-center space-x-2 p-2 rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 cursor-pointer", children: [t.jsx("input", { type: "checkbox", checked: s.permissionIds.includes(E.id), onChange: C => v(E.id, C.target.checked), className: "rounded border-gray-300 text-blue-600 focus:ring-blue-500" }), t.jsxs("div", { className: "flex-1", children: [t.jsx("span", { className: "text-sm font-medium text-gray-900 dark:text-white", children: E.name }), E.description && t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: E.description })] })] }, E.id)) })] }, S)) }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: "Select one or more permissions to assign to this role" })] }), t.jsx("div", { className: "flex justify-end", children: t.jsx("button", { type: "submit", disabled: a, className: "inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold text-white bg-rose-500 hover:bg-rose-600 focus:outline-none focus:ring-2 focus:ring-rose-500 disabled:opacity-50", children: a ? t.jsxs(t.Fragment, { children: [t.jsx("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2" }), e ? "Updating..." : "Creating..."] }) : e ? "Update Role" : "Create Role" }) })] }) }, xoe = () => { const [e, r] = h.useState(!1), a = xt(), { refreshRolesCount: s } = Sn(), n = async i => { r(!0); const o = await Xa.createRole(i); o.success ? (R.success(o.message), await s(), a("/roles")) : R.error(o.message), r(!1) }; return t.jsxs("div", { className: "p-4 md:p-6", children: [t.jsxs("div", { className: "mb-6 flex  items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Create Role" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Fill in the details below to create a new role" })] }), t.jsx("div", { className: "flex items-center gap-4 mb-4", children: t.jsx(qa, { to: "/roles" }) })] }), t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4", children: t.jsx(rL, { onSubmit: n, submitting: e }) })] }) }, poe = () => { const [e, r] = h.useState(!0), [a, s] = h.useState(!1), [n, i] = h.useState(), [o, c] = h.useState(!1), [u, m] = h.useState(null), [g, f] = h.useState([]), y = xt(), { id: p } = gi(), b = Hn(), { refreshRolesCount: j } = Sn(); h.useEffect(() => { p && (async () => { try { if (r(!0), b.state?.role) { const A = b.state.role; i({ name: A.name, description: A.description || "", permissionIds: A.permissions?.map(D => D.id) || [], accessScope: A.accessScope || "OWN", isActive: A.isActive }), r(!1); return } const N = (await Xa.getRoles()).data.roles.find(A => A.id === Number(p)); if (!N) { R.error("Role not found"), y("/roles"); return } i({ name: N.name, description: N.description || "", permissionIds: N.permissions?.map(A => A.id) || [], accessScope: N.accessScope || "OWN", isActive: N.isActive }) } catch (E) { console.error("Error fetching role:", E), R.error("Failed to load role"), y("/roles") } finally { r(!1) } })() }, [p, b.state, y]); const v = async k => { if (n?.isActive === !0 && k.isActive === !1) { try { const E = await Xa.getUsersByRole(Number(p)); E.success && f(E.data || []) } catch (E) { console.error("Error fetching affected users:", E), f([]) } m(k), c(!0); return } S(k) }, S = async k => { s(!0); const E = await Xa.updateRole(Number(p), k); if (E.success) { if (R.success(E.message), E.warning && R.warn(E.warning), k.isActive === !1 && E.affectedUserIds && E.affectedUserIds.length > 0) try { const C = new CustomEvent("roleDeactivated", { detail: { userIds: E.affectedUserIds, roleName: n?.name, timestamp: new Date().toISOString() } }); window.dispatchEvent(C), sessionStorage.setItem("role_deactivation_event", JSON.stringify({ userIds: E.affectedUserIds, roleName: n?.name, timestamp: new Date().toISOString() })), R.info(`${E.affectedUserIds.length} user(s) will be logged out automatically`) } catch (C) { console.error("Error notifying users of logout:", C) } await j(), y("/roles") } else R.error(E.message); s(!1) }; return t.jsxs(t.Fragment, { children: [t.jsxs("div", { className: "p-4 md:p-6", children: [t.jsxs("div", { className: "mb-6 flex  items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Edit Role" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Update the role details below" })] }), t.jsx("div", { className: "flex items-center gap-4 mb-4", children: t.jsx(qa, { to: "/roles" }) })] }), t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4", children: e ? t.jsx(ng, {}) : t.jsx(rL, { initial: n, onSubmit: v, submitting: a }) })] }), o && t.jsx("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md", children: [t.jsx("h3", { className: "text-lg font-semibold mb-4 text-red-600", children: " Warning" }), t.jsx("div", { className: "mb-6 p-4 bg-red-100 dark:bg-red-900/40 border-2 border-red-600 rounded-lg", children: t.jsxs("p", { className: "text-red-900 dark:text-red-200 font-semibold text-center text-lg", children: [g.length, " User", g.length !== 1 ? "s" : "", " will be Deactivated"] }) }), g.length > 0 && t.jsxs("div", { className: "mb-6 max-h-48 overflow-y-auto bg-gray-50 dark:bg-gray-700/50 rounded p-4 border border-gray-200 dark:border-gray-600", children: [t.jsx("p", { className: "text-sm font-semibold text-gray-900 dark:text-white mb-3", children: "These users will not be able to login:" }), t.jsx("ul", { className: "space-y-2", children: g.map(k => t.jsxs("li", { className: "text-sm text-gray-700 dark:text-gray-300 flex items-center gap-2", children: [t.jsx("span", { className: "w-2 h-2 bg-red-600 rounded-full" }), t.jsxs("span", { children: [k.firstName, " ", k.lastName] }), t.jsxs("span", { className: "text-xs text-gray-500 dark:text-gray-400", children: ["(", k.email, ")"] })] }, k.id)) })] }), t.jsx("div", { className: "bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-3 mb-6", children: t.jsxs("p", { className: "text-sm text-yellow-800 dark:text-yellow-200", children: [t.jsx("strong", { children: "Note:" }), " These users won't be able to access the system until you reactivate the role."] }) }), t.jsxs("div", { className: "flex gap-3 justify-end", children: [t.jsx("button", { onClick: () => c(!1), className: "px-4 py-2 rounded bg-gray-300 dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-400 dark:hover:bg-gray-600 font-medium", children: "Cancel" }), t.jsx("button", { onClick: () => { c(!1), S(u) }, className: "px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700 font-medium", children: "Yes, Deactivate" })] })] }) })] }) }, yoe = () => { const e = xt(), { counts: r, refreshTrashCounts: a } = Sn(), s = [{ title: "Deleted Users", description: "Manage soft-deleted user accounts", icon: $s, path: "/trash/users", color: "from-blue-500 to-blue-600", bgColor: "bg-blue-50 dark:bg-blue-900/20", borderColor: "border-blue-200 dark:border-blue-800", countKey: "trashUsers", retention: "30 days" }, { title: "Deleted Leads", description: "Review removed lead records", icon: Mt, path: "/trash/leads", color: "from-green-500 to-green-600", bgColor: "bg-green-50 dark:bg-green-900/20", borderColor: "border-green-200 dark:border-green-800", countKey: "trashLeads", retention: "30 days" }, { title: "Deleted Roles", description: "Access removed role definitions", icon: Xs, path: "/trash/roles", color: "from-purple-500 to-purple-600", bgColor: "bg-purple-50 dark:bg-purple-900/20", borderColor: "border-purple-200 dark:border-purple-800", countKey: "trashRoles", retention: "30 days" }]; return h.useEffect(() => { a() }, [a]), t.jsxs("div", { className: "min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900", children: [t.jsxs("div", { className: "relative overflow-hidden", children: [t.jsx("div", { className: "absolute inset-0 bg-gradient-to-r from-rose-500/10 to-orange-500/10 dark:from-red-500/5 dark:to-orange-500/5" }), t.jsx("div", { className: "pointer-events-none absolute -right-8 -top-8 md:right-6 md:-top-10 aspect-square opacity-20 dark:opacity-15", children: t.jsxs("div", { className: "relative w-[220px] h-[220px] md:w-[320px] md:h-[320px] rotate-12", children: [t.jsx("div", { className: "absolute inset-0 blur-2xl bg-gradient-to-br from-red-400/50 to-orange-400/40 rounded-full" }), t.jsx("div", { className: "absolute inset-6 rounded-3xl border-2 border-white/40 dark:border-white/10" }), t.jsx(yt, { className: "absolute inset-0 m-auto w-44 h-44 md:w-64 md:h-64 text-rose-600 dark:text-rose-400" })] }) }), t.jsx("div", { className: "relative px-6 py-6", children: t.jsxs("div", { className: " mx-auto", children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-2", children: "Trash Management" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-300 ", children: "View soft-deleted records. Items are permanently deleted after 30 days." })] }) })] }), t.jsx("div", { className: "px-6 py-4", children: t.jsx("div", { className: "max-w-full mx-auto", children: t.jsx("div", { className: "grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4", children: s.map(n => t.jsxs("button", { onClick: () => e(n.path), className: `group relative overflow-hidden bg-white dark:bg-gray-800 rounded-2xl shadow border ${n.borderColor} hover:shadow-lg transition-all duration-300 w-full text-left`, children: [t.jsx("div", { className: `absolute inset-0 bg-gradient-to-br ${n.color} opacity-0 group-hover:opacity-5 transition-opacity duration-300` }), t.jsxs("div", { className: "relative px-4 py-3 w-full", children: [t.jsxs("div", { className: "flex items-start justify-between mb-3 w-full", children: [t.jsx("div", { className: `p-2.5 rounded-xl bg-gradient-to-br ${n.color} shadow-lg flex-shrink-0`, children: t.jsx(n.icon, { className: "h-4 w-4 text-white" }) }), t.jsx(gd, { className: "h-4 w-4 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors flex-shrink-0" })] }), t.jsxs("div", { className: "text-left w-full", children: [t.jsx("h3", { className: "text-base font-bold text-gray-900 dark:text-white mb-1.5 group-hover:text-gray-700 dark:group-hover:text-gray-200 transition-colors", children: n.title }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 text-xs leading-relaxed mb-0", children: n.description }), t.jsxs("div", { className: "flex items-center justify-between pt-3 mt-3 border-t border-gray-100 dark:border-gray-700 w-full", children: [t.jsxs("div", { className: "flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400", children: [t.jsx(Kt, { className: "h-3 w-3" }), t.jsx("span", { children: n.retention })] }), t.jsx("div", { className: "text-xs font-medium text-gray-600 dark:text-gray-300", children: (() => { const i = n.countKey, o = r?.[i] ?? 0, c = n.title.split(" ")[1]?.toLowerCase() || "items"; return `${o} ${c}` })() })] })] })] }), t.jsx("div", { className: "absolute inset-0 rounded-2xl border-2 border-transparent group-hover:border-gray-200 dark:group-hover:border-gray-600 transition-colors duration-300" })] }, n.title)) }) }) })] }) }, voe = () => { const [e, r] = h.useState([]), [a, s] = h.useState(1), [n] = h.useState(10), [i, o] = h.useState(0), [c, u] = h.useState(0), [m, g] = h.useState(!1), [f, y] = h.useState(""), p = h.useMemo(() => async v => { try { g(!0), y(""); const S = await ur.getDeletedUsers(v, n), k = S?.data?.users ?? []; r(k), o(S?.data?.pagination?.totalItems ?? 0), u(S?.data?.pagination?.totalPages ?? 0) } catch (S) { const k = S?.response?.data?.message || "Failed to load deleted users"; y(k), R.error(k, { toastId: "trash_users_fetch_error" }) } finally { g(!1) } }, [n]), b = async v => { if (window.confirm("Are you sure you want to restore this user?")) try { await ur.restoreUser(v), R.success("User restored successfully!"), p(a) } catch (S) { const k = S?.response?.data?.message || "Failed to restore user"; R.error(k, { toastId: "trash_users_restore_error" }) } }, j = async v => { if (window.confirm("This will permanently delete the user and all of their data. This action cannot be undone. Continue?")) try { await ur.deleteUserPermanently(v), R.success("User deleted permanently!"), p(a) } catch (S) { const k = S?.response?.data?.message || "Failed to permanently delete user"; R.error(k, { toastId: "trash_users_permanent_delete_error" }) } }; return h.useEffect(() => { p(a) }, [p, a]), t.jsxs("div", { className: "relative space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen overflow-hidden", children: [t.jsx("div", { className: "pointer-events-none absolute -right-10 -top-10 md:right-0 md:-top-8 aspect-square opacity-20 dark:opacity-15", children: t.jsxs("div", { className: "relative w-[220px] h-[220px] md:w-[320px] md:h-[320px] rotate-12", children: [t.jsx("div", { className: "absolute inset-0 blur-2xl bg-gradient-to-br from-rose-400/40 to-orange-400/30 rounded-full" }), t.jsx("div", { className: "absolute inset-6 rounded-3xl border-2 border-white/40 dark:border-white/10" }), t.jsx($s, { className: "absolute inset-0 m-auto w-44 h-44 md:w-64 md:h-64 text-rose-600/60 dark:text-rose-400/50" })] }) }), t.jsxs("div", { className: "flex items-center  justify-between", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2.5 rounded-xl bg-gradient-to-br from-[#EF444E] to-[#ff5a64] text-white shadow-md", children: t.jsx($s, { className: "h-5 w-5" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-xl font-bold text-gray-900 dark:text-white", children: "Users Trash" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "View soft-deleted users. Items are permanently deleted after 30 days." })] })] }), t.jsx(qa, { to: "/trash" })] }), t.jsxs("div", { className: "bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden hover:shadow-xl transition-all duration-300", children: [t.jsx("div", { className: "overflow-x-auto relative", children: t.jsxs("table", { className: "w-full divide-y divide-gray-200 dark:divide-gray-700", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-gray-900", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "User" }), t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Email" }), t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Deleted" }), t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Actions" })] }) }), m ? t.jsx(Jl, { rows: 8, columns: 5 }) : t.jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: f ? t.jsx("tr", { children: t.jsx("td", { colSpan: 5, className: "px-6 py-12 text-center", children: t.jsx(Yr, { title: "Network or server error", description: f, icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), isError: !0 }) }) }) : e.length > 0 ? e.map(v => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx("div", { className: "h-10 w-10 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center", children: t.jsxs("span", { className: "text-white font-medium text-sm", children: [v.firstName?.[0], v.lastName?.[0]] }) }), t.jsxs("div", { className: "ml-4", children: [t.jsxs("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: [v.firstName, " ", v.lastName] }), t.jsxs("div", { className: "text-sm text-gray-500 dark:text-gray-400 flex items-center md:hidden", children: [t.jsx(ir, { className: "h-3 w-3 mr-1" }), " ", v.email] })] })] }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 hidden md:table-cell", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx(ir, { className: "h-3 w-3 mr-1" }), " ", v.email] }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx(Zt, { className: "h-3 w-3 mr-1" }), " ", new Date(v.deletedAt).toLocaleString()] }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm font-medium", children: t.jsxs("div", { className: "flex flex-wrap gap-2", children: [t.jsxs("button", { onClick: () => b(v.id), className: "inline-flex items-center px-3 py-1.5 text-xs font-medium text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors", title: "Restore user", children: [t.jsx(Sm, { className: "h-3 w-3 mr-1" }), "Restore"] }), t.jsxs("button", { onClick: () => j(v.id), className: "inline-flex items-center px-3 py-1.5 text-xs font-medium text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors", title: "Delete permanently", children: [t.jsx(yt, { className: "h-3 w-3 mr-1" }), "Delete"] })] }) })] }, v.id)) : t.jsx("tr", { children: t.jsx("td", { colSpan: 5, className: "px-6 py-12 text-center", children: t.jsx(Yr, { icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), description: "No deleted users found." }) }) }) })] }) }), t.jsx(en, { currentPage: a, totalPages: c, totalItems: i, onPageChange: v => { s(v), window.scrollTo({ top: 0, behavior: "smooth" }) }, itemsPerPage: n })] })] }) }, boe = () => { const [e, r] = h.useState([]), [a, s] = h.useState(1), [n] = h.useState(10), [i, o] = h.useState(0), [c, u] = h.useState(0), [m, g] = h.useState(!1), [f, y] = h.useState(""), p = h.useMemo(() => async v => { try { g(!0), y(""); const S = await Yt.getDeletedLeads(v, n), k = S?.data?.leads ?? []; r(k), o(S?.data?.pagination?.totalItems ?? 0), u(S?.data?.pagination?.totalPages ?? 0) } catch (S) { const k = S?.response?.data?.message || "Failed to load deleted leads"; y(k), R.error(k, { toastId: "trash_leads_fetch_error" }) } finally { g(!1) } }, [n]), b = async v => { if (window.confirm("Are you sure you want to restore this lead?")) try { await Yt.restoreLead(v), R.success("Lead restored successfully!"), p(a) } catch (S) { const k = S?.response?.data?.message || "Failed to restore lead"; R.error(k, { toastId: "trash_leads_restore_error" }) } }, j = async v => { if (window.confirm("This will permanently delete the lead and its related data. This action cannot be undone. Continue?")) try { await Yt.deleteLeadPermanently(v), R.success("Lead deleted permanently!"), p(a) } catch (S) { const k = S?.response?.data?.message || "Failed to permanently delete lead"; R.error(k, { toastId: "trash_leads_permanent_delete_error" }) } }; return h.useEffect(() => { p(a) }, [p, a]), t.jsxs("div", { className: "relative space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen overflow-hidden", children: [t.jsx("div", { className: "pointer-events-none absolute -right-10 -top-10 md:right-0 md:-top-8 aspect-square opacity-20 dark:opacity-15", children: t.jsxs("div", { className: "relative w-[220px] h-[220px] md:w-[320px] md:h-[320px] rotate-12", children: [t.jsx("div", { className: "absolute inset-0 blur-2xl bg-gradient-to-br from-rose-400/40 to-orange-400/30 rounded-full" }), t.jsx("div", { className: "absolute inset-6 rounded-3xl border-2 border-white/40 dark:border-white/10" }), t.jsx(Mt, { className: "absolute inset-0 m-auto w-44 h-44 md:w-64 md:h-64 text-rose-600/60 dark:text-rose-400/50" })] }) }), t.jsxs("div", { className: "flex items-center  justify-between", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2.5 rounded-xl bg-gradient-to-br from-[#EF444E] to-[#ff5a64] text-white shadow-md", children: t.jsx(Mt, { className: "h-5 w-5" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-xl font-bold text-gray-900 dark:text-white", children: "Leads Trash" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "View soft-deleted leads. Items are permanently deleted after 30 days." })] })] }), t.jsx(qa, { to: "/trash" })] }), t.jsxs("div", { className: "bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden hover:shadow-xl transition-all duration-300", children: [t.jsx("div", { className: "overflow-x-auto relative", children: t.jsxs("table", { className: "w-full divide-y divide-gray-200 dark:divide-gray-700", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-gray-900", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Lead" }), t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Email" }), t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Phone" }), t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Company" }), t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Deleted" }), t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Actions" })] }) }), m ? t.jsx(Jl, { rows: 8, columns: 6 }) : t.jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: f ? t.jsx("tr", { children: t.jsx("td", { colSpan: 6, className: "px-6 py-12 text-center", children: t.jsx(Yr, { title: "Network or server error", description: f, icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), isError: !0 }) }) }) : e.length > 0 ? e.map(v => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx("div", { className: "h-10 w-10 rounded-full bg-gradient-to-br from-[#EF444E] to-[#ff5a64] flex items-center justify-center", children: t.jsxs("span", { className: "text-white font-medium text-sm", children: [v.firstName?.[0], v.lastName?.[0]] }) }), t.jsxs("div", { className: "ml-4", children: [t.jsxs("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: [v.firstName, " ", v.lastName] }), t.jsx("div", { className: "text-xs text-gray-500 dark:text-gray-400 md:hidden", children: v.company || "" })] })] }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 hidden md:table-cell", children: v.email ?? "" }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 hidden md:table-cell", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx(ma, { className: "h-3 w-3 mr-1" }), " ", v.phone ?? ""] }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 hidden md:table-cell", children: v.company ?? "" }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx(Zt, { className: "h-3 w-3 mr-1" }), v.deletedAt ? new Date(v.deletedAt).toLocaleString() : ""] }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm font-medium", children: t.jsxs("div", { className: "flex flex-wrap gap-2", children: [t.jsxs("button", { onClick: () => b(v.id), className: "inline-flex items-center px-3 py-1.5 text-xs font-medium text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors", title: "Restore lead", children: [t.jsx(Sm, { className: "h-3 w-3 mr-1" }), "Restore"] }), t.jsxs("button", { onClick: () => j(v.id), className: "inline-flex items-center px-3 py-1.5 text-xs font-medium text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors", title: "Delete permanently", children: [t.jsx(yt, { className: "h-3 w-3 mr-1" }), "Delete"] })] }) })] }, v.id)) : t.jsx("tr", { children: t.jsx("td", { colSpan: 6, className: "px-6 py-12 text-center", children: t.jsx(Yr, { icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), description: "No deleted leads found." }) }) }) })] }) }), t.jsx(en, { currentPage: a, totalPages: c, totalItems: i, onPageChange: v => { s(v), window.scrollTo({ top: 0, behavior: "smooth" }) }, itemsPerPage: n })] })] }) }, woe = () => { const [e, r] = h.useState([]), [a, s] = h.useState(1), [n] = h.useState(10), [i, o] = h.useState(0), [c, u] = h.useState(0), [m, g] = h.useState(!1), [f, y] = h.useState(""), p = h.useMemo(() => async v => { try { g(!0), y(""); const S = await Xa.getDeletedRoles(v, n), k = S?.data?.roles ?? []; r(k), o(S?.data?.pagination?.totalItems ?? 0), u(S?.data?.pagination?.totalPages ?? 0) } catch (S) { const k = S?.response?.data?.message || "Failed to load deleted roles"; y(k), R.error(k, { toastId: "trash_roles_fetch_error" }) } finally { g(!1) } }, [n]), b = async v => { if (window.confirm("Are you sure you want to restore this role?")) try { await Xa.restoreRole(v), R.success("Role restored successfully!"), p(a) } catch (S) { const k = S?.response?.data?.message || "Failed to restore role"; R.error(k, { toastId: "trash_roles_restore_error" }) } }, j = async v => { if (window.confirm("This will permanently delete the role. Any associated permissions will be lost. Continue?")) try { await Xa.deleteRolePermanently(v), R.success("Role deleted permanently!"), p(a) } catch (S) { const k = S?.response?.data?.message || "Failed to permanently delete role"; R.error(k, { toastId: "trash_roles_permanent_delete_error" }) } }; return h.useEffect(() => { p(a) }, [p, a]), t.jsxs("div", { className: "relative space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen overflow-hidden", children: [t.jsx("div", { className: "pointer-events-none absolute -right-10 -top-10 md:right-0 md:-top-8 aspect-square opacity-20 dark:opacity-15", children: t.jsxs("div", { className: "relative w-[220px] h-[220px] md:w-[320px] md:h-[320px] rotate-12", children: [t.jsx("div", { className: "absolute inset-0 blur-2xl bg-gradient-to-br from-purple-400/40 to-rose-400/30 rounded-full" }), t.jsx("div", { className: "absolute inset-6 rounded-3xl border-2 border-white/40 dark:border-white/10" }), t.jsx(Xs, { className: "absolute inset-0 m-auto w-44 h-44 md:w-64 md:h-64 text-purple-600/60 dark:text-purple-400/50" })] }) }), t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2.5 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 text-white shadow-md", children: t.jsx(Xs, { className: "h-5 w-5" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-xl font-bold text-gray-900 dark:text-white", children: "Roles Trash" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "View soft-deleted roles. Items are permanently deleted after 30 days." })] })] }), t.jsx(qa, { to: "/trash" })] }), t.jsxs("div", { className: "bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden hover:shadow-xl transition-all duration-300", children: [t.jsx("div", { className: "overflow-x-auto relative", children: t.jsxs("table", { className: "w-full divide-y divide-gray-200 dark:divide-gray-700", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-gray-900", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Role" }), t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Description" }), t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Deleted" }), t.jsx("th", { className: "px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Actions" })] }) }), m ? t.jsx(Jl, { rows: 8, columns: 5 }) : t.jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: f ? t.jsx("tr", { children: t.jsx("td", { colSpan: 5, className: "px-6 py-12 text-center", children: t.jsx(Yr, { title: "Network or server error", description: f, icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), isError: !0 }) }) }) : e.length > 0 ? e.map(v => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx("div", { className: "p-2 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg shadow-md", children: t.jsx(Xs, { className: "h-4 w-4 text-white" }) }), t.jsx("span", { className: "ml-3 text-sm font-medium text-gray-900 dark:text-white", children: v.name })] }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white", children: v.description ?? "" }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx(Zt, { className: "h-3 w-3 mr-1" }), " ", new Date(v.deletedAt).toLocaleString()] }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm font-medium", children: t.jsxs("div", { className: "flex flex-wrap gap-2", children: [t.jsxs("button", { onClick: () => b(v.id), className: "inline-flex items-center px-3 py-1.5 text-xs font-medium text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors", title: "Restore role", children: [t.jsx(Sm, { className: "h-3 w-3 mr-1" }), "Restore"] }), t.jsxs("button", { onClick: () => j(v.id), className: "inline-flex items-center px-3 py-1.5 text-xs font-medium text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors", title: "Delete permanently", children: [t.jsx(yt, { className: "h-3 w-3 mr-1" }), "Delete"] })] }) })] }, v.id)) : t.jsx("tr", { children: t.jsx("td", { colSpan: 5, className: "px-6 py-12 text-center", children: t.jsx(Yr, { icon: t.jsx(wt, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), description: "No deleted roles found." }) }) }) })] }) }), t.jsx(en, { currentPage: a, totalPages: c, totalItems: i, onPageChange: v => { s(v), window.scrollTo({ top: 0, behavior: "smooth" }) }, itemsPerPage: n })] })] }) }, joe = () => { const [e, r] = h.useState([]), [a, s] = h.useState({}), [n, i] = h.useState({}), [o, c] = h.useState(!0), [u, m] = h.useState(!1), [g, f] = h.useState(null), [y, p] = h.useState(null), [b, j] = h.useState({}); h.useEffect(() => { v() }, []); const v = async () => { try { c(!0); const A = await fetch("/api/business-settings/integrations/available", { headers: { Authorization: `Bearer ${localStorage.getItem(Ot.AUTH_TOKEN)}` } }); if (A.ok) { const $ = await A.json(); r($.data.integrations) } const D = await fetch("/api/business-settings/integrations/status", { headers: { Authorization: `Bearer ${localStorage.getItem(Ot.AUTH_TOKEN)}` } }); if (D.ok) { const $ = await D.json(); s($.data.integrations) } const I = await fetch("/api/business-settings/settings", { headers: { Authorization: `Bearer ${localStorage.getItem(Ot.AUTH_TOKEN)}` } }); if (I.ok) { const $ = await I.json(); i($.data.settings) } } catch (A) { console.error("Error fetching integrations:", A), R.error("Failed to load integration settings") } finally { c(!1) } }, S = (A, D) => { i(I => ({ ...I, [A]: D })) }, k = A => { j(D => ({ ...D, [A]: !D[A] })) }, E = async () => { try { m(!0); const A = await fetch("/api/business-settings/settings", { method: "PUT", headers: { Authorization: `Bearer ${localStorage.getItem(Ot.AUTH_TOKEN)}`, "Content-Type": "application/json" }, body: JSON.stringify(n) }), D = await A.json(); if (!A.ok) throw new Error(D.message || "Failed to save settings"); R.success("Integration settings saved successfully"), await v() } catch (A) { R.error(A.message || "Failed to save settings") } finally { m(!1) } }, C = async A => { try { f(A); const D = await fetch(`/api/business-settings/integrations/${A}/test`, { method: "POST", headers: { Authorization: `Bearer ${localStorage.getItem(Ot.AUTH_TOKEN)}` } }), I = await D.json(); if (!D.ok) throw new Error(I.message || "Connection test failed"); R.success(`${A} connection test successful`) } catch (D) { R.error(D.message || `${A} connection test failed`) } finally { f(null) } }, N = async A => { try { p(A); const D = await fetch(`/api/business-settings/integrations/${A}/sync`, { method: "POST", headers: { Authorization: `Bearer ${localStorage.getItem(Ot.AUTH_TOKEN)}` } }), I = await D.json(); if (!D.ok) throw new Error(I.message || "Lead sync failed"); R.success(I.message || `${A} leads synced successfully`) } catch (D) { R.error(D.message || `${A} lead sync failed`) } finally { p(null) } }; return o ? t.jsx("div", { className: "space-y-6 p-6", children: t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx(Uo, { className: "h-5 w-5 animate-spin" }), t.jsx("span", { children: "Loading integration settings..." })] }) }) : t.jsxs("div", { className: "space-y-6 p-6", children: [t.jsxs("div", { children: [t.jsx("h2", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-2", children: "Third-Party Integrations" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "Configure integrations to automatically import leads from external platforms." })] }), e.map(A => t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-6", children: [t.jsxs("div", { className: "flex items-start justify-between mb-4", children: [t.jsxs("div", { className: "flex items-start space-x-4", children: [t.jsx("div", { className: "flex-shrink-0", children: t.jsx("div", { className: "w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center", children: t.jsx(Hi, { className: "h-6 w-6 text-white" }) }) }), t.jsxs("div", { children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: A.displayName }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mb-2", children: A.description }), t.jsxs("div", { className: "flex items-center space-x-2", children: [a[A.name.replace("-", "")]?.configured ? t.jsxs("div", { className: "flex items-center text-green-600 dark:text-green-400", children: [t.jsx(ut, { className: "h-4 w-4 mr-1" }), t.jsx("span", { className: "text-sm", children: "Configured" })] }) : t.jsxs("div", { className: "flex items-center text-gray-400", children: [t.jsx(Ca, { className: "h-4 w-4 mr-1" }), t.jsx("span", { className: "text-sm", children: "Not configured" })] }), a[A.name.replace("-", "")]?.enabled && t.jsx("span", { className: "bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full", children: "Enabled" })] })] })] }), t.jsx("div", { className: "flex items-center space-x-2", children: a[A.name.replace("-", "")]?.configured && t.jsxs(t.Fragment, { children: [t.jsx("button", { onClick: () => C(A.name), disabled: g === A.name || y === A.name, className: "px-3 py-2 text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center", children: g === A.name ? t.jsx(Uo, { className: "h-4 w-4 mr-1 animate-spin" }) : "Test" }), t.jsx("button", { onClick: () => N(A.name), disabled: g === A.name || y === A.name, className: "px-3 py-2 text-sm bg-green-100 text-green-700 rounded-md hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center", children: y === A.name ? t.jsx(Uo, { className: "h-4 w-4 mr-1 animate-spin" }) : "Sync Now" })] }) })] }), t.jsxs("div", { className: "grid md:grid-cols-2 gap-6", children: [t.jsxs("div", { className: "space-y-4", children: [t.jsx("h4", { className: "font-medium text-gray-900 dark:text-white", children: "Configuration" }), t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("label", { className: "text-sm font-medium text-gray-700 dark:text-gray-300", children: "Enable Integration" }), t.jsx("input", { type: "checkbox", checked: n[`${A.name.replace("-", "")}Enabled`] || !1, onChange: D => S(`${A.name.replace("-", "")}Enabled`, D.target.checked), className: "rounded text-blue-600 focus:ring-blue-500" })] }), A.fields.map(D => { const I = `${A.name.replace("-", "")}${D.name === "apiKey" ? "ApiKey" : "ApiSecret"}`, $ = D.type === "password", B = b[`${A.name}-${D.name}`]; return t.jsxs("div", { children: [t.jsxs("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: [D.label, " ", D.required && "*"] }), t.jsxs("div", { className: "relative", children: [t.jsx("input", { type: $ && !B ? "password" : "text", value: n[I] || "", onChange: W => S(I, W.target.value), placeholder: `Enter ${D.label.toLowerCase()}`, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white pr-10" }), $ && t.jsx("button", { type: "button", onClick: () => k(`${A.name}-${D.name}`), className: "absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600", children: B ? t.jsx(bn, { className: "h-4 w-4" }) : t.jsx(Ht, { className: "h-4 w-4" }) })] })] }, D.name) })] }), t.jsxs("div", { className: "space-y-4", children: [t.jsx("h4", { className: "font-medium text-gray-900 dark:text-white", children: "Setup Instructions" }), t.jsx("div", { className: "bg-gray-50 dark:bg-gray-700 rounded-md p-4", children: t.jsx("pre", { className: "text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-sans", children: A.instructions }) })] })] })] }, A.name)), t.jsxs("div", { className: "flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-600", children: [t.jsx("button", { onClick: () => window.location.reload(), className: "px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200", children: "Cancel" }), t.jsx("button", { onClick: E, disabled: u, className: "px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center", children: u ? t.jsxs(t.Fragment, { children: [t.jsx(Uo, { className: "h-4 w-4 mr-2 animate-spin" }), "Saving..."] }) : "Save Settings" })] })] }) }, Mu = { getLeadSources: async () => (await ie.get("/lead-sources")).data, createLeadSource: async e => (await ie.post("/lead-sources", e)).data, updateLeadSource: async (e, r) => (await ie.put(`/lead-sources/${e}`, r)).data, deleteLeadSource: async e => { await ie.delete(`/lead-sources/${e}`) } }, ib = ({ open: e, title: r, onClose: a, onSubmit: s, submitText: n = "Save", disabled: i, children: o }) => e ? t.jsxs("div", { className: "fixed inset-0 z-50 flex items-center justify-center p-4", role: "dialog", "aria-modal": "true", "aria-labelledby": "modal-title", children: [t.jsx("div", { className: "absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity", onClick: a }), t.jsx("div", { className: "relative w-full max-w-md", children: t.jsx("div", { className: "relative overflow-hidden rounded-xl border border-gray-200/70 dark:border-gray-700/60 bg-white dark:bg-gray-900 shadow-xl max-h-[85vh] flex flex-col", children: t.jsxs("form", { onSubmit: s, noValidate: !0, children: [t.jsxs("div", { className: "flex items-start justify-between px-5 pt-5 pb-3", children: [t.jsx("h3", { id: "modal-title", className: "text-base font-semibold text-gray-900 dark:text-white", children: r }), t.jsx("button", { type: "button", onClick: a, className: "inline-flex h-8 w-8 items-center justify-center rounded-md text-gray-500 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-900/20", "aria-label": "Close", children: t.jsx("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", className: "h-4 w-4", children: t.jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M6 18L18 6M6 6l12 12" }) }) })] }), t.jsx("div", { className: "px-5 pb-5 space-y-4 overflow-y-auto flex-1", children: o }), t.jsxs("div", { className: "flex justify-end gap-2 px-5 py-4 border-t border-gray-200 dark:border-gray-800 bg-gray-50/60 dark:bg-gray-900", children: [t.jsx("button", { type: "button", onClick: a, className: "px-4 py-2 rounded-md text-sm border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-900/20", children: "Cancel" }), t.jsx("button", { type: "submit", disabled: i, className: `px-4 py-2 rounded-md text-sm text-white focus:outline-none focus:ring-2 focus:ring-gray-900/20 transition-colors ${i ? "bg-gray-400 cursor-not-allowed" : "bg-gray-900 hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600"}`, children: n })] })] }) }) })] }) : null, Noe = ["#ef4444", "#f97316", "#f59e0b", "#eab308", "#84cc16", "#22c55e", "#10b981", "#14b8a6", "#06b6d4", "#3b82f6", "#6366f1", "#8b5cf6", "#a855f7", "#d946ef", "#ec4899", "#f43f5e", "#111827", "#64748b"], koe = ({ colors: e = Noe, value: r, onChange: a }) => t.jsx("div", { className: "grid grid-cols-9 gap-2", children: e.map(s => { const n = r?.toLowerCase() === s.toLowerCase(); return t.jsx("button", { type: "button", onClick: () => a && a(s), className: `h-6 w-6 rounded-md border ${n ? "ring-2 ring-offset-2 ring-gray-900 dark:ring-gray-300" : ""}`, style: { backgroundColor: s, borderColor: "#e5e7eb" }, title: s }, s) }) }), Soe = ({ checked: e, onChange: r, label: a, activeLabel: s = "Active", inactiveLabel: n = "Inactive", className: i = "" }) => t.jsxs("div", { className: `flex items-center ${i}`, children: [a && t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 mr-3", children: a }), t.jsxs("div", { className: "flex items-center space-x-3", children: [t.jsx("button", { type: "button", onClick: () => r(!e), className: `relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#ef444e] focus:ring-offset-2 ${e ? "bg-gradient-to-r from-[#ef444e] to-[#f26971]" : "bg-gray-300 dark:bg-gray-600"}`, children: t.jsx("span", { className: `inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e ? "translate-x-6" : "translate-x-1"}` }) }), t.jsx("div", { className: "flex items-center space-x-1", children: e ? t.jsxs(t.Fragment, { children: [t.jsx(ut, { className: "h-4 w-4 text-[#ef444e]" }), t.jsx("span", { className: "text-sm font-medium text-[#ef444e] dark:text-[#f26971]", children: s })] }) : t.jsxs(t.Fragment, { children: [t.jsx(Ca, { className: "h-4 w-4 text-gray-400 dark:text-gray-500" }), t.jsx("span", { className: "text-sm font-medium text-gray-500 dark:text-gray-400", children: n })] }) })] })] }), Coe = ({ fields: e, onEdit: r, onDelete: a, onToggleActive: s, showOptionsSource: n = !1 }) => e.length === 0 ? t.jsxs("div", { className: "text-center py-10 text-gray-500 dark:text-gray-400", children: [t.jsx("p", { className: "text-sm font-medium", children: "No fields configured" }), t.jsx("p", { className: "text-xs mt-1", children: "Default and custom fields will appear here" })] }) : t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "min-w-full text-sm", children: [t.jsx("thead", { children: t.jsxs("tr", { className: "text-left text-gray-600 dark:text-gray-300", children: [t.jsx("th", { className: "py-2 pr-3", children: "Field" }), t.jsx("th", { className: "py-2 pr-3", children: "Key" }), t.jsx("th", { className: "py-2 pr-3", children: "Type" }), t.jsx("th", { className: "py-2 pr-3", children: "Options" }), t.jsx("th", { className: "py-2 pr-3", children: "Can Turn Off" }), t.jsx("th", { className: "py-2 pr-3", children: "Required" }), t.jsx("th", { className: "py-2 pr-3", children: "Active" }), t.jsx("th", { className: "py-2 pr-3 text-right", children: "Actions" })] }) }), t.jsx("tbody", { children: e.map(i => t.jsxs("tr", { className: "border-t border-gray-100 dark:border-gray-700 hover:bg-gray-50/70 dark:hover:bg-gray-700/40 transition-colors", children: [t.jsxs("td", { className: "py-2 pr-3", children: [t.jsxs("div", { className: "font-medium text-gray-900 dark:text-white flex items-center", children: [t.jsx(Mt, { className: "h-4 w-4 mr-2 text-gray-400" }), " ", i.name] }), i.description && t.jsx("div", { className: "text-xs text-gray-500 dark:text-gray-400", children: i.description })] }), t.jsx("td", { className: "py-2 pr-3 text-gray-700 dark:text-gray-300", children: i.key }), t.jsx("td", { className: "py-2 pr-3 text-gray-700 dark:text-gray-300", children: t.jsx("span", { className: "inline-flex items-center rounded-full bg-indigo-50 px-2 py-0.5 text-[11px] font-medium text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-200", children: i.type }) }), t.jsx("td", { className: "py-2 pr-3 text-gray-700 dark:text-gray-300", children: i.type === "DROPDOWN" || i.type === "MULTI_SELECT" ? t.jsx("span", { className: "inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-[11px] font-medium text-gray-700 dark:bg-gray-700 dark:text-gray-200", children: n && i.optionsSource ? i.optionsSource === "roles" ? "Roles" : i.optionsSource === "users" ? "Users" : `${i.options?.length || 0} values` : `${i.options?.length || 0} values` }) : t.jsx("span", { className: "text-xs text-gray-400", children: "" }) }), t.jsx("td", { className: "py-2 pr-3", children: t.jsx("span", { className: `inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium ${i.canBeTurnedOff ? "bg-emerald-50 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-200" : "bg-rose-50 text-rose-700 dark:bg-rose-900/40 dark:text-rose-200"}`, children: i.canBeTurnedOff ? "Yes" : "No" }) }), t.jsx("td", { className: "py-2 pr-3", children: t.jsx("span", { className: `inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium ${i.required ? "bg-amber-50 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200" : "bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-200"}`, children: i.required ? "Yes" : "No" }) }), t.jsx("td", { className: "py-2 pr-3", children: t.jsx("div", { title: i.canBeTurnedOff ? "" : "This field cannot be turned off", children: t.jsx(Soe, { checked: i.isActive, onChange: o => { i.canBeTurnedOff && s(i, o) }, activeLabel: "On", inactiveLabel: "Off", className: i.canBeTurnedOff ? "" : "opacity-50 pointer-events-none" }) }) }), t.jsx("td", { className: "py-2 pr-3", children: t.jsxs("div", { className: "flex justify-end space-x-2", children: [t.jsx("button", { onClick: () => r(i), className: "px-2 py-1 rounded-md border border-gray-300 dark:border-gray-600 text-xs hover:bg-gray-50 dark:hover:bg-gray-700 shadow-sm dark:text-white", children: t.jsx(Jt, { className: "h-4 w-4" }) }), !i.isDefault && t.jsx("button", { onClick: () => a(i.id, i.isDefault), className: "px-2 py-1 rounded-md border border-gray-300 dark:border-gray-600 text-xs hover:bg-red-50 dark:hover:bg-gray-700 text-red-600 shadow-sm", children: t.jsx(yt, { className: "h-4 w-4" }) })] }) })] }, i.id)) })] }) }), aL = /^[A-Za-z0-9 _-]+$/, Au = e => { const r = (e || "").trim(); if (!r) return "Name is required"; if (!aL.test(r)) return "Only letters, numbers, spaces, hyphen (-) and underscore (_) allowed" }, Pu = e => { const r = (e || "").trim(); if (r && !aL.test(r)) return "Only letters, numbers, spaces, hyphen (-) and underscore (_) allowed" }, sL = "lead_form_fields", Eoe = () => { try { const e = localStorage.getItem(sL); if (!e) return []; const r = JSON.parse(e); return Array.isArray(r) ? r : [] } catch { return [] } }, Tu = e => { try { localStorage.setItem(sL, JSON.stringify(e)) } catch { } }, zP = ({ title: e, subtitle: r }) => t.jsxs("div", { className: "text-center py-10 text-gray-500 dark:text-gray-400", children: [t.jsx("p", { className: "text-sm font-medium", children: e }), r && t.jsx("p", { className: "text-xs mt-1", children: r })] }), ob = ({ icon: e, title: r, action: a }) => t.jsxs("div", { className: "flex items-center justify-between mb-3", children: [t.jsxs("div", { className: "flex items-center space-x-2", children: [e, t.jsx("h3", { className: "text-sm font-semibold text-gray-800 dark:text-gray-200", children: r })] }), a] }), Aoe = () => {
    const { hasPermission: e } = mr(), { leadSources: r } = Br(), [a, s] = h.useState([]), [n, i] = h.useState([]), [o, c] = h.useState(!1), [u, m] = h.useState(null), [g, f] = h.useState([]), y = h.useMemo(() => ({ read: e("lead.read"), create: e("lead.create"), update: e("lead.update"), delete: e("lead.delete") }), [e]), p = async () => { try { c(!0), m(null); const [L, z] = await Promise.all([ei.getTags(), Mu.getLeadSources()]), T = L?.data?.tags ?? L?.tags ?? L, _ = z?.data?.leadSources ?? z?.leadSources ?? z?.data ?? z; s(Array.isArray(T) ? T : []); const H = Array.isArray(r) && r.length > 0 ? r : Array.isArray(_) ? _ : []; i(H); const U = Eoe(); if (!U || U.length === 0) { const K = Date.now(), Z = [{ id: K - 1900, name: "First Name", key: "first_name", type: "TEXT", canBeTurnedOff: !1, required: !0, description: "Lead's first name", isActive: !0, isDefault: !0 }, { id: K - 1800, name: "Last Name", key: "last_name", type: "TEXT", canBeTurnedOff: !1, required: !0, description: "Lead's last name", isActive: !0, isDefault: !0 }, { id: K - 1700, name: "Email", key: "email", type: "EMAIL", canBeTurnedOff: !0, required: !1, description: "Primary email address", isActive: !0, isDefault: !0 }, { id: K - 1600, name: "Phone Number", key: "phone", type: "PHONE", canBeTurnedOff: !0, required: !1, description: "Lead's phone number", isActive: !0, isDefault: !0 }, { id: K - 1500, name: "Company Name", key: "company", type: "TEXT", canBeTurnedOff: !0, required: !1, description: "Name of lead's company", isActive: !0, isDefault: !0 }, { id: K - 1400, name: "Job Title", key: "job_title", type: "TEXT", canBeTurnedOff: !0, required: !1, description: "Role of the lead in their company", isActive: !0, isDefault: !0 }, { id: K - 1300, name: "Lead Source", key: "source_id", type: "DROPDOWN", canBeTurnedOff: !0, required: !1, description: "Origin of the lead (Website, Referral, Ad, etc.)", isActive: !0, isDefault: !0 }, { id: K - 1200, name: "Industry", key: "industry", type: "DROPDOWN", canBeTurnedOff: !0, required: !1, description: "Industry the lead belongs to", isActive: !0, isDefault: !0 }, { id: K - 1100, name: "Lead Status", key: "status", type: "DROPDOWN", canBeTurnedOff: !1, required: !0, description: "Pipeline stage (New, Contacted, Qualified, etc.)", isActive: !0, isDefault: !0 }, { id: K - 1e3, name: "Rating", key: "rating", type: "DROPDOWN", canBeTurnedOff: !0, required: !1, description: "Lead quality (Hot, Warm, Cold)", isActive: !0, isDefault: !0 }, { id: K - 900, name: "Owner", key: "owner_id", type: "DROPDOWN", canBeTurnedOff: !1, required: !0, description: "CRM user assigned to this lead", isActive: !0, isDefault: !0 }, { id: K - 800, name: "Created Date", key: "created_at", type: "DATE", canBeTurnedOff: !1, required: !0, description: "Auto-generated creation timestamp", isActive: !0, isDefault: !0 }, { id: K - 700, name: "Last Contacted Date", key: "last_contacted_at", type: "DATE", canBeTurnedOff: !0, required: !1, description: "Last time the lead was contacted", isActive: !0, isDefault: !0 }, { id: K - 600, name: "Notes", key: "notes", type: "TEXT", canBeTurnedOff: !0, required: !1, description: "Additional notes about the lead", isActive: !0, isDefault: !0 }, { id: K - 500, name: "Tags", key: "tags", type: "MULTI_SELECT", canBeTurnedOff: !0, required: !1, description: "Tags to segment leads", isActive: !0, isDefault: !0 }, { id: K - 400, name: "Website", key: "website", type: "TEXT", canBeTurnedOff: !0, required: !1, description: "Lead/company website URL", isActive: !0, isDefault: !0 }, { id: K - 300, name: "Location / Address", key: "address", type: "TEXT", canBeTurnedOff: !0, required: !1, description: "Lead's address or location", isActive: !0, isDefault: !0 }, { id: K - 200, name: "Time Zone", key: "time_zone", type: "DROPDOWN", canBeTurnedOff: !0, required: !1, description: "List of all time zones for scheduling", isActive: !0, isDefault: !0 }]; Tu(Z), f(Z) } else { const K = [{ name: "First Name", key: "first_name", type: "TEXT", canBeTurnedOff: !1, required: !0, description: "Lead's first name", isActive: !0, isDefault: !0 }, { name: "Last Name", key: "last_name", type: "TEXT", canBeTurnedOff: !1, required: !0, description: "Lead's last name", isActive: !0, isDefault: !0 }, { name: "Email", key: "email", type: "EMAIL", canBeTurnedOff: !0, required: !1, description: "Primary email address", isActive: !0, isDefault: !0 }, { name: "Phone Number", key: "phone", type: "PHONE", canBeTurnedOff: !0, required: !1, description: "Lead's phone number", isActive: !0, isDefault: !0 }, { name: "Company Name", key: "company", type: "TEXT", canBeTurnedOff: !0, required: !1, description: "Name of lead's company", isActive: !0, isDefault: !0 }, { name: "Job Title", key: "job_title", type: "TEXT", canBeTurnedOff: !0, required: !1, description: "Role of the lead in their company", isActive: !0, isDefault: !0 }, { name: "Lead Source", key: "source_id", type: "DROPDOWN", canBeTurnedOff: !0, required: !1, description: "Origin of the lead", isActive: !0, isDefault: !0 }, { name: "Industry", key: "industry", type: "DROPDOWN", canBeTurnedOff: !0, required: !1, description: "Industry the lead belongs to", isActive: !0, isDefault: !0 }, { name: "Lead Status", key: "status", type: "DROPDOWN", canBeTurnedOff: !1, required: !0, description: "Pipeline stage", isActive: !0, isDefault: !0 }, { name: "Rating", key: "rating", type: "DROPDOWN", canBeTurnedOff: !0, required: !1, description: "Lead quality", isActive: !0, isDefault: !0 }, { name: "Owner", key: "owner_id", type: "DROPDOWN", canBeTurnedOff: !1, required: !0, description: "Assigned CRM user", isActive: !0, isDefault: !0 }, { name: "Created Date", key: "created_at", type: "DATE", canBeTurnedOff: !1, required: !0, description: "Creation timestamp", isActive: !0, isDefault: !0 }, { name: "Last Contacted Date", key: "last_contacted_at", type: "DATE", canBeTurnedOff: !0, required: !1, description: "Last contacted time", isActive: !0, isDefault: !0 }, { name: "Notes", key: "notes", type: "TEXT", canBeTurnedOff: !0, required: !1, description: "Additional details", isActive: !0, isDefault: !0 }, { name: "Tags", key: "tags", type: "MULTI_SELECT", canBeTurnedOff: !0, required: !1, description: "Tags to segment leads", isActive: !0, isDefault: !0 }, { name: "Website", key: "website", type: "TEXT", canBeTurnedOff: !0, required: !1, description: "Company website", isActive: !0, isDefault: !0 }, { name: "Location / Address", key: "address", type: "TEXT", canBeTurnedOff: !0, required: !1, description: "Lead's address or location", isActive: !0, isDefault: !0 }, { name: "Time Zone", key: "time_zone", type: "DROPDOWN", canBeTurnedOff: !0, required: !1, description: "For scheduling follow-ups", isActive: !0, isDefault: !0 }], Z = U.filter(de => de.key !== "lead_id" && de.key !== "custom_fields"), J = new Set(Z.map(de => de.key)), G = [...Z, ...K.filter(de => !J.has(de.key)).map((de, Te) => ({ id: Date.now() + Te, ...de }))].map(de => de.canBeTurnedOff ? de : { ...de, isActive: !0 }); Tu(G), f(G) } } catch (L) { m(L?.message || "Failed to load settings") } finally { c(!1) } }; h.useEffect(() => { y.read && p() }, [y.read, r]); const b = async L => { B({ open: !0, editing: L || null }) }, j = async L => { if (y.delete && confirm("Delete this tag?")) try { c(!0), await ei.deleteTag(L), s(z => z.filter(T => T.id !== L)), R.success("Tag deleted") } catch (z) { R.error(z?.message || "Delete failed") } finally { c(!1) } }, v = async L => { M({ open: !0, editing: L || null }) }, S = async L => { if (y.delete && confirm("Delete this lead source?")) try { c(!0), await Mu.deleteLeadSource(L), i(z => z.filter(T => T.id !== L)), R.success("Lead source deleted") } catch (z) { R.error(z?.message || "Delete failed") } finally { c(!1) } }, [k, E] = h.useState({ open: !1, editing: null }), C = () => E({ open: !0, editing: null }), N = L => E({ open: !0, editing: L }), A = L => { L.preventDefault(); const z = new FormData(L.currentTarget), T = { id: k.editing?.id, name: String(z.get("name") || "").trim(), key: String(z.get("key") || "").trim(), type: String(z.get("type") || "TEXT"), canBeTurnedOff: !!z.get("canBeTurnedOff"), required: !!z.get("required"), options: (() => { const U = String(z.get("options") || "").trim(); if (U) return U.split(/\n|,/).map(K => K.trim()).filter(K => K.length > 0) })(), isActive: !!z.get("isActive"), isDefault: k.editing?.isDefault ?? !1, description: String(z.get("description") || "").trim() || void 0 }, _ = Au(T.name || ""), H = Pu(T.description); if (_ || H) { R.error(_ || H); return } T.key || (T.key = T.name.toLowerCase().replace(/\s+/g, "_")), f(U => { let K; if (T.id) K = U.map(Z => Z.id === T.id ? { ...Z, ...T, options: T.type === "DROPDOWN" || T.type === "MULTI_SELECT" ? T.options ?? Z.options : void 0 } : Z); else { const Z = { id: Date.now(), name: T.name, key: T.key, type: T.type || "TEXT", canBeTurnedOff: !!T.canBeTurnedOff, required: !!T.required, description: T.description, options: T.type === "DROPDOWN" || T.type === "MULTI_SELECT" ? T.options : void 0, isActive: T.isActive ?? !0, isDefault: !!T.isDefault }; K = [...U, Z] } return Tu(K), K }), E({ open: !1, editing: null }), R.success(T.id ? "Field updated" : "Field created") }, D = (L, z) => { z || confirm("Delete this field?") && (f(T => { const _ = T.filter(H => H.id !== L); return Tu(_), _ }), R.success("Field deleted")) }, I = (L, z) => { if (!L.canBeTurnedOff && !z) { R.info("This field cannot be turned off"); return } f(T => { const _ = T.map(H => H.id === L.id ? { ...H, isActive: z } : H); return Tu(_), _ }) }, [$, B] = h.useState({ open: !1, editing: null }), [W, M] = h.useState({ open: !1, editing: null }), [q, V] = h.useState({ name: "", color: "#3B82F6", description: "" }), [X, se] = h.useState({}); h.useEffect(() => { $.open ? (V({ name: $.editing?.name || "", color: $.editing?.color || "#3B82F6", description: $.editing?.description || "" }), se({})) : W.open ? (V({ name: W.editing?.name || "", description: W.editing?.description || "" }), se({})) : (V({ name: "", color: "#3B82F6", description: "" }), se({})) }, [$, W]); const le = async L => { L.preventDefault(); const z = Au(q.name), T = Pu(q.description); if (z || T) { se({ name: z, description: T }); return } try { if (c(!0), $.editing) { const _ = await ei.updateTag($.editing.id, { name: q.name, color: q.color, description: q.description }), H = _?.data?.tag ?? _?.tag ?? _; s(U => U.map(K => K.id === $.editing.id ? { ...K, ...H } : K)), R.success("Tag updated") } else { const _ = await ei.createTag({ name: q.name, color: q.color, description: q.description }), H = _?.data?.tag ?? _?.tag ?? _; s(U => [H, ...U]), R.success("Tag created") } B({ open: !1, editing: null }) } catch (_) { R.error(_?.response?.data?.message || _?.message || "Operation failed") } finally { c(!1) } }, ee = async L => { L.preventDefault(); const z = Au(q.name), T = Pu(q.description); if (z || T) { se({ name: z, description: T }); return } try { if (c(!0), W.editing) { const _ = await Mu.updateLeadSource(W.editing.id, { name: q.name, description: q.description }), H = _?.data?.leadSource ?? _?.leadSource ?? _; i(U => U.map(K => K.id === W.editing.id ? { ...K, ...H } : K)), R.success("Lead source updated") } else { const _ = await Mu.createLeadSource({ name: q.name, description: q.description }), H = _?.data?.leadSource ?? _?.leadSource ?? _; i(U => [H, ...U]), R.success("Lead source created") } M({ open: !1, editing: null }) } catch (_) { R.error(_?.response?.data?.message || _?.message || "Operation failed") } finally { c(!1) } }; return t.jsxs("div", {
        className: "relative min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 overflow-hidden", children: [t.jsx("div", { className: "relative", children: t.jsx("div", { className: "absolute inset-x-0 top-0 h-40 bg-gradient-to-r from-green-500 via-green-500 to-green-500 opacity-20 blur-3xl pointer-events-none" }) }), t.jsx("div", {
            className: "relative px-6 py-6", children: t.jsxs("div", {
                className: " mx-auto", children: [t.jsx("div", { className: "pointer-events-none absolute -right-10 -top-10 md:right-0 md:-top-8 aspect-square opacity-10 dark:opacity-10", children: t.jsxs("div", { className: "relative w-[220px] h-[220px] md:w-[300px] md:h-[300px] rotate-12", children: [t.jsx("div", { className: "absolute inset-0 blur-2xl bg-gradient-to-br from-green-400/40 via-green-400/30 to-green-400/30 rounded-full" }), t.jsx("div", { className: "absolute inset-6 rounded-3xl border-2 border-white/40 dark:border-white/10" })] }) }), t.jsxs("div", { className: "mb-6 flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h2", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Lead Settings" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-300", children: "Organize taxonomy and configure the lead form for your team" })] }), t.jsx(qa, { to: "/leads" })] }), t.jsxs("div", { className: "bg-white/90 dark:bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-lg border border-gray-200/60 dark:border-gray-700/60 p-5 my-6", children: [t.jsx(ob, { icon: t.jsx(uU, { className: "h-4 w-4 text-gray-600 dark:text-gray-300" }), title: "Lead Form Configuration", action: t.jsxs("button", { onClick: C, className: "inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600 shadow-sm", children: [t.jsx($t, { className: "h-4 w-4 mr-1" }), " Add Field"] }) }), t.jsx("div", { className: "my-6", children: t.jsx(G6, {}) }), t.jsx(Coe, { fields: g, onEdit: N, onDelete: D, onToggleActive: I, showOptionsSource: !1 })] }), t.jsx(ib, {
                    open: k.open, title: k.editing ? "Edit Field" : "Add Field", onClose: () => E({ open: !1, editing: null }), onSubmit: L => A(L), submitText: k.editing ? "Update" : "Create", children: t.jsxs("div", {
                        className: "space-y-3", children: [t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-3", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Field Name" }), t.jsx("input", { name: "name", defaultValue: k.editing?.name || "", required: !0, className: "w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Key" }), t.jsx("input", { name: "key", defaultValue: k.editing?.key || "", placeholder: "first_name", className: "w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Type" }), t.jsxs("select", { name: "type", defaultValue: k.editing?.type || "TEXT", className: "w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900", children: [t.jsx("option", { value: "TEXT", children: "Text" }), t.jsx("option", { value: "EMAIL", children: "Email" }), t.jsx("option", { value: "PHONE", children: "Phone" }), t.jsx("option", { value: "NUMBER", children: "Number" }), t.jsx("option", { value: "DATE", children: "Date" }), t.jsx("option", { value: "DROPDOWN", children: "Dropdown" }), t.jsx("option", { value: "MULTI_SELECT", children: "Multi-select" }), t.jsx("option", { value: "CHECKBOX", children: "Checkbox" }), t.jsx("option", { value: "TOGGLE", children: "Toggle" })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Description" }), t.jsx("input", { name: "description", defaultValue: k.editing?.description || "", className: "w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900" })] })] }), t.jsxs("div", { className: "flex flex-wrap gap-4 text-xs", children: [t.jsxs("label", { className: "flex items-center text-gray-700 dark:text-gray-300", children: [t.jsx("input", { type: "checkbox", name: "required", defaultChecked: k.editing?.required ?? !1, className: "mr-2" }), "Required"] }), t.jsxs("label", { className: "flex items-center text-gray-700 dark:text-gray-300", children: [t.jsx("input", { type: "checkbox", name: "canBeTurnedOff", defaultChecked: k.editing?.canBeTurnedOff ?? !0, className: "mr-2" }), "Can be turned off"] }), t.jsxs("label", { className: "flex items-center text-gray-700 dark:text-gray-300", children: [t.jsx("input", { type: "checkbox", name: "isActive", defaultChecked: k.editing?.isActive ?? !0, className: "mr-2" }), "Active"] })] }), (k.editing?.type === "DROPDOWN" || k.editing?.type === "MULTI_SELECT") && t.jsxs("div", {
                            children: [t.jsx("label", { className: "block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Options (comma or newline separated)" }), t.jsx("textarea", {
                                name: "options", defaultValue: (k.editing?.options || []).join(`
`), rows: 3, className: "w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900", placeholder: `e.g.
Website
Referral
Ad`})]
                        })]
                    })
                }), u && t.jsx("div", { className: "mb-3 text-sm text-red-600 dark:text-red-400", children: u }), t.jsxs("div", { className: "bg-white/90 dark:bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-lg border border-gray-200/60 dark:border-gray-700/60 p-5 my-6", children: [t.jsx(ob, { icon: t.jsx(iU, { className: "h-4 w-4 text-gray-600 dark:text-gray-300" }), title: "Tags", action: y.create ? t.jsxs("button", { onClick: () => b(), className: "inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600 shadow-sm", disabled: o, children: [t.jsx($t, { className: "h-4 w-4 mr-1" }), " New Tag"] }) : null }), a.length === 0 ? t.jsx(zP, { title: "No tags yet", subtitle: "Create your first tag" }) : t.jsx("div", { className: "grid md:grid-cols-2 lg:grid-cols-3 gap-3", children: a.map(L => t.jsxs("div", { className: "border border-gray-200 dark:border-gray-700 rounded-xl p-3 flex items-start justify-between hover:bg-gray-50/70 dark:hover:bg-gray-700/40 transition shadow-sm", children: [t.jsxs("div", { children: [t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx("span", { className: "w-3 h-3 rounded", style: { backgroundColor: L.color } }), t.jsx("p", { className: "text-sm font-medium text-gray-800 dark:text-gray-200", children: L.name })] }), L.description && t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: L.description })] }), t.jsxs("div", { className: "flex items-center space-x-2", children: [y.update && t.jsx("button", { className: "p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 shadow-sm dark:text-white", onClick: () => b(L), disabled: o, title: "Edit", children: t.jsx(Jt, { className: "h-4 w-4" }) }), y.delete && t.jsx("button", { className: "p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-red-600 shadow-sm", onClick: () => j(L.id), disabled: o, title: "Delete", children: t.jsx(yt, { className: "h-4 w-4" }) })] })] }, L.id)) })] }), t.jsxs("div", { className: "bg-white/90 dark:bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-lg border border-gray-200/60 dark:border-gray-700/60 p-5 my-6", children: [t.jsx(ob, { icon: t.jsx(V9, { className: "h-4 w-4 text-gray-600 dark:text-gray-300" }), title: "Lead Sources", action: y.create ? t.jsxs("button", { onClick: () => v(), className: "inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600 shadow-sm", disabled: o, children: [t.jsx($t, { className: "h-4 w-4 mr-1" }), " New Source"] }) : null }), !Array.isArray(n) || n.length === 0 ? t.jsx(zP, { title: "No lead sources yet", subtitle: "Create your first source" }) : t.jsx("div", { className: "grid md:grid-cols-2 lg:grid-cols-3 gap-3", children: n.map(L => t.jsxs("div", { className: "border border-gray-200 dark:border-gray-700 rounded-xl p-3 flex items-start justify-between hover:bg-gray-50/70 dark:hover:bg-gray-700/40 transition shadow-sm", children: [t.jsxs("div", { children: [t.jsx("p", { className: "text-sm font-medium text-gray-800 dark:text-gray-200", children: L.name }), L.description && t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: L.description })] }), t.jsxs("div", { className: "flex items-center space-x-2", children: [y.update && t.jsx("button", { className: "p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 shadow-sm dark:text-white", onClick: () => v(L), disabled: o, title: "Edit", children: t.jsx(Jt, { className: "h-4 w-4" }) }), y.delete && t.jsx("button", { className: "p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-red-600 shadow-sm", onClick: () => S(L.id), disabled: o, title: "Delete", children: t.jsx(yt, { className: "h-4 w-4" }) })] })] }, L.id)) })] }), t.jsx(ib, { open: $.open, title: $.editing ? "Edit Tag" : "New Tag", onClose: () => B({ open: !1, editing: null }), onSubmit: le, disabled: o, submitText: $.editing ? "Update" : "Create", children: t.jsxs("div", { className: "space-y-3", children: [t.jsx(Xt, { label: "Name", value: q.name, onChange: L => { const z = L.target.value; V(_ => ({ ..._, name: z })); const T = Au(z); se(_ => ({ ..._, name: T })) }, placeholder: "e.g. VIP", required: !0, error: X.name }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Color" }), t.jsx(koe, { value: q.color, onChange: L => V(z => ({ ...z, color: L })) })] }), t.jsx(Kc, { label: "Description", value: q.description, onChange: L => { const z = L.target.value; V(_ => ({ ..._, description: z })); const T = Pu(z); se(_ => ({ ..._, description: T })) }, placeholder: "Optional", rows: 3, error: X.description })] }) }), t.jsx(ib, { open: W.open, title: W.editing ? "Edit Lead Source" : "New Lead Source", onClose: () => M({ open: !1, editing: null }), onSubmit: ee, disabled: o, submitText: W.editing ? "Update" : "Create", children: t.jsxs("div", { className: "space-y-3", children: [t.jsx(Xt, { label: "Name", value: q.name, onChange: L => { const z = L.target.value; V(_ => ({ ..._, name: z })); const T = Au(z); se(_ => ({ ..._, name: T })) }, placeholder: "e.g. Website", required: !0, error: X.name }), t.jsx(Kc, { label: "Description", value: q.description, onChange: L => { const z = L.target.value; V(_ => ({ ..._, description: z })); const T = Pu(z); se(_ => ({ ..._, description: T })) }, placeholder: "Optional", rows: 3, error: X.description })] }) })]
            })
        })]
    })
}, Bc = It.create({ baseURL: Yo, headers: { "Content-Type": "application/json" } }); Bc.interceptors.request.use(e => { const r = localStorage.getItem("token") || localStorage.getItem("authToken"), a = localStorage.getItem("userId"); if (r) try { const s = ZT(r); if (s && s.userId !== void 0 && a !== null && s.userId !== Number(a)) return console.warn("[AuthService] Detected token/userId mismatch in localStorage; clearing stale auth state"), localStorage.removeItem("token"), localStorage.removeItem("authToken"), localStorage.removeItem("tokenExpiry"), localStorage.removeItem("userId"), Promise.reject(new Error("Token user mismatch - cleared stale auth")); e.headers.Authorization = `Bearer ${r}` } catch (s) { console.error("[AuthService] Failed to parse JWT, clearing token", s), localStorage.removeItem("token"), localStorage.removeItem("authToken"), localStorage.removeItem("tokenExpiry") } return e }, e => Promise.reject(e)); Bc.interceptors.response.use(e => e, e => (console.error("API Error:", { status: e.response?.status, message: e.response?.data?.message, url: e.config?.url, method: e.config?.method }), e.response?.status === 401 && (localStorage.removeItem("token"), localStorage.removeItem("tokenExpiry"), (e.response?.data?.tokenExpired || e.response?.data?.code === "TOKEN_EXPIRED") && window.dispatchEvent(new CustomEvent("tokenExpired"))), Promise.reject(e))); const Poe = { login: async e => { try { const r = await Bc.post("/auth/login", e); if (console.log("Login Response:", r.data), !r.data.success) throw new Error(r.data.message || "Invalid credentials"); return r.data } catch (r) { if (console.error("Login Error:", r), r.response?.data) { const a = r.response.data.message || r.response.data.error || "Login failed"; throw new Error(a) } throw new Error(r.message || "Login failed. Please check your connection.") } }, getProfile: async () => (await Bc.get("/auth/profile")).data, getPermissionsForRole: async e => (await Bc.get(`/roles/${e}/permissions`)).data.data.permissions, register: async e => (await Bc.post("/auth/register", e)).data, logout: async () => ({ success: !0, message: "Logged out successfully" }) }, Toe = Yo.replace(/\/api\/?$/, "") || window.location.origin, Doe = /^[A-Za-z]+(?: [A-Za-z]+)*$/, Ooe = "must contain only letters (A-Z), no numbers or special characters, and be at least 2 characters long", Ioe = () => { const { user: e, updateUser: r, hasRole: a } = mr(), { t: s } = kn(), { isDark: n, toggleTheme: i } = HT(), [o, c] = h.useState(!1), [u, m] = h.useState(!1), [, g] = h.useState([]), [f, y] = h.useState(!0), [p, b] = h.useState({ firstName: e?.firstName || "", lastName: e?.lastName || "", email: e?.email || "" }), [j, v] = h.useState({}), [S, k] = h.useState([]), [E, C] = h.useState(!1), [N, A] = h.useState(!1), [D, I] = h.useState(null), [$, B] = h.useState({ currentPassword: "", newPassword: "", confirmPassword: "" }), [W, M] = h.useState({ length: !1, lowercase: !1, uppercase: !1, number: !1, special: !1 }), [q, V] = h.useState(!1), [X, se] = h.useState(null), [le, ee] = h.useState(null); h.useRef(null), h.useEffect(() => { (async () => { try { y(!0); const G = await kl.getIndustries(); g(Array.isArray(G) ? G : []) } catch (G) { console.error("Failed to load industries:", G), g([]) } finally { y(!1) } })() }, []), h.useEffect(() => { (async () => { const G = e?.roles || [], de = G.some(He => { const ne = (He?.name || "").toLowerCase(); return ne === "admin" || ne === "super_admin" || ne === "super admin" }), Te = G.flatMap(He => Array.isArray(He.permissions) ? He.permissions : []), pe = (() => { const He = new Map; for (const ne of Te) ne && typeof ne.id == "number" && !He.has(ne.id) && He.set(ne.id, ne); return Array.from(He.values()) })(); if (!de) { k(pe); return } try { C(!0); const He = await Xa.getPermissions(), ne = He?.data || He || [], De = new Map; for (const $e of ne) $e && typeof $e.id == "number" && !De.has($e.id) && De.set($e.id, $e); k(Array.from(De.values())) } catch (He) { console.error("Failed to load full permissions for admin:", He), k(pe) } finally { C(!1) } })() }, [e?.roles]), h.useEffect(() => { (async () => { try { const G = e?.roles || [], de = G.filter(ne => !Array.isArray(ne.permissions) || ne.permissions.length === 0); if (de.length === 0) return; const Te = await Promise.all(de.map(async ne => { try { const De = await Poe.getPermissionsForRole(String(ne.id)); return { id: ne.id, permissions: De } } catch (De) { return console.error("Failed to load permissions for role", ne.id, De), { id: ne.id, permissions: [] } } })), pe = new Map(Te.map(ne => [ne.id, ne.permissions])), He = G.map(ne => ({ ...ne, permissions: Array.isArray(ne.permissions) && ne.permissions.length > 0 ? ne.permissions : pe.get(ne.id) || [] })); r({ ...e, roles: He }) } catch (G) { console.error("Failed to enrich permissions:", G) } })() }, [e?.roles]); const L = a?.("Admin") === !0, z = (te, G) => { const de = (te || "").trim(); return de.length < 2 || !Doe.test(de) ? `${G} ${Ooe}` : null }, T = te => { const { name: G, value: de } = te.target; b(Te => ({ ...Te, [G]: de })), v(Te => ({ ...Te, [G]: void 0 })) }, _ = async () => { const te = z(p.firstName, s("user.firstName", "First name")), G = z(p.lastName, s("user.lastName", "Last name")), de = {}; if (te && (de.firstName = te), G && (de.lastName = G), Object.keys(de).length > 0) { v(de), R.error(Object.values(de).join(" "), { toastId: "profile_validation_error" }); return } try { m(!0); const Te = { firstName: p.firstName.trim(), lastName: p.lastName.trim() }; L && (Te.email = p.email); const pe = await ur.updateProfile(Te), He = pe?.data?.user || pe?.user || pe, ne = { ...e, ...He || {}, roles: He && He.roles ? He.roles : e?.roles || [] }; r(ne), R.success(s("user.profileUpdateSuccess", "Profile updated successfully"), { toastId: "profile_update_success" }), v({}), c(!1) } catch (Te) { const pe = Te?.response?.data?.message || Te?.message || s("errors.profileUpdateFailed", "Failed to update profile"); console.error("Failed to update profile:", pe), R.error(pe, { toastId: "profile_update_error" }) } finally { m(!1) } }, H = () => { b({ firstName: e?.firstName || "", lastName: e?.lastName || "", email: e?.email || "" }), v({}), c(!1) }, U = te => te ? new Date(te).toLocaleDateString("en-US", { year: "numeric", month: "long", day: "numeric", hour: "2-digit", minute: "2-digit" }) : s("common.noData"), K = te => { const { name: G, value: de } = te.target; if (B(Te => ({ ...Te, [G]: de })), se(null), ee(null), G === "newPassword") { const Te = de || "", pe = /[a-z]/.test(Te), He = /[A-Z]/.test(Te), ne = /[0-9]/.test(Te), De = /[^A-Za-z0-9]/.test(Te), $e = Te.length >= 8; M({ length: $e, lowercase: pe, uppercase: He, number: ne, special: De }) } }, Z = async () => { if (se(null), ee(null), !$.currentPassword || !$.newPassword || !$.confirmPassword) { se("Please fill in all password fields"); return } if ($.newPassword !== $.confirmPassword) { se("New password and confirm password do not match"); return } const te = $.newPassword || "", G = /[a-z]/.test(te), de = /[A-Z]/.test(te), Te = /[0-9]/.test(te), pe = /[^A-Za-z0-9]/.test(te), He = te.length >= 8; if (!(He && G && de && Te && pe)) { M({ length: He, lowercase: G, uppercase: de, number: Te, special: pe }), se("Password must be 8+ chars with uppercase, lowercase, number, and special symbol"); return } try { V(!0); const De = await ur.changePassword({ currentPassword: $.currentPassword, newPassword: $.newPassword }), $e = De?.data?.user || De?.user || De; $e ? r({ ...e, ...$e }) : e?.mustChangePassword && r({ ...e, mustChangePassword: !1 }), ee("Password updated successfully"), B({ currentPassword: "", newPassword: "", confirmPassword: "" }) } catch (De) { const $e = De?.response?.data?.message || De?.message || "Failed to update password"; se($e) } finally { V(!1) } }, J = Hn(); return h.useEffect(() => { J.state && J.state.focusPassword && setTimeout(() => { document.getElementById("change-password-section")?.scrollIntoView({ behavior: "smooth" }); const te = document.querySelector('input[name="currentPassword"]'); te && te.focus() }, 500) }, [J]), t.jsx("div", { className: "min-h-screen bg-gray-50 dark:bg-gray-900 py-6", children: t.jsxs("div", { className: "mx-auto px-4 sm:px-6 lg:px-8", children: [t.jsxs("div", { className: "mb-5", children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: s("user.profile") }), t.jsx("p", { className: "mt-1 text-sm text-gray-600 dark:text-gray-400", children: s("user.profileDescription", "Manage your account settings and preferences") })] }), t.jsxs("div", { className: "space-y-6", children: [t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 p-5", children: t.jsxs("div", { className: "flex flex-col xl:flex-row gap-6 items-start", children: [t.jsxs("div", { className: "flex flex-col items-center xl:items-start", children: [t.jsxs("div", { className: "relative h-20 w-20 mb-3", children: [e?.profilePicture ? t.jsx("img", { src: `${Toe}/uploads/${e.profilePicture}`, alt: "Avatar", className: "h-20 w-20 rounded-full object-cover border-4 border-white dark:border-gray-700 shadow" }) : t.jsx("div", { className: "h-20 w-20 bg-gradient-to-br from-[#EF444E] to-[#ff5a64] rounded-full flex items-center justify-center border-4 border-white dark:border-gray-700 shadow", children: t.jsx(wt, { className: "h-9 w-9 text-white" }) }), o && t.jsxs("label", { className: "absolute -bottom-2 right-0 inline-flex items-center px-2 py-1 text-[10px] font-medium text-white bg-[#EF444E] rounded-full hover:bg-[#dc2626] cursor-pointer shadow", children: [N ? t.jsx("span", { className: "h-3.5 w-3.5 border-2 border-white border-t-transparent rounded-full animate-spin mr-1" }) : t.jsx(Jt, { className: "h-3.5 w-3.5 mr-1" }), s("user.changeAvatar", "Change Avatar"), t.jsx("input", { type: "file", accept: "image/*", className: "hidden", onChange: async te => { const G = te.target.files?.[0]; if (G) { I(null); try { A(!0); const de = await ur.uploadProfilePicture(G), Te = de?.data?.user || de?.user || de, pe = { ...e, ...Te || {} }; r(pe) } catch (de) { I(de?.message || "Failed to upload") } finally { A(!1) } } } })] }), D && t.jsx("p", { className: "text-xs text-red-500 mt-2", children: D })] }), t.jsxs("div", { className: "text-center xl:text-left", children: [t.jsx("h2", { className: "text-2xl font-semibold text-gray-900 dark:text-white", children: e?.fullName }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: e?.roles?.[0]?.name || s("common.noRole") }), e?.email && t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400 mt-1", children: e.email })] })] }), t.jsxs("div", { className: "flex-1 grid grid-cols-1 md:grid-cols-2 gap-4 w-full", children: [t.jsxs("div", { className: "p-4 rounded-2xl border border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/40", children: [t.jsxs("p", { className: "text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 flex items-center gap-2", children: [t.jsx(Zt, { className: "h-4 w-4" }), " ", s("user.lastLogin")] }), t.jsx("p", { className: "mt-2 text-sm font-semibold text-gray-900 dark:text-white", children: U(e?.lastLogin) })] }), t.jsxs("div", { className: "p-4 rounded-2xl border border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/40", children: [t.jsxs("p", { className: "text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 flex items-center gap-2", children: [t.jsx(Xs, { className: "h-4 w-4" }), " ", s("user.permissions")] }), t.jsx("p", { className: "mt-2 text-3xl font-bold text-[#EF444E]", children: S.length > 0 ? S.length : e?.roles?.reduce((te, G) => te + (G.permissions?.length ?? 0), 0) || 0 }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: s("user.permissionSummary", "Total permissions granted") })] })] })] }) }), t.jsxs("div", { className: "grid grid-cols-1 xl:grid-cols-12 gap-6", children: [t.jsxs("div", { className: "xl:col-span-4 space-y-6", children: [t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 p-5", children: [t.jsx("h3", { className: "text-base font-semibold text-gray-900 dark:text-white mb-3", children: s("user.contactOverview", "Contact Snapshot") }), t.jsxs("div", { className: "space-y-3", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400", children: [t.jsx(ir, { className: "h-4 w-4" }), t.jsx("span", { children: s("user.email") })] }), t.jsx("span", { className: "text-sm font-medium text-gray-900 dark:text-white", children: p.email || e?.email || s("common.noData") })] }), t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400", children: [t.jsx(Xs, { className: "h-4 w-4" }), t.jsx("span", { children: s("common.role", "Role") })] }), t.jsx("span", { className: "text-sm font-medium text-gray-900 dark:text-white", children: e?.roles?.map(te => te.name).join(", ") || s("common.noRole") })] })] })] }), t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 p-5 space-y-4", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { children: [t.jsx("h4", { className: "text-sm font-semibold text-gray-900 dark:text-white", children: s("common.theme") }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: s("user.themeDescription", "Choose your preferred theme") })] }), t.jsx("button", { onClick: i, className: `relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${n ? "bg-[#EF444E]" : "bg-gray-200"}`, children: t.jsx("span", { className: `inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n ? "translate-x-3" : "-translate-x-3"}` }) })] }), t.jsxs("div", { className: "flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700 pt-3", children: [t.jsx("span", { children: s("user.lastLogin") }), t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: U(e?.lastLogin) })] })] })] }), t.jsxs("div", { className: "xl:col-span-8 space-y-6", children: [t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700", children: [t.jsxs("div", { className: "px-5 py-3 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between", children: [t.jsx("h3", { className: "text-base font-semibold text-gray-900 dark:text-white", children: s("user.personalInformation") }), t.jsx("button", { onClick: () => c(!o), className: "flex items-center px-3 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600", children: o ? t.jsxs(t.Fragment, { children: [t.jsx(fa, { className: "h-4 w-4 mr-1" }), s("common.cancel")] }) : t.jsxs(t.Fragment, { children: [t.jsx(Jt, { className: "h-4 w-4 mr-1" }), s("common.edit")] }) })] }), f ? t.jsx("div", { className: "p-5 animate-pulse", children: t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-3", children: [t.jsx("div", { className: "h-9 bg-gray-100 dark:bg-gray-700 rounded-xl" }), t.jsx("div", { className: "h-9 bg-gray-100 dark:bg-gray-700 rounded-xl" }), t.jsx("div", { className: "h-9 bg-gray-100 dark:bg-gray-700 rounded-xl" }), t.jsx("div", { className: "h-9 bg-gray-100 dark:bg-gray-700 rounded-xl" })] }) }) : t.jsxs("div", { className: "p-5", children: [t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-3", children: [t.jsx(Xt, { label: s("user.firstName"), leftIcon: t.jsx(wt, { className: "h-4 w-4 text-gray-400" }), name: "firstName", value: p.firstName, onChange: T, disabled: !o, required: !0, error: j.firstName || void 0 }), t.jsx(Xt, { label: s("user.lastName"), leftIcon: t.jsx(wt, { className: "h-4 w-4 text-gray-400" }), name: "lastName", value: p.lastName, onChange: T, disabled: !o, required: !0, error: j.lastName || void 0 }), t.jsx(Xt, { label: s("user.email"), leftIcon: t.jsx(ir, { className: "h-4 w-4 text-gray-400" }), type: "email", name: "email", value: p.email, onChange: T, disabled: !o || !L })] }), o && t.jsxs("div", { className: "mt-5 flex justify-end gap-2", children: [t.jsx("button", { onClick: H, disabled: u, className: "px-4 py-2 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50", children: s("common.cancel") }), t.jsxs("button", { onClick: _, disabled: u, className: "px-4 py-2 text-xs font-semibold text-white bg-[#EF444E] rounded-full hover:bg-[#dc2626] disabled:opacity-50 flex items-center", children: [u ? t.jsx("div", { className: "h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-1.5" }) : t.jsx(Za, { className: "h-4 w-4 mr-1.5" }), s("common.save")] })] })] })] }), t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 p-5", id: "change-password-section", children: [t.jsx("div", { className: "flex items-center justify-between mb-4", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx(km, { className: "h-5 w-5 text-gray-500 dark:text-gray-400 mr-2" }), t.jsx("div", { children: t.jsx("h4", { className: "text-sm font-medium text-gray-900 dark:text-white", children: "Change Password" }) })] }) }), t.jsxs("form", { onSubmit: te => { te.preventDefault(), Z() }, children: [t.jsx("input", { type: "text", name: "username", value: e?.email || "", autoComplete: "username", style: { display: "none" }, readOnly: !0 }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-3 mb-3", children: [t.jsx(Xt, { label: "Current Password", name: "currentPassword", type: "password", value: $.currentPassword, onChange: K, autoComplete: "current-password", required: !0 }), t.jsx(Xt, { label: "New Password", name: "newPassword", type: "password", value: $.newPassword, onChange: K, autoComplete: "new-password", required: !0 }), t.jsx(Xt, { label: "Confirm New Password", name: "confirmPassword", type: "password", value: $.confirmPassword, onChange: K, autoComplete: "new-password", required: !0 })] }), t.jsx("div", { className: "flex justify-end", children: t.jsx("button", { type: "submit", disabled: q, children: "Update Password" }) })] }), t.jsxs("div", { className: "text-xs text-gray-700 dark:text-gray-300 space-y-1 mb-2", children: [t.jsx("div", { className: "font-medium", children: "Password must include:" }), t.jsxs("div", { className: "grid grid-cols-1 sm:grid-cols-2 gap-1", children: [t.jsxs("div", { className: "flex items-center", children: [W.length ? t.jsx(ut, { className: "h-4 w-4 text-green-600 mr-1" }) : t.jsx(dr, { className: "h-4 w-4 text-gray-400 mr-1" }), t.jsx("span", { children: "At least 8 characters" })] }), t.jsxs("div", { className: "flex items-center", children: [W.lowercase ? t.jsx(ut, { className: "h-4 w-4 text-green-600 mr-1" }) : t.jsx(dr, { className: "h-4 w-4 text-gray-400 mr-1" }), t.jsx("span", { children: "Lowercase letter (a-z)" })] }), t.jsxs("div", { className: "flex items-center", children: [W.uppercase ? t.jsx(ut, { className: "h-4 w-4 text-green-600 mr-1" }) : t.jsx(dr, { className: "h-4 w-4 text-gray-400 mr-1" }), t.jsx("span", { children: "Uppercase letter (A-Z)" })] }), t.jsxs("div", { className: "flex items-center", children: [W.number ? t.jsx(ut, { className: "h-4 w-4 text-green-600 mr-1" }) : t.jsx(dr, { className: "h-4 w-4 text-gray-400 mr-1" }), t.jsx("span", { children: "Number (0-9)" })] }), t.jsxs("div", { className: "flex items-center", children: [W.special ? t.jsx(ut, { className: "h-4 w-4 text-green-600 mr-1" }) : t.jsx(dr, { className: "h-4 w-4 text-gray-400 mr-1" }), t.jsx("span", { children: "Special symbol (!@#$%^&*...)" })] })] })] }), X && t.jsx("p", { className: "text-xs text-red-500 mb-2", children: X }), le && t.jsx("p", { className: "text-xs text-green-600 mb-2", children: le }), t.jsx("div", { className: "flex justify-end", children: t.jsxs("button", { onClick: Z, disabled: q, className: "px-4 py-2 text-xs font-semibold text-white bg-[#EF444E] rounded-full hover:bg-[#dc2626] disabled:opacity-50 flex items-center", children: [q ? t.jsx("div", { className: "h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-1.5" }) : t.jsx(Za, { className: "h-4 w-4 mr-1.5" }), "Update Password"] }) })] }), t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 p-5", children: [t.jsx("h3", { className: "text-base font-semibold text-gray-900 dark:text-white mb-3", children: s("user.permissions", "Permissions") }), t.jsx("div", { className: "flex flex-wrap gap-2", children: E ? t.jsx("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: s("user.loadingPermissions", "Loading permissions...") }) : S.length === 0 ? t.jsx("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: s("user.noPermissions", "No permissions assigned") }) : S.map(te => t.jsx("span", { className: "px-2 py-1 text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md", children: te.name }, te.id)) })] })] })] })] })] }) }) }; class Loe { async list(r) { return (await ie.get("/products", { params: r })).data } async getById(r) { return (await ie.get(`/products/${r}`)).data } async create(r) { return (await ie.post("/products", r)).data } async update(r, a) { return (await ie.put(`/products/${r}`, a)).data } async remove(r) { return (await ie.delete(`/products/${r}`)).data } async bulkExport(r) { return (await ie.get("/products/bulk/export", { params: r, responseType: "blob" })).data } async bulkImport(r) { const a = new FormData; return a.append("csvFile", r), (await ie.post("/products/bulk/import", a, { headers: { "Content-Type": "multipart/form-data" } })).data } async bulkDelete(r) { return (await ie.delete("/products/bulk/delete", { data: { ids: r } })).data } } const Oi = new Loe, Roe = ({ product: e, onClose: r }) => t.jsx("div", { className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col", children: [t.jsxs("div", { className: "flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx("div", { className: "p-3 bg-gradient-to-br from-[#EF444E] to-[#ff5a64] rounded-xl shadow-lg", children: t.jsx(Fn, { className: "h-6 w-6 text-white" }) }), t.jsxs("div", { children: [t.jsx("h2", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: e.name }), t.jsxs("div", { className: "flex items-center gap-2 mt-1", children: [t.jsx("span", { className: `px-2 py-0.5 rounded-full text-xs font-medium flex items-center gap-1 ${e.isActive ? "bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400" : "bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`, children: e.isActive ? t.jsxs(t.Fragment, { children: [t.jsx(ut, { className: "h-3 w-3" }), " Active"] }) : t.jsxs(t.Fragment, { children: [t.jsx(Ca, { className: "h-3 w-3" }), " Inactive"] }) }), e.sku && t.jsxs("span", { className: "text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1", children: [t.jsx(lD, { className: "h-3 w-3" }), " ", e.sku] })] })] })] }), t.jsx("button", { onClick: r, className: "p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors", children: t.jsx(fa, { className: "h-5 w-5 text-gray-500" }) })] }), t.jsxs("div", { className: "flex-1 overflow-y-auto p-6 space-y-6", children: [e.description && t.jsxs("div", { className: "bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4", children: [t.jsx("h3", { className: "text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: "Description" }), t.jsx("p", { className: "text-gray-900 dark:text-white whitespace-pre-wrap", children: e.description })] }), t.jsxs("div", { className: "grid grid-cols-1 sm:grid-cols-2 gap-4", children: [t.jsxs("div", { className: "bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-100 dark:border-blue-800", children: [t.jsxs("div", { className: "flex items-center gap-2 mb-2 text-blue-700 dark:text-blue-400", children: [t.jsx(Qr, { className: "h-5 w-5" }), t.jsx("h3", { className: "font-semibold", children: "Pricing" })] }), t.jsxs("div", { className: "space-y-2", children: [t.jsxs("div", { className: "flex justify-between", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Price:" }), t.jsxs("span", { className: "font-medium text-gray-900 dark:text-white", children: [e.price, " ", e.currency] })] }), e.cost && t.jsxs("div", { className: "flex justify-between", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Cost:" }), t.jsxs("span", { className: "font-medium text-gray-900 dark:text-white", children: [e.cost, " ", e.currency] })] }), e.taxRate && t.jsxs("div", { className: "flex justify-between", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Tax Rate:" }), t.jsxs("span", { className: "font-medium text-gray-900 dark:text-white", children: [e.taxRate, "%"] })] })] })] }), t.jsxs("div", { className: "bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-100 dark:border-purple-800", children: [t.jsxs("div", { className: "flex items-center gap-2 mb-2 text-purple-700 dark:text-purple-400", children: [t.jsx(qo, { className: "h-5 w-5" }), t.jsx("h3", { className: "font-semibold", children: "Details" })] }), t.jsxs("div", { className: "space-y-2", children: [t.jsxs("div", { className: "flex justify-between", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Type:" }), t.jsx("span", { className: "font-medium text-gray-900 dark:text-white capitalize", children: e.type })] }), e.category && t.jsxs("div", { className: "flex justify-between", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Category:" }), t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: e.category })] }), e.unit && t.jsxs("div", { className: "flex justify-between", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Unit:" }), t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: e.unit })] }), e.hsnCode && t.jsxs("div", { className: "flex justify-between", children: [t.jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "HSN Code:" }), t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: e.hsnCode })] })] })] })] }), t.jsx("div", { className: "border-t border-gray-200 dark:border-gray-700 pt-4", children: t.jsxs("div", { className: "flex items-center gap-6 text-sm text-gray-500 dark:text-gray-400", children: [t.jsxs("div", { className: "flex items-center gap-1", children: [t.jsx(Zt, { className: "h-4 w-4" }), "Created: ", new Date(e.createdAt).toLocaleDateString()] }), t.jsxs("div", { className: "flex items-center gap-1", children: [t.jsx(Zt, { className: "h-4 w-4" }), "Updated: ", new Date(e.updatedAt).toLocaleDateString()] })] }) })] }), t.jsx("div", { className: "p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 flex justify-end", children: t.jsx("button", { onClick: r, className: "px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors", children: "Close" }) })] }) }), Moe = ({ onClose: e, onSave: r, initialProduct: a }) => { const s = xt(), { currencySettings: n } = Br(), [i, o] = h.useState({ name: a?.name || "", description: a?.description || "", sku: a?.sku || "", type: a?.type || "PHYSICAL", category: a?.category || "", price: a?.price || 0, cost: a?.cost || 0, currency: a?.currency || n?.primary || "INR", unit: a?.unit || "pcs", taxRate: a?.taxRate || 0, hsnCode: a?.hsnCode || "", isActive: a?.isActive ?? !0 }), [c, u] = h.useState(null), [m, g] = h.useState(!1), [f, y] = h.useState({}), [p, b] = h.useState([]), [j, v] = h.useState(!0), [S, k] = h.useState([]), [E, C] = h.useState(!0), [N, A] = h.useState([]), [D, I] = h.useState(!0), $ = (q, V) => { o(X => ({ ...X, [q]: V })), f[q] && y(X => ({ ...X, [q]: "" })) }, B = q => { const V = q.target.files?.[0]; if (V) { if (!["image/jpeg", "image/jpg", "image/png", "image/gif", "image/webp"].includes(V.type)) { y(se => ({ ...se, image: "Please select a valid image file (JPEG, PNG, GIF, WebP)" })); return } if (V.size > 5 * 1024 * 1024) { y(se => ({ ...se, image: "File size must be less than 5MB" })); return } u(V), y(se => ({ ...se, image: "" })) } }, W = () => { const q = {}; return i.name.trim() || (q.name = "Product name is required"), i.price <= 0 && (q.price = "Price must be greater than 0"), y(q), Object.keys(q).length === 0 }; h.useEffect(() => { (async () => { try { const V = await Mc.getProductCategories(); b(V) } catch (V) { console.error("Failed to fetch categories:", V), R.error("Failed to load product categories") } finally { v(!1) } })() }, []), h.useEffect(() => { (async () => { try { const V = await Rc.getAll(); k(V) } catch (V) { console.error("Failed to fetch unit types:", V), R.error("Failed to load unit types") } finally { C(!1) } })() }, []), h.useEffect(() => { (async () => { try { const V = await Pl.getAll(); A(V) } catch (V) { console.error("Failed to fetch taxes:", V), R.error("Failed to load tax rates") } finally { I(!1) } })() }, []); const M = async () => { if (W()) { g(!0); try { const q = { ...i, type: i.type === "product" ? "PHYSICAL" : i.type || "PHYSICAL", price: Number(i.price) || 0, cost: i.cost ? Number(i.cost) : void 0, taxRate: i.taxRate ? Number(i.taxRate) : void 0 }; (!q.description || !q.description.trim()) && (q.description = void 0), (!q.sku || !q.sku.trim()) && (q.sku = void 0), (!q.category || !q.category.trim()) && (q.category = void 0), (!q.hsnCode || !q.hsnCode.trim()) && (q.hsnCode = void 0); let V = null; if (a) { if (V = await Oi.update(a.id, q), !V.success) throw new Error(V.message || "Failed to update product"); R.success("Product updated successfully!") } else { if (V = await Oi.create(q), !V.success) throw new Error(V.message || "Failed to create product"); R.success("Product created successfully!") } if (c) try { const X = a?.id || V?.data?.product?.id || V?.id; if (X) { const se = new FormData; se.append("file", c), se.append("entityType", "product"), se.append("entityId", X.toString()), se.append("name", c.name); const le = await fetch(`${Yo}/files/upload`, { method: "POST", headers: { Authorization: `Bearer ${localStorage.getItem("token") || localStorage.getItem("authToken")}` }, body: se }); if (!le.ok) throw new Error("Failed to upload image"); const ee = await le.json(); if (ee.success && ee.data?.file?.id) { const L = `/api/files/${ee.data.file.id}/download`; await Oi.update(X, { ...q, image: L }) } } } catch (X) { console.error("Failed to upload image:", X), R.error("Product saved but failed to upload image.") } r(), e() } catch (q) { console.error("Failed to save product:", q); const V = q?.response?.data?.message || "Failed to save product. Please try again."; R.error(V) } finally { g(!1) } } }; return t.jsx("div", { className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col", children: [t.jsxs("div", { className: "flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg", children: t.jsx(Fn, { className: "h-5 w-5 text-blue-600 dark:text-blue-400" }) }), t.jsx("h2", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: a ? "Edit Product" : "Add New Product" })] }), t.jsx("button", { onClick: e, className: "p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors", children: t.jsx(fa, { className: "h-5 w-5 text-gray-500" }) })] }), t.jsxs("div", { className: "flex-1 overflow-y-auto p-6 space-y-6", children: [t.jsxs("div", { className: "space-y-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2", children: "Basic Information" }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Product Name *" }), t.jsx("input", { type: "text", value: i.name, onChange: q => $("name", q.target.value), placeholder: "Enter product name", className: `w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${f.name ? "border-red-500" : "border-gray-300 dark:border-gray-600"}` }), f.name && t.jsx("p", { className: "text-red-500 text-sm mt-1", children: f.name })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "SKU" }), t.jsx("input", { type: "text", value: i.sku, onChange: q => $("sku", q.target.value), placeholder: "Enter SKU", className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Description" }), t.jsx("textarea", { value: i.description, onChange: q => $("description", q.target.value), placeholder: "Enter product description", rows: 3, className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" })] })] }), t.jsxs("div", { className: "space-y-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2", children: "Pricing & Inventory" }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Price *" }), t.jsxs("div", { className: "relative", children: [t.jsx("span", { className: "absolute left-3 top-2 text-gray-500", children: n?.symbol || "" }), t.jsx("input", { type: "number", value: i.price, onChange: q => $("price", parseFloat(q.target.value) || 0), placeholder: "0.00", step: "0.01", min: "0", className: `w-full pl-8 pr-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${f.price ? "border-red-500" : "border-gray-300 dark:border-gray-600"}` })] }), f.price && t.jsx("p", { className: "text-red-500 text-sm mt-1", children: f.price })] }), t.jsx("div", { children: t.jsx("div", { className: "relative" }) }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Unit Type" }), t.jsxs("select", { value: i.unit, onChange: q => $("unit", q.target.value), disabled: E, className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50", children: [t.jsx("option", { value: "", children: E ? "Loading unit types..." : "Select Unit Type" }), S.filter(q => q.isActive).map(q => t.jsx("option", { value: q.name, children: q.name.charAt(0).toUpperCase() + q.name.slice(1) }, q.id))] })] })] })] }), t.jsxs("div", { className: "space-y-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2", children: "Tax & Compliance" }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Tax Rate (%)" }), t.jsxs("select", { value: i.taxRate, onChange: q => $("taxRate", parseFloat(q.target.value) || 0), disabled: D, className: `w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50 ${f.taxRate ? "border-red-500" : "border-gray-300 dark:border-gray-600"}`, children: [t.jsx("option", { value: "0", children: "No Tax (0%)" }), !D && N.filter(q => q.isActive).map(q => t.jsxs("option", { value: Number(q.rate), children: [q.name, " (", q.rate, "%)"] }, q.id)), D && t.jsx("option", { disabled: !0, children: "Loading taxes..." })] }), f.taxRate && t.jsx("p", { className: "text-red-500 text-sm mt-1", children: f.taxRate })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "HSN Code" }), t.jsx("input", { type: "text", value: i.hsnCode, onChange: q => $("hsnCode", q.target.value), placeholder: "e.g., 8471", className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" })] })] })] }), t.jsxs("div", { className: "space-y-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2", children: "Category & Settings" }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsxs("div", { className: "flex items-center justify-between mb-2", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300", children: "Category" }), t.jsxs("button", { type: "button", onClick: () => s("/business-settings/product-categories"), className: "inline-flex items-center gap-1 px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 rounded transition-colors", title: "Manage Product Categories", children: [t.jsx($t, { size: 12 }), "Categories"] })] }), t.jsxs("select", { value: i.category, onChange: q => $("category", q.target.value), disabled: j, className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50", children: [t.jsx("option", { value: "", children: j ? "Loading categories..." : "Select Category" }), p.filter(q => q.isActive).map(q => t.jsx("option", { value: q.name, children: q.name }, q.id))] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Product Type" }), t.jsxs("select", { value: i.type, onChange: q => $("type", q.target.value), className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white", children: [t.jsx("option", { value: "product", children: "Product" }), t.jsx("option", { value: "service", children: "Service" }), t.jsx("option", { value: "digital", children: "Digital Product" })] })] })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("input", { type: "checkbox", id: "isActive", checked: i.isActive, onChange: q => $("isActive", q.target.checked), className: "w-4 h-4 text-weconnect-red border-gray-300 rounded focus:ring-weconnect-red" }), t.jsx("label", { htmlFor: "isActive", className: "text-sm font-medium text-gray-700 dark:text-gray-300", children: "Active (product will be available for sale)" })] })] }), t.jsxs("div", { className: "space-y-4", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2", children: "Product Image" }), t.jsx("div", { className: "border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6", children: t.jsxs("div", { className: "text-center", children: [t.jsx(Ui, { className: "mx-auto h-12 w-12 text-gray-400" }), t.jsxs("div", { className: "mt-4", children: [t.jsxs("label", { htmlFor: "file-upload", className: "cursor-pointer", children: [t.jsx("span", { className: "mt-2 block text-sm font-medium text-gray-900 dark:text-white", children: "Upload product image" }), t.jsx("span", { className: "mt-1 block text-sm text-gray-500 dark:text-gray-400", children: "PNG, JPG, GIF up to 5MB" })] }), t.jsx("input", { id: "file-upload", name: "file-upload", type: "file", className: "sr-only", accept: "image/*", onChange: B })] }), c && t.jsx("div", { className: "mt-4", children: t.jsxs("p", { className: "text-sm text-green-600 dark:text-green-400", children: ["Selected: ", c.name] }) }), f.image && t.jsx("p", { className: "text-red-500 text-sm mt-2", children: f.image })] }) })] })] }), t.jsxs("div", { className: "flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700", children: [t.jsx("button", { onClick: e, disabled: m, className: "px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors", children: "Cancel" }), t.jsx("button", { onClick: M, disabled: m, className: "px-6 py-2 bg-weconnect-red text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed", children: m ? "Saving..." : a ? "Update Product" : "Create Product" })] })] }) }) }, _oe = () => { const { hasPermission: e } = mr(), { t: r } = kn(); xt(); const [a, s] = h.useState([]), [n, i] = h.useState(null), [o, c] = h.useState(!0), [u, m] = h.useState(null), [g, f] = h.useState("list"), [y, p] = h.useState(["product", "sku", "category", "price", "status"]), [b, j] = h.useState({ status: "", category: "", type: "", search: "" }), [v, S] = h.useState(1), [k] = h.useState(50), { searchValue: E, debouncedSearchValue: C, setSearch: N, isSearching: A } = ql("", 500), [D, I] = h.useState(!1), [$, B] = h.useState(null), [W, M] = h.useState(!1), [q, V] = h.useState(!1), [X, se] = h.useState(void 0), [le, ee] = h.useState(null), [L, z] = h.useState([]), [T, _] = h.useState(!1), [H, U] = h.useState(null), [K, Z] = h.useState(!1), [J, te] = h.useState(!1); h.useEffect(() => { G() }, [C, b.status, b.category, b.type, v]); const G = async () => { try { c(!0), m(null); const fe = await Oi.list({ search: C, page: v, limit: k }), ke = fe?.data?.items ?? fe?.data?.products ?? (Array.isArray(fe?.data) ? fe.data : void 0) ?? fe?.products ?? []; s(ke || []); const he = fe?.data?.pagination || fe?.pagination; i(he ? { currentPage: he.currentPage ?? v, totalPages: he.totalPages ?? 1, totalProducts: he.totalItems ?? ke.length ?? 0, hasNextPage: (he.currentPage ?? 1) < (he.totalPages ?? 1), hasPrevPage: (he.currentPage ?? 1) > 1 } : { currentPage: 1, totalPages: 1, totalProducts: ke.length, hasNextPage: !1, hasPrevPage: !1 }) } catch (fe) { console.error("Error fetching products:", fe); const ke = fe?.response?.data?.message || "Failed to fetch products"; m(ke), R.error(ke) } finally { c(!1) } }, de = (fe, ke) => { j(he => ({ ...he, [fe]: ke })), S(1) }, Te = fe => { N(fe), S(1) }, pe = fe => { S(fe), window.scrollTo({ top: 0, behavior: "smooth" }) }, He = fe => { se(fe), V(!0) }, ne = fe => { ee(fe) }, De = () => { se(void 0), V(!0) }, $e = fe => { B(fe), I(!0) }, Et = async fe => { try { await Oi.update(fe.id, { isActive: !fe.isActive }), R.success(`Product ${fe.isActive ? "deactivated" : "activated"} successfully`), G() } catch (ke) { R.error(ke?.response?.data?.message || "Failed - status update") } }, Bt = async () => { if ($) { M(!0); try { await Oi.remove($.id), I(!1), B(null), R.success("Product deleted successfully!"), G() } catch (fe) { R.error(fe.response?.data?.message || "An error occurred") } finally { M(!1) } } }, Ft = () => { j({ search: "", status: "", category: "", type: "" }), S(1), N("") }, mt = () => { Dd("products_import_template.csv", ["name", "sku", "type", "category", "price", "cost", "currency", "unit", "taxRate", "stockQuantity", "minStockLevel", "isActive"], [["Sample Product", "SKU001", "PHYSICAL", "Electronics", "100", "70", "USD", "pcs", "10", "50", "10", "YES"]]) }, ce = async () => { try { Z(!0); const fe = await Oi.bulkExport({ search: C || void 0 }), ke = new Blob([fe], { type: "text/csv;charset=utf-8;" }), he = window.URL.createObjectURL(ke), Ee = document.createElement("a"); Ee.href = he, Ee.setAttribute("download", `products_export_${new Date().toISOString().slice(0, 10)}.csv`), document.body.appendChild(Ee), Ee.click(), Ee.remove(), R.success("Products exported successfully") } catch { R.error("Failed to export products") } finally { Z(!1) } }, Xe = fe => { const ke = fe.target.files?.[0]; if (ke) { if (!ke.name.endsWith(".csv")) { R.error("Please upload a CSV file"); return } U(ke) } }, jt = async () => { if (H) try { te(!0); const fe = await Oi.bulkImport(H); fe.success ? (R.success(fe.message || "Imported products successfully"), _(!1), U(null), G()) : R.error(fe.message || "Failed to import products") } catch (fe) { R.error(fe.response?.data?.message || "Failed to import products") } finally { te(!1) } }, Q = async () => { if (L.length !== 0 && window.confirm(`Are you sure? ${L.length} items.`)) try { c(!0), await Oi.bulkDelete(L), R.success("Deleted successfully"), z([]), G() } catch (fe) { R.error(fe.response?.data?.message || "Failed to delete") } finally { c(!1) } }, Le = fe => { z(ke => ke.includes(fe) ? ke.filter(he => he !== fe) : [...ke, fe]) }, Ve = () => { L.length === a.length && a.length > 0 ? z([]) : z(a.map(fe => fe.id)) }, et = !!C, pt = !!b.status, Y = !!b.category, je = et || pt || Y, Ne = fe => y.includes(fe); return t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { className: "flex flex-col lg:flex-row lg:items-end gap-4", children: [t.jsxs("div", { className: "flex flex-col sm:flex-row gap-4 flex-1", children: [t.jsxs("div", { className: "w-full sm:w-48", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: t.jsxs("div", { className: "flex items-center gap-2", children: [r("common.search"), A && t.jsx(Xr, { className: "h-3 w-3 animate-pulse text-blue-500" })] }) }), t.jsx(Zl, { value: E, onChange: Te, placeholder: "Search products..." })] }), t.jsx("div", { className: "w-full sm:w-48", children: t.jsx(ra, { label: "Status", value: b.status, onChange: fe => de("status", fe), options: [{ value: "", label: "All Statuses" }, { value: "active", label: "Active" }, { value: "inactive", label: "Inactive" }] }) }), t.jsx("div", { className: "w-full sm:w-48", children: t.jsx(ra, { label: "Category", value: b.category, onChange: fe => de("category", fe), options: [{ value: "", label: "All Categories" }] }) })] }), t.jsxs("div", { className: "flex flex-wrap items-center gap-2 w-full lg:w-auto", children: [t.jsxs("button", { onClick: ce, disabled: K, className: "px-4 py-3 bg-white dark:bg-gray-800 border rounded-full text-sm font-semibold disabled:opacity-50 flex items-center", children: [t.jsx(Bo, { className: "h-4 w-4 mr-2" }), K ? "Exporting..." : "Export"] }), t.jsxs("button", { onClick: () => _(!0), className: "px-4 py-3 bg-white dark:bg-gray-800 border rounded-full text-sm font-semibold flex items-center", children: [t.jsx(Ui, { className: "h-4 w-4 mr-2" }), "Import"] }), e("product.create") && t.jsxs("button", { onClick: De, className: "px-4 py-3 bg-[#ef444e] text-white rounded-full text-sm font-semibold flex items-center", children: [t.jsx($t, { className: "h-4 w-4 mr-2" }), "Add Product"] })] })] }), t.jsxs("div", { className: "hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto w-fit", children: [t.jsx("button", { className: `p-2 rounded-md ${g === "list" ? "bg-white dark:bg-gray-700 shadow-sm" : ""}`, onClick: () => f("list"), children: t.jsx(fi, { className: "w-4 h-4" }) }), t.jsx("button", { className: `p-2 rounded-md ${g === "card" ? "bg-white dark:bg-gray-700 shadow-sm" : ""}`, onClick: () => f("card"), children: t.jsx(hi, { className: "w-4 h-4" }) })] })] }), t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow border overflow-hidden", children: [t.jsx("div", { className: "p-6 border-b", children: t.jsxs("h3", { className: "text-lg font-semibold", children: ["All Products ", n && `(${n.totalProducts})`] }) }), t.jsx(io, { currentPage: n?.currentPage || 1, itemsPerPage: k, totalItems: n?.totalProducts || a.length, onItemsPerPageChange: () => { }, columnConfig: { columns: [{ id: "product", label: "Product" }, { id: "sku", label: "SKU" }, { id: "category", label: "Category" }, { id: "price", label: "Price" }, { id: "status", label: "Status" }], visibleColumns: y, onChange: p, minVisible: 1 } }), L.length > 0 && t.jsxs("div", { className: "m-4 flex items-center justify-between bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 rounded-lg p-3", children: [t.jsxs("span", { className: "text-sm font-medium", children: [L.length, " selected"] }), t.jsxs("div", { className: "flex gap-2", children: [t.jsxs("button", { onClick: Q, className: "bg-red-600 text-white px-3 py-1.5 rounded-md text-xs flex items-center", children: [t.jsx(yt, { className: "w-4 h-4 mr-1.5" }), " Delete"] }), t.jsx("button", { onClick: () => z([]), className: "text-xs text-gray-500", children: "Cancel" })] })] }), g === "card" ? t.jsx("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-6", children: o ? t.jsx("div", { className: "col-span-full py-20 text-center", children: t.jsx("div", { className: "animate-spin h-8 w-8 border-b-2 border-blue-600 mx-auto rounded-full" }) }) : u ? t.jsx(Yr, { title: "Error", description: u, isError: !0 }) : a.length === 0 ? t.jsx(Yr, { description: "No products found", showClearButton: je, onClear: Ft }) : a.map(fe => t.jsxs("div", { className: `p-4 rounded-lg border relative group ${L.includes(fe.id) ? "ring-2 ring-indigo-500" : ""}`, children: [t.jsx("button", { onClick: () => Le(fe.id), className: "absolute top-2 left-2 z-10 p-1 bg-white border rounded shadow-sm", children: L.includes(fe.id) ? t.jsx(Uu, { className: "w-4 h-4 text-indigo-600" }) : t.jsx(gy, { className: "w-4 h-4 text-gray-300" }) }), t.jsxs("div", { className: "flex items-center gap-3 mb-3 mt-4", children: [t.jsx("div", { className: "p-2 bg-red-500 rounded-lg", children: t.jsx(Fn, { className: "h-5 w-5 text-white" }) }), t.jsxs("div", { children: [t.jsx("h4", { className: "font-bold text-sm", children: fe.name }), t.jsx("p", { className: "text-xs text-gray-500", children: fe.sku || "No SKU" })] })] }), t.jsxs("div", { className: "text-sm font-semibold mb-2", children: [fe.price, " ", fe.currency] }), t.jsxs("div", { className: "flex justify-between items-center border-t pt-3", children: [t.jsxs("div", { className: "flex gap-1", children: [t.jsx("button", { onClick: () => ne(fe), className: "p-1 hover:bg-gray-100 rounded text-gray-500", children: t.jsx(Ht, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: () => He(fe), className: "p-1 hover:bg-gray-100 rounded text-blue-600", children: t.jsx(Jt, { className: "h-4 w-4" }) })] }), t.jsxs("div", { className: "flex gap-1", children: [t.jsx("button", { onClick: () => Et(fe), className: "p-1", children: fe.isActive ? t.jsx(M2, { className: "text-green-600 h-5 w-5" }) : t.jsx(R2, { className: "text-gray-400 h-5 w-5" }) }), t.jsx("button", { onClick: () => $e(fe), className: "p-1 hover:bg-red-50 text-red-600 rounded", children: t.jsx(yt, { className: "h-4 w-4" }) })] })] })] }, fe.id)) }) : t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "w-full divide-y divide-gray-200 dark:divide-gray-700", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-gray-900", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-6 py-3 text-start", children: t.jsx("button", { onClick: Ve, children: L.length === a.length && a.length > 0 ? t.jsx(Uu, { className: "w-4 h-4 text-indigo-600" }) : t.jsx(gy, { className: "w-4 h-4 text-gray-400" }) }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium uppercase tracking-wider ${Ne("product") ? "" : "hidden"}`, children: "Product" }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium uppercase tracking-wider ${Ne("sku") ? "" : "hidden"}`, children: "SKU" }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium uppercase tracking-wider ${Ne("category") ? "" : "hidden"}`, children: "Category" }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium uppercase tracking-wider ${Ne("price") ? "" : "hidden"}`, children: "Price" }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium uppercase tracking-wider ${Ne("status") ? "" : "hidden"}`, children: "Status" }), t.jsx("th", { className: "px-6 py-3 text-end text-xs font-medium uppercase tracking-wider", children: "Actions" })] }) }), t.jsx("tbody", { className: "divide-y", children: o ? t.jsx(Jl, { rows: 8, columns: 7 }) : a.length === 0 ? t.jsx("tr", { children: t.jsx("td", { colSpan: 7, className: "py-20", children: t.jsx(Yr, { description: "No results", onClear: Ft, showClearButton: je }) }) }) : a.map(fe => t.jsxs("tr", { className: L.includes(fe.id) ? "bg-indigo-50/30" : "", children: [t.jsx("td", { className: "px-6 py-4", children: t.jsx("button", { onClick: () => Le(fe.id), children: L.includes(fe.id) ? t.jsx(Uu, { className: "w-4 h-4 text-indigo-600" }) : t.jsx(gy, { className: "w-4 h-4 text-gray-300" }) }) }), t.jsx("td", { className: `px-6 py-4 ${Ne("product") ? "" : "hidden"}`, children: t.jsxs("div", { className: "flex items-center", children: [t.jsx("div", { className: "h-10 w-10 rounded-full bg-red-500 flex items-center justify-center mr-3", children: t.jsx(Fn, { className: "h-5 w-5 text-white" }) }), t.jsxs("div", { children: [t.jsx("div", { className: "font-medium", children: fe.name }), t.jsx("div", { className: "text-xs text-gray-500 truncate w-40", children: fe.description })] })] }) }), t.jsx("td", { className: `px-6 py-4 text-sm ${Ne("sku") ? "" : "hidden"}`, children: fe.sku || "-" }), t.jsx("td", { className: `px-6 py-4 text-sm ${Ne("category") ? "" : "hidden"}`, children: fe.category || "-" }), t.jsxs("td", { className: `px-6 py-4 text-sm ${Ne("price") ? "" : "hidden"}`, children: [fe.price, " ", fe.currency] }), t.jsx("td", { className: `px-6 py-4 ${Ne("status") ? "" : "hidden"}`, children: t.jsx("span", { className: `px-2 py-1 rounded-full text-xs ${fe.isActive ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`, children: fe.isActive ? "Active" : "Inactive" }) }), t.jsx("td", { className: "px-6 py-4 text-end", children: t.jsxs("div", { className: "flex justify-end gap-2", children: [t.jsx("button", { onClick: () => ne(fe), className: "text-gray-400 hover:text-blue-600", children: t.jsx(Ht, { className: "h-4 w-4" }) }), e("product.update") && t.jsxs(t.Fragment, { children: [t.jsx("button", { onClick: () => He(fe), className: "text-blue-600", children: t.jsx(Jt, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: () => Et(fe), children: fe.isActive ? t.jsx(M2, { className: "text-green-600 h-5 w-5" }) : t.jsx(R2, { className: "text-gray-400 h-5 w-5" }) })] }), e("product.delete") && t.jsx("button", { onClick: () => $e(fe), className: "text-red-600", children: t.jsx(yt, { className: "h-4 w-4" }) })] }) })] }, fe.id)) })] }) }), n && t.jsx(en, { currentPage: n.currentPage, totalPages: n.totalPages, totalItems: n.totalProducts, onPageChange: pe, itemsPerPage: 50 })] }), T && t.jsx("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg w-full max-w-lg overflow-hidden shadow-xl border", children: [t.jsxs("div", { className: "p-4 border-b flex justify-between items-center", children: [t.jsxs("h3", { className: "font-semibold flex items-center gap-2", children: [t.jsx(Ui, { className: "w-5 h-5" }), " Import Products"] }), t.jsx("button", { onClick: () => { _(!1), U(null) }, children: t.jsx(fa, { className: "w-5 h-5 text-gray-500" }) })] }), t.jsxs("div", { className: "p-6", children: [t.jsx("p", { className: "text-sm text-gray-600 mb-4", children: "Upload CSV. Must have 'name' and 'price'." }), t.jsxs("button", { onClick: mt, className: "text-sm text-blue-600 flex items-center gap-1 mb-4", children: [t.jsx(ah, { className: "w-4 h-4" }), " Template"] }), t.jsx("div", { className: "border-2 border-dashed rounded-xl p-8 text-center", children: H ? t.jsxs("div", { children: [t.jsx(ah, { className: "h-10 w-10 text-blue-500 mx-auto mb-2" }), t.jsx("p", { className: "text-sm font-medium", children: H.name }), t.jsx("button", { onClick: () => U(null), className: "text-xs text-red-500 mt-2", children: "Remove" })] }) : t.jsxs("label", { className: "cursor-pointer", children: [t.jsx(Ui, { className: "h-12 w-12 text-gray-400 mx-auto mb-2" }), t.jsx("span", { className: "text-blue-600 font-medium", children: "Click to upload" }), t.jsx("input", { type: "file", className: "hidden", accept: ".csv", onChange: Xe })] }) }), t.jsxs("div", { className: "mt-6 flex justify-end gap-3", children: [t.jsx("button", { onClick: () => { _(!1), U(null) }, className: "px-4 py-2 border rounded-lg", children: "Cancel" }), t.jsx("button", { onClick: jt, disabled: !H || J, className: "bg-blue-600 text-white px-4 py-2 rounded-lg disabled:opacity-50 flex items-center gap-2", children: J ? "Importing..." : "Start Import" })] })] })] }) }), t.jsx(Cm, { open: D && !!$, title: "Delete Product", description: `Are you sure you want to delete ${$?.name}?`, confirmText: "Delete", loading: W, onConfirm: Bt, onClose: () => { I(!1), B(null) } }), q && t.jsx(Moe, { onClose: () => { V(!1), se(void 0) }, onSave: () => { V(!1), G() }, initialProduct: X }), le && t.jsx(Roe, { product: le, onClose: () => ee(null) })] }) }, $oe = () => { const e = xt(), r = [{ id: "task-reports", name: "Task Reports", description: "Analyze task completion rates, team productivity and efficiency.", icon: W9, color: "bg-blue-500", href: "/reports/tasks", count: "12 available" }, { id: "lead-reports", name: "Lead Reports", description: "Track lead generation, conversion rates and source performance.", icon: $s, color: "bg-green-500", href: "/reports/leads", count: "8 available" }, { id: "deal-reports", name: "Deal Reports", description: "Monitor sales pipeline, deal velocity and revenue forecasts.", icon: Ea, color: "bg-purple-500", href: "/reports/deals", count: "15 available" }, { id: "expense-reports", name: "Expense Reports", description: "Review spending patterns, budget adherence and financial health.", icon: Qr, color: "bg-orange-500", href: "/reports/expenses", count: "6 available" }, { id: "invoice-reports", name: "Invoice Reports", description: "Track billing cycles, payments, and outstanding balances.", icon: Qa, color: "bg-red-500", href: "/reports/invoices", count: "10 available" }, { id: "quotation-reports", name: "Quotation Reports", description: "Analyze acceptance rates and proposal effectiveness.", icon: Ea, color: "bg-indigo-500", href: "/reports/quotations", count: "9 available" }]; return t.jsxs("div", { className: "p-6 space-y-6", children: [t.jsxs("div", { className: "flex flex-col gap-1", children: [t.jsxs("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(Qa, { className: "w-8 h-8 text-weconnect-red" }), "Analytics & Reports"] }), t.jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "Get deep insights into your business performance and team productivity." })] }), t.jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6", children: r.map(a => t.jsxs(Ae, { className: "group cursor-pointer hover:shadow-xl transition-all duration-300 border-gray-100 dark:border-slate-800 overflow-hidden", onClick: () => e(a.href), children: [t.jsx("div", { className: `h-1.5 w-full ${a.color}` }), t.jsxs(st, { className: "p-6", children: [t.jsxs("div", { className: "flex items-start justify-between", children: [t.jsxs("div", { className: "flex gap-4", children: [t.jsx("div", { className: `p-3 rounded-xl ${a.color} bg-opacity-10 text-white`, children: t.jsx(a.icon, { className: `w-8 h-8 ${a.color.replace("bg-", "text-")}` }) }), t.jsxs("div", { className: "space-y-1", children: [t.jsx("h3", { className: "text-xl font-bold text-gray-900 dark:text-white group-hover:text-weconnect-red transition-colors", children: a.name }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400 leading-relaxed max-w-xs", children: a.description })] })] }), t.jsx("div", { className: "p-2 rounded-full bg-gray-50 dark:bg-slate-900 group-hover:bg-weconnect-red/10 group-hover:text-weconnect-red transition-all", children: t.jsx(Xc, { className: "w-5 h-5" }) })] }), t.jsxs("div", { className: "mt-6 flex items-center justify-between border-t border-gray-50 dark:border-slate-800 pt-4", children: [t.jsx("span", { className: "text-xs font-semibold uppercase tracking-wider text-gray-400", children: a.count }), t.jsx("span", { className: "text-sm font-medium text-weconnect-red opacity-0 group-hover:opacity-100 transition-opacity", children: "View Reports " })] })] })] }, a.id)) }), t.jsx(Ae, { className: "bg-gradient-to-br from-slate-900 to-slate-800 text-white border-none overflow-hidden", children: t.jsxs(st, { className: "p-8 relative", children: [t.jsxs("div", { className: "relative z-10 max-w-2xl", children: [t.jsx("h2", { className: "text-2xl font-bold mb-2", children: "Build Custom Reports" }), t.jsx("p", { className: "text-slate-300 mb-6", children: "Need a more specific view of your data? Use our powerful custom report builder to visualize any dataset exactly how you want it." }), t.jsx("button", { className: "px-6 py-2.5 bg-weconnect-red hover:bg-red-700 text-white rounded-lg font-semibold transition-colors shadow-lg shadow-red-900/20", children: "Launch Report Builder" })] }), t.jsx(Qa, { className: "absolute right-[-20px] bottom-[-20px] w-64 h-64 text-white opacity-5 transform -rotate-12" })] }) })] }) }, Od = ({ currentPage: e, totalPages: r, totalItems: a, itemsPerPage: s, onPageChange: n, onItemsPerPageChange: i, showItemsPerPage: o = !0, itemsPerPageOptions: c = [5, 10, 25, 50], className: u = "" }) => { if (r <= 1 && !o) return null; const m = (e - 1) * s + 1, g = Math.min(e * s, a), y = (() => { const p = []; if (r <= 7) for (let j = 1; j <= r; j++)p.push(j); else { p.push(1), e > 4 && p.push("..."); const j = Math.max(2, e - 2), v = Math.min(r - 1, e + 2); for (let S = j; S <= v; S++)p.push(S); e < r - 3 && p.push("..."), r > 1 && p.push(r) } return p })(); return t.jsxs("div", { className: `flex items-center justify-between ${u}`, children: [o && t.jsxs("div", { className: "flex items-center space-x-2", children: [t.jsx("span", { className: "text-sm text-gray-700 dark:text-gray-300", children: "Items per page:" }), t.jsx("select", { value: s, onChange: p => i(Number(p.target.value)), className: "border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500", children: c.map(p => t.jsx("option", { value: p, children: p }, p)) })] }), t.jsxs("div", { className: "flex items-center space-x-4", children: [t.jsxs("div", { className: "text-sm text-gray-700 dark:text-gray-300", children: ["Showing ", m, " to ", g, " of ", a, " entries"] }), r > 1 && t.jsxs("div", { className: "flex items-center space-x-1", children: [t.jsx("button", { onClick: () => n(1), disabled: e === 1, className: "p-1 rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors", title: "First page", children: t.jsx(q9, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: () => n(e - 1), disabled: e === 1, className: "p-1 rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors", title: "Previous page", children: t.jsx(Xw, { className: "h-4 w-4" }) }), y.map((p, b) => t.jsx("button", { onClick: () => typeof p == "number" && n(p), disabled: p === "..." || p === e, className: `px-3 py-1 rounded border text-sm transition-colors ${p === e ? "bg-blue-600 text-white border-blue-600" : p === "..." ? "border-gray-300 dark:border-gray-600 cursor-default" : "border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`, children: p }, b)), t.jsx("button", { onClick: () => n(e + 1), disabled: e === r, className: "p-1 rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors", title: "Next page", children: t.jsx(Xc, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: () => n(r), disabled: e === r, className: "p-1 rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors", title: "Last page", children: t.jsx(H9, { className: "h-4 w-4" }) })] })] })] }) }, Id = ({ fields: e, values: r, onChange: a, itemsPerPage: s, onItemsPerPageChange: n }) => t.jsx("div", { className: "bg-white dark:bg-slate-900 p-4 rounded-xl border border-gray-100 dark:border-slate-800 shadow-sm mb-6", children: t.jsxs("div", { className: "flex flex-wrap items-end gap-4", children: [e.map(i => t.jsxs("div", { className: "flex-1 min-w-[200px]", children: [t.jsx("label", { className: "block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: i.label }), t.jsx("div", { className: "relative group", children: i.type === "select" ? t.jsxs(t.Fragment, { children: [t.jsx("div", { className: "absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-weconnect-red transition-colors", children: t.jsx(Zc, { className: "w-4 h-4" }) }), t.jsxs("select", { value: r[i.key] || "", onChange: o => a(i.key, o.target.value), className: "w-full h-11 pl-10 pr-10 rounded-2xl border border-gray-200 dark:border-slate-700 bg-gray-50/50 dark:bg-slate-800/50 text-sm focus:ring-2 focus:ring-weconnect-red/20 focus:border-weconnect-red focus:bg-white dark:focus:bg-slate-900 transition-all appearance-none", children: [t.jsx("option", { value: "", children: i.placeholder || "Select option" }), i.options?.map(o => t.jsx("option", { value: o.value, children: o.label }, o.value))] }), t.jsx("div", { className: "absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none", children: t.jsx(_s, { className: "w-4 h-4" }) })] }) : t.jsxs(t.Fragment, { children: [t.jsx("div", { className: "absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-weconnect-red transition-colors", children: t.jsx(Xr, { className: "w-4 h-4" }) }), t.jsx("input", { type: i.type, placeholder: i.placeholder || `Search ${i.label.toLowerCase()}...`, value: r[i.key] || "", onChange: o => a(i.key, o.target.value), className: "w-full h-11 pl-10 pr-4 rounded-2xl border border-gray-200 dark:border-slate-700 bg-gray-50/50 dark:bg-slate-800/50 text-sm focus:ring-2 focus:ring-weconnect-red/20 focus:border-weconnect-red focus:bg-white dark:focus:bg-slate-900 transition-all" })] }) })] }, i.key)), n && t.jsxs("div", { className: "flex-initial w-32", children: [t.jsx("label", { className: "block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: "Items per page" }), t.jsxs("div", { className: "relative group", children: [t.jsx("div", { className: "absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-weconnect-red transition-colors", children: t.jsx(Zc, { className: "w-4 h-4" }) }), t.jsx("select", { value: s || 10, onChange: i => n(Number(i.target.value)), className: "w-full h-11 pl-10 pr-10 rounded-2xl border border-gray-200 dark:border-slate-700 bg-gray-50/50 dark:bg-slate-800/50 text-sm focus:ring-2 focus:ring-weconnect-red/20 focus:border-weconnect-red focus:bg-white dark:focus:bg-slate-900 transition-all appearance-none", children: [10, 20, 50, 100].map(i => t.jsx("option", { value: i, children: i }, i)) }), t.jsx("div", { className: "absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none", children: t.jsx(_s, { className: "w-4 h-4" }) })] })] })] }) }), Uoe = () => { const e = xt(), [r, a] = Je.useState(1), [s, n] = Je.useState(10), [i, o] = Je.useState(!0), [c, u] = Je.useState(null), [m, g] = Je.useState({ search: "", status: "", priority: "", assignedTo: "" }), [f, y] = Je.useState([{ key: "search", label: "Search", type: "text", placeholder: "Search tasks..." }, { key: "status", label: "Status", type: "select", options: [{ label: "Pending", value: "PENDING" }, { label: "In Progress", value: "IN_PROGRESS" }, { label: "Completed", value: "COMPLETED" }, { label: "Cancelled", value: "CANCELLED" }] }, { key: "priority", label: "Priority", type: "select", options: [{ label: "Low", value: "LOW" }, { label: "Medium", value: "MEDIUM" }, { label: "High", value: "HIGH" }, { label: "Urgent", value: "URGENT" }] }, { key: "assignedTo", label: "Assigned To", type: "select", options: [] }]), p = (S, k) => { g(E => ({ ...E, [S]: k })) }; Je.useEffect(() => { (async () => { try { const k = await ur.getUsers(); if (k.success) { const E = [...f], C = E.find(N => N.key === "assignedTo"); C && (C.options = k.data.map(N => ({ label: `${N.firstName} ${N.lastName}`, value: N.id })), y(E)) } } catch (k) { console.error("Error fetching users for filters:", k) } })() }, []), Je.useEffect(() => { (async () => { try { o(!0); const k = await ti.getTaskReport(6, void 0, "all", r, s, m); k.success && u(k.data) } catch (k) { console.error("Error fetching task report:", k) } finally { o(!1) } })() }, [r, s, m]); const b = [{ label: "Total Tasks", value: c?.stats?.totalTasks || "0", icon: ut, color: "text-blue-500", bg: "bg-blue-50" }, { label: "Completed", value: c?.stats?.completedTasks || "0", icon: Kt, color: "text-green-500", bg: "bg-green-50" }, { label: "Overdue", value: c?.stats?.overdueTasks || "0", icon: Ol, color: "text-red-500", bg: "bg-red-50" }, { label: "Completion Rate", value: c?.stats?.completionRate || "0%", icon: pr, color: "text-purple-500", bg: "bg-purple-50" }]; if (i) return t.jsx("div", { className: "p-6 flex items-center justify-center min-h-[400px]", children: t.jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600" }) }); const j = ({ active: S, payload: k, label: E }) => S && k && k.length ? t.jsxs("div", { className: "bg-white dark:bg-slate-800 p-3 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700", children: [t.jsx("p", { className: "font-medium text-gray-900 dark:text-white", children: `${E}` }), k.map((C, N) => t.jsx("p", { className: "text-sm", style: { color: C.color }, children: `${C.name}: ${C.value}` }, N))] }) : null, v = ({ cx: S, cy: k, midAngle: E, innerRadius: C, outerRadius: N, percent: A }) => { const D = Math.PI / 180, I = C + (N - C) * .5, $ = S + I * Math.cos(-E * D), B = k + I * Math.sin(-E * D); return t.jsx("text", { x: $, y: B, fill: "white", textAnchor: $ > S ? "start" : "end", dominantBaseline: "central", className: "text-sm font-medium", children: `${(A * 100).toFixed(0)}%` }) }; return t.jsxs("div", { className: "p-6 space-y-6", children: [t.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between gap-4", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => e("/reports"), className: "p-2", children: t.jsx(pr, { className: "w-5 h-5" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Task Performance Report" }), t.jsx("p", { className: "text-sm text-gray-400 font-medium", children: "Detailed analytics on task completion and team efficiency." })] })] }), t.jsx("div", { className: "flex items-center gap-3", children: t.jsxs(ue, { variant: "PRIMARY", className: "flex items-center gap-2", children: [t.jsx(ys, { className: "w-4 h-4" }), " Export PDF"] }) })] }), t.jsx(Id, { fields: f, values: m, onChange: p, itemsPerPage: s, onItemsPerPageChange: n }), t.jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: b.map((S, k) => t.jsx(Ae, { className: "border-none shadow-sm dark:bg-slate-900", children: t.jsxs(st, { className: "p-6 flex items-center gap-4", children: [t.jsx("div", { className: `p-3 rounded-xl ${S.bg}`, children: t.jsx(S.icon, { className: `w-6 h-6 ${S.color}` }) }), t.jsxs("div", { children: [t.jsx("p", { className: "text-xs font-semibold text-gray-400 uppercase tracking-wider", children: S.label }), t.jsx("p", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: S.value })] })] }) }, k)) }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Task Completion Trend" }) }), t.jsx(st, { children: t.jsx(Ms, { width: "100%", height: 300, children: t.jsxs(sg, { data: c?.completionTrendData || [], children: [t.jsx(fs, { strokeDasharray: "3 3", stroke: "#374151" }), t.jsx(xs, { dataKey: "month", stroke: "#9CA3AF" }), t.jsx(ps, { stroke: "#9CA3AF" }), t.jsx(Ba, { content: t.jsx(j, {}) }), t.jsx(za, {}), t.jsx(Zi, { type: "monotone", dataKey: "completed", stroke: "#10b981", strokeWidth: 2, dot: { fill: "#10b981" }, activeDot: { r: 8 } }), t.jsx(Zi, { type: "monotone", dataKey: "overdue", stroke: "#ef4444", strokeWidth: 2, dot: { fill: "#ef4444" }, activeDot: { r: 8 } })] }) }) })] }), t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Task Priority Distribution" }) }), t.jsx(st, { children: t.jsx(Ms, { width: "100%", height: 300, children: t.jsxs(yx, { children: [t.jsx(tg, { data: c?.priorityDistributionData || [], cx: "50%", cy: "50%", labelLine: !1, label: v, outerRadius: 80, fill: "#8884d8", dataKey: "value", children: (c?.priorityDistributionData || []).map((S, k) => t.jsx(tl, { fill: S.color }, `cell-${k}`)) }), t.jsx(Ba, {}), t.jsx(za, {})] }) }) })] })] }), t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Team Performance" }) }), t.jsx(st, { children: t.jsx(Ms, { width: "100%", height: 300, children: t.jsxs(Pd, { data: c?.teamPerformanceData || [], children: [t.jsx(fs, { strokeDasharray: "3 3", stroke: "#374151" }), t.jsx(xs, { dataKey: "name", stroke: "#9CA3AF" }), t.jsx(ps, { stroke: "#9CA3AF" }), t.jsx(Ba, { content: t.jsx(j, {}) }), t.jsx(za, {}), t.jsx(qn, { dataKey: "completed", fill: "#10b981" }), t.jsx(qn, { dataKey: "overdue", fill: "#ef4444" })] }) }) })] }), t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Recent Overdue Tasks" }) }), t.jsxs(st, { className: "p-0", children: [t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "w-full text-left", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-slate-950 text-gray-400 uppercase text-[10px] font-bold tracking-widest", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-6 py-4", children: "Task Name" }), t.jsx("th", { className: "px-6 py-4", children: "Assigned To" }), t.jsx("th", { className: "px-6 py-4", children: "Due Date" }), t.jsx("th", { className: "px-6 py-4", children: "Status" })] }) }), t.jsx("tbody", { className: "divide-y divide-gray-100 dark:divide-slate-800", children: (c?.recentOverdueTasks || []).map((S, k) => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors", children: [t.jsx("td", { className: "px-6 py-4 font-bold text-gray-900 dark:text-white", children: S.name }), t.jsx("td", { className: "px-6 py-4 text-gray-600 dark:text-slate-300", children: S.user }), t.jsx("td", { className: "px-6 py-4 text-sm font-medium text-red-500", children: S.date }), t.jsx("td", { className: "px-6 py-4", children: t.jsx("span", { className: "px-2.5 py-1 bg-red-100 text-red-600 rounded-full text-[10px] font-bold uppercase", children: S.status }) })] }, k)) })] }) }), t.jsx("div", { className: "p-4 border-t border-gray-100 dark:border-slate-800", children: t.jsx(Od, { currentPage: r, totalPages: c?.pagination?.pages || 1, totalItems: c?.pagination?.total || 0, itemsPerPage: s, onPageChange: a, onItemsPerPageChange: n }) })] })] })] }) }, Foe = () => { const e = xt(), [r, a] = h.useState(1), [s, n] = h.useState(10), [i, o] = h.useState(!0), [c, u] = h.useState(null), [m, g] = h.useState("6months"), [f, y] = h.useState("area"), [p, b] = h.useState("horizontal"), [j, v] = h.useState({ search: "", email: "", status: "", assignedTo: "" }), [S, k] = h.useState([{ key: "search", label: "Search", type: "text", placeholder: "Search leads..." }, { key: "email", label: "Email Search", type: "text", placeholder: "Search by email..." }, { key: "status", label: "Status", type: "select", options: [{ label: "New", value: "NEW" }, { label: "Contacted", value: "CONTACTED" }, { label: "Qualified", value: "QUALIFIED" }, { label: "Proposal", value: "PROPOSAL" }, { label: "Negotiation", value: "NEGOTIATION" }, { label: "Closed", value: "CLOSED" }, { label: "Lost", value: "LOST" }, { label: "Converted", value: "CONVERTED" }] }, { key: "assignedTo", label: "Assigned To", type: "select", options: [] }, { key: "sourceId", label: "Source", type: "select", options: [] }, { key: "priority", label: "Priority", type: "select", options: [{ label: "Low", value: "LOW" }, { label: "Medium", value: "MEDIUM" }, { label: "High", value: "HIGH" }, { label: "Urgent", value: "URGENT" }] }, { key: "industry", label: "Industry", type: "text", placeholder: "Industry..." }, { key: "company", label: "Company", type: "text", placeholder: "Company..." }, { key: "city", label: "City", type: "text", placeholder: "City..." }, { key: "state", label: "State", type: "text", placeholder: "State..." }, { key: "country", label: "Country", type: "text", placeholder: "Country..." }]), E = ($, B) => { v(W => ({ ...W, [$]: B })) }; h.useEffect(() => { (async () => { try { const [B, W] = await Promise.all([Mu.getLeadSources(), ur.getUsers()]), M = [...S]; if (Array.isArray(B)) { const q = M.find(V => V.key === "sourceId"); q && (q.options = B.map(V => ({ label: V.name, value: V.id }))) } if (Array.isArray(W)) { const q = M.find(V => V.key === "assignedTo"); q && (q.options = W.map(V => ({ label: `${V.firstName} ${V.lastName}`, value: V.id }))) } k(M) } catch (B) { console.error("Error fetching metadata for filters:", B) } })() }, []), h.useEffect(() => { (async () => { try { o(!0); const B = await ti.getLeadReport(m === "3months" ? 3 : m === "6months" ? 6 : 12, void 0, "all", r, s, j); B.success && u(B.data) } catch (B) { console.error("Error fetching lead report data:", B) } finally { o(!1) } })() }, [m, r, s, j]); const C = [{ label: "Total Leads", value: c?.stats?.totalLeads?.toLocaleString() || "0", icon: $s, color: "text-blue-500", bg: "bg-blue-50", change: c?.stats?.leadsChange || 0, isPositive: c?.stats?.leadsChange >= 0 }, { label: "Conversion Rate", value: c?.stats?.conversionRate || "0%", icon: Zw, color: "text-green-500", bg: "bg-green-50", change: c?.stats?.conversionChange || 0, isPositive: c?.stats?.conversionChange >= 0 }, { label: "Converted Leads", value: c?.stats?.convertedLeads?.toLocaleString() || "0", icon: Qc, color: "text-orange-500", bg: "bg-orange-50", change: c?.stats?.convertedChange || 0, isPositive: c?.stats?.convertedChange >= 0 }, { label: "Avg. Response", value: `${c?.stats?.avgResponseTimeHours || 0} hrs`, icon: Kt, color: "text-purple-500", bg: "bg-purple-50", change: c?.stats?.responseChange || 0, isPositive: c?.stats?.responseChange <= 0 }], N = ["#3B82F6", "#10B981", "#F59E0B", "#EF4444", "#8B5CF6", "#EC4899", "#14B8A6", "#F97316"], A = ({ active: $, payload: B, label: W }) => $ && B && B.length ? t.jsxs("div", { className: "bg-white dark:bg-slate-800 p-4 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700", children: [t.jsx("p", { className: "font-medium text-gray-900 dark:text-white mb-2", children: `${W}` }), B.map((M, q) => t.jsxs("div", { className: "flex items-center gap-2 mb-1", children: [t.jsx("div", { className: "w-3 h-3 rounded-full", style: { backgroundColor: M.color } }), t.jsx("p", { className: "text-sm text-gray-700 dark:text-gray-300", children: `${M.name}: ${M.value.toLocaleString()}` })] }, q)), B.length > 1 && t.jsx("div", { className: "mt-2 pt-2 border-t border-gray-200 dark:border-slate-700", children: t.jsxs("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: ["Total: ", B.reduce((M, q) => M + q.value, 0).toLocaleString()] }) })] }) : null, D = ({ cx: $, cy: B, midAngle: W, innerRadius: M, outerRadius: q, percent: V }) => { const X = Math.PI / 180, se = M + (q - M) * .5, le = $ + se * Math.cos(-W * X), ee = B + se * Math.sin(-W * X); return t.jsx("text", { x: le, y: ee, fill: "white", textAnchor: le > $ ? "start" : "end", dominantBaseline: "central", className: "text-sm font-medium", children: `${(V * 100).toFixed(0)}%` }) }, I = ({ active: $, payload: B, label: W }) => { if ($ && B && B.length) { const M = B.find(X => X.dataKey === "leads")?.value || 0, q = B.find(X => X.dataKey === "converted")?.value || 0, V = M > 0 ? (q / M * 100).toFixed(1) : 0; return t.jsxs("div", { className: "bg-white dark:bg-slate-800 p-4 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700", children: [t.jsx("p", { className: "font-medium text-gray-900 dark:text-white mb-2", children: `${W}` }), t.jsxs("div", { className: "space-y-1", children: [t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("div", { className: "w-3 h-3 rounded-full bg-blue-500" }), t.jsxs("p", { className: "text-sm text-gray-700 dark:text-gray-300", children: ["Total Leads: ", M.toLocaleString()] })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("div", { className: "w-3 h-3 rounded-full bg-green-500" }), t.jsxs("p", { className: "text-sm text-gray-700 dark:text-gray-300", children: ["Converted: ", q.toLocaleString()] })] }), t.jsx("div", { className: "mt-2 pt-2 border-t border-gray-200 dark:border-slate-700", children: t.jsxs("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: ["Conversion Rate: ", V, "%"] }) })] })] }) } return null }; return i ? t.jsx("div", { className: "h-full w-full flex items-center justify-center", children: t.jsxs("div", { className: "flex flex-col items-center gap-4", children: [t.jsx(_i, { className: "w-8 h-8 animate-spin text-blue-600" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Loading lead report data..." })] }) }) : (c?.funnelData?.map(($, B) => { const W = B > 0 ? c.funnelData[B - 1].value : 0, M = W > 0 ? W - $.value : 0, q = W > 0 ? (M / W * 100).toFixed(1) : 0, V = B > 0 ? ($.value / c.funnelData[0].value * 100).toFixed(1) : 100; return { ...$, dropoff: M, dropoffRate: q, conversionRate: V, fill: N[B % N.length] } }), c?.sourceDistributionData?.map($ => ({ source: $.name, leads: $.total, conversion: parseFloat($.rate) * 10, fullMark: 100 })), c?.sourceDistributionData?.map(($, B) => ({ name: $.name, size: $.total, color: N[B % N.length] })), t.jsxs("div", { className: "p-4 sm:p-6 space-y-6", children: [t.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between gap-4", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => e("/reports"), className: "p-2", children: t.jsx(pr, { className: "w-5 h-5" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Lead Analysis Report" }), t.jsx("p", { className: "text-sm text-gray-400 font-medium", children: "Insights into lead funnel and conversion metrics." })] })] }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsxs("div", { className: "flex items-center gap-2 bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 p-1", children: [t.jsx("button", { onClick: () => g("3months"), className: `px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${m === "3months" ? "bg-blue-500 text-white" : "text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"}`, children: "3M" }), t.jsx("button", { onClick: () => g("6months"), className: `px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${m === "6months" ? "bg-blue-500 text-white" : "text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"}`, children: "6M" }), t.jsx("button", { onClick: () => g("12months"), className: `px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${m === "12months" ? "bg-blue-500 text-white" : "text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"}`, children: "1Y" })] }), t.jsxs(ue, { variant: "PRIMARY", className: "flex items-center gap-2", children: [t.jsx(ys, { className: "w-4 h-4" }), " Export Excel"] })] })] }), t.jsx(Id, { fields: S, values: j, onChange: E, itemsPerPage: s, onItemsPerPageChange: n }), t.jsx("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4", children: C.map(($, B) => t.jsx(Ae, { className: "border-none shadow-sm dark:bg-slate-900 hover:shadow-md transition-shadow", children: t.jsx(st, { className: "p-6", children: t.jsxs("div", { className: "flex items-start justify-between", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx("div", { className: `p-3 rounded-xl ${$.bg}`, children: t.jsx($.icon, { className: `w-6 h-6 ${$.color}` }) }), t.jsxs("div", { children: [t.jsx("p", { className: "text-xs font-semibold text-gray-400 uppercase tracking-wider", children: $.label }), t.jsx("p", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: $.value })] })] }), t.jsxs("div", { className: `flex flex-col items-center gap-1 text-xs font-medium ${$.isPositive ? "text-green-500" : "text-red-500"}`, children: [$.isPositive ? t.jsx(oD, { className: "w-4 h-4" }) : t.jsx(_s, { className: "w-4 h-4" }), Math.abs($.change), "%"] })] }) }) }, B)) }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { className: "pb-2", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Lead Source Distribution" }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("button", { className: "p-1 rounded hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors", children: t.jsx(dD, { className: "w-4 h-4 text-gray-500" }) }), t.jsx(nh, { className: "w-5 h-5 text-purple-500" })] })] }) }), t.jsx(st, { children: t.jsx(Ms, { width: "100%", height: 300, children: t.jsxs(yx, { children: [t.jsx(tg, { data: c?.sourceDistributionData || [], cx: "50%", cy: "50%", labelLine: !1, label: D, outerRadius: 80, fill: "#8884d8", dataKey: "total", animationBegin: 0, animationDuration: 800, children: (c?.sourceDistributionData || []).map(($, B) => t.jsx(tl, { fill: N[B % N.length] }, `cell-${B}`)) }), t.jsx(Ba, { content: t.jsx(A, {}) }), t.jsx(za, {})] }) }) })] }), t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { className: "pb-2", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Lead Conversion Trend" }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsxs("div", { className: "flex items-center gap-1 bg-white dark:bg-slate-800 rounded-md border border-gray-200 dark:border-slate-700 p-0.5", children: [t.jsx("button", { onClick: () => y("area"), className: `px-2 py-1 text-xs font-medium rounded transition-colors ${f === "area" ? "bg-blue-500 text-white" : "text-gray-600 dark:text-gray-300"}`, children: "Area" }), t.jsx("button", { onClick: () => y("line"), className: `px-2 py-1 text-xs font-medium rounded transition-colors ${f === "line" ? "bg-blue-500 text-white" : "text-gray-600 dark:text-gray-300"}`, children: "Line" }), t.jsx("button", { onClick: () => y("bar"), className: `px-2 py-1 text-xs font-medium rounded transition-colors ${f === "bar" ? "bg-blue-500 text-white" : "text-gray-600 dark:text-gray-300"}`, children: "Bar" })] }), t.jsx(Ea, { className: "w-5 h-5 text-green-500" })] })] }) }), t.jsx(st, { children: t.jsx(Ms, { width: "100%", height: 300, children: f === "area" ? t.jsxs(dk, { data: c?.conversionTrendData || [], children: [t.jsx(fs, { strokeDasharray: "3 3", stroke: "#374151" }), t.jsx(xs, { dataKey: "month", stroke: "#9CA3AF" }), t.jsx(ps, { stroke: "#9CA3AF" }), t.jsx(Ba, { content: t.jsx(I, {}) }), t.jsx(za, {}), t.jsx(od, { type: "monotone", dataKey: "leads", stackId: "1", stroke: "#3B82F6", fill: "#3B82F6", fillOpacity: .6, animationDuration: 800 }), t.jsx(od, { type: "monotone", dataKey: "converted", stackId: "1", stroke: "#10B981", fill: "#10B981", fillOpacity: .6, animationDuration: 800 })] }) : f === "line" ? t.jsxs(sg, { data: c?.conversionTrendData || [], children: [t.jsx(fs, { strokeDasharray: "3 3", stroke: "#374151" }), t.jsx(xs, { dataKey: "month", stroke: "#9CA3AF" }), t.jsx(ps, { stroke: "#9CA3AF" }), t.jsx(Ba, { content: t.jsx(I, {}) }), t.jsx(za, {}), t.jsx(Zi, { type: "monotone", dataKey: "leads", stroke: "#3B82F6", strokeWidth: 2, dot: { fill: "#3B82F6" }, activeDot: { r: 6 }, animationDuration: 800 }), t.jsx(Zi, { type: "monotone", dataKey: "converted", stroke: "#10B981", strokeWidth: 2, dot: { fill: "#10B981" }, activeDot: { r: 6 }, animationDuration: 800 })] }) : t.jsxs(Pd, { data: c?.conversionTrendData || [], children: [t.jsx(fs, { strokeDasharray: "3 3", stroke: "#374151" }), t.jsx(xs, { dataKey: "month", stroke: "#9CA3AF" }), t.jsx(ps, { stroke: "#9CA3AF" }), t.jsx(Ba, { content: t.jsx(I, {}) }), t.jsx(za, {}), t.jsx(qn, { dataKey: "leads", fill: "#3B82F6", animationDuration: 800 }), t.jsx(qn, { dataKey: "converted", fill: "#10B981", animationDuration: 800 })] }) }) })] })] }), t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { children: t.jsxs("div", { className: "flex items-center justify-between w-full", children: [t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Source Performance" }), t.jsx(Qc, { className: "w-5 h-5 text-green-500" })] }) }), t.jsxs(st, { className: "p-0", children: [t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "w-full text-left", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-slate-950 text-gray-400 uppercase text-[10px] font-bold tracking-widest", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-6 py-4", children: "Source" }), t.jsx("th", { className: "px-6 py-4", children: "Total Leads" }), t.jsx("th", { className: "px-6 py-4", children: "Converted" }), t.jsx("th", { className: "px-6 py-4", children: "Conv. Rate" })] }) }), t.jsxs("tbody", { className: "divide-y divide-gray-100 dark:divide-slate-800", children: [(c?.sourceDistributionData || []).map(($, B) => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors", children: [t.jsx("td", { className: "px-6 py-4 font-bold text-gray-900 dark:text-white", children: $.name }), t.jsx("td", { className: "px-6 py-4 text-gray-600 dark:text-slate-300", children: $.total }), t.jsx("td", { className: "px-6 py-4 text-gray-600 dark:text-slate-300 font-medium", children: $.converted }), t.jsx("td", { className: "px-6 py-4", children: t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("div", { className: "w-16 h-1.5 bg-gray-100 dark:bg-slate-800 rounded-full overflow-hidden", children: t.jsx("div", { className: "h-full bg-green-500 rounded-full", style: { width: $.rate } }) }), t.jsx("span", { className: "text-xs font-bold text-gray-900 dark:text-white", children: $.rate })] }) })] }, B)), (c?.sourceDistributionData || []).length === 0 && t.jsx("tr", { children: t.jsx("td", { colSpan: 4, className: "px-6 py-10 text-center text-gray-400 font-medium italic", children: "No lead source data available." }) })] })] }) }), (c?.sourceDistributionData || []).length > 0 && t.jsx("div", { className: "p-4 border-t border-gray-100 dark:border-slate-800", children: t.jsx(Od, { currentPage: r, totalPages: c?.pagination?.pages || 1, totalItems: c?.pagination?.total || 0, itemsPerPage: s, onPageChange: a, onItemsPerPageChange: n }) })] })] })] })) }, zoe = () => { const e = xt(), [r, a] = h.useState(1), [s, n] = h.useState(10), [i, o] = h.useState(!0), [c, u] = h.useState(null), [m, g] = h.useState("6months"), [f, y] = h.useState("area"), [p, b] = h.useState({ search: "", status: "", priority: "", assignedTo: "" }), [j, v] = h.useState([{ key: "search", label: "Search", type: "text", placeholder: "Search deals..." }, { key: "status", label: "Status", type: "select", options: [{ label: "Won", value: "WON" }, { label: "Lost", value: "LOST" }, { label: "Proposal", value: "PROPOSAL" }, { label: "Negotiation", value: "NEGOTIATION" }, { label: "Draft", value: "DRAFT" }] }, { key: "probability", label: "Probability", type: "select", options: [{ label: "High (75%+)", value: "75" }, { label: "Medium (50%+)", value: "50" }, { label: "Low (25%+)", value: "25" }, { label: "Initial (0%+)", value: "0" }] }, { key: "assignedTo", label: "Assigned To", type: "select", options: [] }]), S = (N, A) => { b(D => ({ ...D, [N]: A })) }; h.useEffect(() => { (async () => { try { const A = await ur.getUsers(); if (A.success) { const D = [...j], I = D.find($ => $.key === "assignedTo"); I && (I.options = A.data.map($ => ({ label: `${$.firstName} ${$.lastName}`, value: $.id })), v(D)) } } catch (A) { console.error("Error fetching users for filters:", A) } })() }, []), h.useEffect(() => { (async () => { try { o(!0); const A = await ti.getDealReport(m === "3months" ? 3 : m === "6months" ? 6 : 12, void 0, "all", r, s, p); A.success && u(A.data) } catch (A) { console.error("Error fetching deal report data:", A) } finally { o(!1) } })() }, [m, r, s, p]); const k = [{ label: "Pipeline Value", value: c?.stats?.pipelineValue || "0", icon: Yu, color: "text-blue-500", bg: "bg-blue-50" }, { label: "Closed Deals", value: c?.stats?.closedDealsValue || "0", icon: Ea, color: "text-green-500", bg: "bg-green-50" }, { label: "Win Rate", value: c?.stats?.winRate || "0%", icon: Eb, color: "text-orange-500", bg: "bg-orange-50" }, { label: "Avg. Deal Size", value: c?.stats?.avgDealSize || "0", icon: Qr, color: "text-purple-500", bg: "bg-purple-50" }], { formatCurrency: E } = Br(), C = ({ active: N, payload: A, label: D }) => N && A && A.length ? t.jsxs("div", { className: "bg-white dark:bg-slate-800 p-4 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700", children: [t.jsx("p", { className: "font-medium text-gray-900 dark:text-white mb-2", children: `${D}` }), A.map((I, $) => t.jsxs("div", { className: "flex items-center gap-2 mb-1", children: [t.jsx("div", { className: "w-3 h-3 rounded-full", style: { backgroundColor: I.color } }), t.jsx("p", { className: "text-sm text-gray-700 dark:text-gray-300", children: `${I.name}: ${E(I.value)}` })] }, $))] }) : null; return i ? t.jsx("div", { className: "h-full w-full flex items-center justify-center min-h-[400px]", children: t.jsx(_i, { className: "w-8 h-8 animate-spin text-blue-600" }) }) : t.jsxs("div", { className: "p-4 sm:p-6 space-y-6", children: [t.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between gap-4", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => e("/reports"), className: "p-2", children: t.jsx(pr, { className: "w-5 h-5" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Sales & Deal Report" }), t.jsx("p", { className: "text-sm text-gray-400 font-medium", children: "Comprehensive overview of sales pipeline and closure rates." })] })] }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "flex items-center gap-2 bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 p-1", children: ["3months", "6months", "12months"].map(N => t.jsx("button", { onClick: () => g(N), className: `px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${m === N ? "bg-blue-500 text-white" : "text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"}`, children: N === "3months" ? "3M" : N === "6months" ? "6M" : "1Y" }, N)) }), t.jsxs(ue, { variant: "PRIMARY", className: "flex items-center gap-2", children: [t.jsx(ys, { className: "w-4 h-4" }), " Export"] })] })] }), t.jsx(Id, { fields: j, values: p, onChange: S, itemsPerPage: s, onItemsPerPageChange: n }), t.jsx("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4", children: k.map((N, A) => t.jsx(Ae, { className: "border-none shadow-sm dark:bg-slate-900", children: t.jsxs(st, { className: "p-6 flex items-center gap-4", children: [t.jsx("div", { className: `p-3 rounded-xl ${N.bg}`, children: t.jsx(N.icon, { className: `w-6 h-6 ${N.color}` }) }), t.jsxs("div", { children: [t.jsx("p", { className: "text-xs font-semibold text-gray-400 uppercase tracking-wider", children: N.label }), t.jsx("p", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: N.value })] })] }) }, A)) }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { className: "pb-2", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Sales Forecast vs Actual" }), t.jsx("div", { className: "flex items-center gap-1 bg-white dark:bg-slate-800 rounded-md border border-gray-200 dark:border-slate-700 p-0.5", children: ["area", "line", "bar"].map(N => t.jsx("button", { onClick: () => y(N), className: `px-2 py-1 text-xs font-medium rounded transition-colors ${f === N ? "bg-blue-500 text-white" : "text-gray-600 dark:text-gray-300"}`, children: N.charAt(0).toUpperCase() + N.slice(1) }, N)) })] }) }), t.jsx(st, { children: t.jsx(Ms, { width: "100%", height: 300, children: f === "area" ? t.jsxs(dk, { data: c?.salesTrendData || [], children: [t.jsx(fs, { strokeDasharray: "3 3", stroke: "#374151", vertical: !1 }), t.jsx(xs, { dataKey: "month", stroke: "#9CA3AF" }), t.jsx(ps, { stroke: "#9CA3AF", tickFormatter: N => `${c?.currency?.symbol || "$"}${N >= 1e3 ? (N / 1e3).toFixed(0) + "K" : N}` }), t.jsx(Ba, { content: t.jsx(C, {}) }), t.jsx(za, {}), t.jsx(od, { type: "monotone", dataKey: "forecast", stroke: "#3B82F6", fill: "#3B82F6", fillOpacity: .4, name: "Forecasted Revenue" }), t.jsx(od, { type: "monotone", dataKey: "actual", stroke: "#10B981", fill: "#10B981", fillOpacity: .6, name: "Actual Revenue" })] }) : f === "line" ? t.jsxs(sg, { data: c?.salesTrendData || [], children: [t.jsx(fs, { strokeDasharray: "3 3", stroke: "#374151", vertical: !1 }), t.jsx(xs, { dataKey: "month", stroke: "#9CA3AF" }), t.jsx(ps, { stroke: "#9CA3AF", tickFormatter: N => `${c?.currency?.symbol || "$"}${N >= 1e3 ? (N / 1e3).toFixed(0) + "K" : N}` }), t.jsx(Ba, { content: t.jsx(C, {}) }), t.jsx(za, {}), t.jsx(Zi, { type: "monotone", dataKey: "forecast", stroke: "#3B82F6", strokeWidth: 2, name: "Forecasted" }), t.jsx(Zi, { type: "monotone", dataKey: "actual", stroke: "#10B981", strokeWidth: 2, name: "Actual" })] }) : t.jsxs(Pd, { data: c?.salesTrendData || [], children: [t.jsx(fs, { strokeDasharray: "3 3", stroke: "#374151", vertical: !1 }), t.jsx(xs, { dataKey: "month", stroke: "#9CA3AF" }), t.jsx(ps, { stroke: "#9CA3AF" }), t.jsx(Ba, { content: t.jsx(C, {}) }), t.jsx(za, {}), t.jsx(qn, { dataKey: "forecast", fill: "#3B82F6", name: "Forecasted" }), t.jsx(qn, { dataKey: "actual", fill: "#10B981", name: "Actual" })] }) }) })] }), t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { className: "pb-2", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Deal Performance Metrics" }), t.jsx(Qc, { className: "w-5 h-5 text-purple-500" })] }) }), t.jsx(st, { children: t.jsxs("div", { className: "grid grid-cols-2 gap-4 h-[300px]", children: [t.jsxs("div", { className: "flex flex-col items-center justify-center p-6 bg-blue-50 dark:bg-blue-900/20 rounded-2xl", children: [t.jsx(Kt, { className: "w-10 h-10 text-blue-500 mb-4" }), t.jsx("p", { className: "text-3xl font-bold text-gray-900 dark:text-white", children: c?.stats?.avgDaysToClose || 0 }), t.jsx("p", { className: "text-sm font-medium text-gray-500 dark:text-gray-400", children: "Avg. Days to Close" })] }), t.jsxs("div", { className: "flex flex-col items-center justify-center p-6 bg-green-50 dark:bg-green-900/20 rounded-2xl", children: [t.jsx(Ea, { className: "w-10 h-10 text-green-500 mb-4" }), t.jsx("p", { className: "text-3xl font-bold text-gray-900 dark:text-white", children: c?.stats?.winRate || "0%" }), t.jsx("p", { className: "text-sm font-medium text-gray-500 dark:text-gray-400", children: "Winning Chance" })] })] }) })] })] }), t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Recent Closed Deals" }), t.jsx(Yu, { className: "w-5 h-5 text-blue-500" })] }) }), t.jsxs(st, { className: "p-0", children: [t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "w-full text-left", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-slate-950 text-gray-400 uppercase text-[10px] font-bold tracking-widest", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-6 py-4", children: "Deal Name" }), t.jsx("th", { className: "px-6 py-4", children: "Owner" }), t.jsx("th", { className: "px-6 py-4", children: "Value" }), t.jsx("th", { className: "px-6 py-4", children: "Closed On" })] }) }), t.jsxs("tbody", { className: "divide-y divide-gray-100 dark:divide-slate-800", children: [(c?.recentClosedDeals || []).map((N, A) => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors", children: [t.jsx("td", { className: "px-6 py-4 font-bold text-gray-900 dark:text-white", children: N.name }), t.jsx("td", { className: "px-6 py-4 text-gray-600 dark:text-slate-300", children: N.owner }), t.jsx("td", { className: "px-6 py-4 font-bold text-green-600 dark:text-green-400", children: N.value }), t.jsx("td", { className: "px-6 py-4 text-xs font-bold text-gray-400 uppercase tracking-widest", children: N.date })] }, A)), (c?.recentClosedDeals || []).length === 0 && t.jsx("tr", { children: t.jsx("td", { colSpan: 4, className: "px-6 py-10 text-center text-gray-400 font-medium italic", children: "No closed deals found in this period." }) })] })] }) }), c?.pagination && t.jsx("div", { className: "p-4 border-t border-gray-100 dark:border-slate-800", children: t.jsx(Od, { currentPage: r, totalPages: c?.pagination?.pages || 1, totalItems: c?.pagination?.total || 0, itemsPerPage: s, onPageChange: a, onItemsPerPageChange: n }) })] })] })] }) }, Boe = () => { const e = xt(), [r, a] = h.useState(1), [s, n] = h.useState(10), [i, o] = h.useState(!0), [c, u] = h.useState(null), [m, g] = h.useState("6months"), [f, y] = h.useState({ search: "", category: "", type: "", status: "", submittedBy: "" }), [p, b] = h.useState([{ key: "search", label: "Search", type: "text", placeholder: "Search expenses..." }, { key: "status", label: "Status", type: "select", options: [{ label: "Pending", value: "PENDING" }, { label: "Approved", value: "APPROVED" }, { label: "Rejected", value: "REJECTED" }, { label: "Reimbursed", value: "REIMBURSED" }] }, { key: "type", label: "Type", type: "select", options: [{ label: "Travel", value: "TRAVEL" }, { label: "Meals", value: "MEALS" }, { label: "Accommodation", value: "ACCOMMODATION" }, { label: "Office Supplies", value: "OFFICE_SUPPLIES" }, { label: "Utilities", value: "UTILITIES" }, { label: "Marketing", value: "MARKETING" }, { label: "Entertainment", value: "ENTERTAINMENT" }, { label: "Training", value: "TRAINING" }, { label: "Equipment", value: "EQUIPMENT" }, { label: "Software", value: "SOFTWARE" }, { label: "Consulting", value: "CONSULTING" }, { label: "Miscellaneous", value: "MISCELLANEOUS" }, { label: "Other", value: "OTHER" }] }, { key: "category", label: "Category", type: "text", placeholder: "Category..." }, { key: "submittedBy", label: "Submitted By", type: "select", options: [] }]), j = (N, A) => { y(D => ({ ...D, [N]: A })) }, { formatCurrency: v } = Br(); h.useEffect(() => { (async () => { try { const A = await ur.getUsers(); if (A.success) { const D = [...p], I = D.find($ => $.key === "submittedBy"); I && (I.options = A.data.map($ => ({ label: `${$.firstName} ${$.lastName}`, value: $.id })), b(D)) } } catch (A) { console.error("Error fetching users for filters:", A) } })() }, []), h.useEffect(() => { (async () => { try { o(!0); const A = await ti.getExpenseReport(m === "3months" ? 3 : m === "6months" ? 6 : 12, void 0, "all", r, s, f); A.success && u(A.data) } catch (A) { console.error("Error fetching expense report:", A) } finally { o(!1) } })() }, [m, r, s, f]); const S = [{ label: "Total Expenses", value: c?.stats?.totalAmount || "0", icon: nh, color: "text-red-500", bg: "bg-red-50" }, { label: "Approved", value: c?.stats?.approvedAmount || "0", icon: nh, color: "text-green-500", bg: "bg-green-50" }, { label: "Pending", value: c?.stats?.pendingAmount || "0", icon: Yu, color: "text-blue-500", bg: "bg-blue-50" }, { label: "Rejected", value: c?.stats?.rejectedAmount || "0", icon: Ol, color: "text-orange-500", bg: "bg-orange-50" }], k = ["#3B82F6", "#10B981", "#F59E0B", "#EF4444", "#8B5CF6", "#EC4899", "#14B8A6", "#F97316"]; if (i) return t.jsx("div", { className: "p-6 flex items-center justify-center min-h-[400px]", children: t.jsx(_i, { className: "animate-spin h-10 w-10 text-indigo-600" }) }); const E = ({ active: N, payload: A, label: D }) => N && A && A.length ? t.jsxs("div", { className: "bg-white dark:bg-slate-800 p-3 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700", children: [t.jsx("p", { className: "font-medium text-gray-900 dark:text-white mb-2", children: `${D}` }), A.map((I, $) => t.jsxs("div", { className: "flex items-center gap-2 mb-1", children: [t.jsx("div", { className: "w-3 h-3 rounded-full", style: { backgroundColor: I.color } }), t.jsx("p", { className: "text-sm text-gray-700 dark:text-gray-300", children: `${I.name}: ${v(I.value)}` })] }, $))] }) : null, C = ({ cx: N, cy: A, midAngle: D, innerRadius: I, outerRadius: $, percent: B }) => { const W = Math.PI / 180, M = I + ($ - I) * .5, q = N + M * Math.cos(-D * W), V = A + M * Math.sin(-D * W); return t.jsx("text", { x: q, y: V, fill: "white", textAnchor: q > N ? "start" : "end", dominantBaseline: "central", className: "text-sm font-medium", children: `${(B * 100).toFixed(0)}%` }) }; return t.jsxs("div", { className: "p-4 sm:p-6 space-y-6", children: [t.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between gap-4", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => e("/reports"), className: "p-2", children: t.jsx(pr, { className: "w-5 h-5" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Expense Analysis Report" }), t.jsx("p", { className: "text-sm text-gray-400 font-medium", children: "Detailed breakdown of company spending and overheads." })] })] }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "flex items-center gap-2 bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 p-1", children: ["3months", "6months", "12months"].map(N => t.jsx("button", { onClick: () => g(N), className: `px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${m === N ? "bg-blue-500 text-white" : "text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"}`, children: N === "3months" ? "3M" : N === "6months" ? "6M" : "1Y" }, N)) }), t.jsxs(ue, { variant: "PRIMARY", className: "flex items-center gap-2", children: [t.jsx(ys, { className: "w-4 h-4" }), " Export"] })] })] }), t.jsx(Id, { fields: p, values: f, onChange: j, itemsPerPage: s, onItemsPerPageChange: n }), t.jsx("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4", children: S.map((N, A) => t.jsx(Ae, { className: "border-none shadow-sm dark:bg-slate-900", children: t.jsxs(st, { className: "p-6 flex items-center gap-4", children: [t.jsx("div", { className: `p-3 rounded-xl ${N.bg}`, children: t.jsx(N.icon, { className: `w-6 h-6 ${N.color}` }) }), t.jsxs("div", { children: [t.jsx("p", { className: "text-xs font-semibold text-gray-400 uppercase tracking-wider", children: N.label }), t.jsx("p", { className: "text-lg font-bold text-gray-900 dark:text-white truncate", children: N.value })] })] }) }, A)) }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { className: "pb-2", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Monthly Expense Trend" }), t.jsx(Ea, { className: "w-5 h-5 text-blue-500" })] }) }), t.jsx(st, { children: t.jsx(Ms, { width: "100%", height: 300, children: t.jsxs(Pd, { data: c?.expenseTrendData || [], children: [t.jsx(fs, { strokeDasharray: "3 3", stroke: "#374151", vertical: !1 }), t.jsx(xs, { dataKey: "month", stroke: "#9CA3AF" }), t.jsx(ps, { stroke: "#9CA3AF", tickFormatter: N => `${c?.currency?.symbol || ""}${N >= 1e3 ? (N / 1e3).toFixed(0) + "K" : N}` }), t.jsx(Ba, { content: t.jsx(E, {}) }), t.jsx(za, {}), t.jsx(qn, { dataKey: "amount", name: "Total Expense", fill: "#EF4444", radius: [4, 4, 0, 0] })] }) }) })] }), t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { className: "pb-2", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Expense Category Breakdown" }), t.jsx(Qa, { className: "w-5 h-5 text-purple-500" })] }) }), t.jsx(st, { children: t.jsx(Ms, { width: "100%", height: 300, children: t.jsxs(yx, { children: [t.jsx(tg, { data: c?.categoryDistributionData || [], cx: "50%", cy: "50%", labelLine: !1, label: C, outerRadius: 80, fill: "#8884d8", dataKey: "value", children: (c?.categoryDistributionData || []).map((N, A) => t.jsx(tl, { fill: k[A % k.length] }, `cell-${A}`)) }), t.jsx(Ba, { formatter: N => v(N) }), t.jsx(za, {})] }) }) })] })] }), t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Recent Large Expenses" }) }), t.jsxs(st, { className: "p-0", children: [t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "w-full text-left", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-slate-950 text-gray-400 uppercase text-[10px] font-bold tracking-widest", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-6 py-4", children: "Expense Description" }), t.jsx("th", { className: "px-6 py-4", children: "Category" }), t.jsx("th", { className: "px-6 py-4", children: "Submitted By" }), t.jsx("th", { className: "px-6 py-4", children: "Amount" }), t.jsx("th", { className: "px-6 py-4", children: "Date" }), t.jsx("th", { className: "px-6 py-4", children: "Status" })] }) }), t.jsxs("tbody", { className: "divide-y divide-gray-100 dark:divide-slate-800", children: [(c?.recentExpenses || []).map((N, A) => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors", children: [t.jsx("td", { className: "px-6 py-4 font-bold text-gray-900 dark:text-white", children: N.description }), t.jsx("td", { className: "px-6 py-4 text-sm text-gray-600 dark:text-gray-400", children: N.category }), t.jsx("td", { className: "px-6 py-4 text-sm text-gray-600 dark:text-gray-400", children: N.user }), t.jsx("td", { className: "px-6 py-4 font-bold text-red-600", children: N.amount }), t.jsx("td", { className: "px-6 py-4 text-xs font-medium text-gray-400", children: N.date }), t.jsx("td", { className: "px-6 py-4", children: t.jsx("span", { className: `px-2 py-1 rounded-full text-[10px] font-bold uppercase ${N.status === "APPROVED" ? "bg-green-100 text-green-600" : N.status === "PENDING" ? "bg-blue-100 text-blue-600" : "bg-red-100 text-red-600"}`, children: N.status }) })] }, A)), (c?.recentExpenses || []).length === 0 && t.jsx("tr", { children: t.jsx("td", { colSpan: 6, className: "px-6 py-10 text-center text-gray-400 font-medium italic", children: "No expense data available for this range." }) })] })] }) }), t.jsx("div", { className: "p-4 border-t border-gray-100 dark:border-slate-800", children: t.jsx(Od, { currentPage: r, totalPages: c?.pagination?.pages || 1, totalItems: c?.pagination?.total || 0, itemsPerPage: s, onPageChange: a, onItemsPerPageChange: n }) })] })] })] }) }, qoe = () => {
    const e = xt(), [r, a] = h.useState(1), [s, n] = h.useState(10), [i, o] = h.useState(!0), [c, u] = h.useState(null), [m, g] = h.useState("6months"), [f, y] = h.useState({ search: "", status: "" }), [p] = h.useState([{ key: "search", label: "Search", type: "text", placeholder: "Search invoices..." }, { key: "status", label: "Status", type: "select", options: [{ label: "Paid", value: "PAID" }, { label: "Pending", value: "PENDING" }, { label: "Overdue", value: "OVERDUE" }, { label: "Partial", value: "PARTIAL" }, { label: "Draft", value: "DRAFT" }, { label: "Cancelled", value: "CANCELLED" }] }]), b = (C, N) => { y(A => ({ ...A, [C]: N })) }; h.useEffect(() => { (async () => { try { o(!0); const N = await ti.getInvoiceReport(m === "3months" ? 3 : m === "6months" ? 6 : 12, void 0, "all", r, s, f); N.success && u(N.data) } catch (N) { console.error("Error fetching invoice report:", N) } finally { o(!1) } })() }, [m, r, s, f]); const j = [{ label: "Total Invoiced", value: c?.stats?.totalBilled || "0", icon: Qr, color: "text-blue-500", bg: "bg-blue-50" }, { label: "Amount Paid", value: c?.stats?.totalPaid || "0", icon: ut, color: "text-green-500", bg: "bg-green-50" }, { label: "Outstanding", value: c?.stats?.outstanding || "0", icon: Kt, color: "text-orange-500", bg: "bg-orange-50" }, { label: "Overdue", value: c?.stats?.overdue || "0", icon: dr, color: "text-red-500", bg: "bg-red-50" }], v = ["#3B82F6", "#10B981", "#F59E0B", "#EF4444", "#8B5CF6", "#EC4899", "#14B8A6", "#F97316"], S = () => {
        if (!c?.highValueInvoices?.length) return; const C = ["Invoice #", "Client", "Amount", "Status", "Due Date"], N = c.highValueInvoices.map($ => [$.id, $.client, $.amount, $.status, $.date]), A = "data:text/csv;charset=utf-8," + C.join(",") + `
`+ N.map($ => $.join(",")).join(`
`), D = encodeURI(A), I = document.createElement("a"); I.setAttribute("href", D), I.setAttribute("download", `high_value_invoices_${new Date().toISOString().slice(0, 10)}.csv`), document.body.appendChild(I), I.click(), document.body.removeChild(I)
    }, k = C => new Intl.NumberFormat("en-US", { style: "currency", currency: c?.currency?.code || "USD", maximumFractionDigits: 0 }).format(C), E = ({ active: C, payload: N, label: A }) => C && N && N.length ? t.jsxs("div", { className: "bg-white dark:bg-slate-800 p-3 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700", children: [t.jsx("p", { className: "font-medium text-gray-900 dark:text-white mb-2", children: `${A}` }), N.map((D, I) => t.jsxs("div", { className: "flex items-center gap-2 mb-1", children: [t.jsx("div", { className: "w-3 h-3 rounded-full", style: { backgroundColor: D.color } }), t.jsx("p", { className: "text-sm text-gray-700 dark:text-gray-300", children: `${D.name}: ${k(D.value)}` })] }, I))] }) : null; return i ? t.jsx("div", { className: "p-6 flex items-center justify-center min-h-[400px]", children: t.jsx(_i, { className: "animate-spin h-10 w-10 text-indigo-600" }) }) : t.jsxs("div", { className: "p-6 space-y-6", children: [t.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between gap-4", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => e("/reports"), className: "p-2", children: t.jsx(pr, { className: "w-5 h-5" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Invoice Analysis Report" }), t.jsx("p", { className: "text-sm text-gray-400 font-medium", children: "Financial insights, collection trends, and receivables." })] })] }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "flex items-center gap-2 bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 p-1", children: ["3months", "6months", "12months"].map(C => t.jsx("button", { onClick: () => g(C), className: `px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${m === C ? "bg-blue-500 text-white" : "text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"}`, children: C === "3months" ? "3M" : C === "6months" ? "6M" : "1Y" }, C)) }), t.jsxs(ue, { variant: "PRIMARY", className: "flex items-center gap-2", onClick: S, children: [t.jsx(ys, { className: "w-4 h-4" }), " Export"] })] })] }), t.jsx(Id, { fields: p, values: f, onChange: b, itemsPerPage: s, onItemsPerPageChange: n }), t.jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: j.map((C, N) => t.jsx(Ae, { className: "border-none shadow-sm dark:bg-slate-900", children: t.jsxs(st, { className: "p-6 flex items-center gap-4", children: [t.jsx("div", { className: `p-3 rounded-xl ${C.bg}`, children: t.jsx(C.icon, { className: `w-6 h-6 ${C.color}` }) }), t.jsxs("div", { children: [t.jsx("p", { className: "text-xs font-semibold text-gray-400 uppercase tracking-wider", children: C.label }), t.jsx("p", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: C.value })] })] }) }, N)) }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { className: "pb-2", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Revenue Analysis" }), t.jsx(Ea, { className: "w-5 h-5 text-blue-500" })] }) }), t.jsx(st, { children: t.jsx(Ms, { width: "100%", height: 300, children: t.jsxs(Pd, { data: c?.revenueTrendData || [], children: [t.jsx(fs, { strokeDasharray: "3 3", stroke: "#374151", vertical: !1 }), t.jsx(xs, { dataKey: "month", stroke: "#9CA3AF" }), t.jsx(ps, { stroke: "#9CA3AF", tickFormatter: C => C >= 1e3 ? `${c?.currency?.symbol || "$"}${(C / 1e3).toFixed(0)}K` : `${c?.currency?.symbol || "$"}${C}` }), t.jsx(Ba, { content: t.jsx(E, {}) }), t.jsx(za, {}), t.jsx(qn, { dataKey: "billed", name: "Billed", fill: "#3B82F6", radius: [4, 4, 0, 0] }), t.jsx(qn, { dataKey: "collected", name: "Collected", fill: "#10B981", radius: [4, 4, 0, 0] })] }) }) })] }), t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { className: "pb-2", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Invoice Status Distribution" }), t.jsx(nh, { className: "w-5 h-5 text-purple-500" })] }) }), t.jsx(st, { children: t.jsx(Ms, { width: "100%", height: 300, children: t.jsxs(yx, { children: [t.jsx(tg, { data: c?.statusDistributionData || [], cx: "50%", cy: "50%", labelLine: !1, outerRadius: 80, fill: "#8884d8", dataKey: "value", label: ({ name: C, percent: N }) => `${C} ${((N || 0) * 100).toFixed(0)}%`, children: (c?.statusDistributionData || []).map((C, N) => t.jsx(tl, { fill: v[N % v.length] }, `cell-${N}`)) }), t.jsx(Ba, {}), t.jsx(za, {})] }) }) })] })] }), t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Recent High-Value Invoices" }) }), t.jsxs(st, { className: "p-0", children: [t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "w-full text-left font-medium", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-slate-950 text-gray-400 uppercase text-[10px] font-bold tracking-widest", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-6 py-4 text-center", children: "Invoice #" }), t.jsx("th", { className: "px-6 py-4", children: "Client" }), t.jsx("th", { className: "px-6 py-4 text-right", children: "Amount" }), t.jsx("th", { className: "px-6 py-4 text-center", children: "Status" }), t.jsx("th", { className: "px-6 py-4 text-center", children: "Due Date" })] }) }), t.jsxs("tbody", { className: "divide-y divide-gray-100 dark:divide-slate-800", children: [(c?.highValueInvoices || []).map((C, N) => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors", children: [t.jsx("td", { className: "px-6 py-4 text-center font-bold text-blue-600 dark:text-blue-400", children: C.id }), t.jsx("td", { className: "px-6 py-4 text-gray-900 dark:text-white", children: C.client }), t.jsx("td", { className: "px-6 py-4 text-right text-gray-900 dark:text-white font-bold", children: C.amount }), t.jsx("td", { className: "px-6 py-4 text-center", children: t.jsx("span", { className: `px-2.5 py-1 rounded-full text-[10px] font-bold uppercase ${C.status === "PAID" ? "bg-green-100 text-green-600" : C.status === "OVERDUE" ? "bg-red-100 text-red-600" : "bg-orange-100 text-orange-600"}`, children: C.status }) }), t.jsx("td", { className: "px-6 py-4 text-center text-xs text-gray-400", children: C.date })] }, N)), (c?.highValueInvoices || []).length === 0 && t.jsx("tr", { children: t.jsx("td", { colSpan: 5, className: "px-6 py-10 text-center text-gray-400 italic font-medium", children: "No invoice data found for this period." }) })] })] }) }), t.jsx("div", { className: "p-4 border-t border-gray-100 dark:border-slate-800", children: t.jsx(Od, { currentPage: r, totalPages: c?.pagination?.pages || 1, totalItems: c?.pagination?.total || 0, itemsPerPage: s, onPageChange: a, onItemsPerPageChange: n }) })] })] })] })
}, Hoe = () => {
    const e = xt(), [r, a] = h.useState(1), [s, n] = h.useState(10), [i, o] = h.useState(!0), [c, u] = h.useState(null), [m, g] = h.useState("6months"), [f, y] = h.useState({ search: "", status: "" }), [p] = h.useState([{ key: "search", label: "Search", type: "text", placeholder: "Search quotations..." }, { key: "status", label: "Status", type: "select", options: [{ label: "Draft", value: "DRAFT" }, { label: "Sent", value: "SENT" }, { label: "Viewed", value: "VIEWED" }, { label: "Accepted", value: "ACCEPTED" }, { label: "Rejected", value: "REJECTED" }, { label: "Expired", value: "EXPIRED" }, { label: "Cancelled", value: "CANCELLED" }] }]), b = (S, k) => { y(E => ({ ...E, [S]: k })) }; h.useEffect(() => { (async () => { try { o(!0); const k = await ti.getQuotationReport(m === "3months" ? 3 : m === "6months" ? 6 : 12, void 0, "all", r, s, f); k.success && u(k.data) } catch (k) { console.error("Error fetching quotation report:", k) } finally { o(!1) } })() }, [m, r, s, f]); const j = [{ label: "Total Quotes", value: c?.stats?.total.toString() || "0", icon: G9, color: "text-purple-500", bg: "bg-purple-50" }, { label: "Accepted", value: c?.stats?.accepted.toString() || "0", icon: ut, color: "text-green-500", bg: "bg-green-50" }, { label: "Waiting", value: c?.stats?.waiting.toString() || "0", icon: Kt, color: "text-orange-500", bg: "bg-orange-50" }, { label: "Rejected", value: c?.stats?.rejected.toString() || "0", icon: Ca, color: "text-red-500", bg: "bg-red-50" }], v = () => {
        if (!c?.quotations?.length) return; const S = ["Quote #", "Subject", "Client", "Amount", "Status", "Valid Until"], k = c.quotations.map(A => [A.id, A.subject, A.client, A.amount, A.status, A.validUntil]), E = "data:text/csv;charset=utf-8," + S.join(",") + `
`+ k.map(A => A.join(",")).join(`
`), C = encodeURI(E), N = document.createElement("a"); N.setAttribute("href", C), N.setAttribute("download", `quotation_report_${new Date().toISOString().slice(0, 10)}.csv`), document.body.appendChild(N), N.click(), document.body.removeChild(N)
    }; return i ? t.jsx("div", { className: "p-6 flex items-center justify-center min-h-[400px]", children: t.jsx(_i, { className: "animate-spin h-10 w-10 text-indigo-600" }) }) : t.jsxs("div", { className: "p-6 space-y-6", children: [t.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between gap-4", children: [t.jsxs("div", { className: "flex items-center gap-4", children: [t.jsx(ue, { variant: "GHOST", size: "SM", onClick: () => e("/reports"), className: "p-2", children: t.jsx(pr, { className: "w-5 h-5" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Quotation Performance" }), t.jsx("p", { className: "text-sm text-gray-400 font-medium", children: "Tracking proposal success rates and conversion pipeline." })] })] }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "flex items-center gap-2 bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 p-1", children: ["3months", "6months", "12months"].map(S => t.jsx("button", { onClick: () => g(S), className: `px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${m === S ? "bg-blue-500 text-white" : "text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"}`, children: S === "3months" ? "3M" : S === "6months" ? "6M" : "1Y" }, S)) }), t.jsxs(ue, { variant: "PRIMARY", className: "flex items-center gap-2", onClick: v, children: [t.jsx(ys, { className: "w-4 h-4" }), " Export"] })] })] }), t.jsx(Id, { fields: p, values: f, onChange: b, itemsPerPage: s, onItemsPerPageChange: n }), t.jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: j.map((S, k) => t.jsx(Ae, { className: "border-none shadow-sm dark:bg-slate-900", children: t.jsxs(st, { className: "p-6 flex items-center gap-4", children: [t.jsx("div", { className: `p-3 rounded-xl ${S.bg}`, children: t.jsx(S.icon, { className: `w-6 h-6 ${S.color}` }) }), t.jsxs("div", { children: [t.jsx("p", { className: "text-xs font-semibold text-gray-400 uppercase tracking-wider", children: S.label }), t.jsx("p", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: S.value })] })] }) }, k)) }), t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [t.jsxs(Ae, { className: "lg:col-span-2 dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { className: "pb-2", children: t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "Acceptance Rate Trend (%)" }), t.jsx(Ea, { className: "w-5 h-5 text-green-500" })] }) }), t.jsx(st, { children: t.jsx(Ms, { width: "100%", height: 300, children: t.jsxs(sg, { data: c?.trendData || [], children: [t.jsx(fs, { strokeDasharray: "3 3", stroke: "#374151", vertical: !1 }), t.jsx(xs, { dataKey: "month", stroke: "#9CA3AF" }), t.jsx(ps, { stroke: "#9CA3AF", tickFormatter: S => `${S}%` }), t.jsx(Ba, { contentStyle: { backgroundColor: "#1E293B", border: "none", borderRadius: "8px", color: "#fff" }, formatter: S => [`${S}%`, "Acceptance Rate"] }), t.jsx(Zi, { type: "monotone", dataKey: "rate", stroke: "#10B981", strokeWidth: 3, dot: { fill: "#10B981", r: 4 }, activeDot: { r: 6, strokeWidth: 0 } })] }) }) })] }), t.jsxs(Ae, { className: "min-h-[350px] flex items-center justify-center border-none dark:bg-slate-900 bg-blue-600 relative overflow-hidden group", children: [t.jsx("div", { className: "absolute top-0 right-0 p-8 opacity-10 group-hover:scale-110 transition-transform", children: t.jsx(ut, { className: "w-32 h-32 text-white" }) }), t.jsxs("div", { className: "relative z-10 p-6 text-white h-full flex flex-col justify-center", children: [t.jsx("p", { className: "text-blue-100 text-sm font-bold uppercase tracking-widest mb-2", children: "Overall Conversion" }), t.jsxs("h2", { className: "text-6xl font-black mb-4", children: [c?.stats?.conversionRate, "%"] }), t.jsxs("div", { className: "flex items-center gap-2 text-blue-100 font-medium", children: [t.jsx(Ea, { className: "w-4 h-4" }), t.jsx("span", { children: "Average across period" })] })] })] })] }), t.jsxs(Ae, { className: "dark:bg-slate-900 border-none shadow-sm", children: [t.jsx(Pt, { children: t.jsx("h3", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "High-Value Quotations" }) }), t.jsxs(st, { className: "p-0", children: [t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "w-full text-left", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-slate-950 text-gray-400 uppercase text-[10px] font-bold tracking-widest", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-6 py-4", children: "Quote #" }), t.jsx("th", { className: "px-6 py-4", children: "Subject" }), t.jsx("th", { className: "px-6 py-4", children: "Client" }), t.jsx("th", { className: "px-6 py-4", children: "Amount" }), t.jsx("th", { className: "px-6 py-4", children: "Status" }), t.jsx("th", { className: "px-6 py-4", children: "Valid Until" })] }) }), t.jsxs("tbody", { className: "divide-y divide-gray-100 dark:divide-slate-800", children: [(c?.quotations || []).map((S, k) => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors", children: [t.jsxs("td", { className: "px-6 py-4 font-bold text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(Mt, { className: "w-4 h-4 text-gray-400" }), S.id] }), t.jsx("td", { className: "px-6 py-4 text-gray-600 dark:text-slate-300 font-medium", children: S.subject }), t.jsx("td", { className: "px-6 py-4 text-gray-600 dark:text-slate-300", children: S.client }), t.jsx("td", { className: "px-6 py-4 font-bold text-gray-900 dark:text-white", children: S.amount }), t.jsx("td", { className: "px-6 py-4", children: t.jsx("span", { className: `px-2 py-0.5 rounded-full text-[10px] font-bold uppercase ${S.status === "ACCEPTED" ? "bg-green-100 text-green-600" : S.status === "REJECTED" ? "bg-red-100 text-red-600" : S.status === "EXPIRED" ? "bg-gray-100 text-gray-600" : "bg-orange-100 text-orange-600"}`, children: S.status }) }), t.jsx("td", { className: "px-6 py-4 text-xs font-bold text-orange-500 uppercase tracking-widest", children: S.validUntil })] }, k)), (c?.quotations || []).length === 0 && t.jsx("tr", { children: t.jsx("td", { colSpan: 6, className: "px-6 py-10 text-center text-gray-400 italic", children: "No quotations found for this period." }) })] })] }) }), c?.pagination && t.jsx("div", { className: "p-4 border-t border-gray-100 dark:border-slate-800", children: t.jsx(Od, { currentPage: r, totalPages: c?.pagination?.pages || 1, totalItems: c?.pagination?.total || 0, itemsPerPage: s, onPageChange: a, onItemsPerPageChange: n }) })] })] })] })
}, Woe = ({ isOpen: e, onLogin: r, title: a = "Session Expired", message: s = "Your session has expired for security reasons. Please login again to continue using the application." }) => (Je.useEffect(() => { if (e) { const n = setTimeout(() => { const i = document.querySelector('[data-testid="login-again-button"]'); i && i.focus() }, 100); return () => clearTimeout(n) } }, [e]), e ? t.jsx("div", { className: "fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 p-6", children: [t.jsx("div", { className: "flex items-center justify-center mb-4", children: t.jsx("div", { className: "bg-red-100 dark:bg-red-900/20 rounded-full p-3", children: t.jsx(Ol, { className: "h-8 w-8 text-red-600" }) }) }), t.jsxs("div", { className: "text-center mb-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-2", children: a }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: s })] }), t.jsx("div", { className: "flex justify-center", children: t.jsxs("button", { "data-testid": "login-again-button", onClick: r, className: "flex items-center px-6 py-3 bg-[#ef444e] text-white rounded-lg hover:bg-[#f26971] transition-colors focus:outline-none focus:ring-2 focus:ring-[#ef444e] focus:ring-offset-2", children: [t.jsx(cD, { className: "h-4 w-4 mr-2" }), "Login Again"] }) })] }) }) : null); class Voe extends h.Component { constructor(r) { super(r), this.state = { hasError: !1 } } static getDerivedStateFromError(r) { return { hasError: !0, error: r } } componentDidCatch(r, a) { console.error("Error caught by boundary:", r, a) } render() { return this.state.hasError ? t.jsx("div", { className: "min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900", children: t.jsx("div", { className: "max-w-md w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6", children: t.jsxs("div", { className: "text-center", children: [t.jsx("div", { className: "mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 mb-4", children: t.jsx("svg", { className: "h-6 w-6 text-red-600", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", children: t.jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" }) }) }), t.jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white mb-2", children: "Something went wrong" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mb-4", children: "We're sorry, but something unexpected happened. Please try refreshing the page." }), t.jsx("button", { onClick: () => window.location.reload(), className: "inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500", children: "Refresh Page" })] }) }) }) : this.props.children } } const Goe = () => { const [e] = vm(), r = (e.get("q") || "").trim(), [a, s] = h.useState(!1), [n, i] = h.useState([]), [o, c] = h.useState([]); return h.useEffect(() => { let u = !0; return (async () => { s(!0); try { const g = r ? Yt.getLeads({ page: 1, limit: 10, search: r }) : Promise.resolve({ data: { leads: [] } }), f = r ? ua.getDeals(1, 10, r) : Promise.resolve({ data: { deals: [] } }), [y, p] = await Promise.all([g.catch(() => ({ data: { leads: [] } })), f.catch(() => ({ data: { deals: [] } }))]); if (!u) return; i(y?.data?.leads ?? y?.data?.items ?? []), c(p?.data?.deals ?? []) } finally { u && s(!1) } })(), () => { u = !1 } }, [r]), t.jsxs("div", { className: "p-6 space-y-6", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx(Xr, { className: "w-5 h-5 text-gray-500" }), t.jsx("h1", { className: "text-2xl font-semibold text-gray-900 dark:text-white", children: "Search results" }), r && t.jsxs("span", { className: "text-gray-500", children: ['for "', r, '"'] })] }), a && t.jsx("div", { className: "text-gray-500", children: "Searching..." }), !a && !r && t.jsx("div", { className: "text-gray-500", children: "Type a search above and press Enter." }), !a && r && t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [t.jsxs("div", { className: "bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 overflow-hidden", children: [t.jsxs("div", { className: "px-4 py-3 border-b border-gray-200 dark:border-slate-800 flex items-center gap-2", children: [t.jsx(wt, { className: "w-4 h-4 text-gray-500" }), t.jsx("h2", { className: "text-sm font-semibold text-gray-800 dark:text-gray-200", children: "Leads" }), t.jsx("span", { className: "ml-auto text-xs text-gray-500", children: n.length })] }), t.jsxs("ul", { className: "divide-y divide-gray-100 dark:divide-slate-800", children: [n.map(u => t.jsx("li", { children: t.jsxs(si, { to: `/leads/${u.id}`, className: "block px-4 py-3 hover:bg-gray-50 dark:hover:bg-slate-800", children: [t.jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: [u.firstName, u.lastName].filter(Boolean).join(" ") || u.email || `Lead #${u.id}` }), t.jsx("div", { className: "text-xs text-gray-500", children: u.email || u.phone || "" })] }) }, u.id)), n.length === 0 && t.jsx("li", { className: "px-4 py-6 text-sm text-gray-500", children: "No leads found" })] })] }), t.jsxs("div", { className: "bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 overflow-hidden", children: [t.jsxs("div", { className: "px-4 py-3 border-b border-gray-200 dark:border-slate-800 flex items-center gap-2", children: [t.jsx(Qr, { className: "w-4 h-4 text-gray-500" }), t.jsx("h2", { className: "text-sm font-semibold text-gray-800 dark:text-gray-200", children: "Deals" }), t.jsx("span", { className: "ml-auto text-xs text-gray-500", children: o.length })] }), t.jsxs("ul", { className: "divide-y divide-gray-100 dark:divide-slate-800", children: [o.map(u => t.jsx("li", { children: t.jsxs(si, { to: `/deals/${u.id}`, className: "block px-4 py-3 hover:bg-gray-50 dark:hover:bg-slate-800", children: [t.jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: u.title || `Deal #${u.id}` }), t.jsx("div", { className: "text-xs text-gray-500", children: u.value != null && u.currency ? `${u.value} ${u.currency}` : u.status })] }) }, u.id)), o.length === 0 && t.jsx("li", { className: "px-4 py-6 text-sm text-gray-500", children: "No deals found" })] })] })] })] }) }, BP = () => { const e = xt(), r = Hn(), { user: a } = mr(), [s, n] = h.useState([]), [i, o] = h.useState(!1), [c, u] = h.useState(!1), [m, g] = h.useState([]), [f, y] = h.useState({ title: "", description: "", dueDate: "", priority: "MEDIUM", assignedTo: "" }), [p, b] = h.useState(""), [j, v] = h.useState("ALL"), [S, k] = h.useState("ALL"), [E, C] = h.useState("list"), [N, A] = h.useState(["title", "status", "priority", "dueDate", "assignedTo", "lead", "createdBy"]), [D, I] = h.useState(1), [$, B] = h.useState(10), [W, M] = h.useState(null); h.useEffect(() => { try { const H = localStorage.getItem("tasks_visible_columns"); if (H) { const U = JSON.parse(H); Array.isArray(U) && U.every(K => typeof K == "string") && A(U) } } catch { } }, []), h.useEffect(() => { try { localStorage.setItem("tasks_visible_columns", JSON.stringify(N)) } catch { } }, [N]); const q = async () => { try { o(!0); const H = j !== "ALL" ? j : "PENDING,IN_PROGRESS,COMPLETED", U = await gs.list({ status: H, search: p || void 0, limit: 100 }), Z = (U?.data?.tasks || U?.data?.items || U?.tasks || []).map(J => ({ ...J, id: String(J.id), assignedToUser: J.assignedUser, createdByUser: J.createdByUser, lead: J.lead })); n(Z) } catch { R.error("Failed to load tasks") } finally { o(!1) } }; h.useEffect(() => { (async () => { try { const H = await ur.getUsers({ page: 1, limit: 100 }), U = H?.data?.users || H?.data || H?.users || []; g(U.map(K => ({ id: K.id, firstName: K.firstName, lastName: K.lastName }))) } catch { } })() }, []), h.useEffect(() => { q() }, [j, p]), h.useEffect(() => { const H = new URLSearchParams(r.search), U = H.get("dueDate") || H.get("date"); U && (u(!0), y(K => ({ ...K, dueDate: U })), e(r.pathname, { replace: !0 })) }, [r.pathname, r.search, e]); const V = async () => { if (!f.title.trim()) { R.error("Title is required"); return } if (!a?.id) { R.error("User information not available"); return } try { let H; f.dueDate && (H = new Date(f.dueDate).toISOString()); const U = { title: f.title, description: f.description || void 0, status: "PENDING", priority: f.priority, dueDate: H, assignedTo: f.assignedTo === "" ? void 0 : f.assignedTo, createdBy: a.id }; await gs.create(U), R.success("Task created successfully"), u(!1), y({ title: "", description: "", dueDate: "", priority: "MEDIUM", assignedTo: "" }), q() } catch (H) { R.error(H?.response?.data?.message || "Failed to create task") } }, X = async H => { try { H.status === "COMPLETED" ? (await gs.update(Number(H.id), { status: "PENDING" }), R.success("Task reopened")) : (await gs.complete(Number(H.id)), R.success("Task completed")), q() } catch { R.error("Failed to update task") } }, se = async H => { if (window.confirm("Are you sure you want to delete this task?")) try { await gs.remove(Number(H.id)), R.success("Task deleted successfully"), q() } catch { R.error("Failed to delete task") } }, le = H => { e(`/tasks/${H.id}`) }, ee = H => { e(`/tasks/${H.id}`) }, L = s.filter(H => { const U = p === "" || H.title?.toLowerCase().includes(p.toLowerCase()) || H.description?.toLowerCase().includes(p.toLowerCase()), K = j === "ALL" || H.status === j, Z = S === "ALL" || H.priority === S; return U && K && Z }), z = H => { const U = { PENDING: "bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300", IN_PROGRESS: "bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300", COMPLETED: "bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300", CANCELLED: "bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300" }; return U[H] || U.PENDING }, T = H => { const U = { URGENT: "bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300", HIGH: "bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300", MEDIUM: "bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300", LOW: "bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300" }; return U[H] || U.MEDIUM }, _ = () => L.map(U => [U.title || "", U.status || "", U.priority || "", U.dueDate ? new Date(U.dueDate).toLocaleDateString() : "", U.assignedToUser ? `${U.assignedToUser.firstName} ${U.assignedToUser.lastName}` : "", U.lead ? `${U.lead.firstName} ${U.lead.lastName}` : "", U.createdByUser ? `${U.createdByUser.firstName} ${U.createdByUser.lastName}` : ""]); return t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsxs("div", { className: "space-y-4", children: [t.jsx(Td, { title: "Task Management", subtitle: "Manage and track all your tasks", addLabel: "New Task", onAdd: () => u(H => !H), bulkActions: [{ label: "Export Tasks (Excel)", icon: t.jsx(Bo, { className: "w-4 h-4" }), onClick: () => { const H = ["Title", "Status", "Priority", "Due Date", "Assigned To", "Lead", "Created By"], U = _(); Dd("tasks_export.csv", H, U) } }, { label: "Export Tasks (PDF)", icon: t.jsx(Mt, { className: "w-4 h-4" }), onClick: () => { const H = ["Title", "Status", "Priority", "Due Date", "Assigned To", "Lead", "Created By"], U = _(); vx("Tasks", H, U) } }] }), t.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-end gap-4", children: [t.jsxs("div", { className: "flex-1", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Search" }), t.jsxs("div", { className: "relative", children: [t.jsx(Xr, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400", size: 18 }), t.jsx("input", { type: "text", placeholder: "Search tasks...", value: p, onChange: H => b(H.target.value), className: "w-full pl-10 pr-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-weconnect-red dark:text-white text-sm" })] })] }), t.jsx("div", { className: "w-full sm:w-48 sm:min-w-[200px]", children: t.jsx(ra, { label: "Status", value: j, onChange: H => v(H), options: [{ value: "ALL", label: "All Status" }, { value: "PENDING", label: "Pending" }, { value: "IN_PROGRESS", label: "In Progress" }, { value: "COMPLETED", label: "Completed" }, { value: "CANCELLED", label: "Cancelled" }] }) }), t.jsx("div", { className: "w-full sm:w-48 sm:min-w-[200px]", children: t.jsx(ra, { label: "Priority", value: S, onChange: H => k(H), options: [{ value: "ALL", label: "All Priority" }, { value: "URGENT", label: "Urgent" }, { value: "HIGH", label: "High" }, { value: "MEDIUM", label: "Medium" }, { value: "LOW", label: "Low" }] }) }), t.jsxs("div", { className: "hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto", children: [t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${E === "list" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => C("list"), title: "List view", children: t.jsx(fi, { className: "w-4 h-4" }) }), t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${E === "card" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => C("card"), title: "Card view", children: t.jsx(hi, { className: "w-4 h-4" }) })] })] })] }), c && t.jsxs(Ae, { className: "p-4", children: [t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Title" }), t.jsx($c, { value: f.title, onChange: H => y({ ...f, title: H.target.value }) })] }), t.jsxs("div", { children: [t.jsx("label", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Due Date" }), t.jsx("input", { type: "date", value: f.dueDate, onChange: H => y({ ...f, dueDate: H.target.value }), className: "w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700" })] }), t.jsxs("div", { className: "md:col-span-2", children: [t.jsx("label", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Description" }), t.jsx("textarea", { value: f.description, onChange: H => y({ ...f, description: H.target.value }), className: "w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700", rows: 3 })] }), t.jsxs("div", { children: [t.jsx("label", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Priority" }), t.jsxs("select", { value: f.priority, onChange: H => y({ ...f, priority: H.target.value }), className: "w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700", children: [t.jsx("option", { value: "URGENT", children: "Urgent" }), t.jsx("option", { value: "HIGH", children: "High" }), t.jsx("option", { value: "MEDIUM", children: "Medium" }), t.jsx("option", { value: "LOW", children: "Low" })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Assign To" }), t.jsxs("select", { value: f.assignedTo ?? "", onChange: H => y({ ...f, assignedTo: H.target.value ? Number(H.target.value) : "" }), className: "w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700", children: [t.jsx("option", { value: "", children: "Unassigned" }), m.map(H => t.jsxs("option", { value: H.id, children: [H.firstName, " ", H.lastName] }, H.id))] })] })] }), t.jsxs("div", { className: "flex justify-end gap-2 mt-4", children: [t.jsx(ue, { variant: "OUTLINE", onClick: () => u(!1), children: "Cancel" }), t.jsx(ue, { onClick: V, children: "Create Task" })] })] }), E === "card" ? t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 p-6", children: i ? t.jsxs("div", { className: "text-center py-12", children: [t.jsx("div", { className: "animate-spin h-8 w-8 border-2 border-weconnect-red border-t-transparent rounded-full mx-auto mb-4" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "Loading tasks..." })] }) : L.length === 0 ? t.jsxs("div", { className: "text-center py-12", children: [t.jsx(Nb, { className: "h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-2", children: "No tasks found" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: p || j !== "ALL" || S !== "ALL" ? "Try adjusting your filters" : "Create your first task to get started" })] }) : t.jsx("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4", children: L.map(H => t.jsxs("div", { className: "rounded-lg border shadow-sm hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 cursor-pointer", onClick: () => e(`/tasks/${H.id}`), children: [t.jsxs("div", { className: "p-4 border-b border-gray-100 dark:border-gray-700", children: [t.jsxs("div", { className: "flex items-center justify-between mb-3", children: [t.jsx("button", { onClick: U => { U.stopPropagation(), X(H) }, className: "flex-shrink-0", title: H.status === "COMPLETED" ? "Reopen task" : "Complete task", children: H.status === "COMPLETED" ? t.jsx(ut, { className: "text-green-600 dark:text-green-400", size: 20 }) : t.jsx(Kt, { className: "text-gray-400 dark:text-gray-500", size: 20 }) }), t.jsxs("div", { className: "flex gap-1", children: [t.jsx("span", { className: `inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${z(H.status)}`, children: H.status.replace("_", " ") }), t.jsx("span", { className: `inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${T(H.priority)}`, children: H.priority })] })] }), t.jsx("h3", { className: `text-sm font-bold text-gray-900 dark:text-white ${H.status === "COMPLETED" ? "line-through" : ""}`, children: H.title })] }), t.jsxs("div", { className: "p-4 space-y-2", children: [H.description && t.jsx("p", { className: "text-xs text-gray-600 dark:text-gray-400 line-clamp-2", children: H.description }), H.dueDate && t.jsxs("div", { className: "text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1", children: [t.jsx(rh, { size: 12 }), "Due: ", new Date(H.dueDate).toLocaleDateString()] }), H.assignedToUser && t.jsxs("div", { className: "text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1", children: [t.jsx(wt, { size: 12 }), H.assignedToUser.firstName, " ", H.assignedToUser.lastName] }), H.lead && t.jsxs("div", { className: "text-xs text-gray-500 dark:text-gray-400", children: ["Lead: ", H.lead.firstName, " ", H.lead.lastName] }), t.jsxs("div", { className: "flex items-center justify-end gap-1 pt-2 border-t border-gray-100 dark:border-gray-700 mt-2", children: [t.jsx("button", { onClick: U => { U.stopPropagation(), ee(H) }, className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors", title: "View Task", children: t.jsx(Ht, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: U => { U.stopPropagation(), le(H) }, className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors", title: "Edit Task", children: t.jsx(Jt, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: U => { U.stopPropagation(), se(H) }, className: "p-1.5 text-red-600 hover:text-red-900 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors", title: "Delete task", children: t.jsx(yt, { className: "h-4 w-4" }) })] })] })] }, H.id)) }) }) : t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700", children: [t.jsx(io, { currentPage: D, itemsPerPage: $, totalItems: L.length, onItemsPerPageChange: H => { B(H), I(1) }, columnConfig: { columns: [{ id: "title", label: "Title" }, { id: "status", label: "Status" }, { id: "priority", label: "Priority" }, { id: "dueDate", label: "Due Date" }, { id: "assignedTo", label: "Assigned To" }, { id: "lead", label: "Lead" }, { id: "createdBy", label: "Created By" }], visibleColumns: N, onChange: A, minVisible: 1 } }), t.jsx("div", { className: "p-6", children: i ? t.jsxs("div", { className: "text-center py-12", children: [t.jsx("div", { className: "animate-spin h-8 w-8 border-2 border-weconnect-red border-t-transparent rounded-full mx-auto mb-4" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "Loading tasks..." })] }) : L.length === 0 ? t.jsxs("div", { className: "text-center py-12", children: [t.jsx(Nb, { className: "h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-2", children: "No tasks found" }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: p || j !== "ALL" || S !== "ALL" ? "Try adjusting your filters" : "Create your first task to get started" })] }) : t.jsx("div", { className: "space-y-3", children: L.map(H => t.jsxs("div", { className: "flex items-start justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer", onClick: () => e(`/tasks/${H.id}`), children: [t.jsxs("div", { className: "flex items-start gap-4 flex-1", children: [t.jsx("button", { onClick: U => { U.stopPropagation(), X(H) }, className: "mt-1 flex-shrink-0", title: H.status === "COMPLETED" ? "Reopen task" : "Complete task", children: H.status === "COMPLETED" ? t.jsx(ut, { className: "text-green-600 dark:text-green-400", size: 20 }) : t.jsx(Kt, { className: "text-gray-400 dark:text-gray-500", size: 20 }) }), t.jsxs("div", { className: "flex-1 min-w-0", children: [t.jsxs("div", { className: "flex items-center gap-3 mb-2", children: [t.jsx("h3", { className: `text-base font-semibold ${H.status === "COMPLETED" ? "line-through text-gray-500 dark:text-gray-400" : "text-gray-900 dark:text-white"}`, children: H.title }), t.jsx("span", { className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${z(H.status)}`, children: H.status.replace("_", " ") }), t.jsx("span", { className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${T(H.priority)}`, children: H.priority })] }), H.description && t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mb-2", children: H.description }), t.jsxs("div", { className: "flex flex-wrap items-center gap-4 text-xs text-gray-500 dark:text-gray-400", children: [H.dueDate && t.jsxs("span", { className: "flex items-center gap-1", children: [t.jsx(rh, { size: 14 }), "Due: ", new Date(H.dueDate).toLocaleDateString()] }), H.assignedToUser && t.jsxs("span", { className: "flex items-center gap-1", children: [t.jsx(wt, { size: 14 }), H.assignedToUser.firstName, " ", H.assignedToUser.lastName] }), H.lead && t.jsxs("span", { className: "flex items-center gap-1", children: ["Lead: ", H.lead.firstName, " ", H.lead.lastName] }), H.createdByUser && t.jsxs("span", { className: "flex items-center gap-1", children: ["Created by: ", H.createdByUser.firstName, " ", H.createdByUser.lastName] })] })] })] }), t.jsxs("div", { className: "flex items-center gap-1 ml-4", children: [t.jsx("button", { onClick: U => { U.stopPropagation(), ee(H) }, className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors", title: "View Task", children: t.jsx(Ht, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: U => { U.stopPropagation(), le(H) }, className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors", title: "Edit Task", children: t.jsx(Jt, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: U => { U.stopPropagation(), se(H) }, className: "p-1.5 text-red-600 hover:text-red-900 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors", title: "Delete task", children: t.jsx(yt, { className: "h-4 w-4" }) })] })] }, H.id)) }) })] })] }) }, Koe = () => { const { id: e } = gi(), r = xt(), { user: a } = mr(), [s, n] = h.useState(null), [i, o] = h.useState(!0), [c, u] = h.useState(null), [m, g] = h.useState(!1); h.useEffect(() => { e && f() }, [e]); const f = async () => { try { o(!0), u(null); const j = await gs.get(Number(e)), v = j?.data?.task || j?.task; v ? n(v) : u("Task not found") } catch (j) { console.error("Error fetching task:", j), u(j?.response?.data?.message || "Failed to load task"), R.error(j?.response?.data?.message || "Failed to load task") } finally { o(!1) } }, y = async () => { if (s) try { g(!0), s.status === "COMPLETED" ? (await gs.update(s.id, { status: "PENDING" }), R.success("Task reopened")) : (await gs.complete(s.id), R.success("Task completed")), f() } catch (j) { R.error(j?.response?.data?.message || "Failed to update task") } finally { g(!1) } }, p = j => { const v = { PENDING: "bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300", IN_PROGRESS: "bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300", COMPLETED: "bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300", CANCELLED: "bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300" }; return v[j] || v.PENDING }, b = j => { const v = { URGENT: "bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300", HIGH: "bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300", MEDIUM: "bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300", LOW: "bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300" }; return v[j] || v.MEDIUM }; return i ? t.jsx("div", { className: "min-h-screen bg-gray-50 dark:bg-gray-900", children: t.jsx("div", { className: "mx-auto px-6 py-6", children: t.jsx("div", { className: "flex items-center justify-center h-96", children: t.jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-weconnect-red" }) }) }) }) : c || !s ? t.jsx("div", { className: "min-h-screen bg-gray-50 dark:bg-gray-900", children: t.jsx("div", { className: "mx-auto px-6 py-6", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl p-12 text-center shadow-sm", children: [t.jsx(dr, { className: "h-20 w-20 text-weconnect-red mx-auto mb-6" }), t.jsx("h2", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-4", children: c || "Task not found" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-8 text-lg", children: "The task you're looking for doesn't exist or you don't have permission to view it." }), t.jsx(ue, { variant: "PRIMARY", onClick: () => r("/task-management"), className: "px-8 py-3", children: "Back to Tasks" })] }) }) }) : t.jsxs("div", { className: "min-h-screen bg-gray-50 dark:bg-gray-900", children: [t.jsx("div", { className: "bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700", children: t.jsx("div", { className: "mx-auto px-6", children: t.jsxs("div", { className: "py-6", children: [t.jsxs("div", { className: "flex items-center justify-between mb-6", children: [t.jsx(qa, { to: "/task-management" }), t.jsx("div", { className: "flex items-center space-x-3", children: t.jsx(ue, { variant: s.status === "COMPLETED" ? "SECONDARY" : "PRIMARY", onClick: y, disabled: m, className: "flex items-center gap-2", children: s.status === "COMPLETED" ? t.jsxs(t.Fragment, { children: [t.jsx(Kt, { className: "h-4 w-4" }), "Reopen Task"] }) : t.jsxs(t.Fragment, { children: [t.jsx(ut, { className: "h-4 w-4" }), "Complete Task"] }) }) })] }), t.jsxs("div", { className: "flex items-start space-x-6", children: [t.jsx("div", { className: "flex-shrink-0", children: t.jsx("div", { className: `h-20 w-20 rounded-2xl flex items-center justify-center shadow-lg ${s.status === "COMPLETED" ? "bg-green-500" : s.status === "IN_PROGRESS" ? "bg-blue-500" : "bg-yellow-500"}`, children: s.status === "COMPLETED" ? t.jsx(ut, { className: "h-10 w-10 text-white" }) : t.jsx(Kt, { className: "h-10 w-10 text-white" }) }) }), t.jsxs("div", { className: "flex-1", children: [t.jsx("h1", { className: "text-3xl font-bold text-gray-900 dark:text-white mb-3", children: s.title }), t.jsxs("div", { className: "flex flex-wrap items-center gap-3 mb-4", children: [t.jsx("span", { className: `inline-flex items-center px-4 py-2 rounded-xl text-sm font-medium ${p(s.status)}`, children: s.status.replace("_", " ") }), t.jsxs("span", { className: `inline-flex items-center px-4 py-2 rounded-xl text-sm font-medium ${b(s.priority)}`, children: [t.jsx(sh, { className: "h-4 w-4 mr-2" }), s.priority, " Priority"] })] }), s.description && t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: s.description })] })] })] }) }) }), t.jsx("div", { className: "mx-auto px-6", children: t.jsx("div", { className: "py-6 space-y-6", children: t.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [t.jsxs("div", { className: "lg:col-span-2 space-y-6", children: [t.jsxs(Ae, { className: "p-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-6", children: "Task Information" }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Status" }), t.jsx("p", { className: "text-sm text-gray-900 dark:text-white", children: t.jsx("span", { className: `inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${p(s.status)}`, children: s.status.replace("_", " ") }) })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Priority" }), t.jsx("p", { className: "text-sm text-gray-900 dark:text-white", children: t.jsx("span", { className: `inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${b(s.priority)}`, children: s.priority }) })] }), s.dueDate && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Due Date" }), t.jsxs("p", { className: "text-sm text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(rh, { className: "h-4 w-4" }), new Date(s.dueDate).toLocaleDateString("en-US", { weekday: "long", year: "numeric", month: "long", day: "numeric" })] })] }), s.completedAt && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Completed At" }), t.jsxs("p", { className: "text-sm text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(ut, { className: "h-4 w-4 text-green-600" }), new Date(s.completedAt).toLocaleDateString("en-US", { weekday: "long", year: "numeric", month: "long", day: "numeric", hour: "2-digit", minute: "2-digit" })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Created At" }), t.jsx("p", { className: "text-sm text-gray-900 dark:text-white", children: new Date(s.createdAt).toLocaleDateString("en-US", { year: "numeric", month: "long", day: "numeric", hour: "2-digit", minute: "2-digit" }) })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Last Updated" }), t.jsx("p", { className: "text-sm text-gray-900 dark:text-white", children: new Date(s.updatedAt).toLocaleDateString("en-US", { year: "numeric", month: "long", day: "numeric", hour: "2-digit", minute: "2-digit" }) })] })] })] }), s.lead && t.jsxs(Ae, { className: "p-6", children: [t.jsxs("div", { className: "flex items-center justify-between mb-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Related Lead" }), t.jsx(ue, { variant: "SECONDARY", size: "SM", onClick: () => r(`/leads/${s.lead?.id}`), children: "View Lead" })] }), t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Name" }), t.jsxs("p", { className: "text-sm text-gray-900 dark:text-white", children: [s.lead.firstName, " ", s.lead.lastName] })] }), s.lead.email && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Email" }), t.jsxs("p", { className: "text-sm text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(ir, { className: "h-4 w-4" }), s.lead.email] })] }), s.lead.phone && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Phone" }), t.jsxs("p", { className: "text-sm text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(ma, { className: "h-4 w-4" }), s.lead.phone] })] }), s.lead.company && t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1", children: "Company" }), t.jsxs("p", { className: "text-sm text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(qi, { className: "h-4 w-4" }), s.lead.company] })] })] })] })] }), t.jsxs("div", { className: "space-y-6", children: [s.assignedUser && t.jsxs(Ae, { className: "p-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "Assigned To" }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "h-12 w-12 rounded-full bg-weconnect-red flex items-center justify-center", children: t.jsxs("span", { className: "text-white font-bold", children: [s.assignedUser.firstName[0], s.assignedUser.lastName[0]] }) }), t.jsxs("div", { children: [t.jsxs("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: [s.assignedUser.firstName, " ", s.assignedUser.lastName] }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Assigned User" })] })] })] }), s.createdByUser && t.jsxs(Ae, { className: "p-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "Created By" }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "h-12 w-12 rounded-full bg-blue-500 flex items-center justify-center", children: t.jsxs("span", { className: "text-white font-bold", children: [s.createdByUser.firstName[0], s.createdByUser.lastName[0]] }) }), t.jsxs("div", { children: [t.jsxs("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: [s.createdByUser.firstName, " ", s.createdByUser.lastName] }), t.jsx("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Creator" })] })] })] }), t.jsxs(Ae, { className: "p-6", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "Quick Actions" }), t.jsxs("div", { className: "space-y-3", children: [t.jsx(ue, { variant: s.status === "COMPLETED" ? "SECONDARY" : "PRIMARY", fullWidth: !0, onClick: y, disabled: m, children: s.status === "COMPLETED" ? "Reopen Task" : "Complete Task" }), s.lead && t.jsx(ue, { variant: "SECONDARY", fullWidth: !0, onClick: () => r(`/leads/${s.lead?.id}`), children: "View Lead Profile" })] })] })] })] }) }) })] }) }, gn = { list: async e => { const r = new URLSearchParams; e.page && r.append("page", String(e.page)), e.limit && r.append("limit", String(e.limit)), e.status && r.append("status", e.status), e.search && r.append("search", e.search), e.submittedBy && r.append("submittedBy", String(e.submittedBy)), e.startDate && r.append("startDate", e.startDate), e.endDate && r.append("endDate", e.endDate), e.type && r.append("type", e.type), e.projectId && r.append("projectId", String(e.projectId)), e.dealId && r.append("dealId", String(e.dealId)), e.leadId && r.append("leadId", String(e.leadId)), e.currency && r.append("currency", e.currency); const a = `/expenses?${r.toString()}`; return (await ie.get(a)).data }, get: async e => (await ie.get(`/expenses/${e}`)).data, create: async e => (await ie.post("/expenses", e)).data, update: async (e, r) => (await ie.put(`/expenses/${e}`, r)).data, approve: async (e, r) => (await ie.put(`/expenses/${e}/approve`, r)).data, remove: async e => (await ie.delete(`/expenses/${e}`)).data, getStats: async e => { const r = new URLSearchParams; e && r.append("userId", String(e)); const a = `/expenses/stats${r.toString() ? `?${r.toString()}` : ""}`; return (await ie.get(a)).data }, uploadReceipt: async (e, r, a) => { const s = new FormData; return s.append("file", r), s.append("entityType", "expense"), s.append("entityId", String(e)), a && s.append("name", a), (await ie.post("/files/upload", s, { headers: { "Content-Type": "multipart/form-data" } })).data } }, Yoe = () => { const [e, r] = h.useState([]), [a, s] = h.useState(!0), [n, i] = h.useState(null), [o, c] = h.useState("list"), [u, m] = h.useState([]), [g, f] = h.useState(null), [y, p] = h.useState(!1), [b, j] = h.useState({}), [v, S] = h.useState(!1), [k, E] = h.useState({ expenseDate: new Date().toISOString().split("T")[0], amount: 0, type: "TRAVEL", description: "", remarks: "", receiptUrl: "", submittedBy: 0, currency: "USD" }), [C, N] = h.useState(null), { user: A, hasPermission: D, hasRole: I } = mr(), { formatCurrency: $, currencySettings: B } = Br(), { searchValue: W, debouncedSearchValue: M, setSearch: q, isSearching: V } = ql("", 500), [X, se] = h.useState("createdAt"), [le, ee] = h.useState("desc"), [L, z] = h.useState("ALL"), [T, _] = h.useState("ALL"), [H, U] = h.useState("ALL"), [K, Z] = h.useState(1), [J, te] = h.useState(10), [G, de] = h.useState(["type", "amount", "expenseDate", "submittedBy", "status", "createdAt"]), Te = ["TRAVEL", "MEALS", "ACCOMMODATION", "OFFICE_SUPPLIES", "UTILITIES", "MARKETING", "ENTERTAINMENT", "TRAINING", "EQUIPMENT", "SOFTWARE", "CONSULTING", "MISCELLANEOUS", "OTHER"]; h.useEffect(() => { pe() }, []), h.useEffect(() => { try { const Y = localStorage.getItem("expenses_visible_columns"); if (Y) { const je = JSON.parse(Y); Array.isArray(je) && je.every(Ne => typeof Ne == "string") && de(je) } } catch { } }, []), h.useEffect(() => { try { localStorage.setItem("expenses_visible_columns", JSON.stringify(G)) } catch { } }, [G]), h.useEffect(() => { Z(1) }, [M, X, le, L, T, H, J]); const pe = async () => { try { s(!0), i(null); const Y = await gn.list({ page: 1, limit: 100, search: M || void 0, status: L !== "ALL" ? L : void 0, type: T !== "ALL" ? T : void 0, currency: H !== "ALL" ? H : void 0 }); if (Y.success) { const je = Y.data || {}, Ne = Array.isArray(je) ? je : je.items || je.expenses || []; r(Ne) } } catch (Y) { console.error("Error fetching expenses:", Y), i(Y.response?.data?.message || "Failed to fetch expenses"), r([]) } finally { s(!1) } }, ne = [...e.filter(Y => { const je = M.toLowerCase(), Ne = !je || Y.type.toLowerCase().includes(je) || (Y.description?.toLowerCase().includes(je) ?? !1) || (Y.submittedByUser?.firstName.toLowerCase().includes(je) ?? !1) || (Y.submittedByUser?.lastName.toLowerCase().includes(je) ?? !1), fe = L === "ALL" || Y.status === L, ke = T === "ALL" || Y.type === T, he = H === "ALL" || Y.currency === H; return Ne && fe && ke && he })].sort((Y, je) => { const Ne = le === "asc" ? 1 : -1, fe = Ee => { switch (X) { case "expenseDate": return Ee.expenseDate || ""; case "amount": return Ee.amount || 0; case "type": return Ee.type || ""; case "status": return Ee.status || ""; case "submittedBy": return (Ee.submittedByUser ? `${Ee.submittedByUser.firstName} ${Ee.submittedByUser.lastName}` : "").toLowerCase(); case "createdAt": default: return Ee.createdAt || "" } }, ke = fe(Y), he = fe(je); return X === "amount" ? (ke - he) * Ne : X === "createdAt" || X === "expenseDate" ? (new Date(ke).getTime() - new Date(he).getTime()) * Ne : String(ke).localeCompare(String(he)) * Ne }), De = Y => { se(je => je === Y ? (ee(Ne => Ne === "asc" ? "desc" : "asc"), je) : (ee("asc"), Y)) }, $e = ne.length, Et = Math.max(1, Math.ceil($e / J)), Bt = (K - 1) * J, Ft = Bt + J, mt = ne.slice(Bt, Ft), ce = Y => G.includes(Y), Xe = Y => { const je = { PENDING: "bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300", APPROVED: "bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300", REJECTED: "bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300", REIMBURSED: "bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300" }; return je[Y] || je.PENDING }, jt = Y => { switch (Y) { case "APPROVED": return t.jsx(ut, { className: "text-green-600 dark:text-green-400", size: 14 }); case "REJECTED": return t.jsx(Ca, { className: "text-red-600 dark:text-red-400", size: 14 }); case "REIMBURSED": return t.jsx(ut, { className: "text-blue-600 dark:text-blue-400", size: 14 }); default: return t.jsx(Kt, { className: "text-yellow-600 dark:text-yellow-400", size: 14 }) } }, Q = Y => ({ TRAVEL: "", MEALS: "", ACCOMMODATION: "", OFFICE_SUPPLIES: "", UTILITIES: "", MARKETING: "", ENTERTAINMENT: "", TRAINING: "", EQUIPMENT: "", SOFTWARE: "", CONSULTING: "", MISCELLANEOUS: "", OTHER: "" })[Y] || "", Le = async () => { if (!k.expenseDate) { R.error("Expense date is required"); return } if (!k.amount || k.amount <= 0) { R.error("Amount must be greater than 0"); return } if (!A?.id) { R.error("User information not available"); return } try { let Y = k.expenseDate; Y && !Y.includes("T") ? Y = new Date(Y + "T00:00:00").toISOString() : Y && (Y = new Date(Y).toISOString()); const je = { expenseDate: Y, amount: k.amount, type: k.type, description: k.description || void 0, remarks: k.remarks || void 0, submittedBy: A.id, currency: k.currency || "USD" }, Ne = await gn.create(je), fe = Ne?.data?.expense || Ne?.data || Ne?.expense; if (C && fe?.id) try { const ke = await gn.uploadReceipt(fe.id, C, `receipt-${fe.id}`), he = ke?.data?.file || ke?.file, Ee = he?.id ? `/files/${he.id}/download?disposition=inline` : he?.filePath; Ee && await gn.update(fe.id, { receiptUrl: Ee }) } catch (ke) { console.error("Receipt upload failed:", ke), R.warn("Expense created, but receipt upload failed") } R.success("Expense created successfully"), S(!1), N(null), E({ expenseDate: new Date().toISOString().split("T")[0], amount: 0, type: "TRAVEL", description: "", remarks: "", receiptUrl: "", submittedBy: A.id, currency: "USD" }), pe() } catch (Y) { console.error("Error creating expense:", Y); const je = Y?.response?.data?.message || Y?.response?.data?.error || Y?.message || "Failed to create expense"; R.error(je) } }, Ve = Y => { f(Y), p(!1), j({ expenseDate: new Date(Y.expenseDate).toISOString().split("T")[0], amount: Y.amount, type: Y.type, description: Y.description, remarks: Y.remarks, currency: Y.currency, submittedBy: Y.submittedByUser?.id || A?.id || 0, dealId: Y.deal?.id, leadId: Y.lead?.id }) }, et = async () => { if (g) try { await gn.update(g.id, { ...b, expenseDate: b.expenseDate ? new Date(b.expenseDate).toISOString() : void 0 }), R.success("Expense updated"), p(!1), pe() } catch (Y) { R.error(Y?.response?.data?.message || "Failed to update expense") } }, pt = async () => { if (g && confirm("Are you sure you want to delete this expense?")) try { await gn.remove(g.id), R.success("Expense deleted"), f(null), pe() } catch (Y) { R.error(Y?.response?.data?.message || "Failed to delete expense") } }; return a ? t.jsx("div", { className: "flex items-center justify-center h-64", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600" }) }) : t.jsxs("div", { className: "space-y-6 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen", children: [t.jsx("div", { className: "space-y-4", children: t.jsx(Td, { title: "Expenses", subtitle: "Track and manage your expenses", addLabel: "Add Expense", onAdd: D("expense.create") || I("Admin") ? () => S(!0) : void 0, bulkActions: [{ label: "Export Expenses (Excel)", icon: t.jsx(Bo, { className: "w-4 h-4" }), onClick: () => { const je = [{ id: "type", label: "Type", value: ke => ke.type.replace("_", " ") }, { id: "amount", label: "Amount", value: ke => $(ke.amount, ke.currency) }, { id: "expenseDate", label: "Expense Date", value: ke => new Date(ke.expenseDate).toLocaleDateString() }, { id: "submittedBy", label: "Submitted By", value: ke => ke.submittedByUser ? `${ke.submittedByUser.firstName} ${ke.submittedByUser.lastName}` : "" }, { id: "status", label: "Status", value: ke => ke.status }, { id: "createdAt", label: "Created", value: ke => new Date(ke.createdAt).toLocaleDateString() }].filter(ke => G.includes(ke.id)), Ne = je.map(ke => ke.label), fe = ne.map(ke => je.map(he => he.value(ke))); Dd("expenses_export.csv", Ne, fe) } }, { label: "Export Expenses (PDF)", icon: t.jsx(Mt, { className: "w-4 h-4" }), onClick: () => { const je = [{ id: "type", label: "Type", value: ke => ke.type.replace("_", " ") }, { id: "amount", label: "Amount", value: ke => $(ke.amount, ke.currency) }, { id: "expenseDate", label: "Expense Date", value: ke => new Date(ke.expenseDate).toLocaleDateString() }, { id: "submittedBy", label: "Submitted By", value: ke => ke.submittedByUser ? `${ke.submittedByUser.firstName} ${ke.submittedByUser.lastName}` : "" }, { id: "status", label: "Status", value: ke => ke.status }, { id: "createdAt", label: "Created", value: ke => new Date(ke.createdAt).toLocaleDateString() }].filter(ke => G.includes(ke.id)), Ne = je.map(ke => ke.label), fe = ne.map(ke => je.map(he => he.value(ke))); vx("Expenses", Ne, fe) } }] }) }), v && t.jsx("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto", children: [t.jsxs("div", { className: "sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between z-10", children: [t.jsx("h3", { className: "text-xl font-bold text-gray-900 dark:text-white", children: "Create New Expense" }), t.jsx("button", { onClick: () => S(!1), className: "text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200", children: "" })] }), t.jsxs("div", { className: "p-6", children: [t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Expense Date *" }), t.jsx("input", { type: "date", value: k.expenseDate, onChange: Y => E({ ...k, expenseDate: Y.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white", required: !0 })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Amount *" }), t.jsxs("div", { className: "relative", children: [t.jsx("span", { className: "absolute left-3 top-2.5 text-gray-500 font-medium text-xs", children: B?.symbol || "$" }), t.jsx("input", { type: "number", step: "0.01", min: "0", value: k.amount, onChange: Y => E({ ...k, amount: parseFloat(Y.target.value) || 0 }), className: "w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white", required: !0 })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Type *" }), t.jsx("select", { value: k.type, onChange: Y => E({ ...k, type: Y.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white", required: !0, children: Te.map(Y => t.jsxs("option", { value: Y, children: [Q(Y), " ", Y.replace("_", " ")] }, Y)) })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Currency" }), t.jsxs("select", { value: k.currency, onChange: Y => E({ ...k, currency: Y.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white", children: [t.jsx("option", { value: "USD", children: "USD" }), t.jsx("option", { value: "EUR", children: "EUR" }), t.jsx("option", { value: "GBP", children: "GBP" }), t.jsx("option", { value: "INR", children: "INR" })] })] }), t.jsxs("div", { className: "md:col-span-2", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Upload Receipt" }), t.jsx("input", { type: "file", accept: "image/*,application/pdf", onChange: Y => N(Y.target.files?.[0] || null), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white" })] }), t.jsxs("div", { className: "md:col-span-2", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Description" }), t.jsx("textarea", { value: k.description, onChange: Y => E({ ...k, description: Y.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white", rows: 3 })] }), t.jsxs("div", { className: "md:col-span-2", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: "Remarks" }), t.jsx("textarea", { value: k.remarks, onChange: Y => E({ ...k, remarks: Y.target.value }), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white", rows: 2 })] })] }), t.jsxs("div", { className: "flex justify-end gap-3 mt-6", children: [t.jsx(ue, { variant: "OUTLINE", onClick: () => S(!1), children: "Cancel" }), t.jsx(ue, { onClick: Le, children: "Create Expense" })] })] })] }) }), t.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-end gap-4", children: [t.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-end gap-4 flex-1", children: [t.jsxs("div", { className: "", children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1", children: t.jsxs("div", { className: "flex items-center gap-2", children: ["Search", V && t.jsx("span", { className: "text-xs text-blue-500 flex items-center gap-1", children: "Searching..." })] }) }), t.jsx(Zl, { value: W, onChange: q, placeholder: "Search expenses...", className: "max-w-full" })] }), t.jsx("div", { className: "w-full sm:w-48 sm:min-w-[220px]", children: t.jsx(ra, { label: "Status", value: L, onChange: Y => z(Y), options: [{ value: "ALL", label: "All statuses" }, { value: "PENDING", label: "Pending" }, { value: "APPROVED", label: "Approved" }, { value: "REJECTED", label: "Rejected" }, { value: "REIMBURSED", label: "Reimbursed" }] }) }), t.jsx("div", { className: "w-full sm:w-48 sm:min-w-[220px]", children: t.jsx(ra, { label: "Type", value: T, onChange: Y => _(Y), options: [{ value: "ALL", label: "All types" }, ...Te.map(Y => ({ value: Y, label: `${Q(Y)} ${Y.replace("_", " ")}` }))] }) }), t.jsx("div", { className: "w-full sm:w-48 sm:min-w-[220px]", children: t.jsx(ra, { label: "Currency", value: H, onChange: Y => U(Y), options: [{ value: "ALL", label: "All currencies" }, { value: "USD", label: "USD" }, { value: "EUR", label: "EUR" }, { value: "GBP", label: "GBP" }, { value: "INR", label: "INR" }] }) }), t.jsx("div", { className: "w-full sm:w-48 sm:min-w-[220px]", children: t.jsx(ra, { label: "Sort by", value: X, onChange: Y => se(Y), options: [{ value: "createdAt", label: "Created date" }, { value: "expenseDate", label: "Expense date" }, { value: "amount", label: "Amount" }, { value: "type", label: "Type" }, { value: "status", label: "Status" }, { value: "submittedBy", label: "Submitted By" }] }) }), t.jsx("div", { className: "w-full sm:w-48 sm:min-w-[200px]", children: t.jsx(ra, { label: "Order", value: le, onChange: Y => ee(Y), options: [{ value: "asc", label: "Ascending" }, { value: "desc", label: "Descending" }] }) }), t.jsx("div", { className: "w-full sm:w-48 sm:min-w-[200px]", children: t.jsx(ra, { label: "Items per page", value: String(J), onChange: Y => te(Number(Y)), options: [{ value: "5", label: "5" }, { value: "10", label: "10" }, { value: "20", label: "20" }, { value: "50", label: "50" }] }) })] }), t.jsxs("div", { className: "hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1 ml-auto", children: [t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${o === "list" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => c("list"), title: "List view", children: t.jsx(fi, { className: "w-4 h-4" }) }), t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${o === "grid" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => c("grid"), title: "Grid view", children: t.jsx(hi, { className: "w-4 h-4" }) })] })] }), n && t.jsx("div", { className: "bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4", children: t.jsx("p", { className: "text-red-600 dark:text-red-400", children: n }) }), o === "grid" ? t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 transition-all duration-300 p-6", children: [mt.length === 0 ? t.jsx(Yr, { title: "No expenses found", description: W ? "No expenses match your search criteria." : "Get started by creating your first expense.", icon: t.jsx(xn, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), showClearButton: !!W, onClear: () => q("") }) : t.jsx("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4", children: mt.map(Y => t.jsxs("div", { className: "rounded-lg border shadow-sm hover:shadow-md transition-all duration-200 flex flex-col bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700", style: { minHeight: "280px" }, children: [t.jsx("div", { className: "px-4 pt-4 pb-2", children: t.jsxs("span", { className: `inline-flex items-center gap-1 px-2.5 py-1 rounded-md text-xs font-medium ${Xe(Y.status)}`, children: [jt(Y.status), Y.status] }) }), t.jsxs("div", { className: "px-4 pb-3 flex-1", children: [t.jsxs("h3", { className: "text-sm font-semibold text-gray-900 dark:text-white mb-2 cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors", onClick: () => Ve(Y), children: [Q(Y.type), " ", Y.type.replace("_", " ")] }), Y.description && t.jsx("p", { className: "text-xs text-gray-600 dark:text-gray-400 mb-3 line-clamp-2", children: Y.description }), t.jsx("div", { className: "flex items-center text-sm font-semibold text-green-600 dark:text-green-400 mb-3", children: t.jsx("span", { className: "truncate", children: $(Y.amount, Y.currency) }) }), t.jsxs("div", { className: "space-y-1.5", children: [t.jsxs("div", { className: "text-xs text-gray-600 dark:text-gray-400 flex items-center", children: [t.jsx(Zt, { className: "h-3 w-3 mr-1.5 flex-shrink-0" }), t.jsx("span", { className: "truncate", children: new Date(Y.expenseDate).toLocaleDateString() })] }), Y.submittedByUser && t.jsxs("div", { className: "text-xs text-gray-600 dark:text-gray-400 flex items-center", children: [t.jsx(wt, { className: "h-3 w-3 mr-1.5 flex-shrink-0" }), t.jsxs("span", { className: "truncate", children: [Y.submittedByUser.firstName, " ", Y.submittedByUser.lastName] })] }), Y.approvedByUser && t.jsxs("div", { className: "text-xs text-green-600 dark:text-green-400 flex items-center", children: [t.jsx(ut, { className: "h-3 w-3 mr-1.5 flex-shrink-0" }), t.jsxs("span", { className: "truncate", children: ["Approved by ", Y.approvedByUser.firstName] })] })] })] }), t.jsx("div", { className: "px-4 pb-4 pt-3 border-t border-gray-100 dark:border-gray-700", children: t.jsxs("div", { className: "flex items-center justify-between", children: [Y.receiptUrl && t.jsx("button", { onClick: () => window.open(Y.receiptUrl, "_blank"), className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors", title: "View Receipt", children: t.jsx($i, { className: "h-4 w-4" }) }), t.jsxs("div", { className: "flex items-center gap-1 ml-auto", children: [(D("expense.read") || I("Admin")) && t.jsx("button", { onClick: je => { je.stopPropagation(), Ve(Y) }, className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors", title: "View Expense", children: t.jsx(Ht, { className: "h-4 w-4" }) }), (D("expense.approve") || I("Admin")) && Y.status === "PENDING" && t.jsxs(t.Fragment, { children: [t.jsx("button", { onClick: async je => { je.stopPropagation(); const Ne = prompt("Approval remarks"); try { await gn.approve(Y.id, { status: "APPROVED", reviewedBy: A.id, approvalRemarks: Ne || void 0 }), R.success("Expense approved"), pe() } catch (fe) { R.error(fe?.response?.data?.message || "Approval failed") } }, className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors", title: "Approve", children: t.jsx(ut, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: async je => { je.stopPropagation(); const Ne = prompt("Rejection remarks"); try { await gn.approve(Y.id, { status: "REJECTED", reviewedBy: A.id, approvalRemarks: Ne || void 0 }), R.success("Expense rejected"), pe() } catch (fe) { R.error(fe?.response?.data?.message || "Rejection failed") } }, className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors", title: "Reject", children: t.jsx(Ca, { className: "h-4 w-4" }) })] }), (D("expense.update") || I("Admin")) && Y.status === "PENDING" && t.jsx("button", { onClick: je => { je.stopPropagation(), Ve(Y), p(!0) }, className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors", title: "Edit Expense", children: t.jsx(Jt, { className: "h-4 w-4" }) }), (D("expense.delete") || I("Admin")) && t.jsx("button", { onClick: async je => { if (je.stopPropagation(), !!confirm("Delete this expense?")) try { await gn.remove(Y.id), r(Ne => Ne.filter(fe => fe.id !== Y.id)), R.success("Expense deleted") } catch { R.error("Failed to delete") } }, className: "p-1.5 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors", title: "Delete Expense", children: t.jsx(yt, { className: "h-4 w-4" }) })] })] }) })] }, Y.id)) }), $e > 0 && t.jsx("div", { className: "mt-6", children: t.jsx(en, { currentPage: K, totalPages: Et, totalItems: $e, itemsPerPage: J, onPageChange: Y => Z(Y) }) })] }) : t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow border border-gray-100 dark:border-gray-700 transition-all duration-300", children: t.jsxs("div", { className: "p-6", children: [t.jsx("div", { className: "mb-4", children: t.jsx(io, { currentPage: K, itemsPerPage: J, totalItems: $e, onItemsPerPageChange: Y => te(Y), columnConfig: { columns: [{ id: "type", label: "Type" }, { id: "amount", label: "Amount" }, { id: "expenseDate", label: "Date" }, { id: "submittedBy", label: "Submitted By" }, { id: "status", label: "Status" }, { id: "createdAt", label: "Created" }], visibleColumns: G, onChange: de, minVisible: 1 } }) }), t.jsx("div", { className: "overflow-hidden relative", children: t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700 mobile-card-view table-fixed", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-gray-900", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-4 py-3", children: t.jsx("input", { type: "checkbox", checked: mt.length > 0 && mt.every(Y => u.includes(Y.id)), onChange: Y => { const je = mt.map(Ne => Ne.id); m(Y.target.checked ? Array.from(new Set([...u, ...je])) : u.filter(Ne => !je.includes(Ne))) } }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${ce("type") ? "" : "hidden"}`, children: t.jsx(Ua, { label: "Type", column: "type", sortBy: X, sortOrder: le, onChange: Y => De(Y) }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${ce("amount") ? "" : "hidden"}`, children: t.jsx(Ua, { label: "Amount", column: "amount", sortBy: X, sortOrder: le, onChange: Y => De(Y) }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${ce("expenseDate") ? "" : "hidden"}`, children: t.jsx(Ua, { label: "Date", column: "expenseDate", sortBy: X, sortOrder: le, onChange: Y => De(Y) }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${ce("submittedBy") ? "" : "hidden"}`, children: t.jsx(Ua, { label: "Submitted By", column: "submittedBy", sortBy: X, sortOrder: le, onChange: Y => De(Y) }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${ce("status") ? "" : "hidden"}`, children: t.jsx(Ua, { label: "Status", column: "status", sortBy: X, sortOrder: le, onChange: Y => De(Y) }) }), t.jsx("th", { className: `px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${ce("createdAt") ? "" : "hidden"}`, children: t.jsx(Ua, { label: "Created", column: "createdAt", sortBy: X, sortOrder: le, onChange: Y => De(Y) }) }), t.jsx("th", { className: "px-6 py-3 text-end text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Actions" })] }) }), t.jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: mt.map(Y => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors", children: [t.jsx("td", { className: "px-4 py-4", "data-label": "Select", children: t.jsx("input", { type: "checkbox", checked: u.includes(Y.id), onChange: je => { m(Ne => je.target.checked ? [...Ne, Y.id] : Ne.filter(fe => fe !== Y.id)) } }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${ce("type") ? "" : "hidden"}`, "data-label": "Type", children: t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "text-xl", children: Q(Y.type) }), t.jsxs("div", { children: [t.jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: Y.type.replace("_", " ") }), Y.description && t.jsx("div", { className: "text-xs text-gray-500 dark:text-gray-400 truncate max-w-xs", children: Y.description })] })] }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${ce("amount") ? "" : "hidden"}`, "data-label": "Amount", children: t.jsx("div", { className: "flex items-center text-sm font-semibold text-green-600 dark:text-green-400", children: $(Y.amount, Y.currency) }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${ce("expenseDate") ? "" : "hidden"}`, "data-label": "Date", children: t.jsxs("div", { className: "text-sm text-gray-900 dark:text-white flex items-center", children: [t.jsx(Zt, { className: "h-3 w-3 mr-1" }), new Date(Y.expenseDate).toLocaleDateString()] }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${ce("submittedBy") ? "" : "hidden"}`, "data-label": "Submitted By", children: t.jsxs("div", { className: "text-sm text-gray-900 dark:text-white flex items-center", children: [t.jsx(wt, { className: "h-3 w-3 mr-1" }), Y.submittedByUser ? `${Y.submittedByUser.firstName} ${Y.submittedByUser.lastName}` : "-"] }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap ${ce("status") ? "" : "hidden"}`, "data-label": "Status", children: t.jsxs("span", { className: `inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${Xe(Y.status)}`, children: [jt(Y.status), Y.status] }) }), t.jsx("td", { className: `px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 ${ce("createdAt") ? "" : "hidden"}`, "data-label": "Created", children: t.jsxs("div", { className: "flex items-center", children: [t.jsx(Zt, { className: "h-3 w-3 mr-1" }), new Date(Y.createdAt).toLocaleDateString()] }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap text-end text-sm font-medium", "data-label": "Actions", children: t.jsxs("div", { className: "flex items-center justify-end space-x-2", children: [(D("expense.read") || I("Admin")) && t.jsx("button", { onClick: () => Ve(Y), className: "text-green-600 hover:text-green-900 p-1 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors", title: "View Expense", children: t.jsx(Ht, { className: "h-4 w-4" }) }), (D("expense.approve") || I("Admin")) && Y.status === "PENDING" && t.jsxs(t.Fragment, { children: [t.jsx("button", { onClick: async () => { const je = prompt("Approval remarks"); try { await gn.approve(Y.id, { status: "APPROVED", reviewedBy: A.id, approvalRemarks: je || void 0 }), R.success("Expense approved"), pe() } catch (Ne) { R.error(Ne?.response?.data?.message || "Approval failed") } }, className: "text-green-600 hover:text-green-900 p-1 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors", title: "Approve", children: t.jsx(ut, { className: "h-4 w-4" }) }), t.jsx("button", { onClick: async () => { const je = prompt("Rejection remarks"); try { await gn.approve(Y.id, { status: "REJECTED", reviewedBy: A.id, approvalRemarks: je || void 0 }), R.success("Expense rejected"), pe() } catch (Ne) { R.error(Ne?.response?.data?.message || "Rejection failed") } }, className: "text-red-600 hover:text-red-900 p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors", title: "Reject", children: t.jsx(Ca, { className: "h-4 w-4" }) })] }), (D("expense.update") || I("Admin")) && Y.status === "PENDING" && t.jsx("button", { onClick: () => { Ve(Y), p(!0) }, className: "text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors", title: "Edit Expense", children: t.jsx(Jt, { className: "h-4 w-4" }) }), (D("expense.delete") || I("Admin")) && t.jsx("button", { className: "text-red-600 hover:text-red-900 p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors", title: "Delete Expense", onClick: async () => { if (confirm("Delete this expense?")) try { await gn.remove(Y.id), r(je => je.filter(Ne => Ne.id !== Y.id)), R.success("Expense deleted") } catch { R.error("Failed to delete") } }, children: t.jsx(yt, { className: "h-4 w-4" }) })] }) })] }, Y.id)) })] }) }) }), $e > 0 && t.jsx(en, { currentPage: K, totalPages: Et, totalItems: $e, itemsPerPage: J, onPageChange: Y => Z(Y) })] }) }), $e === 0 && !a && t.jsx(Yr, { title: "No expenses found", description: W ? "No expenses match your search criteria." : "Get started by creating your first expense.", icon: t.jsx(xn, { className: "h-12 w-12 text-gray-400 dark:text-gray-500" }), showClearButton: !!W, onClear: () => q("") }), g && t.jsx("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto", children: [t.jsxs("div", { className: "sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between z-10", children: [t.jsxs("h3", { className: "text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx($i, { className: "text-emerald-500", size: 24 }), "Expense #", g.id] }), t.jsxs("div", { className: "flex gap-2", children: [(D("expense.update") || I("Admin")) && g.status === "PENDING" && t.jsxs(ue, { variant: "OUTLINE", size: "SM", onClick: () => p(Y => !Y), children: [t.jsx(Jt, { size: 16, className: "mr-2" }), y ? "Cancel" : "Edit"] }), (D("expense.delete") || I("Admin")) && t.jsxs(ue, { variant: "OUTLINE", size: "SM", onClick: pt, children: [t.jsx(yt, { size: 16, className: "mr-2" }), "Delete"] }), t.jsx(ue, { variant: "OUTLINE", size: "SM", onClick: () => f(null), children: "" })] })] }), t.jsx("div", { className: "p-6", children: y ? t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2", children: "Date" }), t.jsx("input", { type: "date", value: b.expenseDate, onChange: Y => j({ ...b, expenseDate: Y.target.value }), className: "w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2", children: "Amount" }), t.jsxs("div", { className: "relative", children: [t.jsx("span", { className: "absolute left-3 top-3 text-gray-500 font-medium", children: B?.symbol || "$" }), t.jsx("input", { type: "number", step: "0.01", min: "0", value: b.amount ?? 0, onChange: Y => j({ ...b, amount: parseFloat(Y.target.value) || 0 }), className: "w-full pl-8 pr-4 py-3 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white" })] })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2", children: "Type" }), t.jsx("select", { value: b.type, onChange: Y => j({ ...b, type: Y.target.value }), className: "w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white", children: Te.map(Y => t.jsxs("option", { value: Y, children: [Q(Y), " ", Y.replace("_", " ")] }, Y)) })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2", children: "Currency" }), t.jsxs("select", { value: b.currency || "USD", onChange: Y => j({ ...b, currency: Y.target.value }), className: "w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white", children: [t.jsx("option", { value: "USD", children: "USD" }), t.jsx("option", { value: "EUR", children: "EUR" }), t.jsx("option", { value: "GBP", children: "GBP" }), t.jsx("option", { value: "INR", children: "INR" })] })] }), t.jsxs("div", { className: "md:col-span-2", children: [t.jsx("label", { className: "block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2", children: "Description" }), t.jsx("textarea", { value: b.description || "", onChange: Y => j({ ...b, description: Y.target.value }), className: "w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white", rows: 3 })] }), t.jsxs("div", { className: "md:col-span-2", children: [t.jsx("label", { className: "block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2", children: "Remarks" }), t.jsx("textarea", { value: b.remarks || "", onChange: Y => j({ ...b, remarks: Y.target.value }), className: "w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white", rows: 2 })] }), t.jsxs("div", { className: "md:col-span-2 flex justify-end gap-3", children: [t.jsx(ue, { variant: "OUTLINE", onClick: () => p(!1), children: "Cancel" }), t.jsx(ue, { onClick: et, children: "Save Changes" })] })] }) : t.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [t.jsx("div", { className: "md:col-span-2", children: t.jsxs("div", { className: "flex items-center gap-4 mb-6", children: [t.jsx("div", { className: "text-4xl", children: Q(g.type) }), t.jsxs("div", { className: "flex-1", children: [t.jsx("h4", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-2", children: g.type.replace("_", " ") }), t.jsxs("span", { className: `inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold border ${Xe(g.status)}`, children: [jt(g.status), g.status] })] }), t.jsxs("div", { className: "text-right", children: [t.jsx("p", { className: "text-3xl font-bold text-emerald-600 dark:text-emerald-400", children: $(g.amount, g.currency) }), t.jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: g.currency })] })] }) }), t.jsxs("div", { className: "space-y-1", children: [t.jsx("p", { className: "text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide", children: "Expense Date" }), t.jsxs("p", { className: "text-lg text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(Zt, { size: 18, className: "text-emerald-500" }), new Date(g.expenseDate).toLocaleDateString("en-US", { weekday: "long", year: "numeric", month: "long", day: "numeric" })] })] }), t.jsxs("div", { className: "space-y-1", children: [t.jsx("p", { className: "text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide", children: "Created At" }), t.jsx("p", { className: "text-lg text-gray-900 dark:text-white", children: new Date(g.createdAt).toLocaleString() })] }), t.jsxs("div", { className: "space-y-1", children: [t.jsx("p", { className: "text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide", children: "Created By" }), t.jsxs("p", { className: "text-lg text-gray-900 dark:text-white flex items-center gap-2", children: [t.jsx(wt, { size: 18, className: "text-emerald-500" }), g.submittedByUser ? `${g.submittedByUser.firstName} ${g.submittedByUser.lastName}` : g.createdByUser ? `${g.createdByUser.firstName} ${g.createdByUser.lastName}` : "-"] })] }), g.approvedByUser && t.jsxs("div", { className: "space-y-1", children: [t.jsx("p", { className: "text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide", children: "Approved By" }), t.jsxs("p", { className: "text-lg text-green-600 dark:text-green-400 flex items-center gap-2", children: [t.jsx(ut, { size: 18 }), g.approvedByUser.firstName, " ", g.approvedByUser.lastName] })] }), g.approvedAt && t.jsxs("div", { className: "space-y-1", children: [t.jsx("p", { className: "text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide", children: "Approved At" }), t.jsx("p", { className: "text-lg text-gray-900 dark:text-white", children: new Date(g.approvedAt).toLocaleString() })] }), g.rejectedByUser && t.jsxs("div", { className: "space-y-1", children: [t.jsx("p", { className: "text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide", children: "Rejected By" }), t.jsxs("p", { className: "text-lg text-red-600 dark:text-red-400 flex items-center gap-2", children: [t.jsx(Ca, { size: 18 }), g.rejectedByUser.firstName, " ", g.rejectedByUser.lastName] })] }), g.description && t.jsxs("div", { className: "md:col-span-2 space-y-1", children: [t.jsx("p", { className: "text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide", children: "Description" }), t.jsx("p", { className: "text-base text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-900 p-4 rounded-xl", children: g.description })] }), g.remarks && t.jsxs("div", { className: "md:col-span-2 space-y-1", children: [t.jsx("p", { className: "text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide", children: "Remarks" }), t.jsx("p", { className: "text-base text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-900 p-4 rounded-xl", children: g.remarks })] }), g.receiptUrl && t.jsx("div", { className: "md:col-span-2", children: t.jsxs(ue, { variant: "OUTLINE", onClick: () => window.open(g.receiptUrl, "_blank"), children: [t.jsx(ys, { size: 16, className: "mr-2" }), "View Receipt"] }) })] }) })] }) })] }) }, Qoe = ({ workflow: e, onClose: r }) => { const a = i => i.replace(/_/g, " ").toLowerCase(), s = i => i.replace(/_/g, " ").toLowerCase(), n = i => { const o = Object.entries(i.config); return o.length === 0 ? null : t.jsx("div", { className: "mt-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 p-2 rounded", children: o.map(([c, u]) => t.jsxs("div", { className: "flex items-start gap-2", children: [t.jsxs("span", { className: "font-medium capitalize", children: [c, ":"] }), t.jsx("span", { className: "break-all", children: String(u) })] }, c)) }) }; return t.jsx("div", { className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col", children: [t.jsxs("div", { className: "flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700", children: [t.jsxs("div", { children: [t.jsx("h2", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: e.name }), t.jsxs("div", { className: "flex items-center gap-2 mt-2", children: [t.jsx("span", { className: `px-2 py-1 rounded-full text-xs font-medium ${e.isActive ? "bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400" : "bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`, children: e.isActive ? "Active" : "Inactive" }), t.jsxs("span", { className: "text-sm text-gray-500 dark:text-gray-400", children: ["Created ", new Date(e.createdAt).toLocaleDateString()] })] })] }), t.jsx("button", { onClick: r, className: "p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors", children: t.jsx(fa, { className: "h-5 w-5 text-gray-500" }) })] }), t.jsxs("div", { className: "flex-1 overflow-y-auto p-6 space-y-8", children: [e.description && t.jsxs("div", { children: [t.jsx("h3", { className: "text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: "Description" }), t.jsx("p", { className: "text-gray-900 dark:text-white", children: e.description })] }), t.jsx("div", { className: "bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800", children: t.jsxs("div", { className: "flex items-center gap-3 mb-2", children: [t.jsx("div", { className: "p-2 bg-blue-100 dark:bg-blue-900/40 rounded-lg", children: t.jsx(Rl, { className: "h-5 w-5 text-blue-600 dark:text-blue-400" }) }), t.jsxs("div", { children: [t.jsx("h3", { className: "font-semibold text-gray-900 dark:text-white", children: "Trigger" }), t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: ["When ", e.trigger.replace(/_/g, " ").toLowerCase()] })] })] }) }), t.jsxs("div", { className: "relative", children: [t.jsx("div", { className: "absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700 -z-10" }), t.jsxs("div", { className: "bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800 mb-6", children: [t.jsxs("div", { className: "flex items-center gap-3 mb-4", children: [t.jsx("div", { className: "p-2 bg-yellow-100 dark:bg-yellow-900/40 rounded-lg", children: t.jsx(dr, { className: "h-5 w-5 text-yellow-600 dark:text-yellow-400" }) }), t.jsxs("div", { children: [t.jsx("h3", { className: "font-semibold text-gray-900 dark:text-white", children: "Conditions" }), t.jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: ["Match ", e.conditions.logic.toLowerCase(), " of the following"] })] })] }), t.jsx("div", { className: "space-y-2 pl-12", children: e.conditions.conditions.map((i, o) => t.jsxs("div", { className: "bg-white dark:bg-gray-800 p-3 rounded border border-gray-200 dark:border-gray-700 text-sm", children: [t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: i.field }), t.jsx("span", { className: "mx-2 text-gray-500", children: a(i.operator) }), t.jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: String(i.value) })] }, o)) })] }), t.jsxs("div", { className: "bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800", children: [t.jsxs("div", { className: "flex items-center gap-3 mb-4", children: [t.jsx("div", { className: "p-2 bg-green-100 dark:bg-green-900/40 rounded-lg", children: t.jsx(ut, { className: "h-5 w-5 text-green-600 dark:text-green-400" }) }), t.jsxs("div", { children: [t.jsx("h3", { className: "font-semibold text-gray-900 dark:text-white", children: "Actions" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Execute the following actions" })] })] }), t.jsx("div", { className: "space-y-4 pl-12", children: e.actions.map((i, o) => t.jsxs("div", { className: "relative bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700", children: [t.jsxs("div", { className: "flex items-center gap-2 font-medium text-gray-900 dark:text-white", children: [t.jsx(gd, { className: "h-4 w-4 text-gray-400" }), s(i.type)] }), n(i)] }, o)) })] })] })] }), t.jsx("div", { className: "p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 flex justify-end", children: t.jsx("button", { onClick: r, className: "px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors", children: "Close" }) })] }) }) }; var Rn = (e => (e.LEAD_CREATED = "LEAD_CREATED", e.LEAD_UPDATED = "LEAD_UPDATED", e.LEAD_STATUS_CHANGED = "LEAD_STATUS_CHANGED", e.LEAD_ASSIGNED = "LEAD_ASSIGNED", e.DEAL_CREATED = "DEAL_CREATED", e.DEAL_UPDATED = "DEAL_UPDATED", e.DEAL_STAGE_CHANGED = "DEAL_STAGE_CHANGED", e.TASK_CREATED = "TASK_CREATED", e.TASK_COMPLETED = "TASK_COMPLETED", e))(Rn || {}), Gs = (e => (e.EQUALS = "EQUALS", e.NOT_EQUALS = "NOT_EQUALS", e.CONTAINS = "CONTAINS", e.NOT_CONTAINS = "NOT_CONTAINS", e.GREATER_THAN = "GREATER_THAN", e.LESS_THAN = "LESS_THAN", e.GREATER_THAN_OR_EQUAL = "GREATER_THAN_OR_EQUAL", e.LESS_THAN_OR_EQUAL = "LESS_THAN_OR_EQUAL", e.IS_EMPTY = "IS_EMPTY", e.IS_NOT_EMPTY = "IS_NOT_EMPTY", e))(Gs || {}), K0 = (e => (e.AND = "AND", e.OR = "OR", e))(K0 || {}), da = (e => (e.ASSIGN_TO_USER = "ASSIGN_TO_USER", e.ASSIGN_TO_TEAM = "ASSIGN_TO_TEAM", e.CHANGE_STATUS = "CHANGE_STATUS", e.SEND_EMAIL = "SEND_EMAIL", e.SEND_WHATSAPP = "SEND_WHATSAPP", e.CREATE_TASK = "CREATE_TASK", e.ADD_TAG = "ADD_TAG", e.REMOVE_TAG = "REMOVE_TAG", e.UPDATE_FIELD = "UPDATE_FIELD", e.SEND_WEBHOOK = "SEND_WEBHOOK", e))(da || {}); const Xoe = { LEAD_CREATED: [{ value: "source", label: "Source", category: "Lead Info" }, { value: "status", label: "Status", category: "Lead Info" }, { value: "city", label: "City", category: "Lead Info" }, { value: "budget", label: "Budget", category: "Lead Info" }, { value: "email", label: "Email", category: "Contact" }, { value: "phone", label: "Phone", category: "Contact" }, { value: "company", label: "Company", category: "Contact" }, { value: "assignedTo", label: "Assigned To", category: "Assignment" }, { value: "createdAt", label: "Created Date", category: "System" }], LEAD_UPDATED: [{ value: "source", label: "Source", category: "Lead Info" }, { value: "status", label: "Status", category: "Lead Info" }, { value: "city", label: "City", category: "Lead Info" }, { value: "budget", label: "Budget", category: "Lead Info" }, { value: "email", label: "Email", category: "Contact" }, { value: "phone", label: "Phone", category: "Contact" }, { value: "company", label: "Company", category: "Contact" }, { value: "assignedTo", label: "Assigned To", category: "Assignment" }, { value: "updatedAt", label: "Updated Date", category: "System" }], LEAD_STATUS_CHANGED: [{ value: "status", label: "New Status", category: "Lead Info" }, { value: "previousStatus", label: "Previous Status", category: "Lead Info" }, { value: "source", label: "Source", category: "Lead Info" }, { value: "city", label: "City", category: "Lead Info" }, { value: "assignedTo", label: "Assigned To", category: "Assignment" }], LEAD_ASSIGNED: [{ value: "assignedTo", label: "Assigned To", category: "Assignment" }, { value: "previousAssignee", label: "Previous Assignee", category: "Assignment" }, { value: "source", label: "Source", category: "Lead Info" }, { value: "status", label: "Status", category: "Lead Info" }, { value: "city", label: "City", category: "Lead Info" }], DEAL_CREATED: [{ value: "title", label: "Deal Title", category: "Deal Info" }, { value: "stage", label: "Stage", category: "Deal Info" }, { value: "value", label: "Deal Value", category: "Deal Info" }, { value: "probability", label: "Probability (%)", category: "Deal Info" }, { value: "expectedCloseDate", label: "Expected Close Date", category: "Deal Info" }, { value: "source", label: "Source", category: "Lead Info" }, { value: "assignedTo", label: "Assigned To", category: "Assignment" }], DEAL_UPDATED: [{ value: "title", label: "Deal Title", category: "Deal Info" }, { value: "stage", label: "Stage", category: "Deal Info" }, { value: "value", label: "Deal Value", category: "Deal Info" }, { value: "probability", label: "Probability (%)", category: "Deal Info" }, { value: "expectedCloseDate", label: "Expected Close Date", category: "Deal Info" }, { value: "source", label: "Source", category: "Lead Info" }, { value: "assignedTo", label: "Assigned To", category: "Assignment" }, { value: "updatedAt", label: "Updated Date", category: "System" }], DEAL_STAGE_CHANGED: [{ value: "stage", label: "New Stage", category: "Deal Info" }, { value: "previousStage", label: "Previous Stage", category: "Deal Info" }, { value: "value", label: "Deal Value", category: "Deal Info" }, { value: "assignedTo", label: "Assigned To", category: "Assignment" }], TASK_CREATED: [{ value: "title", label: "Task Title", category: "Task Info" }, { value: "status", label: "Status", category: "Task Info" }, { value: "priority", label: "Priority", category: "Task Info" }, { value: "dueDate", label: "Due Date", category: "Task Info" }, { value: "assignedTo", label: "Assigned To", category: "Assignment" }, { value: "createdAt", label: "Created Date", category: "System" }], TASK_COMPLETED: [{ value: "status", label: "Status", category: "Task Info" }, { value: "completedAt", label: "Completed Date", category: "Task Info" }, { value: "priority", label: "Priority", category: "Task Info" }, { value: "assignedTo", label: "Assigned To", category: "Assignment" }] }, bx = e => Xoe[e] || [], Zoe = e => bx(e).reduce((a, s) => (a[s.category] || (a[s.category] = []), a[s.category].push(s), a), {}), Y0 = e => { switch (e) { case "LEAD_CREATED": case "LEAD_UPDATED": return { field: "source", operator: "EQUALS", value: "" }; case "DEAL_CREATED": case "DEAL_UPDATED": return { field: "stage", operator: "EQUALS", value: "" }; case "TASK_CREATED": return { field: "priority", operator: "EQUALS", value: "" }; case "LEAD_STATUS_CHANGED": return { field: "status", operator: "EQUALS", value: "" }; default: return { field: "status", operator: "EQUALS", value: "" } } }, lb = e => { const r = []; if (e.name?.trim() || r.push("Workflow name is required"), e.trigger || r.push("Trigger is required"), e.conditions?.conditions?.length || r.push("At least one condition is required"), e.actions?.length || r.push("At least one action is required"), e.conditions?.conditions && e.trigger) { const a = bx(e.trigger).map(s => s.value); e.conditions.conditions.forEach((s, n) => { a.includes(s.field) || r.push(`Condition ${n + 1}: Field "${s.field}" is not available for trigger "${e.trigger}"`) }) } return { isValid: r.length === 0, errors: r } }, Tc = { async getWorkflows(e = !1) { return (await ie.get(`/automation/workflows?includeInactive=${e}`)).data }, async getWorkflow(e) { return (await ie.get(`/automation/workflows/${e}`)).data }, async createWorkflow(e) { const r = lb(e); if (!r.isValid) throw new Error(`Validation failed: ${r.errors.join(", ")}`); return (await ie.post("/automation/workflows", e)).data }, async updateWorkflow(e, r) { if (r.name || r.trigger || r.conditions || r.actions) { const s = lb(r); if (!s.isValid) throw new Error(`Validation failed: ${s.errors.join(", ")}`) } return (await ie.patch(`/automation/workflows/${e}`, r)).data }, async deleteWorkflow(e) { await ie.delete(`/automation/workflows/${e}`) }, async toggleWorkflow(e, r) { return (await ie.patch(`/automation/workflows/${e}/toggle`, { isActive: r })).data }, async executeWorkflow(e, r) { return (await ie.post(`/automation/workflows/${e}/execute`, r)).data }, async getExecutionHistory(e, r = 50) { const a = new URLSearchParams; return e && a.append("workflowId", e.toString()), a.append("limit", r.toString()), (await ie.get(`/automation/executions?${a.toString()}`)).data }, getFieldsForTrigger: bx, getGroupedFieldsForTrigger: Zoe, getDefaultCondition: Y0, validateWorkflowPayload: lb }, Joe = [{ value: Rn.LEAD_CREATED, label: "Lead Created" }, { value: Rn.LEAD_UPDATED, label: "Lead Updated" }, { value: Rn.LEAD_STATUS_CHANGED, label: "Lead Status Changed" }, { value: Rn.LEAD_ASSIGNED, label: "Lead Assigned" }, { value: Rn.DEAL_CREATED, label: "Deal Created" }, { value: Rn.DEAL_UPDATED, label: "Deal Updated" }, { value: Rn.DEAL_STAGE_CHANGED, label: "Deal Stage Changed" }, { value: Rn.TASK_CREATED, label: "Task Created" }, { value: Rn.TASK_COMPLETED, label: "Task Completed" }], ele = [{ value: Gs.EQUALS, label: "Equals" }, { value: Gs.NOT_EQUALS, label: "Not Equals" }, { value: Gs.CONTAINS, label: "Contains" }, { value: Gs.NOT_CONTAINS, label: "Does Not Contain" }, { value: Gs.GREATER_THAN, label: "Greater Than" }, { value: Gs.LESS_THAN, label: "Less Than" }, { value: Gs.GREATER_THAN_OR_EQUAL, label: "Greater Than or Equal" }, { value: Gs.LESS_THAN_OR_EQUAL, label: "Less Than or Equal" }, { value: Gs.IS_EMPTY, label: "Is Empty" }, { value: Gs.IS_NOT_EMPTY, label: "Is Not Empty" }], tle = [{ value: da.ASSIGN_TO_USER, label: "Assign to User" }, { value: da.ASSIGN_TO_TEAM, label: "Assign to Team" }, { value: da.CHANGE_STATUS, label: "Change Status" }, { value: da.SEND_EMAIL, label: "Send Email" }, { value: da.SEND_WHATSAPP, label: "Send WhatsApp" }, { value: da.CREATE_TASK, label: "Create Task" }, { value: da.ADD_TAG, label: "Add Tag" }, { value: da.REMOVE_TAG, label: "Remove Tag" }, { value: da.UPDATE_FIELD, label: "Update Field" }, { value: da.SEND_WEBHOOK, label: "Send Webhook" }], rle = e => e.reduce((r, a) => (r[a.category] || (r[a.category] = []), r[a.category].push(a), r), {}), ale = ({ onClose: e, onSave: r, initialWorkflow: a }) => { const [s, n] = h.useState(a?.name || ""), [i, o] = h.useState(a?.description || ""), [c, u] = h.useState(a?.isActive ?? !0), [m, g] = h.useState(a?.trigger || Rn.LEAD_CREATED), [f, y] = h.useState(a?.conditions?.logic || K0.AND), [p, b] = h.useState(a?.conditions?.conditions || [Y0(m)]), [j, v] = h.useState(a?.actions || [{ type: da.ASSIGN_TO_USER, config: {} }]), [S, k] = h.useState(!1), [E, C] = h.useState(null), [N, A] = h.useState(null), [D, I] = h.useState([]), [$, B] = h.useState([]); h.useEffect(() => { (async () => { try { const G = await ur.getUsers(), de = (Array.isArray(G?.data) ? G.data : G?.data?.users) ?? []; I(de) } catch (G) { console.error("Failed to load users for workflow builder", G) } })(), (async () => { try { const G = await Ru.getAll(); B(G || []) } catch (G) { console.error("Failed to load teams for workflow builder", G) } })() }, []); const W = () => { b([...p, Y0(m)]) }, M = J => { g(J), b([Y0(J)]) }, q = J => { b(p.filter((te, G) => G !== J)) }, V = (J, te, G) => { const de = [...p]; de[J] = { ...de[J], [te]: G }, b(de) }, X = () => { v([...j, { type: da.ASSIGN_TO_USER, config: {} }]) }, se = J => { v(j.filter((te, G) => G !== J)) }, le = (J, te) => { const G = [...j]; G[J] = { type: te, config: {} }, v(G) }, ee = (J, te, G) => { const de = [...j]; de[J].config[te] = G, v(de) }, L = J => { C(J) }, z = (J, te) => { if (J.preventDefault(), E === null || E === te) return; const G = [...p], de = G[E]; G.splice(E, 1), G.splice(te, 0, de), b(G), C(te) }, T = () => { C(null) }, _ = J => { A(J) }, H = (J, te) => { if (J.preventDefault(), N === null || N === te) return; const G = [...j], de = G[N]; G.splice(N, 1), G.splice(te, 0, de), v(G), A(te) }, U = () => { A(null) }, K = async () => { if (!s.trim()) { alert("Please enter a workflow name"); return } k(!0); try { await r({ name: s, description: i, isActive: c, trigger: m, conditions: { logic: f, conditions: p }, actions: j }) } catch (J) { console.error("Failed to save workflow:", J), alert("Failed to save workflow. Please try again.") } finally { k(!1) } }, Z = (J, te) => { switch (J.type) { case da.ASSIGN_TO_USER: return t.jsxs("select", { value: J.config.userId || "", onChange: G => ee(te, "userId", parseInt(G.target.value) || ""), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm", children: [t.jsx("option", { value: "", disabled: !0, children: "Select User" }), D.map(G => t.jsx("option", { value: G.id, children: G.fullName }, G.id))] }); case da.ASSIGN_TO_TEAM: return t.jsxs("select", { value: J.config.teamId || "", onChange: G => ee(te, "teamId", parseInt(G.target.value) || ""), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm", children: [t.jsx("option", { value: "", disabled: !0, children: "Select Team" }), $.map(G => t.jsx("option", { value: G.id, children: G.name }, G.id))] }); case da.CHANGE_STATUS: return t.jsx("input", { type: "text", placeholder: "New Status", value: J.config.status || "", onChange: G => ee(te, "status", G.target.value), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm" }); case da.SEND_EMAIL: return t.jsxs("div", { className: "space-y-2", children: [t.jsx("input", { type: "email", placeholder: "To Email", value: J.config.to || "", onChange: G => ee(te, "to", G.target.value), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm" }), t.jsx("input", { type: "text", placeholder: "Subject", value: J.config.subject || "", onChange: G => ee(te, "subject", G.target.value), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm" }), t.jsx("textarea", { placeholder: "Message", value: J.config.body || "", onChange: G => ee(te, "body", G.target.value), rows: 3, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm" })] }); case da.CREATE_TASK: return t.jsxs("div", { className: "space-y-2", children: [t.jsx("input", { type: "text", placeholder: "Task Title", value: J.config.title || "", onChange: G => ee(te, "title", G.target.value), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm" }), t.jsx("textarea", { placeholder: "Task Description", value: J.config.description || "", onChange: G => ee(te, "description", G.target.value), rows: 2, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm" })] }); case da.ADD_TAG: case da.REMOVE_TAG: return t.jsx("input", { type: "text", placeholder: "Tag Name", value: J.config.tag || "", onChange: G => ee(te, "tag", G.target.value), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm" }); case da.UPDATE_FIELD: return t.jsxs("div", { className: "space-y-2", children: [t.jsx("input", { type: "text", placeholder: "Field Name", value: J.config.field || "", onChange: G => ee(te, "field", G.target.value), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm" }), t.jsx("input", { type: "text", placeholder: "New Value", value: J.config.value || "", onChange: G => ee(te, "value", G.target.value), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm" })] }); default: return null } }; return t.jsx("div", { className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto", children: t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col", children: [t.jsxs("div", { className: "flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700", children: [t.jsx("h2", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: a ? "Edit Workflow" : "Create New Workflow" }), t.jsx("button", { onClick: e, className: "p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors", children: t.jsx(fa, { className: "h-5 w-5 text-gray-500" }) })] }), t.jsxs("div", { className: "flex-1 overflow-y-auto p-6 space-y-6", children: [t.jsxs("div", { className: "space-y-4", children: [t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Workflow Name *" }), t.jsx("input", { type: "text", value: s, onChange: J => n(J.target.value), placeholder: "e.g., Auto-assign new leads", className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" })] }), t.jsxs("div", { children: [t.jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Description" }), t.jsx("textarea", { value: i, onChange: J => o(J.target.value), placeholder: "Describe what this workflow does...", rows: 2, className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("input", { type: "checkbox", id: "isActive", checked: c, onChange: J => u(J.target.checked), className: "w-4 h-4 text-weconnect-red border-gray-300 rounded focus:ring-weconnect-red" }), t.jsx("label", { htmlFor: "isActive", className: "text-sm font-medium text-gray-700 dark:text-gray-300", children: "Active (workflow will run automatically)" })] })] }), t.jsxs("div", { className: "bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-3", children: " Trigger" }), t.jsx("select", { value: m, onChange: J => M(J.target.value), className: "w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white", children: Joe.map(J => t.jsx("option", { value: J.value, children: J.label }, J.value)) })] }), t.jsxs("div", { className: "bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800", children: [t.jsxs("div", { className: "flex items-center justify-between mb-3", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: " Conditions" }), t.jsxs("select", { value: f, onChange: J => y(J.target.value), className: "px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white", children: [t.jsx("option", { value: K0.AND, children: "All (AND)" }), t.jsx("option", { value: K0.OR, children: "Any (OR)" })] })] }), t.jsx("div", { className: "space-y-2", children: p.map((J, te) => t.jsxs("div", { draggable: !0, onDragStart: () => L(te), onDragOver: G => z(G, te), onDragEnd: T, className: "flex items-center gap-2 bg-white dark:bg-gray-700 p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-move hover:border-gray-400 dark:hover:border-gray-500", children: [t.jsx(kb, { className: "h-4 w-4 text-gray-400" }), t.jsx("select", { value: J.field, onChange: G => V(te, "field", G.target.value), className: "flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm", children: Object.entries(rle(bx(m))).map(([G, de]) => t.jsx("optgroup", { label: G, children: de.map(Te => t.jsx("option", { value: Te.value, children: Te.label }, Te.value)) }, G)) }), t.jsx("select", { value: J.operator, onChange: G => V(te, "operator", G.target.value), className: "flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm", children: ele.map(G => t.jsx("option", { value: G.value, children: G.label }, G.value)) }), J.operator !== Gs.IS_EMPTY && J.operator !== Gs.IS_NOT_EMPTY && t.jsx("input", { type: "text", value: J.value || "", onChange: G => V(te, "value", G.target.value), placeholder: "Value", className: "flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm" }), t.jsx("button", { onClick: () => q(te), className: "p-2 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors", children: t.jsx(yt, { className: "h-4 w-4 text-red-600" }) })] }, te)) }), t.jsxs("button", { onClick: W, className: "mt-3 w-full py-2 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-600 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors flex items-center justify-center gap-2", children: [t.jsx($t, { className: "h-4 w-4" }), "Add Condition"] })] }), t.jsxs("div", { className: "bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-3", children: " Actions" }), t.jsx("div", { className: "space-y-3", children: j.map((J, te) => t.jsx("div", { draggable: !0, onDragStart: () => _(te), onDragOver: G => H(G, te), onDragEnd: U, className: "bg-white dark:bg-gray-700 p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-move hover:border-gray-400 dark:hover:border-gray-500", children: t.jsxs("div", { className: "flex items-start gap-2", children: [t.jsx(kb, { className: "h-4 w-4 text-gray-400 mt-2" }), t.jsxs("div", { className: "flex-1 space-y-2", children: [t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("select", { value: J.type, onChange: G => le(te, G.target.value), className: "flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm", children: tle.map(G => t.jsx("option", { value: G.value, children: G.label }, G.value)) }), t.jsx("button", { onClick: () => se(te), className: "p-2 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors", children: t.jsx(yt, { className: "h-4 w-4 text-red-600" }) })] }), Z(J, te)] })] }) }, te)) }), t.jsxs("button", { onClick: X, className: "mt-3 w-full py-2 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-600 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors flex items-center justify-center gap-2", children: [t.jsx($t, { className: "h-4 w-4" }), "Add Action"] })] })] }), t.jsxs("div", { className: "flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700", children: [t.jsx("button", { onClick: e, disabled: S, className: "px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors", children: "Cancel" }), t.jsx("button", { onClick: K, disabled: S, className: "px-6 py-2 bg-weconnect-red text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed", children: S ? "Saving..." : "Save Workflow" })] })] }) }) }, sle = () => { const { hasPermission: e } = mr(), [r, a] = h.useState([]), [s, n] = h.useState([]), [i, o] = h.useState(!0), [c, u] = h.useState(!1), [m, g] = h.useState(null), [f, y] = h.useState(null), [p, b] = h.useState("workflows"), [j, v] = h.useState("list"); h.useEffect(() => { S() }, []); const S = async () => { try { o(!0); const [B, W] = await Promise.all([Tc.getWorkflows(!0), Tc.getExecutionHistory()]); a(B), n(W) } catch (B) { console.error("Failed to load automation data:", B) } finally { o(!1) } }, k = async B => { try { m ? await Tc.updateWorkflow(m.id, B) : await Tc.createWorkflow(B), u(!1), g(null), S() } catch (W) { throw console.error("Failed to save workflow:", W), W } }, E = B => { g(B), u(!0) }, C = B => { y(B) }, N = async (B, W) => { try { await Tc.toggleWorkflow(B, !W), S() } catch (M) { console.error("Failed to toggle workflow:", M), alert("Failed to toggle workflow") } }, A = async B => { if (confirm("Are you sure you want to delete this workflow?")) try { await Tc.deleteWorkflow(B), S() } catch (W) { console.error("Failed to delete workflow:", W), alert("Failed to delete workflow") } }, D = B => { switch (B) { case "SUCCESS": return t.jsx(ut, { className: "h-5 w-5 text-green-500" }); case "FAILED": return t.jsx(Ca, { className: "h-5 w-5 text-red-500" }); case "RUNNING": case "PENDING": return t.jsx(Kt, { className: "h-5 w-5 text-yellow-500" }); default: return t.jsx(dr, { className: "h-5 w-5 text-gray-500" }) } }, I = B => { switch (B) { case "SUCCESS": return "bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"; case "FAILED": return "bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"; case "RUNNING": case "PENDING": return "bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"; default: return "bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400" } }, $ = B => t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6", children: t.jsxs("div", { className: "flex items-start justify-between", children: [t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center gap-3 mb-2", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: B.name }), t.jsx("span", { className: `px-2 py-1 rounded-full text-xs font-medium ${B.isActive ? "bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400" : "bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`, children: B.isActive ? "Active" : "Inactive" })] }), B.description && t.jsx("p", { className: "text-gray-600 dark:text-gray-400 text-sm mb-3", children: B.description }), t.jsxs("div", { className: "flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400", children: [t.jsxs("span", { className: "flex items-center gap-1", children: [t.jsx(Rl, { className: "h-4 w-4" }), B.trigger.replace(/_/g, " ")] }), t.jsxs("span", { children: [B.conditions.conditions.length, " conditions"] }), t.jsxs("span", { children: [B.actions.length, " actions"] }), B._count && t.jsxs("span", { children: [B._count.executions, " executions"] })] })] }), t.jsxs("div", { className: "flex items-center gap-2", children: [t.jsx("button", { onClick: () => C(B), className: "p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors", title: "View Details", children: t.jsx(Ht, { className: "h-4 w-4 text-gray-600 dark:text-gray-400" }) }), e(Ye.AUTOMATION.UPDATE) && t.jsx("button", { onClick: () => N(B.id, B.isActive), className: "p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors", title: B.isActive ? "Pause" : "Activate", children: B.isActive ? t.jsx(rU, { className: "h-4 w-4 text-gray-600 dark:text-gray-400" }) : t.jsx(Ab, { className: "h-4 w-4 text-gray-600 dark:text-gray-400" }) }), e(Ye.AUTOMATION.UPDATE) && t.jsx("button", { onClick: () => E(B), className: "p-2 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors", title: "Edit", children: t.jsx(Jt, { className: "h-4 w-4 text-blue-600 dark:text-blue-400" }) }), e(Ye.AUTOMATION.DELETE) && t.jsx("button", { onClick: () => A(B.id), className: "p-2 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors", title: "Delete", children: t.jsx(yt, { className: "h-4 w-4 text-red-600" }) })] })] }) }, B.id); return t.jsxs("div", { className: "p-6 space-y-6", children: [t.jsxs("div", { className: "flex items-center justify-between", children: [t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-pink-100 dark:bg-pink-900/30 rounded-xl", children: t.jsx(Rl, { className: "h-6 w-6 text-pink-600 dark:text-pink-400" }) }), t.jsxs("div", { children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "Automation" }), t.jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Build rules to automate your workflows" })] })] }), t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsxs("div", { className: "hidden sm:flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1", children: [t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${j === "list" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => v("list"), title: "List view", children: t.jsx(fi, { className: "w-4 h-4" }) }), t.jsx("button", { className: `flex items-center justify-center p-2 rounded-md transition-colors ${j === "grid" ? "bg-white dark:bg-gray-700 text-gray-900 dark:text-white" : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`, onClick: () => v("grid"), title: "Grid view", children: t.jsx(hi, { className: "w-4 h-4" }) })] }), e(Ye.AUTOMATION.CREATE) && t.jsxs("button", { className: "bg-weconnect-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center", onClick: () => { g(null), u(!0) }, children: [t.jsx($t, { className: "h-4 w-4 mr-2" }), "New Workflow"] })] })] }), t.jsx("div", { className: "border-b border-gray-200 dark:border-gray-700", children: t.jsxs("div", { className: "flex gap-4", children: [t.jsxs("button", { onClick: () => b("workflows"), className: `px-4 py-2 border-b-2 font-medium transition-colors ${p === "workflows" ? "border-weconnect-red text-weconnect-red" : "border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`, children: ["Workflows (", r.length, ")"] }), t.jsxs("button", { onClick: () => b("logs"), className: `px-4 py-2 border-b-2 font-medium transition-colors ${p === "logs" ? "border-weconnect-red text-weconnect-red" : "border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`, children: ["Execution Logs (", s.length, ")"] })] }) }), i ? t.jsx("div", { className: "text-center py-12", children: t.jsx("div", { className: "inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-weconnect-red" }) }) : p === "workflows" ? t.jsx("div", { className: "space-y-4", children: r.length === 0 ? t.jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-12 text-center", children: [t.jsx(Rl, { className: "h-12 w-12 text-gray-400 mx-auto mb-4" }), t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-2", children: "No workflows yet" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: "Create your first automation workflow to get started" }), e(Ye.AUTOMATION.CREATE) && t.jsxs("button", { onClick: () => { g(null), u(!0) }, className: "bg-weconnect-red text-white px-6 py-2 rounded-lg hover:bg-red-600 transition-colors inline-flex items-center", children: [t.jsx($t, { className: "h-4 w-4 mr-2" }), "Create Workflow"] })] }) : j === "grid" ? t.jsx("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4", children: r.map(B => $(B)) }) : t.jsx("div", { className: "space-y-4", children: r.map(B => $(B)) }) }) : t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden", children: s.length === 0 ? t.jsxs("div", { className: "p-12 text-center", children: [t.jsx(Kt, { className: "h-12 w-12 text-gray-400 mx-auto mb-4" }), t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-2", children: "No execution history" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "Workflow executions will appear here" })] }) : t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "w-full", children: [t.jsx("thead", { className: "bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700", children: t.jsxs("tr", { children: [t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Status" }), t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Workflow" }), t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Trigger" }), t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Duration" }), t.jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Time" })] }) }), t.jsx("tbody", { className: "divide-y divide-gray-200 dark:divide-gray-700", children: s.map(B => t.jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-900/30", children: [t.jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: t.jsxs("div", { className: "flex items-center gap-2", children: [D(B.status), t.jsx("span", { className: `px-2 py-1 rounded-full text-xs font-medium ${I(B.status)}`, children: B.status })] }) }), t.jsx("td", { className: "px-6 py-4", children: t.jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: B.workflow.name }) }), t.jsx("td", { className: "px-6 py-4", children: t.jsx("div", { className: "text-sm text-gray-600 dark:text-gray-400", children: B.workflow.trigger.replace(/_/g, " ") }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: t.jsx("div", { className: "text-sm text-gray-600 dark:text-gray-400", children: B.duration ? `${B.duration}ms` : "-" }) }), t.jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: t.jsx("div", { className: "text-sm text-gray-600 dark:text-gray-400", children: zD(new Date(B.startedAt), { addSuffix: !0 }) }) })] }, B.id)) })] }) }) }), c && t.jsx(ale, { onClose: () => { u(!1), g(null) }, onSave: k, initialWorkflow: m || void 0 }), f && t.jsx(Qoe, { workflow: f, onClose: () => y(null) })] }) }, nle = () => { const { hasPermission: e } = mr(), [r, a] = h.useState([]), [s, n] = h.useState(!0), [i, o] = h.useState(null); return h.useEffect(() => { (async () => { try { if (!e(Ye.ACTIVITY.READ)) { o("You do not have permission to view activities."); return } n(!0); const u = await Bi.getRecentActivities(100), m = u?.data?.items || u?.data || [], g = Array.isArray(m) ? m.map(Yw) : []; a(g) } catch (u) { console.error("Error fetching activities:", u), o("Failed to load activities.") } finally { n(!1) } })() }, [e]), e(Ye.ACTIVITY.READ) ? t.jsxs("div", { className: "p-6", children: [t.jsxs("div", { className: "mb-6", children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "All Activities" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mt-1", children: "View all system activities and user actions" })] }), s ? t.jsx("div", { className: "flex items-center justify-center py-12", children: t.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600" }) }) : i ? t.jsx("div", { className: "text-center py-12", children: t.jsx("p", { className: "text-red-600 dark:text-red-400", children: i }) }) : r.length === 0 ? t.jsx("div", { className: "text-center py-12", children: t.jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "No activities found." }) }) : t.jsx("div", { className: "space-y-4", children: r.map(c => t.jsx("div", { className: "bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700", children: t.jsx("div", { className: "flex items-start justify-between", children: t.jsxs("div", { className: "flex-1", children: [t.jsxs("div", { className: "flex items-center space-x-3 mb-2", children: [t.jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: c.title }), t.jsx("span", { className: `px-2 py-1 text-xs font-medium rounded-full ${c.iconColor}`, children: c.type?.replace("_", " ") || "OTHER" })] }), c.description && t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-3", children: c.description }), t.jsxs("div", { className: "flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400", children: [t.jsxs("div", { className: "flex items-center", children: [t.jsx(Kt, { size: 14, className: "mr-1" }), c.time] }), c.user && t.jsxs("div", { className: "flex items-center", children: [t.jsx(wt, { size: 14, className: "mr-1" }), c.user.firstName, " ", c.user.lastName] })] })] }) }) }, c.id)) })] }) : t.jsx("div", { className: "flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900", children: t.jsxs("div", { className: "text-center", children: [t.jsx("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-2", children: "Access Denied" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "You don't have permission to view activities." })] }) }) }, ile = { getCallLogs: async (e = {}) => { try { return (await ie.get("/call-logs", { params: { ...e, page: e.page || 1, limit: e.limit || 10 } })).data } catch (r) { throw console.error("Error fetching call logs:", r), r } }, getCallLogById: async e => { try { return (await ie.get(`/call-logs/${e}`)).data } catch (r) { throw console.error(`Error fetching call log ${e}:`, r), r } }, createCallLog: async e => { try { return (await ie.post("/call-logs", e)).data } catch (r) { throw console.error("Error creating call log:", r), r } }, updateCallLog: async (e, r) => { try { return (await ie.put(`/call-logs/${e}`, r)).data } catch (a) { throw console.error(`Error updating call log ${e}:`, a), a } }, deleteCallLog: async e => { try { return (await ie.delete(`/call-logs/${e}`)).data } catch (r) { throw console.error(`Error deleting call log ${e}:`, r), r } }, initiateCall: async e => { try { return (await ie.post("/call-logs/initiate", e)).data } catch (r) { throw console.error("Error initiating call:", r), r } } }, ole = [{ label: "All Activities", value: "ALL", icon: Fu }, { label: "Call Logs", value: "CALL", icon: F0 }, { label: "Login Logs", value: "LOGIN", icon: cD }, { label: "Lead Logs", value: "LEAD", icon: lU }, { label: "Quotation Logs", value: "QUOTATION", icon: Mt }, { label: "Invoice Logs", value: "INVOICE", icon: Ti }, { label: "Task Logs", value: "TASK", icon: Uu }], lle = () => { const { hasPermission: e, hasRole: r } = mr(); r("admin") || r("super_admin"); const [a, s] = h.useState("ALL"), [n, i] = h.useState([]), [o, c] = h.useState(1), [u, m] = h.useState(0), [g, f] = h.useState(!0), [y, p] = h.useState([]), [b, j] = h.useState(1), [v, S] = h.useState(0), [k, E] = h.useState(!0), [C] = h.useState(10), [N, A] = h.useState(""), [D, I] = h.useState(null), [$, B] = h.useState(null), [W, M] = h.useState([]), q = async () => { try { f(!0); const z = {}; a !== "ALL" && (z.type = a); const T = await Bi.getActivities(o, C, z), _ = T?.items || T?.data?.items || T?.data || [], H = T?.total || T?.data?.total || _.length, U = _.map(Yw); i(U), m(H), X(U) } catch (z) { console.error("Error fetching activities:", z) } finally { f(!1) } }, V = async () => { try { E(!0); const z = { page: b, limit: C, ...D && { dateFrom: D }, ...$ && { dateTo: $ } }, T = await ile.getCallLogs(z), _ = T?.items || T?.data?.items || T?.data || [], H = T?.total || T?.data?.total || _.length; p(_), S(H) } catch (z) { console.error("Error fetching call logs:", z) } finally { E(!1) } }, X = z => { let T = z; if (N.trim()) { const _ = N.toLowerCase().trim(); T = T.filter(H => H.user?.firstName?.toLowerCase().includes(_) || H.user?.lastName?.toLowerCase().includes(_) || H.user?.email?.toLowerCase().includes(_) || H.title?.toLowerCase().includes(_) || H.description?.toLowerCase().includes(_)) } if (D) { const _ = new Date(D); T = T.filter(H => new Date(H.createdAt) >= _) } if ($) { const _ = new Date($); T = T.filter(H => new Date(H.createdAt) <= _) } M(T) }; if (h.useEffect(() => { a === "CALL" ? (j(1), V()) : (c(1), q()) }, [a]), h.useEffect(() => { a !== "CALL" && X(n) }, [N, D, $, n]), h.useEffect(() => { a === "CALL" ? V() : q() }, [o, b]), !e(Ye.ACTIVITY.READ)) return t.jsx("div", { className: "flex items-center justify-center min-h-[60vh]", children: t.jsxs("div", { className: "text-center p-8 bg-white dark:bg-slate-900 rounded-2xl shadow-xl border border-gray-100 dark:border-slate-800 max-w-md", children: [t.jsx("div", { className: "w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4", children: t.jsx(Fu, { size: 32, className: "text-red-600" }) }), t.jsx("h1", { className: "text-2xl font-bold mb-2 text-gray-900 dark:text-white", children: "Access Denied" }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "You don't have permission to view system logs." })] }) }); const se = z => { switch (z) { case "COMPLETED": return "bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"; case "ANSWERED": return "bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"; case "FAILED": case "NO_ANSWER": case "BUSY": return "bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"; case "INITIATED": case "RINGING": return "bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"; default: return "bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400" } }, le = z => { A(z.target.value) }, ee = () => { A(""), I(null), B(null) }, L = z => { s(z), c(1), j(1), z === "CALL" && (A(""), I(null), B(null)) }; return t.jsxs("div", { className: "max-w-full mx-0 px-0 sm:px-4 md:px-6 lg:px-8 space-y-6", children: [" ", t.jsx("div", { className: "flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white dark:bg-slate-900 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-slate-800", children: t.jsxs("div", { children: [t.jsxs("h1", { className: "text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3", children: [t.jsx("div", { className: "p-2 bg-weconnect-red/10 rounded-xl", children: t.jsx(Fu, { className: "h-8 w-8 text-weconnect-red" }) }), "System Logs"] }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 mt-2", children: "Track activities and communications across the platform." })] }) }), a !== "CALL" && t.jsx("div", { className: "bg-white dark:bg-slate-900 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-slate-800", children: t.jsxs("div", { className: "flex flex-col sm:flex-row gap-4 items-start sm:items-end", children: [t.jsxs("div", { className: "flex-1 min-w-[200px]", children: [t.jsx("label", { className: "block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1", children: "Search by Email / User" }), t.jsxs("div", { className: "relative", children: [t.jsx(Xr, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" }), t.jsx("input", { type: "text", value: N, onChange: le, placeholder: "Enter email or user name...", className: "w-full pl-10 pr-10 py-2.5 border border-gray-200 dark:border-slate-700 rounded-xl bg-gray-50 dark:bg-slate-800 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-weconnect-red/30" }), N && t.jsx("button", { onClick: () => A(""), className: "absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300", children: t.jsx(fa, { size: 16 }) })] })] }), t.jsxs("div", { className: "min-w-[140px]", children: [t.jsx("label", { className: "block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1", children: "From" }), t.jsxs("div", { className: "relative", children: [t.jsx(Zt, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" }), t.jsx("input", { type: "date", value: D || "", onChange: z => I(z.target.value), className: "w-full pl-10 py-2.5 border border-gray-200 dark:border-slate-700 rounded-xl bg-gray-50 dark:bg-slate-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-weconnect-red/30" })] })] }), t.jsxs("div", { className: "min-w-[140px]", children: [t.jsx("label", { className: "block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1", children: "To" }), t.jsxs("div", { className: "relative", children: [t.jsx(Zt, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" }), t.jsx("input", { type: "date", value: $ || "", onChange: z => B(z.target.value), className: "w-full pl-10 py-2.5 border border-gray-200 dark:border-slate-700 rounded-xl bg-gray-50 dark:bg-slate-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-weconnect-red/30" })] })] }), (N || D || $) && t.jsx("button", { onClick: ee, className: "px-4 py-2.5 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 rounded-xl font-medium text-gray-700 dark:text-gray-300 transition-colors", children: "Clear Filters" })] }) }), t.jsx("div", { className: "flex flex-wrap gap-2 p-1.5 bg-gray-100/50 dark:bg-slate-900/50 rounded-2xl w-full border border-gray-200/60 dark:border-slate-800 shadow-sm overflow-x-auto no-scrollbar", children: ole.map(z => { const T = z.icon, _ = a === z.value; return t.jsxs("button", { onClick: () => L(z.value), className: `flex items-center gap-2.5 px-6 py-2.5 rounded-xl font-bold text-sm transition-all whitespace-nowrap ${_ ? "bg-white dark:bg-slate-800 text-weconnect-red shadow-md scale-[1.02]" : "text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-white/50 dark:hover:bg-slate-800/50"}`, children: [t.jsx(T, { size: 18, className: `${_ ? "text-weconnect-red" : "text-gray-400"}` }), z.label] }, z.value) }) }), t.jsx("div", { className: "bg-white dark:bg-slate-900 rounded-3xl shadow-sm border border-gray-100 dark:border-slate-800 overflow-hidden", children: a !== "CALL" ? t.jsx("div", { className: "p-0", children: g ? t.jsxs("div", { className: "flex flex-col items-center justify-center py-32 gap-4", children: [t.jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-4 border-weconnect-red/20 border-t-weconnect-red" }), t.jsx("p", { className: "text-sm font-medium text-gray-500", children: "Fetching activities..." })] }) : W.length === 0 ? t.jsxs("div", { className: "text-center py-32", children: [t.jsx("div", { className: "w-20 h-20 bg-gray-50 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6", children: t.jsx(Fu, { size: 40, className: "text-gray-300" }) }), t.jsx("p", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "No activities found" }), t.jsx("p", { className: "text-gray-500 mt-1", children: "Try adjusting your filters or search criteria." })] }) : t.jsxs(t.Fragment, { children: [t.jsx("div", { className: "divide-y divide-gray-50 dark:divide-slate-800", children: W.map(z => { const T = z.icon; return t.jsx("div", { className: "p-6 hover:bg-gray-50/50 dark:hover:bg-slate-800/30 transition-all group", children: t.jsxs("div", { className: "flex items-start gap-5", children: [t.jsx("div", { className: `p-3 rounded-2xl bg-white dark:bg-slate-800 shadow-sm border border-gray-100 dark:border-slate-700 group-hover:scale-110 transition-transform ${z.iconColor}`, children: t.jsx(T, { size: 24 }) }), t.jsxs("div", { className: "flex-1 min-w-0", children: [t.jsxs("div", { className: "flex items-center justify-between mb-1.5 gap-4", children: [t.jsx("h3", { className: "font-bold text-gray-900 dark:text-white text-lg truncate", children: z.title }), t.jsxs("span", { className: "text-xs font-semibold text-gray-400 bg-gray-100 dark:bg-slate-800 px-2.5 py-1 rounded-full flex items-center gap-1.5 whitespace-nowrap", children: [t.jsx(Kt, { size: 12 }), z.time] })] }), t.jsx("p", { className: "text-gray-600 dark:text-gray-400 leading-relaxed mb-3", children: z.description }), t.jsxs("div", { className: "flex items-center gap-4", children: [z.user && t.jsxs("div", { className: "flex items-center gap-2 group/user cursor-help", children: [t.jsxs("div", { className: "w-6 h-6 rounded-full bg-weconnect-red/10 flex items-center justify-center text-[10px] font-bold text-weconnect-red", children: [z.user.firstName?.[0], z.user.lastName?.[0]] }), t.jsxs("span", { className: "text-xs font-medium text-gray-500 group-hover/user:text-weconnect-red transition-colors", children: [z.user.firstName, " ", z.user.lastName] })] }), t.jsx("div", { className: "h-1 w-1 rounded-full bg-gray-300 dark:bg-slate-700" }), t.jsx("span", { className: "text-xs font-medium text-gray-400 italic", children: Hc(new Date(z.createdAt), "MMM dd, yyyy  hh:mm a") })] })] })] }) }, z.id) }) }), t.jsx("div", { className: "p-6 bg-gray-50/50 dark:bg-slate-800/30 border-t border-gray-100 dark:border-slate-800", children: t.jsx(en, { currentPage: o, totalPages: Math.ceil(W.length / C), totalItems: W.length, onPageChange: c, itemsPerPage: C }) })] }) }) : t.jsx("div", { className: "p-0", children: k ? t.jsxs("div", { className: "flex flex-col items-center justify-center py-32 gap-4", children: [t.jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-4 border-weconnect-red/20 border-t-weconnect-red" }), t.jsx("p", { className: "text-sm font-medium text-gray-500", children: "Fetching call logs..." })] }) : y.length === 0 ? t.jsxs("div", { className: "text-center py-32", children: [t.jsx("div", { className: "w-20 h-20 bg-gray-50 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6", children: t.jsx(ma, { size: 40, className: "text-gray-300" }) }), t.jsx("p", { className: "text-lg font-bold text-gray-900 dark:text-white", children: "No call logs found" }), t.jsx("p", { className: "text-gray-500 mt-1", children: "Try adjusting your filters or search criteria." })] }) : t.jsxs(t.Fragment, { children: [t.jsx("div", { className: "overflow-x-auto", children: t.jsxs("table", { className: "w-full text-left border-collapse", children: [t.jsx("thead", { children: t.jsxs("tr", { className: "bg-gray-50/50 dark:bg-slate-800/50 text-[10px] uppercase tracking-widest text-gray-400 font-bold border-b border-gray-100 dark:border-slate-800", children: [t.jsx("th", { className: "px-8 py-5", children: "Lead / Number" }), t.jsx("th", { className: "px-4 py-5 text-center", children: "Type" }), t.jsx("th", { className: "px-8 py-5", children: "Status" }), t.jsx("th", { className: "px-8 py-5", children: "Performed By" }), t.jsx("th", { className: "px-8 py-5 text-right", children: "Date & Time" })] }) }), t.jsx("tbody", { className: "divide-y divide-gray-50 dark:divide-slate-800", children: y.map(z => t.jsxs("tr", { className: "hover:bg-gray-50/50 dark:hover:bg-slate-800/30 transition-all group", children: [t.jsxs("td", { className: "px-8 py-5", children: [t.jsx("div", { className: "font-bold text-gray-900 dark:text-white group-hover:text-weconnect-red transition-colors", children: z.lead ? `${z.lead.firstName} ${z.lead.lastName}` : "Direct Call" }), t.jsxs("div", { className: "text-xs text-gray-500 mt-0.5 flex items-center gap-1.5", children: [t.jsx(ma, { size: 10 }), z.phoneNumber] })] }), t.jsx("td", { className: "px-4 py-5", children: t.jsx("div", { className: "flex items-center justify-center", children: z.callType === "INBOUND" ? t.jsx("div", { className: "bg-green-100 dark:bg-green-900/30 p-2 rounded-lg text-green-600 cursor-help", title: "Inbound Call", children: t.jsx(pr, { size: 16 }) }) : t.jsx("div", { className: "bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg text-blue-600 cursor-help", title: "Outbound Call", children: t.jsx(gd, { size: 16 }) }) }) }), t.jsx("td", { className: "px-8 py-5", children: t.jsx("span", { className: `px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest shadow-sm ${se(z.callStatus)}`, children: z.callStatus }) }), t.jsx("td", { className: "px-8 py-5", children: t.jsxs("div", { className: "flex items-center gap-3", children: [t.jsxs("div", { className: "w-8 h-8 rounded-xl bg-gray-100 dark:bg-slate-800 flex items-center justify-center text-[10px] font-bold text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-slate-700", children: [z.user?.firstName?.[0], z.user?.lastName?.[0]] }), t.jsxs("div", { className: "text-sm font-semibold text-gray-700 dark:text-gray-300", children: [z.user?.firstName, " ", z.user?.lastName] })] }) }), t.jsxs("td", { className: "px-8 py-5 text-right whitespace-nowrap", children: [t.jsx("div", { className: "text-sm font-bold text-gray-900 dark:text-white", children: Hc(new Date(z.createdAt), "MMM dd, yyyy") }), t.jsx("div", { className: "text-[10px] text-gray-500 font-medium", children: Hc(new Date(z.createdAt), "hh:mm a") })] })] }, z.id)) })] }) }), t.jsx("div", { className: "p-6 bg-gray-50/50 dark:bg-slate-800/30 border-t border-gray-100 dark:border-slate-800", children: t.jsx(en, { currentPage: b, totalPages: Math.ceil(v / C), totalItems: v, onPageChange: j, itemsPerPage: C }) })] }) }) })] }) }; function cle() { const { error: e, isAuthenticated: r, isBootstrapping: a } = mr(), s = xt(), [n, i] = h.useState(!1), [o, c] = h.useState(void 0), [u, m] = h.useState(void 0); Je.useEffect(() => { e === "Session expired. Please login again." && i(!0) }, [e]), Je.useEffect(() => { const f = y => { const p = y; c(p.detail?.title), m(p.detail?.message), i(!0) }; return window.addEventListener("tokenExpired", f), () => { window.removeEventListener("tokenExpired", f) } }, []); const g = () => { i(!1), c(void 0), m(void 0), s("/login") }; return a ? t.jsxs(t.Fragment, { children: [t.jsx("div", { className: "min-h-screen flex items-center justify-center bg-gray-50", children: t.jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600" }) }), t.jsx(eh, { position: cn.POSITION, autoClose: cn.AUTO_CLOSE, hideProgressBar: cn.HIDE_PROGRESS_BAR, newestOnTop: !0, closeOnClick: cn.CLOSE_ON_CLICK, pauseOnHover: cn.PAUSE_ON_HOVER, draggable: cn.DRAGGABLE, theme: "colored" })] }) : t.jsxs(t.Fragment, { children: [r ? t.jsxs(HM, { children: [t.jsx(at, { path: "/", element: t.jsx(ot, { requiredPermission: Ye.DASHBOARD.READ, children: t.jsx(lt, { children: t.jsx(kie, {}) }) }) }), t.jsx(at, { path: "/leads", element: t.jsx(ot, { requiredPermission: Ye.LEAD.READ, children: t.jsx(lt, { children: t.jsx(Jie, {}) }) }) }), t.jsx(at, { path: "/leads/new", element: t.jsx(ot, { requiredPermission: "lead.create", children: t.jsx(lt, { children: t.jsx(roe, {}) }) }) }), t.jsx(at, { path: "/leads/:id/edit", element: t.jsx(ot, { requiredPermission: "lead.update", children: t.jsx(lt, { children: t.jsx(aoe, {}) }) }) }), t.jsx(at, { path: "/leads/:id", element: t.jsx(ot, { requiredPermission: "lead.read", children: t.jsx(lt, { children: t.jsx(noe, {}) }) }) }), t.jsx(at, { path: "/deals", element: t.jsx(ot, { requiredPermission: Ye.DEAL.READ, children: t.jsx(lt, { children: t.jsx(ioe, {}) }) }) }), t.jsx(at, { path: "/deals/new", element: t.jsx(ot, { requiredPermission: Ye.DEAL.CREATE, children: t.jsx(lt, { children: t.jsx(uoe, {}) }) }) }), t.jsx(at, { path: "/deals/:id/edit", element: t.jsx(ot, { requiredPermission: Ye.DEAL.UPDATE, children: t.jsx(lt, { children: t.jsx(moe, {}) }) }) }), t.jsx(at, { path: "/deals/:id", element: t.jsx(ot, { requiredPermission: Ye.DEAL.READ, children: t.jsx(lt, { children: t.jsx(doe, {}) }) }) }), t.jsx(at, { path: "/search", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(Goe, {}) }) }) }), t.jsx(at, { path: "/quotations", element: t.jsx(ot, { requiredPermission: Ye.QUOTATION.READ, children: t.jsx(lt, { children: t.jsx(Vie, {}) }) }) }), t.jsx(at, { path: "/quotations/:id", element: t.jsx(ot, { requiredPermission: Ye.QUOTATION.READ, children: t.jsx(lt, { children: t.jsx(Kie, {}) }) }) }), t.jsx(at, { path: "/quotations/new", element: t.jsx(ot, { requiredPermission: Ye.QUOTATION.CREATE, children: t.jsx(lt, { children: t.jsx(LP, {}) }) }) }), t.jsx(at, { path: "/quotations/edit/:id", element: t.jsx(ot, { requiredPermission: Ye.QUOTATION.UPDATE, children: t.jsx(lt, { children: t.jsx(LP, {}) }) }) }), t.jsx(at, { path: "/invoices", element: t.jsx(ot, { requiredPermission: Ye.INVOICE.READ, children: t.jsx(lt, { children: t.jsx(Yie, {}) }) }) }), t.jsx(at, { path: "/invoices/new", element: t.jsx(ot, { requiredPermission: Ye.INVOICE.CREATE, children: t.jsx(lt, { children: t.jsx(RP, {}) }) }) }), t.jsx(at, { path: "/invoices/edit/:id", element: t.jsx(ot, { requiredPermission: Ye.INVOICE.UPDATE, children: t.jsx(lt, { children: t.jsx(RP, {}) }) }) }), t.jsx(at, { path: "/products", element: t.jsx(ot, { requiredPermission: "product.read", children: t.jsx(lt, { children: t.jsx(_oe, {}) }) }) }), t.jsx(at, { path: "/products/new", element: t.jsx(ot, { requiredPermission: "product.create", children: t.jsx(lt, { children: t.jsx("div", { children: "Product Create Form - Coming Soon" }) }) }) }), t.jsx(at, { path: "/products/:id/edit", element: t.jsx(ot, { requiredPermission: "product.update", children: t.jsx(lt, { children: t.jsx("div", { children: "Product Edit Form - Coming Soon" }) }) }) }), t.jsx(at, { path: "/task-management", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(BP, {}) }) }) }), t.jsx(at, { path: "/tasks/:id", element: t.jsx(ot, { requiredPermission: Ye.ACTIVITY.READ, children: t.jsx(lt, { children: t.jsx(Koe, {}) }) }) }), t.jsx(at, { path: "/activities", element: t.jsx(ot, { requiredPermission: Ye.ACTIVITY.READ, children: t.jsx(lt, { children: t.jsx(nle, {}) }) }) }), t.jsx(at, { path: "/expense-management", element: t.jsx(ot, { requiredPermission: Ye.EXPENSE.READ, children: t.jsx(lt, { children: t.jsx(Yoe, {}) }) }) }), t.jsx(at, { path: "/automation-management", element: t.jsx(ot, { requiredPermission: Ye.AUTOMATION.READ, children: t.jsx(lt, { children: t.jsx(sle, {}) }) }) }), t.jsx(at, { path: "/users", element: t.jsx(ot, { requiredPermission: "user.read", children: t.jsx(lt, { children: t.jsx(goe, {}) }) }) }), t.jsx(at, { path: "/users/new", element: t.jsx(ot, { requiredPermission: "user.create", children: t.jsx(lt, { children: t.jsx(hoe, {}) }) }) }), t.jsx(at, { path: "/users/:id/edit", element: t.jsx(ot, { requiredPermission: "user.update", children: t.jsx(lt, { children: t.jsx(foe, {}) }) }) }), t.jsx(at, { path: "/roles", element: t.jsx(ot, { requiredPermission: "role.read", children: t.jsx(lt, { children: t.jsx(Sie, {}) }) }) }), t.jsx(at, { path: "/roles/new", element: t.jsx(ot, { requiredPermission: "role.create", children: t.jsx(lt, { children: t.jsx(xoe, {}) }) }) }), t.jsx(at, { path: "/roles/:id/edit", element: t.jsx(ot, { requiredPermission: Ye.ROLE.UPDATE, children: t.jsx(lt, { children: t.jsx(poe, {}) }) }) }), t.jsx(at, { path: "/business-settings", element: t.jsx(ot, { requiredPermission: Ye.BUSINESS_SETTINGS.READ, children: t.jsx(lt, { children: t.jsx(Cie, {}) }) }) }), t.jsx(at, { path: "/business-settings/teams", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(Eie, {}) }) }) }), t.jsx(at, { path: "/business-settings/company", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(Aie, {}) }) }) }), t.jsx(at, { path: "/business-settings/currency", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(Pie, {}) }) }) }), t.jsx(at, { path: "/business-settings/lead-sources", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(Tie, {}) }) }) }), t.jsx(at, { path: "/business-settings/lead-fields", element: t.jsx(ot, { requiredPermission: Ye.BUSINESS_SETTINGS.READ, children: t.jsx(lt, { children: t.jsx(Die, {}) }) }) }), t.jsx(at, { path: "/settings/leads", element: t.jsx(ot, { requiredPermission: Ye.LEAD.READ, children: t.jsx(lt, { children: t.jsx(Aoe, {}) }) }) }), t.jsx(at, { path: "/business-settings/tags", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(Oie, {}) }) }) }), t.jsx(at, { path: "/business-settings/industries", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(Iie, {}) }) }) }), t.jsx(at, { path: "/business-settings/unit-types", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(Hie, {}) }) }) }), t.jsx(at, { path: "/business-settings/product-categories", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(Wie, {}) }) }) }), t.jsx(at, { path: "/business-settings/lead-statuses", element: t.jsx(ot, { requiredPermission: Ye.BUSINESS_SETTINGS.READ, children: t.jsx(lt, { children: t.jsx(Lie, {}) }) }) }), t.jsx(at, { path: "/business-settings/communication", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(Rie, {}) }) }) }), t.jsx(at, { path: "/business-settings/integrations/communication", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(Mie, {}) }) }) }), t.jsx(at, { path: "/business-settings/notifications", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(zie, {}) }) }) }), t.jsx(at, { path: "/business-settings/integrations/leads", element: t.jsx(ot, { requiredPermission: Ye.LEAD.CREATE, children: t.jsx(lt, { children: t.jsx(joe, {}) }) }) }), t.jsx(at, { path: "/business-settings/quotation-templates", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(_ie, {}) }) }) }), t.jsx(at, { path: "/business-settings/invoice-templates", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx($ie, {}) }) }) }), t.jsx(at, { path: "/business-settings/numbering", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(Uie, {}) }) }) }), t.jsx(at, { path: "/business-settings/terms-and-conditions", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(Fie, {}) }) }) }), t.jsx(at, { path: "/reports", element: t.jsx(ot, { requiredPermission: Ye.DASHBOARD.READ, children: t.jsx(lt, { children: t.jsx($oe, {}) }) }) }), t.jsx(at, { path: "/reports/tasks", element: t.jsx(ot, { requiredPermission: Ye.DASHBOARD.READ, children: t.jsx(lt, { children: t.jsx(Uoe, {}) }) }) }), t.jsx(at, { path: "/reports/leads", element: t.jsx(ot, { requiredPermission: Ye.DASHBOARD.READ, children: t.jsx(lt, { children: t.jsx(Foe, {}) }) }) }), t.jsx(at, { path: "/reports/deals", element: t.jsx(ot, { requiredPermission: Ye.DASHBOARD.READ, children: t.jsx(lt, { children: t.jsx(zoe, {}) }) }) }), t.jsx(at, { path: "/reports/expenses", element: t.jsx(ot, { requiredPermission: Ye.DASHBOARD.READ, children: t.jsx(lt, { children: t.jsx(Boe, {}) }) }) }), t.jsx(at, { path: "/reports/invoices", element: t.jsx(ot, { requiredPermission: Ye.DASHBOARD.READ, children: t.jsx(lt, { children: t.jsx(qoe, {}) }) }) }), t.jsx(at, { path: "/reports/quotations", element: t.jsx(ot, { requiredPermission: Ye.DASHBOARD.READ, children: t.jsx(lt, { children: t.jsx(Hoe, {}) }) }) }), t.jsx(at, { path: "/business-settings/dashboard", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(qie, {}) }) }) }), t.jsx(at, { path: "/profile", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(Ioe, {}) }) }) }), t.jsx(at, { path: "/tasks", element: t.jsx(ot, { requiredPermission: Ye.ACTIVITY.READ, children: t.jsx(lt, { children: t.jsx(BP, {}) }) }) }), t.jsx(at, { path: "/trash", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(yoe, {}) }) }) }), t.jsx(at, { path: "/trash/users", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(voe, {}) }) }) }), t.jsx(at, { path: "/trash/leads", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(boe, {}) }) }) }), t.jsx(at, { path: "/trash/roles", element: t.jsx(ot, { children: t.jsx(lt, { children: t.jsx(woe, {}) }) }) }), t.jsx(at, { path: "/logs", element: t.jsx(ot, { requiredPermission: Ye.ACTIVITY.READ, children: t.jsx(lt, { children: t.jsx(lle, {}) }) }) }), t.jsx(at, { path: "*", element: t.jsx(R0, { to: "/", replace: !0 }) })] }) : t.jsx(OF, {}), r && t.jsx(Woe, { isOpen: n, onLogin: g, title: o, message: u }), t.jsx(eh, { position: cn.POSITION, autoClose: cn.AUTO_CLOSE, hideProgressBar: cn.HIDE_PROGRESS_BAR, newestOnTop: !0, closeOnClick: cn.CLOSE_ON_CLICK, pauseOnHover: cn.PAUSE_ON_HOVER, draggable: cn.DRAGGABLE, theme: "colored" })] }) } function dle() { return t.jsx(Voe, { children: t.jsx(J$, { children: t.jsx(R$, { children: t.jsx(L$, { children: t.jsx(p9, { children: t.jsx(k9, { children: t.jsx(L9, { children: t.jsx(R9, { children: t.jsx(cle, {}) }) }) }) }) }) }) }) }) } const Lt = e => typeof e == "string", Du = () => { let e, r; const a = new Promise((s, n) => { e = s, r = n }); return a.resolve = e, a.reject = r, a }, qP = e => e == null ? "" : "" + e, ule = (e, r, a) => { e.forEach(s => { r[s] && (a[s] = r[s]) }) }, mle = /###/g, HP = e => e && e.indexOf("###") > -1 ? e.replace(mle, ".") : e, WP = e => !e || Lt(e), Wu = (e, r, a) => { const s = Lt(r) ? r.split(".") : r; let n = 0; for (; n < s.length - 1;) { if (WP(e)) return {}; const i = HP(s[n]); !e[i] && a && (e[i] = new a), Object.prototype.hasOwnProperty.call(e, i) ? e = e[i] : e = {}, ++n } return WP(e) ? {} : { obj: e, k: HP(s[n]) } }, VP = (e, r, a) => { const { obj: s, k: n } = Wu(e, r, Object); if (s !== void 0 || r.length === 1) { s[n] = a; return } let i = r[r.length - 1], o = r.slice(0, r.length - 1), c = Wu(e, o, Object); for (; c.obj === void 0 && o.length;)i = `${o[o.length - 1]}.${i}`, o = o.slice(0, o.length - 1), c = Wu(e, o, Object), c?.obj && typeof c.obj[`${c.k}.${i}`] < "u" && (c.obj = void 0); c.obj[`${c.k}.${i}`] = a }, gle = (e, r, a, s) => { const { obj: n, k: i } = Wu(e, r, Object); n[i] = n[i] || [], n[i].push(a) }, lf = (e, r) => { const { obj: a, k: s } = Wu(e, r); if (a && Object.prototype.hasOwnProperty.call(a, s)) return a[s] }, hle = (e, r, a) => { const s = lf(e, a); return s !== void 0 ? s : lf(r, a) }, nL = (e, r, a) => { for (const s in r) s !== "__proto__" && s !== "constructor" && (s in e ? Lt(e[s]) || e[s] instanceof String || Lt(r[s]) || r[s] instanceof String ? a && (e[s] = r[s]) : nL(e[s], r[s], a) : e[s] = r[s]); return e }, Dc = e => e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&"); var fle = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;", "/": "&#x2F;" }; const xle = e => Lt(e) ? e.replace(/[&<>"'\/]/g, r => fle[r]) : e; class ple { constructor(r) { this.capacity = r, this.regExpMap = new Map, this.regExpQueue = [] } getRegExp(r) { const a = this.regExpMap.get(r); if (a !== void 0) return a; const s = new RegExp(r); return this.regExpQueue.length === this.capacity && this.regExpMap.delete(this.regExpQueue.shift()), this.regExpMap.set(r, s), this.regExpQueue.push(r), s } } const yle = [" ", ",", "?", "!", ";"], vle = new ple(20), ble = (e, r, a) => { r = r || "", a = a || ""; const s = yle.filter(o => r.indexOf(o) < 0 && a.indexOf(o) < 0); if (s.length === 0) return !0; const n = vle.getRegExp(`(${s.map(o => o === "?" ? "\\?" : o).join("|")})`); let i = !n.test(e); if (!i) { const o = e.indexOf(a); o > 0 && !n.test(e.substring(0, o)) && (i = !0) } return i }, $w = (e, r, a = ".") => { if (!e) return; if (e[r]) return Object.prototype.hasOwnProperty.call(e, r) ? e[r] : void 0; const s = r.split(a); let n = e; for (let i = 0; i < s.length;) { if (!n || typeof n != "object") return; let o, c = ""; for (let u = i; u < s.length; ++u)if (u !== i && (c += a), c += s[u], o = n[c], o !== void 0) { if (["string", "number", "boolean"].indexOf(typeof o) > -1 && u < s.length - 1) continue; i += u - i + 1; break } n = o } return n }, ym = e => e?.replace("_", "-"), wle = { type: "logger", log(e) { this.output("log", e) }, warn(e) { this.output("warn", e) }, error(e) { this.output("error", e) }, output(e, r) { console?.[e]?.apply?.(console, r) } }; class cf { constructor(r, a = {}) { this.init(r, a) } init(r, a = {}) { this.prefix = a.prefix || "i18next:", this.logger = r || wle, this.options = a, this.debug = a.debug } log(...r) { return this.forward(r, "log", "", !0) } warn(...r) { return this.forward(r, "warn", "", !0) } error(...r) { return this.forward(r, "error", "") } deprecate(...r) { return this.forward(r, "warn", "WARNING DEPRECATED: ", !0) } forward(r, a, s, n) { return n && !this.debug ? null : (Lt(r[0]) && (r[0] = `${s}${this.prefix} ${r[0]}`), this.logger[a](r)) } create(r) { return new cf(this.logger, { prefix: `${this.prefix}:${r}:`, ...this.options }) } clone(r) { return r = r || this.options, r.prefix = r.prefix || this.prefix, new cf(this.logger, r) } } var ai = new cf; class wx { constructor() { this.observers = {} } on(r, a) { return r.split(" ").forEach(s => { this.observers[s] || (this.observers[s] = new Map); const n = this.observers[s].get(a) || 0; this.observers[s].set(a, n + 1) }), this } off(r, a) { if (this.observers[r]) { if (!a) { delete this.observers[r]; return } this.observers[r].delete(a) } } emit(r, ...a) { this.observers[r] && Array.from(this.observers[r].entries()).forEach(([n, i]) => { for (let o = 0; o < i; o++)n(...a) }), this.observers["*"] && Array.from(this.observers["*"].entries()).forEach(([n, i]) => { for (let o = 0; o < i; o++)n.apply(n, [r, ...a]) }) } } class GP extends wx { constructor(r, a = { ns: ["translation"], defaultNS: "translation" }) { super(), this.data = r || {}, this.options = a, this.options.keySeparator === void 0 && (this.options.keySeparator = "."), this.options.ignoreJSONStructure === void 0 && (this.options.ignoreJSONStructure = !0) } addNamespaces(r) { this.options.ns.indexOf(r) < 0 && this.options.ns.push(r) } removeNamespaces(r) { const a = this.options.ns.indexOf(r); a > -1 && this.options.ns.splice(a, 1) } getResource(r, a, s, n = {}) { const i = n.keySeparator !== void 0 ? n.keySeparator : this.options.keySeparator, o = n.ignoreJSONStructure !== void 0 ? n.ignoreJSONStructure : this.options.ignoreJSONStructure; let c; r.indexOf(".") > -1 ? c = r.split(".") : (c = [r, a], s && (Array.isArray(s) ? c.push(...s) : Lt(s) && i ? c.push(...s.split(i)) : c.push(s))); const u = lf(this.data, c); return !u && !a && !s && r.indexOf(".") > -1 && (r = c[0], a = c[1], s = c.slice(2).join(".")), u || !o || !Lt(s) ? u : $w(this.data?.[r]?.[a], s, i) } addResource(r, a, s, n, i = { silent: !1 }) { const o = i.keySeparator !== void 0 ? i.keySeparator : this.options.keySeparator; let c = [r, a]; s && (c = c.concat(o ? s.split(o) : s)), r.indexOf(".") > -1 && (c = r.split("."), n = a, a = c[1]), this.addNamespaces(a), VP(this.data, c, n), i.silent || this.emit("added", r, a, s, n) } addResources(r, a, s, n = { silent: !1 }) { for (const i in s) (Lt(s[i]) || Array.isArray(s[i])) && this.addResource(r, a, i, s[i], { silent: !0 }); n.silent || this.emit("added", r, a, s) } addResourceBundle(r, a, s, n, i, o = { silent: !1, skipCopy: !1 }) { let c = [r, a]; r.indexOf(".") > -1 && (c = r.split("."), n = s, s = a, a = c[1]), this.addNamespaces(a); let u = lf(this.data, c) || {}; o.skipCopy || (s = JSON.parse(JSON.stringify(s))), n ? nL(u, s, i) : u = { ...u, ...s }, VP(this.data, c, u), o.silent || this.emit("added", r, a, s) } removeResourceBundle(r, a) { this.hasResourceBundle(r, a) && delete this.data[r][a], this.removeNamespaces(a), this.emit("removed", r, a) } hasResourceBundle(r, a) { return this.getResource(r, a) !== void 0 } getResourceBundle(r, a) { return a || (a = this.options.defaultNS), this.getResource(r, a) } getDataByLanguage(r) { return this.data[r] } hasLanguageSomeTranslations(r) { const a = this.getDataByLanguage(r); return !!(a && Object.keys(a) || []).find(n => a[n] && Object.keys(a[n]).length > 0) } toJSON() { return this.data } } var iL = { processors: {}, addPostProcessor(e) { this.processors[e.name] = e }, handle(e, r, a, s, n) { return e.forEach(i => { r = this.processors[i]?.process(r, a, s, n) ?? r }), r } }; const oL = Symbol("i18next/PATH_KEY"); function jle() { const e = [], r = Object.create(null); let a; return r.get = (s, n) => (a?.revoke?.(), n === oL ? e : (e.push(n), a = Proxy.revocable(s, r), a.proxy)), Proxy.revocable(Object.create(null), r).proxy } function Uw(e, r) { const { [oL]: a } = e(jle()); return a.join(r?.keySeparator ?? ".") } const KP = {}, cb = e => !Lt(e) && typeof e != "boolean" && typeof e != "number"; class df extends wx { constructor(r, a = {}) { super(), ule(["resourceStore", "languageUtils", "pluralResolver", "interpolator", "backendConnector", "i18nFormat", "utils"], r, this), this.options = a, this.options.keySeparator === void 0 && (this.options.keySeparator = "."), this.logger = ai.create("translator") } changeLanguage(r) { r && (this.language = r) } exists(r, a = { interpolation: {} }) { const s = { ...a }; if (r == null) return !1; const n = this.resolve(r, s); if (n?.res === void 0) return !1; const i = cb(n.res); return !(s.returnObjects === !1 && i) } extractFromKey(r, a) { let s = a.nsSeparator !== void 0 ? a.nsSeparator : this.options.nsSeparator; s === void 0 && (s = ":"); const n = a.keySeparator !== void 0 ? a.keySeparator : this.options.keySeparator; let i = a.ns || this.options.defaultNS || []; const o = s && r.indexOf(s) > -1, c = !this.options.userDefinedKeySeparator && !a.keySeparator && !this.options.userDefinedNsSeparator && !a.nsSeparator && !ble(r, s, n); if (o && !c) { const u = r.match(this.interpolator.nestingRegexp); if (u && u.length > 0) return { key: r, namespaces: Lt(i) ? [i] : i }; const m = r.split(s); (s !== n || s === n && this.options.ns.indexOf(m[0]) > -1) && (i = m.shift()), r = m.join(n) } return { key: r, namespaces: Lt(i) ? [i] : i } } translate(r, a, s) { let n = typeof a == "object" ? { ...a } : a; if (typeof n != "object" && this.options.overloadTranslationOptionHandler && (n = this.options.overloadTranslationOptionHandler(arguments)), typeof n == "object" && (n = { ...n }), n || (n = {}), r == null) return ""; typeof r == "function" && (r = Uw(r, { ...this.options, ...n })), Array.isArray(r) || (r = [String(r)]); const i = n.returnDetails !== void 0 ? n.returnDetails : this.options.returnDetails, o = n.keySeparator !== void 0 ? n.keySeparator : this.options.keySeparator, { key: c, namespaces: u } = this.extractFromKey(r[r.length - 1], n), m = u[u.length - 1]; let g = n.nsSeparator !== void 0 ? n.nsSeparator : this.options.nsSeparator; g === void 0 && (g = ":"); const f = n.lng || this.language, y = n.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode; if (f?.toLowerCase() === "cimode") return y ? i ? { res: `${m}${g}${c}`, usedKey: c, exactUsedKey: c, usedLng: f, usedNS: m, usedParams: this.getUsedParamsDetails(n) } : `${m}${g}${c}` : i ? { res: c, usedKey: c, exactUsedKey: c, usedLng: f, usedNS: m, usedParams: this.getUsedParamsDetails(n) } : c; const p = this.resolve(r, n); let b = p?.res; const j = p?.usedKey || c, v = p?.exactUsedKey || c, S = ["[object Number]", "[object Function]", "[object RegExp]"], k = n.joinArrays !== void 0 ? n.joinArrays : this.options.joinArrays, E = !this.i18nFormat || this.i18nFormat.handleAsObject, C = n.count !== void 0 && !Lt(n.count), N = df.hasDefaultValue(n), A = C ? this.pluralResolver.getSuffix(f, n.count, n) : "", D = n.ordinal && C ? this.pluralResolver.getSuffix(f, n.count, { ordinal: !1 }) : "", I = C && !n.ordinal && n.count === 0, $ = I && n[`defaultValue${this.options.pluralSeparator}zero`] || n[`defaultValue${A}`] || n[`defaultValue${D}`] || n.defaultValue; let B = b; E && !b && N && (B = $); const W = cb(B), M = Object.prototype.toString.apply(B); if (E && B && W && S.indexOf(M) < 0 && !(Lt(k) && Array.isArray(B))) { if (!n.returnObjects && !this.options.returnObjects) { this.options.returnedObjectHandler || this.logger.warn("accessing an object - but returnObjects options is not enabled!"); const q = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(j, B, { ...n, ns: u }) : `key '${c} (${this.language})' returned an object instead of string.`; return i ? (p.res = q, p.usedParams = this.getUsedParamsDetails(n), p) : q } if (o) { const q = Array.isArray(B), V = q ? [] : {}, X = q ? v : j; for (const se in B) if (Object.prototype.hasOwnProperty.call(B, se)) { const le = `${X}${o}${se}`; N && !b ? V[se] = this.translate(le, { ...n, defaultValue: cb($) ? $[se] : void 0, joinArrays: !1, ns: u }) : V[se] = this.translate(le, { ...n, joinArrays: !1, ns: u }), V[se] === le && (V[se] = B[se]) } b = V } } else if (E && Lt(k) && Array.isArray(b)) b = b.join(k), b && (b = this.extendTranslation(b, r, n, s)); else { let q = !1, V = !1; !this.isValidLookup(b) && N && (q = !0, b = $), this.isValidLookup(b) || (V = !0, b = c); const se = (n.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey) && V ? void 0 : b, le = N && $ !== b && this.options.updateMissing; if (V || q || le) { if (this.logger.log(le ? "updateKey" : "missingKey", f, m, c, le ? $ : b), o) { const T = this.resolve(c, { ...n, keySeparator: !1 }); T && T.res && this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.") } let ee = []; const L = this.languageUtils.getFallbackCodes(this.options.fallbackLng, n.lng || this.language); if (this.options.saveMissingTo === "fallback" && L && L[0]) for (let T = 0; T < L.length; T++)ee.push(L[T]); else this.options.saveMissingTo === "all" ? ee = this.languageUtils.toResolveHierarchy(n.lng || this.language) : ee.push(n.lng || this.language); const z = (T, _, H) => { const U = N && H !== b ? H : se; this.options.missingKeyHandler ? this.options.missingKeyHandler(T, m, _, U, le, n) : this.backendConnector?.saveMissing && this.backendConnector.saveMissing(T, m, _, U, le, n), this.emit("missingKey", T, m, _, b) }; this.options.saveMissing && (this.options.saveMissingPlurals && C ? ee.forEach(T => { const _ = this.pluralResolver.getSuffixes(T, n); I && n[`defaultValue${this.options.pluralSeparator}zero`] && _.indexOf(`${this.options.pluralSeparator}zero`) < 0 && _.push(`${this.options.pluralSeparator}zero`), _.forEach(H => { z([T], c + H, n[`defaultValue${H}`] || $) }) }) : z(ee, c, $)) } b = this.extendTranslation(b, r, n, p, s), V && b === c && this.options.appendNamespaceToMissingKey && (b = `${m}${g}${c}`), (V || q) && this.options.parseMissingKeyHandler && (b = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? `${m}${g}${c}` : c, q ? b : void 0, n)) } return i ? (p.res = b, p.usedParams = this.getUsedParamsDetails(n), p) : b } extendTranslation(r, a, s, n, i) { if (this.i18nFormat?.parse) r = this.i18nFormat.parse(r, { ...this.options.interpolation.defaultVariables, ...s }, s.lng || this.language || n.usedLng, n.usedNS, n.usedKey, { resolved: n }); else if (!s.skipInterpolation) { s.interpolation && this.interpolator.init({ ...s, interpolation: { ...this.options.interpolation, ...s.interpolation } }); const u = Lt(r) && (s?.interpolation?.skipOnVariables !== void 0 ? s.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables); let m; if (u) { const f = r.match(this.interpolator.nestingRegexp); m = f && f.length } let g = s.replace && !Lt(s.replace) ? s.replace : s; if (this.options.interpolation.defaultVariables && (g = { ...this.options.interpolation.defaultVariables, ...g }), r = this.interpolator.interpolate(r, g, s.lng || this.language || n.usedLng, s), u) { const f = r.match(this.interpolator.nestingRegexp), y = f && f.length; m < y && (s.nest = !1) } !s.lng && n && n.res && (s.lng = this.language || n.usedLng), s.nest !== !1 && (r = this.interpolator.nest(r, (...f) => i?.[0] === f[0] && !s.context ? (this.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${a[0]}`), null) : this.translate(...f, a), s)), s.interpolation && this.interpolator.reset() } const o = s.postProcess || this.options.postProcess, c = Lt(o) ? [o] : o; return r != null && c?.length && s.applyPostProcessor !== !1 && (r = iL.handle(c, r, a, this.options && this.options.postProcessPassResolved ? { i18nResolved: { ...n, usedParams: this.getUsedParamsDetails(s) }, ...s } : s, this)), r } resolve(r, a = {}) { let s, n, i, o, c; return Lt(r) && (r = [r]), r.forEach(u => { if (this.isValidLookup(s)) return; const m = this.extractFromKey(u, a), g = m.key; n = g; let f = m.namespaces; this.options.fallbackNS && (f = f.concat(this.options.fallbackNS)); const y = a.count !== void 0 && !Lt(a.count), p = y && !a.ordinal && a.count === 0, b = a.context !== void 0 && (Lt(a.context) || typeof a.context == "number") && a.context !== "", j = a.lngs ? a.lngs : this.languageUtils.toResolveHierarchy(a.lng || this.language, a.fallbackLng); f.forEach(v => { this.isValidLookup(s) || (c = v, !KP[`${j[0]}-${v}`] && this.utils?.hasLoadedNamespace && !this.utils?.hasLoadedNamespace(c) && (KP[`${j[0]}-${v}`] = !0, this.logger.warn(`key "${n}" for languages "${j.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`, "This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")), j.forEach(S => { if (this.isValidLookup(s)) return; o = S; const k = [g]; if (this.i18nFormat?.addLookupKeys) this.i18nFormat.addLookupKeys(k, g, S, v, a); else { let C; y && (C = this.pluralResolver.getSuffix(S, a.count, a)); const N = `${this.options.pluralSeparator}zero`, A = `${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`; if (y && (a.ordinal && C.indexOf(A) === 0 && k.push(g + C.replace(A, this.options.pluralSeparator)), k.push(g + C), p && k.push(g + N)), b) { const D = `${g}${this.options.contextSeparator || "_"}${a.context}`; k.push(D), y && (a.ordinal && C.indexOf(A) === 0 && k.push(D + C.replace(A, this.options.pluralSeparator)), k.push(D + C), p && k.push(D + N)) } } let E; for (; E = k.pop();)this.isValidLookup(s) || (i = E, s = this.getResource(S, v, E, a)) })) }) }), { res: s, usedKey: n, exactUsedKey: i, usedLng: o, usedNS: c } } isValidLookup(r) { return r !== void 0 && !(!this.options.returnNull && r === null) && !(!this.options.returnEmptyString && r === "") } getResource(r, a, s, n = {}) { return this.i18nFormat?.getResource ? this.i18nFormat.getResource(r, a, s, n) : this.resourceStore.getResource(r, a, s, n) } getUsedParamsDetails(r = {}) { const a = ["defaultValue", "ordinal", "context", "replace", "lng", "lngs", "fallbackLng", "ns", "keySeparator", "nsSeparator", "returnObjects", "returnDetails", "joinArrays", "postProcess", "interpolation"], s = r.replace && !Lt(r.replace); let n = s ? r.replace : r; if (s && typeof r.count < "u" && (n.count = r.count), this.options.interpolation.defaultVariables && (n = { ...this.options.interpolation.defaultVariables, ...n }), !s) { n = { ...n }; for (const i of a) delete n[i] } return n } static hasDefaultValue(r) { const a = "defaultValue"; for (const s in r) if (Object.prototype.hasOwnProperty.call(r, s) && a === s.substring(0, a.length) && r[s] !== void 0) return !0; return !1 } } class YP { constructor(r) { this.options = r, this.supportedLngs = this.options.supportedLngs || !1, this.logger = ai.create("languageUtils") } getScriptPartFromCode(r) { if (r = ym(r), !r || r.indexOf("-") < 0) return null; const a = r.split("-"); return a.length === 2 || (a.pop(), a[a.length - 1].toLowerCase() === "x") ? null : this.formatLanguageCode(a.join("-")) } getLanguagePartFromCode(r) { if (r = ym(r), !r || r.indexOf("-") < 0) return r; const a = r.split("-"); return this.formatLanguageCode(a[0]) } formatLanguageCode(r) { if (Lt(r) && r.indexOf("-") > -1) { let a; try { a = Intl.getCanonicalLocales(r)[0] } catch { } return a && this.options.lowerCaseLng && (a = a.toLowerCase()), a || (this.options.lowerCaseLng ? r.toLowerCase() : r) } return this.options.cleanCode || this.options.lowerCaseLng ? r.toLowerCase() : r } isSupportedCode(r) { return (this.options.load === "languageOnly" || this.options.nonExplicitSupportedLngs) && (r = this.getLanguagePartFromCode(r)), !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(r) > -1 } getBestMatchFromCodes(r) { if (!r) return null; let a; return r.forEach(s => { if (a) return; const n = this.formatLanguageCode(s); (!this.options.supportedLngs || this.isSupportedCode(n)) && (a = n) }), !a && this.options.supportedLngs && r.forEach(s => { if (a) return; const n = this.getScriptPartFromCode(s); if (this.isSupportedCode(n)) return a = n; const i = this.getLanguagePartFromCode(s); if (this.isSupportedCode(i)) return a = i; a = this.options.supportedLngs.find(o => { if (o === i) return o; if (!(o.indexOf("-") < 0 && i.indexOf("-") < 0) && (o.indexOf("-") > 0 && i.indexOf("-") < 0 && o.substring(0, o.indexOf("-")) === i || o.indexOf(i) === 0 && i.length > 1)) return o }) }), a || (a = this.getFallbackCodes(this.options.fallbackLng)[0]), a } getFallbackCodes(r, a) { if (!r) return []; if (typeof r == "function" && (r = r(a)), Lt(r) && (r = [r]), Array.isArray(r)) return r; if (!a) return r.default || []; let s = r[a]; return s || (s = r[this.getScriptPartFromCode(a)]), s || (s = r[this.formatLanguageCode(a)]), s || (s = r[this.getLanguagePartFromCode(a)]), s || (s = r.default), s || [] } toResolveHierarchy(r, a) { const s = this.getFallbackCodes((a === !1 ? [] : a) || this.options.fallbackLng || [], r), n = [], i = o => { o && (this.isSupportedCode(o) ? n.push(o) : this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`)) }; return Lt(r) && (r.indexOf("-") > -1 || r.indexOf("_") > -1) ? (this.options.load !== "languageOnly" && i(this.formatLanguageCode(r)), this.options.load !== "languageOnly" && this.options.load !== "currentOnly" && i(this.getScriptPartFromCode(r)), this.options.load !== "currentOnly" && i(this.getLanguagePartFromCode(r))) : Lt(r) && i(this.formatLanguageCode(r)), s.forEach(o => { n.indexOf(o) < 0 && i(this.formatLanguageCode(o)) }), n } } const QP = { zero: 0, one: 1, two: 2, few: 3, many: 4, other: 5 }, XP = { select: e => e === 1 ? "one" : "other", resolvedOptions: () => ({ pluralCategories: ["one", "other"] }) }; class Nle { constructor(r, a = {}) { this.languageUtils = r, this.options = a, this.logger = ai.create("pluralResolver"), this.pluralRulesCache = {} } addRule(r, a) { this.rules[r] = a } clearCache() { this.pluralRulesCache = {} } getRule(r, a = {}) { const s = ym(r === "dev" ? "en" : r), n = a.ordinal ? "ordinal" : "cardinal", i = JSON.stringify({ cleanedCode: s, type: n }); if (i in this.pluralRulesCache) return this.pluralRulesCache[i]; let o; try { o = new Intl.PluralRules(s, { type: n }) } catch { if (!Intl) return this.logger.error("No Intl support, please use an Intl polyfill!"), XP; if (!r.match(/-|_/)) return XP; const u = this.languageUtils.getLanguagePartFromCode(r); o = this.getRule(u, a) } return this.pluralRulesCache[i] = o, o } needsPlural(r, a = {}) { let s = this.getRule(r, a); return s || (s = this.getRule("dev", a)), s?.resolvedOptions().pluralCategories.length > 1 } getPluralFormsOfKey(r, a, s = {}) { return this.getSuffixes(r, s).map(n => `${a}${n}`) } getSuffixes(r, a = {}) { let s = this.getRule(r, a); return s || (s = this.getRule("dev", a)), s ? s.resolvedOptions().pluralCategories.sort((n, i) => QP[n] - QP[i]).map(n => `${this.options.prepend}${a.ordinal ? `ordinal${this.options.prepend}` : ""}${n}`) : [] } getSuffix(r, a, s = {}) { const n = this.getRule(r, s); return n ? `${this.options.prepend}${s.ordinal ? `ordinal${this.options.prepend}` : ""}${n.select(a)}` : (this.logger.warn(`no plural rule found for: ${r}`), this.getSuffix("dev", a, s)) } } const ZP = (e, r, a, s = ".", n = !0) => { let i = hle(e, r, a); return !i && n && Lt(a) && (i = $w(e, a, s), i === void 0 && (i = $w(r, a, s))), i }, db = e => e.replace(/\$/g, "$$$$"); class JP { constructor(r = {}) { this.logger = ai.create("interpolator"), this.options = r, this.format = r?.interpolation?.format || (a => a), this.init(r) } init(r = {}) { r.interpolation || (r.interpolation = { escapeValue: !0 }); const { escape: a, escapeValue: s, useRawValueToEscape: n, prefix: i, prefixEscaped: o, suffix: c, suffixEscaped: u, formatSeparator: m, unescapeSuffix: g, unescapePrefix: f, nestingPrefix: y, nestingPrefixEscaped: p, nestingSuffix: b, nestingSuffixEscaped: j, nestingOptionsSeparator: v, maxReplaces: S, alwaysFormat: k } = r.interpolation; this.escape = a !== void 0 ? a : xle, this.escapeValue = s !== void 0 ? s : !0, this.useRawValueToEscape = n !== void 0 ? n : !1, this.prefix = i ? Dc(i) : o || "{{", this.suffix = c ? Dc(c) : u || "}}", this.formatSeparator = m || ",", this.unescapePrefix = g ? "" : f || "-", this.unescapeSuffix = this.unescapePrefix ? "" : g || "", this.nestingPrefix = y ? Dc(y) : p || Dc("$t("), this.nestingSuffix = b ? Dc(b) : j || Dc(")"), this.nestingOptionsSeparator = v || ",", this.maxReplaces = S || 1e3, this.alwaysFormat = k !== void 0 ? k : !1, this.resetRegExp() } reset() { this.options && this.init(this.options) } resetRegExp() { const r = (a, s) => a?.source === s ? (a.lastIndex = 0, a) : new RegExp(s, "g"); this.regexp = r(this.regexp, `${this.prefix}(.+?)${this.suffix}`), this.regexpUnescape = r(this.regexpUnescape, `${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`), this.nestingRegexp = r(this.nestingRegexp, `${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`) } interpolate(r, a, s, n) { let i, o, c; const u = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {}, m = p => { if (p.indexOf(this.formatSeparator) < 0) { const S = ZP(a, u, p, this.options.keySeparator, this.options.ignoreJSONStructure); return this.alwaysFormat ? this.format(S, void 0, s, { ...n, ...a, interpolationkey: p }) : S } const b = p.split(this.formatSeparator), j = b.shift().trim(), v = b.join(this.formatSeparator).trim(); return this.format(ZP(a, u, j, this.options.keySeparator, this.options.ignoreJSONStructure), v, s, { ...n, ...a, interpolationkey: j }) }; this.resetRegExp(); const g = n?.missingInterpolationHandler || this.options.missingInterpolationHandler, f = n?.interpolation?.skipOnVariables !== void 0 ? n.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables; return [{ regex: this.regexpUnescape, safeValue: p => db(p) }, { regex: this.regexp, safeValue: p => this.escapeValue ? db(this.escape(p)) : db(p) }].forEach(p => { for (c = 0; i = p.regex.exec(r);) { const b = i[1].trim(); if (o = m(b), o === void 0) if (typeof g == "function") { const v = g(r, i, n); o = Lt(v) ? v : "" } else if (n && Object.prototype.hasOwnProperty.call(n, b)) o = ""; else if (f) { o = i[0]; continue } else this.logger.warn(`missed to pass in variable ${b} for interpolating ${r}`), o = ""; else !Lt(o) && !this.useRawValueToEscape && (o = qP(o)); const j = p.safeValue(o); if (r = r.replace(i[0], j), f ? (p.regex.lastIndex += o.length, p.regex.lastIndex -= i[0].length) : p.regex.lastIndex = 0, c++, c >= this.maxReplaces) break } }), r } nest(r, a, s = {}) { let n, i, o; const c = (u, m) => { const g = this.nestingOptionsSeparator; if (u.indexOf(g) < 0) return u; const f = u.split(new RegExp(`${g}[ ]*{`)); let y = `{${f[1]}`; u = f[0], y = this.interpolate(y, o); const p = y.match(/'/g), b = y.match(/"/g); ((p?.length ?? 0) % 2 === 0 && !b || b.length % 2 !== 0) && (y = y.replace(/'/g, '"')); try { o = JSON.parse(y), m && (o = { ...m, ...o }) } catch (j) { return this.logger.warn(`failed parsing options string in nesting for key ${u}`, j), `${u}${g}${y}` } return o.defaultValue && o.defaultValue.indexOf(this.prefix) > -1 && delete o.defaultValue, u }; for (; n = this.nestingRegexp.exec(r);) { let u = []; o = { ...s }, o = o.replace && !Lt(o.replace) ? o.replace : o, o.applyPostProcessor = !1, delete o.defaultValue; const m = /{.*}/.test(n[1]) ? n[1].lastIndexOf("}") + 1 : n[1].indexOf(this.formatSeparator); if (m !== -1 && (u = n[1].slice(m).split(this.formatSeparator).map(g => g.trim()).filter(Boolean), n[1] = n[1].slice(0, m)), i = a(c.call(this, n[1].trim(), o), o), i && n[0] === r && !Lt(i)) return i; Lt(i) || (i = qP(i)), i || (this.logger.warn(`missed to resolve ${n[1]} for nesting ${r}`), i = ""), u.length && (i = u.reduce((g, f) => this.format(g, f, s.lng, { ...s, interpolationkey: n[1].trim() }), i.trim())), r = r.replace(n[0], i), this.regexp.lastIndex = 0 } return r } } const kle = e => { let r = e.toLowerCase().trim(); const a = {}; if (e.indexOf("(") > -1) { const s = e.split("("); r = s[0].toLowerCase().trim(); const n = s[1].substring(0, s[1].length - 1); r === "currency" && n.indexOf(":") < 0 ? a.currency || (a.currency = n.trim()) : r === "relativetime" && n.indexOf(":") < 0 ? a.range || (a.range = n.trim()) : n.split(";").forEach(o => { if (o) { const [c, ...u] = o.split(":"), m = u.join(":").trim().replace(/^'+|'+$/g, ""), g = c.trim(); a[g] || (a[g] = m), m === "false" && (a[g] = !1), m === "true" && (a[g] = !0), isNaN(m) || (a[g] = parseInt(m, 10)) } }) } return { formatName: r, formatOptions: a } }, eT = e => { const r = {}; return (a, s, n) => { let i = n; n && n.interpolationkey && n.formatParams && n.formatParams[n.interpolationkey] && n[n.interpolationkey] && (i = { ...i, [n.interpolationkey]: void 0 }); const o = s + JSON.stringify(i); let c = r[o]; return c || (c = e(ym(s), n), r[o] = c), c(a) } }, Sle = e => (r, a, s) => e(ym(a), s)(r); class Cle { constructor(r = {}) { this.logger = ai.create("formatter"), this.options = r, this.init(r) } init(r, a = { interpolation: {} }) { this.formatSeparator = a.interpolation.formatSeparator || ","; const s = a.cacheInBuiltFormats ? eT : Sle; this.formats = { number: s((n, i) => { const o = new Intl.NumberFormat(n, { ...i }); return c => o.format(c) }), currency: s((n, i) => { const o = new Intl.NumberFormat(n, { ...i, style: "currency" }); return c => o.format(c) }), datetime: s((n, i) => { const o = new Intl.DateTimeFormat(n, { ...i }); return c => o.format(c) }), relativetime: s((n, i) => { const o = new Intl.RelativeTimeFormat(n, { ...i }); return c => o.format(c, i.range || "day") }), list: s((n, i) => { const o = new Intl.ListFormat(n, { ...i }); return c => o.format(c) }) } } add(r, a) { this.formats[r.toLowerCase().trim()] = a } addCached(r, a) { this.formats[r.toLowerCase().trim()] = eT(a) } format(r, a, s, n = {}) { const i = a.split(this.formatSeparator); if (i.length > 1 && i[0].indexOf("(") > 1 && i[0].indexOf(")") < 0 && i.find(c => c.indexOf(")") > -1)) { const c = i.findIndex(u => u.indexOf(")") > -1); i[0] = [i[0], ...i.splice(1, c)].join(this.formatSeparator) } return i.reduce((c, u) => { const { formatName: m, formatOptions: g } = kle(u); if (this.formats[m]) { let f = c; try { const y = n?.formatParams?.[n.interpolationkey] || {}, p = y.locale || y.lng || n.locale || n.lng || s; f = this.formats[m](c, p, { ...g, ...n, ...y }) } catch (y) { this.logger.warn(y) } return f } else this.logger.warn(`there was no format function for ${m}`); return c }, r) } } const Ele = (e, r) => { e.pending[r] !== void 0 && (delete e.pending[r], e.pendingCount--) }; class Ale extends wx { constructor(r, a, s, n = {}) { super(), this.backend = r, this.store = a, this.services = s, this.languageUtils = s.languageUtils, this.options = n, this.logger = ai.create("backendConnector"), this.waitingReads = [], this.maxParallelReads = n.maxParallelReads || 10, this.readingCalls = 0, this.maxRetries = n.maxRetries >= 0 ? n.maxRetries : 5, this.retryTimeout = n.retryTimeout >= 1 ? n.retryTimeout : 350, this.state = {}, this.queue = [], this.backend?.init?.(s, n.backend, n) } queueLoad(r, a, s, n) { const i = {}, o = {}, c = {}, u = {}; return r.forEach(m => { let g = !0; a.forEach(f => { const y = `${m}|${f}`; !s.reload && this.store.hasResourceBundle(m, f) ? this.state[y] = 2 : this.state[y] < 0 || (this.state[y] === 1 ? o[y] === void 0 && (o[y] = !0) : (this.state[y] = 1, g = !1, o[y] === void 0 && (o[y] = !0), i[y] === void 0 && (i[y] = !0), u[f] === void 0 && (u[f] = !0))) }), g || (c[m] = !0) }), (Object.keys(i).length || Object.keys(o).length) && this.queue.push({ pending: o, pendingCount: Object.keys(o).length, loaded: {}, errors: [], callback: n }), { toLoad: Object.keys(i), pending: Object.keys(o), toLoadLanguages: Object.keys(c), toLoadNamespaces: Object.keys(u) } } loaded(r, a, s) { const n = r.split("|"), i = n[0], o = n[1]; a && this.emit("failedLoading", i, o, a), !a && s && this.store.addResourceBundle(i, o, s, void 0, void 0, { skipCopy: !0 }), this.state[r] = a ? -1 : 2, a && s && (this.state[r] = 0); const c = {}; this.queue.forEach(u => { gle(u.loaded, [i], o), Ele(u, r), a && u.errors.push(a), u.pendingCount === 0 && !u.done && (Object.keys(u.loaded).forEach(m => { c[m] || (c[m] = {}); const g = u.loaded[m]; g.length && g.forEach(f => { c[m][f] === void 0 && (c[m][f] = !0) }) }), u.done = !0, u.errors.length ? u.callback(u.errors) : u.callback()) }), this.emit("loaded", c), this.queue = this.queue.filter(u => !u.done) } read(r, a, s, n = 0, i = this.retryTimeout, o) { if (!r.length) return o(null, {}); if (this.readingCalls >= this.maxParallelReads) { this.waitingReads.push({ lng: r, ns: a, fcName: s, tried: n, wait: i, callback: o }); return } this.readingCalls++; const c = (m, g) => { if (this.readingCalls--, this.waitingReads.length > 0) { const f = this.waitingReads.shift(); this.read(f.lng, f.ns, f.fcName, f.tried, f.wait, f.callback) } if (m && g && n < this.maxRetries) { setTimeout(() => { this.read.call(this, r, a, s, n + 1, i * 2, o) }, i); return } o(m, g) }, u = this.backend[s].bind(this.backend); if (u.length === 2) { try { const m = u(r, a); m && typeof m.then == "function" ? m.then(g => c(null, g)).catch(c) : c(null, m) } catch (m) { c(m) } return } return u(r, a, c) } prepareLoading(r, a, s = {}, n) { if (!this.backend) return this.logger.warn("No backend was added via i18next.use. Will not load resources."), n && n(); Lt(r) && (r = this.languageUtils.toResolveHierarchy(r)), Lt(a) && (a = [a]); const i = this.queueLoad(r, a, s, n); if (!i.toLoad.length) return i.pending.length || n(), null; i.toLoad.forEach(o => { this.loadOne(o) }) } load(r, a, s) { this.prepareLoading(r, a, {}, s) } reload(r, a, s) { this.prepareLoading(r, a, { reload: !0 }, s) } loadOne(r, a = "") { const s = r.split("|"), n = s[0], i = s[1]; this.read(n, i, "read", void 0, void 0, (o, c) => { o && this.logger.warn(`${a}loading namespace ${i} for language ${n} failed`, o), !o && c && this.logger.log(`${a}loaded namespace ${i} for language ${n}`, c), this.loaded(r, o, c) }) } saveMissing(r, a, s, n, i, o = {}, c = () => { }) { if (this.services?.utils?.hasLoadedNamespace && !this.services?.utils?.hasLoadedNamespace(a)) { this.logger.warn(`did not save key "${s}" as the namespace "${a}" was not yet loaded`, "This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"); return } if (!(s == null || s === "")) { if (this.backend?.create) { const u = { ...o, isUpdate: i }, m = this.backend.create.bind(this.backend); if (m.length < 6) try { let g; m.length === 5 ? g = m(r, a, s, n, u) : g = m(r, a, s, n), g && typeof g.then == "function" ? g.then(f => c(null, f)).catch(c) : c(null, g) } catch (g) { c(g) } else m(r, a, s, n, c, u) } !r || !r[0] || this.store.addResource(r[0], a, s, n) } } } const tT = () => ({ debug: !1, initAsync: !0, ns: ["translation"], defaultNS: ["translation"], fallbackLng: ["dev"], fallbackNS: !1, supportedLngs: !1, nonExplicitSupportedLngs: !1, load: "all", preload: !1, simplifyPluralSuffix: !0, keySeparator: ".", nsSeparator: ":", pluralSeparator: "_", contextSeparator: "_", partialBundledLanguages: !1, saveMissing: !1, updateMissing: !1, saveMissingTo: "fallback", saveMissingPlurals: !0, missingKeyHandler: !1, missingInterpolationHandler: !1, postProcess: !1, postProcessPassResolved: !1, returnNull: !1, returnEmptyString: !0, returnObjects: !1, joinArrays: !1, returnedObjectHandler: !1, parseMissingKeyHandler: !1, appendNamespaceToMissingKey: !1, appendNamespaceToCIMode: !1, overloadTranslationOptionHandler: e => { let r = {}; if (typeof e[1] == "object" && (r = e[1]), Lt(e[1]) && (r.defaultValue = e[1]), Lt(e[2]) && (r.tDescription = e[2]), typeof e[2] == "object" || typeof e[3] == "object") { const a = e[3] || e[2]; Object.keys(a).forEach(s => { r[s] = a[s] }) } return r }, interpolation: { escapeValue: !0, format: e => e, prefix: "{{", suffix: "}}", formatSeparator: ",", unescapePrefix: "-", nestingPrefix: "$t(", nestingSuffix: ")", nestingOptionsSeparator: ",", maxReplaces: 1e3, skipOnVariables: !0 }, cacheInBuiltFormats: !0 }), rT = e => (Lt(e.ns) && (e.ns = [e.ns]), Lt(e.fallbackLng) && (e.fallbackLng = [e.fallbackLng]), Lt(e.fallbackNS) && (e.fallbackNS = [e.fallbackNS]), e.supportedLngs?.indexOf?.("cimode") < 0 && (e.supportedLngs = e.supportedLngs.concat(["cimode"])), typeof e.initImmediate == "boolean" && (e.initAsync = e.initImmediate), e), L0 = () => { }, Ple = e => { Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(a => { typeof e[a] == "function" && (e[a] = e[a].bind(e)) }) }; class Vu extends wx { constructor(r = {}, a) { if (super(), this.options = rT(r), this.services = {}, this.logger = ai, this.modules = { external: [] }, Ple(this), a && !this.isInitialized && !r.isClone) { if (!this.options.initAsync) return this.init(r, a), this; setTimeout(() => { this.init(r, a) }, 0) } } init(r = {}, a) { this.isInitializing = !0, typeof r == "function" && (a = r, r = {}), r.defaultNS == null && r.ns && (Lt(r.ns) ? r.defaultNS = r.ns : r.ns.indexOf("translation") < 0 && (r.defaultNS = r.ns[0])); const s = tT(); this.options = { ...s, ...this.options, ...rT(r) }, this.options.interpolation = { ...s.interpolation, ...this.options.interpolation }, r.keySeparator !== void 0 && (this.options.userDefinedKeySeparator = r.keySeparator), r.nsSeparator !== void 0 && (this.options.userDefinedNsSeparator = r.nsSeparator), typeof this.options.overloadTranslationOptionHandler != "function" && (this.options.overloadTranslationOptionHandler = s.overloadTranslationOptionHandler); const n = m => m ? typeof m == "function" ? new m : m : null; if (!this.options.isClone) { this.modules.logger ? ai.init(n(this.modules.logger), this.options) : ai.init(null, this.options); let m; this.modules.formatter ? m = this.modules.formatter : m = Cle; const g = new YP(this.options); this.store = new GP(this.options.resources, this.options); const f = this.services; f.logger = ai, f.resourceStore = this.store, f.languageUtils = g, f.pluralResolver = new Nle(g, { prepend: this.options.pluralSeparator, simplifyPluralSuffix: this.options.simplifyPluralSuffix }), this.options.interpolation.format && this.options.interpolation.format !== s.interpolation.format && this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"), m && (!this.options.interpolation.format || this.options.interpolation.format === s.interpolation.format) && (f.formatter = n(m), f.formatter.init && f.formatter.init(f, this.options), this.options.interpolation.format = f.formatter.format.bind(f.formatter)), f.interpolator = new JP(this.options), f.utils = { hasLoadedNamespace: this.hasLoadedNamespace.bind(this) }, f.backendConnector = new Ale(n(this.modules.backend), f.resourceStore, f, this.options), f.backendConnector.on("*", (p, ...b) => { this.emit(p, ...b) }), this.modules.languageDetector && (f.languageDetector = n(this.modules.languageDetector), f.languageDetector.init && f.languageDetector.init(f, this.options.detection, this.options)), this.modules.i18nFormat && (f.i18nFormat = n(this.modules.i18nFormat), f.i18nFormat.init && f.i18nFormat.init(this)), this.translator = new df(this.services, this.options), this.translator.on("*", (p, ...b) => { this.emit(p, ...b) }), this.modules.external.forEach(p => { p.init && p.init(this) }) } if (this.format = this.options.interpolation.format, a || (a = L0), this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) { const m = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng); m.length > 0 && m[0] !== "dev" && (this.options.lng = m[0]) } !this.services.languageDetector && !this.options.lng && this.logger.warn("init: no languageDetector is used and no lng is defined"), ["getResource", "hasResourceBundle", "getResourceBundle", "getDataByLanguage"].forEach(m => { this[m] = (...g) => this.store[m](...g) }), ["addResource", "addResources", "addResourceBundle", "removeResourceBundle"].forEach(m => { this[m] = (...g) => (this.store[m](...g), this) }); const c = Du(), u = () => { const m = (g, f) => { this.isInitializing = !1, this.isInitialized && !this.initializedStoreOnce && this.logger.warn("init: i18next is already initialized. You should call init just once!"), this.isInitialized = !0, this.options.isClone || this.logger.log("initialized", this.options), this.emit("initialized", this.options), c.resolve(f), a(g, f) }; if (this.languages && !this.isInitialized) return m(null, this.t.bind(this)); this.changeLanguage(this.options.lng, m) }; return this.options.resources || !this.options.initAsync ? u() : setTimeout(u, 0), c } loadResources(r, a = L0) { let s = a; const n = Lt(r) ? r : this.language; if (typeof r == "function" && (s = r), !this.options.resources || this.options.partialBundledLanguages) { if (n?.toLowerCase() === "cimode" && (!this.options.preload || this.options.preload.length === 0)) return s(); const i = [], o = c => { if (!c || c === "cimode") return; this.services.languageUtils.toResolveHierarchy(c).forEach(m => { m !== "cimode" && i.indexOf(m) < 0 && i.push(m) }) }; n ? o(n) : this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u => o(u)), this.options.preload?.forEach?.(c => o(c)), this.services.backendConnector.load(i, this.options.ns, c => { !c && !this.resolvedLanguage && this.language && this.setResolvedLanguage(this.language), s(c) }) } else s(null) } reloadResources(r, a, s) { const n = Du(); return typeof r == "function" && (s = r, r = void 0), typeof a == "function" && (s = a, a = void 0), r || (r = this.languages), a || (a = this.options.ns), s || (s = L0), this.services.backendConnector.reload(r, a, i => { n.resolve(), s(i) }), n } use(r) { if (!r) throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()"); if (!r.type) throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()"); return r.type === "backend" && (this.modules.backend = r), (r.type === "logger" || r.log && r.warn && r.error) && (this.modules.logger = r), r.type === "languageDetector" && (this.modules.languageDetector = r), r.type === "i18nFormat" && (this.modules.i18nFormat = r), r.type === "postProcessor" && iL.addPostProcessor(r), r.type === "formatter" && (this.modules.formatter = r), r.type === "3rdParty" && this.modules.external.push(r), this } setResolvedLanguage(r) { if (!(!r || !this.languages) && !(["cimode", "dev"].indexOf(r) > -1)) { for (let a = 0; a < this.languages.length; a++) { const s = this.languages[a]; if (!(["cimode", "dev"].indexOf(s) > -1) && this.store.hasLanguageSomeTranslations(s)) { this.resolvedLanguage = s; break } } !this.resolvedLanguage && this.languages.indexOf(r) < 0 && this.store.hasLanguageSomeTranslations(r) && (this.resolvedLanguage = r, this.languages.unshift(r)) } } changeLanguage(r, a) { this.isLanguageChangingTo = r; const s = Du(); this.emit("languageChanging", r); const n = c => { this.language = c, this.languages = this.services.languageUtils.toResolveHierarchy(c), this.resolvedLanguage = void 0, this.setResolvedLanguage(c) }, i = (c, u) => { u ? this.isLanguageChangingTo === r && (n(u), this.translator.changeLanguage(u), this.isLanguageChangingTo = void 0, this.emit("languageChanged", u), this.logger.log("languageChanged", u)) : this.isLanguageChangingTo = void 0, s.resolve((...m) => this.t(...m)), a && a(c, (...m) => this.t(...m)) }, o = c => { !r && !c && this.services.languageDetector && (c = []); const u = Lt(c) ? c : c && c[0], m = this.store.hasLanguageSomeTranslations(u) ? u : this.services.languageUtils.getBestMatchFromCodes(Lt(c) ? [c] : c); m && (this.language || n(m), this.translator.language || this.translator.changeLanguage(m), this.services.languageDetector?.cacheUserLanguage?.(m)), this.loadResources(m, g => { i(g, m) }) }; return !r && this.services.languageDetector && !this.services.languageDetector.async ? o(this.services.languageDetector.detect()) : !r && this.services.languageDetector && this.services.languageDetector.async ? this.services.languageDetector.detect.length === 0 ? this.services.languageDetector.detect().then(o) : this.services.languageDetector.detect(o) : o(r), s } getFixedT(r, a, s) { const n = (i, o, ...c) => { let u; typeof o != "object" ? u = this.options.overloadTranslationOptionHandler([i, o].concat(c)) : u = { ...o }, u.lng = u.lng || n.lng, u.lngs = u.lngs || n.lngs, u.ns = u.ns || n.ns, u.keyPrefix !== "" && (u.keyPrefix = u.keyPrefix || s || n.keyPrefix); const m = this.options.keySeparator || "."; let g; return u.keyPrefix && Array.isArray(i) ? g = i.map(f => (typeof f == "function" && (f = Uw(f, { ...this.options, ...o })), `${u.keyPrefix}${m}${f}`)) : (typeof i == "function" && (i = Uw(i, { ...this.options, ...o })), g = u.keyPrefix ? `${u.keyPrefix}${m}${i}` : i), this.t(g, u) }; return Lt(r) ? n.lng = r : n.lngs = r, n.ns = a, n.keyPrefix = s, n } t(...r) { return this.translator?.translate(...r) } exists(...r) { return this.translator?.exists(...r) } setDefaultNamespace(r) { this.options.defaultNS = r } hasLoadedNamespace(r, a = {}) { if (!this.isInitialized) return this.logger.warn("hasLoadedNamespace: i18next was not initialized", this.languages), !1; if (!this.languages || !this.languages.length) return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty", this.languages), !1; const s = a.lng || this.resolvedLanguage || this.languages[0], n = this.options ? this.options.fallbackLng : !1, i = this.languages[this.languages.length - 1]; if (s.toLowerCase() === "cimode") return !0; const o = (c, u) => { const m = this.services.backendConnector.state[`${c}|${u}`]; return m === -1 || m === 0 || m === 2 }; if (a.precheck) { const c = a.precheck(this, o); if (c !== void 0) return c } return !!(this.hasResourceBundle(s, r) || !this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages || o(s, r) && (!n || o(i, r))) } loadNamespaces(r, a) { const s = Du(); return this.options.ns ? (Lt(r) && (r = [r]), r.forEach(n => { this.options.ns.indexOf(n) < 0 && this.options.ns.push(n) }), this.loadResources(n => { s.resolve(), a && a(n) }), s) : (a && a(), Promise.resolve()) } loadLanguages(r, a) { const s = Du(); Lt(r) && (r = [r]); const n = this.options.preload || [], i = r.filter(o => n.indexOf(o) < 0 && this.services.languageUtils.isSupportedCode(o)); return i.length ? (this.options.preload = n.concat(i), this.loadResources(o => { s.resolve(), a && a(o) }), s) : (a && a(), Promise.resolve()) } dir(r) { if (r || (r = this.resolvedLanguage || (this.languages?.length > 0 ? this.languages[0] : this.language)), !r) return "rtl"; try { const n = new Intl.Locale(r); if (n && n.getTextInfo) { const i = n.getTextInfo(); if (i && i.direction) return i.direction } } catch { } const a = ["ar", "shu", "sqr", "ssh", "xaa", "yhd", "yud", "aao", "abh", "abv", "acm", "acq", "acw", "acx", "acy", "adf", "ads", "aeb", "aec", "afb", "ajp", "apc", "apd", "arb", "arq", "ars", "ary", "arz", "auz", "avl", "ayh", "ayl", "ayn", "ayp", "bbz", "pga", "he", "iw", "ps", "pbt", "pbu", "pst", "prp", "prd", "ug", "ur", "ydd", "yds", "yih", "ji", "yi", "hbo", "men", "xmn", "fa", "jpr", "peo", "pes", "prs", "dv", "sam", "ckb"], s = this.services?.languageUtils || new YP(tT()); return r.toLowerCase().indexOf("-latn") > 1 ? "ltr" : a.indexOf(s.getLanguagePartFromCode(r)) > -1 || r.toLowerCase().indexOf("-arab") > 1 ? "rtl" : "ltr" } static createInstance(r = {}, a) { const s = new Vu(r, a); return s.createInstance = Vu.createInstance, s } cloneInstance(r = {}, a = L0) { const s = r.forkResourceStore; s && delete r.forkResourceStore; const n = { ...this.options, ...r, isClone: !0 }, i = new Vu(n); if ((r.debug !== void 0 || r.prefix !== void 0) && (i.logger = i.logger.clone(r)), ["store", "services", "language"].forEach(c => { i[c] = this[c] }), i.services = { ...this.services }, i.services.utils = { hasLoadedNamespace: i.hasLoadedNamespace.bind(i) }, s) { const c = Object.keys(this.store.data).reduce((u, m) => (u[m] = { ...this.store.data[m] }, u[m] = Object.keys(u[m]).reduce((g, f) => (g[f] = { ...u[m][f] }, g), u[m]), u), {}); i.store = new GP(c, n), i.services.resourceStore = i.store } return r.interpolation && (i.services.interpolator = new JP(n)), i.translator = new df(i.services, n), i.translator.on("*", (c, ...u) => { i.emit(c, ...u) }), i.init(n, a), i.translator.options = n, i.translator.backendConnector.services.utils = { hasLoadedNamespace: i.hasLoadedNamespace.bind(i) }, i } toJSON() { return { options: this.options, store: this.store, language: this.language, languages: this.languages, resolvedLanguage: this.resolvedLanguage } } } const js = Vu.createInstance(); js.createInstance; js.dir; js.init; js.loadResources; js.reloadResources; js.use; js.changeLanguage; js.getFixedT; js.t; js.exists; js.setDefaultNamespace; js.hasLoadedNamespace; js.loadNamespaces; js.loadLanguages; const { slice: Tle, forEach: Dle } = []; function Ole(e) { return Dle.call(Tle.call(arguments, 1), r => { if (r) for (const a in r) e[a] === void 0 && (e[a] = r[a]) }), e } function Ile(e) { return typeof e != "string" ? !1 : [/<\s*script.*?>/i, /<\s*\/\s*script\s*>/i, /<\s*img.*?on\w+\s*=/i, /<\s*\w+\s*on\w+\s*=.*?>/i, /javascript\s*:/i, /vbscript\s*:/i, /expression\s*\(/i, /eval\s*\(/i, /alert\s*\(/i, /document\.cookie/i, /document\.write\s*\(/i, /window\.location/i, /innerHTML/i].some(a => a.test(e)) } const aT = /^[\u0009\u0020-\u007e\u0080-\u00ff]+$/, Lle = function (e, r) { const s = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : { path: "/" }, n = encodeURIComponent(r); let i = `${e}=${n}`; if (s.maxAge > 0) { const o = s.maxAge - 0; if (Number.isNaN(o)) throw new Error("maxAge should be a Number"); i += `; Max-Age=${Math.floor(o)}` } if (s.domain) { if (!aT.test(s.domain)) throw new TypeError("option domain is invalid"); i += `; Domain=${s.domain}` } if (s.path) { if (!aT.test(s.path)) throw new TypeError("option path is invalid"); i += `; Path=${s.path}` } if (s.expires) { if (typeof s.expires.toUTCString != "function") throw new TypeError("option expires is invalid"); i += `; Expires=${s.expires.toUTCString()}` } if (s.httpOnly && (i += "; HttpOnly"), s.secure && (i += "; Secure"), s.sameSite) switch (typeof s.sameSite == "string" ? s.sameSite.toLowerCase() : s.sameSite) { case !0: i += "; SameSite=Strict"; break; case "lax": i += "; SameSite=Lax"; break; case "strict": i += "; SameSite=Strict"; break; case "none": i += "; SameSite=None"; break; default: throw new TypeError("option sameSite is invalid") }return s.partitioned && (i += "; Partitioned"), i }, sT = { create(e, r, a, s) { let n = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : { path: "/", sameSite: "strict" }; a && (n.expires = new Date, n.expires.setTime(n.expires.getTime() + a * 60 * 1e3)), s && (n.domain = s), document.cookie = Lle(e, r, n) }, read(e) { const r = `${e}=`, a = document.cookie.split(";"); for (let s = 0; s < a.length; s++) { let n = a[s]; for (; n.charAt(0) === " ";)n = n.substring(1, n.length); if (n.indexOf(r) === 0) return n.substring(r.length, n.length) } return null }, remove(e, r) { this.create(e, "", -1, r) } }; var Rle = { name: "cookie", lookup(e) { let { lookupCookie: r } = e; if (r && typeof document < "u") return sT.read(r) || void 0 }, cacheUserLanguage(e, r) { let { lookupCookie: a, cookieMinutes: s, cookieDomain: n, cookieOptions: i } = r; a && typeof document < "u" && sT.create(a, e, s, n, i) } }, Mle = { name: "querystring", lookup(e) { let { lookupQuerystring: r } = e, a; if (typeof window < "u") { let { search: s } = window.location; !window.location.search && window.location.hash?.indexOf("?") > -1 && (s = window.location.hash.substring(window.location.hash.indexOf("?"))); const i = s.substring(1).split("&"); for (let o = 0; o < i.length; o++) { const c = i[o].indexOf("="); c > 0 && i[o].substring(0, c) === r && (a = i[o].substring(c + 1)) } } return a } }, _le = { name: "hash", lookup(e) { let { lookupHash: r, lookupFromHashIndex: a } = e, s; if (typeof window < "u") { const { hash: n } = window.location; if (n && n.length > 2) { const i = n.substring(1); if (r) { const o = i.split("&"); for (let c = 0; c < o.length; c++) { const u = o[c].indexOf("="); u > 0 && o[c].substring(0, u) === r && (s = o[c].substring(u + 1)) } } if (s) return s; if (!s && a > -1) { const o = n.match(/\/([a-zA-Z-]*)/g); return Array.isArray(o) ? o[typeof a == "number" ? a : 0]?.replace("/", "") : void 0 } } } return s } }; let Oc = null; const nT = () => { if (Oc !== null) return Oc; try { if (Oc = typeof window < "u" && window.localStorage !== null, !Oc) return !1; const e = "i18next.translate.boo"; window.localStorage.setItem(e, "foo"), window.localStorage.removeItem(e) } catch { Oc = !1 } return Oc }; var $le = { name: "localStorage", lookup(e) { let { lookupLocalStorage: r } = e; if (r && nT()) return window.localStorage.getItem(r) || void 0 }, cacheUserLanguage(e, r) { let { lookupLocalStorage: a } = r; a && nT() && window.localStorage.setItem(a, e) } }; let Ic = null; const iT = () => { if (Ic !== null) return Ic; try { if (Ic = typeof window < "u" && window.sessionStorage !== null, !Ic) return !1; const e = "i18next.translate.boo"; window.sessionStorage.setItem(e, "foo"), window.sessionStorage.removeItem(e) } catch { Ic = !1 } return Ic }; var Ule = { name: "sessionStorage", lookup(e) { let { lookupSessionStorage: r } = e; if (r && iT()) return window.sessionStorage.getItem(r) || void 0 }, cacheUserLanguage(e, r) { let { lookupSessionStorage: a } = r; a && iT() && window.sessionStorage.setItem(a, e) } }, Fle = { name: "navigator", lookup(e) { const r = []; if (typeof navigator < "u") { const { languages: a, userLanguage: s, language: n } = navigator; if (a) for (let i = 0; i < a.length; i++)r.push(a[i]); s && r.push(s), n && r.push(n) } return r.length > 0 ? r : void 0 } }, zle = { name: "htmlTag", lookup(e) { let { htmlTag: r } = e, a; const s = r || (typeof document < "u" ? document.documentElement : null); return s && typeof s.getAttribute == "function" && (a = s.getAttribute("lang")), a } }, Ble = { name: "path", lookup(e) { let { lookupFromPathIndex: r } = e; if (typeof window > "u") return; const a = window.location.pathname.match(/\/([a-zA-Z-]*)/g); return Array.isArray(a) ? a[typeof r == "number" ? r : 0]?.replace("/", "") : void 0 } }, qle = { name: "subdomain", lookup(e) { let { lookupFromSubdomainIndex: r } = e; const a = typeof r == "number" ? r + 1 : 1, s = typeof window < "u" && window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i); if (s) return s[a] } }; let lL = !1; try { document.cookie, lL = !0 } catch { } const cL = ["querystring", "cookie", "localStorage", "sessionStorage", "navigator", "htmlTag"]; lL || cL.splice(1, 1); const Hle = () => ({ order: cL, lookupQuerystring: "lng", lookupCookie: "i18next", lookupLocalStorage: "i18nextLng", lookupSessionStorage: "i18nextLng", caches: ["localStorage"], excludeCacheFor: ["cimode"], convertDetectedLanguage: e => e }); class dL { constructor(r) { let a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}; this.type = "languageDetector", this.detectors = {}, this.init(r, a) } init() { let r = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : { languageUtils: {} }, a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, s = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}; this.services = r, this.options = Ole(a, this.options || {}, Hle()), typeof this.options.convertDetectedLanguage == "string" && this.options.convertDetectedLanguage.indexOf("15897") > -1 && (this.options.convertDetectedLanguage = n => n.replace("-", "_")), this.options.lookupFromUrlIndex && (this.options.lookupFromPathIndex = this.options.lookupFromUrlIndex), this.i18nOptions = s, this.addDetector(Rle), this.addDetector(Mle), this.addDetector($le), this.addDetector(Ule), this.addDetector(Fle), this.addDetector(zle), this.addDetector(Ble), this.addDetector(qle), this.addDetector(_le) } addDetector(r) { return this.detectors[r.name] = r, this } detect() { let r = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.options.order, a = []; return r.forEach(s => { if (this.detectors[s]) { let n = this.detectors[s].lookup(this.options); n && typeof n == "string" && (n = [n]), n && (a = a.concat(n)) } }), a = a.filter(s => s != null && !Ile(s)).map(s => this.options.convertDetectedLanguage(s)), this.services && this.services.languageUtils && this.services.languageUtils.getBestMatchFromCodes ? a : a.length > 0 ? a[0] : null } cacheUserLanguage(r) { let a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this.options.caches; a && (this.options.excludeCacheFor && this.options.excludeCacheFor.indexOf(r) > -1 || a.forEach(s => { this.detectors[s] && this.detectors[s].cacheUserLanguage(r, this.options) })) } } dL.type = "languageDetector"; const Wle = { dashboard: "Dashboard", users: "Users", leads: "Leads", roles: "Roles", income: "Income" }, Vle = { search: "Search", notifications: "Notifications", theme: "Theme", language: "Language", logout: "Logout", active: "Active", noRole: "No Role", welcome: "Welcome to WeConnect", description: "Your comprehensive lead management system", loading: "Loading...", error: "Error", success: "Success", cancel: "Cancel", save: "Save", edit: "Edit", delete: "Delete", create: "Create", update: "Update", close: "Close", yes: "Yes", no: "No", confirm: "Confirm", back: "Back", next: "Next", previous: "Previous", submit: "Submit", reset: "Reset", filter: "Filter", showFilters: "Show Filters", hide: "Hide", show: "Show", sort: "Sort", refresh: "Refresh", export: "Export", import: "Import", download: "Download", upload: "Upload", view: "View", details: "Details", status: "Status", actions: "Actions", select: "Select", all: "All", none: "None", total: "Total", of: "of", items: "items", page: "Page", perPage: "per page", showing: "Showing", to: "to", results: "results", noData: "No data available", noResults: "No results found", empty: "Empty", required: "Required", optional: "Optional", invalid: "Invalid", valid: "Valid", enabled: "Enabled", disabled: "Disabled", visible: "Visible", hidden: "Hidden", public: "Public", private: "Private", archived: "Archived", draft: "Draft", published: "Published", pending: "Pending", approved: "Approved", rejected: "Rejected", completed: "Completed", inProgress: "In Progress", cancelled: "Cancelled", suspended: "Suspended", information: "Information" }, Gle = { greeting: "Hi, {{name}}", profile: "User Profile", profileDescription: "Manage your account settings and preferences", personalInformation: "Personal Information", rolesAndPermissions: "Roles & Permissions", accountSettings: "Account Settings", themeDescription: "Choose your preferred theme", languageDescription: "Select your preferred language", notificationsDescription: "Manage your notification preferences", settings: "Settings", help: "Help & Support", fullName: "Full Name", firstName: "First Name", lastName: "Last Name", email: "Email", phone: "Phone", role: "Role", permissions: "Permissions", lastLogin: "Last Login", createdAt: "Created At", changePassword: "Change Password", currentPassword: "Current Password", newPassword: "New Password", confirmPassword: "Confirm Password", uploadPicture: "Upload profile picture", logoutConfirmation: "Are you sure you want to logout?", updatedAt: "Updated At", isActive: "Is Active", password: "Password", personalInfo: "Personal Information", security: "Security", preferences: "Preferences", avatar: "Avatar", bio: "Biography", location: "Location", timezone: "Timezone", language: "Language", theme: "Theme", notifications: "Notifications", emailNotifications: "Email Notifications", pushNotifications: "Push Notifications", smsNotifications: "SMS Notifications" }, Kle = { collapse: "Collapse Sidebar", expand: "Expand Sidebar", menu: "Menu" }, Yle = { en: "English", hi: "Hindi", es: "Spanish", fr: "French", de: "German", ar: "Arabic", zh: "Chinese", ja: "Japanese", ko: "Korean", pt: "Portuguese" }, Qle = { save: "Save", cancel: "Cancel", edit: "Edit", delete: "Delete", create: "Create", update: "Update" }, Xle = { title: "Dashboard", welcome: "Welcome back!", overview: "Overview", stats: "Statistics", recentActivity: "Recent Activity", quickActions: "Quick Actions", totalUsers: "Total Users", totalLeads: "Total Leads", totalRoles: "Total Roles", totalIncome: "Total Income", activeUsers: "Active Users", newUsers: "New Users", newLeads: "New Leads", conversionRate: "Conversion Rate", growth: "Growth", thisMonth: "This Month", lastMonth: "Last Month", thisYear: "This Year", lastYear: "Last Year", today: "Today", yesterday: "Yesterday", week: "Week", month: "Month", quarter: "Quarter", year: "Year", chart: "Chart", table: "Table", list: "List", grid: "Grid", calendar: "Calendar", timeline: "Timeline", analytics: "Analytics", reports: "Reports", insights: "Insights", trends: "Trends", performance: "Performance", metrics: "Metrics", kpi: "KPI", goals: "Goals", targets: "Targets", achievements: "Achievements", milestones: "Milestones" }, Zle = { title: "Users", addUser: "Add User", editUser: "Edit User", deleteUser: "Delete User", userDetails: "User Details", userList: "User List", userManagement: "User Management", totalUsers: "Total Users", activeUsers: "Active Users", newUsers: "New Users", inactiveUsers: "Inactive Users", allUsers: "All Users", manageAndTrack: "Manage and track your user accounts", user: "User", role: "Role", lastLogin: "Last Login", created: "Created", noRoleAssigned: "No role assigned", inviteUser: "Invite User", bulkActions: "Bulk Actions", selectUsers: "Select Users", exportUsers: "Export Users", importUsers: "Import Users", filterUsers: "Filter Users", searchUsers: "Search Users", sortUsers: "Sort Users", userRoles: "User Roles", userPermissions: "User Permissions", userGroups: "User Groups", userTeams: "User Teams", userDepartments: "User Departments", userLocations: "User Locations", userStatus: "User Status", userType: "User Type", userLevel: "User Level", userCategory: "User Category", userTags: "User Tags", userNotes: "User Notes", userHistory: "User History", userLogs: "User Logs", userAudit: "User Audit", userReports: "User Reports", userAnalytics: "User Analytics" }, Jle = { title: "Leads", addLead: "Add Lead", editLead: "Edit Lead", deleteLead: "Delete Lead", leadDetails: "Lead Details", leadList: "Lead List", leadManagement: "Lead Management", totalLeads: "Total Leads", newLeads: "New Leads", qualified: "Qualified", closed: "Closed", searchLeads: "Search leads...", leadSource: "Lead Source", leadStatus: "Lead Status", leadStage: "Lead Stage", leadType: "Lead Type", leadPriority: "Lead Priority", leadScore: "Lead Score", leadOwner: "Lead Owner", leadAssigned: "Lead Assigned", leadContact: "Lead Contact", leadCompany: "Lead Company", leadIndustry: "Lead Industry", leadSize: "Lead Size", leadRevenue: "Lead Revenue", leadBudget: "Lead Budget", leadTimeline: "Lead Timeline", leadNotes: "Lead Notes", leadHistory: "Lead History", leadActivities: "Lead Activities", leadTasks: "Lead Tasks", leadEmails: "Lead Emails", leadCalls: "Lead Calls", leadMeetings: "Lead Meetings", leadDocuments: "Lead Documents", leadReports: "Lead Reports", leadAnalytics: "Lead Analytics", leadConversion: "Lead Conversion", leadPipeline: "Lead Pipeline", leadFunnel: "Lead Funnel", leadTracking: "Lead Tracking", leadScoring: "Lead Scoring", leadNurturing: "Lead Nurturing", leadQualification: "Lead Qualification", leadProspecting: "Lead Prospecting", leadGeneration: "Lead Generation", leadCapture: "Lead Capture", leadImport: "Lead Import", leadExport: "Lead Export", leadBulkActions: "Lead Bulk Actions", leadFilter: "Lead Filter", leadSearch: "Lead Search", leadSort: "Lead Sort", status: { new: "New", contacted: "Contacted", qualified: "Qualified", proposal: "Proposal", negotiation: "Negotiation", closed: "Closed", lost: "Lost", converted: "Converted" }, table: { lead: "Lead", company: "Company", status: "Status", assignedTo: "Assigned To", created: "Created", actions: "Actions" }, form: { createNewLead: "Create New Lead", editLead: "Edit Lead", viewLead: "View Lead", personalInformation: "Personal Information", firstName: "First Name", lastName: "Last Name", email: "Email", phone: "Phone", company: "Company", position: "Position", leadSource: "Lead Source", status: "Status", notes: "Notes", assignedTo: "Assigned To", tags: "Tags", enterFirstName: "Enter first name", enterLastName: "Enter last name", enterEmail: "Enter email", enterPhone: "Enter phone number", enterCompany: "Enter company name", enterPosition: "Enter position", enterNotes: "Enter any additional notes about this lead...", selectLeadSource: "Select lead source", selectStatus: "Select status", selectAssignedUser: "Select assigned user", selectTags: "Select tags", allStatuses: "All Statuses", itemsPerPage: "Items per page", unassigned: "Unassigned", manageAndTrack: "Manage and track your lead pipeline", allLeads: "All Leads" }, pagination: { previous: "Previous", next: "Next", showing: "Showing", to: "to", of: "of", results: "results" }, deleteConfirmation: "Are you sure you want to delete this lead? This action cannot be undone.", deleteSuccess: "Lead deleted successfully", deleteError: "Failed to delete lead", fetchError: "Failed to fetch leads", saveError: "Failed to save lead" }, ece = { changeFromLastMonth: "{{value}} from last month", changeLastMonth: "{{value}} last month", changeFromYesterday: "{{value}} from yesterday" }, tce = { title: "Roles", addRole: "Add Role", editRole: "Edit Role", deleteRole: "Delete Role", roleDetails: "Role Details", roleList: "Role List", roleManagement: "Role Management", permissions: "Permissions", totalRoles: "Total Roles", activeRoles: "Active Roles", totalPermissions: "Total Permissions", inactiveRoles: "Inactive Roles", searchRoles: "Search roles...", roleName: "Role Name", roleDescription: "Role Description", rolePermissions: "Role Permissions", roleUsers: "Role Users", roleHierarchy: "Role Hierarchy", roleLevel: "Role Level", roleType: "Role Type", roleCategory: "Role Category", roleStatus: "Role Status", roleAccess: "Role Access", roleScope: "Role Scope", roleInheritance: "Role Inheritance", roleDelegation: "Role Delegation", roleAssignment: "Role Assignment", roleRemoval: "Role Removal", roleTransfer: "Role Transfer", roleAudit: "Role Audit", roleHistory: "Role History", roleReports: "Role Reports", roleAnalytics: "Role Analytics", roleSettings: "Role Settings", roleConfiguration: "Role Configuration", roleTemplates: "Role Templates", rolePresets: "Role Presets", roleCustomization: "Role Customization" }, rce = { login: "Login", logout: "Logout", register: "Register", signup: "Sign Up", signin: "Sign In", forgotPassword: "Forgot Password", resetPassword: "Reset Password", changePassword: "Change Password", email: "Email", password: "Password", confirmPassword: "Confirm Password", rememberMe: "Remember Me", staySignedIn: "Stay Signed In", createAccount: "Create Account", alreadyHaveAccount: "Already have an account?", dontHaveAccount: "Don't have an account?", signInWith: "Sign in with", signUpWith: "Sign up with", or: "or", continue: "Continue", back: "Back", next: "Next", previous: "Previous", submit: "Submit", cancel: "Cancel", save: "Save", update: "Update", delete: "Delete", edit: "Edit", view: "View", close: "Close", yes: "Yes", no: "No", confirm: "Confirm", success: "Success", error: "Error", warning: "Warning", info: "Information", loading: "Loading...", processing: "Processing...", pleaseWait: "Please wait...", thankYou: "Thank you!", welcome: "Welcome!", goodbye: "Goodbye!", seeYouLater: "See you later!", takeCare: "Take care!", haveAGreatDay: "Have a great day!", goodMorning: "Good morning!", goodAfternoon: "Good afternoon!", goodEvening: "Good evening!", goodNight: "Good night!" }, ace = { confirmDelete: "Confirm Delete", confirmAction: "Confirm Action", areYouSure: "Are you sure?", thisActionCannotBeUndone: "This action cannot be undone.", deleteConfirmation: "Delete Confirmation", actionConfirmation: "Action Confirmation", warning: "Warning", information: "Information", success: "Success", error: "Error", close: "Close", cancel: "Cancel", confirm: "Confirm", yes: "Yes", no: "No", ok: "OK", retry: "Retry", ignore: "Ignore", abort: "Abort", continue: "Continue", back: "Back", next: "Next", previous: "Previous", finish: "Finish", skip: "Skip", reset: "Reset", apply: "Apply", save: "Save", update: "Update", create: "Create", edit: "Edit", delete: "Delete", remove: "Remove", add: "Add", insert: "Insert", append: "Append", prepend: "Prepend", replace: "Replace", move: "Move", copy: "Copy", paste: "Paste", cut: "Cut", duplicate: "Duplicate", clone: "Clone", archive: "Archive", unarchive: "Unarchive", hide: "Hide", show: "Show", expand: "Expand", collapse: "Collapse", minimize: "Minimize", maximize: "Maximize", restore: "Restore", refresh: "Refresh", reload: "Reload", restart: "Restart", stop: "Stop", pause: "Pause", play: "Play", resume: "Resume" }, sce = { required: "Required", optional: "Optional", invalid: "Invalid", valid: "Valid", error: "Error", success: "Success", warning: "Warning", info: "Information", help: "Help", hint: "Hint", tip: "Tip", note: "Note", example: "Example", sample: "Sample", template: "Template", default: "Default", custom: "Custom", standard: "Standard", advanced: "Advanced", basic: "Basic", simple: "Simple", complex: "Complex", easy: "Easy", hard: "Hard", difficult: "Difficult", challenging: "Challenging", straightforward: "Straightforward", complicated: "Complicated", intricate: "Intricate", elaborate: "Elaborate", detailed: "Detailed", comprehensive: "Comprehensive", thorough: "Thorough", complete: "Complete", partial: "Partial", incomplete: "Incomplete", finished: "Finished", unfinished: "Unfinished", done: "Done", undone: "Undone", ready: "Ready", notReady: "Not Ready", prepared: "Prepared", unprepared: "Unprepared", set: "Set", unset: "Unset", configured: "Configured", unconfigured: "Unconfigured", enabled: "Enabled", disabled: "Disabled", active: "Active", inactive: "Inactive", online: "Online", offline: "Offline", connected: "Connected", disconnected: "Disconnected", available: "Available", unavailable: "Unavailable", busy: "Busy", free: "Free", occupied: "Occupied", vacant: "Vacant", open: "Open", closed: "Closed", locked: "Locked", unlocked: "Unlocked", secure: "Secure", insecure: "Insecure", public: "Public", private: "Private", shared: "Shared", exclusive: "Exclusive", common: "Common", rare: "Rare", unique: "Unique", ordinary: "Ordinary", extraordinary: "Extraordinary", normal: "Normal", abnormal: "Abnormal", regular: "Regular", irregular: "Irregular", nonStandard: "Non-Standard", conventional: "Conventional", unconventional: "Unconventional", traditional: "Traditional", modern: "Modern", contemporary: "Contemporary", classic: "Classic", vintage: "Vintage", antique: "Antique", new: "New", old: "Old", fresh: "Fresh", stale: "Stale", recent: "Recent", ancient: "Ancient", current: "Current", previous: "Previous", next: "Next", last: "Last", first: "First", initial: "Initial", final: "Final", beginning: "Beginning", end: "End", start: "Start", stop: "Stop", begin: "Begin", finish: "Finish" }, nce = { navigation: Wle, common: Vle, user: Gle, sidebar: Kle, languages: Yle, actions: Qle, dashboard: Xle, users: Zle, leads: Jle, stats: ece, roles: tce, auth: rce, modals: ace, forms: sce }, ice = { dashboard: "", users: "", leads: "", roles: "", income: "" }, oce = { search: "", notifications: "", theme: "", language: "", logout: "", active: "", noRole: "  ", welcome: "WeConnect    ", description: "    ", loading: "   ...", error: "", success: "", cancel: " ", save: "", edit: " ", delete: "", create: "", update: " ", close: " ", yes: "", no: "", confirm: " ", back: "", next: "", previous: "", submit: " ", reset: " ", filter: "", showFilters: " ", hide: "", show: "", sort: " ", refresh: " ", export: " ", import: " ", download: " ", upload: " ", view: "", details: "", status: "", actions: "", select: "", all: "", none: " ", total: "", of: "", items: "", page: "", perPage: " ", showing: "  ", to: "", results: "", noData: "   ", noResults: "   ", empty: "", required: "", optional: "", invalid: "", valid: "", enabled: "", disabled: "", visible: "  ", hidden: " ", public: "", private: "", archived: "", draft: "", published: "", pending: "", approved: "", rejected: "", completed: "", inProgress: " ", cancelled: "", suspended: "", information: "" }, lce = { greeting: ", {{name}}", profile: " ", settings: "", help: "  ", fullName: " ", firstName: " ", lastName: " ", email: "", phone: "", role: "", permissions: "", lastLogin: " ", createdAt: " ", updatedAt: "  ", isActive: " ", password: "", confirmPassword: "   ", currentPassword: " ", newPassword: " ", changePassword: " ", personalInfo: " ", security: "", preferences: "", avatar: "", bio: "", location: "", timezone: " ", language: "", theme: "", notifications: "", emailNotifications: " ", pushNotifications: " ", smsNotifications: " " }, cce = { collapse: "  ", expand: "  ", menu: "" }, dce = { en: "", hi: "", es: "", fr: "", de: "", ar: "", zh: "", ja: "", ko: "", pt: "" }, uce = { save: "", cancel: " ", edit: " ", delete: "", create: "", update: " " }, mce = { title: "", welcome: "   !", overview: "", stats: "", recentActivity: "  ", quickActions: " ", totalUsers: " ", totalLeads: " ", totalRoles: " ", totalIncome: " ", activeUsers: " ", newUsers: " ", newLeads: " ", conversionRate: " ", growth: "", thisMonth: " ", lastMonth: " ", thisYear: " ", lastYear: " ", today: "", yesterday: "", week: "", month: "", quarter: "", year: "", chart: "", table: "", list: "", grid: "", calendar: "", timeline: "", analytics: "", reports: "", insights: "", trends: "", performance: "", metrics: "", kpi: "", goals: "", targets: "", achievements: "", milestones: "  " }, gce = { title: "", addUser: " ", editUser: "  ", deleteUser: " ", userDetails: " ", userList: " ", userManagement: " ", totalUsers: " ", activeUsers: " ", newUsers: " ", inactiveUsers: " ", allUsers: " ", manageAndTrack: "       ", user: "", role: "", lastLogin: " ", created: " ", noRoleAssigned: "    ", inviteUser: "   ", bulkActions: " ", selectUsers: " ", exportUsers: "  ", importUsers: "  ", filterUsers: "  ", searchUsers: " ", sortUsers: "  ", userRoles: " ", userPermissions: " ", userGroups: " ", userTeams: " ", userDepartments: " ", userLocations: " ", userStatus: " ", userType: " ", userLevel: " ", userCategory: " ", userTags: " ", userNotes: " ", userHistory: " ", userLogs: " ", userAudit: " ", userReports: " ", userAnalytics: " " }, hce = { title: "", addLead: " ", editLead: "  ", deleteLead: " ", leadDetails: " ", leadList: " ", leadManagement: " ", totalLeads: " ", newLeads: " ", qualified: "", closed: "", searchLeads: " ...", leadSource: " ", leadStatus: " ", leadStage: " ", leadType: " ", leadPriority: " ", leadScore: " ", leadOwner: " ", leadAssigned: "  ", leadContact: " ", leadCompany: " ", leadIndustry: " ", leadSize: " ", leadRevenue: " ", leadBudget: " ", leadTimeline: " ", leadNotes: " ", leadHistory: " ", leadActivities: " ", leadTasks: " ", leadEmails: " ", leadCalls: " ", leadMeetings: " ", leadDocuments: " ", leadReports: " ", leadAnalytics: " ", leadConversion: " ", leadPipeline: " ", leadFunnel: " ", leadTracking: " ", leadScoring: " ", leadNurturing: " ", leadQualification: " ", leadProspecting: " ", leadGeneration: " ", leadCapture: " ", leadImport: " ", leadExport: " ", leadBulkActions: "  ", leadFilter: " ", leadSearch: " ", leadSort: "  ", status: { new: "", contacted: " ", qualified: "", proposal: "", negotiation: "", closed: "", lost: " " }, table: { lead: "", company: "", status: "", assignedTo: " ", created: " ", actions: "" }, form: { createNewLead: "  ", editLead: "  ", viewLead: " ", personalInformation: " ", firstName: " ", lastName: " ", email: "", phone: "", company: "", position: "", leadSource: " ", status: "", notes: "", assignedTo: " ", tags: "", enterFirstName: "   ", enterLastName: "   ", enterEmail: "  ", enterPhone: "   ", enterCompany: "    ", enterPosition: "  ", enterNotes: "         ...", selectLeadSource: "  ", selectStatus: " ", selectAssignedUser: "    ", selectTags: " ", allStatuses: " ", itemsPerPage: "  ", unassigned: "   ", manageAndTrack: "       ", allLeads: " " }, pagination: { previous: "", next: "", showing: "  ", to: "", of: "", results: "" }, deleteConfirmation: "        ?       ", deleteSuccess: "    ", deleteError: "   ", fetchError: "    ", saveError: "   " }, fce = { title: "", addRole: " ", editRole: "  ", deleteRole: " ", roleDetails: " ", roleList: " ", roleManagement: " ", permissions: "", totalRoles: " ", activeRoles: " ", totalPermissions: " ", inactiveRoles: " ", searchRoles: " ...", roleName: " ", roleDescription: " ", rolePermissions: " ", roleUsers: " ", roleHierarchy: " ", roleLevel: " ", roleType: " ", roleCategory: " ", roleStatus: " ", roleAccess: " ", roleScope: " ", roleInheritance: " ", roleDelegation: " ", roleAssignment: " ", roleRemoval: " ", roleTransfer: " ", roleAudit: " ", roleHistory: " ", roleReports: " ", roleAnalytics: " ", roleSettings: " ", roleConfiguration: " ", roleTemplates: " ", rolePresets: " ", roleCustomization: " " }, xce = { login: "", logout: "", register: "", signup: " ", signin: " ", forgotPassword: "  ", resetPassword: "  ", changePassword: " ", email: "", password: "", confirmPassword: "   ", rememberMe: "  ", staySignedIn: "  ", createAccount: " ", alreadyHaveAccount: "    ?", dontHaveAccount: "  ?", signInWith: "    ", signUpWith: "    ", or: "", continue: " ", back: "", next: "", previous: "", submit: " ", cancel: " ", save: "", update: " ", delete: "", edit: " ", view: "", close: " ", yes: "", no: "", confirm: " ", success: "", error: "", warning: "", info: "", loading: "   ...", processing: "   ...", pleaseWait: "  ...", thankYou: "!", welcome: " !", goodbye: "!", seeYouLater: " !", takeCare: " !", haveAGreatDay: "   !", goodMorning: "!", goodAfternoon: " !", goodEvening: "!", goodNight: " !" }, pce = { changeFromLastMonth: "{{value}}   ", changeLastMonth: "{{value}}  ", changeFromYesterday: "{{value}}  " }, yce = { confirmDelete: "   ", confirmAction: "   ", areYouSure: "   ?", thisActionCannotBeUndone: "      ", deleteConfirmation: "  ", actionConfirmation: "  ", warning: "", information: "", success: "", error: "", close: " ", cancel: " ", confirm: " ", yes: "", no: "", ok: " ", retry: "  ", ignore: " ", abort: " ", continue: " ", back: "", next: "", previous: "", finish: " ", skip: "", reset: " ", apply: " ", save: "", update: " ", create: "", edit: " ", delete: "", remove: "", add: "", insert: " ", append: "", prepend: " ", replace: "", move: " ", copy: " ", paste: " ", cut: "", duplicate: " ", clone: " ", archive: " ", unarchive: " ", hide: "", show: "", expand: " ", collapse: " ", minimize: " ", maximize: " ", restore: " ", refresh: " ", reload: "  ", restart: "  ", stop: "", pause: "", play: "", resume: " " }, vce = { required: "", optional: "", invalid: "", valid: "", error: "", success: "", warning: "", info: "", help: "", hint: "", tip: "", note: "", example: "", sample: "", template: "", default: "", custom: "", standard: "", advanced: "", basic: "", simple: "", complex: "", easy: "", hard: "", difficult: "", challenging: "", straightforward: "", complicated: "", intricate: "", elaborate: "", detailed: "", comprehensive: "", thorough: "", complete: "", partial: "", incomplete: "", finished: "", unfinished: "", done: " ", undone: " ", ready: "", notReady: " ", prepared: "", unprepared: "", set: "", unset: "", configured: "  ", unconfigured: "   ", enabled: "", disabled: "", active: "", inactive: "", online: "", offline: "", connected: " ", disconnected: "", available: "", unavailable: "", busy: "", free: "", occupied: "", vacant: "", open: "", closed: "", locked: "", unlocked: "", secure: "", insecure: "", public: "", private: "", shared: "", exclusive: "", common: "", rare: "", unique: "", ordinary: "", extraordinary: "", normal: "", abnormal: "", regular: "", irregular: "", nonStandard: "-", conventional: "", unconventional: "", traditional: "", modern: "", contemporary: "", classic: "", vintage: "", antique: "", new: "", old: "", fresh: "", stale: "", recent: " ", ancient: "", current: "", previous: "", next: "", last: "", first: "", initial: "", final: "", beginning: "", end: "", start: "", stop: "", begin: " ", finish: " " }, bce = { navigation: ice, common: oce, user: lce, sidebar: cce, languages: dce, actions: uce, dashboard: mce, users: gce, leads: hce, roles: fce, auth: xce, stats: pce, modals: yce, forms: vce }, wce = { dashboard: "Panel de Control", users: "Usuarios", leads: "Leads", roles: "Roles", income: "Ingresos" }, jce = { filter: "Filtrar", showFilters: "Mostrar filtros", hide: "Ocultar", show: "Mostrar", search: "Buscar", status: "Estado", actions: "Acciones", language: "Idioma", logout: "Cerrar sesin", information: "Informacin" }, Nce = { greeting: "Hola, {{name}}", profile: "Perfil de Usuario", settings: "Configuracin", help: "Ayuda y Soporte" }, kce = { collapse: "Contraer Barra Lateral", expand: "Expandir Barra Lateral", menu: "Men" }, Sce = { en: "Ingls", hi: "Hindi", es: "Espaol", fr: "Francs", de: "Alemn", ar: "rabe", zh: "Chino", ja: "Japons", ko: "Coreano", pt: "Portugus" }, Cce = { save: "Guardar", cancel: "Cancelar", edit: "Editar", delete: "Eliminar", create: "Crear", update: "Actualizar" }, Ece = { welcome: "Bienvenido de vuelta!", totalUsers: "Usuarios totales", activeUsers: "Usuarios activos", totalRoles: "Roles totales", recentActivity: "Actividad reciente" }, Ace = { title: "Usuarios", userManagement: "Gestin de usuarios", addUser: "Agregar usuario", totalUsers: "Usuarios totales", activeUsers: "Usuarios activos", newUsers: "Usuarios nuevos", inactiveUsers: "Usuarios inactivos", allUsers: "Todos los usuarios", manageAndTrack: "Administra y sigue tus cuentas de usuario", user: "Usuario", role: "Rol", lastLogin: "ltimo acceso", created: "Creado", noRoleAssigned: "Sin rol asignado", searchUsers: "Buscar usuarios..." }, Pce = { title: "Leads", leadManagement: "Gestin de leads", addLead: "Agregar lead", totalLeads: "Leads totales", newLeads: "Leads nuevos", qualified: "Calificados", closed: "Cerrados", searchLeads: "Buscar leads...", status: { new: "Nuevo", contacted: "Contactado", qualified: "Calificado", proposal: "Propuesta", negotiation: "Negociacin", closed: "Cerrado", lost: "Perdido" }, table: { lead: "Lead", company: "Empresa", status: "Estado", assignedTo: "Asignado a", created: "Creado", actions: "Acciones" }, form: { createNewLead: "Crear Nuevo Lead", editLead: "Editar Lead", viewLead: "Ver Lead", personalInformation: "Informacin Personal", firstName: "Nombre", lastName: "Apellido", email: "Correo", phone: "Telfono", company: "Empresa", position: "Cargo", leadSource: "Fuente del Lead", status: "Estado", notes: "Notas", assignedTo: "Asignado a", tags: "Etiquetas", enterFirstName: "Ingrese el nombre", enterLastName: "Ingrese el apellido", enterEmail: "Ingrese el correo", enterPhone: "Ingrese el telfono", enterCompany: "Ingrese el nombre de la empresa", enterPosition: "Ingrese el cargo", enterNotes: "Ingrese cualquier nota adicional sobre este lead...", selectLeadSource: "Seleccione la fuente del lead", selectStatus: "Seleccione el estado", selectAssignedUser: "Seleccione el usuario asignado", selectTags: "Seleccione las etiquetas", allStatuses: "Todos los Estados", itemsPerPage: "Elementos por pgina", unassigned: "Sin asignar", manageAndTrack: "Administra y sigue tu pipeline de leads", allLeads: "Todos los Leads" }, pagination: { previous: "Anterior", next: "Siguiente", showing: "Mostrando", to: "a", of: "de", results: "resultados" }, deleteConfirmation: "Ests seguro de que quieres eliminar este lead? Esta accin no se puede deshacer.", deleteSuccess: "Lead eliminado exitosamente", deleteError: "Error al eliminar el lead", fetchError: "Error al obtener los leads", saveError: "Error al guardar el lead" }, Tce = { changeFromLastMonth: "{{value}} del mes pasado", changeLastMonth: "{{value}} el mes pasado", changeFromYesterday: "{{value}} de ayer" }, Dce = { title: "Roles", permissions: "Permisos", roleManagement: "Gestin de roles", createRole: "Crear rol", totalRoles: "Roles totales", activeRoles: "Roles activos", inactiveRoles: "Roles inactivos", totalPermissions: "Permisos totales", searchRoles: "Buscar roles..." }, Oce = { navigation: wce, common: jce, user: Nce, sidebar: kce, languages: Sce, actions: Cce, dashboard: Ece, users: Ace, leads: Pce, stats: Tce, roles: Dce }, Ice = { dashboard: "Tableau de Bord", users: "Utilisateurs", leads: "Prospects", roles: "Rles", income: "Revenus" }, Lce = { filter: "Filtrer", showFilters: "Afficher les filtres", hide: "Masquer", show: "Afficher", search: "Rechercher", status: "Statut", actions: "Actions", language: "Langue", logout: "Dconnexion" }, Rce = { greeting: "Bonjour, {{name}}", profile: "Profil Utilisateur", settings: "Paramtres", help: "Aide et Support" }, Mce = { collapse: "Rduire la Barre Latrale", expand: "Dvelopper la Barre Latrale", menu: "Menu" }, _ce = { en: "Anglais", hi: "Hindi", es: "Espagnol", fr: "Franais", de: "Allemand", ar: "Arabe", zh: "Chinois", ja: "Japonais", ko: "Coren", pt: "Portugais" }, $ce = { save: "Enregistrer", cancel: "Annuler", edit: "Modifier", delete: "Supprimer", create: "Crer", update: "Mettre  Jour" }, Uce = { welcome: "Bon retour !", totalUsers: "Utilisateurs totaux", activeUsers: "Utilisateurs actifs", totalRoles: "Rles totaux", recentActivity: "Activit rcente" }, Fce = { title: "Utilisateurs", userManagement: "Gestion des utilisateurs", addUser: "Ajouter un utilisateur", totalUsers: "Utilisateurs totaux", activeUsers: "Utilisateurs actifs", newUsers: "Nouveaux utilisateurs", inactiveUsers: "Utilisateurs inactifs", allUsers: "Tous les utilisateurs", manageAndTrack: "Grez et suivez vos comptes utilisateur", user: "Utilisateur", role: "Rle", lastLogin: "Dernire connexion", created: "Cr", noRoleAssigned: "Aucun rle attribu", searchUsers: "Rechercher des utilisateurs..." }, zce = { title: "Prospects", leadManagement: "Gestion des prospects", addLead: "Ajouter un prospect", totalLeads: "Prospects totaux", newLeads: "Nouveaux prospects", qualified: "Qualifis", closed: "Ferms", searchLeads: "Rechercher des prospects...", status: { new: "Nouveau", contacted: "Contact", qualified: "Qualifi", proposal: "Proposition", negotiation: "Ngociation", closed: "Ferm", lost: "Perdu" } }, Bce = { title: "Rles", permissions: "Autorisations", roleManagement: "Gestion des rles", createRole: "Crer un rle", totalRoles: "Rles totaux", activeRoles: "Rles actifs", inactiveRoles: "Rles inactifs", totalPermissions: "Autorisations totales", searchRoles: "Rechercher des rles..." }, qce = { navigation: Ice, common: Lce, user: Rce, sidebar: Mce, languages: _ce, actions: $ce, dashboard: Uce, users: Fce, leads: zce, roles: Bce }, Hce = { dashboard: "Dashboard", users: "Benutzer", leads: "Leads", roles: "Rollen", income: "Einkommen" }, Wce = { filter: "Filtern", showFilters: "Filter anzeigen", hide: "Ausblenden", show: "Anzeigen", search: "Suche", status: "Status", actions: "Aktionen", language: "Sprache", logout: "Abmelden" }, Vce = { greeting: "Hallo, {{name}}", profile: "Benutzerprofil", settings: "Einstellungen", help: "Hilfe & Support" }, Gce = { collapse: "Seitenleiste Einklappen", expand: "Seitenleiste Ausklappen", menu: "Men" }, Kce = { en: "Englisch", hi: "Hindi", es: "Spanisch", fr: "Franzsisch", de: "Deutsch", ar: "Arabisch", zh: "Chinesisch", ja: "Japanisch", ko: "Koreanisch", pt: "Portugiesisch" }, Yce = { save: "Speichern", cancel: "Abbrechen", edit: "Bearbeiten", delete: "Lschen", create: "Erstellen", update: "Aktualisieren" }, Qce = { welcome: "Willkommen zurck!", totalUsers: "Gesamtbenutzer", activeUsers: "Aktive Benutzer", totalRoles: "Gesamtrollen", recentActivity: "Aktuelle Aktivitt" }, Xce = { title: "Benutzer", userManagement: "Benutzerverwaltung", addUser: "Benutzer hinzufgen", totalUsers: "Gesamtbenutzer", activeUsers: "Aktive Benutzer", newUsers: "Neue Benutzer", inactiveUsers: "Inaktive Benutzer", allUsers: "Alle Benutzer", manageAndTrack: "Verwalten und verfolgen Sie Ihre Benutzerkonten", user: "Benutzer", role: "Rolle", lastLogin: "Letzte Anmeldung", created: "Erstellt", noRoleAssigned: "Keine Rolle zugewiesen", searchUsers: "Benutzer suchen..." }, Zce = { title: "Leads", leadManagement: "Lead-Management", addLead: "Lead hinzufgen", totalLeads: "Gesamtleads", newLeads: "Neue Leads", qualified: "Qualifiziert", closed: "Geschlossen", searchLeads: "Leads suchen...", status: { new: "Neu", contacted: "Kontaktiert", qualified: "Qualifiziert", proposal: "Angebot", negotiation: "Verhandlung", closed: "Geschlossen", lost: "Verloren" } }, Jce = { title: "Rollen", permissions: "Berechtigungen", roleManagement: "Rollenverwaltung", createRole: "Rolle erstellen", totalRoles: "Gesamtrollen", activeRoles: "Aktive Rollen", inactiveRoles: "Inaktive Rollen", totalPermissions: "Gesamtberechtigungen", searchRoles: "Rollen suchen..." }, ede = { navigation: Hce, common: Wce, user: Vce, sidebar: Gce, languages: Kce, actions: Yce, dashboard: Qce, users: Xce, leads: Zce, roles: Jce }, tde = { dashboard: " ", users: "", leads: " ", roles: "", income: "" }, rde = { filter: "", showFilters: "  ", hide: "", show: "", search: "", status: "", actions: "", language: "", logout: " " }, ade = { greeting: " {{name}}", profile: "  ", settings: "", help: " " }, sde = { collapse: "  ", expand: "  ", menu: "" }, nde = { en: "", hi: "", es: "", fr: "", de: "", ar: "", zh: "", ja: "", ko: "", pt: "" }, ide = { save: "", cancel: "", edit: "", delete: "", create: "", update: "" }, ode = { welcome: " !", totalUsers: " ", activeUsers: " ", totalRoles: " ", recentActivity: " " }, lde = { title: "", userManagement: " ", addUser: " ", totalUsers: " ", activeUsers: " ", newUsers: " ", inactiveUsers: "  ", allUsers: " ", manageAndTrack: "    ", user: "", role: "", lastLogin: "  ", created: " ", noRoleAssigned: "   ", searchUsers: "  ..." }, cde = { title: " ", leadManagement: "  ", addLead: "  ", totalLeads: "  ", newLeads: "  ", qualified: "", closed: "", searchLeads: "   ...", status: { new: "", contacted: " ", qualified: "", proposal: "", negotiation: "", closed: "", lost: "" } }, dde = { title: "", permissions: "", roleManagement: " ", createRole: " ", totalRoles: " ", activeRoles: " ", inactiveRoles: "  ", totalPermissions: " ", searchRoles: "  ..." }, ude = { navigation: tde, common: rde, user: ade, sidebar: sde, languages: nde, actions: ide, dashboard: ode, users: lde, leads: cde, roles: dde }, mde = { dashboard: "", users: "", leads: "", roles: "", income: "" }, gde = { filter: "", showFilters: "", hide: "", show: "", search: "", status: "", actions: "", language: "", logout: "" }, hde = { greeting: "{{name}}", profile: "", settings: "", help: "" }, fde = { collapse: "", expand: "", menu: "" }, xde = { en: "", hi: "", es: "", fr: "", de: "", ar: "", zh: "", ja: "", ko: "", pt: "" }, pde = { save: "", cancel: "", edit: "", delete: "", create: "", update: "" }, yde = { welcome: "", totalUsers: "", activeUsers: "", totalRoles: "", recentActivity: "" }, vde = { title: "", userManagement: "", addUser: "", totalUsers: "", activeUsers: "", newUsers: "", inactiveUsers: "", allUsers: "", manageAndTrack: "", user: "", role: "", lastLogin: "", created: "", noRoleAssigned: "", searchUsers: "..." }, bde = { title: "", leadManagement: "", addLead: "", totalLeads: "", newLeads: "", qualified: "", closed: "", searchLeads: "...", status: { new: "", contacted: "", qualified: "", proposal: "", negotiation: "", closed: "", lost: "" }, table: { lead: "", company: "", status: "", assignedTo: "", created: "", actions: "" }, form: { email: "", allLeads: "" } }, wde = { title: "", permissions: "", roleManagement: "", createRole: "", totalRoles: "", activeRoles: "", inactiveRoles: "", totalPermissions: "", searchRoles: "..." }, jde = { navigation: mde, common: gde, user: hde, sidebar: fde, languages: xde, actions: pde, dashboard: yde, users: vde, leads: bde, roles: wde }, Nde = { dashboard: "", users: "", leads: "", roles: "", income: "" }, kde = { filter: "", showFilters: "", hide: "", show: "", search: "", status: "", actions: "", language: "", logout: "" }, Sde = { greeting: "{{name}}", profile: "", settings: "", help: "" }, Cde = { collapse: "", expand: "", menu: "" }, Ede = { en: "", hi: "", es: "", fr: "", de: "", ar: "", zh: "", ja: "", ko: "", pt: "" }, Ade = { save: "", cancel: "", edit: "", delete: "", create: "", update: "" }, Pde = { welcome: "", totalUsers: "", activeUsers: "", totalRoles: "", recentActivity: "" }, Tde = { title: "", userManagement: "", addUser: "", totalUsers: "", activeUsers: "", newUsers: "", inactiveUsers: "", allUsers: "", manageAndTrack: "", user: "", role: "", lastLogin: "", created: "", noRoleAssigned: "", searchUsers: "..." }, Dde = { title: "", leadManagement: "", addLead: "", totalLeads: "", newLeads: "", qualified: "", closed: "", searchLeads: "...", status: { new: "", contacted: "", qualified: "", proposal: "", negotiation: "", closed: "", lost: "" } }, Ode = { title: "", permissions: "", roleManagement: "", createRole: "", totalRoles: "", activeRoles: "", inactiveRoles: "", totalPermissions: "", searchRoles: "..." }, Ide = { navigation: Nde, common: kde, user: Sde, sidebar: Cde, languages: Ede, actions: Ade, dashboard: Pde, users: Tde, leads: Dde, roles: Ode }, Lde = { dashboard: "", users: "", leads: "", roles: "", income: "" }, Rde = { filter: "", showFilters: " ", hide: "", show: "", search: "", status: "", actions: "", language: "", logout: "" }, Mde = { greeting: ", {{name}}", profile: " ", settings: "", help: "  " }, _de = { collapse: " ", expand: " ", menu: "" }, $de = { en: "", hi: "", es: "", fr: "", de: "", ar: "", zh: "", ja: "", ko: "", pt: "" }, Ude = { save: "", cancel: "", edit: "", delete: "", create: "", update: "" }, Fde = { welcome: "   !", totalUsers: " ", activeUsers: " ", totalRoles: " ", recentActivity: " " }, zde = { title: "", userManagement: " ", addUser: " ", totalUsers: " ", activeUsers: " ", newUsers: " ", inactiveUsers: " ", allUsers: " ", manageAndTrack: "   ", user: "", role: "", lastLogin: " ", created: "", noRoleAssigned: "  ", searchUsers: " ..." }, Bde = { title: "", leadManagement: " ", addLead: " ", totalLeads: " ", newLeads: " ", qualified: " ", closed: "", searchLeads: " ...", status: { new: "", contacted: "", qualified: " ", proposal: "", negotiation: "", closed: "", lost: "" } }, qde = { title: "", permissions: "", roleManagement: " ", createRole: " ", totalRoles: " ", activeRoles: " ", inactiveRoles: " ", totalPermissions: " ", searchRoles: " ..." }, Hde = { navigation: Lde, common: Rde, user: Mde, sidebar: _de, languages: $de, actions: Ude, dashboard: Fde, users: zde, leads: Bde, roles: qde }, Wde = { dashboard: "Painel de Controle", users: "Usurios", leads: "Leads", roles: "Funes", income: "Receita" }, Vde = { filter: "Filtrar", showFilters: "Mostrar filtros", hide: "Ocultar", show: "Mostrar", search: "Buscar", status: "Status", actions: "Aes", language: "Idioma", logout: "Sair" }, Gde = { greeting: "Ol, {{name}}", profile: "Perfil do Usurio", settings: "Configuraes", help: "Ajuda e Suporte" }, Kde = { collapse: "Recolher Barra Lateral", expand: "Expandir Barra Lateral", menu: "Menu" }, Yde = { en: "Ingls", hi: "Hindi", es: "Espanhol", fr: "Francs", de: "Alemo", ar: "rabe", zh: "Chins", ja: "Japons", ko: "Coreano", pt: "Portugus" }, Qde = { save: "Salvar", cancel: "Cancelar", edit: "Editar", delete: "Excluir", create: "Criar", update: "Atualizar" }, Xde = { welcome: "Bem-vindo de volta!", totalUsers: "Usurios totais", activeUsers: "Usurios ativos", totalRoles: "Funes totais", recentActivity: "Atividade recente" }, Zde = { title: "Usurios", userManagement: "Gerenciamento de usurios", addUser: "Adicionar usurio", totalUsers: "Usurios totais", activeUsers: "Usurios ativos", newUsers: "Novos usurios", inactiveUsers: "Usurios inativos", allUsers: "Todos os usurios", manageAndTrack: "Gerencie e acompanhe suas contas de usurio", user: "Usurio", role: "Funo", lastLogin: "ltimo acesso", created: "Criado", noRoleAssigned: "Nenhuma funo atribuda", searchUsers: "Pesquisar usurios..." }, Jde = { title: "Leads", leadManagement: "Gerenciamento de leads", addLead: "Adicionar lead", totalLeads: "Leads totais", newLeads: "Novos leads", qualified: "Qualificados", closed: "Fechados", searchLeads: "Pesquisar leads...", status: { new: "Novo", contacted: "Contactado", qualified: "Qualificado", proposal: "Proposta", negotiation: "Negociao", closed: "Fechado", lost: "Perdido" } }, eue = { title: "Funes", permissions: "Permisses", roleManagement: "Gerenciamento de funes", createRole: "Criar funo", totalRoles: "Funes totais", activeRoles: "Funes ativas", inactiveRoles: "Funes inativas", totalPermissions: "Permisses totais", searchRoles: "Pesquisar funes..." }, tue = { navigation: Wde, common: Vde, user: Gde, sidebar: Kde, languages: Yde, actions: Qde, dashboard: Xde, users: Zde, leads: Jde, roles: eue }, rue = { en: { translation: nce }, hi: { translation: bce }, es: { translation: Oce }, fr: { translation: qce }, de: { translation: ede }, ar: { translation: ude }, zh: { translation: jde }, ja: { translation: Ide }, ko: { translation: Hde }, pt: { translation: tue } }; js.use(dL).use(G$).init({ resources: rue, fallbackLng: "en", debug: !1, interpolation: { escapeValue: !1 }, detection: { order: ["localStorage", "navigator"], caches: ["localStorage"] } }); document.documentElement.classList.add("no-blur"); ZR.createRoot(document.getElementById("root")).render(t.jsx(Je.StrictMode, { children: t.jsx(ZM, { future: { v7_startTransition: !0, v7_relativeSplatPath: !0 }, children: t.jsx(dle, {}) }) }));
